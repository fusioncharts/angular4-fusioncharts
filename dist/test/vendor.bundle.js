webpackJsonp(["vendor"],{

/***/ "../../../../css-loader/lib/css-base.js":
/***/ (function(module, exports) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
module.exports = function(useSourceMap) {
	var list = [];

	// return the list of modules as css string
	list.toString = function toString() {
		return this.map(function (item) {
			var content = cssWithMappingToString(item, useSourceMap);
			if(item[2]) {
				return "@media " + item[2] + "{" + content + "}";
			} else {
				return content;
			}
		}).join("");
	};

	// import a list of modules into the list
	list.i = function(modules, mediaQuery) {
		if(typeof modules === "string")
			modules = [[null, modules, ""]];
		var alreadyImportedModules = {};
		for(var i = 0; i < this.length; i++) {
			var id = this[i][0];
			if(typeof id === "number")
				alreadyImportedModules[id] = true;
		}
		for(i = 0; i < modules.length; i++) {
			var item = modules[i];
			// skip already imported module
			// this implementation is not 100% perfect for weird media query combinations
			//  when a module is imported multiple times with different media queries.
			//  I hope this will never occur (Hey this way we have smaller bundles)
			if(typeof item[0] !== "number" || !alreadyImportedModules[item[0]]) {
				if(mediaQuery && !item[2]) {
					item[2] = mediaQuery;
				} else if(mediaQuery) {
					item[2] = "(" + item[2] + ") and (" + mediaQuery + ")";
				}
				list.push(item);
			}
		}
	};
	return list;
};

function cssWithMappingToString(item, useSourceMap) {
	var content = item[1] || '';
	var cssMapping = item[3];
	if (!cssMapping) {
		return content;
	}

	if (useSourceMap && typeof btoa === 'function') {
		var sourceMapping = toComment(cssMapping);
		var sourceURLs = cssMapping.sources.map(function (source) {
			return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'
		});

		return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
	}

	return [content].join('\n');
}

// Adapted from convert-source-map (MIT)
function toComment(sourceMap) {
	// eslint-disable-next-line no-undef
	var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
	var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;

	return '/*# ' + data + ' */';
}


/***/ }),

/***/ "../../../../fusioncharts/fusioncharts.charts.js":
/***/ (function(module, exports) {

/*
 FusionCharts JavaScript Library
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>
*/
(function(B){"object"===typeof module&&"undefined"!==typeof module.exports?module.exports=B:B(FusionCharts)})(function(B){B.register("module",["private","modules.renderer.js-charts",function(){B.register("module",["private","modules.renderer.js-column2d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("column2d",{standaloneInit:!0,friendlyName:"Column Chart",creditLabel:b,defaultDatasetType:"column",applicableDSList:{column:!0},singleseries:!0},a.sscartesian,
{enablemousetracking:!0})}]);B.register("module",["private","modules.renderer.js-column3d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("column3d",{friendlyName:"3D Column Chart",defaultDatasetType:"column3d",applicableDSList:{column3d:!0},defaultPlotShadow:1,creditLabel:b,is3D:!0,standaloneInit:!0,hasLegend:!1,singleseries:!0,fireGroupEvent:!0,defaultZeroPlaneHighlighted:!1},a.sscartesian3d,{showplotborder:0,enablemousetracking:!0})}]);B.register("module",
["private","modules.renderer.js-bar2d",function(){var a=this.hcLib,b=a.chartAPI,a=!a.CREDIT_REGEX.test(this.window.location.hostname);b("bar2d",{friendlyName:"Bar Chart",isBar:!0,standaloneInit:!0,defaultDatasetType:"bar2d",creditLabel:a,applicableDSList:{bar2d:!0},singleseries:!0,spaceManager:b.barbase},b.ssbarcartesian,{enablemousetracking:!0})}]);B.register("module",["private","modules.renderer.js-bar3d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;
a("bar3d",{friendlyName:"3D Bar Chart",defaultDatasetType:"bar3d",applicableDSList:{bar3d:!0},defaultPlotShadow:1,fireGroupEvent:!0,standaloneInit:!0,creditLabel:b,is3D:!0,isBar:!0,singleseries:!0,defaultZeroPlaneHighlighted:!1},a.ssbarcartesian3d,{showplotborder:0,enablemousetracking:!0})}]);B.register("module",["private","modules.renderer.js-area2d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("area2d",{friendlyName:"Area Chart",standaloneInit:!0,
creditLabel:b,defaultDatasetType:"area",singleseries:!0,defaultPlotShadow:0},a.sscartesian,{enablemousetracking:!0},a.areabase)}]);B.register("module",["private","modules.renderer.js-line",function(){var a=this.hcLib,b=a.chartAPI,a=!a.CREDIT_REGEX.test(this.window.location.hostname);b("line",{friendlyName:"Line Chart",standaloneInit:!0,creditLabel:a,defaultPlotShadow:1,singleseries:!0,axisPaddingLeft:0,axisPaddingRight:0,defaultDatasetType:"line"},b.sscartesian,{zeroplanethickness:1,enablemousetracking:!0,
zeroplanealpha:40,showzeroplaneontop:0},b.areabase)}]);B.register("module",["private","modules.renderer.js-pareto2d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),m=a.chartAPI,C=a.pluck,p=a.pluckNumber,K=a.componentDispose;m("pareto2d",{defaultDatasetType:"column2d",singleseries:!0,creditLabel:b,_createDatasets:function(){var a=this.components,b=this.jsonData,h=this.is3D,x=a.numberFormatter,l=b.data||b.dataset&&b.dataset[0]&&b.dataset[0].data,f=l&&l.length,q=b.chart,
y=this.defaultDatasetType,b=new (B.get("component",["dataset","Pareto"])),G=p(q.showcumulativeline,1),L=[],k,t;if(l){for(q=0;q<f;q++)k=l[q],t=x.getCleanValue(k.value),null!==t&&"true"!==k.vline&&!0!==k.vline&&1!==k.vline&&"1"!==k.vline&&L.push(k);this.config.categories=L;x=a.dataset||(a.dataset=[]);(l=C(y))&&l.toLowerCase();l=B.register("component",["datasetGroup","column"]);l=a[void 0]=new l;l.chart=this;l.init();if(f=h?B.get("component",["dataset","Column3d"]):B.get("component",["dataset","Column"]))(h=
x[0])?(y=L.length,l=h.components.data.length,y<l&&h.removeData(y,l-y),h.JSONData={data:L},b.configure.call(h)):(h=new f,x.push(h),h.chart=this,h.index=q,l&&l.addDataSet(h,0,0),b.init(h,L,y));a=a.yAxis[1];if(G)a&&a.setAxisConfig({drawLabels:!0,drawPlotLines:!0,drawAxisName:!0,drawAxisLine:!0,drawPlotBands:!0,drawTrendLines:!0,drawTrendLabels:!0}),a.show(),f=B.get("component",["dataset","line"]),(h=x[1])?(y=L.length,l=h.components.data.length,y<l&&h.removeData(y,l-y),h.JSONData={data:L},b.configure.call(h)):
(h=new f,x.push(h),h.chart=this,h.index=q,b.init(h,L,"line"));else{if(h=x[1])K.call(h),x.pop();a&&(a.setAxisConfig({drawLabels:!1,drawPlotLines:!1,drawAxisName:!1,drawAxisLine:!1,drawPlotBands:!1,drawTrendLines:!1,drawTrendLabels:!1}),a.hide())}}else this.setChartMessage()},_setCategories:function(){var a=this.components,b=this.jsonData,h=b.dataset,x=a.numberFormatter,a=a.xAxis,b=b.data||h&&h[0].data||[],h=[],l,f=b.length,q,y={},G=0,L;for(q=0;q<f;q++){l=b[q];L=x.getCleanValue(l.value,!0);if("true"===
l.vline||"1"===l.vline||1===l.vline||!0===l.vline)y[G]=l;else if(null===L)continue;else l.value=L,h.push(l);G++}h.sort(function(a,f){return f.value-a.value});for(q in y)h.splice(q,0,y[q]);a[0].setCategory(h)},standaloneInit:!0,hasLegend:!1,isPercentage:!0},m.msdybasecartesian,{enablemousetracking:!0,plotfillalpha:a.preDefStr.NINETYSTRING})}]);B.register("module",["private","modules.renderer.js-pareto3d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),m=a.chartAPI;
m("pareto3d",{standaloneInit:!0,is3D:!0,friendlyName:"3D Pareto Chart",creditLabel:b,fireGroupEvent:!0,defaultPlotShadow:1,singleseries:!0,hasLegend:!1,defaultDatasetType:"column3d",_createDatasets:m.pareto2d,_setCategories:m.pareto2d,isPercentage:!0},m.msdybasecartesian3d,{plotfillalpha:a.preDefStr.NINETYSTRING,use3dlineshift:1,enablemousetracking:!0})}]);B.register("module",["private","modules.renderer.js-pie2d",function(){var a=this,b=a.hcLib,m=b.hasTouch,C=a.window,p=C.document,K=b.BLANKSTRING,
N=b.pluck,Q=b.pluckNumber,h=b.toRaphaelColor,x="createTouch"in p,l=x&&!(C.navigator.maxTouchPoints||C.navigator.msMaxTouchPoints),f=b.each,q=b.plotEventHandler,y=b.schedular,G=b.priorityList,L=8===C.document.documentMode?"visible":"",k=Math,t=k.sin,E=k.cos,v=k.round,z=k.atan2,Y=k.min,ka=k.max,ea=k.abs,B=k.PI,ia=k.ceil,ra=k.floor,sa=B/180,na=180/B,ma=Math.PI,U=ma/2,ba=2*ma,Aa=ma+U,ua=b.graphics.convertColor,P=b.POSITION_BOTTOM,fa=b.POSITION_RIGHT,B=b.chartAPI,qa=b.COMMASTRING,wa=b.ZEROSTRING,ta=b.ONESTRING,
b=!b.CREDIT_REGEX.test(C.location.hostname),xa=function(a,r,e,c,d){return z((r-e[1]-c.top)/d,a-e[0]-c.left)};B("pie2d",{friendlyName:"Pie Chart",standaloneInit:!0,defaultSeriesType:"pie",defaultPlotShadow:1,reverseLegend:1,alignCaptionWithCanvas:0,sliceOnLegendClick:!0,isSingleSeries:!0,dontShowLegendByDefault:!0,defaultDatasetType:"Pie2D",applicableDSList:{Pie2D:!0},defaultZeroPlaneHighlighted:!1,creditLabel:b,_plotDragMove:function(f,r){var e=r[0],c=r[1],d=r[2],n=r[3],g=this.data("plotItem"),ga=
g.chart,g=g.seriesData,T=ga.components.dataset[0].config;isNaN(e)||isNaN(c)||!T.enableRotation||g.singletonCase||g.isRightClicked||(e=xa.call(f,d,n,g.pieCenter,g.chartPosition,1),g.isRotating||(g.dragStartAngle!==e&&(g.isRotating=!0),a.raiseEvent("RotationStart",{startingAngle:g._rotationalStartAngle=ga._startingAngle()},ga.chartInstance)),T.startAngle+=e-g.dragStartAngle,g.dragStartAngle=e,g.moveDuration=0,T.updateInited||(T.updateInited=!0,setTimeout(ga._batchRotate||(ga._batchRotate=function(){ga._rotate();
T.updateInited=!1}),50)))},_plotDragStart:function(a,r){var e=r[0],c=r[1],d=this.data("plotItem"),n=d.chart,d=d.seriesData,g=n.components.dataset[0].config,ga=-g.startAngle;d.isRightClicked=m||0===a.button||1===a.button?!1:!0;if(g.enableRotation&&!d.isRightClicked){d.isRotating=!1;g=n.linkedItems.container;n={left:0,top:0};if(g.getBoundingClientRect)g=g.getBoundingClientRect(),n.top=g.top+(C.pageYOffset||p.scrollTop||0)-(p.clientTop||0),n.left=g.left+(C.pageXOffset||p.scrollLeft||0)-(p.clientLeft||
0);else for(;g;)n.left+=g.offsetLeft||0,n.top+=g.offsetTop||0,g!==p.body&&g!==p.documentElement&&(n.left-=g.scrollLeft||0,n.top-=g.scrollTop||0),g=g.offsetParent;d.chartPosition=n;e=xa.call(a,e,c,d.pieCenter,d.chartPosition,1);d.dragStartAngle=e;d.startingAngleOnDragStart=ga}},_plotDragEnd:function(f){var r,e=this.data("plotItem"),c=e.chart,d=c.config,n=d.linkedChartOpened,g=e.seriesData;g.isRightClicked||(d.clicked=!0,c.disposed||n||c._rotate(),!g.isRotating&&c._plotGraphicClick.call(e.graphic,f),
delete d.clicked,g.isRotating&&(setTimeout(function(){g.isRotating=!1},0),a.raiseEvent("RotationEnd",{startingAngle:r=c._startingAngle(),changeInAngle:r-g._rotationalStartAngle},c.chartInstance)))},_plotRollOver:function(a){var r=this.plotItem||this.data("plotItem"),e=r.chart,c=e.components.dataset[0].config,d,n;c.isRotating||(q.call(this,e,a,"DataPlotRollOver"),e.onPlotHover(this,!0));c.isHovered=!0;(a=r.innerDiameter)&&(d=r.centerLabelConfig)&&(n=d.label)&&e.drawDoughnutCenterLabel(n,r.center[0],
r.center[1],a,a,d,!1)},onPlotHover:function(a,r){var e=a.data("plotItem"),c=e.center,d=e.rolloverProperties||{},n=r?d.color:e.color,g=r?d.borderWidth:e.borderWidth,ga=r?d.borderColor:e.borderColor;n&&(r&&(n.cx=c[0],n.cy=c[1],n.r=e.radius),d.enabled&&e.graphic.attr({fill:h(n),"stroke-width":g,stroke:ga}))},_plotRollOut:function(a){var r=this.plotItem||this.data("plotItem"),e=r.chart,c=e.components.dataset[0].config,d,n;c.isRotating||(q.call(this,e,a,"DataPlotRollOut"),e.onPlotHover(this,!1));c.isHovered=
!1;(a=r.innerDiameter)&&(d=c.centerLabelConfig)&&((n=d.label)||!n)&&e.drawDoughnutCenterLabel(n,r.center[0],r.center[1],a,a,d,!1)},_rotate:function(){var a,r,e=this.components.dataset[0],c=e.config,d=e.components.data,n=this.config,g=c.slicingDistance,e=e.config,ga=ba/e.valueTotal,T=n.canvasLeft+.5*n.canvasWidth,n=n.canvasTop+.5*n.canvasHeight,w=c.pieMinRadius,V=.5*(c.piePlotOptions.innerSize||0),S,ca,F,f,u;S=(c.startAngle||0)%ba;for(u=0;u<d.length;u+=1)F=d[u].config,f=d[u].graphics,a=F.y,null!==
a&&void 0!==a&&(ca=S,S-=e.singletonCase?ba:a*ga,a=.5*(S+ca),F.angle=a,F.transX=E(a)*g,F.transY=t(a)*g,F.slicedTranslation="t"+E(a)*g+qa+t(a)*g,(r=F._rotateAttrs)||(r=F._rotateAttrs={ringpath:[],transform:K}),a=r.ringpath,a[0]=T,a[1]=n,a[2]=w,a[3]=V,a[4]=S,a[5]=ca,r.transform=F.sliced?F.slicedTranslation:K,f.element.attr(r));this.placeDataLabels(!0,d,c)},getPlotData:function(a,r){var e=this.components.dataset[0],c=e.components.data[a].config,e=e.config.userData||(e.config.userData=[]),d,n;if(e[a])e=
e[a];else{e=e[a]={};for(n in c)"object"!==typeof(d=c[n])&&"function"!==typeof d&&0!==n.indexOf("_")&&(e[n]=d);e.value=e.y;e.categoryLabel=e.label=e.seriesName;delete e.y;delete e.total;delete e.doNotSlice;delete e.name;delete e.seriesName;delete e.centerAngle;delete e.showInLegend;delete e.angle;delete e.endAngle;delete e.isVisible;delete e.setColor;delete e.slicedTranslation;delete e.startAngle;delete e.transX;delete e.transY;delete e.pValue}e.sliced=r;return e},_plotGraphicClick:function(f){var r,
e=this.element||this,c=e.plotItem||e.data("plotItem"),d=e.data("eventArgs")||{},n=c.chart,g=c.index,ga=n.components.dataset[0],T=n.config,w=ga.config,V=w.enableMultiSlicing,S=ga.components.data[g],ca=ga.config.labelDrawID,F=S.graphics,S=S.config,b=S.doNotSlice,u;r=S.slicedTranslation;var k=n.get("config","animationObj"),ga=k.duration||200,G=k.dummyObj,L=k.animObj,k=k.animType,A=e.data("eventArgs").link,A=A&&A.split(/\s*[\-\:]\s*/)[0].toLowerCase();!w.isRotating&&f&&q.call(e,n,f);if(!(w.isRotating||
w.singletonCase||b))if("newchart"===A||"newmap"===A)T.linkedChartOpened=!0,ca&&y.removeJob(ca);else if(T.linkedChartOpened=!1,f=!V&&n.sliceInOtherPies(g),!(u=S.sliced)||!f){if(x&&!l){f=(new Date).getTime();if(c.lastSliceTimeStamp&&400>f-c.lastSliceTimeStamp)return;c.lastSliceTimeStamp=f}T=F.element;c=F.connector;w=F.label||F.dataLabel;r="object"===typeof r?"t"+r:r;V=S.connectorPath;F=(u?-1:1)*S.transX;f=(u?-1:1)*S.transY;e=T.data("eventArgs")||T.data("eventArgs",{});a.raiseEvent("slicingStart",{slicedState:u,
dataIndex:"index"in d&&d.index,data:n.getPlotData(g,u)},n.chartInstance);T.animateWith(G,L,{transform:u?"t0,0":r},ga,k,function(){a.raiseEvent("slicingEnd",{slicedState:u,dataIndex:"index"in d&&d.index,data:n.getPlotData(g,u)},n.chartInstance)});w&&w.x&&((r=w.data("textPos"))||(r=w.data("textPos",{x:w.x,y:w.y})),w.animateWith(G,L,{x:w.x+(u?0:F)},ga,k),r.x=w.x+(u?0:F));V&&(r=V.slice(0),r[1]+=F,r[2]+=f,r[4]+=F,r[6]+=F,c.animateWith(G,L,{path:r},ga,k),S.connectorPath=r);return e.isSliced=u=S.sliced=
!u}},sliceInOtherPies:function(a){var r=this.components.dataset[0],e=r.components.data,c=e.length,d=0,n;for(r.enableMultiSlicing=!0;c--;)c!==a&&(n=e[c]).config.sliced&&++d&&this._plotGraphicClick.call(n.graphics);r.enableMultiSlicing=!1;return!!d},placeDataLabels:function(){var a=function(e,c){return e.point.value-c.point.value},r=function(e,c){return e.angle-c.angle},e=["start","start","end","end"],c=[-1,1,1,-1],d=[1,1,-1,-1];return function(n,g,ga,T){var w=this.config,V=this.components,S=V.dataset[0],
ca=V.legend.config,F=ca.symbolWidth,q=ca.align,ca=ca.borderWidth,u=S.graphics,b=S.config,G=w.canvasLeft,y=w.canvasTop,S=w.canvasWidth,A=G+.5*w.canvasWidth,l=y+.5*w.canvasHeight,Ba=this.linkedItems.smartLabel,ya=b.dataLabelOptions,v=ya.style,h=Q(ia(parseFloat(v.lineHeight)),12),N=1===g.length?w.singletonPlaceValue:!1,x=ya.skipOverlapLabels,R=ya.manageLabelOverflow,D=ya.connectorPadding,J;J=T&&T.metrics||[A,l,2*b.pieMinRadius,b.innerSize||0];var M=J[1],z=J[0];T=.5*J[2];var b=[[],[],[],[]],A=ga.labelsRadius=
T+ya.distance,Z=l=parseInt(v.fontSize,10),W=Z/2,D=[D,D,-D,-D];ga=ga.labelsMaxInQuadrant=ra(A/Z);var ya=ya.isSmartLineSlanted,H=J[3]/2,X,O,K,p,C,m,B,P,ha,Ea,I,oa,la,va,fa;J=Number.POSITIVE_INFINITY;var ja,pa;O=[];K=[];O=this.get("config","animationObj");var na=n?0:O.duration||0,qa=O.dummyObj,sa=O.animObj,ua=O.animType,ta=this._plotDragMove,Sa=this._plotDragStart,Ka=this._plotDragEnd,za=this._plotRollOver,aa=this._plotRollOut,wa=V.paper,xa=u.dataLabelContainer,da,Ga;Ba.useEllipsesOnOverflow(w.useEllipsesWhenOverflow);
n||Ba.setStyle(v);if(1==g.length&&!H&&N)O=g[0],(da=O.config._textAttrs).text&&(pa=O.graphics,ja=O.config,I=pa.label,O.slicedTranslation=[G,y],da["text-anchor"]="middle",da.x=0,da.y=0,da.transform=["t",z,M],I?I.animateWith(qa,sa,da,na,ua):I=pa.label=wa.text(da,Ga,xa).drag(ta,Sa,Ka).hover(za,aa),I.x=z,I.data("textPos",{x:z,y:M}).data("plotItem",da.plotItem).data("eventArgs",da.eventArgs),null!==ja.y&&void 0!==ja.y&&I.show(),pa.connector&&pa.connector.attr({path:[]}));else if(N)fa=H+(T-H)/2,f(g,function(e){ja=
e.config;(da=ja._textAttrs).text&&(pa=e.graphics,I=pa.label,null!==ja.y&&void 0!==ja.y&&((Ea=pa.connector)&&Ea.show(),I&&I.show()),da.transform="t0,0",ha=ja.angle,P=M+fa*t(ha),p=z+fa*E(ha),da._x=p,da._y=P,e.sliced&&(va=e.slicedTranslation,oa=va[0]-G,la=va[1]-y,p+=oa,P+=la),da["text-anchor"]="middle",da.x=0,da.y=0,da.transform=["t",p,P],I?I.animateWith(qa,sa,da,na,ua):I=pa.label=wa.text(da,Ga,xa).drag(ta,Sa,Ka).hover(za,aa),I.x=da._x,I.x=da._x,I.y=da._y,I.data("plotItem",da.plotItem).data("eventArgs",
da.eventArgs),da.visibility===L&&I.show())});else{for(n=g.length-1;0<=n;n--)if(O=g[n],ja=O.config,da=ja._textAttrs,da.text=ja.displayValue)pa=O.graphics,null!==ja.y&&void 0!==ja.y&&(I=pa.label,(Ea=pa.connector)&&Ea.show(),I&&I.show()),da.text=ja.displayValue,da.transform="t0,0",ha=ja.angle%ba,0>ha&&(ha=ba+ha),V=0<=ha&&ha<U?1:ha<ma?2:ha<Aa?3:0,b[V].push({point:O,angle:ha});for(n=g=4;n--;){if(x&&(V=b[n].length-ga,0<V))for(b[n].sort(a),u=b[n].splice(0,V),V=0,N=u.length;V<N;V+=1)O=u[V].point,da=O.config._textAttrs,
pa=O.graphics,pa.label&&pa.label.attr("visibility","hidden"),pa.connector&&pa.connector.attr({visibility:"hidden"});b[n].sort(r)}n=ka(b[0].length,b[1].length,b[2].length,b[3].length);V=ka(Y(n,ga)*Z,A+Z);K=b[0].concat(b[1]);O=b[2].concat(b[3]);for(n=K.length-1;0<=n;n--)u=K[n].point.config,delete u.clearance,delete u.clearanceShift,H=ea(V*t(u.angle)),Math.abs(J-H)<2*h&&(u.clearance=0,K[n+1].point.clearanceShift=h/2),J=H;J=Number.POSITIVE_INFINITY;n=0;for(N=O.length;n<N;n++)u=O[n].point.config,delete u.clearance,
delete u.clearanceShift,H=ea(V*t(u.angle)),Math.abs(J-H)<2*h&&(u.clearance=0,O[n-1].point.clearanceShift=h/2),J=H;b[1].reverse();for(b[3].reverse();g--;){u=b[g];N=u.length;x||(Z=N>ga?V/N:l,W=Z/2);h=N*Z;J=V;for(n=0;n<N;n+=1,h-=Z)H=ea(V*t(u[n].angle)),J<H?H=J:H<h&&(H=h),J=(u[n].oriY=H)-Z;v=e[g];N=V-(N-1)*Z;J=0;for(n=u.length-1;0<=n;--n,N+=Z)if(O=u[n].point,ha=u[n].angle,ja=O.config,da=ja._textAttrs,da.text&&(Ga=ja._textCss,pa=O.graphics,O=ja.sliced,I=pa.label,H=ea(V*t(ha)),H<J?H=J:H>N&&(H=N),J=H+Z,
h=void 0===ja.clearance?2*ia(Q(parseFloat(ja.style.border),12),12):2*ia(Q(parseFloat(ja.style.border),ja.clearance)),m=(H+u[n].oriY)/2,H=z+d[g]*A*E(k.asin(m/V)),m*=c[g],m+=M,B=M+T*t(ha),K=z+T*E(ha),(2>g&&H<K||1<g&&H>K)&&(H=K),p=H+D[g],P=m-W-2,C=p+D[g],da._x=C,R&&(X=1<g?C-w.canvasLeft:w.canvasLeft+S-C,Ba.setStyle(ja.style),h=Q(ia(parseFloat(ja.style.lineHeight)),12)+h,"right"===q&&0<ja.transX&&(X-=F+2*ca),h=Ba.getSmartText(ja.displayValue,X,h),void 0===ja.clearance&&h.height>Z&&(m+=Z),"right"!==q&&
0<ja.transY&&(m-=Z),da.text=h.text,da.tooltip=h.tooltext),da._y=P,O&&(oa=ja.transX,la=ja.transY,p+=oa,H+=oa,K+=oa,B+=la,C+=oa),da["text-anchor"]=v,da.vAlign="middle",da.x=C,da.y=m,(h=I&&I.data("textPos"))?I.attr({x:h.x,y:h.y}).animateWith(qa,sa,da,na):I=pa.label=wa.text(da,Ga,xa).drag(ta,Sa,Ka).hover(za,aa),I.x=da._x,I._x=da._x,I.y=da._y,da.tooltip&&(I.tooltip(da.tooltip),delete da.tooltip),da.visibility===L&&I.show(),I.data("textPos",{x:C,y:m}).data("plotItem",da.plotItem).data("eventArgs",da.eventArgs),
Ea=pa.connector))ja.connectorPath=h=["M",K,B,"L",ya?H:K,m,p,m],(O=Ea.data("connectorPath"))?w.clicked||Ea.attr({path:O.path}).animateWith(qa,sa,{path:h},na):Ea.attr({path:h}),Ea.data("connectorPath",{path:h})}}}}(),_spaceManager:function(){var a=this.config,r=this.components,e=r.dataset[0],c=e.components.data,d=e.config,n=r.legend,g=r.colorManager,ga=this.linkedItems.smartLabel,T=d.dataLabelCounter,w=0,f=this.jsonData.chart,r=Q(f.managelabeloverflow,0),S=Q(f.slicingdistance),ca=d.preSliced||a.allPlotSliceEnabled!==
wa||f.showlegend===ta&&f.interactivelegend!==wa?ea(Q(S,20)):0,F=Q(f.pieradius,0),b=(S=Q(f.enablesmartlabels,f.enablesmartlabel,1))?Q(f.skipoverlaplabels,f.skipoverlaplabel,1):0,u=Q(f.issmartlineslanted,1),q=T?Q(f.labeldistance,f.nametbdistance,5):ca,k=Q(f.smartlabelclearance,5),G=a.width,A=a.height,y=(this._manageActionBarSpace(.225*A)||{}).bottom,G=G-(a.marginRight+a.marginLeft),A=A-(a.marginTop+a.marginBottom)-(y?y+a.marginBottom:0),y=Y(A,G),L=N(f.smartlinecolor,g.getColor("plotFillColor")),t=Q(f.smartlinealpha,
100),E=Q(f.smartlinethickness,.7),e=d.dataLabelOptions=e._parseDataLabelOptions(),g=e.style,g=T?Q(parseInt(g.lineHeight,10),12):0,h=0===F?.15*y:F,l=2*h,v={bottom:0,right:0},R=d.pieYScale,y=d.pieSliceDepth;e.connectorWidth=E;e.connectorPadding=Q(f.connectorpadding,5);e.connectorColor=ua(L,t);T&&(S&&(q=k),q+=ca);k=l+2*(g+q);k=this._manageChartMenuBar(k<A?A-k:A/2);A-=(k.top||0)+(k.bottom||0);d.showLegend&&(this.hasLegend=!0,N(f.legendposition,P).toLowerCase()!==fa?(v=n._manageLegendPosition(A/2),A-=
v.bottom):(v=n._manageLegendPosition(A/2),G-=v.right));this._allocateSpace(v);ga.useEllipsesOnOverflow(a.useEllipsesWhenOverflow);if(1!==T)for(;T--;)ga.setStyle(c[T].config.style||a.dataLabelStyle),n=ga.getOriSize(c[T].config.displayValue),w=ka(w,n.width);0===F?h=this._stubRadius(G,w,A,q,ca,g,h):(d.slicingDistance=ca,d.pieMinRadius=h,e.distance=q);a=A-2*(h*R+g);d.managedPieSliceDepth=y>a?y-a:d.pieSliceDepth;e.isSmartLineSlanted=u;e.enableSmartLabels=S;e.skipOverlapLabels=b;e.manageLabelOverflow=r},
_stubRadius:function(a,r,e,c,d,n,g){var ga=this.components.dataset[0],f=ga.config,w=Q(this.jsonData.chart.slicingdistance),ga=f.dataLabelOptions||(f.dataLabelOptions=ga._parseDataLabelOptions()),V=0,V=Y(a/2-r-d,e/2-n)-c;V>=g?g=V:w||(d=c=ka(Y(c-(g-V),d),10));f.slicingDistance=d;f.pieMinRadius=g;ga.distance=c;return g},getDataSet:function(a){return this.components.dataset[a]},_startingAngle:function(a,r){var e,c=this.components.dataset[0].config,d=(e=c.startAngle)*-na+(0>-1*e?360:0);isNaN(a)||(c.singletonCase||
c.isRotating?d=c.startAngle:(a+=r?d:0,c.startAngle=-a*sa,this._rotate(a),d=a));return v(100*((d%=360)+(0>d?360:0)))/100},eiMethods:{isPlotItemSliced:function(a){var r,e,c,d=this.apiInstance;return d&&d.components.dataset&&(c=d.components.dataset[0])&&(r=c.components.data)&&r.length&&r[a]&&(e=r[a].config)&&e.sliced},addData:function(){var a,r=this.apiInstance;return r&&r.components.dataset&&(a=r.components.dataset[0])&&a.addData.apply(a,arguments)},removeData:function(){var a,r=this.apiInstance;return r&&
r.components.dataset&&(a=r.components.dataset[0])&&a.removeData.apply(a,arguments)},updateData:function(){var a,r=this.apiInstance;return r&&r.components.dataset&&(a=r.components.dataset[0])&&a.updateData.apply(a,arguments)},slicePlotItem:function(a,r,e){var c,d,n,g,ga,f=!!r,w=this.apiInstance,V=w.chartInstance.args.asyncRender,S=w.getJobList();if(e||V)S.eiMethods.push(y.addJob(function(){ga=w&&w.components.dataset&&(c=w.components.dataset[0])&&(d=c.components.data)&&(g=d.length)&&d[a=c.config.reversePlotOrder?
g-a-1:a]&&(n=d[a].config)&&((f!==n.sliced||void 0===r)&&w._plotGraphicClick.call(d[a].graphics.element)||n.sliced);"function"===typeof e&&e(ga)},G.postRender));else return w&&w.components.dataset&&(c=w.components.dataset[0])&&(d=c.components.data)&&(g=d.length)&&d[a=c.config.reversePlotOrder?g-a-1:a]&&(n=d[a].config)&&((f!==n.sliced||void 0===r)&&w._plotGraphicClick.call(d[a].graphics.element)||n.sliced)},centerLabel:function(a,r){var e=this.apiInstance,c=e.getJobList(),d=function(){var c=e.components.dataset[0],
d=c.config,ga=d.piePlotOptions.innerSize,f=d.pieCenter,w=f[0],f=f[1],d=d.centerLabelConfig,V;if("object"!==typeof r)r=d;else for(V in d)void 0===r[V]&&(r[V]=d[V]);r.label=a;c.centerLabelConfig=r;ga&&e.drawDoughnutCenterLabel(a||"",w,f,ga,ga,r,!0)};e.chartInstance.args.asyncRender?c.eiMethods.push(y.addJob(d,G.postRender)):d()},startingAngle:function(a,r,e){var c=this.apiInstance,d=c.chartInstance.args.asyncRender,n=c.getJobList(),g;if(e||d)n.eiMethods.push(y.addJob(function(){g=c._startingAngle(a,
r);"function"===typeof e&&e(g)},G.postRender));else return c._startingAngle(a,r)}}},B.guageBase,{plotborderthickness:1,alphaanimation:0,singletonPlaceValue:!0,usedataplotcolorforlabels:0,enableslicing:ta})}]);B.register("module",["private","modules.renderer.js-pie3d",function(){function a(r){this.config={};this.linkedItems={chart:r}}var b=this,m=b.hcLib,C=m.Raphael,p=m.hasTouch,K=b.window,N=m.getPosition,Q=m.pluck,h=m.pluckNumber,x=m.each,l=m.plotEventHandler,f=8===K.document.documentMode?"visible":
"",q=Math,y=q.sin,G=q.cos,L=q.round,k=q.atan2,t=q.min,E=q.max,v=q.abs,z=q.PI,B=q.ceil,ka=q.floor,ea=Math.PI,va=ea/2,ia=2*ea,ra=ea+va,sa=m.chartAPI,na=!m.CREDIT_REGEX.test(K.location.hostname),ma=function(r,e,c,d,n){return k((e-c[1]-d.top)/n,r-c[0]-d.left)},U=m.graphics.getDarkColor,ba=m.graphics.getLightColor,Aa=m.getFirstValue,ua=m.graphics.convertColor,P=m.COMMASTRING,fa=m.toRaphaelColor,qa=m.hasSVG,wa=function(r,e){for(var c=[],d=0,n=r.length;d<n;d++)c[d]=e.call(r[d],r[d],d,r);return c},ta=function(r,
e){var c=e?360:ia;r=(r||0)%c;return 0>r?c+r:r},xa={},Fa={};sa("pie3d",{defaultDatasetType:"Pie3D",applicableDSList:{Pie3D:!0},is3D:!0,friendlyName:"3D Pie Chart",fireGroupEvent:!0,creditLabel:na,getPointColor:function(r){return r},_configureManager:function(){var r=this.components.dataset[0],e=r.config,c=r.components,r=c.Pie3DManager,c=c.data;r&&r.configure(e.pieSliceDepth,1===c.length,e.use3DLighting,!1)},defaultPlotShadow:0,_preDrawCalculate:function(){var r,e,c=this.config,d=0,n=this.components.dataset[0],
g=n.config;r=n.components;e=g.dataLabelOptions;var ga=g.pie3DOptions=n._parsePie3DOptions(),f=Q(g.startAngle,0)%ia,w=g.managedPieSliceDepth,V=g.slicedOffset=ga.slicedOffset,S=c.canvasWidth,ca=c.canvasHeight,F=[c.canvasLeft+.5*S,c.canvasTop+.5*ca-.5*w],b,u,c=r.data,k,E=t(S,ca),l,A=e.distance;b=g.pieYScale;var v=g.slicedOffsetY||(g.slicedOffsetY=V*g.pieYScale);k=r.Pie3DManager;F.push(2*g.pieMinRadius,ga.innerSize||0);F=wa(F,function(e,c){return(l=/%$/.test(e))?[S,ca-w,E,E][c]*parseInt(e,10)/100:e});
F[2]/=2;F[3]/=2;F.push(F[2]*b);F.push((F[2]+F[3])/2);F.push(F[5]*b);n.getX=function(e,c){u=q.asin((e-F[1])/(F[2]+A));return F[0]+(c?-1:1)*G(u)*(F[2]+A)};g.center=F;x(c,function(e){d+=e.config.y});g.labelsRadius=F[2]+A;g.labelsRadiusY=g.labelsRadius*b;g.quadrantHeight=(ca-w)/2;g.quadrantWidth=S/2;n=L(1E3*f)/1E3;ga=n+ia;f=h(parseInt(e.style.fontSize,10),10)+4;g.maxLabels=ka(g.quadrantHeight/f);g.labelFontSize=f;g.connectorPadding=h(e.connectorPadding,5);g.isSmartLineSlanted=Q(e.isSmartLineSlanted,!0);
g.connectorWidth=h(e.connectorWidth,1);g.enableSmartLabels=e.enableSmartLabels;k||(k=r.Pie3DManager=new a(this),this.get("graphics","datasetGroup").trackTooltip(!0));this._configureManager();for(r=c.length-1;0<=r;--r)e=c[r],e=e.config,f=n,k=d?e.y/d:0,n=L(1E3*(n+k*ia))/1E3,n>ga&&(n=ga),b=n,e.shapeArgs={start:L(1E3*f)/1E3,end:L(1E3*b)/1E3},e.centerAngle=u=(b+f)/2%ia,e.slicedTranslation=[L(G(u)*V),L(y(u)*v)],f=G(u)*F[2],g.radiusY=b=y(u)*F[4],e.tooltipPos=[F[0]+.7*f,F[1]+b],e.percentage=100*k,e.total=
d},placeDataLabels:function(){var r=function(e,c){return e.point.value-c.point.value},e=function(e,c){return e.angle-c.angle},c=["start","start","end","end"],d=[-1,1,1,-1],n=[1,1,-1,-1];return function(g){var a,T,w=this.config,V=this.components,S=V.dataset[0],ca=S.config,F=S.components.data,b=ca.piePlotOptions,u=w.canvasLeft,k=w.canvasTop,l=w.canvasWidth,N=u+.5*w.canvasWidth,A=k+.5*w.canvasHeight,K=this.linkedItems.smartLabel,Ba=ca.dataLabelOptions,ya=Ba.style;a=h(B(parseFloat(ya.lineHeight)),12);
a=Aa(Ba.placeInside,!1);var z=Ba.skipOverlapLabels,m=Ba.manageLabelOverflow,p=Ba.connectorPadding,C=Ba.distance,R=Ba.connectorWidth,D=[[],[],[],[]],J=parseInt(ya.fontSize,10),M=J,Q=M/2,p=[p,p,-p,-p],Z=Ba.isSmartLineSlanted,W,H,X,O,ka,P,Da,Ra,fa,U,ha,Ea,I,oa,la,C=0<C,ba=ca.center||(ca.center=[N,A,b.size,b.innerSize||0]),na=ba[1],ja=ba[0],b=ba[2],N=ba[4],A=ca.labelsRadius,pa=L(100*ca.labelsRadiusY)/100,qa=ca.maxLabels,sa=ca.enableSmartLabels,ma=ca.pieSliceDepth/2;H=this.get("config","animationObj");
var ua=g?0:H.duration,ta=H.dummyObj,wa=H.animObj,xa=H.animType,za,aa,Ta=this._plotDragMove,Fa=this._plotDragStart,da=this._plotDragEnd,Ga=this._plotRollOver,La=this._plotRollOut,Ma=V.paper,Ua=S.graphics.dataLabelContainer;K.useEllipsesOnOverflow(w.useEllipsesWhenOverflow);if(ca.dataLabelCounter)if(g||K.setStyle(ya),1==F.length)H=F[0],oa=H.graphics,I=H.config,aa=I._textAttrs,za=I._textCss,ha=oa.label,la=oa.connector,I.slicedTranslation=[u,k],null!==I.y&&void 0!==I.y&&(aa.visibility=f,aa["text-anchor"]=
"middle",aa.x=ja,aa.y=na+Q-2,aa._x=ja),ha?ha.animateWith(ta,wa,aa,ua,xa):ha=oa.label=Ma.text(aa,za,Ua).drag(Ta,Fa,da).hover(Ga,La),aa._x&&(ha.x=aa._x,delete aa.x),ha.data("plotItem",aa.plotItem).data("eventArgs",aa.eventArgs),aa.visibility===f&&ha.show(),la&&la.hide();else if(a)x(F,function(e){oa=e.graphics;I=e.config;aa=I._textAttrs;ha=oa.label;if(null!==I.y&&void 0!==I.y){U=I.angle;fa=na+ba[6]*y(U)+Q-2;ka=ja+ba[5]*G(U);aa._x=ka;aa._y=fa;if(I.sliced){e=e.slicedTranslation;var c=e[1]-k;ka+=e[0]-u;
fa+=c}aa.visibility=f;aa.align="middle";aa.x=ka;aa.y=fa}ha?ha.animateWith(ta,wa,aa,ua,xa):ha=oa.label=Ma.text(aa,za,Ua).drag(Ta,Fa,da).hover(Ga,La);ha.data("plotItem",aa.plotItem).data("eventArgs",aa.eventArgs);aa.visibility===f&&ha.show();ha.x=aa._x;ha._x=aa._x;ha._y=aa._y});else{x(F,function(e){oa=e.graphics;I=e.config;za=I._textCss;aa=I._textAttrs;if(aa.text=I.displayValue)oa=e.graphics,null!==I.y&&void 0!==I.y&&(ha=oa.label,(la=oa.connector)&&la.show(),ha&&ha.show()),ha=oa.label,U=I.angle,0>U&&
(U=ia+U),Ea=0<=U&&U<va?1:U<ea?2:U<ra?3:0,D[Ea].push({point:e,angle:U})});for(V=w=4;V--;){if(z&&(S=D[V].length-qa,0<S))for(D[V].sort(r),ca=D[V].splice(0,S),S=0,a=ca.length;S<a;S+=1)H=ca[S].point,oa=H.graphics,oa.label&&oa.label.attr("visibility","hidden"),oa.connector&&oa.connector.attr({visibility:"hidden"});D[V].sort(e)}V=E(D[0].length,D[1].length,D[2].length,D[3].length);pa=E(t(V,qa)*M,pa+M);D[1].reverse();D[3].reverse();for(K.setStyle(ya);w--;){S=D[w];a=S.length;z||(M=a>qa?pa/a:J,Q=M/2);ca=a*M;
ya=pa;for(V=0;V<a;V+=1,ca-=M)H=v(pa*y(S[V].angle)),ya<H?H=ya:H<ca&&(H=ca),ya=(S[V].oriY=H)-M;ca=c[w];F=pa-(a-1)*M;ya=0;for(V=S.length-1;0<=V;--V,F+=M)H=S[V].point,oa=H.graphics,I=H.config,aa=I._textAttrs,za=I._textCss,null!==I.y&&aa.text&&(U=S[V].angle,X=I.sliced,ha=oa.label,H=v(pa*y(U)),H<ya?H=ya:H>F&&(H=F),ya=H+M,Da=(H+S[V].oriY)/2,H=ja+n[w]*A*G(q.asin(Da/pa)),Da*=d[w],Da+=na,Ra=na+N*y(U),O=ja+b*G(U),(2>w&&H<O||1<w&&H>O)&&(H=O),ka=H+p[w],fa=Da+Q-2,P=ka+p[w],aa._x=P,m&&(W=1<w?P-u:u+l-P,K.setStyle(I.style),
a=h(B(parseFloat(I.style.lineHeight)),12)+(2*B(parseFloat(I.style.border),12)||0),a=K.getSmartText(I.displayValue,W,a),aa.text=a.text,aa.tooltip=a.tooltext),U<ea&&(Da+=ma,Ra+=ma,fa+=ma),aa._y=fa,X&&(a=I.transX,X=I.transY,ka+=a,H+=a,O+=a,Ra+=X,P+=a),aa.visibility=f,aa["text-anchor"]=ca,(a=ha&&ha.data("textPos"))&&ha.attr({x:a.x,y:a.y}),aa.x=P,aa.y=Da,!g&&a?ha.animateWith(ta,wa,aa,ua,xa):ha?aa&&ha.attr(aa):ha=oa.label=Ma.text(aa,za,Ua).drag(Ta,Fa,da).hover(Ga,La),ha.data("textPos",{x:P,y:Da}).data("plotItem",
aa.plotItem).data("eventArgs",aa.eventArgs),ha.x=aa._x,ha._x=aa._x,ha.y=aa._y,aa.tooltip&&(ha.tooltip(aa.tooltip),delete aa.tooltip),C&&R&&sa&&(la=oa.connector,I.connectorPath||(T=!0),I.connectorPath=a=["M",O,Ra,"L",Z?H:O,Da,ka,Da],a={path:a,"stroke-width":R,stroke:Ba.connectorColor||"#606060",visibility:f},la&&(g||T?la.attr(a):la.animateWith(ta,wa,a,ua,xa))))}}}}(),animate:function(){var r,e,c,d,n=this,a=n.components.dataset[0],f=a.components.data;r=n.graphics.datasetGroup;var T=f.length;e=a.config.alphaAnimation;
c=function(){n.disposed||n.disposing||n.placeDataLabels(!1)};var w=n.get("config","animationObj"),a=w.duration||0,V=w.dummyObj,S=w.animObj,w=w.animType;if(e)r.attr({opacity:0}),r.animateWith(V,S,{opacity:1},a,w,c);else for(r=0;r<T;r++)if(e=f[r],c=e.graphics,e=e.config,d=e.shapeArgs,e=2*z,c=c.element)c.attr({start:e,end:e}),c=d.start,d=d.end,(void 0).animateWith(V,S,{cx:c-e,cy:d-e},a,w)},_rotate:function(a){var e=this.components.dataset[0],c=e.config,e=e.components,d=e.data,n=c.slicedOffset,g=c.slicedOffsetY,
f=c.startAngle,T;a=isNaN(a)?-c._lastAngle:a;T=(a-f)%360;c.startAngle=h(a,c.startAngle)%360;T=-(T*z)/180;e.Pie3DManager&&e.Pie3DManager.rotate(T);x(d,function(e){var c=[],d=e.config;e=e.graphics.element;var c=d.shapeArgs,a=c.start+=T,c=c.end+=T,r=d.angle=ta((a+c)/2),a=d.sliced,c=G(r),r=y(r),c=d.slicedTranslation=[L(c*n),L(r*g)];d.transX=c[0];d.transY=c[1];d.slicedX=a?G(T)*n:0;d.slicedY=a?y(T)*g:0;e&&a&&e.attr({transform:"t"+c[0]+","+c[1]})});this.placeDataLabels(!0,d)},_plotRollOver:function(a){var e=
this.data("plotItem"),c=e.chart,d=c.config,n=c.components.dataset[0],g=n.components.data[e.index],e=g.graphics.element,g=g.config.hoverEffects;n.config.isRotating||(l.call(e,c,a,"DataPlotRollOver"),g.enabled&&e.attr(g));d.isHovered=!0},_plotRollOut:function(a){var e=this.data("plotItem"),c=e.chart,d=c.config,n=c.components.dataset[0],g=n.components.data[e.index],e=g.config,g=g.graphics.element;n.config.isRotating||(l.call(g,c,a,"DataPlotRollOut"),g.attr({color:e.color.color.split(",")[0],alpha:e._3dAlpha,
borderWidth:e.borderWidth,borderColor:e.borderColor}));d.isHovered=!1},_plotDragStart:function(a,e){var c=this.data("plotItem"),d=e[0],n=e[1],g=c.chart,c=g.components.dataset[0].config;c.isRightClicked=p||0===a.button||1===a.button?!1:!0;c.enableRotation&&!c.isRightClicked&&(c.isRotating=!1,d=ma.call(a,d,n,c.center,c.chartPosition=N(g.linkedItems.container),c.pieYScale),c.dragStartAngle=d,c._lastAngle=-c.startAngle,c.startingAngleOnDragStart=c.startAngle)},_plotDragEnd:function(a){var e=this.data("plotItem"),
c=e.index,e=e.chart,d=e.config,n=e.components.dataset[0],g=n.config,n=n.components.Pie3DManager,f=g.startAngle;g.isRightClicked||(g.isRotating?(setTimeout(function(){g.isRotating=!1},0),b.raiseEvent("rotationEnd",{startingAngle:ta(f,!0),changeInAngle:f-g.startingAngleOnDragStart},e.chartInstance),!d.isHovered&&n.colorObjs[c]&&n.onPlotHover(c,!1)):e._plotGraphicClick.call(this,a))},_plotDragMove:function(a,e){var c=this.data("plotItem"),d=e[1],n=e[2],g=e[3],f=c.chart,c=f.components.dataset[0].config;
isNaN(e[0])||isNaN(d)||!c.enableRotation||c.singletonCase||c.isRightClicked||(d=ma.call(a,n,g,c.center,c.chartPosition,c.pieYScale),c.isRotating||(c.dragStartAngle!==d&&(c.isRotating=!0),b.raiseEvent("rotationStart",{startingAngle:ta(c.startAngle,!0)},f.chartInstance)),n=d-c.dragStartAngle,c.dragStartAngle=d,c.moveDuration=0,c._lastAngle+=180*n/z,d=(new Date).getTime(),c._lastTime&&!(c._lastTime+c.timerThreshold<d))||(c._lastTime||f._rotate(),c.timerId=setTimeout(function(){f.disposed&&f.disposing||
f._rotate()},c.timerThreshold),c._lastTime=d)},_stubRadius:function(a,e,c,d,n,g,f){var T=this.components.dataset[0],w=T.config,b=h(T.config.slicingdistance),T=w.dataLabelOptions||(w.dataLabelOptions=T._parseDataLabelOptions()),S=0,S=w.pieYScale;c-=w.pieSliceDepth;S=t(a/2-e-n,(c/2-g)/S)-d;S>=f?f=S:b||(n=d=E(t(d-(f-S),n),10));w.slicingDistance=n;w.pieMinRadius=f;T.distance=d;return f},_startingAngle:function(a,e){var c,d=this.components.dataset[0].config,n=(c=d.startAngle)+(0>c?360:0);isNaN(a)||d.singletonCase||
d.isRotating||(a+=e?n:0,this._rotate(a),n=a);return L(100*((n%=360)+(0>n?360:0)))/100}},sa.pie2d,{plotborderthickness:.1,alphaanimation:1});C._availableAnimAttrs&&C._availableAnimAttrs.cx&&(C._availableAnimAttrs.innerR=C._availableAnimAttrs.depth=C._availableAnimAttrs.radiusYFactor=C._availableAnimAttrs.start=C._availableAnimAttrs.end=C._availableAnimAttrs.cx);a.prototype={configure:function(a,e,c,d){var n=this.linkedItems.chart,g=n.get("components","paper"),n=n.get("graphics","datasetGroup");"object"===
typeof a&&(a=a.depth,e=a.hasOnePoint,c=a.use3DLighting,d=a.isDoughnut);this.renderer||(this.renderer=g);this.hasOnePoint=e;this.use3DLighting=c;this.isDoughnut=d;this.depth=a;!this.bottomBorderGroup&&(this.bottomBorderGroup=g.group("bottom-border",n));this.bottomBorderGroup.attr({transform:"t0,"+a});!this.slicingWallsBackGroup&&(this.slicingWallsBackGroup=g.group("slicingWalls-back-Side",n));!this.slicingWallsFrontGroup&&(this.slicingWallsFrontGroup=g.group("slicingWalls-front-Side",n));!this.topGroup&&
(this.topGroup=g.group("top-Side",n));!this.pointElemStore&&(this.pointElemStore=[]);!this.slicingWallsArr&&(this.slicingWallsArr=[]);this.moveCmdArr=["M"];this.lineCmdArr=["L"];this.closeCmdArr=["Z"];this.colorObjs=[]},getArcPath:function(a,e,c,d,n,g,f,T,w,b){return c==n&&d==g?[]:["A",f,T,0,b,w,n,g]},_parseSliceColor:function(a,e,c){var d,n,g,f,T,w,b,S,ca,F,q,u,k,G,y;y=3;var A=(d=this.use3DLighting)?xa:Fa,L=c.radiusYFactor,E=c.cx,t=c.cy,h=c.r,l=h*L,v=c.innerR||0,N=E+h,K=E-h,D=E+v,J=E-v;e=e||100;
c=e/2;A[a]&&A[a][e]?A=A[a][e]:(A[a]||(A[a]={}),A[a][e]||(A[a][e]={}),A=A[a][e],d?(d=U(a,80),n=U(a,75),w=ba(a,85),b=ba(a,70),S=ba(a,40),ca=ba(a,50),ba(a,30),F=ba(a,65),U(a,85),g=U(a,69),f=U(a,75),T=U(a,95)):(y=10,d=U(a,90),n=U(a,87),w=ba(a,93),b=ba(a,87),S=ba(a,80),F=ca=ba(a,85),ba(a,80),T=U(a,85),g=U(a,75),f=U(a,80)),q=n+P+w+P+b+P+w+P+n,k=e+P+e+P+e+P+e+P+e,u=n+P+a+P+w+P+a+P+n,G=c+P+c+P+c+P+c+P+c,S=n+P+a+P+S+P+a+P+n,g=f+P+w+P+ca+P+w+P+g,f="FFFFFF"+P+"FFFFFF"+P+"FFFFFF"+P+"FFFFFF"+P+"FFFFFF",y=0+P+
c/y+P+e/y+P+c/y+P+0,A.top=qa?{FCcolor:{gradientUnits:"userSpaceOnUse",radialGradient:!0,color:F+P+T,alpha:e+P+e,ratio:"0,100"}}:{FCcolor:{gradientUnits:"objectBoundingBox",color:b+P+b+P+w+P+n,alpha:e+P+e+P+e+P+e,angle:-72,ratio:"0,8,15,77"}},A.frontOuter={FCcolor:{gradientUnits:"userSpaceOnUse",y1:0,y2:0,color:g,alpha:k,angle:0,ratio:"0,20,15,15,50"}},A.backOuter={FCcolor:{gradientUnits:"userSpaceOnUse",y1:0,y2:0,color:S,alpha:G,angle:0,ratio:"0,62,8,8,22"}},A.frontInner={FCcolor:{gradientUnits:"userSpaceOnUse",
y1:0,y2:0,color:u,alpha:G,angle:0,ratio:"0,25,5,5,65"}},A.backInner={FCcolor:{gradientUnits:"userSpaceOnUse",y1:0,y2:0,color:q,alpha:k,angle:0,ratio:"0,62,8,8,22"}},A.topBorder={FCcolor:{gradientUnits:"userSpaceOnUse",y1:0,y2:0,color:f,alpha:y,angle:0,ratio:"0,20,15,15,50"}},A.topInnerBorder={FCcolor:{gradientUnits:"userSpaceOnUse",y1:0,y2:0,color:f,alpha:y,angle:0,ratio:"0,50,15,15,20"}},A.bottom=fa(ua(a,c)),A.startSlice=fa(ua(d,e)),A.endSlice=fa(ua(d,e)));if(A.cx!==E||A.cy!==t||A.rx!==h||A.radiusYFactor!==
L||A.innerRx!==v)qa&&(A.top.FCcolor.cx=E,A.top.FCcolor.cy=t,A.top.FCcolor.r=h,A.top.FCcolor.fx=E-.3*h,A.top.FCcolor.fy=t+1.2*l),A.topBorder.FCcolor.x1=A.backOuter.FCcolor.x1=A.frontOuter.FCcolor.x1=K,A.topBorder.FCcolor.x2=A.backOuter.FCcolor.x2=A.frontOuter.FCcolor.x2=N,A.topInnerBorder.FCcolor.x1=A.backInner.FCcolor.x1=A.frontInner.FCcolor.x1=J,A.topInnerBorder.FCcolor.x2=A.backInner.FCcolor.x2=A.frontInner.FCcolor.x2=D,A.cx=E,A.cy=t,A.rx=h,A.radiusYFactor=L,A.innerRx=v;return A},rotate:function(a){var e=
this.pointElemStore,c=0,d=e.length,n;if(!this.hasOnePoint){for(;c<d;c+=1)n=e[c],n=n._confObject,n.start+=a,n.end+=a,this._setSliceShape(n);this.refreshDrawing()}},removeSlice:function(a){var e=this.pointElemStore,c=a._confObject.elements,d=this.slicingWallsArr,n;n=e.length;var g;for(--n;0<=n;--n)g=e[n],g===a&&e.splice(n,1);n=d.length;for(--n;0<=n;--n)e=d[n],e!==c.startSlice&&e!==c.frontOuter1&&e!==c.frontOuter&&e!==c.backInner&&e!==c.endSlice||d.splice(n,1);a.hide&&a.hide();this._slicePool||(this._slicePool=
[]);this._slicePool.push(a);this.refreshDrawing()},useSliceFromPool:function(){var a=this._slicePool||(this._slicePool=[]),e=this.slicingWallsArr,c=!1;a.length&&(c=a.shift(),this.pointElemStore.push(c),c.show(),a=c._confObject.elements,e.push(a.startSlice,a.frontOuter1,a.frontOuter),a.backInner&&e.push(a.backInner),e.push(a.endSlice));return c},refreshDrawing:function(){var a=function(e,c){return e._conf.index-c._conf.index||e._conf.cIndex-c._conf.cIndex||e._conf.isStart-c._conf.isStart||e._conf.si-
c._conf.si};return function(){var e=this.slicingWallsArr,c=0,d,n=e.length,g,f,T,w,b=this.slicingWallsFrontGroup,S=this.slicingWallsBackGroup;e.sort(a);a:{var ca=e[0]&&e[0]._conf.index,F,k;w=ca<=ea;g=1;for(d=e.length;g<d;g+=1)if(k=e[g]._conf.index,F=k<=ea,F!=w||k<ca)break a;g=0}for(;c<n;c+=1,g+=1)g===n&&(g=0),d=e[g],w=d._conf.index,w<va?b.appendChild(d):w<=ea?(f?d.insertBefore(f):b.appendChild(d),f=d):w<=ra?(T?d.insertBefore(T):S.appendChild(d),T=d):S.appendChild(d)}}(),_setSliceShape:function(a,e){var c=
this.getArcPath,d=a.start,n=a.end,g=ta(d),f=ta(n),T,w,b,S,ca,F,k,u,q,L,E,A,t,h,l,v,N,K=this.isDoughnut,p=a.radiusYFactor,R=a.cx,D=a.cy,J=a.r,M=J*p,z=J+(qa?-1:2),Z=M+(qa?-1:2),W=a.innerR||0,H=W*p,X=this.depth,O=X+D,m=R+J,x=R-J,C=R+W,Q=R-W,ka=D-M,B=["M",Q,ka,"L",Q,O+M,"Z"],p=a.elements,P,Y,I,U,fa,ba="path",na=(g+f)/2,ja=g>f;w=G(g);b=y(g);S=G(f);ca=y(f);F=R+J*w;k=D+M*b;u=R+z*w;q=D+Z*b;P=k+X;Y=R+J*S;I=D+M*ca;L=R+z*S;E=D+Z*ca;U=I+X;K?(A=R+W*w,t=D+H*b,v=t+X,h=R+W*S,l=D+H*ca,N=l+X,a.startSlice=["M",F,k,
"L",F,P,A,v,A,t,"Z"],a.endSlice=["M",Y,I,"L",Y,U,h,N,h,l,"Z"]):(a.startSlice=["M",F,k,"L",F,P,R,O,R,D,"Z"],a.endSlice=["M",Y,I,"L",Y,U,R,O,R,D,"Z"]);qa?(T=(g>f?ia:0)+f-g,a.clipTopPath=K?[["M",F,k,"A",J,M,0,T>ea?1:0,1,Y,I,"L",h,l,"A",W,H,0,T>ea?1:0,0,A,t,"Z"]]:[["M",F,k,"A",J,M,0,T>ea?1:0,1,Y,I,"L",R,D,"Z"]],a.clipOuterFrontPath1=[B],a.clipTopBorderPath=[["M",u,q,"A",z,Z,0,T>ea?1:0,1,L,E,"L",Y,I,Y,I+1,"A",J,M,0,T>ea?1:0,0,F,k+1,"L",F,k,"Z"]],d!=n?g>f?g<ea?(a.clipOuterFrontPath=[["M",m,D,"A",J,M,0,
0,1,Y,I,"v",X,"A",J,M,0,0,0,m,D+X,"Z"]],a.clipOuterFrontPath1=[["M",x,D,"A",J,M,0,0,0,F,k,"v",X,"A",J,M,0,0,1,x,D+X,"Z"]],a.clipOuterBackPath=[["M",m,D,"A",J,M,0,1,0,x,D,"v",X,"A",J,M,0,1,1,m,D+X,"Z"]],K&&(a.clipInnerBackPath=[["M",C,D,"A",W,H,0,1,0,Q,D,"v",X,"A",W,H,0,1,1,C,D+X,"Z"]],a.clipInnerFrontPath=[["M",C,D,"A",W,H,0,0,1,h,l,"v",X,"A",W,H,0,0,0,C,D+X,"Z","M",Q,D,"A",W,H,0,0,0,A,t,"v",X,"A",W,H,0,0,1,Q,D+X,"Z"]])):f>ea?(a.clipOuterFrontPath=[["M",m,D,"A",J,M,0,1,1,x,D,"v",X,"A",J,M,0,1,0,m,
D+X,"Z"]],a.clipOuterBackPath=[["M",x,D,"A",J,M,0,0,1,Y,I,"v",X,"A",J,M,0,0,0,x,D+X,"Z","M",m,D,"A",J,M,0,0,0,F,k,"v",X,"A",J,M,0,0,1,m,D+X,"Z"]],K&&(a.clipInnerFrontPath=[["M",C,D,"A",W,H,0,1,1,Q,D,"v",X,"A",W,H,0,1,0,C,D+X,"Z"]],a.clipInnerBackPath=[["M",Q,D,"A",W,H,0,0,1,h,l,"v",X,"A",W,H,0,0,0,Q,D+X,"Z","M",C,D,"A",W,H,0,0,0,A,t,"v",X,"A",W,H,0,0,1,C,D+X,"Z"]])):(a.clipOuterFrontPath=[["M",m,D,"A",J,M,0,0,1,Y,I,"v",X,"A",J,M,0,0,0,m,D+X,"Z"]],a.clipOuterBackPath=[["M",F,k,"A",J,M,0,0,1,m,D,"v",
X,"A",J,M,0,0,0,F,P,"Z"]],K&&(a.clipInnerFrontPath=[["M",C,D,"A",W,H,0,0,1,h,l,"v",X,"A",W,H,0,0,0,C,D+X,"Z"]],a.clipInnerBackPath=[["M",A,t,"A",W,H,0,0,1,C,D,"v",X,"A",W,H,0,0,0,A,v,"Z"]])):g<ea?f>ea?(a.clipOuterFrontPath=[["M",F,k,"A",J,M,0,0,1,x,D,"v",X,"A",J,M,0,0,0,F,P,"Z"]],a.clipOuterBackPath=[["M",x,D,"A",J,M,0,0,1,Y,I,"v",X,"A",J,M,0,0,0,x,D+X,"Z"]],K&&(a.clipInnerFrontPath=[["M",A,t,"A",W,H,0,0,1,Q,D,"v",X,"A",W,H,0,0,0,A,v,"Z"]],a.clipInnerBackPath=[["M",Q,D,"A",W,H,0,0,1,h,l,"v",X,"A",
W,H,0,0,0,Q,D+X,"Z"]])):(a.clipOuterFrontPath=[["M",F,k,"A",J,M,0,0,1,Y,I,"v",X,"A",J,M,0,0,0,F,P,"Z"]],a.clipOuterBackPath=[B],K&&(a.clipInnerFrontPath=[["M",A,t,"A",W,H,0,0,1,h,l,"v",X,"A",W,H,0,0,0,A,v,"Z"]],a.clipInnerBackPath=[B])):(a.clipOuterFrontPath=[B],a.clipOuterBackPath=[["M",F,k,"A",J,M,0,0,1,Y,I,"v",X,"A",J,M,0,0,0,F,P,"Z"]],K&&(a.clipInnerFrontPath=[B],a.clipInnerBackPath=[["M",A,t,"A",W,H,0,0,1,h,l,"v",X,"A",W,H,0,0,0,A,v,"Z"]])):a.clipOuterFrontPath=a.clipOuterBackPath=a.clipInnerBackPath=
a.clipInnerFrontPath=[B],ba="litepath",a.clipBottomBorderPath=a.clipTopPath,a.startSlice=[a.startSlice],a.endSlice=[a.endSlice]):(z=this.moveCmdArr,Z=this.lineCmdArr,w=this.closeCmdArr,X=[R,D],b=[x,D],ka=[R,ka],S=[m,D],ca=[R,D+M],B=[x,O],fa=[m,O],u=[Q,D],q=[C,D],L=[Q,O],E=[C,O],a.clipOuterFrontPath1=[],d!=n?(g>f?g<ea?(d=c(R,D,F,k,x,D,J,M,1,0),n=c(R,D,x,D,m,D,J,M,1,0),I=c(R,D,m,D,Y,I,J,M,1,0),a.clipOuterBackPath=z.concat(b,n,Z,fa,c(R,O,m,O,x,O,J,M,0,0),w),a.clipOuterFrontPath1=z.concat([F,k],d,Z,B,
c(R,O,x,O,F,P,J,M,0,0),w),a.clipOuterFrontPath=z.concat(S,I,Z,[Y,U],c(R,O,Y,U,m,O,J,M,0,0),w),a.clipTopBorderPath=z.concat([F,k],d,n,I),K?(J=c(R,D,h,l,C,D,W,H,0,0),M=c(R,D,C,D,Q,D,W,H,0,0),t=c(R,D,Q,D,A,t,W,H,0,0),a.clipInnerBackPath=z.concat(q,M,Z,L,c(R,O,Q,O,C,O,W,H,1,0),w),a.clipInnerFrontPath=z.concat(u,t,Z,[A,v],c(R,O,A,v,Q,O,W,H,1,0),w,z,[h,l],J,Z,E,c(R,O,C,O,h,N,W,H,1,0),w),a.clipTopPath=a.clipTopBorderPath.concat(Z,[h,l],J,M,t,w),a.clipTopBorderPath=a.clipTopBorderPath.concat(z,[h,l],J,M,
t)):a.clipTopPath=a.clipTopBorderPath.concat(Z,X,w)):f>ea?(d=c(R,D,F,k,m,D,J,M,1,0),n=c(R,D,m,D,x,D,J,M,1,0),I=c(R,D,x,D,Y,I,J,M,1,0),a.clipOuterFrontPath=z.concat(S,n,Z,B,c(R,O,x,O,m,O,J,M,0,0),w),a.clipOuterBackPath=z.concat([F,k],d,Z,fa,c(R,O,m,O,F,P,J,M,0,0),w,z,b,I,Z,[Y,U],c(R,O,Y,U,x,O,J,M,0,0),w),a.clipTopBorderPath=z.concat([F,k],d,n,I),K?(J=c(R,D,h,l,Q,D,W,H,0,0),M=c(R,D,Q,D,C,D,W,H,0,0),t=c(R,D,C,D,A,t,W,H,0,0),a.clipInnerFrontPath=z.concat(u,M,Z,E,c(R,O,C,O,Q,O,W,H,1,0),w),a.clipInnerBackPath=
z.concat(q,t,Z,[A,v],c(R,O,A,v,C,O,W,H,1,0),w,z,[h,l],J,Z,L,c(R,O,Q,O,h,N,W,H,1,0),w),a.clipTopPath=a.clipTopBorderPath.concat(Z,[h,l],J,M,t,w),a.clipTopBorderPath=a.clipTopBorderPath.concat(z,[h,l],J,M,t)):a.clipTopPath=a.clipTopBorderPath.concat(Z,X,w)):(d=c(R,D,F,k,m,D,J,M,1,0),n=c(R,D,m,D,Y,I,J,M,1,0),a.clipOuterFrontPath=z.concat(S,n,Z,[Y,U],c(R,O,Y,U,m,O,J,M,0,0),w),a.clipOuterBackPath=z.concat([F,k],d,Z,fa,c(R,O,m,O,F,P,J,M,0,0),w),a.clipTopBorderPath=z.concat([F,k],d,n),K?(J=c(R,D,h,l,C,D,
W,H,0,0),M=c(R,D,C,D,A,t,W,H,0,0),a.clipInnerFrontPath=z.concat([h,l],J,Z,E,c(R,O,C,O,h,N,W,H,1,0),w),a.clipInnerBackPath=z.concat(q,M,Z,[A,v],c(R,O,A,v,C,O,W,H,1,0),w),a.clipTopPath=a.clipTopBorderPath.concat(Z,[h,l],J,M,w),a.clipTopBorderPath=a.clipTopBorderPath.concat(z,[h,l],J,M)):a.clipTopPath=a.clipTopBorderPath.concat(Z,X,w)):g<ea?f>ea?(d=c(R,D,F,k,x,D,J,M,1,0),n=c(R,D,x,D,Y,I,J,M,1,0),a.clipOuterBackPath=z.concat(b,n,Z,[Y,U],c(R,O,Y,U,x,O,J,M,0,0),w),a.clipOuterFrontPath=z.concat([F,k],d,
Z,B,c(R,O,x,O,F,P,J,M,0,0),w),a.clipTopBorderPath=z.concat([F,k],d,n),K?(J=c(R,D,h,l,Q,D,W,H,0,0),M=c(R,D,Q,D,A,t,W,H,0,0),a.clipInnerBackPath=z.concat([h,l],J,Z,L,c(R,O,Q,O,h,N,W,H,1,0),w),a.clipInnerFrontPath=z.concat(u,M,Z,[A,v],c(R,O,A,v,Q,O,W,H,1,0),w),a.clipTopPath=a.clipTopBorderPath.concat(Z,[h,l],J,M,w),a.clipTopBorderPath=a.clipTopBorderPath.concat(z,[h,l],J,M)):a.clipTopPath=a.clipTopBorderPath.concat(Z,X,w)):(d=c(R,D,F,k,Y,I,J,M,1,0),a.clipOuterBackPath=z.concat([F,k]),a.clipTopBorderPath=
a.clipOuterBackPath.concat(d),a.clipOuterFrontPath=a.clipTopBorderPath.concat(Z,[Y,U],c(R,O,Y,U,F,P,J,M,0,0),w),K?(J=c(R,D,h,l,A,t,W,H,0,0),a.clipInnerBackPath=z.concat([h,l]),a.clipTopPath=a.clipTopBorderPath.concat(Z,[h,l],J,w),a.clipTopBorderPath=a.clipTopBorderPath.concat(z,[h,l],J),a.clipInnerFrontPath=a.clipInnerBackPath.concat(J,Z,[A,v],c(R,O,A,v,h,N,W,H,1,0),w)):a.clipTopPath=a.clipTopBorderPath.concat(Z,X,w)):(d=c(R,D,F,k,Y,I,J,M,1,0),a.clipOuterFrontPath=z.concat([F,k]),a.clipTopBorderPath=
a.clipOuterFrontPath.concat(d),a.clipOuterBackPath=a.clipTopBorderPath.concat(Z,[Y,U],c(R,O,Y,U,F,P,J,M,0,0),w),K?(J=c(R,D,h,l,A,t,W,H,0,0),a.clipInnerFrontPath=z.concat([h,l]),a.clipTopPath=a.clipTopBorderPath.concat(Z,[h,l],J,w),a.clipTopBorderPath=a.clipTopBorderPath.concat(a.clipInnerFrontPath,J),a.clipInnerBackPath=a.clipInnerFrontPath.concat(J,Z,[A,v],c(R,O,A,v,h,N,W,H,1,0),w)):a.clipTopPath=a.clipTopBorderPath.concat(Z,X,w)),d=z.concat(b,Z,S),J=z.concat(ka,Z,ca),a.clipTopPath=a.clipTopPath.concat(d,
J),a.clipOuterFrontPath=a.clipOuterFrontPath.concat(d),a.clipOuterFrontPath1=a.clipOuterFrontPath1.concat(d),a.clipOuterBackPath=a.clipOuterBackPath.concat(d),K&&(J=z.concat(u,Z,q),a.clipInnerFrontPath=a.clipInnerFrontPath.concat(J),a.clipInnerBackPath=a.clipInnerBackPath.concat(J))):(a.clipTopPath=a.clipOuterFrontPath=a.clipOuterBackPath=[],K&&(a.clipInnerFrontPath=a.clipInnerBackPath=[])),a.clipBottomBorderPath=a.clipTopBorderPath);e||(p.startSlice._conf.index=g,p.endSlice._conf.index=f,p.backOuter._conf.index=
A=ja&&(g<=ra||f>ra)||g<=ra&&f>ra?ra:g>ea?g:f,p.frontOuter._conf.index=c=f<=va?f:g>f||g<=va?va:g,p.frontOuter1._conf.index=g,p.frontOuter1._conf.cIndex=ea,g>f?(p.backOuter._conf.cIndex=g<ra?ra:ia,p.startSlice._conf.cIndex=g<ea?(g+ea)/2:(g+ia)/2,p.endSlice._conf.cIndex=p.frontOuter._conf.cIndex=0):p.backOuter._conf.cIndex=p.startSlice._conf.cIndex=p.endSlice._conf.cIndex=p.frontOuter._conf.cIndex=na,T>ea?p.frontOuter1.show().attr(ba,a.clipOuterFrontPath1):p.frontOuter1.hide(),a.thisElement._attr(ba,
a.clipTopPath),p.bottom.attr(ba,a.clipTopPath),p.bottomBorder.attr(ba,a.clipBottomBorderPath),p.topBorder&&p.topBorder.attr(ba,a.clipTopBorderPath),p.frontOuter.attr(ba,a.clipOuterFrontPath),p.backOuter.attr(ba,a.clipOuterBackPath),K&&(p.backInner.attr(ba,a.clipInnerBackPath),p.frontInner.attr(ba,a.clipInnerFrontPath),p.backInner._conf.index=A,p.frontInner._conf.index=c,g>f?(p.backInner._conf.cIndex=ia,p.frontInner._conf.cIndex=0):p.backInner._conf.cIndex=p.frontInner._conf.cIndex=na),this.hasOnePoint?
(p.startSlice.hide(),p.endSlice.hide()):(p.startSlice.attr(ba,a.startSlice).show(),p.endSlice.attr(ba,a.endSlice).show()))},_setSliceCosmetics:function(a){var e=a.thisElement,c=a.showBorderEffect,d=a.elements,n=ua(a.borderColor,h(a.borderAlpha,a.alpha)),g=a.borderWidth,f;a.color&&(a=this._parseSliceColor(a.color,a.alpha,a),qa?(f={fill:fa(a.top),"stroke-width":0},c?d.topBorder.show().attr({fill:fa(a.topBorder),"stroke-width":0}):(d.topBorder.hide(),f.stroke=n,f["stroke-width"]=g),e._attr(f)):(e._attr({fill:fa(a.top),
"stroke-width":0}),d.topBorder.attr({stroke:n,"stroke-width":g})),d.bottom.attr({fill:fa(a.bottom)}),d.bottomBorder.attr({stroke:n,"stroke-width":g}),d.frontOuter.attr({fill:fa(a.frontOuter)}),d.frontOuter1.attr({fill:fa(a.frontOuter)}),d.backOuter.attr({fill:fa(a.backOuter)}),d.startSlice.attr({fill:fa(a.startSlice),stroke:n,"stroke-width":g}),d.endSlice.attr({fill:fa(a.endSlice),stroke:n,"stroke-width":g}),this.isDoughnut&&(d.frontInner.attr({fill:fa(a.frontInner)}),d.backInner.attr({fill:fa(a.backInner)})))},
createSlice:function(){var a={stroke:!0,strokeWidth:!0,"stroke-width":!0,dashstyle:!0,"stroke-dasharray":!0,translateX:!0,translateY:!0,"stroke-opacity":!0,fill:!0,opacity:!0,transform:!0,ishot:!0,cursor:!0,start:!0,end:!0,color:!0,alpha:!0,borderColor:!0,borderAlpha:!0,borderWidth:!0,rolloverProps:!0,showBorderEffect:!0,positionIndex:!0,cx:!0,cy:!0,radiusYFactor:!0,r:!0,innerR:!0},e=function(e,c){var d,n,g=this,f=g._confObject,w={},k=f.elements,b,T,q,ga=f.Pie3DManager,G;"string"===typeof e&&void 0!==
c&&null!==c&&(d=e,e={},e[d]=c);if(e&&"string"!==typeof e){for(d in e)if(n=e[d],a[d])if(f[d]=n,"ishot"===d||"cursor"===d||"transform"===d)w[d]=n,G=!0;else if("start"===d||"end"===d||"cx"===d||"cy"===d||"radiusYFactor"===d||"r"===d||"innerR"===d)T=!0;else{if("color"===d||"alpha"===d||"borderColor"===d||"borderAlpha"===d||"borderWidth"===d)q=!0}else g._attr(d,n);T&&(ga._setSliceShape(f),ga.refreshDrawing());(q||T)&&ga._setSliceCosmetics(f);if(G){for(b in k)k[b].attr(w);g._attr(w)}}else g=a[e]?f[e]:g._attr(e);
return g},c=function(a,e){var c=this._confObject.elements,d;for(d in c)c[d].on(a,e);return this._on(a,e)},d=function(a,e,c){var d,n=this._confObject.elements,g=-1<K.navigator.userAgent.toLowerCase().indexOf("android");for(d in n)g?"topBorder"!==d&&"frontOuter"!==d&&"startSlice"!==d&&"endSlice"!==d||n[d].drag(a,e,c):n[d].drag(a,e,c);return this._drag(a,e,c)},n=function(){var a=this._confObject.elements,e;for(e in a)a[e].hide();return this._hide()},g=function(){var a=this._confObject.elements,e;for(e in a)a[e].show();
return this._show()},f=function(){var a=this._confObject,e=a.elements,c;for(c in e)e[c].destroy();qa&&(a.clipTop.destroy(),a.clipOuterFront.destroy(),a.clipOuterBack.destroy(),a.clipOuterFront1&&a.clipOuterFront1.destroy(),a.clipInnerFront&&a.clipInnerFront.destroy(),a.clipInnerBack&&a.clipInnerBack.destroy());return this._destroy()},b=function(a){var e=this._confObject.elements,c;for(c in e)e[c].tooltip(a);return this._tooltip(a)},w=function(a,e){var c=this._confObject.elements,d;if(void 0===e)return this._data(a);
for(d in c)c[d].data(a,e);return this._data(a,e)},k=0;return function(){var a=this.renderer,q,F={elements:{},Pie3DManager:this},G=this.slicingWallsArr,u=F.elements,h=qa?"litepath":"path";q=a[h](this.topGroup);q._confObject=F;F.thisElement=q;q._destroy=q.destroy;q.destroy=f;q._show=q.show;q.show=g;q._hide=q.hide;q.hide=n;q._on=q.on;q.on=c;q._drag=q.drag;q.drag=d;q._attr=q.attr;q.attr=e;q._tooltip=q.tooltip;q.tooltip=b;q._data=q.data;q.data=w;this.pointElemStore.push(q);u.topBorder=a[h](this.topGroup);
u.bottom=a[h](this.bottomBorderGroup).attr({"stroke-width":0});u.bottomBorder=a[h](this.bottomBorderGroup);u.frontOuter=a[h](this.slicingWallsFrontGroup).attr({"stroke-width":0});u.backOuter=a[h](this.slicingWallsFrontGroup).attr({"stroke-width":0});u.startSlice=a[h](this.slicingWallsFrontGroup);u.endSlice=a[h](this.slicingWallsFrontGroup);u.frontOuter1=a[h](this.slicingWallsFrontGroup).attr({"stroke-width":0});u.frontOuter._conf={si:k,isStart:.5};u.frontOuter1._conf={si:k,isStart:.5};u.startSlice._conf=
{si:k,isStart:0};u.endSlice._conf={si:k,isStart:1};u.backOuter._conf={si:k,isStart:.4};G.push(u.startSlice,u.frontOuter1,u.frontOuter,u.backOuter,u.endSlice);this.isDoughnut&&(u.frontInner=a[h](this.slicingWallsFrontGroup).attr({"stroke-width":0}),u.backInner=a[h](this.slicingWallsFrontGroup).attr({"stroke-width":0}),u.backInner._conf={si:k,isStart:.5},u.frontInner._conf={si:k,isStart:.4},G.push(u.frontInner,u.backInner));k+=1;return q}}()};a.prototype.constructor=a}]);B.register("module",["private",
"modules.renderer.js-doughnut2d",function(){var a=this,b=a.hcLib,m=a.window,C=!b.CREDIT_REGEX.test(m.location.hostname),p=b.chartAPI,K=b.getFirstColor,N=b.getFirstAlpha,Q=b.hasSVG,h=b.toRaphaelColor,x=b.hashify,l=8===m.document.documentMode?"visible":"",f=b.graphics.getLightColor,q=Math.floor,y=b.graphics.getDarkColor;p("doughnut2d",{friendlyName:"Doughnut Chart",defaultDatasetType:"Doughnut2D",creditLabel:C,applicableDSList:{Doughnut2D:!0},getPointColor:function(a,b,k){var h;a=K(a);b=N(b);100>k&&
Q?(h=y(a,q(100*(85-.2*(100-k)))/100),a=f(a,q(100*(100-.5*k))/100),b={FCcolor:{color:h+","+a+","+a+","+h,alpha:b+","+b+","+b+","+b,radialGradient:!0,gradientUnits:"userSpaceOnUse",r:k}}):b={FCcolor:{color:a+","+a,alpha:b+","+b,ratio:"0,100"}};return b},drawDoughnutCenterLabel:function(a,f,b,q,y,v,z){var p=this.components,K=p.dataset[0].config;v=v||K.lastCenterLabelConfig;var p=p.paper,N=this.linkedItems.smartLabel,m=this.graphics,C=m.datasetGroup,Q=v.padding,B=2*v.textPadding,na={fontFamily:v.font,
fontSize:v.fontSize+"px",lineHeight:1.2*v.fontSize+"px",fontWeight:v.bold?"bold":"",fontStyle:v.italic?"italic":""},ma=1.414*(.5*q-Q)-B;y=1.414*(.5*y-Q)-B;var U;N.setStyle(na);N.useEllipsesOnOverflow(this.config.useEllipsesWhenOverflow);N=N.getSmartText(a,ma,y);(y=m.doughnutCenterLabel)?(y.attr("text")!==a&&this.centerLabelChange(a),U=m.centerLabelOvalBg):(v.bgOval&&(m.centerLabelOvalBg=U=p.circle(f,b,.5*q-Q,C)),y=m.doughnutCenterLabel=p.text(C).hover(this.centerLabelRollover,this.centerLabelRollout).click(this.centerLabelClick),
y.chart=this);a?(y.css(na).attr({x:f,y:b,text:N.text,visibility:l,direction:K.textDirection,fill:h({FCcolor:{color:v.color,alpha:v.alpha}}),"text-bound":v.bgOval?"none":[h({FCcolor:{color:v.bgColor,alpha:v.bgAlpha}}),h({FCcolor:{color:v.borderColor,alpha:v.borderAlpha}}),v.borderThickness,v.textPadding,v.borderRadius]}).tooltip(v.toolText||N.tooltext),v.bgOval&&U&&U.attr({visibility:l,fill:x(v.bgColor),"fill-opacity":v.bgAlpha/100,stroke:x(v.borderColor),"stroke-width":v.borderThickness,"stroke-opacity":v.borderAlpha/
100})):(y.attr("visibility","hidden"),U&&U.attr("visibility","hidden"));z&&(K.lastCenterLabelConfig=v,K.centerLabelConfig=v)},centerLabelRollover:function(){var f=this.chart,b=f.config,k=f.chartInstance,q=k.ref,h=f.components.dataset[0].config.lastCenterLabelConfig,b={height:b.height,width:b.width,pixelHeight:q.offsetHeight,pixelWidth:q.offsetWidth,id:k.id,renderer:k.args.renderer,container:f.linkedItems.container,centerLabelText:h&&h.label};this.attr("text")&&a.raiseEvent("centerLabelRollover",b,
k,this,f.hoverOnCenterLabel)},centerLabelRollout:function(){var f=this.chart,b=f.config,q=f.chartInstance,h=q.ref,y=f.components.dataset[0].config.lastCenterLabelConfig,b={height:b.height,width:b.width,pixelHeight:h.offsetHeight,pixelWidth:h.offsetWidth,id:q.id,renderer:q.args.renderer,container:f.linkedItems.container,centerLabelText:y&&y.label};this.attr("text")&&a.raiseEvent("centerLabelRollout",b,q,this,f.hoverOffCenterLabel)},centerLabelClick:function(){var f=this.chart,b=f.config,q=f.chartInstance,
h=q.ref,y=f.components.dataset[0].config.lastCenterLabelConfig,f={height:b.height,width:b.width,pixelHeight:h.offsetHeight,pixelWidth:h.offsetWidth,id:q.id,renderer:q.args.renderer,container:f.linkedItems.container,centerLabelText:y&&y.label};this.attr("text")&&a.raiseEvent("centerLabelClick",f,q)},centerLabelChange:function(f){var b=this.config,q=this.chartInstance,h=q.ref;a.raiseEvent("centerLabelChanged",{height:b.height,width:b.width,pixelHeight:h.offsetHeight,pixelWidth:h.offsetWidth,id:q.id,
renderer:q.args.renderer,container:this.linkedItems.container,centerLabelText:f},q)},hoverOnCenterLabel:function(){var a=this.chart.components.dataset[0].config.lastCenterLabelConfig;(a.hoverColor||a.hoverAlpha)&&this.attr({fill:h({FCcolor:{color:a.hoverColor||a.color,alpha:a.hoverAlpha||a.alpha}})})},hoverOffCenterLabel:function(){var a=this.chart.components.dataset[0].config.lastCenterLabelConfig;(a.hoverColor||a.hoverAlpha)&&this.attr({fill:h({FCcolor:{color:a.color,alpha:a.alpha}})})}},p.pie2d,
{singletonPlaceValue:!1})}]);B.register("module",["private","modules.renderer.js-doughnut3d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("doughnut3d",{friendlyName:"3D Doughnut Chart",defaultDatasetType:"Doughnut3D",creditLabel:b,applicableDSList:{Doughnut3D:!0},_configureManager:function(){var a=this.components.dataset[0],b=a.config,p=a.components,a=p.Pie3DManager,p=p.data;a&&a.configure(b.pieSliceDepth,1===p.length,b.use3DLighting,!0)}},a.pie3d)}]);
B.register("module",["private","modules.renderer.js-mscolumn2d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("mscolumn2d",{standaloneInit:!0,friendlyName:"Multi-series Column Chart",creditLabel:b,defaultDatasetType:"column",applicableDSList:{column:!0},eiMethods:{}},a.mscartesian,{enablemousetracking:!0})}]);B.register("module",["private","modules.renderer.js-mscolumn3d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),
a=a.chartAPI;a("mscolumn3d",{standaloneInit:!0,defaultDatasetType:"column3d",friendlyName:"Multi-series 3D Column Chart",applicableDSList:{column3d:!0},defaultPlotShadow:1,fireGroupEvent:!0,is3D:!0,creditLabel:b,defaultZeroPlaneHighlighted:!1},a.mscartesian3d,{showplotborder:0,enablemousetracking:!0})}]);B.register("module",["private","modules.renderer.js-msbar2d",function(){var a=this.hcLib,b=a.chartAPI,a=!a.CREDIT_REGEX.test(this.window.location.hostname);b("msbar2d",{standaloneInit:!0,friendlyName:"Multi-series Bar Chart",
isBar:!0,hasLegend:!0,creditLabel:a,defaultDatasetType:"bar2d",applicableDSList:{bar2d:!0}},b.msbarcartesian,{enablemousetracking:!0})}]);B.register("module",["private","modules.renderer.js-msbar3d",function(){var a=this.hcLib,b=a.chartAPI,a=!a.CREDIT_REGEX.test(this.window.location.hostname);b("msbar3d",{standaloneInit:!0,defaultSeriesType:"bar3d",friendlyName:"Multi-series 3D Bar Chart",fireGroupEvent:!0,defaultPlotShadow:1,is3D:!0,isBar:!0,hasLegend:!0,creditLabel:a,defaultZeroPlaneHighlighted:!1,
defaultDatasetType:"bar3d",applicableDSList:{bar3d:!0}},b.msbarcartesian3d,{showplotborder:0,enablemousetracking:!0})}]);B.register("module",["private","modules.renderer.js-msarea",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("msarea",{standaloneInit:!0,friendlyName:"Multi-series Area Chart",creditLabel:b,defaultDatasetType:"area",defaultPlotShadow:0,applicableDSList:{area:!0}},a.areabase,{enablemousetracking:!0})}]);B.register("module",["private",
"modules.renderer.js-msline",function(){var a=this.hcLib,b=a.chartAPI,a=!a.CREDIT_REGEX.test(this.window.location.hostname);b("msline",{standaloneInit:!0,friendlyName:"Multi-series Line Chart",creditLabel:a,defaultDatasetType:"line",defaultPlotShadow:1,axisPaddingLeft:0,axisPaddingRight:0,applicableDSList:{line:!0}},b.areabase,{zeroplanethickness:1,zeroplanealpha:40,showzeroplaneontop:0,enablemousetracking:!0})}]);B.register("module",["private","modules.renderer.js-stackedarea2d",function(){var a=
this.hcLib,b=a.chartAPI,m=!a.CREDIT_REGEX.test(this.window.location.hostname);b("stackedarea2d",{friendlyName:"Stacked Area Chart",showsum:0,creditLabel:m},b.msarea,{plotfillalpha:a.preDefStr.HUNDREDSTRING,isstacked:1})}]);B.register("module",["private","modules.renderer.js-stackedcolumn2d",function(){var a=this.hcLib,b=a.chartAPI,a=!a.CREDIT_REGEX.test(this.window.location.hostname);b("stackedcolumn2d",{friendlyName:"Stacked Column Chart",creditLabel:a},b.mscolumn2d,{isstacked:!0})}]);B.register("module",
["private","modules.renderer.js-stackedcolumn3d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),m=a.chartAPI;m("stackedcolumn3d",{friendlyName:"3D Stacked Column Chart",creditLabel:b,_mouseEvtHandler:function(b){var p=b.data.mouseTracker,K=this.config,N=K.canvasLeft,m=K.canvasRight,h=K.canvasBottom,x=K.canvasTop,l=K.datasetOrder||this.components.dataset,f=a.getMouseCoordinate(this.linkedItems.container,b.originalEvent,this),q=f.chartX,f=f.chartY,y,G=this.components,
L="datasetGroup_"+l[0].type,k,t=!1,E=l.length,v,z=p._lastDatasetIndex,B=p._lastPointIndex;if(q>N&&q<m&&f>x&&f<h||this.config.plotOverFlow){for(;E--&&!t;)y=l[E],y.valueLook=!0,y&&y.visible&&(k=y._getHoveredPlot&&y._getHoveredPlot(q,f))&&k.hovered&&(t=!0,k.datasetIndex=E,v=p._getMouseEvents(b,k.datasetIndex,k.pointIndex));for(E=0;E<l.length&&!t;)y=l[E],y.valueLook=!1,y&&y.visible&&(k=y._getHoveredPlot&&y._getHoveredPlot(q,f))&&k.hovered&&(t=!0,k.datasetIndex=E,v=p._getMouseEvents(b,k.datasetIndex,k.pointIndex)),
E++}(!t||v&&v.fireOut)&&void 0!==z&&(delete p._lastDatasetIndex,delete p._lastPointIndex,l[z]&&l[z]._firePlotEvent&&l[z]._firePlotEvent("mouseout",B,b));if(t)for(N=v.events&&v.events.length,p._lastDatasetIndex=k.datasetIndex,B=p._lastPointIndex=k.pointIndex,K.drawTrendRegion&&G[L]._notifyGroup(!0,b),p=0;p<N;p+=1)y&&y._firePlotEvent&&y._firePlotEvent(v.events[p],B,b,k.datasetIndex);else K.drawTrendRegion&&G[L]._notifyGroup(!1,b);K.drawTrendRegion&&G[L]._getHoveredRegion(q,f,b)}},m.mscolumn3d,{showplotborder:0,
enablemousetracking:!0},m.stackedcolumn2d)}]);B.register("module",["private","modules.renderer.js-stackedbar2d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("stackedbar2d",{friendlyName:"Stacked Bar Chart",creditLabel:b},a.msbar2d,{maxbarheight:50,enablemousetracking:!0},a.stackedcolumn2d)}]);B.register("module",["private","modules.renderer.js-stackedbar3d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),m=a.chartAPI;
m("stackedbar3d",{friendlyName:"3D Stacked Bar Chart",creditLabel:b,_mouseEvtHandler:function(b){var p=b.data.mouseTracker,K=this.config,N=K.canvasLeft,m=K.canvasRight,h=K.canvasBottom,x=K.canvasTop,l=K.datasetOrder||this.components.dataset,f=a.getMouseCoordinate(this.linkedItems.container,b.originalEvent,this),q=f.chartX,f=f.chartY,y,G=this.components,L="datasetGroup_"+l[0].type,k,t=!1,E=l.length,v,z=p._lastDatasetIndex,B=p._lastPointIndex;if(q>N&&q<m&&f>x&&f<h||this.config.plotOverFlow){for(E=l.length;E--&&
!t;)if(y=l[E],y.valueLook=!0,y&&y.visible){if((k=y._getHoveredPlot&&y._getHoveredPlot(q,f))&&k.hovered)for(N=0;N<=E;++N)if(E!==N&&k&&(m=l[N],(h=m._getHoveredPlot&&m._getHoveredPlot(q,f))&&h.pointIndex===k.pointIndex-1)){k=h;E=N;y=m;y.valueLook=!0;break}k&&k.hovered&&(t=!0,k.datasetIndex=E,v=p._getMouseEvents(b,k.datasetIndex,k.pointIndex))}for(E=0;E<l.length&&!t;){y=l[E];y.valueLook=!1;if(y&&y.visible){if((k=y._getHoveredPlot&&y._getHoveredPlot(q,f))&&k.hovered)for(N=0;N<=E;++N)if(E!==N&&k&&(m=l[N],
(h=m._getHoveredPlot&&m._getHoveredPlot(q,f))&&h.pointIndex===k.pointIndex-1)){k=h;E=N;y=m;y.valueLook=!1;break}k&&k.hovered&&(t=!0,k.datasetIndex=E,v=p._getMouseEvents(b,k.datasetIndex,k.pointIndex))}E++}}(!t||v&&v.fireOut)&&void 0!==z&&(delete p._lastDatasetIndex,delete p._lastPointIndex,l[z]&&l[z]._firePlotEvent&&l[z]._firePlotEvent("mouseout",B,b));if(t)for(l=v.events&&v.events.length,p._lastDatasetIndex=k.datasetIndex,B=p._lastPointIndex=k.pointIndex,K.drawTrendRegion&&G[L]._notifyGroup(!0,b),
p=0;p<l;p+=1)y&&y._firePlotEvent&&y._firePlotEvent(v.events[p],B,b,k.datasetIndex);else K.drawTrendRegion&&G[L]._notifyGroup(!1,b);K.drawTrendRegion&&G[L]._getHoveredRegion(q,f,b)}},m.msbar3d,{showplotborder:0,enablemousetracking:!0},m.stackedcolumn2d)}]);B.register("module",["private","modules.renderer.js-marimekko",function(){var a=this.hcLib,b=a.chartAPI,a=!a.CREDIT_REGEX.test(this.window.location.hostname),m=Math,B=m.min,p=m.max;b("marimekko",{standaloneInit:!0,friendlyName:"Marimekko Chart",
isValueAbs:!0,usesXYinCategory:!0,distributedColumns:!0,stack100percent:!0,defaultDatasetType:"marimekko",applicableDSList:{marimekko:!0},isStacked:!0,showsum:1,creditLabel:a,_setAxisLimits:function(){var a=this.components,b=a.dataset,m=a.yAxis,a=a.xAxis,h,x=b.length,l,f=-Infinity,q=Infinity,y=Infinity,G=-Infinity,L,k,t={};L=this.config.categories;var E=[],v=function(a){f=p(f,a.max);q=B(q,a.min);G=p(G,a.xMax||-Infinity);y=B(y,a.xMin||Infinity)};for(l=0;l<x;l++)h=b[l],(k=h.groupManager)?t[h.type]=
k:E.push(h);for(k in t)b=t[k].getDataLimits(),v(b);x=E.length;for(l=0;l<x;l++)b=E[l].getDataLimits(),v(b);-Infinity===f&&(f=0);Infinity===q&&(q=0);m[0].setAxisConfig({isPercent:this.config.isstacked?this.config.stack100percent:0});m[0].setDataLimit(f,q);if(-Infinity!==G||Infinity!==y)a[0].config.xaxisrange={max:G,min:y},a[0].setDataLimit(G,y);m=t[k].getStackSumPercent();l=m.length;k=a[0].getCategoryLen();k>l&&L.splice(l,k-l);this._setCategories();l=a[0].getLimit();y=l.min;G=l.max;L=y;k=G-y;for(l=
0;l<m.length;l++)b=m[l],x=k*b/100,b=L+x/2,a[0].updateCategory(l,{x:b}),L+=x}},b.mscartesian,{isstacked:!0,showpercentvalues:0,usepercentdistribution:1,showsum:1,enablemousetracking:!0})}]);B.register("module",["private","modules.renderer.js-msstackedcolumn2d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),m=a.chartAPI,C=a.pluck,p=a.componentDispose;m("msstackedcolumn2d",{standaloneInit:!0,defaultDatasetType:"column",applicableDSList:{column:!0},friendlyName:"Multi-series Stacked Column Chart",
_createDatasets:function(){var a=this.components,b=this.jsonData,m=b.dataset,h=m&&m.length||0,x,l,f,q=this.defaultDatasetType,y=this.applicableDSList,G,L,k,t,E,v,z=b.lineset||[],Y=this.config,ka=Y.dataSetMap,ea=Y.lineSetMap,va=ka&&ka.length,ia=a.legend,ra=[],sa=[],na=0;k=0;var ma,U=-1,ba,Aa=this.config.catLen,ua=a.xAxis[0],P,fa,qa=a.dataset;if(m||0!==z.length){this.config.categories=b.categories&&b.categories[0].category;l=a.dataset=[];for(b=0;b<h;b++){E=m[b];U++;if(E.dataset)for(fa=!0,v=E.dataset&&
E.dataset.length||0,ra[b]=[],x=0;x<v;x++){if(k=E.dataset[x],G=(G=C(k.renderas,q))&&G.toLowerCase(),y[G]||(G=q),f=B.get("component",["dataset",G]))t="datasetGroup_"+G,L=B.register("component",["datasetGroup",G]),G=a[t],L&&!G?(G=a[t]=new L,G.chart=this,G.init()):G&&ka&&0!==ka.length&&!ma&&(G.init(),ma=!0),ka&&ka[b]&&ka[b][x]?(f=ka[b][x],f.index=na,t=f.JSONData,L=t.data&&t.data.length||0,t=k.data&&k.data.length||0,ba=ua.getCategoryLen(),P=Aa-ba,L-=t,L=this._getDiff(L,t,P,ba),t=L.diff,L=L.startIndex,
0<t&&f.removeData(L,t,!1),f.JSONData=k,f.configure()):(f=new f,f.chart=this,f.index=na,f.init(k)),na++,ra[b].push(f),l.push(f),G&&G.addDataSet(f,U,x)}else v=x=0,U--;E=ka&&ka[b]&&ka[b].length;if(E>v)for(k=x,E=E-v+x;k<E;k++)G=ka[b][k],ia.removeItem(G.legendItemId),p.call(G)}if(va>h)for(k=b,E=va-h+b;k<E;k++)for(v=ka[k].length,x=0;x<v;x++)G=ka[k][x],ia.removeItem(G.legendItemId),p.call(G);Y.dataSetMap=ra;if(this.lineset){b=0;for(h=z.length;b<h;b++)m=z[b],f=B.get("component",["dataset","line"]),f=new f,
ea&&ea[b]?(f=ea[b],f.index=na,t=f.JSONData,L=t.data.length,t=m.data&&m.data.length||0,L>t&&f.removeData(t,L-t,!1),f.JSONData=m,f.configure()):(f.chart=this,f.index=na,f.init(m)),sa.push(f),l.push(f),na++;z=ea&&ea.length;if(z>h)for(k=b,E=z-h+b;k<E;k++)G=ea[k],ia.removeItem(G.legendItemId),p.call(G);Y.lineSetMap=sa}fa?this.config.catLen=ua.getCategoryLen():(a.dataset=qa,this.setChartMessage())}else this.setChartMessage()},creditLabel:b},m.mscartesian,{isstacked:!0,enablemousetracking:!0})}]);B.register("module",
["private","modules.renderer.js-mscombi2d",function(){var a=this.hcLib,b=a.chartAPI,m=!a.CREDIT_REGEX.test(this.window.location.hostname),C=a.pluck,p=a.componentDispose;b("mscombi2d",{friendlyName:"Multi-series Combination Chart",standaloneInit:!0,creditLabel:m,defaultDatasetType:"column",applicableDSList:{line:!0,area:!0,column:!0},_createDatasets:function(){var a=this.components,b=this.jsonData,m=b.dataset,h=m&&m.length,x,l,f=this.defaultDatasetType,q=this.applicableDSList;x=this.components.legend;
var y=a.xAxis[0],G,L,k,t,E,v=this.config.isstacked,z,Y,ka=[],ea={},va=this.config,ia=this.config.catLen,ra=va.datasetMap||(va.datasetMap={line:[],area:[],column:[],column3d:[],scrollcolumn2d:[]}),sa={line:[],area:[],column:[],column3d:[],scrollcolumn2d:[]};m||this.setChartMessage();this.config.categories=b.categories&&b.categories[0].category;b=a.dataset=[];x&&x.emptyItems();for(x=0;x<h;x++)if(E=m[x],t=E.parentyaxis||"",L=(L=this.config.isdual&&"s"===t.toLowerCase()?"line"===this.defaultSecondaryDataset?
this.sDefaultDatasetType:C(E.renderas,this.sDefaultDatasetType):C(E.renderas,f))&&L.toLowerCase(),q[L]||(L=f),k=B.get("component",["dataset",L]))void 0===ea[L]?ea[L]=0:ea[L]++,l="datasetGroup_"+L,t=B.register("component",["datasetGroup",L]),(G=a[l])&&ka.push(G),t&&!G&&(G=a[l]=new t,G.chart=this,G.init()),t=ra[L],(l=t[0])?(delete l.legendItemId,G=y.getCategoryLen(),k=ia-G,Y=l.JSONData,z=Y.data&&Y.data.length,Y=E.data&&E.data.length||0,z-=Y,k=this._getDiff(z,Y,k,G),G=k.diff,k=k.startIndex,0<G&&l.removeData(k,
G,!1),l.index=x,l.JSONData=E,l.configure(),t.splice(0,1)):(l=new k,l.chart=this,l.index=x,G&&(v?G.addDataSet(l,0,ea[L]):G.addDataSet(l,ea[L],0)),l.init(E)),sa[L].push(l),b.push(l);this._setDatasetOrder();for(m in ra)if(t=ra[m],f=t[0]&&t[0].groupManager,h=t.length,q=void 0===ea[m]?0:ea[m]+1,h)for(v&&f&&f.removeDataSet(0,q,h),a=0;a<h;a++)f&&!v&&f.removeDataSet(q,0,1),"column"===t[a].type&&!0===this.is3D?(t[a].visible=!1,t[a].draw()):p.call(t[a]);va.datasetMap=sa;this.config.catLen=y.getCategoryLen()}},
b.areabase,{enablemousetracking:!0})}]);B.register("module",["private","modules.renderer.js-mscombi3d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("mscombi3d",{standaloneInit:!0,friendlyName:"Multi-series 3D Combination Chart",defaultDatasetType:"column3d",is3D:!0,creditLabel:b,defaultPlotShadow:1,applicableDSList:{column3d:!0,line:!0,area:!0},_createDatasets:a.mscombi2d},a.mscartesian3d,{showplotborder:0,enablemousetracking:!0},a.areabase)}]);
B.register("module",["private","modules.renderer.js-mscolumnline3d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("mscolumnline3d",{friendlyName:"Multi-series Column and Line Chart",is3D:!0,creditLabel:b,defaultPlotShadow:1,applicableDSList:{column3d:!0,line:!0}},a.mscombi3d,{use3dlineshift:1,showplotborder:0,enablemousetracking:!0},a.msarea)}]);B.register("module",["private","modules.renderer.js-stackedcolumn2dline",function(){var a=this.hcLib,b=
a.chartAPI,a=!a.CREDIT_REGEX.test(this.window.location.hostname);b("stackedcolumn2dline",{friendlyName:"Stacked Column and Line Chart",defaultDatasetType:"column",creditLabel:a,applicableDSList:{line:!0,column:!0}},b.mscombi2d,{isstacked:!0,stack100percent:0,enablemousetracking:!0},b.msarea)}]);B.register("module",["private","modules.renderer.js-stackedcolumn3dline",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("stackedcolumn3dline",{friendlyName:"Stacked 3D Column and Line Chart",
is3D:!0,creditLabel:b,_mouseEvtHandler:a.stackedcolumn3d._mouseEvtHandler,applicableDSList:{column3d:!0,line:!0}},a.mscombi3d,{use3dlineshift:1,isstacked:!0,stack100percent:0,showplotborder:0,enablemousetracking:!0},a.msarea)}]);B.register("module",["private","modules.renderer.js-mscombidy2d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("mscombidy2d",{standaloneInit:!0,friendlyName:"Multi-series Dual Y-Axis Combination Chart",defaultDatasetType:"column",
sDefaultDatasetType:"line",_createDatasets:a.mscombi2d,creditLabel:b,applicableDSList:{column:!0,line:!0,area:!0}},a.msdybasecartesian,{isdual:1,enablemousetracking:!0},a.msarea)}]);B.register("module",["private","modules.renderer.js-mscolumn3dlinedy",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("mscolumn3dlinedy",{standaloneInit:!0,friendlyName:"Multi-series 3D Column and Line Chart",defaultDatasetType:"column3d",sDefaultDatasetType:"line",is3D:!0,
creditLabel:b,_createDatasets:a.mscombi2d,defaultPlotShadow:1,applicableDSList:{column3d:!0,line:!0}},a.msdybasecartesian3d,{use3dlineshift:1,isdual:!0,showplotborder:0,enablemousetracking:!0},a.msarea)}]);B.register("module",["private","modules.renderer.js-stackedcolumn3dlinedy",function(){var a=this.hcLib,b=a.chartAPI,a=!a.CREDIT_REGEX.test(this.window.location.hostname);b("stackedcolumn3dlinedy",{standaloneInit:!0,friendlyName:"Stacked 3D Column and Line Chart",is3D:!0,defaultDatasetType:"column3d",
creditLabel:a,sDefaultDatasetType:"line",defaultSecondaryDataset:"line",_createDatasets:b.mscombi2d,_mouseEvtHandler:b.stackedcolumn3d._mouseEvtHandler,applicableDSList:{column3d:!0,line:!0}},b.msdybasecartesian3d,{use3dlineshift:1,isdual:!0,isstacked:!0,showplotborder:0,enablemousetracking:!0},b.msarea)}]);B.register("module",["private","modules.renderer.js-msstackedcolumn2dlinedy",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("msstackedcolumn2dlinedy",
{standaloneInit:!0,friendlyName:"Multi-series Dual Y-Axis Stacked Column and Line Chart",stack100percent:0,defaultDatasetType:"column",sDefaultDatasetType:"line",hasLineSet:!0,creditLabel:b,applicableDSList:{column:!0},lineset:!0,_createDatasets:a.msstackedcolumn2d},a.msdybasecartesian,{isdual:!0,haslineset:!0,isstacked:!0,enablemousetracking:!0},a.msarea)}]);B.register("module",["private","modules.renderer.js-scrollcolumn2d",function(){var a=this,b=a.hcLib,m=b.chartAPI,B=!b.CREDIT_REGEX.test(a.window.location.hostname),
p=Math,K=p.min,N=p.max,Q=p.floor,h=p.round,x=b.pluckNumber,l=b.Raphael;m("scrollcolumn2d",{standaloneInit:!0,friendlyName:"Scrollable Multi-series Column Chart",tooltipConstraint:"plot",canvasborderthickness:1,creditLabel:B,defaultDatasetType:"scrollcolumn2d",applicableDSList:{scrollcolumn2d:!0},avgScrollPointWidth:40,hasScroll:!0,defaultPlotShadow:1,binSize:0,_swipeX:function(f,b){var h=this.config,l=this.components,m=l.scrollBar.conf,k=m.scrollRatio,t=m.width-1,E=m.height-1,v=h.scrollToEnd,m=h.lastScrollPosition;
x(l.canvas.config.canvasBorderWidth,l.xAxis[0].config.lineStartExtension);var l=this.touchCurrPos,p=this.swipeStart,B=f.type,E=h.scrollShowButtons?K(E,.5*t):0,C=this.config.mousedown,m=void 0!==m?m:v;switch(B){case "touchstart":case "mousedown":this.config.mousedown=!0;this.prevScrollPosition=m;this.touchCurrPos=b;break;case "touchmove":case "mousemove":if(C)return p||a.raiseEvent("scrollStart",{scrollPosition:m},this.chartInstance),h=t-2*E-(t*k-2*E*k),h=K(N(m+(l-b)/h,0),1),this.updateManager(h),
this.swipeStart=!0,this.touchCurrPos=b,f.originalEvent.preventDefault?f.originalEvent.preventDefault():f.originalEvent.returnValue=!1,!0;break;case "touchend":case "mouseup":C&&(this.swipeStart&&(a.raiseEvent("scrollEnd",{prevScrollPosition:this.prevScrollPosition,scrollPosition:h.lastScrollPosition},this.chartInstance),this.swipeStart=!1),h.mousedown=!1)}},eiMethods:{scrollTo:m.mscartesian._scrollTo},_manageScrollerPosition:function(){var a=this.config,b;b=this._scrollBar.get;var h=this.components.scrollBar,
l;b=b()[0];h.setConfiguaration(b.conf);b=a.scrollEnabled;l=h.getLogicalSpace();this._allocateSpace({bottom:a.shift=!1===b?0:l.height+h.conf.padding})},_resetViewPortConfig:function(){this.config.viewPortConfig={scaleX:1,scaleY:1,x:0,y:0}},_setInitialDrawingIndex:function(){var a=this.config,b=this.components,h=b.xAxis[0],l=h._getVisibleConfig(),h=h.getCategoryLen(),m=b.dataset,k,t,E,v=m.length,p;a.showsum&&a.isstacked&&this._createSumLabelPool();this._createDataPool();for(p=0;p<v;p++)k=m[p],E=k.components,
E.removeDataArr=[],t=E.pool,k.drawn&&t&&(k=E.data.slice(a.scrollMinVal,a.scrollMaxVal),t.element&&t.element.push.apply(t.element,k.filter(this._filterDataFn).map(this._datasetModifyFn)),t.label&&t.label.push.apply(t.label,k.filter(this._filterLabelFn).map(this._labelModifyFn)),t.image&&t.image.push.apply(t.image,k.filter(this._filterImageFn).map(this._imageModifyFn)));(t=(b=b.datasetGroup_scrollcolumn2d)&&b.pool)&&a.isstacked&&(t=t.sumLabels[0])&&t.push.apply(t,b.graphics.sumLabels[0].slice(a.scrollMinVal,
a.scrollMaxVal).filter(this._filterSumFn).map(this._sumValModifyFn));a.visibleAxisMinVal=l.minValue;a.visibleAxisMaxVal=l.maxValue;a.startPathIndex=a.scrollMinVal=Math.max(Math.round(l.minValue),0);a.endPathIndex=a.scrollMaxVal=Math.min(Math.round(l.maxValue)+1,h)},updateManager:function(a){var b=this.config,l=this.config.viewPortConfig,m=l.scaleX,p=this.graphics.datasetGroup,k=this.graphics.datalabelsGroup,t=this.graphics.trackerGroup,E=b.canvasWidth*(m-1)*a,v=this.components,z=v.xAxis[0],x=this.graphics.sumLabelsLayer;
l.x=E/m;l="t"+-h(E)+",0";b.lastScrollPosition=a;void 0!==a&&v.scrollBar.node&&v.scrollBar.node.attr({"scroll-position":a});this._manageScroll();p.attr({transform:l});k.attr({transform:l});t.attr({transform:l});x&&x.attr({transform:l});a=z.getAxisConfig("animateAxis");b=z.getAxisConfig("drawAxisName");z.setAxisConfig({animateAxis:!1,drawAxisName:!1});z.draw();z.setAxisConfig({animateAxis:a,drawAxisName:b})},_filterLabelFn:function(a){if(a.graphics&&a.graphics.label)return a},_filterDataFn:function(a){a._xPos=
void 0;a._yPos=void 0;a._baseXPos=void 0;a._baseYPos=void 0;if(a.graphics&&a.graphics.element)return a},_filterImageFn:function(a){if(a.graphics&&a.graphics.image)return a},_filterSumFn:function(a){if(a.graphics&&a.element)return a},_datasetModifyFn:function(a){var b=a.graphics.element;a.graphics.element=void 0;return b.hide()},_imageModifyFn:function(a){var b=a.graphics.image;a.graphics.image=void 0;return b.hide()},_labelModifyFn:function(a){var b=a.graphics.label;a.graphics.label=void 0;return b.hide()},
_sumValModifyFn:function(a){var b=a.element;a.element=void 0;return b.hide()},_createSumLabelPool:function(){var a=this.components,b,h=a.paper,l;b=a.datasetGroup_scrollcolumn2d;a=b.pool;l=b.graphics&&b.graphics.sumLabelContainer;if(!a&&l)for(a=b.pool={sumLabels:[[]]},b=0;2>b;b++)a.sumLabels[0].push(h.text(l[0]))},_createDataPool:function(){var a=this.components,b,h=a.dataset,l=h.length,m,k,t,p,v=a.paper;for(m=0;m<l;m++){a=h[m];if(!a.drawn)break;b=a.components;k=a.graphics;t=k.container.anchorGroup||
k.container;p=k.dataLabelContainer;k=b.pool;if(!k)for(k=b.pool={element:[],label:[],image:[]},b=0;2>b;b++)k.element.push("column"===a.type?v.rect(t):v.polypath(t)),k.label.push(v.text(p))}},_manageScroll:function(){var a=this.config,b=this.components,l;l=b.xAxis[0]._getVisibleConfig();var m=b.dataset,p=m.length,k,t,E,v=a.scrollMinVal,z=a.scrollMaxVal,x=h(l.minValue),B=h(l.maxValue+1);k=a.visibleAxisMinVal;var K=B-x,C,N;.5<=l.maxValue-a.visibleAxisMaxVal?(N=B-z>K,a.scrollMinVal=N?B-K:z,a.scrollMaxVal=
B,a.visibleAxisMaxVal=l.maxValue,a.visibleAxisMinVal=l.minValue,a.startPathIndex=B-K,a.endPathIndex=B,E=!0):.5<=k-l.minValue&&(N=v-x>K,a.scrollMinVal=x,a.scrollMaxVal=N?x+K:v,a.visibleAxisMaxVal=l.maxValue,a.visibleAxisMinVal=l.minValue,a.startPathIndex=x,a.endPathIndex=x+K,t=!0);if(t||E){a.showsum&&a.isstacked&&(b=b.datasetGroup_scrollcolumn2d,b.drawSumValueFlag=!0,this._createSumLabelPool(),l=b.pool,E?C=b.graphics.sumLabels[0].slice(v,N?v+K:x):t&&(C=b.graphics.sumLabels[0].slice(N?z-K:B,z)),l.sumLabels[0].push.apply(l.sumLabels[0],
C.filter(this._filterSumFn).map(this._sumValModifyFn)));for(b=0;b<p;b++)k=m[b],l=k.components,this._createDataPool(),l=l.pool,E?C=k.components.data.slice(v,N?v+K:x):t&&(C=k.components.data.slice(N?z-K:B,z)),l.element.push.apply(l.element,C.filter(this._filterDataFn).map(this._datasetModifyFn)),l.label.push.apply(l.label,C.filter(this._filterLabelFn).map(this._labelModifyFn)),k.config.imageCount&&l.image.push.apply(l.image,C.filter(this._filterImageFn).map(this._imageModifyFn)),k.draw();a.scrollMinVal=
x;a.scrollMaxVal=B}},_createToolBox:function(){var b=this.components,h=this._scrollBar,l=h.get,p=h.add,x,k,t=b.scrollBar;m.mscartesian._createToolBox.call(this);x=b.tb;k=(b.toolBoxAPI||x.getAPIInstances(x.ALIGNMENT_HORIZONTAL)).Scroller;h.clear();p({isHorizontal:!0},{scroll:function(b){return function(){var f=arguments&&arguments[0],h=b.components.scrollBar.conf,k=h.scrollTo;b.config.scrollCurrPosition=f;k||a.raiseEvent("onScroll",{scrollPosition:f},b.chartInstance);h.scrollTo=!1;b.updateManager.apply(b,
arguments)}}(this)});h=l()[0];t||(b.scrollBar=(new k(h.conf,x.idCount,x.pId)).attachEventHandlers(h.handler))},_setAxisScale:function(){var a=this.config,b=this.components.xAxis[0].getCategoryLen(),h=this.jsonData,l=a.scrollOptions||(a.scrollOptions={}),m=this.components.dataset,k=m.length,t,p,v=0,z;z=a.canvasWidth;var B=a.scrollToEnd,K=a.lastScrollPosition,h=x(h.chart.numvisibleplot,Q(a.width/this.avgScrollPointWidth));for(p=0;p<k;p++)t=m[p],"column"===t.type&&v++;this.config.isstacked&&(v=1);b*=
v||1;2<=h&&h<b?(a.viewPortConfig.scaleX=b/=h,z=z*(b-1)*(void 0!==K?K:B?1:0),a.viewPortConfig.x=z/b,l.vxLength=h/k,a.scrollEnabled=!0):a.scrollEnabled=!1},drawScrollBar:function(){var b=this,h=b.config,m=h.viewPortConfig,p=b.components,B=b.graphics,k=p.paper,t=p.xAxis[0],E=t.config,v=t.config.axisRange,z=h.scrollOptions||(h.scrollOptions={}),K=v.max,C=v.min,N=z.vxLength,Q=p.scrollBar,v=Q.node,ia=h.scrollToEnd,ra=h.lastScrollPosition,sa=m.scaleX,na,ma,U,ba,Aa;ba=void 0!==ra?ra:ia?1:0;m=h.canvasLeft;
ia=h.canvasTop;ra=h.canvasHeight;na=h.canvasWidth;p=p.canvas.config;ma=p.canvasBorderWidth;U=E.showAxisLine?E.axisLineThickness||0:0;Aa=x(ma,E.lineStartExtension);E=x(ma,E.lineEndExtension);z.viewPortMin=C;z.viewPortMax=K;sa=z.scrollRatio=1/sa;N=z.windowedCanvasWidth=t.getAxisPosition(N);t=z.fullCanvasWidth=t.getAxisPosition(K-C)-N;z=B.scrollBarParentGroup;z||(z=B.scrollBarParentGroup=k.group("scrollBarParentGroup",B.parentGroup).insertBefore(B.datalabelsGroup));!1!==h.scrollEnabled?(Q.draw(m-Aa,
ia+ra+ma+U-2,{width:na+Aa+E,scrollRatio:sa,roundEdges:p.isRoundEdges,fullCanvasWidth:t,windowedCanvasWidth:N,scrollPosition:ba,parentLayer:z}),!v&&function(){var h;l.eve.on("raphael.scroll.start."+Q.node.id,function(k){h=k;a.raiseEvent("scrollstart",{scrollPosition:k},b.chartInstance)});l.eve.on("raphael.scroll.end."+Q.node.id,function(k){a.raiseEvent("scrollend",{prevScrollPosition:h,scrollPosition:k},b.chartInstance)})}()):Q&&Q.node&&Q.node.hide()},_drawDataset:function(){this._setClipping();m.mscartesian._drawDataset.call(this)},
_setClipping:function(){var a=this.config,b=this.graphics.datasetGroup,h=this.graphics.datalabelsGroup,l=this.graphics.trackerGroup,m=a.viewPortConfig,k=this.graphics.sumLabelsLayer,p=m.scaleX,x=this.get("config","animationObj"),v=x.duration,B=x.dummyObj,K=x.animObj,x=x.animType,m=m.x,a=a.height,C=this.components.canvas.config.clip["clip-canvas"],C=C&&C.slice(0)||[];this.config.clipSet?(b.animateWith(B,K,{"clip-rect":C},v,x),h.animateWith(B,K,{"clip-rect":C},v,x),l.attr({"clip-rect":C}),C[3]=a,C[1]=
0,k&&k.animateWith(B,K,{"clip-rect":C},v,x)):(b.attr({"clip-rect":C}),h.attr({"clip-rect":C}),l.attr({"clip-rect":C}),C[3]=a,C[1]=0,k&&k.attr({"clip-rect":C}));b.attr({transform:"T"+-(m*p)+",0"});h.attr({transform:"T"+-(m*p)+",0"});l.attr({transform:"T"+-(m*p)+",0"});k&&k.attr({transform:"T"+-(m*p)+",0"});this.config.clipSet=!0},configure:function(){var a=this.jsonData.chart,b;m.mscolumn2d.configure.call(this);b=this.config;b.scrollToEnd=x(a.scrolltoend,0);b.lastScrollPosition=void 0}},m.scrollbase)}]);
B.register("module",["private","modules.renderer.js-scrollarea2d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),m=a.chartAPI,B=a.pluckNumber,p=Math.floor;m("scrollarea2d",{friendlyName:"Scrollable Multi-series Area Chart",tooltipConstraint:"plot",canvasborderthickness:1,creditLabel:b,hasScroll:!0,defaultDatasetType:"scrollarea2d",applicableDSList:{scrollarea2d:!0},avgScrollPointWidth:75,defaultPlotShadow:0,binSize:0,_setAxisScale:function(){var a=this.config,b=
this.components.xAxis[0].getCategoryLen(),m=this.jsonData,h=a.scrollOptions||(a.scrollOptions={}),x;x=a.lastScrollPosition;var l=a.scrollToEnd,f=a.canvasWidth,m=B(m.chart.numvisibleplot,p(a.width/this.avgScrollPointWidth));2<=m&&m<b?(a.viewPortConfig.scaleX=b/=m,x=f*(b-1)*(void 0!==x?x:l?1:0),a.viewPortConfig.x=x/b,h.vxLength=m,a.scrollEnabled=!0):a.scrollEnabled=!1}},m.scrollcolumn2d,{enablemousetracking:!0},m.areabase)}]);B.register("module",["private","modules.renderer.js-scrollline2d",function(){var a=
this.hcLib,b=a.chartAPI,a=!a.CREDIT_REGEX.test(this.window.location.hostname);b("scrollline2d",{friendlyName:"Scrollable Multi-series Line Chart",tooltipConstraint:"plot",canvasborderthickness:1,defaultDatasetType:"line",creditLabel:a,avgScrollPointWidth:75,defaultPlotShadow:1,binSize:0},b.scrollarea2d,{zeroplanethickness:1,zeroplanealpha:40,showzeroplaneontop:0,enablemousetracking:!0},b.areabase)}]);B.register("module",["private","modules.renderer.js-scrollstackedcolumn2d",function(){var a=this.hcLib,
b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("scrollstackedcolumn2d",{friendlyName:"Scrollable Stacked Column Chart",canvasborderthickness:1,tooltipConstraint:"plot",avgScrollPointWidth:75,creditLabel:b},a.scrollcolumn2d,{},a.stackedcolumn2d)}]);B.register("module",["private","modules.renderer.js-scrollcombi2d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("scrollcombi2d",{friendlyName:"Scrollable Combination Chart",tooltipConstraint:"plot",
hasScroll:!0,canvasborderthickness:1,avgScrollPointWidth:40,applicableDSList:{area:!0,line:!0,column:!0},creditLabel:b,_createDatasets:a.mscombi2d},a.scrollcolumn2d,{},a.msarea)}]);B.register("module",["private","modules.renderer.js-scrollcombidy2d",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI;a("scrollcombidy2d",{friendlyName:"Scrollable Dual Y-Axis Combination Chart",tooltipConstraint:"plot",canvasborderthickness:1,avgScrollPointWidth:40,hasScroll:!0,
_swipeX:a.scrollcolumn2d,_drawDataset:a.scrollcolumn2d,updateManager:a.scrollcolumn2d,_setAxisScale:a.scrollcolumn2d,_createToolBox:a.scrollcolumn2d,_scrollBar:a.scrollcolumn2d,_manageScrollerPosition:a.scrollcolumn2d,drawScrollBar:a.scrollcolumn2d,_setClipping:a.scrollcolumn2d,_setInitialDrawingIndex:a.scrollcolumn2d,_filterLabelFn:a.scrollcolumn2d,_filterDataFn:a.scrollcolumn2d,_filterSumFn:a.scrollcolumn2d,_datasetModifyFn:a.scrollcolumn2d,_labelModifyFn:a.scrollcolumn2d,_sumValModifyFn:a.scrollcolumn2d,
_manageScroll:a.scrollcolumn2d,_createSumLabelPool:a.scrollcolumn2d,_createDataPool:a.scrollcolumn2d,_imageModifyFn:a.scrollcolumn2d,_filterImageFn:a.scrollcolumn2d,creditLabel:b,configure:a.scrollcolumn2d,eiMethods:{scrollTo:a.mscartesian._scrollTo}},a.mscombidy2d,{enablemousetracking:!0,isdual:!0},a.areabase)}]);B.register("module",["private","modules.renderer.js-scatter",function(){var a=this.hcLib,b=a.chartAPI,a=!a.CREDIT_REGEX.test(this.window.location.hostname);b("scatter",{friendlyName:"Scatter Chart",
isXY:!0,usesXYinCategory:!0,standaloneInit:!0,hasLegend:!0,defaultZeroPlaneHighlighted:!1,creditLabel:a,defaultDatasetType:"Scatter",applicableDSList:{Scatter:!0},drawTracker:!0},b.scatterBase,{allowreversexaxis:!0,enablemousetracking:!0})}]);B.register("module",["private","modules.renderer.js-bubble",function(){var a=this.hcLib,b=!a.CREDIT_REGEX.test(this.window.location.hostname),a=a.chartAPI,m=Math,B=m.max,p=m.min;a("bubble",{friendlyName:"Bubble Chart",standaloneInit:!0,defaultDatasetType:"bubble",
creditLabel:b,applicableDSList:{bubble:!0},getDataLimits:function(){var a=this.components.dataset,b,m,h,x=-Infinity,l=Infinity;b=0;for(h=a.length;b<h;b++)m=a[b],m=m.getDataLimits(),x=B(x,m.zMax||-Infinity),l=p(l,m.zMin||Infinity);x=-Infinity===x?0:x;l=Infinity===l?0:l;return{zMax:x,zMin:l}}},a.scatter,{enablemousetracking:!0})}])},[3,2,2,"sr4"]]);B.register("module",["private","modules.renderer.js-zoomline",function(){var a=this,b=a.hcLib,m=b.hashify,C=a.window,p=C.document,K=C.Image,N=C.MouseEvent,
Q=/msie/i.test(C.navigator.userAgent)&&!C.opera,h=b.chartAPI,x=b.extend2,l=b.addEvent,f=b.pluck,q=b.pluckNumber,y=b.getFirstColor,G=b.graphics.convertColor,L=b.bindSelectionEvent,k=b.parseUnsafeString,t=b.componentDispose,E=b.Raphael,v=b.toRaphaelColor,z=b.hasTouch,Y=b.plotEventHandler,ka=b.getMouseCoordinate,ea=!b.CREDIT_REGEX.test(C.location.hostname),va=b.TOUCH_THRESHOLD_PIXELS,ia=b.CLICK_THRESHOLD_PIXELS,ra=z?va:ia,sa=b.preDefStr.DEFAULT,na="rgba(192,192,192,"+(Q?.002:1E-6)+")",ma=b.schedular,
U=b.priorityList,ba=Math,Aa=ba.ceil,ua=ba.floor,P=ba.round,fa=ba.max,qa=ba.min,wa=ba.cos,ta=ba.sin,xa=C.parseFloat,Fa=C.parseInt,r;x(b.eventList,{zoomed:"FC_Zoomed",pinned:"FC_Pinned",resetzoomchart:"FC_ResetZoomChart"});h("zoomline",{standaloneInit:!0,canvasborderthickness:1,defaultDatasetType:"zoomline",applicableDSList:{zoomline:!0},friendlyName:"Zoomable and Panable Multi-series Line Chart",creditLabel:ea,_drawAxis:function(){var a=this.components.yAxis||[],c,d;c=0;for(d=a.length;c<d;c++)a[c].draw()},
_setCategories:function(){var a=this.config,c=this.jsonData,d=this.components.xAxis,n,b,h;b=a.cdmchar;var f=c.categories&&c.categories[0].category||[];if((a.cdm||"string"===typeof f)&&f.split){a=f.split(b);n=[];b=0;for(h=a.length;b<h;b+=1)n.push({label:a[b]});this.config.categories=c.categories[0].category=n}d[0].setAxisPadding(0,0);d[0].setCategory(n||f)},_createDatasets:function(){var a,c,d,b,g,h,k,w,l;g={};var m=this.config;a=this.components;w=this.jsonData;var q=w.dataset,F=q&&q.length,p=m.cdmchar,
u=m.cdm,r=this.defaultDatasetType,v=this.applicableDSList,m=this.components.legend.components.items||[];w=w.categories&&w.categories[0].category;q&&w||this.setChartMessage();this.config.categories=w;w=a.dataset||(a.dataset=[]);l=w.length;for(a=0;a<F;a++){k=q[a];if(u&&k.data&&k.data.split){h=k.data.split(p);b=[];c=0;for(d=h.length;c<d;c++)b.push({value:h[c]});k.data=b}c=k.parentyaxis||"";c=(c=this.isDual&&"s"===c.toLowerCase()?f(k.renderas,this.sDefaultDatasetType):f(k.renderas,r))&&c.toLowerCase();
v[c]||(c=r);if(d=B.get("component",["dataset",c]))void 0===g[c]?g[c]=0:g[c]++,(c=w[a])?(d=(c.JSONData.data||[]).length,b=(k.data||[]).length,d>b&&c.removeData(b,d-b,!1),w[a].JSONData=k,w[a].configure(),w[a]._deleteGridImages&&w[a]._deleteGridImages()):(c=new d,w.push(c),c.chart=this,c.index=a,c.init(k))}if(l>F){g=l-F;c=a;for(F=g+a;c<F;c++)t.call(w[c]);w.splice(a,g);m.splice(a,g)}},isWithinCanvas:function(a,c){var d=c.get("config"),n=b.getMouseCoordinate(c.get("linkedItems","container"),a,c),g=n.chartX,
h=n.chartY,f=d.canvasLeft,w=d.canvasTop,k=d.canvasLeft+d.canvasWidth,d=d.canvasHeight+d.canvasTop;n.insideCanvas=!1;n.originalEvent=a;g>f&&g<k&&h>w&&h<d&&(n.insideCanvas=!0);return n},highlightPoint:function(a,c,d,n,g,h){var f=this,k=f.config,l=f.components,m=f.graphics,q=l.paper,F=m.tracker,p=(l=l.dataset[g])&&l.config;g=l&&p.zoomedRadius||0;var u=l&&p.hoverCosmetics,l=u&&u.fill,p=u&&u.borderColor,u=u&&u.borderThickness,r={},r=function(a){b.plotEventHandler.call(this,f,a)},t=function(a){b.plotEventHandler.call(this,
f,a,"dataplotRollover")},v=function(a){b.plotEventHandler.call(this,f,a,"dataplotRollout")};F||(F=m.tracker=q.circle(0,0,0,m.trackerGroup).attr({"clip-rect":k.canvasLeft+","+k.canvasTop+","+k.canvasWidth+","+k.canvasHeight}).click(r).trackTooltip(!0).hover(t,v));n&&F.data("eventArgs",{x:n.x,y:n.y,tooltip:n.tooltip,link:n.link});k.lastHoveredPoint=n;r=Number(a)?{r:g,fill:l,stroke:p,"stroke-width":u}:{r:g,fill:na,stroke:na,"stroke-width":0};F.attr(r).tooltip(h).transform("t"+(c+k.canvasLeft)+","+(d+
k.canvasTop));n&&f.fireMouseEvent("mouseover",F&&F.node,k.lastMouseEvent)},fireMouseEvent:function(a,c,d){var b;c&&a&&(d||(d={}),d.originalEvent&&(d=d.originalEvent),d.touches&&(d=d.touches[0]),c.dispatchEvent?(N?b=new N(a,{bubbles:!!d.bubbles,cancelable:!!d.cancelable,clientX:d.clientX||d.pageX&&d.pageX-p.body.scrollLeft-p.documentElement.scrollLeft||0,clientY:d.clientY||d.pageY&&d.pageY-p.body.scrollTop-p.documentElement.scrollTop||0,screenX:d.screenX||0,screenY:d.screenY||0,pageX:d.pageX||0,pageY:d.pageY||
0}):p.createEvent&&(b=p.createEvent("HTMLEvents"),b.initEvent(a,!!d.bubbles,!!d.cancelable)),b.eventName=a,b&&c.dispatchEvent(b)):p.createEventObject&&c.fireEvent&&(b=p.createEventObject(),b.eventType=a,b.eventName=a,c.fireEvent("on"+a,b)))},configure:function(){var a,c=this.jsonData.chart||{},d=this.components.colorManager,b=d.getColor("canvasBorderColor"),g;c.animation=0;c.showvalues=0;h.msline.configure.call(this);g=this.config;a=g.style;x(g,{useRoundEdges:q(c.useroundedges,0),animation:!1,zoomType:"x",
canvasPadding:q(c.canvaspadding,0),scrollColor:y(f(c.scrollcolor,d.getColor("altHGridColor"))),scrollShowButtons:!!q(c.scrollshowbuttons,1),scrollHeight:q(c.scrollheight,16)||16,scrollBarFlat:q(c.flatscrollbars,0),allowPinMode:q(c.allowpinmode,1),skipOverlapPoints:q(c.skipoverlappoints,1),showToolBarButtonTooltext:q(c.showtoolbarbuttontooltext,1),btnResetChartTooltext:f(c.btnresetcharttooltext,"Reset Chart"),btnZoomOutTooltext:f(c.btnzoomouttooltext,"Zoom out one level"),btnSwitchToZoomModeTooltext:f(c.btnswitchtozoommodetooltext,
"<strong>Switch to Zoom Mode</strong><br/>Select a subset of data to zoom into it for detailed view"),btnSwitchToPinModeTooltext:f(c.btnswitchtopinmodetooltext,"<strong>Switch to Pin Mode</strong><br/>Select a subset of data and compare with the rest of the view"),pinPaneFill:G(f(c.pinpanebgcolor,b),q(c.pinpanebgalpha,15)),zoomPaneFill:G(f(c.zoompanebgcolor,"#b9d5f1"),q(c.zoompanebgalpha,30)),zoomPaneStroke:G(f(c.zoompanebordercolor,"#3399ff"),q(c.zoompaneborderalpha,80)),showPeakData:q(c.showpeakdata,
0),maxPeakDataLimit:q(c.maxpeakdatalimit,c.maxpeaklimit,null),minPeakDataLimit:q(c.minpeakdatalimit,c.minpeaklimit,null),crossline:{enabled:q(c.showcrossline,1),line:{"stroke-width":q(c.crosslinethickness,1),stroke:y(f(c.crosslinecolor,"#000000")),"stroke-opacity":q(c.crosslinealpha,20)/100},labelEnabled:q(c.showcrosslinelabel,c.showcrossline,1),labelstyle:{fontSize:xa(c.crosslinelabelsize)?xa(c.crosslinelabelsize)+"px":a.outCanfontSize,fontFamily:f(c.crosslinelabelfont,a.outCanfontFamily)},valueEnabled:q(c.showcrosslinevalues,
c.showcrossline,1),valuestyle:{fontSize:xa(c.crosslinevaluesize)?xa(c.crosslinevaluesize)+"px":a.inCanfontSize,fontFamily:f(c.crosslinevaluefont,a.inCanvasStyle.fontFamily)}},useCrossline:q(c.usecrossline,1),tooltipSepChar:f(c.tooltipsepchar,", "),showTerminalValidData:q(c.showterminalvaliddata,0),cdmchar:f(c.dataseparator,"|"),cdm:q(c.compactdatamode,0)})},getValuePixel:function(a){var c=this.config.viewPortConfig;return c.ddsi+ua(a/c.ppp)},__toolbar:function(){var a,c,d,b,g=this,h=g.components,
f=h.tb=new (B.register("component",["toolbox","toolbox"])),k=f.getDefaultConfiguration(),l,m;f.init({iAPI:{chart:g},graphics:g.graphics,chart:g,components:h});a=h.toolBoxAPI||f.getAPIInstances(f.ALIGNMENT_HORIZONTAL);c=a.SymbolStore;d=a.ComponentGroup;b=a.Toolbar;l=a.Symbol;m=a.Scroller;f.graphics={};return{reInit:function(){f.init({iAPI:{chart:g},graphics:g.graphics,chart:g,components:h})},addSymbol:function(a,c,e,d){a=new l(a);e&&d.setConfiguaration({buttons:x(x({},k),e)});c.tooltext=e.tooltip;
c&&a.attachEventHandlers(c);d.addSymbol(a);return a},addScroll:function(a,c){var e=new m(a);c&&e.attachEventHandlers(c);return e},addComponentGroup:function(a,c){var e;e=new d;e.setConfiguaration({group:{fill:c?c.fill:G("EBEBEB",0),borderThickness:c?q(c.borderThickness,0):0}});return e},addToolBox:function(a){var c,e=new b;for(c=0;c<a.length;c+=1)e.addComponent(a[c]);return e},setDrawingArea:function(a,c){a.drawingArea=c;return a},draw:function(a){var c,e,d;for(c=0;c<a.length;c+=1)e=a[c],d=e.drawingArea,
e.draw(d.x,d.y)},registerSymbol:function(a,e){c.register(a,e)},getLogicalSpace:function(a){return a.getLogicalSpace()},getNode:function(a){return a.node}}},__preDraw:function(){var a,c,d,b,g,h,f,k,l,m=this,p=m.components,F=p.paper,t=m.graphics;c=t.imageContainer;var u=m.config,v=u.canvasLeft,B=u.canvasWidth;a=m.jsonData.chart;var y=u.cdm;d=p.xAxis[0];var A=u.viewPortConfig,z=m.components.canvas.config;g=fa(z.canvasPadding,z.canvasPaddingLeft,z.canvasPaddingRight);h=p.yAxis[0];l=t.datasetGroup;var z=
u.canvasHeight,C=u.canvasTop,G=m.jsonData.chart,G=u.borderWidth||(u.borderWidth=q(G.showborder,1)?q(G.borderthickness,1):0);f=u.allowPinMode;var K=u.crossline,A=d.getCategoryLen(),N=Fa(q(a.displaystartindex,1),10)-1,P=Fa(q(a.displayendindex,A||2),10)-1,Q=0,R=p.dataset,D=R.length,p=t.crossline;u.updateAnimDuration=500;c.transform("t"+v+","+C);c.attr({"clip-rect":v+","+C+","+B+","+z});u.status="zoom";u.maxZoomLimit=q(a.maxzoomlimit,1E3);u.viewPortHistory=[];1>(c=q(a.pixelsperpoint,15))&&(c=1);(d=q(a.pixelsperlabel,
a.xaxisminlabelwidth,d.getAxisConfig("labels").rotation?20:60))<c&&(d=c);(0>N||N>=(A-1||1))&&(N=0);(P<=N||P>(A-1||1))&&(P=A-1||1);A=u.viewPortConfig=x(u.viewPortConfig,{amrd:q(a.anchorminrenderdistance,20),nvl:q(a.numvisiblelabels,0),cdm:y,oppp:c,oppl:d,dsi:N,dei:P,vdl:P-N,clen:A,offset:0,step:1,llen:0,alen:0,ddsi:N,ddei:P,ppc:0});if(A.clen){for(;D--;)a=R[D].config,Q=fa(Q,a.drawanchors&&(a.anchorradius||0)+(Number(a.anchorborderthickness)||0)||0);u.overFlowingMarkerWidth=Q;g=u.canvasPadding=fa(Q,
g);u._prezoomed=A.dei-A.dsi<A.clen-1;a=u._visw=u.canvasWidth-2*g;b=u._visx=u.canvasLeft+g;u._visout=-(u.height+z+1E3);u._ypvr=h&&h.getPVR()||0;g=u._yminValue=h.getLimit().min;h=u._ymin=h.getPixel(g);l=l.attr("clip-rect",[b-Q,C,a+2*Q,z]);t.scroll||(t.scroll=F.group("scroll").insertAfter(t.datasetGroup));f&&(u.viewPortConfig.pinned=!1,f=E.crispBound(0,C-h,0,z,G),u["clip-pinrect"]=[f.x,C,f.width,f.height],k=(t.zoompin||(t.zoompin=F.group("zoompin"))).insertBefore(l).transform(u._pingrouptransform=["T",
b,h]).hide(),l={"stroke-width":0,stroke:"none",fill:u.pinPaneFill,"shape-rendering":"crisp",ishot:!0},t.pinrect?(l.x=0,l.y=C-h,l.width=a,l.height=z,t.pinrect.attr(l)):t.pinrect=F.rect(0,C-h,a,z,k).attr(l),l={transform:k.transform(),x:0,y:C-h,width:0,height:z,stroke:"none",fill:na,ishot:!0,cursor:E.svg&&"ew-resize"||"e-resize"},t.pintracker?t.pintracker.attr(l).hide():t.pintracker=F.rect(t.trackerGroup).attr(l).hide().drag(function(a,c){var e=c[0],d=b+e+this.__pindragdelta,g=this.__pinboundleft,h=
this.__pinboundright,f=this.data("cliprect").slice(0),l=u._ymin;d<g?d=g:d>h&&(d=h);k.transform(["T",d,l]);t.pintracker.transform(k.transform());E.svg||(f[0]=f[0]+d-b-this.__pindragdelta,k.attr("clip-rect",f));this.__pindragoffset=e},function(){var a=u["clip-pinrect"],c=u._visw;this.__pinboundleft=0-a[0]+u._visx+u.canvasLeft;this.__pinboundright=this.__pinboundleft+c-a[2];this.data("cliprect",k.attr("clip-rect"));k._.clipispath=!0},function(){k._.clipispath=!1;this.__pindragdelta+=this.__pindragoffset;
delete this.__pindragoffset;delete this.__pinboundleft;delete this.__pinboundright}));G++;f=E.crispBound(v-G,C+z+G,B+G+G,u.scrollHeight,G);G--;L(m,{attr:{stroke:u.zoomPaneStroke,fill:u.zoomPaneFill,strokeWidth:0},selectionStart:function(){},selectionEnd:function(a){var c=a.selectionLeft-v;a=c+a.selectionWidth;t.crossline&&t.crossline.hide();m[u.viewPortConfig.pinned?"pinRangePixels":"zoomRangePixels"](c,a)}});K&&0!==K.enabled&&1===u.useCrossline?(p||(p=t.crossline=new r),p.configure(m,K)):(K&&(K.enabled=
0),p&&p.hide())}},resetZoom:function(){var e=this.config.viewPortHistory,c=e[0];if(!e.length)return!1;e.length=0;this.zoomTo(c.dsi,c.dei,c)&&a.raiseEvent("zoomReset",this._zoomargs,this.chartInstance,[this.chartInstance.id]);return!0},eiMethods:{zoomOut:function(a){var c=this.apiInstance,d=c.chartInstance.args.asyncRender,b,g=c.getJobList();if(c)if(d)g.eiMethods.push(ma.addJob(function(){b=c.zoomOut&&c.zoomOut();"function"===typeof a&&a(b)},U.postRender));else return c.zoomOut&&c.zoomOut()},scrollTo:h.mscartesian._scrollTo,
zoomTo:function(a,c,d){var b=this.apiInstance,g=b.chartInstance.args.asyncRender,h,f=b.getJobList();if(b)if(g||d)f.eiMethods.push(ma.addJob(function(){h=b.zoomRange&&b.zoomRange(a,c);"function"===typeof d&&d(h)},U.postRender));else return b.zoomRange&&b.zoomRange(a,c)},resetChart:function(){var a=this.apiInstance,c=a.chartInstance.args.asyncRender,d=a.getJobList(),b=function(){a.pinRangePixels&&a.pinRangePixels();a.resetZoom&&a.resetZoom()};a&&(c?d.eiMethods.push(ma.addJob(b,U.postRender)):b())},
setZoomMode:function(a){var c=this.apiInstance,d=c.chartInstance.args.asyncRender,b=c.getJobList();c&&(d?b.eiMethods.push(ma.addJob(function(){c.activatePin&&c.activatePin(!a)},U.postRender)):c.activatePin&&c.activatePin(!a))},getViewStartIndex:function(a){var c=this.apiInstance,d=c.chartInstance.args.asyncRender,b,g=c.getJobList();if(a||d)g.eiMethods.push(ma.addJob(function(){"function"===typeof a&&c&&(b=c.config.viewPortConfig)&&a(b.ddsi)},U.postRender));else if(c&&(b=c.config.viewPortConfig))return b.ddsi},
getViewEndIndex:function(a){var c=this.apiInstance,d=c.chartInstance.args.asyncRender,b,g,h=c.getJobList();if(a||d)h.eiMethods.push(ma.addJob(function(){"function"===typeof a&&c&&(b=c.config.viewPortConfig)&&(g=b.ddei-1,a((g>=b.clen?b.clen:g)-1))},U.postRender));else if(c&&(b=c.config.viewPortConfig))return g=b.ddei-1,(g>=b.clen?b.clen:g)-1}},zoomOut:function(){var e,c,d=this.config;c=d.viewPortHistory;var b,g,h;e=c.pop();c=c[0]||d.viewPortConfig;e?(b=e.dsi,g=e.dei):d._prezoomed&&(b=0,g=c.clen-1);
(h=this.zoomTo(b,g,e))&&a.raiseEvent("zoomedout",h,this.chartInstance);return!0},zoomRangePixels:function(e,c){var d=this.config,b=d.viewPortHistory,d=d.viewPortConfig,g=d.ppp,h=d.ddsi,f;b.push(d);(f=this.zoomTo(h+ua(e/g),h+ua(c/g)))?a.raiseEvent("zoomedin",f,this.chartInstance):b.pop()},zoomRange:function(e,c){var d,b,g=this.config,h=g.viewPortConfig;b=this.components.xAxis[0];var f=g.viewPortHistory,k;f.push(h);d=b.getPixel(e);b=b.getPixel(c);h.x=d;h.scaleX=g.canvasWidth/(d-b);(k=this.zoomTo(+e,
+c))?a.raiseEvent("zoomedin",k,this.chartInstance):f.pop()},zoomTo:function(e,c,d){var b,g;b=this.config;var h=this.components,f=b.viewPortConfig,k=b.canvasHeight;g=b.canvasLeft;var l=b.canvasTop,m=b.canvasBottom,p=b.viewPortHistory,q=f.clen,r=this.components.xAxis[0];0>e&&(e=0);e>=q-1&&(e=q-1);c<=e&&(c=e+1);c>q-1&&(c=q-1);if(e===c||e===f.dsi&&c===f.dei)return!1;this.pinRangePixels();f=x({},f);f.dsi=e;f.dei=c;f=b.viewPortConfig=f;d?this.updateVisual(d.x,d.y,d.scaleX,d.scaleY):(d=r.getPixel(e),b=r.getPixel(c),
g=this.getOriginalPositions(d-g,l,b-g,m-l),this.zoomSelection(g[0],0,g[2],k));h.scrollBar.node.attr({"scroll-ratio":f.vdl/(q-!!q),"scroll-position":[f.dsi/(q-f.vdl-1),!0]});h={level:p.length+1,startIndex:e,startLabel:r.getLabel(e).label,endIndex:c,endLabel:r.getLabel(c).label};a.raiseEvent("zoomed",h,this.chartInstance,[this.chartInstance.id,e,c,h.startLabel,h.endLabel,h.level]);return h},activatePin:function(e){var c=this.config.viewPortConfig,d=this.components.tb.graphics.pinButton;if(c.pinned^
(e=!!e))return e||this.pinRangePixels(),a.raiseEvent("zoomModeChanged",{pinModeActive:e},this.chartInstance,[]),this.updateButtonVisual(d.node,e?"pressed":"enable"),c.pinned=e},updateButtonVisual:function(a,c){return a.attr({disable:{config:{hover:{fill:"#FFFFFF","fill-symbol":"#FFFFFF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"},normal:{fill:"#FFFFFF","fill-symbol":"#FFFFFF",stroke:"#E3E3E3","stroke-width":1,cursor:"default"},disable:{fill:"#FFFFFF","fill-symbol":"#FFFFFF","stroke-width":1,
stroke:"#E3E3E3","stroke-opacity":1,cursor:"default"},pressed:{fill:"#FFFFFF","fill-symbol":"#FFFFFF","stroke-width":1,stroke:"#E3E3E3",cursor:"default"}},"button-disabled":!1,stroke:"#E3E3E3","stroke-opacity":1},enable:{config:{hover:{fill:"#FFFFFF","fill-symbol":"#FFFFFF","stroke-width":1,stroke:"#aaaaaa",cursor:"pointer"},normal:{fill:"#FFFFFF","fill-symbol":"#FFFFFF",stroke:"#C2C2C2","stroke-width":1,cursor:"pointer"},disable:{fill:"#FFFFFF","fill-symbol":"#FFFFFF","stroke-width":1,stroke:"#E3E3E3",
"stroke-opacity":1,cursor:"pointer"},pressed:{fill:"#EFEFEF","fill-symbol":"#EFEFEF","stroke-width":1,stroke:"#C2C2C2",cursor:"pointer"}},"button-disabled":!1,fill:["#FFFFFF","#FFFFFF","#FFFFFF","#FFFFFF",!0],stroke:"#C2C2C2","stroke-opacity":1},pressed:{config:{hover:{fill:"#dcdcdc","fill-symbol":"#FFFFFF","stroke-width":1,stroke:"#b7b7b7",cursor:"pointer"},normal:{fill:"#dcdcdc","fill-symbol":"#FFFFFF","stroke-width":1,stroke:"#b7b7b7",cursor:"pointer"},pressed:{fill:"#dcdcdc","fill-symbol":"#FFFFFF",
"stroke-width":1,stroke:"#b7b7b7",cursor:"pointer"}},fill:"#dcdcdc","fill-symbol":"#FFFFFF","stroke-width":1,stroke:"#b7b7b7",cursor:"pointer"}}[c])},pinRangePixels:function(a,c){var d,b=this.components,g=b.paper,h=this.graphics,f=this.config,k=f.canvasLeft,l=f.viewPortConfig,m=h.zoompin;d=h.pinrect;var q=f["clip-pinrect"],p=f._pingrouptransform,b=b.dataset,r=c-a,u,t,v,h=h.pintracker;if(l&&m&&d){if(a===c)return m.hide(),h.hide(),l.pinned=!1;for(v=b.length;v--;)u=b[v],d=u.graphics,t=d.pinline,t||(t=
d.pinline=g.path(m)),t.attr({path:d.lineElement.attrs.path,transform:["T",-f._visx,-f._ymin]}).attr(u.config.pin);q[0]=a+k;q[2]=r;m.attr({"clip-rect":q,transform:p}).show();h.__pindragdelta=0;h.show().attr({transform:p,x:a,width:r});this.getValuePixel(a);this.getValuePixel(c);return l.pinned=!0}},_createLayers:function(){var a,c=this.components.paper;h.scatter._createLayers.call(this);a=this.graphics;a.imageContainer=c.group("dataset-orphan",a.dataSetGroup);this.__preDraw()},getValue:function(a){var c=
this.config,d=this.components,b=c.viewPortConfig;a=this.getOriginalPositions(a.x,a.y,a.x,a.y);var g=d.xAxis[0].config.axisRange,d=d.yAxis[0].config.axisRange,h=g.min,f=d.max;return{x:h+(a[0]-c.canvasLeft)/(c.canvasWidth*b.scaleX/(g.max-h)),y:f-(a[1]-c.canvasTop)/(c.canvasHeight*b.scaleY/(f-d.min))}},getOriginalPositions:function(a,c,d,b){var g=this.config,h=g.viewPortConfig,f=h.scaleX,k=h.scaleY,l=h.x,h=h.y,m=qa(a,d);a=fa(a,d);d=qa(c,b);c=fa(c,b);a=a>g.canvasWidth?g.canvasWidth:a;c=c>g.canvasHeight?
g.canvasHeight:c;m=0>m?0:m;d=0>d?0:d;return[l+m/f,h+d/k,(a-m)/f,(c-d)/k]},zoomSelection:function(a,c,d,b){var g=this.config;d&&b&&(d=Math.abs(g.canvasWidth/d),b=Math.abs(g.canvasHeight/b),this.updateVisual(a,c,d,b))},updateVisual:function(a,c,b,n,g){var h=this.config,f=h.viewPortConfig,k=h.canvasWidth,l=h.canvasHeight,m=h.viewPortHistory.slice(-1)[0]||f,h=h.maxZoomLimit;f.x=isNaN(a)?a=m.x:a;f.y=isNaN(c)?c=m.y:c;f.scaleX=b||(b=m.scaleX);f.scaleY=n||(n=m.scaleY);b>h&&(f.x=qa(a,k-k/h),f.scaleX=h);n>
h&&(f.y=qa(c,l-l/h),f.scaleY=h);this.updateManager(g)},toogleDragPan:function(a){var c=this.config.viewPortConfig,b=c.status;a&&(c.status="zoom"===b?"pan":"zoom")},resize:function(){var a=this.config,c=this.graphics,b=this.components.canvas,h=b.graphics,g=h.canvasBorderElement,h=h.canvasElement,b=b.config.canvasBorderThickness,f=b/2,k=a.canvasHeight-=b,l=a.canvasWidth-=2*b,m=a.canvasLeft+=b;a.canvasBottom-=b;a.canvasRight-=b;h?h.attr({x:m,y:a.canvasTop,height:k,width:l}):this.drawCanvas();g&&g.attr({x:m-
f,y:a.canvasTop-f,height:k+b,width:l+b,"stroke-width":b});c.imageContainer.attr({"clip-rect":a.canvasLeft+","+a.canvasTop+","+a.canvasWidth+","+a.canvasHeight}).transform("t"+a.canvasLeft+","+a.canvasTop);c.trackerElem.attr({x:a.canvasLeft,y:a.canvasTop,width:a.canvasWidth,height:a.canvasHeight});c.tracker&&c.tracker.attr({"clip-rect":a.canvasLeft+","+a.canvasTop+","+a.canvasWidth+","+a.canvasHeight})},updateManager:function(a){var c,b;b=this.components;var h=b.dataset,g=h.length;c=this.config;var f=
c.allowPinMode,k=c.viewPortConfig,l=c._ypvr,m=c._visw,q=this.components.xAxis[0],p=function(){return q.getPixel.apply(q,arguments)},r=q.getAxisConfig("labels").style,t,u,v,x,z,A=this.updateButtonVisual,y=b.tb.graphics,G=y.zoomOutButton,E=y.resetButton,y=y.pinButton,K=c.viewPortHistory;if(c.legendClicked)for(a=0;a<g;a+=1)h[a].draw();else{!k&&(k=c.viewPortConfig);t=k.oppp;z=v=k.nvl;u=k.dsi;v=k.dei;u=k.vdl=v-u;v=k.ppl=z?m/z:k.oppl;m=k.step=(x=k.ppp=m/u)<t?Aa(t/x):1;r=k.lskip=Aa(fa(v,xa(r.lineHeight))/
x/m);void 0!==a?(t=(k.clen-u-1)*a,k.offset=(t-(t=Fa(t)))*x,u=t+u):(t=k.dsi,u=k.dei,k.offset=0);x=k.norm=t%m;k.ddsi=t-=x;k.ddei=u=u+2*m-x;k.pvr=l;k._ymin=c._ymin;k._yminValue=c._yminValue;k.x=(p(t)-p(q.getLimit().min)+k.offset)/k.scaleX;u-t>q.getCategoryLen()?k.scaleX=1:k.scaleX=q.getCategoryLen()/Math.abs(u-t-m-.9);void 0!==a&&b.scrollBar.node&&b.scrollBar.node.attr({"scroll-position":k._pos=a});b=q._getVisibleConfig();b=Math.ceil((b.maxValue-b.minValue+1)/z);c=c.viewPortConfig&&c.viewPortConfig.scaleX;
c=Math.max(Math.round(q.getAxisConfig("labelStep")/c),z?b:r*m);q.setLabelConfig({step:c});c=q.getAxisConfig("animateAxis");z=q.getAxisConfig("drawAxisName");a&&q.setAxisConfig({animateAxis:!1,drawAxisName:!1});q.draw();q.setAxisConfig({animateAxis:c,drawAxisName:z});for(a=0;a<g;a+=1)h[a].draw();A(G.node,k.vdl===k.clen-1?"disable":"enable");A(E.node,0<K.length?"enable":"disable");y&&A(y.node,f?"enable":"disable");C.FC_DEV_ENVIRONMENT&&C.jQuery&&(B["debugger"].enable()?(this.debug=this.debug||(C.jQuery("#fc-zoominfo").length||
C.jQuery("body").append('<pre id="fc-zoominfo">'),C.jQuery("#fc-zoominfo").css({position:"absolute",left:"10px",top:"0","pointer-events":"none",opacity:.7,width:"250px",zIndex:"999",border:"1px solid #cccccc","box-shadow":"1px 1px 3px #cccccc",background:"#ffffff"})),this.debug.text(JSON.stringify(k,0,2))):(this.debug&&C.jQuery("#fc-zoominfo").remove(),delete this.debug))}},_drawDataset:function(){h.zoomline.updateManager.call(this)},getParsedLabel:function(a){var c=this.xlabels;return c.parsed[a]||
(c.parsed[a]=k(c.data[a]||""))},_createToolBox:function(){var a,c,b,f,g,k,l,m=this,q=m.config;l=q.allowPinMode;f=m.components;var p=q.showToolBarButtonTooltext;a=f.chartMenuBar;c=f.actionBar;a&&a.drawn||c&&c.drawn||(h.scrollcolumn2d._createToolBox.call(m),a=f.tb,c=a.graphics||(a.graphics={}),b=f.toolBoxAPI||a.getAPIInstances(a.ALIGNMENT_HORIZONTAL),b=b.Symbol,f=(f.chartMenuBar||f.actionBar).componentGroups[0],g=c.zoomOutButton=(new b("zoomOutIcon",void 0,a.idCount++,a.pId)).attachEventHandlers({click:function(){m.zoomOut()},
tooltext:p&&q.btnZoomOutTooltext||""}),k=c.resetButton=(new b("resetIcon",void 0,a.idCount++,a.pId)).attachEventHandlers({click:function(){m.resetZoom()},tooltext:p&&q.btnResetChartTooltext||""}),l&&(l=c.pinButton=(new b("pinModeIcon",void 0,a.idCount++,a.pId)).attachEventHandlers({click:function(){m.activatePin(!q.viewPortConfig.pinned)},tooltext:p&&q.btnSwitchToPinModeTooltext||""}),f.addSymbol(l,!0)),f.addSymbol(k,!0),f.addSymbol(g,!0))},_scrollBar:h.scrollcolumn2d,_manageScrollerPosition:h.scrollcolumn2d,
draw:function(){var b,c,d,f,g,k,l,m,q,p,t=this,r=t.config,v=t.graphics||(t.graphics={});k=t.components;b=t.jsonData;f=b.dataset;var u=b.categories&&b.categories[0].category,x;h.msline.draw.call(t);l=r.canvasLeft;m=r.canvasTop;q=r.canvasHeight;p=r.canvasWidth;b=r.borderWidth;c=r.useRoundEdges;d=r.viewPortConfig;(x=v.toolboxParentGroup)||(x=v.toolboxParentGroup=k.paper.group("toolbarParentGroup",v.parentGroup));f&&u&&(b++,f=E.crispBound(l-b,m+q+b,p+b+b,r.scrollHeight,b),b--,k=(g=k.scrollBar)&&g.node,
g.draw(f.x+(c&&-1||b%2),f.y-(c&&4||2),{isHorizontal:!0,width:f.width-(!c&&2||0),height:f.height,showButtons:r.scrollShowButtons,scrollRatio:d.vdl/(d.clen-!!d.clen),scrollPosition:[d.dsi/(d.clen-d.vdl-1),!1],r:c&&2||0,parentLayer:x.insertBefore(v.datalabelsGroup)}),!k&&function(){var c;E.eve.on("raphael.scroll.start."+g.node.id,function(b){c=b;t.graphics.crossline&&t.graphics.crossline.disable(!0);a.raiseEvent("scrollstart",{scrollPosition:b},t.chartInstance)});E.eve.on("raphael.scroll.end."+g.node.id,
function(b){t.graphics.crossline&&t.graphics.crossline.disable(!1);a.raiseEvent("scrollend",{prevScrollPosition:c,scrollPosition:b},t.chartInstance)})}())}},h.msline,{showValues:0,zeroplanethickness:1,zeroplanealpha:40,showzeroplaneontop:0,enablemousetracking:!0});h("zoomlinedy",{standaloneInit:!0,defaultDatasetType:"zoomline",applicableDSList:{zoomline:!0},creditLabel:ea,friendlyName:"Zoomable and Panable Multi-series Dual-axis Line Chart",_spaceManager:h.msdybasecartesian._spaceManager,_setAxisLimits:h.msdybasecartesian._setAxisLimits,
_createAxes:h.msdybasecartesian._createAxes,_feedAxesRawData:h.msdybasecartesian._feedAxesRawData},h.zoomline,{isdual:!0});B.register("component",["dataset","zoomline",{_setConfigure:function(){var a=this.config,c=this.chart.jsonData.chart,b=this.JSONData;a.drawanchors=q(c.drawanchors,c.showanchors,1);a.anchorradius=q(b.anchorradius,c.anchorradius,a.linethickness+2);this.__base__._setConfigure.apply(this,arguments)},_firePlotEvent:function(a,c,d,f){var g=this.chart,h=this.components,h=(h.dataRT||
h.data)[c],k=h.graphics.element,l=b.toolTip,m=d.originalEvent,q=g.components.paper.canvas.style,t=!this.chart.config.useCrossline,p,r;if(k)switch(p=h.config,r=p.setLink,p=p.eventArgs,a){case "mouseover":t&&this._decideTooltipType(c,f,d);this._rolloverResponseSetter(g,h,m);r&&(q.cursor="pointer");break;case "mouseout":l.hide(g.chartInstance.id);this._rolloutResponseSetter(g,h,m);r&&(q.cursor=sa);break;case "click":Y.call(k,g,m,"dataplotclick",p);break;case "mousemove":t&&this._decideTooltipType(c,
f,d)}},configure:function(){var a,c,d={};a=this.chart.jsonData.chart;a.animation=0;a.showvalues=q(a.showvalues,0);this.__base__.configure.call(this);c=this.config;a=c.linethickness+q(a.pinlinethicknessdelta,1);d["stroke-width"]=0<a&&a||0;d["stroke-dasharray"]=[3,2];d.stroke=b.hashify(c.linecolor);d["stroke-opacity"]=c.alpha/100;d["stroke-linejoin"]=c["stroke-linejoin"]="round";d["stroke-linecap"]=c["stroke-linecap"]="round";c.pin=d;c.animation=!1;c.transposeanimduration=0},isWithinShape:function(a,
c,b,h){if(a){var g=a.config.anchorProps,f=g.borderThickness,k=this.components.data,l=q(a.config.dragTolerance,0),m,p;m=a._xPos;p=a._yPos;if(null!==p)return a=a.config.hoverEffects,g=Math.max(g.radius,a&&a.anchorRadius||0,ra)+f/2,b=Math.sqrt(Math.pow(b-m,2)+Math.pow(h-p,2)),b<=g||b<=l?{pointIndex:c,hovered:!0,pointObj:k[c]}:!1}},draw:function(){var a,c,d=!1,h=!1,g=this,k=g.JSONData,l=g.chart,m=l.components,p=g.config,t=g.index||g.positionIndex,r=l.config,x=l.jsonData.chart,z=g.components,u=z.data,
B=u.length,y,C=m.paper,A=m.xAxis[0],G=g.yAxis,E,L,N=l.graphics,P=N.datalabelsGroup,Q=b.parseUnsafeString,U=b.getValidValue,R,D,J,M,ba,Z,W,H,X,O=p.linethickness,Y=g.graphics.container,ea=g.graphics.trackerContainer,na=r.viewPortConfig,ma=N.datasetGroup,ia,ra=p.shadow,ha,sa=g.graphics.dataLabelContainer,I={},oa,la,ta=l.is3D,ua=p.use3dlineshift,ja,pa,va,wa=G.getAxisBase(),xa=G.yBasePos=G.getAxisPosition(wa),Aa=A.getAxisPosition(0),Fa=A.getAxisPosition(1)-Aa,Sa,Ka=ta?10:0,za=ta&&ua?10:0,aa=[fa(0,r.canvasLeft-
Ka),fa(0,r.canvasTop-za),fa(1,r.canvasWidth+2*Ka),fa(1,r.canvasHeight+za)],Ta=[fa(0,r.canvasLeft-Ka),fa(0,r.canvasTop-za),1,fa(1,r.canvasHeight+2*za)],qb={},da=l.hasScroll||!1,Ga,La=p.lineDashStyle,Ma={color:p.linecolor,alpha:p.alpha};[v(Ma),La].join(":");var Ua,gb,$a,Pa=g.graphics.lineElement,Va=g.visible,hb,ab,Ha=g.pool||(g.pool={element:[]}),ib={},bb={},jb={},kb,cb=[],lb,Ca,Wa,Xa,db,eb,rb=r.showTerminalValidData,Qa=r.viewPortConfig,sb=r.showPeakData,mb=r.maxPeakDataLimit,nb=r.minPeakDataLimit,
tb=q(r.useCrossline,0),Ia=Qa.step,fb=A.getPixel(Qa.step)-Aa<Qa.amrd,ob=function(a,c){var b=a.graphics;la=a.config;M=la.setValue;J=la.setLink;hb=la.x||c;pa=U(Q(f(la.setLevelTooltext,k.plottooltext,x.plottooltext)));la.toolTipValue=G.dataLabels(M);ja=la.showValue;I=la.anchorProps;ha=I.shadow;Z=la.displayValue;ab=la.dip||0;a||(a=u[c]={graphics:{}});$a={color:la.color,alpha:la.alpha};va=la.dashStyle;E=la.xPos||A.getAxisPosition(hb)-Ka;L=g.visible?G.getAxisPosition(M)+za:xa;ia=la.hoverEffects;I.isAnchorHoverRadius=
ia.anchorRadius;kb=A.getLabel(c);R=la.toolText+(pa?"":la.toolTipValue);la.finalTooltext=R;ba={index:c,link:J,value:M,displayValue:Z,categoryLabel:kb,toolText:R,id:p.userID,datasetIndex:t,datasetName:k.seriesname,visible:Va};null===la.setValue||fb||(I.imageUrl?(oa=new K,oa.onload=g._onAnchorImageLoad(g,c,ba,E,L),oa.onerror=g._onErrorSetter(E,L,c,g),oa.src=I.imageUrl):(D=b.element,D||(D=Ha.element&&Ha.element.length?b.element=Ha.element.shift():b.element=C.polypath(Y.anchorGroup)),D.attr({polypath:[I.symbol[1]||
2,E,L,I.radius,I.startAngle,ab],fill:v({color:I.bgColor,alpha:I.bgAlpha}),stroke:v({color:I.borderColor,alpha:I.borderAlpha}),"stroke-width":I.borderThickness,visibility:I.radius?Va:"hidden"}).shadow(ha,Y.anchorShadowGroup).data("anchorRadius",I.radius).data("anchorHoverRadius",ia.anchorRadius).data("hoverEnabled",ia.enabled).data("eventArgs",ba),ia.enabled&&(X={polypath:[ia.anchorSides||2,E,L,ia.anchorRadius,ia.startAngle,ia.dip],fill:v({color:ia.anchorColor,alpha:ia.anchorBgAlpha}),stroke:v({color:ia.anchorBorderColor,
alpha:ia.anchorBorderAlpha}),"stroke-width":ia.anchorBorderThickness},H={polypath:[I.sides,E,L,I.radius,I.startAngle,ab],fill:v({color:I.bgColor,alpha:I.bgAlpha}),stroke:v({color:I.borderColor,alpha:I.borderAlpha}),"stroke-width":I.borderThickness},D&&D.data("setRolloverAttr",X).data("setRolloutAttr",H)),D[M||0===M?"show":"hide"]()),fa(I.radius,ia&&ia.anchorRadius||0));a._xPos=E;a._yPos=L;[v($a||Ma),va||La].join(":");jb=g.getLinePath([a],jb);Ua=v($a||Ma);gb=va||La;f(la.setColor,la.setAlpha,la.setDashed);
[Ua,gb].join(":");ja&&!I.imageUrl&&g.drawLabel(c);cb.push(a)},ub=function(a,c){var b=a&&a.length,d=a.slice().sort(function(a,c){return a.config.setValue-c.config.setValue}),e=d&&d.pop().config.setValue,g=d.length&&d.shift().config.setValue||e,d=0;if(e>mb||g<nb)for(;d<b;){D=a[d];e=D.config.setValue;if(e>mb||e<nb)e=c+d,ob(D,e);d+=1}},Ya=function(c,b){--c;b+=1;var d;for(y=c;y<b;y+=1)for(d in a=u[y]&&u[y].graphics||{},u[y]&&(u[y].config.isRemoving=!0),a)Ha[d]||(Ha[d]=[]),a[d]&&(Ha[d].push(a[d].hide()),
a[d]=void 0)},Za=na.ddsi||0,Ja=na.ddei||B,Na=p._oldStartIndex,Oa=p._oldEndIndex,vb=p._oldStep,pb=z.removeDataArr,wb=pb&&pb.length;ma.line=ma.line||C.group("line",ma);ma.lineConnector=ma.lineConnector||C.group("line-connector",ma);Y||(Y=g.graphics.container={lineShadowGroup:C.group("connector-shadow",ma.line),anchorShadowGroup:C.group("anchor-shadow",ma.lineConnector),lineGroup:C.group("line",ma.line),anchorGroup:C.group("anchors",ma.lineConnector)},Y.lineGroup.trackTooltip(!0),Va||(Y.lineShadowGroup.hide(),
Y.anchorShadowGroup.hide(),Y.lineGroup.hide(),Y.anchorGroup.hide()));ea||(ea=g.graphics.trackerContainer=C.group("line-hot",N.trackerGroup).toBack(),Va||ea.hide());u||(u=g.components.data=[]);sa||(sa=g.graphics.dataLabelContainer=g.graphics.dataLabelContainer||C.group("datalabel",P),Va||sa.hide());Sa=Fa*B;fb&&!p._oldHideAnchors?Ya(Na,Oa):Ia!==vb?Ya(Na,Oa):(Za>Na&&Ya(Na,Za>Oa?Oa:Za),Ja<Oa&&Ya(Ja<Na?Na:Ja,Oa),(Za<Na||Ja>Oa)&&Ya(Na,Oa));p._oldHideAnchors=fb;p._oldEndIndex=Ja;p._oldStep=Ia;g.setVisibility(Va);
for(y=p._oldStartIndex=Za;y<=Ja;y+=Ia){W=u[y]||{};la=W.config||{};la.isRemoving=!1;M=la.setValue||null;Wa=y;if(rb)if(0===y&&null===M){lb=0;for(Ca=c=y;Ca<B;)if(null!==u[Ca].config.setValue||d?d=!0:Ca++,null===u[c].config.setValue&&!h&&c<=B?(c+=Ia,lb++):h=!0,d&&h){d=h=!1;break}0!==Ca%Ia&&(la=u[Ca].config,Wa=Ca)}else if(y>=B&&null===M){for(Ca=c=y;0<Ca&&(void 0!==u[Ca]||d?d=!0:Ca--,void 0===u[c]&&!h&&0<=c?c-=Ia:h=!0,!d||!h););0!==Ca%Ia&&(la=u[Ca].config,Wa=Ca)}if(W=u[Wa])ob(W,Wa),sb&&1<Ia&&(Xa=qa(y+1,
Ja),eb=qa(Xa+Ia,Ja),db=eb===Ja?u.slice(Xa):u.slice(Xa,eb),db.length&&ub(db,Xa))}bb=g.getLinePath(cb,{});ib=g.getLinePath(cb,ib);p.lastPath=bb;Pa||(Pa=Ha.lineElement&&Ha.lineElement.length?g.graphics.lineElement=Ha.lineElement.shift():g.graphics.lineElement=C.path(Y.lineGroup));tb||Pa.tooltipListenerAttached||(Pa.tooltipListenerAttached=!0,Pa.mousemove(function(a){Qa=r.viewPortConfig;var c=r._visx,b=Qa.step,d=Qa.ppp*b,c=ka(l.linkedItems.container,a,l).chartX-c,e;a=r.tooltipSepChar;c=(c+=d/2+Qa.offset)-
c%d;e=(e=l.getValuePixel(c))+e%b;b=A.getLabel(e).label+a+g.components.data[e].config.formatedVal;b=p.seriesname&&p.seriesname+a+b||b;Pa.tooltip(0===r.crossline.enabled?b:!1)}));Pa.attr({path:bb.getPathArr(),"stroke-dasharray":La,"stroke-width":O,stroke:v(Ma),"stroke-linecap":"round","stroke-linejoin":2<=O?"round":"miter"}).shadow(ra,Y.lineShadowGroup);da&&(Ga=qb.startPercent,aa[2]=Sa+Ta[0],1===Ga&&(Ta[0]=aa[2],aa[0]=0));aa[3]+=za;g.drawn=!0;wb&&g.remove()},setVisibility:function(a,c){var b=this.graphics,
h=b&&b.container,g=b&&b.trackerContainer,b=b&&b.dataLabelContainer,f=a?"show":"hide";h.lineGroup[f]();h.anchorGroup[f]();h.anchorShadowGroup[f]();h.lineShadowGroup[f]();g[f]();b[f]();c&&this.transposeLimits(a)},transposeLimits:function(a){var c=this.chart,b=c.config,h=this.yAxis;c._chartAnimation();this.visible=a;this._conatinerHidden=!a;c._setAxisLimits();h.draw();b.legendClicked=!0;c._drawDataset();delete b.legendClicked},hide:function(){this.setVisibility(!1,!0)},show:function(){this.setVisibility(!0,
!0)}},"Line"]);r=function(){};r.prototype.configure=function(a,c){var b,h,g,f={},k=this,p=a.components,q=p.numberFormatter,r=p.paper,t=a.config;b=a.graphics;h=this.left=t._visx;g=this.top=t.canvasTop;var v=this.height=t.canvasHeight,y=this._visout=t._visout,u=this.plots=a.components.dataset,B=b.datalabelsGroup,z,C,A=c.labelstyle,E=c.valuestyle,G=p.yAxis[0],K=G.getLimit(),L=p.yAxis[1],N=L&&L.getLimit();C=this.tracker;var p=this.labels,P=this.positionLabel;z=a.get("linkedItems");var Q=z.container,R=
z.eventListeners||(z.eventListeners=[]);k.width=t._visw;z=this.group;z||(z=this.group=r.group("crossline-labels",B),this.container=Q);z.attr({transform:["T",h,t._ymin]}).css(E);C||(C=k.tracker=Q,R.push(l(Q,"touchstart mousemove",function(c){var b=k.onMouseMove,d=k.onMouseOut;a.isWithinCanvas(c,a).insideCanvas?b.call(k,c):d.call(k,c)},k)),R.push(l(Q,"mousedown",function(){k.onMouseDown()},k)),R.push(l(Q,"mouseup",function(){k.onMouseUp()},k)),R.push(l(Q,"mouseout",function(){k.onMouseOut()},k)));C=
this.line;C||(C=this.line=r.path(B).toBack());C.attr(x({path:["M",h,g,"l",0,v]},c.line));p||(p=this.labels=c.valueEnabled&&r.set());c.labelEnabled?(f.x=y,f.y=g+v+(t.scrollHeight||0)+2.5,f["vertical-align"]="top",f.direction=t.textDirection,f.text="",P?(P.attr(f),P.css(A)):P=this.positionLabel=r.text(f,A,b.datalabelsGroup).insertBefore(b.datasetGroup)):(P&&P.remove(),delete this.positionLabel);this.hide();this.ppixelRatio=-G.getPVR();this.spixelRatio=L&&-L.getPVR();this.yminValue=t._yminValue;this.pyaxisminvalue=
K.min;this.pyaxismaxvalue=K.max;this.syaxisminvalue=N&&N.min;this.syaxismaxvalue=N&&N.max;this.positionLabels=t.xlabels||{data:[],parsed:[]};this.chart=a;this.getZoomInfo=function(){return t.viewPortConfig};this.getDataIndexFromPixel=function(c){return Math.round(a.components.xAxis[0].getValue(c))};this.getPositionLabel=function(c){return(c=a.components.xAxis[0].getLabel(c))&&c.label||""};if(c.valueEnabled){b=0;for(h=u.length;b<h;b+=1)g=u[b],g=m(g.config.linecolor),f.x=0,f.y=y,f.fill=g,f.direction=
t.textDirection,f.text="",f["text-bound"]=E["text-bound"],f.lineHeight=E.lineHeight,p[b]?p[b].attr(f):p[b]=p.items[b]=r.text(f,void 0,z);for(;b<p.items.length;b+=1)p[b].remove(),delete p[b],p.items.splice(b,1);this.numberFormatter=q}else if(p.items&&p.items.length){for(b=0;b<p.items.length;b+=1)p[b].remove(),delete p[b];p.length=0}};r.prototype.disable=function(a){void 0!==a&&(this.disabled=!!a)&&this.visible&&this.hide();return this.disabled};r.prototype.onMouseOut=function(){this.hide();this.position=
void 0};r.prototype.onMouseDown=function(){!z&&this.hide();this._mouseIsDown=!0};r.prototype.onMouseUp=function(){!z&&this.hide();delete this._mouseIsDown};r.prototype.onMouseMove=function(a){if(!(this.disabled||this._mouseIsDown&&!z)){var c,b=this.getZoomInfo(),h=this.line,g=this.left,b=b.step,f=this.chart,k=f.components.xAxis[0],l=f.get("config"),m=l.canvasLeft,p=k.getAxisConfig("axisDimention");a=ka(this.container,a,f).chartX-g;var g=k._getVisibleConfig(),p=p.x-m,q;q=(q=this.getDataIndexFromPixel(P(a)))+
((c=q%b)>b/2?b-c:-c);a=k.getPixel(q)-p-m;h.transform(["T",P(a),0]);this.hidden&&0!==l.crossline.enabled&&this.show();(q<g.minValue||q>g.maxValue)&&this.hide();if(q!==this.position||this.hidden)this.position=q,this.lineX=a,this.updateLabels()}};r.prototype.updateLabels=function(){var a=this,c=a.labels,b=a.plots,f=a.width,g=a.position,h=a.lineX,k=ua(h),l=a.ppixelRatio,m=a.spixelRatio,p=a.yminValue,q=a._visout,r=a.numberFormatter,t=a.pyaxisminvalue,u=a.pyaxismaxvalue,v=a.syaxisminvalue,y=a.syaxismaxvalue,
x=function(){function c(){this.y=0;this.lRef=void 0;this.__index=this.__shift=0}function b(a){for(var c=0;c<a;)this.push(c++);return this}function d(a){var c,b,e,g={},f=Number.POSITIVE_INFINITY;for(c=0;c<this.length;c++)b=this[c]-a,0>b?e=v.NEG:e=v.POS,b=t(b),b<=f&&(f=b,g.absValue=b,g.noScaleSide=e);return g}function g(a){this.holes=b.call([],a)}var f=-1*a.height,h=p*l,k=0,n,m={},r,t=Math.abs,u=Math.floor,v={};"function"!=typeof Object.create&&(Object.create=function(){function a(){}var c=Object.prototype.hasOwnProperty;
return function(b){var d,e,g;if("object"!=typeof b)throw new TypeError("Object prototype may only be an Object or null");a.prototype=b;g=new a;a.prototype=null;if(1<arguments.length)for(e in d=Object(arguments[1]),d)c.call(d,e)&&(g[e]=d[e]);return g}}());Array.prototype.indexOf||(Array.prototype.indexOf=function(a,c){var b,d,e;if(null==this)throw new TypeError('"this" is null or not defined');d=Object(this);e=d.length>>>0;if(0===e)return-1;b=+c||0;Infinity===Math.abs(b)&&(b=0);if(b>=e)return-1;for(b=
Math.max(0<=b?b:e-Math.abs(b),0);b<e;){if(b in d&&d[b]===a)return b;b++}return-1});Array.prototype.forEach||(Array.prototype.forEach=function(a,c){var b,d,e,g,f;if(null==this)throw new TypeError(" this is null or not defined");e=Object(this);g=e.length>>>0;if("function"!==typeof a)throw new TypeError(a+" is not a function");1<arguments.length&&(b=c);for(d=0;d<g;)d in e&&(f=e[d],a.call(b,f,d,e)),d++});c.prototype.constructor=c;c.prototype.applyShift=function(a){this.__shift=a;this.lRef.calcY=this.y+=
a*k};c.prototype.applyDirectIndex=function(a){this.__index=a;this.lRef.calcY=this.y=f-a*k*-1};try{Object.defineProperty(v,"POS",{enumerable:!1,configurable:!1,get:function(){return 1}}),Object.defineProperty(v,"NEG",{enumerable:!1,configurable:!1,get:function(){return-1}})}catch(x){v.POS=1,v.NEG=-1}g.prototype=Object.create(Array.prototype);g.prototype.constructor=g;g.prototype.repositionHoles=function(){var a,c=0,b;for(a=this.holes.length=0;a<this.length;a++)b=this[a],!b&&(this.holes[c++]=a)};g.prototype.attachShift=
function(a,b,e){var g,f=this.length;if(a===q)e.calcY=q;else if(f=b>f-1?f-1:b,g=this[f],b=new c,b.y=a,b.lRef=e,g){a=d.call(this.holes,f);e=f+a.absValue*a.noScaleSide;if(a.noScaleSide===v.POS)return b.applyDirectIndex(e),this.splice(e,1,b),this.holes.splice(this.holes.indexOf(e),1),e;if(a.noScaleSide===v.NEG){a=this.splice(e+1,this.length-1);this.pop();a.forEach(function(a){a&&a.applyShift(-1)});for([].push.apply(this,a);this[e];)e++;this.push(0);this.repositionHoles();a=d.call(this.holes,e);e+=a.absValue*
a.noScaleSide;b.applyDirectIndex(e);this.splice(e,1,b);this.repositionHoles();return this.length-1}}else b.applyDirectIndex(f),this.splice(f,1,b),this.holes.splice(this.holes.indexOf(f),1)};try{Object.defineProperty(m,"top",{enumerable:!1,configurable:!1,get:function(){return f}}),Object.defineProperty(m,"bottom",{enumerable:!1,configurable:!1,get:function(){return h}})}catch(x){m.top=f,m.bottom=h}m.init=function(a,c){var b;k=a+2;f+=k/2;r=u(t(f)/k);n=new g(r);for(b=0;b<r;b++)n.push(0)};m.occupy=function(a,
c){var b=u(t(f-a)/k);n&&n.attachShift(a,b,c)};return m}();c&&(c[0]&&c[0].attr({text:r.yAxis("0")}),c[0]&&x.init(c[0].getBBox().height,c.length),c.forEach(function(a,c){var e=b[c],f=e.components.data[g]&&e.components.data[g].config.setValue,h=e.config.parentYAxis;x.occupy(void 0===f||!e.visible||(h?f>y||f<v:f>u||f<t)?q:h?(f-v)*m:(f-t)*l,a)}));c&&c.forEach(function(a,c){var e=b[c],l,m;(e=r[e.config.parentYAxis?"sYAxis":"yAxis"](e.components.data[g]&&e.components.data[g].config.setValue))?(a.attr({text:e}),
e=(e=(e=(e=a.getBBox())&&e.width)&&.5*e)&&e+10,m=a.calcY,l=fa(0,qa(k,f)),void 0!==m&&void 0!==l&&a.attr({x:l,y:m,"text-anchor":h<=e&&"start"||h+e>=f&&"end"||"middle","text-bound":["rgba(255,255,255,0.8)","rgba(0,0,0,0.2)",1,2.5]})):a.attr({x:-f})});a.positionLabel&&a.positionLabel.attr({x:h+a.left,text:a.getPositionLabel(g),"text-bound":["rgba(255,255,255,1)","rgba(0,0,0,1)",1,2.5]})};r.prototype.show=function(){this.disabled||(this.hidden=!1,this.group.attr("visibility","visible"),this.line.attr("visibility",
"visible"),this.positionLabel&&this.positionLabel.attr("visibility","visible"))};r.prototype.hide=function(){this.hidden=!0;this.group.attr("visibility","hidden");this.line.attr("visibility","hidden");this.positionLabel&&this.positionLabel.attr("visibility","hidden")};r.prototype.dispose=function(){for(var a in this)this.hasOwnProperty(a)&&delete this[a]};E.addSymbol({pinModeIcon:function(a,c,b){var f=.5*b,g=a-b,h=a+b,k=a-f,l=a+f,m=a+.5,p=m+1,q=m+1.5,r=c-b,t=c+f,u=c-f,f=c+(b-f);return["M",g,r,"L",
k,u,k,f,g,t,a-.5,t,a,c+b+.5,m,t,h,t,l,f,l,u,h,r,q,r,q,u,q,f,p,f,p,u,q,u,q,r,"Z"]},zoomOutIcon:function(a,c,b){a-=.2*b;c-=.2*b;var f=.8*b,g=E.rad(43),h=E.rad(48),k=a+f*wa(g),g=c+f*ta(g),l=a+f*wa(h),h=c+f*ta(h),m=E.rad(45),p=k+b*wa(m),q=g+b*ta(m),r=l+b*wa(m);b=h+b*ta(m);return["M",k,g,"A",f,f,0,1,0,l,h,"Z","M",k+1,g+1,"L",p,q,r,b,l+1,h+1,"Z","M",a-2,c,"L",a+2,c,"Z"]},resetIcon:function(a,b,d){var f=a-d,g=(ba.PI/2+ba.PI)/2;a+=d*wa(g);var g=b+d*ta(g),h=2*d/3;return["M",f,b,"A",d,d,0,1,1,a,g,"L",a+h,g-
1,a+2,g+h-.5,a,g]}})}])});

//# sourceMappingURL=http://localhost:3052/3.12.2/map/eval/fusioncharts.charts.js.map


/***/ }),

/***/ "../../../../fusioncharts/fusioncharts.js":
/***/ (function(module, exports, __webpack_require__) {

/*
 FusionCharts JavaScript Library
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.12.2
 FusionCharts JavaScript Library
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.12.2
 FusionCharts JavaScript Library
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>
 FusionCharts JavaScript Library - KDtree
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.12.2
*/
(function(Ab,Rb){"object"===typeof module&&module.exports?module.exports=Ab.document?Rb(Ab):function(Q){if(!Q.document)throw Error("Window with document not present");return Rb(Q,!0)}:Ab.FusionCharts=Rb(Ab,!0)})("undefined"!==typeof window?window:this,function(Ab,Rb){"undefined"===typeof Ab&&"object"===typeof window&&(Ab=window);var Q=function(b){if(b.FusionCharts&&b.FusionCharts.version)return b.FusionCharts;var v=b.document,J=b.navigator,C={window:b},H=C.modules={},A=C.interpreters={},u=Object.prototype.toString,
a=/msie/i.test(J.userAgent)&&!b.opera,O=/loaded|complete/,q=!1,M=function(){var a=C.ready;C.ready=!0;C.raiseEvent&&(C.readyNotified=!0,C.raiseEvent("ready",{version:C.core.version,now:!a},C.core));C.readyNow=!a},U=function(a,b){var r,k;if(b instanceof Array)for(r=0;r<b.length;r+=1)"object"!==typeof b[r]?a[r]=b[r]:("object"!==typeof a[r]&&(a[r]=b[r]instanceof Array?[]:{}),U(a[r],b[r]));else for(r in b)"object"===typeof b[r]?(k=u.call(b[r]),"[object Object]"===k?("object"!==typeof a[r]&&(a[r]={}),U(a[r],
b[r])):"[object Array]"===k?(a[r]instanceof Array||(a[r]=[]),U(a[r],b[r])):a[r]=b[r]):a[r]=b[r];return a};C.extend=function(a,b,r,k){var m;r&&a.prototype&&(a=a.prototype);if(!0===k)U(a,b);else for(m in b)a[m]=b[m];return a};C.uniqueId=function(){return"chartobject-"+(C.uniqueId.lastId+=1)};C.uniqueId.lastId=0;C.policies={options:{chartTypeSourcePath:["typeSourcePath",""],product:["product","v3"],insertMode:["insertMode","replace"],safeMode:["safeMode",!0],overlayButton:["overlayButton",void 0],containerBackgroundColor:["containerBackgroundColor",
"#ffffff"],containerBackgroundOpacity:["containerBackgroundOpacity",1],containerClassName:["containerClassName","fusioncharts-container"],chartType:["type",void 0],baseChartMessageFont:["baseChartMessageFont","Verdana,sans"],baseChartMessageFontSize:["baseChartMessageFontSize","10"],baseChartMessageColor:["baseChartMessageColor","#666666"],baseChartMessageImageHAlign:["baseChartMessageImageHAlign","middle"],baseChartMessageImageVAlign:["baseChartMessageImageVAlign","middle"],baseChartMessageImageAlpha:["baseChartMessageImageAlpha",
100],baseChartMessageImageScale:["baseChartMessageImageScale",100],dataLoadStartMessage:["dataLoadStartMessage","Retrieving data. Please wait."],dataLoadErrorMessage:["dataLoadErrorMessage","Error in loading data."],dataInvalidMessage:["dataInvalidMessage","Invalid data."],dataEmptyMessage:["dataEmptyMessage","No data to display."],typeNotSupportedMessage:["typeNotSupportedMessage","Chart type not supported."],browserNotSupportedMessage:["browserNotSupportedMessage","This browser is not supported."],
loadMessage:["loadMessage","Loading chart. Please wait."],renderErrorMessage:["renderErrorMessage","Unable to render chart."]},attributes:{lang:["lang","EN"],id:["id",void 0]},width:["width","400"],height:["height","300"],src:["swfUrl",""]};A.stat="swfUrl id width height debugMode registerWithJS backgroundColor scaleMode lang detectFlashVersion autoInstallRedirect".split(" ");C.parsePolicies=function(a,b,r){var k,m,n;for(m in b)if(C.policies[m]instanceof Array)n=r[b[m][0]],a[m]=void 0===n?b[m][1]:
n;else for(k in"object"!==typeof a[m]&&(a[m]={}),b[m])n=r[b[m][k][0]],a[m][k]=void 0===n?b[m][k][1]:n};C.parseCommands=function(a,b,r){var k,m;"string"===typeof b&&(b=A[b]||[]);k=0;for(m=b.length;k<m;k++)a[b[k]]=r[k];return a};C.registrars={module:function(){return C.core.apply(C.core,arguments)}};C.core=function(a){if(!(this instanceof C.core)){if(1===arguments.length&&a instanceof Array&&"private"===a[0]){if(H[a[1]])return;H[a[1]]={};a[3]instanceof Array&&(C.core.version[a[1]]=a[3]);return"function"===
typeof a[2]?a[2].call(C,H[a[1]]):C}if(1===arguments.length&&"string"===typeof a)return C.core.items[a];C.raiseError&&C.raiseError(this,"25081840","run","",new SyntaxError('Use the "new" keyword while creating a new FusionCharts object'))}var b={};this.__state={};1===arguments.length&&"object"===typeof arguments[0]?b=arguments[0]:C.parseCommands(b,A.stat,arguments);1<arguments.length&&"object"===typeof arguments[arguments.length-1]&&(delete b[A.stat[arguments.length-1]],C.extend(b,arguments[arguments.length-
1]));this.id="undefined"===typeof b.id?this.id=C.uniqueId():b.id;this.args=b;C.core.items[this.id]instanceof C.core&&C.raiseWarning(this,"06091847","param","",Error('A FusionCharts object with the specified id "'+this.id+'" already exists. Renaming it to '+(this.id=C.uniqueId())));C.parsePolicies(this,C.policies,b);this.attributes.id=this.id;this.resizeTo&&this.resizeTo(b.width,b.height,!0);this.chartType&&this.chartType(b.type||b.swfUrl,!0);C.raiseEvent("beforeInitialize",b,this);C.core.items[this.id]=
this;C.core.defaultOptions=C.core.options;C.raiseEvent("initialized",b,this);return this};C.core.prototype={};C.core.prototype.constructor=C.core;C.extend(C.core,{id:"FusionCharts",version:["3","12","2"],items:{},options:{},getObjectReference:function(a){return C.core.items[a].ref},register:function(a){return C.registrars[a=a&&a.toString&&a.toString().toLowerCase()]&&C.registrars[a].apply(C.core,Array.prototype.slice.call(arguments,1))},get:function(a){return C.registrars[a=a&&a.toString&&a.toString().toLowerCase()]&&
C.registrars[a].apply(C.core,Array.prototype.slice.call(arguments,1))}});b.FusionCharts=C.core;b.FusionMaps&&b.FusionMaps.legacy&&(C.core(["private","modules.core.geo",b.FusionMaps.legacy,b.FusionMaps.version]),q=!0);O.test(v.readyState)||v.loaded?(C.ready=!0,setTimeout(M,1)):function(){function N(){m||(m=!0,r&&clearTimeout(r),q||(b.FusionMaps&&b.FusionMaps.legacy&&C.core(["private","modules.core.geo",b.FusionMaps.legacy,b.FusionMaps.version]),b.FusionMaps=C.core),setTimeout(M,1))}function E(){O.test(v.readyState)?
N():r=setTimeout(E,10)}var r,k,m;v.addEventListener?v.addEventListener("DOMContentLoaded",N,!1):v.attachEvent&&b.attachEvent("onLoad",N);if(a)try{"https:"===b.location.protocol?v.write('<script id="__ie_onload_fusioncharts" defer="defer" src="//:">\x3c/script>'):v.write('<script id="__ie_onload_fusioncharts" defer="defer" src="javascript:void(0)">\x3c/script>'),k=v.getElementById("__ie_onload_fusioncharts"),k.onreadystatechange=function(){"complete"==this.readyState&&N()}}catch(n){}/WebKit/i.test(J.userAgent)&&
(r=setTimeout(E,10));b.onload=function(a){return function(){N();a&&a.call&&a.call(b)}}(b.onload)}();return b.FusionMaps=C.core}(Ab);Q.register("module",["private","modules.mantle.errormanager",function(){var b=this,v=b.window,J={type:"TypeException",range:"ValueRangeException",impl:"NotImplementedException",param:"ParameterException",run:"RuntimeException",comp:"DesignTimeError",undefined:"UnspecifiedException"},C=function(A,u,a,O,q,M){var C="#"+u+" "+(A?A.id:"unknown-source")+O+" "+M+" >> ";q instanceof
Error?(q.name=J[a],q.module="FusionCharts"+O,q.level=M,q.message=C+q.message,C=q.message,v.setTimeout(function(){throw q;},0)):C+=q;u={id:u,nature:J[a],source:"FusionCharts"+O,message:C};b.raiseEvent(M,u,A);if("function"===typeof v["FC_"+M])v["FC_"+M](u)},H;b.raiseError=function(b,u,a,O,q){C(b,u,a,O,q,"Error")};b.raiseWarning=function(b,u,a,O,q){C(b,u,a,O,q,"Warning")};H={outputHelpers:{text:function(b,u){H.outputTo("#"+b.eventId+" ["+(b.sender.id||b.sender).toString()+'] fired "'+b.eventType+'" event. '+
("error"===b.eventType||"warning"===b.eventType?u.message:""))},event:function(b,u){this.outputTo(b,u)},verbose:function(b,u){H.outputTo(b.eventId,b.sender.id,b.eventType,u)}},outputHandler:function(A,u){"function"!==typeof H.outputTo?b.core["debugger"].outputFailed=!0:(b.core["debugger"].outputFailed=!1,H.currentOutputHelper(A,u))},currentOutputHelper:void 0,outputTo:void 0,enabled:!1};H.currentOutputHelper=H.outputHelpers.text;b.extend(b.core,{"debugger":{syncStateWithCharts:!0,outputFormat:function(b){return b&&
"function"===typeof b.toLowerCase&&"function"===typeof H.outputHelpers[b=b.toLowerCase()]?(H.currentOutputHelper=H.outputHelpers[b],!0):!1},outputTo:function(v){"function"===typeof v?H.outputTo=v:null===v&&(b.core["debugger"].enable(!1),delete H.outputTo)},enable:function(v,u,a){var O;"object"===typeof v&&1===arguments.length&&(O=v,v=O.state,u=O.outputTo,a=O.outputFormat);"function"===typeof v&&("string"!==typeof u||2!==arguments.length&&!O||(a=u),u=v,v=!0);if("boolean"===typeof v&&v!==H.enabled)b.core[(H.enabled=
v)?"addEventListener":"removeEventListener"]("*",H.outputHandler);"function"===typeof u&&(H.outputTo=u);b.core["debugger"].outputFormat(a);return H.enabled},enableFirebugLite:function(){var A;v.console&&v.console.firebug?b.core["debugger"].enable(v.console.log,"verbose"):((A=v.document.getElementsByTagName("html"))&&A[0].setAttribute("debug","true"),b.loadScript("https://getfirebug.com/firebug-lite.js#overrideConsole=false,startOpened=true",function(){b.core["debugger"].enable(v.console.log,"verbose")},
"{ startOpened: true }",!0,!0))}},debugMode:{enabled:function(){v.setTimeout(function(){throw Error("Deprecated! Please use FusionCharts.debugger.enable instead.");},0);return b.core["debugger"].enable.apply(b.core["debugger"],arguments)}}},!1)}]);Q.register("module",["private","modules.renderer.js-schedular",function(){var b=this.core,v=[],J={},C=[],H={},A=0,u=this.window,a=b.schedular={},O=u.requestAnimationFrame||u.webkitRequestAnimationFrame||u.mozRequestAnimationFrame||u.oRequestAnimationFrame||
u.msRequestAnimationFrame||function(a){setTimeout(a,16)},q=function(){var a=(new Date).getTime(),b,N,E;do{a:{b=E;E=N;for(var r=void 0,k=!1,m=void 0,n=void 0;!k;)if(r=v[0]){m=r.fullFrameJob;if(b&&E&&m){b=!1;break a}v.splice(0,1);--C[r.priority];H[r.jobID]&&!r.executed&&(n=k=!0,!b&&0<v.length&&O(q),r.job(),r.executed=!0,delete H[r.jobID])}else k=!0;b={jobFound:n,fullFrameJob:m}}E=!0;N=N||b.fullFrameJob}while(b.jobFound&&15>(new Date).getTime()-a)};a.addJob=function(a,b,N,E){var r,k=0;E=E?b-1:b;"function"===
typeof a&&(r="JOB"+ ++A+(b||1),a={job:a,priority:b,fullFrameJob:N,jobID:r});for(N=0;N<=E;N++)k+=C[N]||0;v.splice(k,0,a);H[r]=a;C[b]=(C[b]||0)+1;1===v.length&&O(q);return r};a.removeJob=function(a){H[a]&&delete H[a]};a.pauseExecution=function(a){if(H[a])J[H[a]]=H[a],delete H[a];else return!1};a.resumeExecution=function(b){var q=J[b];if(q)a.addJob(q),delete J[b];else return!1};b.priorityList={render:1,animation:2,entitydraw:2,label:3,tracker:4,kdTree:4,postRender:5,chartClick:2,chartEvents:1}}]);Q.register("module",
["private","modules.mantle.eventmanager",function(){var b=this,v=b.window,J=b.core,C=J.priorityList,H=J.schedular,A=Object.prototype.toString,u=A.call([]),a=function(a,b,k,m){try{a[0].call(b,k,m||{})}catch(n){setTimeout(function(){throw n;},0)}},O=function(q,r,k){if(q instanceof Array)for(var m=0,n;m<q.length;m+=1){if(q[m][1]===r.sender||void 0===q[m][1])n=q[m][1]===r.sender?r.sender:b.core,a(q[m],n,r,k),!0===r.detached&&(q.splice(m,1),--m,r.detached=!1);if(!0===r.cancelled)break}},q={unpropagator:function(){return!1===
(this.cancelled=!0)},detacher:function(){return!1===(this.detached=!0)},undefaulter:function(){return!1===(this.prevented=!0)},listeners:{},lastEventId:0,addListener:function(a,r,k){var m,n;if(A.call(a)===u){m=[];for(n=0;n<a.length;n+=1)m.push(q.addListener(a[n],r,k));return m}if("string"!==typeof a)b.raiseError(k||b.core,"03091549","param","::EventTarget.addListener",Error("Unspecified Event Type"));else if("function"!==typeof r)b.raiseError(k||b.core,"03091550","param","::EventTarget.addListener",
Error("Invalid Event Listener"));else return a=a.toLowerCase(),q.listeners[a]instanceof Array||(q.listeners[a]=[]),q.listeners[a].push([r,k]),r},removeListener:function(a,r,k){var m;if("function"!==typeof r)b.raiseError(k||b.core,"03091560","param","::EventTarget.removeListener",Error("Invalid Event Listener"));else if(a instanceof Array)for(m=0;m<a.length;m+=1)q.removeListener(a[m],r,k);else if("string"!==typeof a)b.raiseError(k||b.core,"03091559","param","::EventTarget.removeListener",Error("Unspecified Event Type"));
else if(a=a.toLowerCase(),a=q.listeners[a],a instanceof Array)for(m=0;m<a.length;m+=1)a[m][0]===r&&a[m][1]===k&&(a.splice(m,1),--m)},triggerEvent:function(a,r,k,m,n,L){if("string"!==typeof a)b.raiseError(r,"03091602","param","::EventTarget.dispatchEvent",Error("Invalid Event Type"));else{a=a.toLowerCase();var g={eventType:a,eventId:q.lastEventId+=1,sender:r||Error("Orphan Event"),cancelled:!1,stopPropagation:this.unpropagator,prevented:!1,preventDefault:this.undefaulter,detached:!1,detachHandler:this.detacher};
O(q.listeners[a],g,k);O(q.listeners["*"],g,k);switch(g.prevented){case !0:if("function"===typeof L)try{L.call(m||r||v,g,k||{})}catch(l){setTimeout(function(){throw l;},0)}break;default:if("function"===typeof n)try{n.call(m||r||v,g,k||{})}catch(l){setTimeout(function(){throw l;},0)}}return!0}}},M=b.raiseEvent=function(a,b,k,m,n,L){return q.triggerEvent(a,k,b,m,n,L)},U=b.legacyEventList={},N={};b.disposeEvents=function(a){var b,k;for(b in q.listeners)for(k=0;k<q.listeners[b].length;k+=1)q.listeners[b][k][1]===
a&&q.listeners[b].splice(k,1)};b.raiseEventWithLegacy=function(a,b,k,m,n,L,g){var l=U[a];M(a,b,k,n,L,g);l&&"function"===typeof v[l]&&H.addJob(function(){v[l].apply(n||v,m)},C.chartEvents)};b.raiseEventGroup=function(a,b,k,m,n,L,g){var l=m.id,B=a+l;N[B]?(clearTimeout(N[B]),delete N[B]):l&&B?N[B]=H.addJob(function(){M(b,k,m,n,L,g);delete N[B]},C.chartEvents):M(b,k,m,n,L,g)};b.addEventListener=function(a,b){return q.addListener(a,b)};b.removeEventListener=function(a,b){return q.removeListener(a,b)};
b.extend(J,{addEventListener:function(a,b){return q.addListener(a,b)},removeEventListener:function(a,b){return q.removeListener(a,b)},ready:function(a,r,k){b.ready?(J.ready=function(a,n){"function"===typeof a&&setTimeout(function(){a.call(n||J,r||J)},0)},J.ready(a,k)):"function"===typeof a&&J.addEventListener("ready",function(){J.ready(a,r,k)});return this}});J.on=J.addEventListener;b.extend(J.prototype,{addEventListener:function(a,b){return q.addListener(a,b,this)},removeEventListener:function(a,
b){return q.removeListener(a,b,this)}});J.prototype.on=J.prototype.addEventListener;b.policies.options.events=["events",{}];b.addEventListener("beforeInitialize",function(a){a=a.sender;var b=a.options.events,k;if(b)for(k in b)"function"===typeof b[k]&&a.addEventListener(k,b[k])});b.ready&&!b.readyNotified&&(b.readyNotified=!0,b.raiseEvent("ready",{version:b.core.version,now:b.readyNow},b.core))}]);Q.register("module",["private","modules.mantle.ajax",function(){var b=this,v=b.window,J=parseFloat(v.navigator.appVersion.split("MSIE")[1]),
C=5.5<=J&&7>=J?!0:!1,H=/mozilla/i.test(v.navigator.userAgent),A="file:"===v.location.protocol,u=v.ActiveXObject,a=(!u||!A)&&v.XMLHttpRequest,O={objects:0,xhr:0,requests:0,success:0,failure:0,idle:0},q=function(){var b;if(a)return q=function(){O.xhr++;return new a},q();try{b=new u("Msxml2.XMLHTTP"),q=function(){O.xhr++;return new u("Msxml2.XMLHTTP")}}catch(v){try{b=new u("Microsoft.XMLHTTP"),q=function(){O.xhr++;return new u("Microsoft.XMLHTTP")}}catch(N){b=!1}}return b};b.core.ajax={stats:function(a){return a?
O[a]:b.extend({},O)},headers:{"If-Modified-Since":"Sat, 29 Oct 1994 19:43:31 GMT","X-Requested-With":"XMLHttpRequest","X-Requested-By":"FusionCharts",Accept:"text/plain, */*","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}};J=b.ajax=function(a,b){this.onSuccess=a;this.onError=b;this.open=!1;O.objects++;O.idle++};b.extend(J.prototype,{headers:b.core.ajax.headers,transact:function(a,u,N,E){var r=this,k=r.xmlhttp,m=r.headers,n=r.onError,L=r.onSuccess;a="POST"===a;var g,l=Object.prototype.hasOwnProperty,
B;-1!==u.search(/^(http:\/\/|https:\/\/)/)&&v.location.hostname!==/(http:\/\/|https:\/\/)([^\/\:]*)/.exec(u)[2]?delete m["X-Requested-By"]:!l.call(m,"X-Requested-By")&&(m["X-Requested-By"]="FusionCharts");if(!k||C||H)k=q(),r.xmlhttp=k;k.onreadystatechange=function(){try{4===k.readyState&&(!k.status&&A||200<=k.status&&300>k.status||304===k.status||1223===k.status||0===k.status?(L&&L(k.responseText,r,E,u),O.success++):n&&(n(Error("XmlHttprequest Error"),r,E,u),O.failure++),O.idle--,r.open=!1)}catch(a){n&&
n(a,r,E,u),v.FC_DEV_ENVIRONMENT&&setTimeout(function(){throw a;},0),O.failure++}};try{k.open(a?"POST":"GET",u,!0);k.overrideMimeType&&k.overrideMimeType("text/plain");if(a)if("string"===typeof N)g=N;else{g=[];for(B in N)g.push(B+"="+(N[B]+"").replace(/\=/g,"%3D").replace(/\&/g,"%26"));g=g.join("&")}else g=null;for(B in m)k.setRequestHeader(B,m[B]);k.send(g);O.requests++;O.idle++;r.open=!0}catch(e){b.raiseError(b.core,"1110111515A","run","XmlHttprequest Error",e.message)}return k},get:function(a,b){return this.transact("GET",
a,void 0,b)},post:function(a,b,q){return this.transact("POST",a,b,q)},abort:function(){var a=this.xmlhttp;this.open=!1;return a&&"function"===typeof a.abort&&a.readyState&&0!==a.readyState&&a.abort()},dispose:function(){this.open&&this.abort();delete this.onError;delete this.onSuccess;delete this.xmlhttp;delete this.open;O.objects--;return null}})}]);Q.register("module",["private","modules.mantle.runtime;1.1",function(){var b=this,v=b.window,J=/(^|[\/\\])(fusioncharts\.js)([\?#].*)?$/ig,C=/[\\\"<>;&]/,
H=/^[^\S]*?(sf|f|ht)(tp|tps):\/\//i,A={},u={},a={},O={},q=b.purgeDOM=function(a){var b=a.attributes,r,k;if(b)for(r=b.length-1;0<=r;--r)k=b[r].name,"function"===typeof a[k]&&(a[k]=null);if(b=a.childNodes)for(b=b.length,r=0;r<b;r+=1)q(a.childNodes[r])},M=function(a,b,r){var k,m;for(k in a)if(a[k]instanceof Array)b[a[k][0]]=r[k];else for(m in a[k])b[a[k][m][0]]=r[k][m]},U=/^(FusionCharts|FusionWidgets|FusionMaps)/;b.getScriptBaseUri=function(a){var b=v.document.getElementsByTagName("script"),r=b.length,
k,m;for(m=0;m<r;m+=1)if(k=b[m].getAttribute("src"),void 0!==k&&null!==k&&null!==k.match(a))return k.replace(a,"$1")};b.core.options.scriptBaseUri=function(){var a=b.getScriptBaseUri(J);return void 0===a?(b.raiseError(Q,"1603111624","run",">GenericRuntime~scriptBaseUri","Unable to locate FusionCharts script source location (URL)."),""):a}();b.isXSSSafe=function(a,b){return b&&null!==H.exec(a)?!1:null===C.exec(a)};b.xssEncode=function(a){return null===a||void 0===a||"function"!==typeof a.toString?"":
a=a.toString().replace(/&/g,"&amp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};b.loadScript=function(q,E,r,k,m){if(!q)return!1;var n=E&&E.success||E,L=E&&E.failure,g,l=b.hcLib,B=l.priorityList,e=l.schedular.addJob,V={type:"script",success:!1},p=function(){O[g]=clearTimeout(O[g]);V.success?n&&n(q,g):L&&L(q,g);b.raiseEvent("externalresourceload",V,b.core)};m=m?"":b.core.options.scriptBaseUri;g=m+q;b.isXSSSafe(g,!1)||(g="function"===typeof v.encodeURIComponent?
v.encodeURIComponent(g):v.escape(g));V.path=m;V.src=g;V.file=q;if(!0===a[g]&&k)return V.success=!0,V.notReloaded=!0,"function"===typeof E&&(E(),b.raiseEvent("externalresourceload",V,b.core)),!0;if(A[g]&&k)return!1;A[g]=!0;u[g]&&u[g].parentNode&&u[g].parentNode.removeChild(u[g]);E=u[g]=v.document.createElement("script");E.type="text/javascript";E.src=g;r&&(E[ false?"text":"innerHTML"]=r);"function"===typeof n&&(a[g]=!1,O[g]=clearTimeout(O[g]),E.onload=function(){a[g]=!0;V.success=!0;e(p,B.render)},
E.onerror=function(){a[g]=!1;A[g]=!1;e(p,B.render)},E.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState)a[g]=!0,V.success=!0,e(p,B.render)});v.document.getElementsByTagName("head")[0].appendChild(E);"function"===typeof L&&(O[g]=setTimeout(function(){a[g]||p()},b.core.options.html5ResourceLoadTimeout||15E3));return!0};b.capitalizeString=function(a,b){return a?a.replace(b?/(^|\s)([a-z])/g:/(^|\s)([a-z])/,function(a,k,b){return k+b.toUpperCase()}):a};b.extend(b.core,
{clone:function(a,q){var r=typeof a,k,m=b.extend({},this.args,!1,!1);M(b.policies,m,this);M(b.renderer.getRendererPolicy(this.options.renderer),m,this);delete m.id;delete m.animate;delete m.stallLoad;k=m.link;m=b.extend({},m,!1,!1);m.link=k;switch(r){case "object":b.extend(m,a);break;case "boolean":q=a}return q?m:new b.core(m)},isActive:function(){if(!this.ref||v.document.getElementById(this.id)!==this.ref)return!1;try{return U.test(this.ref.signature())}catch(a){return!1}},chartType:function(a,q){var r=
this.src,k=!0===q,m=this.options,n;"string"===typeof a&&(q="object"===typeof q?q:{},r=a.replace(/[\?\#][\s\S]*$/g,""),n=null!==r.match(/\.swf\s*?$/ig),r=r.replace(/\.swf\s*?$/ig,""),m.chartType=r.replace(/^[\s\S]*\//ig,"").replace(/^fcmap_/i,""),m.chartTypeSourcePath=-1===r.indexOf("/")?q.chartTypeSourcePath||this.options.chartTypeSourcePath||b.core.options.chartTypeSourcePath||"":r.replace(/[^\/]*?$/ig,""),this.src=((b.core.options.scriptBaseUri||"")+(m.chartTypeSourcePath||b.core.options.chartTypeSourcePath||
"")).replace(/\/\s*$/g,"")+"/"+m.chartType.replace(/\.swf\s*?$/ig,"")+".swf",n&&(b.raiseWarning(this,"08101320181","comp","FusionCharts#chartType",'Chart type has ".swf" in alias and as such has been deprecated. Please use chart type alias.'),m.chartTypeSourcePath=b.core.options.chartTypeSourcePath||""),void 0!==q.dataSource&&null!==q.dataSource?this.setChartData(q.dataSource,q.dataFormat,q.dataConfiguration):this.isActive()&&!k&&this.render());return(m.chartType||"").toLowerCase()}},!0);v.getChartFromId=
function(a){b.raiseWarning(this,"11133001041","comp","GenericRuntime~getObjectFromId()",'Use of deprecated getChartFromId() or getMapFromId(). Replace with "FusionCharts()" or FusionCharts.items[].');return b.core.items[a]instanceof b.core?b.core.items[a].ref:v.swfobject&&v.swfobject.getObjectById(a)};v.getMapFromId=v.getChartFromId}]);Q.register("module",["private","api.printmanager",function(){var b=this;b.extend(b.core,{printManager:{configure:function(){b.raiseWarning(b.core,"28141714","impl",
".printManager.configure","PrintManager is deprecated")},isReady:function(){b.raiseWarning(b.core,"28141714","impl",".printManager.isReady","PrintManager is deprecated");return!1},enabled:function(){b.raiseWarning(b.core,"28141714","impl",".printManager.enabled","PrintManager is deprecated");return!1},managedPrint:function(){b.raiseWarning(b.core,"28141714","impl",".printManager.managedPrint","PrintManager is deprecated")}}},!1)}]);Q.register("module",["private","modules.interface.renderer",function(){var b=
this,v=b.window,J=v.document,C=v.navigator,H=!(!v.SVGAngle&&!J.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),A=/trident/i.test(C.userAgent)&&/rv:11/i.test(C.userAgent)&&!v.opera,u=/msie/i.test(C.userAgent)&&!v.opera||A,C=function(){b.raiseError(this,"25081845","run","::RendererManager",Error("No active renderer"))},a=b.FusionChartsDOMInsertModes={REPLACE:"replace",APPEND:"append",PREPEND:"prepend"},O={undefined:{render:C,remove:C,update:C,resize:C,config:C,
policies:{}}},q={},M=function(a){return function(){var k=this.ref;if(void 0===k||null===k||"function"!==typeof k[a])b.raiseError(this,"25081617","run","#"+a+"()","ExternalInterface call failed. Check whether chart has been rendered.");else return k[a].apply(k,arguments)}},U=function(a,k){return"function"===typeof a[k]?function(){return a[k].apply(a,arguments)}:a[k]},N=function(a,k){var g=J.getElementById(a),l=k.id||k.getAttribute("id"),B,e;if(null===g)return!1;if(a===l)return!0;l=k.getElementsByTagName("*");
B=0;for(e=l.length;B<e;B++)if(l[B]===g)return!1;return!0},E=/[^\%\d]*$/ig,r=function(){var a=function(k){var g=k.parentNode;if(!g||9===g.nodeType)return!1;var l="display";v.getComputedStyle?l=v.getComputedStyle(k)[l]:k.currentStyle&&(l=k.currentStyle[l]);return"none"===l?!0:g?a(g):!1};return a}(),k=function(){var a={},k,g=function(){var l=0,B=parseInt(b.core.options.visibilityTrackingInterval,10)||300,e,m,p,q,K;for(e in a)if(l+=1,m=a[e].chart,p=a[e].container,q=a[e].insertMode,K=a[e].callback,m.disposed||
!r(p))delete a[e],--l,!m.disposed&&m.renderChart.call(m,p,q,K);k=l?setTimeout(g,B):clearTimeout(k)};return function(l,B,e,m){a[l.id]={chart:l,container:B,insertMode:e,callback:m};k||(k=setTimeout(g,parseInt(b.core.options.visibilityTrackingInterval,10)||300))}}(),m;b.policies.options.containerElementId=["renderAt",void 0];b.policies.options.renderer=["renderer",void 0];b.policies.options.containerElementType=["containerElementType",void 0];b.policies.options.visibilityTrackingInterval=300;b.normalizeCSSDimension=
function(a,k,g){a=void 0===a?g.offsetWidth||parseFloat(g.style.width):a;k=void 0===k?g.offsetHeight||parseFloat(g.style.height):k;var l={},B=g.style,e;B.width=a=a.toString?a.toString():"0";B.height=k=k.toString?k.toString():"0";if((l.widthIsRelative=a.match(/^\s*\d*\.?\d*\%\s*$/)&&!a.match(/^\s*0\%\s*$/))&&0===g.offsetWidth)for(e=g;e=e.offsetParent;)if(0<e.offsetWidth){a=(e.offsetWidth*parseFloat(a.match(/\d*/)[0])/100).toString();break}if((l.heightIsRelative=k.match(/^\s*\d*\.?\d*\%\s*$/)&&!k.match(/^\s*0\%\s*$/))&&
20>=g.offsetHeight)for(e=g;e=e.offsetParent;)if(0<e.offsetHeight){k=(e.offsetHeight*parseFloat(k.match(/\d*/)[0])/100).toString();break}l.width=a.replace?a.replace(/^\s*(\d*\.?\d*)\s*$/ig,"$1px"):a;l.height=k.replace?k.replace(/^\s*(\d*\.?\d*)\s*$/ig,"$1px"):k;B.width=l.width;B.height=l.height;l.pixelWidth=l.widthIsRelative?g.offsetWidth:parseInt(l.width,10)||0;l.pixelHeight=l.heightIsRelative?g.offsetHeight:parseInt(l.height,10)||0;return l};m=b.renderer={register:function(a,k){if(!a||"function"!==
typeof a.toString)throw Error("#03091436 ~renderer.register() Invalid value for renderer name.");a=a.toString().toLowerCase();if(void 0!==O[a])return b.raiseError(b.core,"03091438","param","::RendererManager>register",'Duplicate renderer name specified in "name"'),!1;O[a]=k;return!0},userSetDefault:!1,setDefault:function(a){if(!a||"function"!==typeof a.toString)return b.raiseError(b.core,"25081731","param","::RendererManager>setDefault",'Invalid renderer name specified in "name"'),!1;if(void 0===
O[a=a.toString().toLowerCase()])return b.raiseError(b.core,"25081733","range","::RendererManager>setDefault","The specified renderer does not exist."),!1;this.userSetDefault=!1;b.policies.options.renderer=["renderer",a];return!0},notifyRender:function(a){var k=b.core.items[a&&a.id];k&&(!1!==a.success||a.silent)||b.raiseError(b.core.items[a.id],"25081850","run","::RendererManager",Error("There was an error rendering the chart. Enable FusionCharts JS debugger for more information."));k.ref=a.ref;b.raiseEvent("internal.DOMElementCreated",
{},k)},protectedMethods:{options:!0,attributes:!0,src:!0,ref:!0,constructor:!0,signature:!0,link:!0,addEventListener:!0,removeEventListener:!0},getRenderer:function(a){return O[a]},getRendererPolicy:function(a){a=O[a].policies;return"object"===typeof a?a:{}},currentRendererName:function(){return b.policies.options.renderer[1]},update:function(a){q[a.id].update.apply(a,Array.prototype.slice.call(arguments,1))},render:function(a){q[a.id].render.apply(a,Array.prototype.slice.call(arguments,1))},remove:function(a){q[a.id].remove.apply(a,
Array.prototype.slice.call(arguments,1))},resize:function(a){q[a.id].resize.apply(a,Array.prototype.slice.call(arguments,1))},config:function(a){q[a.id].config.apply(a,Array.prototype.slice.call(arguments,1))},dispose:function(a){q[a.id].dispose.apply(a,Array.prototype.slice.call(arguments,1))}};b.addEventListener("beforeInitialize",function(a){a=a.sender;var k=a.options.renderer.toLowerCase(),g;"string"===typeof a.options.renderer&&void 0===O[k]&&(a.options.renderer=b.policies.options.renderer[1]);
a.options.renderer=k;q[a.id]=O[a.options.renderer];!0!==q[a.id].initialized&&"function"===typeof q[a.id].init&&(q[a.id].init(),q[a.id].initialized=!0);b.parsePolicies(a,q[a.id].policies||{},a.args);for(g in q[a.id].prototype)a[g]=q[a.id].prototype[g];for(g in q[a.id].events)a.addEventListener(g,q[a.id].events[g])});b.addEventListener(["rendered","dataloaderror","nodatatodisplay","rendercancelled"],function(a,k){var g=a.sender;g instanceof b.core&&g.__state&&g.__state.rendering&&(b.raiseEvent("internal.rendered",
k,g),delete g.__state.rendering)});b.addEventListener("loaded",function(a){var k=a.sender;a=a.sender.ref;var g,l;if(void 0!==a&&null!==a&&"function"===typeof a.getExternalInterfaceMethods){try{g=a.getExternalInterfaceMethods(),g="string"===typeof g?g.split(","):[]}catch(B){g=[],b.raiseError(k,"13111126041","run","RendererManager^Loaded",Error("Error while retrieving data from the chart-object."+(B.message&&0<=B.message.indexOf("NPObject")?" Possible cross-domain security restriction.":"")))}for(a=
0;a<g.length;a+=1)l=g[a],void 0===k[l]&&(k[l]=M(l));if(k.ref)for(l in g=m.protectedMethods,a=m.getRenderer(k.options.renderer).protectedMethods,k)if(a&&!g[l]&&!a[l]&&void 0===k.ref[l])try{k.ref[l]=U(k,l)}catch(B){}}});b.legacyEventList.resized="FC_Resized";b.extend(b.core.prototype,{render:function(a,m,g){g?"function"!==typeof g&&(g=void 0):"function"===typeof m?(g=m,m=void 0):m||"function"!==typeof a||(g=a,a=void 0);void 0===a&&(a=this.options.containerElementId||this.options.containerElement);"string"===
typeof a&&(a=J.getElementById(a));if(void 0===a||null===a)return b.raiseError(this,"03091456","run",".render()",Error("Unable to find the container DOM element.")),this;r(a)?k(this,a,m,g):this.renderChart(a,m,g);return this},renderChart:function(k,m,g){var l=this,B,e,r,p;if(!this.disposed){if((r=v[this.id])&&r.FusionCharts&&r.FusionCharts===this||(r=this.ref)&&r.FusionCharts&&r.FusionCharts===this)b.renderer.dispose(this),r===v[this.id]&&(v[this.id]=void 0);void 0!==v[this.id]&&b.raiseError(this,
"25081843","comp",".render",Error("#25081843:IECompatibility() Chart Id is same as a JavaScript variable name. Variable naming error. Please use unique name forchart JS variable, chart-id and container id."));g?"function"!==typeof g&&(g=void 0):"function"===typeof m?(g=m,m=void 0):m||"function"!==typeof k||(g=k,k=void 0);m=(m||this.options.insertMode).toLowerCase()||a.REPLACE;void 0===k&&(k=this.options.containerElementId);"string"===typeof k&&(k=J.getElementById(k));if(void 0===k||null===k)return b.raiseError(this,
"03091456","run",".render()",Error("Unable to find the container DOM element.")),this;if(N(this.id,k))return b.raiseError(this,"05102109","run",".render()",Error("A duplicate object already exists with the specific Id: "+this.id)),this;B=J.createElement(this.options.containerElementType||"span");B.setAttribute("id",this.id);(p=J.getElementById("fusioncharts-tooltip-element"))&&J.body.appendChild(p);if("append"!==m&&"prepend"!==m)for(;k.hasChildNodes();)k.removeChild(k.firstChild);"prepend"===m&&k.firstChild?
k.insertBefore(B,k.firstChild):k.appendChild(B);this.options.containerElement=k;this.options.containerElementId=k.id;if(m=B.style)m.position="relative",m.textAlign="left",m.lineHeight="normal",m.display="inline-block",m.zoom="1",m["vertical-align"]="middle",m.fontWeight="normal",m.fontVariant="normal",m.fontStyle="normal",m.textDecoration="none",m["*DISPLAY"]="inline",m.padding="0",m.margin="0",m.border="none",m.direction="ltr",u&&H&&(m["-ms-touch-action"]="none");this.options.containerClassName&&
(B.className=this.options.containerClassName);m=b.normalizeCSSDimension(this.width,this.height,B);this.__state.renderedWidth=m.pixelWidth;this.__state.renderedHeight=m.pixelHeight;this.__state.rendering=!0;b.raiseEvent("beforeRender",e={container:k,width:this.width,height:this.height,renderer:this.options.renderer},this,void 0,function(a,e){!0!==this.disposed&&b.renderer.render(l,B,function(){b.renderer.notifyRender.apply(this,arguments);if(g)try{g.call(a.sender,e.container)}catch(l){setTimeout(function(){throw l;
})}})},function(){b.raiseEvent("renderCancelled",e,l)});return this}},remove:function(){b.renderer.remove(this);return this},resizeTo:function(a,k,g){var l=this,B=l.width,e=l.height,m=l.__state;(l.apiInstance&&l.apiInstance.config||{}).resize=!0;"object"===typeof a&&(g=k,k=a.h,a=a.w);a=null===a||void 0===a?B:a.toString().replace(E,"");k=null===k||void 0===k?e:k.toString().replace(E,"");!0!==g?b.raiseEvent("beforeresize",{currentWidth:B,currentHeight:e,newWidth:a,newHeight:k},l,void 0,function(){l.width=
a;l.height=k;b.renderer.resize(l,{width:a,height:k});b.raiseEventWithLegacy("resized",{width:l.width,height:l.height,prevWidth:B,prevHeight:e,pixelWidth:l.ref&&l.ref.offsetWidth||0,pixelHeight:l.ref&&l.ref.offsetHeight||0,originalWidth:m.renderedWidth,originalHeight:m.renderedHeight},l,[l.id,l.width,l.height])},function(){b.raiseEvent("resizecancelled",{currentWidth:B,currentHeight:e,cancelledTargetWidth:a,cancelledTargetHeight:k},l)}):(l.width=a,l.height=k);return this},dispose:function(){var a=
this,k={};b.raiseEvent("beforeDispose",k,a,void 0,function(){b.renderer.dispose(a);b.raiseEvent("disposed",k,a);b.disposeEvents(a);delete b.core.items[a.id];for(var g in a)a.hasOwnProperty(g)&&delete a[g];a.disposed=!0},function(){b.raiseEvent("disposeCancelled",k,a)})},configure:function(a,k){var g;a&&("string"===typeof a?(g={},g[a]=k):g=a,b.renderer.config(this,g))}});b.extend(b.core,{setCurrentRenderer:function(){var a=m.setDefault.apply(m,arguments);m.userSetDefault=!0;return a},getCurrentRenderer:function(){return m.currentRendererName.apply(m,
arguments)},render:function(a,k){return a instanceof b.core?(a.render(k),a):(new b.core(a)).render(k)}},!1)}]);Q.register("module",["private","modules.interface.transcoder",function(){var b=this,v=b.window,J=b.transcoders={},C={},H={},A=/url$/i,u=b._interactiveCharts={selectscatter:[!0,!1],dragcolumn2d:[!0,!0],dragarea:[!0,!0],dragline:[!0,!0],dragnode:[!0,!0]},a=function(a,m,n,L){var g=n.obj;n=n.args;n.dataSource=a;n.xmlHttpRequestObject=m;n.source="XmlHttpRequest";n.url=L;b.raiseEvent("dataLoadRequestCompleted",
n,g,void 0,q,M)},O=function(a,m,n){var L=n.obj;n=n.args;n.error=a;n.httpStatus=m.xhr&&m.xhr.status?m.xhr.status:-1;n.xmlHttpRequestObject=m;b.raiseEvent("dataLoadError",n,L);"function"===typeof v.FC_DataLoadError&&v.FC_DataLoadError(L.id,n)},q=function(a,b){a.sender.setChartData(b.dataSource,b.dataFormat,b.config,b.successcallback,b.silent)},M=function(a,m){b.raiseEvent("dataLoadCancelled",m,a.sender);m.xmlHttpRequestObject.abort()},U=function(k,m){var n=k.sender,L=n.__state,g=m.url;n.options.dataSource=
m.url;L.dhmXhrObj||(L.dhmXhrObj=new b.ajax(a,O));L.dhmXhrObj.get("function"===typeof v.decodeURIComponent?v.decodeURIComponent(g):v.unescape(g),{obj:n,args:m})},N=function(a,m){var n=a.sender,L=n.__state;b.raiseEvent("dataLoadRequestCancelled",m,n);L&&L.dhmXhrObj&&L.dhmXhrObj.abort()},E=function(a,m){var n=a.sender,L=n.__state,g=n.id;C[g]=m;H[g]&&delete H[g];H[g]={};L.dataReady=void 0;L.dataAvailable=!0;!0!==m.silent&&(!0!==n.options.safeMode||!0!==L.rendering||n.isActive()?(delete L.args,b.renderer.update(n,
m)):(L.updatePending=m,b.raiseWarning(n,"23091255","run","::DataHandler~update","Renderer update was postponed due to async loading.")));b.raiseEvent("dataUpdated",m,n,void 0,m.successcallback)},r=function(a,m){b.raiseEvent("dataUpdateCancelled",m,a.sender,void 0,m.failurecallback)};b.dataFormats={};b.policies.options.dataSource=["dataSource",void 0];b.policies.options.dataFormat=["dataFormat",void 0];b.policies.options.dataConfiguration=["dataConfiguration",void 0];b.policies.options.showDataLoadingMessage=
["showDataLoadingMessage",!1];b.addDataHandler=function(a,m){if("string"!==typeof a||void 0!==J[a.toLowerCase()])b.raiseError(b.core,"03091606","param","::DataManager.addDataHandler",Error("Invalid Data Handler Name"));else{var n={},L=a.toLowerCase();J[L]=m;m.name=a;n["set"+a+"Data"]=function(g,l,B){return this.setChartData(g,a,l,B)};m.transportable&&(n["set"+a+"Url"]=function(g,l,B){return this.setChartDataUrl(g,a,l,B)},b.dataFormats[a+"URL"]=L+"Url");n["get"+a+"Data"]=function(){return this.getChartData(a)};
b.dataFormats[a]=L;b.extend(b.core,n,!0)}};b.extend(b.core.prototype,{setChartDataUrl:function(a,m,n,L,g){if(void 0===m||null===m||"function"!==typeof m.toString)m=this.options.dataFormat,b.raiseWarning(this,"03091609","param","FusionCharts#setChartDataUrl","Invalid Data Format. Reverting to current data format - "+m);m=m.toString().toLowerCase();m=A.test(m)?m.slice(0,-3):m;b.raiseEvent("dataLoadRequested",{source:"XmlHttpRequest",url:a,dataFormat:m,silent:!!g,config:n,successcallback:L},this,void 0,
U,N)},setChartData:function(a,m,n,L,g){var l=this.options,B,e;if(void 0===m||null===m||"function"!==typeof m.toString)m=l.dataFormat,b.raiseWarning(this,"03091610","param","FusionCharts#setChartData","Invalid Data Format. Reverting to current data format - "+m);m=m.toString().toLowerCase();A.test(m)?this.setChartDataUrl(a,m,n,L,g):(l.dataSource=a,B=m,l.dataFormat=m,e=J[B],"undefined"===typeof e?b.raiseError(b.core,"03091611","param","FusionCharts#setChartData",Error("Data Format not recognized")):
(m=(m=b.renderer&&b.renderer.getRenderer(l.renderer||b.renderer.currentRendererName()))&&m.dataFormat,n=m===B?e.passthrough?e.passthrough(a,n,l.chartType):{data:a}:e.encode(a,this,n||l.dataConfiguration)||{},n["native"]=m===B,n.format=n["native"]?m:"xml",n.dataFormat=B,n.dataSource=a,n.silent=!!g,"function"===typeof L&&(n.successcallback=L),b.raiseEvent("beforeDataUpdate",n,this,void 0,E,r)))},getChartData:function(a,m){var n=this.options,L=this.id,g;if(void 0===a||"function"!==typeof a.toString||
void 0===(g=J[a=a.toString().toLowerCase()]))b.raiseError(this,"25081543","param","::transcoder~getChartData()",Error('Unrecognized data-format specified in "format"'));else return H[L][a]&&(H[L][a]=null),H[L][a]?n=H[L][a]:C[L]?(a===C[L].format?H[L][a]=C[L]:(H[L].xml||(H[L].xml="xml"===C[L].format?C[L]:J[C[L].format].encode(C[L].data,this,n.dataConfiguration)),H[L][a]||(H[L][a]=g.decode(H[L].xml.data,this,n.dataConfiguration))),n=H[L][a]):n={error:Error("Data not defined")},!0===!!m?n:n.data},dataReady:function(a){return a?
this.__state.dataAvailable:this.__state.dataReady}});b.extend(b.core,{transcodeData:function(a,m,n,L,g){if(m&&"function"===typeof m.toString&&n&&"function"===typeof n.toString&&void 0!==J[n=n.toString().toLowerCase()]&&void 0!==J[m=m.toString().toLowerCase()])return a=J[m].encode(a,this,g),m=J[n].decode(a.data,this,g,m),m.error instanceof Error||(m.error=a.error),L?m:m.data;b.raiseError(this,"14090217","param",".transcodeData()",Error("Unrecognized data-format specified during transcoding."))}},!1);
b.getRenderer&&!b.getRenderer("flash")||b.addEventListener("DataLoadRequested",function(a){var b=a.sender;b.options&&"flash"===b.options.renderer&&b.options.useLegacyXMLTransport&&a.preventDefault()});b.addEventListener("beforeInitialize",function(a){a=a.sender;var m=a.options,n=m.dataSource,L=b.renderer&&b.renderer.getRenderer(m.renderer);delete C[a.id];H[a.id]={};if(void 0!==n&&null!==n){a.__state.dataSetDuringConstruction=!0;if("string"!==typeof m.dataFormat)switch(typeof n){case "function":n=
m.dataSource=n.call(a,m.dataConfiguration);m.dataFormat="JSON";break;case "string":m.dataFormat=/^\s*?\{[\s\S]*\}\s*?$/g.test(a.options.dataFormat)?"JSON":"XML";break;case "object":m.dataFormat="JSON"}m.dataFormat&&m.dataFormat.toString&&(a.__state.dataFetchDuringConstruction=A.test(m.dataFormat.toString()));a.setChartData(n,m.dataFormat,void 0,void 0,!0)}else L&&(a.__state.dataSetDuringConstruction=!1,b.raiseWarning(a,"1810131922A","param",":dataHandler~event:beforeInitialize","Data source was not defined during construction, hence set to blank renderer default - "+
L.dataFormat),a.setChartData("",L.dataFormat,void 0,void 0,!0),a.__state.dataAvailable=!1)});b.addEventListener("beforeDispose",function(a){var b=a.sender;delete C[a.sender.id];delete H[a.sender.id];b&&b.__state&&b.__state.dhmXhrObj&&b.__state.dhmXhrObj.abort()});b.addEventListener("disposed",function(a){delete H[a.sender.id]});b.addEventListener("loaded",function(a){a=a.sender;var m=a.__state.updatePending;a instanceof b.core&&void 0!==m&&(delete a.__state.updatePending,b.renderer.update(a,m))});
b.addEventListener("dataUpdated",function(a,m){var n=a.sender,L=n.__state;L.rendering&&(L.dataFetchDuringConstruction||L.updatePending)&&(delete L.dataFetchDuringConstruction,delete L.updatePending,b.renderer.update(n,m))});b.addEventListener(["dataLoadError","dataInvalid"],function(a){a.sender.__state.dataAvailable=!1});b.addEventListener("loaded",function(a){a=a.sender;var m=a.__state,n,L,g;g=function(a,g){return function(e){return!1===e?g.apply(this):this.ref.getUpdatedXMLData?b.core.transcodeData(this.ref.getUpdatedXMLData(),
"xml",a):this.getData?this.getData(a):g.apply(this)}};if(a.chartType&&u[a.chartType()]&&u[a.chartType()][0]){for(n in b.transcoders)L=b.transcoders[n].name,L="get"+L+"Data",a[L]=g(n,a.constructor.prototype[L]),a[L]._dynamicdatarouter=!0;m.dynamicDataRoutingEnabled=!0}else if(m.dynamicDataRoutingEnabled){for(n in b.transcoders)L=b.transcoders[n].name,L="get"+L+"Data",a.hasOwnProperty(L)&&a[L]._dynamicdatarouter&&delete a[L];m.dynamicDataRoutingEnabled=!1}})}]);Q.register("module",["private","modules.data.json",
function(){var b=this,v=b.window,J=v.document,C=b.xssEncode,H,A,u=function(a){var b,q;for(b in a)a.hasOwnProperty(b)&&(q=b.toLowerCase(),b!==q&&(a[q]=a[b],delete a[b]),"object"===typeof a[q]&&"data"!==q&&u(a[q]))};void 0===v.JSON&&b.raiseError(this,"1113062012","run","JSONDataHandler",Error("Could not find library support for JSON parsing."));b.policies.options.allowIESafeXMLParsing=["_allowIESafeXMLParsing",!0];H=function(){var a={set:!0,trendlines:!0,vtrendlines:!0,line:{trendlines:!0,vtrendlines:!0},
data:!0,dataset:!0,lineset:!0,categories:!0,category:!0,tasks:!0,linkeddata:!0,application:!0,definition:!0,axis:!0,connectors:!0,connector:{connectors:!0},trendset:!0,row:{rows:!0},column:{columns:!0},label:{labels:!0},color:{colorrange:!0},dial:{dials:!0},pointer:{pointers:!0},point:{trendpoints:!0},process:{processes:!0},task:{tasks:!0},milestone:{milestones:!0},datacolumn:{datatable:!0},text:{datacolumn:!0},item:{legend:!0},alert:{alerts:!0},groups:{annotations:!0},items:{groups:!0,data:!0},shapes:!0,
shape:{shapes:!0},entitydef:!0,entity:{entitydef:!0}},O={chart:"linkedchart",map:"linkedmap",set:"data",vline:{chart:"data",graph:"data",dataset:"data",categories:"category",linkedchart:"data"},apply:{application:"application"},style:{definition:"definition"},marker:{application:"application",definition:"definition",data:"items"},entity:{entitydef:"entitydef",data:"data"},shape:{shapes:"shapes"},connector:{connectors:{chart:"connector",linkedchart:"connector",map:"connectors",linkedmap:"connectors"}},
annotationgroup:{annotations:"groups"},annotation:{groups:"items"}},q={vline:{vline:"true"}},M={chart:!0,map:!0,graph:!0},u={dataset:"data",categories:"category"},N={target:"target",value:"value"},E={styles:{definition:!0,application:!0},chart:{value:!0,target:!0},graph:{value:!0,target:!0},linkedchart:{value:!0,target:!0},markers:{definition:!0,application:!0,shapes:!0,connectors:!0,data:!0},map:{entitydef:!0,data:!0},linkedmap:{entitydef:!0,data:!0}},r,k,m;r={append:function(k,b,g,l){!a[g]||!0!==
a[g]&&!0!==a[g][l]?b[g]=k:(b[g]instanceof Array||(b[g]=[]),b[g].push(k))},child:function(a,k,g,l){var B,e,m,p,T,K;for(B=0;B<k.length;B+=1)switch(m=k[B],e=m.nodeName.toLowerCase(),m.nodeType){case 1:p=r.attr(m.attributes);K=M[e];!0===K&&(T=p,p={},p[e]=T);K=q[e];"object"===typeof K&&b.extend(p,K);if(K=O[e])if("object"===typeof K&&"object"===typeof K[g])for(T in T=void 0,K[g]){if(l[T]){e=K[g][T];break}}else"object"===typeof K&&"string"===typeof K[g]?e=K[g]:"string"===typeof K&&(e=K);m.childNodes.length&&
((K=E[g])&&K[e]?r.child(a,m.childNodes,e,l):r.child(p,m.childNodes,e,l));(K=E[g])&&K[e]||r.append(p,a,e,g);break;case 3:if(K=N[g])e=K,p=m.data,r.append(p,a,e,g);K=u[g];"string"===typeof K&&l.chart&&parseInt(l.chart.compactdatamode,10)&&(e=K,p=m.data,a[e]=a[e]?a[e]+p:p)}},attr:function(a){var k,g={};if(!a||!a.length)return g;for(k=0;k<a.length;k+=1)"xml"===m&&(a[k].value?a[k].value=a[k].value.replace(/</g,"&lt;").replace(/>/g,"&gt;"):a[k].nodeValue&&(a[k].nodeValue=a[k].nodeValue.replace(/</g,"&lt;").replace(/>/g,
"&gt;"))),g[a[k].nodeName.toLowerCase()]=a[k].value||a[k].nodeValue;return g}};k=function(a){var m={},g,l,B,e,V,p,q,K,t;if("object"!==typeof a&&a&&"function"!==typeof a.toString)return k.errorObject=new TypeError("xml2json.parse()"),m;a=a.toString().replace(/<\!--[\s\S]*?--\x3e/g,"").replace(/<\?xml[\s\S]*?\?>/ig,"").replace(/&(?!([^;\n\r]+?;))/g,"&amp;$1");a=a.replace(/^\s\s*/,"");for(var Z=/\s/,P=a.length;Z.test(a.charAt(--P)););a=a.slice(0,P+1);if(!a)return m;try{v.DOMParser?g=(new v.DOMParser).parseFromString(a,
"text/xml"):J.body&&b.core.options.allowIESafeXMLParsing?(l=J.createElement("xml"),l.innerHTML=a,J.body.appendChild(l),g=l.XMLDocument,J.body.removeChild(l)):(g=new v.ActiveXObject("Microsoft.XMLDOM"),g.async="false",g.loadXML(a));if(!(g&&g.childNodes&&1===g.childNodes.length&&(B=g.childNodes[0])&&B.nodeName&&(e=B.nodeName.toLowerCase()))||"chart"!==e&&"map"!==e&&"graph"!==e)return k.errorObject=new TypeError("xml2json.parse()"),m;if("graph"===e){V=g.createElement("chart");for(t=(q=B.attributes)&&
q.length||0;t--;)V.setAttribute(q[t].name,q[t].value),q.removeNamedItem(q[t].name);if(t=(K=B.childNodes)&&K.length||0)--t,p=B.removeChild(K[t]),V.appendChild(p);for(;t--;)p=B.removeChild(K[t]),V.insertBefore(p,V.firstChild);g.replaceChild(V,B);B=V}}catch(S){k.errorObject=S}B?(B.attributes&&(m[e]=r.attr(B.attributes)),B.childNodes&&r.child(m,B.childNodes,e,m),delete k.errorObject):k.errorObject=new TypeError("xml2json.parse()");return m};return function(a){delete k.errorObject;m=arguments[arguments.length-
1];return{data:k(a),error:k.errorObject}}}();A=function(){var a,b;a={items:{explode:{data:"set",groups:{annotations:"annotationgroup"},items:{groups:"annotation"}},text:{chart:{target:"target",value:"value"},graph:{target:"target",value:"value"}},dsv:{dataset:{data:"dataset"},categories:{category:"categories"}},attr:{chart:{chart:"chart"},graph:{graph:"graph"},map:{map:"map"},linkedmap:{map:"map"},linkedchart:{chart:"chart"}},group:{styles:{definition:"style",application:"apply"},map:{data:"entity",
entitydef:"entity"},markers:{definition:"marker",application:"marker",shapes:"shape",connectors:"connector",items:"marker"}},tag:{markers:{items:"data"}}},qualify:function(a,b,O){return"object"===typeof this.items[a][O]?this.items[a][O][b]:this.items[a][O]}};b=function(q,M,u,N){var E="",r="",k="",m="",n,L,g;M&&"function"===typeof M.toLowerCase&&(M=M.toLowerCase());if(void 0===u&&q[M])for(n in q[M])L=n.toLowerCase(),"compactdatamode"===L&&(N.applyDSV=1==q[M][n]);if(q instanceof Array)for(n=0;n<q.length;n+=
1)k="string"===typeof q[n]?k+C(q[n]):k+b(q[n],M,u,N);else{for(n in q)L=n.toLowerCase().replace(/[`~!@#$%^&*()|+\=?;:'", <>\{\}\[\]\\\/]/gi,""),q[n]instanceof Array&&(g=a.qualify("group",L,M))?(k=a.qualify("tag",L,M)||L,r+="<"+k+">"+b(q[n],g,M,N)+"</"+k+">"):"object"===typeof q[n]?(g=a.qualify("attr",L,M))?(m=b(q[n],g,M,N).replace(/\s*\/\>/ig,""),M=L):r+=b(q[n],L,M,N):N.applyDSV&&(g=a.qualify("dsv",L,M))?r+=q[n]:(g=a.qualify("text",L,M))?(k=a.qualify("tag",L,M)||g,r+="<"+k+">"+q[n]+"</"+k+">"):"vline"===
L&&q[n]?M="vline":E+=" "+L+'="'+C(q[n]).toString().replace(/\"/ig,"&quot;")+'"';if(g=a.qualify("explode",u,M))M=g;k=M;k=(""!==m?m:"<"+k)+E+(""!==r?">"+r+"</"+k+">":" />")}return k};return function(a){delete b.errorObject;if(a&&"string"===typeof a)try{a=JSON.parse(a)}catch(M){b.errorObject=M}return{data:b(a,a&&a.graph?"graph":a&&a.map?"map":"chart",void 0,{}),error:b.errorObject}}}();b.addDataHandler("JSON",{encode:A,decode:H,passthrough:function(a,b,q){b={data:{}};q=!!/zoomscatter/ig.test(q);if(!a)return b;
if("string"!==typeof a)try{a=JSON.stringify(a)}catch(M){return b.error=M,b}try{q?(b.data=JSON.parse(a),u(b.data)):b.data=JSON.parse(a.replace(/"([^"]+)"[\s]*:/g,function(a,b){return'"'+b.toLowerCase()+'":'}))}catch(M){console.log(M),b.error=M}return b},transportable:!0})}]);Q.register("module",["private","modules.data.xml",function(){var b=function(b){return{data:b,error:void 0}};this.addDataHandler("XML",{encode:b,decode:b,transportable:!0})}]);Q.register("module",["private","modules.data.csv",function(){var b=
this,v=b.window,J=b.core,C=v.parseInt,H=v.parseFloat,A=function(a){return a},u;u=function(a){this.data=[];this.columnCount=this.rowCount=0;this.configure(a)};u.decodeLiterals=function(a,b){return void 0!==a&&null!==a&&a.toString?a.replace("{tab}","\t").replace("{quot}",'"').replace("{apos}","'"):b};u.prototype.set=function(a,b,q){var M;if(this.rowCount<=a){for(M=this.rowCount;M<=a;M+=1)this.data[M]=[];this.rowCount=a+1}this.columnCount<=b&&(this.columnCount=b+1);this.data[a][b]=q};u.prototype.setRow=
function(a,b){var q;if(this.rowCount<=a){for(q=this.rowCount;q<=a;q+=1)this.data[q]=[];this.rowCount=a+1}this.columnCount<b.length&&(this.columnCount=b.length);this.data[a]=b};u.prototype.get=function(a,b){var q=this.data;return q[a]&&q[a][b]};u.prototype.configure=function(a){var b=u.decodeLiterals;this.delimiter=b(a.delimiter,",");this.qualifier=b(a.qualifier,'"');this.eolCharacter=b(a.eolCharacter,"\r\n");this.numberFormatted=!!C(a.numberFormatted,0)};u.prototype.clear=function(){this.data=[];
this.columnCount=this.rowCount=0};u.prototype.toString=function(){var a,b,q="";for(a=0;a<this.rowCount;a+=1)b=this.qualifier+this.data[a].join(this.qualifier+this.delimiter+this.qualifier)+this.qualifier,q+='""'===b?this.eolCharacter:b+this.eolCharacter;0<this.rowCount&&(q=q.slice(0,q.length-2));return q};b.addDataHandler("CSV",{encode:function(a,u){b.raiseError(u,"0604111215","run","::CSVDataHandler.encode()","FusionCharts CSV data-handler only supports encoding of data.");throw Error("FeatureNotSupportedException()");
},decode:function(a,b){var q=J.transcodeData(a,"xml","json")||{},M=b.jsVars,v=M&&M.instanceAPI,N=v&&v.components,E,r,k,m,n,L,g=q.chart||q.map||q.graph||{},l=!!g.exporterrorcolumns,B=q.categories&&q.categories[0]&&q.categories[0].category||[],e=q.map&&!q.chart||M&&M.instanceAPI&&"geo"===M.instanceAPI.defaultSeriesType,V=!1,p=!1,T=!1,K=!1,t=!1,Z=A,P={},S,z,R,w,F,X,h,d,f,c;k=0;var D=-1,G;E=new u({separator:g.exportdataseparator,qualifier:g.exportdataqualifier,numberFormatted:g.exportdataformattedval});
J.formatNumber&&E.numberFormatted&&(Z=function(c,d){return J.formatNumber(c,g,d)});if(e)for(r in P.geo=!0,B=(e=N&&M.instanceAPI.components.dataset&&M.instanceAPI.components.dataset[0])&&e.components.data||[],E.setRow(0,["Id"," Short Name","Long Name","Value","Formatted Value"]),M=0,B)p=B[r],c=p.config,e=c.cleanValue,!0!==p.hidden&&E.setRow(++M,[r,c.shortLabel,c.label,null===e?"":e,c.formattedValue]);else if(void 0!==(S=q.dials&&q.dials.dial||q.pointers&&q.pointers.pointer||q.value))if(P.gauge=!0,
"string"===typeof S)E.set(0,0,Z(S)),P.singlevalue=!0,"string"===typeof q.target&&(E.set(0,1,Z(q.target)),P.bullet=!0);else for(E.setRow(0,["Id","Value"]),P.multivalue=!0,M=0,L=1,n=S.length;M<n;M+=1,L+=1)E.setRow(L,[L,Z(S[M].value)]);else if(S=q.dataset||!(q.data instanceof Array)&&[]){P.multiseries=!0;k=1;if(z=q.lineset)S=S.concat(z),P.lineset=!0;if(R=q.axis)S=S.concat(R),P.multiaxis=!0;e=v.defaultDatasetType&&v.defaultDatasetType.toLowerCase();"dragnode"!==e&&"dragcolumn"!==e&&"dragline"!==e&&"dragarea"!==
e||!v.getJSONData||(S=v.getJSONData().dataset);X=S.length;F=B.length;if(!(X=S.length)){for(M=0;M<F;M+=1)h=B[M],E.set(M+1,0,h.label||h.name);P.multilevel=!0}for(M=0;M<X;M+=1)for(d=S,d[M].dataset?(d=d[M].dataset,m=0,w=d.length):(d=S,m=M,w=m+1);m<w&&!V&&!T;m+=1)if(t=d[m],D++,!(N&&N.dataset&&N.dataset[D]&&!1===N.dataset[D].visible)){G=(e=N&&N.dataset&&N.dataset[D])&&e.config&&e.config.parentYAxis;E.set(0,k,t.seriesname);"string"===typeof t.data&&(P.compactdata=!0,t.data=t.data.split(g.dataseparator||
"|"));L=n=0;for(f=t.data&&t.data.length||0;n<f||n<F;n+=1){h=B[n];r=L+1;e=t.data&&t.data[L]||{};if(void 0!==e.x&&void 0!==e.y){V=P.xy=!0;break}if(void 0!==e.open||void 0!==e.high||void 0!==e.close||void 0!==e.low){K=P.ohlc=!0;break}if(void 0!==e.rowid&&void 0!==e.columnid){T=P.heatmap=!0;break}if(n<F&&!h.vline){E.set(r,0,h.label||h.name);h=H(e?e.value:"");h=isNaN(h)?"":Z(h,G);E.set(r,k,h);if(p||l||e.errorvalue)p||E.set(0,k+1,"Error"),c=1,E.set(r,k+1,Z(e.errorvalue));L+=1}}c&&(k+=c,c=0);k+=1}z&&(S=
S.slice(0,-z.length));R&&(S=S.slice(0,-R.length))}else if(S=q.data){E.set(0,1,g.yaxisname||"Value");P.singleseries=!0;t="1"==g.showsumatend;M=0;for(F=S.length;M<F;M+=1)e=S[M],e.vline||(h=H(e.value?e.value:""),E.setRow(M+1,[e.label||e.name,isNaN(h)?"":(k+=h,Z(h))]));t&&(P.summation=!0,E.setRow(M+1,[g.sumlabel||"Total",Z(k)]))}if(K)for(E.clear(),E.setRow(0,["Open","Close","High","Low"]),M=0,r=1,S=q.dataset,w=S.length;M<w;M+=1)for(n=0,t=S[M]&&S[M].data||[],X=t.length;n<X;n+=1,r+=1)e=t[n]||{},E.setRow(n+
1,[Z(e.open),Z(e.close),Z(e.high),Z(e.low)]);else if(V)for(E.clear(),p=!1,c=0,E.setRow(0,["Series","x","y"]),M=0,r=1,S=q.dataset,w=S.length;M<w;M+=1){if(!(N&&N.dataset&&N.dataset[M]&&!1===N.dataset[M].visible))for(e=v.defaultDatasetType&&v.defaultDatasetType.toLowerCase(),"dragnode"===e&&v.getJSONData&&(S=v.getJSONData().dataset),n=0,t=S[M]&&S[M].data||[],X=t.length;n<X;n+=1,r+=1){e=t[n]||{};h=[S[M].seriesname,Z(e.x),Z(e.y)];void 0!==e.z&&(h.push(Z(e.z)),c||(E.set(0,3,"z"),c=1));if(p||l||void 0!==
e.errorvalue||void 0!==e.horizontalerrorvalue||void 0!==e.verticalerrorvalue)q=Z(e.errorvalue),h.push(e.errorvalue,void 0===e.horizontalerrorvalue?q:Z(e.horizontalerrorvalue),void 0===e.verticalerrorvalue?q:Z(e.verticalerrorvalue)),p||(E.set(0,c+3,"Error"),E.set(0,c+4,"Horizontal Error"),E.set(0,c+5,"Vertical Error")),p=P.error=!0;E.setRow(r,h)}}else if(T){E.clear();l={};V={};M=0;n=1;B=q.rows&&q.rows.row||[];for(v=B.length;M<v;M+=1,n+=1)h=B[M],h.id&&(l[h.id.toLowerCase()]=n,E.set(n,0,h.label||h.id));
M=0;n=1;B=q.columns&&q.columns.column||[];for(v=B.length;M<v;M+=1,n+=1)h=B[M],h.id&&(V[h.id.toLowerCase()]=n,E.set(0,n,h.label||h.id));t=q.dataset&&q.dataset[0]&&q.dataset[0].data||[];N=N&&N.dataset&&N.dataset[0]&&N.dataset[0].components&&N.dataset[0].components.data||[];M=0;for(v=t.length;M<v;M+=1)e=t[M],r=e.rowid.toLowerCase(),k=e.columnid.toLowerCase(),N[M]&&!1===N[M].visible||(l[r]||(l[r]=E.rowCount,E.set(E.rowCount,0,e.rowid)),V[k]||(V[k]=E.columnCount,E.set(0,E.columnCount,e.columnid)),E.set(l[r],
V[k],Z(e.value)))}S=B=z=R=null;0<E.rowCount&&void 0===E.get(0,0)&&E.set(0,0,g.xaxisname||"Label");return{data:E.toString(),error:void 0,predictedFormat:P}},transportable:!1});J.addEventListener("Loaded",function(a){a=a.sender;"javascript"!==a.options.renderer||a.getDataAsCSV||(a.getDataAsCSV=a.ref.getDataAsCSV=a.getCSVData)})}]);Q.register("module",["private","modules.renderer.js",function(){var b=this,v=b.window,J=v.document,C=b.core.options,H=/msie/i.test(v.navigator.userAgent)&&!v.opera,A=!(!v.SVGAngle&&
!J.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),u=function(){},a=b.hcLib={cmdQueue:[]},O=a.moduleCmdQueue={base:[],charts:[],powercharts:[],widgets:[],maps:[]},q=a.moduleDependencies={},M=a.moduleMeta={base:"fusioncharts.js",charts:"fusioncharts.charts.js",powercharts:"fusioncharts.powercharts.js",widgets:"fusioncharts.widgets.js",maps:"fusioncharts.maps.js"},U={},N=a.getMetaSentence=function(){var a={};return function(g){g=g&&g.replace(/(^\s*)|(\s*$)/g,"")||
"";return a[g]||(a[g]={key:g,subject:g.replace(/[^\/]*?$/ig,""),predicate:g.replace(/^.*\//ig,"")})}}(),E=a.getDependentModuleName=function(a){var g=[],e,b;a=N(a).predicate;for(e in q)void 0!==(b=q[e][a])&&(g[b]=e);return g},r=a.hasModule=function(a){var g,e;if(a instanceof Array){g=0;for(e=a.length;g<e;g+=1)if(!b.modules["modules.renderer.js-"+N(a[g]).predicate])return!1;return!0}return!!b.modules["modules.renderer.js-"+N(a).predicate]},k=a.loadModule=function(a,g,e,k){a instanceof Array||(a=[a]);
var p=a.length,m=0,K;K=function(){if(m>=p)g&&g();else{var t=a[m],n=t&&t.match(/[^\/]*$/i)[0],P=M[t];m+=1;if(t){if(r(n)){K();return}if(U[n]){b.raiseError(k||b.core,"1112201445A","run","JavaScriptRenderer~loadModule() ","required resources are absent or blocked from loading.");e&&e(n);return}}else e&&e(n);t=b.core.options["html5"+b.capitalizeString(n)+"Src"];b.loadScript(void 0===t?P:t,{success:function(){r(n)?K():e&&e(n)},failure:e&&function(){e(n)}},void 0,!0)}};K()},m=a.executeWaitingCommands=function(a){for(var g;g=
a.shift();)"object"===typeof g&&u[g.cmd].apply(g.obj,g.args)},n=function(a){delete a.sender.jsVars._reflowData;a.sender.jsVars._reflowData={};delete a.sender.jsVars._reflowClean},L=function(){var a=function(){};a.prototype={LoadDataErrorText:"Error in loading data.",XMLLoadingText:"Retrieving data. Please wait",InvalidXMLText:"Invalid data.",ChartNoDataText:"No data to display.",ReadingDataText:"Reading data. Please wait",ChartNotSupported:"Chart type not supported.",PBarLoadingText:"",LoadingText:"Loading chart. Please wait",
RenderChartErrorText:"Unable to render chart."};return a.prototype.constructor=a}(),g=a.getContainerBackgroundColor=function(l){l=l.chartInstance;var g=l.options,e=g.containerBackgroundColor,g=g.containerBackgroundOpacity,b=l.jsVars.transparent;void 0!==b&&null!==b?g=l.jsVars.transparent?0:1:(g=parseFloat(g),0>g?g=0:1<g&&(g=1));e||(e="#ffffff");if(H&&!A)return g?e:"transparent";e=e.replace(/^#?([a-f0-9]+)/ig,"$1");e=a.graphics.HEXtoRGB(e);e[3]=g.toString();return"rgba("+e.join(",")+")"};a.injectModuleDependency=
function(l,g,e){var b=!1,k=N(l).subject;l=N(l).predicate;g=void 0===g?l:N(g).predicate;q[l]||(q[l]={},O[l]||(O[l]=[],a.moduleMeta[l]=k+C.html5ScriptNamePrefix+(g&&g.replace&&g.replace(/^[\s\S]*\//ig,"").replace(/\?/g,"%3F").replace(/\#/g,"%23").replace(/\:/g,"%3A")||"")+C.html5ScriptNameSuffix),b=!0);q[l][g]=e||0;return b};a.needsModule=function(l,g){l=N(l).predicate;g=N(g).predicate;return void 0!==(a.moduleDependencies[l]&&a.moduleDependencies[l][g])};a.cleanupWaitingCommands=function(a){for(var g=
a.chartType(),g=E(g),e,b=[],k;e=g.shift();){for(e=O[e]||[];k=e.shift();)"object"===typeof k&&k.obj!==a&&b.push(k);e.concat(b);b=[]}};b.extend(b.core.options,{html5ScriptNameSuffix:".js",html5ScriptNamePrefix:"fusioncharts."});b.extend(u,{dataFormat:"json",ready:!1,policies:{jsVars:{},options:{showChartLoadingMessage:["showChartLoadingMessage",!0]}},init:function(){r("base")?u.ready=!0:k("base",function(){u.ready=!0;m(a.cmdQueue)},void 0,b.core)},render:function(l){var b=l,e=this.jsVars.msgStore;b&&
this.options.showChartLoadingMessage&&(b.innerHTML='<small style="display: inline-block; *zoom:1; *display:inline; width: 100%; font-family: Verdana,sans; font-size: 10px; color: #666666; text-align: center; padding-top: '+(parseInt(b.style.height,10)/2-5)+'px">'+(e.PBarLoadingText||e.LoadingText)+"</small>",b.style.backgroundColor=g(this));a.cmdQueue.push({cmd:"render",obj:this,args:arguments})},update:function(){a.cmdQueue.push({cmd:"update",obj:this,args:arguments})},resize:function(){a.cmdQueue.push({cmd:"resize",
obj:this,args:arguments})},dispose:function(){var l=a.cmdQueue,g,e;g=0;for(e=l.length;g<e;g+=1)l[g].obj===this&&(l.splice(g,1),--e,--g)},load:function(){a.cmdQueue.push({cmd:"load",obj:this,args:arguments})},config:function(a,g){var e,b=this.jsVars,k=b.msgStore,b=b.cfgStore,m=this.options,K;K={LoadingText:"loadMessage",ChartNotSupported:"typeNotSupportedMessage",RenderChartErrorText:"renderErrorMessage",XMLLoadingText:"dataLoadStartMessage",ChartNoDataText:"dataEmptyMessage",LoadDataErrorText:"dataLoadErrorMessage",
InvalidXMLText:"dataInvalidMessage"};"string"===typeof a&&1<arguments.length&&(e=a,a={},a[e]=g);for(e in a)void 0!==k[e]?k[e]=a[e]:b[e.toLowerCase()]=a[e],K[e]?m[K[e]]=a[e]:m[e]=a[e]},protectedMethods:{},events:{beforeInitialize:function(l){var g=l.sender;l=g.jsVars;var e;l.fcObj=g;l.msgStore=l.msgStore||new L;l.cfgStore=l.cfgStore||{};l.previousDrawCount=-1;l.drawCount=0;l._reflowData={};g.addEventListener("beforeRender",function(e){e.sender.jsVars.smartLabel=new a.SmartLabelManager(g.id,J.body||
J.getElementsByTagName("body")[0]);e.detachHandler()});l.userModules instanceof Array||(e=l.userModules,l.userModules=[],"string"===typeof e&&(l.userModules=l.userModules.concat(e.split(","))));a.chartAPI&&a.chartAPI[void 0]||(l.needsLoaderCall=!0)},initialized:function(a){a=a.sender;var g=a.jsVars;g.needsLoaderCall&&(delete g.needsLoaderCall,u.load.call(a))},beforeDataUpdate:n,beforeDispose:function(a){var g=a.sender.jsVars;g.smartLabel&&!g.smartLabel.disposed&&g.smartLabel.dispose();n.apply(this,
arguments)},beforeRender:function(a){var g=a.sender.jsVars;delete g.drLoadAttempted;delete g.waitingModule;delete g.waitingModuleError;n.apply(this,arguments)},dataLoadRequested:function(a){a=a.sender;var g=a.jsVars;delete g.loadError;a.ref&&a.options.showDataLoadingMessage?g.hcObj&&!g.hasNativeMessage&&g.hcObj.showLoading?g.hcObj.showMessage(g.msgStore.XMLLoadingText):a.ref.showChartMessage?a.ref.showChartMessage("XMLLoadingText"):g.stallLoad=!0:g.stallLoad=!0},dataLoadRequestCompleted:function(a){delete a.sender.jsVars.stallLoad},
dataLoadError:function(a){var g=a.sender,e=g.jsVars,b=g.args,k=g.options;delete e.stallLoad;e.loadError=!0;g._chartMessageImageStyle={imageHAlign:b.dataLoadErrorMessageImageHAlign||k.baseChartMessageImageHAlign,imageVAlign:b.dataLoadErrorMessageImageVAlign||k.baseChartMessageImageVAlign,imageAlpha:b.dataLoadErrorMessageImageAlpha||k.baseChartMessageImageAlpha,imageScale:b.dataLoadErrorMessageImageScale||k.baseChartMessageImageScale};g._chartMessageStyle={color:b.dataLoadErrorMessageColor||k.baseChartMessageColor,
fontFamily:b.dataLoadErrorMessageFont||k.baseChartMessageFont,fontSize:b.dataLoadErrorMessageFontSize||k.baseChartMessageFontSize};g.apiInstance.setChartMessage&&(g.apiInstance.setChartMessage(k.dataLoadErrorMessage,g),g.apiInstance.drawChartMessage());g.__state.dataFetchDuringConstruction&&delete g.__state.dataFetchDuringConstruction;n.apply(this,arguments)}},_call:function(a,g,e){a.apply(e||v,g||[])}});b.extend(u.prototype,{getSWFHTML:function(){b.raiseWarning(this,"11090611381","run","JavaScriptRenderer~getSWFHTML()",
"getSWFHTML() is not supported for JavaScript charts.")},addVariable:function(){b.raiseWarning(this,"11090611381","run","JavaScriptRenderer~addVariable()",'Use of deprecated "addVariable()". Replace with "configure()".');b.core.prototype.configure.apply(this,arguments)},getXML:function(){b.raiseWarning(this,"11171116291","run","JavaScriptRenderer~getXML()",'Use of deprecated "getXML()". Replace with "getXMLData()".');return this.getXMLData.apply(this,arguments)},setDataXML:function(){b.raiseWarning(this,
"11171116292","run","JavaScriptRenderer~setDataXML()",'Use of deprecated "setDataXML()". Replace with "setXMLData()".');return this.setXMLData.apply(this,arguments)},setDataURL:function(){b.raiseWarning(this,"11171116293","run","JavaScriptRenderer~setDataURL()",'Use of deprecated "SetDataURL()". Replace with "setXMLUrl()".');return this.setXMLUrl.apply(this,arguments)},hasRendered:function(){return!(!this.jsVars.hcObj||!this.jsVars.hcObj.hasRendered)},setTransparent:function(a){var g;if(g=this.jsVars)"boolean"!==
typeof a&&null!==a&&(a=!0),g.transparent=null===a?!1:!0===a?!0:!1}});b.extend(b.core,{_fallbackJSChartWhenNoFlash:function(){v.swfobject.hasFlashPlayerVersion(b.core.options.requiredFlashPlayerVersion)||b.renderer.setDefault("javascript")},_enableJSChartsForSelectedBrowsers:function(a){void 0!==a&&null!==a&&b.renderer.setDefault((new RegExp(a)).test(v.navigator.userAgent)?"javascript":"flash")},_doNotLoadExternalScript:function(a){var g,e;for(g in a)e=g.toLowerCase(),M[e]&&(U[e]=!!a[g])},_preloadJSChartModule:function(){throw"NotImplemented()";
}});b.renderer.register("javascript",u);A||H?b.renderer.setDefault("javascript"):v.swfobject&&v.swfobject.hasFlashPlayerVersion&&!v.swfobject.hasFlashPlayerVersion(b.core.options.requiredFlashPlayerVersion)&&(b.raiseWarning(b.core,"1204111846","run","JSRenderer","Switched to JavaScript as default rendering due to absence of required Flash Player."),b.renderer.setDefault("javascript"))}]);Q.register("module",["private","modules.renderer.polyfill",function(){"function"!=typeof Object.create&&(Object.create=
function(){function b(){}var J=Object.prototype.hasOwnProperty;return function(C){var H,A,u;if("object"!=typeof C)throw new TypeError("Object prototype may only be an Object or null");b.prototype=C;u=new b;b.prototype=null;if(1<arguments.length)for(A in H=Object(arguments[1]),H)J.call(H,A)&&(u[A]=H[A]);return u}}());Array.prototype.indexOf||(Array.prototype.indexOf=function(b,J){var C,H,A;if(null==this)throw new TypeError('"this" is null or not defined');H=Object(this);A=H.length>>>0;if(0===A)return-1;
C=+J||0;Infinity===Math.abs(C)&&(C=0);if(C>=A)return-1;for(C=Math.max(0<=C?C:A-Math.abs(C),0);C<A;){if(C in H&&H[C]===b)return C;C++}return-1});Array.prototype.forEach||(Array.prototype.forEach=function(b,J){var C,H,A,u,a;if(null==this)throw new TypeError(" this is null or not defined");A=Object(this);u=A.length>>>0;if("function"!==typeof b)throw new TypeError(b+" is not a function");1<arguments.length&&(C=J);for(H=0;H<u;)H in A&&(a=A[H],b.call(C,a,H,A)),H++});Array.prototype.indexOf||(Array.prototype.indexOf=
function(b,J){var C;if(null==this)throw new TypeError('"this" is null or not defined');var H=Object(this),A=H.length>>>0;if(0===A)return-1;C=+J||0;Infinity===Math.abs(C)&&(C=0);if(C>=A)return-1;for(C=Math.max(0<=C?C:A-Math.abs(C),0);C<A;){if(C in H&&H[C]===b)return C;C++}return-1});"function"!=typeof Object.create&&(Object.create=function(){function b(){}var J=Object.prototype.hasOwnProperty;return function(C){var H,A,u;if("object"!=typeof C)throw TypeError("Object prototype may only be an Object or null");
b.prototype=C;H=new b;b.prototype=null;if(1<arguments.length)for(u in A=Object(arguments[1]),A)J.call(A,u)&&(H[u]=A[u]);return H}}());Function.prototype.bind||(Function.prototype.bind=function(b){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var J=Array.prototype.slice.call(arguments,1),C=this,H=function(){},A=function(){return C.apply(this instanceof H?this:b,J.concat(Array.prototype.slice.call(arguments)))};this.prototype&&
(H.prototype=this.prototype);A.prototype=new H;return A});Array.prototype.reduce||(Array.prototype.reduce=function(b){if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!==typeof b)throw new TypeError(b+" is not a function");var J=Object(this),C=J.length>>>0,H=0,A;if(2==arguments.length)A=arguments[1];else{for(;H<C&&!(H in J);)H++;if(H>=C)throw new TypeError("Reduce of empty array with no initial value");A=J[H++]}for(;H<C;H++)H in J&&(A=b(A,J[H],H,
J));return A});Object.keys||(Object.keys=function(){var b=Object.prototype.hasOwnProperty,J=!{toString:null}.propertyIsEnumerable("toString"),C="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),H=C.length;return function(A){if("object"!==typeof A&&("function"!==typeof A||null===A))throw new TypeError("Object.keys called on non-object");var u=[],a;for(a in A)b.call(A,a)&&u.push(a);if(J)for(a=0;a<H;a++)b.call(A,C[a])&&u.push(C[a]);return u}}());
Array.prototype.map||(Array.prototype.map=function(b){var J,C,H;if(null==this)throw new TypeError("this is null or not defined");var A=Object(this),u=A.length>>>0;if("function"!==typeof b)throw new TypeError(b+" is not a function");1<arguments.length&&(J=arguments[1]);C=Array(u);for(H=0;H<u;){var a;H in A&&(a=A[H],a=b.call(J,a,H,A),C[H]=a);H++}return C});Array.prototype.filter||(Array.prototype.filter=function(b){if(void 0===this||null===this)throw new TypeError;var J=Object(this),C=J.length>>>0;
if("function"!==typeof b)throw new TypeError;for(var H=[],A=2<=arguments.length?arguments[1]:void 0,u=0;u<C;u++)if(u in J){var a=J[u];b.call(A,a,u,J)&&H.push(a)}return H});var b=this.window.Node;b&&!b.prototype.contains&&(b.prototype.contains=function(b){for(;b=b.parentNode;)if(b===this)return!0;return!1})}]);Q&&Q.register("module",["private","vendor.svgdecanvo",function(){var b=this.window,v=this.hcLib;(function(b){var v=b.document,H={},A={},u;u=function(a,b,q,M,v,N,E){var r={svg:"",context:"",callBack:"",
imageArr:[],canvas:"",dimention:{}};if(!(this instanceof u))throw"This function should be used as class";this._getStore=function(a){return"undefined"!=typeof r[a]?r[a]:!1};this._setStore=function(a,b){"undefined"!=typeof r[a]&&(r[a]=b)};this._setStore("dimention",{x:q,y:M,width:v,height:N});a&&this.setSVG(a);b&&this.setContext(b);E&&this.setCallback(E);this.drawOnCanvas()};u.prototype.setContext=function(a){var b;if(a.getContext&&a.getContext("2d"))b=a.getContext("2d"),this._setStore("canvas",a),
this._setStore("context",b);else throw"Please provide valid canvas";};u.prototype.getContext=function(){return this._getStore("context")};u.prototype.setSVG=function(a){if("undefined"!=typeof a.documentElement)this._setStore("svg",a);else if("<"==a.substr(0,1))a=A.StrToDom(a),this._setStore("svg",a);else throw"Please provide valid SVG";};u.prototype.getSVG=function(){return this._getStore("svg")};u.prototype.setCallback=function(a){"function"===typeof a&&this._setStore("callBack",a)};u.prototype.getCallback=
function(){return this._getStore("callBack")};u.prototype.drawOnCanvas=function(a,b,q,M,u,N,E){var r,k,m,n;a&&this.setSVG(a);b&&this.setContext(b);E&&this.setCallback(E);b=b||this._getStore("canvas");m=this._getStore("dimention");E=this.getCallback();r=this.getContext();(a=this.getSVG())&&r&&(n=A.getSvgDimention(a),k=n.width,b=n.height,q=q||m.x||0,M=M||m.y||0,u=u||m.width||k,N=N||m.height||b,k=n.width?u/k:1,b=n.height?N/b:1,A.startTransform("translate("+q+","+M+") scale("+k+","+b+")",r),r.save(),
r.fillStyle="#ffffff",r.fillRect(0,0,u,N),r.restore(),A.storeImagesInArr(this),A.drawNodes([a],[],this,r,function(){"function"===typeof E&&E();A.resetTransform(r)}))};H.common=function(a,b,q,M,u){var N=a.childNodes,E,r=function(){a.attributes&&M.restore();u&&u()};for(E in b)b.hasOwnProperty(E)&&"class"!=b[E].name&&"id"!=b[E].name&&"transform"!=b[E].name&&"clip-path"!=b[E].name&&"object"==typeof b[E]&&a.attributes&&!a.attributes[b[E].name]&&a.setAttribute([b[E].name],b[E].value);if(a.attributes&&a.attributes.style)for(E in styleArr=
a.attributes.style.value.replace(/;$/,"").split(";"),styleArr)if(styleArr.hasOwnProperty(E)&&(styleName=styleArr[E].split(":")[0].trim(),!a.attributes[styleName]||"undefined"==a.attributes[styleName].value))try{a.setAttribute(styleName,styleArr[E].split(":")[1].trim())}catch(k){}a.attributes&&(M.save(),a.attributes.transform&&A.startTransform(a.attributes.transform.value,M),a.attributes["clip-path"]&&A.applyClip(a.attributes["clip-path"].value,M,q));if(0===N.length||1===N.length&&!N[0].tagName)if("undefined"!==
typeof a.tagName)if(b="draw"+a.tagName,H[b])if(a.attributes.display&&"none"==a.attributes.display.value)r();else H[b](a,M,q,"draw",r);else r();else r();else A.drawNodes(N,"svg"==a.tagName?[]:a.attributes,q,M,r)};H.drawtext=function(a,b,q,M,u){this.drawtspan(a,b,q,M,u)};H.drawtspan=function(a,u,q,M,H){var N=a.innerHTML||a.textContent,E=a.attributes.x?a.attributes.x.value:0,r=a.attributes.y?a.attributes.y.value:0,k=a.attributes.dx?a.attributes.dx.value:0,m=a.attributes.dy?a.attributes.dy.value:0,n=
"serief",L="normal",g="16px",l=[],B;v.getElementsByTagName("body")[0]&&(B=b.getComputedStyle(v.getElementsByTagName("body")[0],null),B.getPropertyValue("font-family")&&(n=B.getPropertyValue("font-family")),B.getPropertyValue("font-weight")&&(L=B.getPropertyValue("font-weight")),B.getPropertyValue("font-size")&&(g=B.getPropertyValue("font-size")));n=a.attributes["font-family"]?a.attributes["font-family"].value:n;L=a.attributes["font-weight"]?a.attributes["font-weight"].value:L;B=a.attributes["text-anchor"]?
a.attributes["text-anchor"].value:"start";g=a.attributes["font-size"]?a.attributes["font-size"].value:g;E=Number(E)+Number(k);r=Number(r)+Number(m);N=N.trim();B="middle"==B?"center":B;u.save();u.font=L+" "+g+" "+n;u.textAlign=B;if("draw"===M){if(!a.attributes.fill||a.attributes.fill&&"none"!=a.attributes.fill.value)A.applyFillEffect(a,u,q,l),u.fillText(N,E,r),A.endFillEffect(a,u);if(!a.attributes.stroke||a.attributes.stroke&&"none"!=a.attributes.stroke.value)A.applyStrokeEffect(a,u,q,l),u.strokeText(N,
E,r),A.endStrokeEffect(a,u)}u.restore();"function"===typeof H&&H()};H.drawcircle=function(a,b,q,u,v){var N=Number(a.attributes.cx.value),E=Number(a.attributes.cy.value),r=Number(a.attributes.r.value),k=[];b.beginPath();b.arc(N,E,r,0,2*Math.PI);A.bBoxFromPoint([N,1*N+1*r,1*N-1*r],[E,1*E+1*r,1*E-1*r],k);if("draw"===u){if(!a.attributes.fill||a.attributes.fill&&"none"!=a.attributes.fill.value)A.applyFillEffect(a,b,q,k),b.fill(),A.endFillEffect(a,b);if(!a.attributes.stroke||a.attributes.stroke&&"none"!=
a.attributes.stroke.value)A.applyStrokeEffect(a,b,q,k),b.stroke(),A.endStrokeEffect(a,b)}b.closePath();"function"===typeof v&&v()};H.drawrect=function(a,b,q,u,v){var N=Number(a.attributes.x.value),E=Number(a.attributes.y.value),r=a.attributes.rx?Number(a.attributes.rx.value):0,k=a.attributes.ry?Number(a.attributes.ry.value):0,m=Number(a.attributes.height.value),n=Number(a.attributes.width.value),L=[];A.bBoxFromPoint([N,N+n],[E,E+m],L);b.beginPath();b.moveTo(N+r,E);b.lineTo(N+n-r,E);b.quadraticCurveTo(N+
n,E,N+n,E+k);b.lineTo(N+n,E+m-k);b.quadraticCurveTo(N+n,E+m,N+n-r,E+m);b.lineTo(N+r,E+m);b.quadraticCurveTo(N,E+m,N,E+m-k);b.lineTo(N,E+k);b.quadraticCurveTo(N,E,N+r,E);if("draw"===u){if(!a.attributes.fill||a.attributes.fill&&"none"!=a.attributes.fill.value)A.applyFillEffect(a,b,q,L),b.fill(),A.endFillEffect(a,b);if(!a.attributes.stroke||a.attributes.stroke&&"none"!=a.attributes.stroke.value)A.applyStrokeEffect(a,b,q,L),b.stroke(),A.endStrokeEffect(a,b)}b.closePath();"function"===typeof v&&v()};H.drawellipse=
function(a,b,q,u,v){var N=Number(a.attributes.cx.value),E=Number(a.attributes.cy.value),r=Number(a.attributes.rx.value),k=Number(a.attributes.ry.value),m=.5522848*r,n=.5522848*k,L=N+r,g=E+k,l=[];b.beginPath();b.moveTo(N-r,E);b.bezierCurveTo(N-r,E-n,N-m,E-k,N,E-k);b.bezierCurveTo(N+m,E-k,L,E-n,L,E);b.bezierCurveTo(L,E+n,N+m,g,N,g);b.bezierCurveTo(N-m,g,N-r,E+n,N-r,E);A.bBoxFromPoint([N+r,N-r],[E+k,E-k],l);if("draw"===u){if(!a.attributes.fill||a.attributes.fill&&"none"!=a.attributes.fill.value)A.applyFillEffect(a,
b,q,l),b.fill(),A.endFillEffect(a,b);if(!a.attributes.stroke||a.attributes.stroke&&"none"!=a.attributes.stroke.value)A.applyStrokeEffect(a,b,q,l),b.stroke(),A.endStrokeEffect(a,b)}b.closePath();"function"===typeof v&&v()};H.drawimage=function(a,b,q,u,v){var N=a.attributes.x?Number(a.attributes.x.value):0,E=a.attributes.y?Number(a.attributes.y.value):0,r=a.attributes.height?Number(a.attributes.height.value):0,k=a.attributes.width?Number(a.attributes.width.value):0,m,n=q._getStore("imageArr");b.save();
a.attributes.opacity&&(b.globalAlpha=a.attributes.opacity.value);a.attributes["xlink:href"]?(m=a.attributes["xlink:href"].value,"complete"===n[m].status?(b.drawImage(n[m].obj,N,E,k,r),b.globalAlpha=1,b.restore(),"function"===typeof v&&v()):"error"===n[m].status?(b.globalAlpha=1,b.restore(),"function"===typeof v&&v()):"progress"===n[m].status?(n[m].callback=function(){b.drawImage(n[m].obj,N,E,k,r);b.globalAlpha=1;b.restore();"function"===typeof v&&v()},n[m].errCallback=function(){b.globalAlpha=1;b.restore();
"function"===typeof v&&v()}):(b.globalAlpha=1,b.restore(),"function"===typeof v&&v())):(b.globalAlpha=1,b.restore(),"function"===typeof v&&v())};H.drawpath=function(a,b,q,u,v){var N=a.attributes.d.value.match(/[a-z][^a-z"]*/ig),E=[],r,k,m,n=0,L=0,g;b.beginPath();for(r in N)if(N.hasOwnProperty(r))switch(k=N[r].substring(0,1),m=A.getArgsAsArray(N[r].substring(1,N[r].length)),k){case "M":n=Number(m[0]);L=Number(m[1]);b.moveTo(n,L);break;case "m":n+=Number(m[0]);L+=Number(m[1]);b.moveTo(n,L);break;case "L":for(g=
0;m[g];g+=2)A.bBoxFromPoint([n,m[g]],[L,m[g+1]],E),n=Number(m[g]),L=Number(m[g+1]),b.lineTo(n,L);break;case "l":for(g=0;m[g];g+=2)A.bBoxFromPoint([n,1*n+1*m[g]],[L,1*L+1*m[g+1]],E),n+=Number(m[g]),L+=Number(m[g+1]),b.lineTo(n,L);break;case "V":for(g=0;m[g];g+=1)A.bBoxFromPoint([n],[L,m[g]],E),L=Number(m[g]),b.lineTo(n,L);break;case "v":for(g=0;m[g];g+=1)A.bBoxFromPoint([n],[L,1*L+1*m[g]],E),L+=Number(m[g]),b.lineTo(n,L);break;case "H":for(g=0;m[g];g+=1)A.bBoxFromPoint([n,m[g]],[L],E),n=Number(m[g]),
b.lineTo(n,L);break;case "h":for(g=0;m[g];g+=1)A.bBoxFromPoint([n,1*n+1*m[g]],[L],E),n+=Number(m[g]),b.lineTo(n,L);break;case "Q":for(g=0;m[g];g+=4)A.qBezierBBox(n,L,m[g],m[g+1],m[g+2],m[g+3],E),b.quadraticCurveTo(Number(m[g]),Number(m[g+1]),Number(m[g+2]),Number(m[g+3])),n=Number(m[g+2]),L=Number(m[g+3]);break;case "q":for(g=0;m[g];g+=4)A.qBezierBBox(n,L,n+1*m[g],L+1*m[g+1],1*n+1*m[g+2],1*L+1*m[g+3],E),b.quadraticCurveTo(n+1*m[g],L+1*m[g+1],n+=Number(m[g+2]),L+=Number(m[g+3]));break;case "C":for(g=
0;m[g];g+=6)A.cBezierBBox(n,L,m[g],m[g+1],m[g+2],m[g+3],m[g+4],m[g+5],E),b.bezierCurveTo(m[g],m[g+1],m[g+2],m[g+3],m[g+4],m[g+5]),n=Number(m[g+4]),L=Number(m[g+5]);break;case "c":for(g=0;m[g];g+=6)A.cBezierBBox(n,L,n+1*m[g],1*L+1*m[g+1],n+1*m[g+2],1*L+1*m[g+3],n+1*m[g+4],1*L+1*m[g+5],E),b.bezierCurveTo(n+Number(m[g]),L+Number(m[g+1]),n+Number(m[g+2]),L+Number(m[g+3]),n+=Number(m[g+4]),L+=Number(m[g+5]));break;case "a":case "A":for(g=0;m[g];g+=7){var l=Number(m[g]),B=Number(m[g+1]),e,V,p,T,K,t,Z,P,
S,z,R,w,F,X;e=Math.PI/180*Number(m[g+2]);V=Number(m[g+3]);p=Number(m[g+4]);T=Number(m[g+5]);K=Number(m[g+6]);t=Math.cos(e)*(n-T)/2+Math.sin(e)*(L-K)/2;Z=-Math.sin(e)*(n-T)/2+Math.cos(e)*(L-K)/2;l=0>l?-l:l;B=0>B?-B:B;w=Math.pow(t,2)/Math.pow(l,2)+Math.pow(Z,2)/Math.pow(B,2);1<w&&(l*=Math.sqrt(w),B*=Math.sqrt(w));w=l>B?l:B;F=l>B?1:l/B;X=l>B?B/l:1;V=(V==p?-1:1)*Math.sqrt((Math.pow(l,2)*Math.pow(B,2)-Math.pow(l,2)*Math.pow(Z,2)-Math.pow(B,2)*Math.pow(t,2))/(Math.pow(l,2)*Math.pow(Z,2)+Math.pow(B,2)*Math.pow(t,
2)));isNaN(V)&&(V=0);P=V*l*Z/B;S=-V*B*t/l;z=P*Math.cos(e)-S*Math.sin(e)+(n+T)/2;R=P*Math.sin(e)+S*Math.cos(e)+(L+K)/2;V=A.angleBetweenVectors(1,0,(t-P)/l,(Z-S)/B);t=A.angleBetweenVectors((t-P)/l,(Z-S)/B,(-t-P)/l,(-Z-S)/B);0===p&&0<t&&(t-=Math.PI/180*360);1==p&&0>t&&(t+=Math.PI/180*360);if(0===l&&0===B){b.lineTo(T,K);break}b.save();l=A.combineTransformMatrix([[1,0,z,0,1,R],[Math.cos(e),Math.sin(e),0,Math.sin(e),Math.cos(e),0],[F,0,0,0,X,0]]);b.transform(l[0],l[3],l[1],l[4],l[2],l[5]);b.arc(0,0,w,V,
V+t,1-p);b.restore();A.arcBBox(0,0,w,V,V+t,1-p,[l[0],l[3],l[1],l[4],l[2],l[5]],E);"A"==k?(n=Number(m[g+5]),L=Number(m[g+6])):(n+=Number(m[g+5]),L+=Number(m[g+6]))}break;case "Z":case "z":b.closePath()}if("draw"===u){if(!a.attributes.fill||a.attributes.fill&&"none"!=a.attributes.fill.value)A.applyFillEffect(a,b,q,E),b.fill(),A.endFillEffect(a,b);if(!a.attributes.stroke||a.attributes.stroke&&"none"!=a.attributes.stroke.value)A.applyStrokeEffect(a,b,q,E),b.stroke(),A.endStrokeEffect(a,b);v()}};A.drawNodes=
function(a,b,q,u,v){var N=a.length,E=-1,r=0,k=0,m=function(){var n;E+=1;E<N?(n=a[E],n.tagName&&"defs"===n.tagName&&(E+=1,n=a[E]),n.attributes&&(n.attributes.dy&&(k=n.attributes.dy.value=1*n.attributes.dy.value+1*k),n.attributes.dx&&(r=n.attributes.dx.value=1*n.attributes.dx.value+1*r)),H.common(n,b,q,u,m)):v&&v()};m()};A.getSvgDimention=function(a){var b={width:0,height:0};node=a.childNodes&&a.childNodes[0]&&a.childNodes[0].attributes;b.width=Number(node.width&&node.width.value||0);b.height=Number(node.height&&
node.height.value||0);return b};A.storeImagesInArr=function(a){var b=a.getSVG(),q,u;q=a._getStore("imageArr");a=b.getElementsByTagName("image");for(u in a)a.hasOwnProperty(u)&&a[u].attributes&&a[u].attributes["xlink:href"]&&(b=a[u].attributes["xlink:href"].value,q[b]||(q[b]=[],q[b].status="progress",q[b].callback=null,q[b].obj=new Image,q[b].obj.onload=function(a){return function(){var b=q[a].callback;b?(q[a].status="complete",b()):q[a].status="complete"}}(b),q[b].obj.onerror=function(a){return function(){var b=
q[a].errCallback;b?(q[a].status="error",b()):q[a].status="error"}}(b),q[b].obj.src=b))};A.startTransform=function(a,b){var q=a.match(/[^\s][a-z,0-9.\-(\s]+\)/gi),u,v;for(v in q)q.hasOwnProperty(v)&&(-1<q[v].indexOf("matrix")&&(u=A.stringToArgs(q[v]),b.transform(u[0],u[1],u[2],u[3],u[4],u[5])),-1<q[v].indexOf("translate")&&(u=A.stringToArgs(q[v]),b.translate(u[0]||0,u[1]||0)),-1<q[v].indexOf("rotate")&&(u=A.stringToArgs(q[v]),3==u.length?(b.translate(u[1],u[2]),b.rotate(Math.PI/180*u[0]),b.translate(-u[1],
-u[2])):b.rotate(Math.PI/180*u[0])),-1<q[v].indexOf("scale")&&(u=A.stringToArgs(q[v]),1==u.length?b.scale(u[0]||1,u[0]||1):b.scale(u[0]||1,u[1]||1)),-1<q[v].indexOf("skewX")&&(u=A.stringToArgs(q[v]),b.transform(1,0,Math.tan(Math.PI/180*u[0]),1,0,0)),-1<q[v].indexOf("skewY")&&(u=A.stringToArgs(q[v]),b.transform(1,Math.tan(Math.PI/180*u[0]),0,1,0,0)))};A.resetTransform=function(a){a.setTransform(1,0,0,1,0,0)};A.stringToArgs=function(a){a=/\(([^\)]+)/.exec(a)[1];return A.getArgsAsArray(a)};A.getArgsAsArray=
function(a){var b;a=a.trim().split(/[\s,]+/);for(b=0;b<a.length;b++)a[b].trim(),0===a[b].length&&a.splice(b,1);return a};A.applyFillEffect=function(a,b,q,u){b.globalAlpha=a.attributes["fill-opacity"]&&"none"!=a.attributes["fill-opacity"].value?a.attributes["fill-opacity"].value:1;a.attributes.fill&&-1<a.attributes.fill.value.indexOf("url(")?(a=A.getFillStyleById(/url\(.*#([^\)'"]+)/.exec(a.attributes.fill.value)[1],b,q,u),b.fillStyle=a):b.fillStyle=a.attributes.fill?a.attributes.fill.value:"#000000"};
A.endFillEffect=function(a,b){b.globalAlpha=1};A.applyStrokeEffect=function(a,b,q,u){a.attributes["stroke-opacity"]&&"none"!=a.attributes["stroke-opacity"].value&&(b.globalAlpha=a.attributes["stroke-opacity"].value);a.attributes["stroke-width"]&&(b.lineWidth=a.attributes["stroke-width"].value,0===a.attributes["stroke-width"].value&&(b.globalAlpha=0));a.attributes["stroke-linecap"]&&"none"!=a.attributes["stroke-linecap"].value&&(b.lineCap=a.attributes["stroke-linecap"].value);a.attributes["stroke-linejoin"]&&
"none"!=a.attributes["stroke-linejoin"].value&&(b.lineJoin=a.attributes["stroke-linejoin"].value);a.attributes["stroke-dasharray"]&&"none"!=a.attributes["stroke-dasharray"].value&&b.setLineDash&&b.setLineDash(A.getArgsAsArray(a.attributes["stroke-dasharray"].value));b.strokeStyle=a.attributes.stroke?a.attributes.stroke.value:"#000000"};A.endStrokeEffect=function(a,b){a.attributes["stroke-opacity"]&&"none"!=a.attributes["stroke-opacity"].value&&(b.globalAlpha=1,b.setLineDash&&b.setLineDash([]),b.lineWidth=
1);b.globalAlpha=1};A.applyClip=function(a,b,q){var u=q.getSVG(),v,N;if(-1!==a.indexOf("url(")){a=/url\(.*#([^\)'"]+)/.exec(a)[1];u=u.getElementById(a);u.attributes&&(b.save(),u.attributes.transform&&A.startTransform(u.attributes.transform.value,b));a=u.childNodes;for(v in a)a.hasOwnProperty(v)&&a[v].tagName&&a[v].constructor!==Array&&(N="draw"+a[v].tagName,a[v].attributes&&(b.save(),a[v].attributes.transform&&A.startTransform(a[v].attributes.transform.value,b)),H[N]&&(H[N](a[v],b,q,"clip"),b.closePath()),
a[v].attributes&&b.restore());u.attributes&&b.restore();b.clip()}};A.getFillStyleById=function(a,b,q,u){a=q.getSVG().getElementById(a);return"linearGradient"==a.tagName?A.getLinearGradient(a,b,u):"radialGradient"==a.tagName?A.getRadialGradient(a,b,u):"#FFFFFF"};A.getLinearGradient=function(a,b,q){var u=a.attributes.x1?A.getPercentValue(a.attributes.x1.value,q.xMax-q.xMin,q.xMin):0,v=a.attributes.y1?A.getPercentValue(a.attributes.y1.value,q.yMax-q.yMin,q.yMin):0,N=a.attributes.x2?A.getPercentValue(a.attributes.x2.value,
q.xMax-q.xMin,q.xMin):0;q=a.attributes.y2?A.getPercentValue(a.attributes.y2.value,q.yMax-q.yMin,q.yMin):0;var E;linGrad=b.createLinearGradient(u,v,N,q);a=a.childNodes;for(E in a)a.hasOwnProperty(E)&&a[E].attributes&&a[E].attributes["stop-color"]&&(b=A.toRGB(a[E].attributes["stop-color"].value),u=a[E].attributes["stop-opacity"]?a[E].attributes["stop-opacity"].value:1,b.status?linGrad.addColorStop(A.getPercentValue(a[E].attributes.offset.value,1,0),"rgba("+b.r+","+b.g+","+b.b+","+Number(u)+")"):linGrad.addColorStop(A.getPercentValue(a[E].attributes.offset.value,
1,0),a[E].attributes["stop-color"].value));return linGrad};A.getRadialGradient=function(a,b,q){var u=a.attributes.cx?A.getPercentValue(a.attributes.cx.value,q.xMax-q.xMin,q.xMin):q.xMin+.5*(q.xMax-q.xMin),v=a.attributes.cy?A.getPercentValue(a.attributes.cy.value,q.yMax-q.yMin,q.yMin):q.yMin+.5*(q.yMax-q.yMin),N=a.attributes.fx?A.getPercentValue(a.attributes.fx.value,q.xMax-q.xMin,q.xMin):q.xMin+.5*(q.xMax-q.xMin),E=a.attributes.fy?A.getPercentValue(a.attributes.fy.value,q.yMax-q.yMin,q.yMin):q.yMin+
.5*(q.yMax-q.yMin);q=a.attributes.r?A.getPercentValue(a.attributes.r.value,(q.yMax-q.yMin+q.xMax-q.xMin)/2,0):A.getPercentValue("50%",(q.yMax-q.yMin+q.xMax-q.xMin)/2,0);var r;b=b.createRadialGradient(N,E,0,u,v,q);a=a.childNodes;for(r in a)a.hasOwnProperty(r)&&a[r].attributes&&a[r].attributes["stop-color"]&&(u=A.toRGB(a[r].attributes["stop-color"].value),v=a[r].attributes["stop-opacity"]?a[r].attributes["stop-opacity"].value:1,u.status?b.addColorStop(A.getPercentValue(a[r].attributes.offset.value,
1,0),"rgba("+u.r+","+u.g+","+u.b+","+Number(v)+")"):b.addColorStop(A.getPercentValue(a[r].attributes.offset.value,1,0),a[r].attributes["stop-color"].value));return b};A.getPercentValue=function(a,b,q){return-1!=a.indexOf("%")?(a=/(\d.*)%/.exec(a)[1],100<a&&(a=100),a*b/100+1*q):1<a?a:a*b+1*q};A.bBoxFromPoint=function(a,b,q){"undefined"!==typeof q.xMin&&(a.push(q.xMin,q.xMax),b.push(q.yMin,q.yMax));q.xMin=Math.min.apply(this,a);q.xMax=Math.max.apply(this,a);q.yMin=Math.min.apply(this,b);q.yMax=Math.max.apply(this,
b)};A.arcBBox=function(a,b,q,u,v,N,E,r){var k,m,n;E instanceof Array&&(a=a*E[0]+a*E[2]+E[4],b=b*E[1]+b*E[3]+E[5]);n=function(a,b,l){a=(a+2*Math.PI)%(2*Math.PI);b=(b+2*Math.PI)%(2*Math.PI);if(a<=b)return a<=l&&l<=b?!0:!1;if(a>=b)return a>=l&&l>=b?!1:!0};E=u%(2*Math.PI);k=v%(2*Math.PI);N&&(E=v%(2*Math.PI),k=u%(2*Math.PI));N=a+q*Math.cos(E);u=b+q*Math.sin(E);m=a+q*Math.cos(k);v=b+q*Math.sin(k);N=[N,m];u=[u,v];n(E,k,0)&&(N.push(1*a+1*q),u.push(b));n(E,k,.5*Math.PI)&&(N.push(a),u.push(1*b+1*q));n(E,k,
Math.PI)&&(N.push(a-1*q),u.push(b));n(E,k,1.5*Math.PI)&&(N.push(a),u.push(b-1*q));a=Math.max.apply(this,N);b=Math.min.apply(this,N);q=Math.max.apply(this,u);E=Math.min.apply(this,u);"undefined"!==typeof r.xMin?(r.xMin=Math.min(b,r.xMin),r.xMax=Math.max(a,r.xMax),r.yMin=Math.min(E,r.yMin),r.yMax=Math.max(q,r.yMax)):(r.xMin=b,r.xMax=a,r.yMin=E,r.yMax=q)};A.qBezierBBox=function(a,b,q,u,v,N,E){var r=1*a-2*q+1*v,k=1*b-2*u+1*N;0===r||0===k?(u=Math.max(a,v),a=Math.min(a,v),v=Math.max(b,N),b=Math.min(b,N)):
(r=(a-q)/r,k=(b-u)/k,q=a*Math.pow(1-r,2)+2*q*(1-r)*r+v*Math.pow(r,2),k=b*Math.pow(1-k,2)+2*u*(1-k)*k+N*Math.pow(k,2),u=Math.max(a,v,q),a=Math.min(a,v,q),v=Math.max(b,N,k),b=Math.min(b,N,k));"undefined"!==typeof E.xMin?(E.xMin=Math.min(a,E.xMin),E.xMax=Math.max(u,E.xMax),E.yMin=Math.min(b,E.yMin),E.yMax=Math.max(v,E.yMax)):(E.xMin=a,E.xMax=u,E.yMin=b,E.yMax=v)};A.cBezierBBox=function(a,b,q,u,v,N,E,r,k){var m,n,L,g,l,B,e;null===v&&null===N&&(q=a+2/3*(q-a),v=b+2/3*(u-b),u=q+1/3*(E-a),N=v+1/3*(r-b));
e=function(a,b,e,l,g){return a*Math.pow(1-g,3)+3*b*g*Math.pow(1-g,2)+3*e*g*g*(1-g)+l*g*g*g};L=3*E-9*v+9*q-3*a;g=6*a-12*q+6*v;l=Math.pow(g,2)-4*L*(3*q-3*a);n=m=a;E<m&&(m=E);E>n&&(n=E);0<=l&&(B=(-g+Math.sqrt(l))/(2*L),0<B&&1>B&&(B=e(a,q,v,E,B),B<m&&(m=B),B>n&&(n=B)),L=(-g-Math.sqrt(l))/(2*L),0<L&&1>L&&(B=e(a,q,v,E,L),B<m&&(m=B),B>n&&(n=B)));L=3*r-9*N+9*u-3*b;g=6*b-12*u+6*N;l=Math.pow(g,2)-4*L*(3*u-3*b);q=a=b;r<a&&(a=r);r>q&&(q=r);0<=l&&(B=(-g+Math.sqrt(l))/(2*L),0<B&&1>B&&(v=e(b,u,N,r,B),v<a&&(a=v),
v>q&&(q=v)),L=(-g-Math.sqrt(l))/(2*L),0<L&&1>L&&(v=e(b,u,N,r,L),v<a&&(a=v),v>q&&(q=v)));"undefined"!==typeof k.xMin?(k.xMin=Math.min(m,k.xMin),k.xMax=Math.max(n,k.xMax),k.yMin=Math.min(a,k.yMin),k.yMax=Math.max(q,k.yMax)):(k.xMin=m,k.xMax=n,k.yMin=a,k.yMax=q)};A.combineTransformMatrix=function(a){var b=a.length-1,q;if(0>=b)return a[0];q=a[0];for(i=1;i<=b;i++)q[0]=q[0]*a[i][0]+q[1]*a[i][3],q[1]=q[0]*a[i][1]+q[1]*a[i][4],q[2]=q[0]*a[i][2]+q[1]*a[i][5]+1*q[2],q[3]=q[3]*a[i][0]+q[4]*a[i][3],q[4]=q[3]*
a[i][1]+q[4]*a[i][4],q[5]=q[3]*a[i][2]+q[4]*a[i][5]+1*q[5];return q};A.angleBetweenVectors=function(a,b,q,u){return(a*u<b*q?-1:1)*Math.acos((a*q+b*u)/(Math.sqrt(Math.pow(a,2)+Math.pow(b,2))*Math.sqrt(Math.pow(q,2)+Math.pow(u,2))))};A.toRGB=function(a){var b={r:0,g:0,b:0,status:0},q,u;q=function(a){for(u in a)a.hasOwnProperty(u)&&(0>a[u]||isNaN(a[u])?a[u]=0:255<a[u]&&(a[u]=255));return b={r:a[0],g:a[1],b:a[2],status:1}};a=a.trim();a.match(/^rgb\(|^rgba\(/i)?(a=/\(\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})/.exec(a),
q([parseInt(a[1]),parseInt(a[2]),parseInt(a[3])])):a.match(/^#/)&&(a=/(\w{2})(\w{2})(\w{2})/.exec(a),q([parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]));return b};A.StrToDom=function(a){var u;b.DOMParser?(u=new DOMParser,u=u.parseFromString(a,"text/xml")):(u=new ActiveXObject("Microsoft.XMLDOM"),u.async=!1,u.loadXML(a));return u};b.SvgDeCanvo=u})(this.window||window);b.SvgDeCanvo&&(v.SvgDeCanvo=b.SvgDeCanvo,b.SvgDeCanvo=void 0)}]);Q.register("module",["private","modules.renderer.js-lib-attr",
function(){var b={},v=this.hcLib||(this.hcLib={}),J=Math.max,C=v.attrTypeNum=1,H=v.attrTypeBool=2;v.parseConfiguration=function(A,u,a,J,q,M){var U=v.attribDefs||b,N,E,r,k=1,m;J=J||b;M=M||b;q=q||{};for(N in A)if(!J[N]&&((E=A[N])||!1===E||0===E))switch(r=(m=M[N]||U[N])&&m.type,r){case C:E=Number(E);isNaN(E)||(u[N]=E);break;case H:E=Number(E);isNaN(E)||(u[N]=!!E);break;default:u[N]=E}if(a)for(N in u)void 0===u[N]&&(m=M[N]||U[N])&&m.pAttr&&(u[N]=a[m.pAttr]);for(;k;)for(N in k=0,u)void 0===u[N]&&(m=M[N]||
U[N])&&(m.attr?void 0!==(E=u[m.attr])&&(u[N]=E,k+=1):m.parser&&void 0!==(E=m.parser(u,a,q))&&(u[N]=E,k+=1))};v.setAttribDefs=function(b,u){var a=v.attribDefs,C,q;"string"===typeof b?(C={},C[b]=u):C=b;for(q in C)a[q]||(a[q]=C[q])};v.hasAttribDefs=function(b){return!!v.attribDefs[b]};v.attribDefs={setBorderWidth:{type:C,pAttr:"plotborderthickness"},plotborderthickness:{type:C,pAttr:"plotborderthickness"},showBorderEffect:{parser:function(b,u){return 1===+u.showplotborder&&.1===u.plotborderthickness?
1:0}},alphaanimation:{type:C},showplotborder:{type:C,pAttr:"showplotborder"},zeroplanethickness:{type:C},showzeroplaneontop:{type:C},stickytracking:{type:C},usemessagelog:{type:C},showtooltip:{type:C,pAttr:"showtooltip"},seriesnameintooltip:{type:C},plothovereffect:{type:C,attr:"anchorhovereffect"},anchorhovereffect:{type:C,attr:"showhovereffect"},showhovereffect:{type:C,attr:"drawcrossline"},drawcrossline:{type:C},linethickness:{type:C,pAttr:"linethickness"},dashed:{type:C,pAttr:"linedashed"},linedashed:{type:C,
attr:"plotborderdashed"},plotborderdashed:{type:C,pAttr:"plotborderdashed"},linedashlen:{type:C,pAttr:"linedashlen"},linedashgap:{type:C,pAttr:"linedashgap"},anchoralpha:{pAttr:"anchoralpha"},anchorsides:{type:C,pAttr:"anchorsides"},anchorradius:{type:C,pAttr:"anchorradius"},anchorbgalpha:{pAttr:"anchorbgalpha"},anchorbgcolor:{pAttr:"anchorbgcolor"},anchorbordercolor:{pAttr:"anchorbordercolor"},anchorstartangle:{type:C,pAttr:"anchorstartangle"},anchorimageurl:{pAttr:"anchorimageurl"},anchorimagescale:{type:C,
pAttr:"anchorimagescale"},anchorimagealpha:{pAttr:"anchorimagealpha"},anchorimagepadding:{type:C,pAttr:"anchorimagepadding"},anchorborderthickness:{type:C,pAttr:"anchorborderthickness"},anchorshadow:{type:C,pAttr:"anchorshadow"},valuepadding:{type:C,pAttr:"valuepadding"},valueposition:{pAttr:"valueposition"},plotfillangle:{type:C,pAttr:"plotfillangle"},useplotgradientcolor:{type:C},rotatevalues:{type:C,pAttr:"rotatevalues"},includeinlegend:{type:C},connectnulldata:{type:C},plotfillalpha:{pAttr:"plotfillalpha"},
alpha:{pAttr:"linealpha"},linealpha:{pAttr:"plotfillalpha"},showvalues:{type:C,pAttr:"showvalues"},showpercentvalues:{type:C,parser:function(b){return b.isstacked&&b.stack100percent?1:0}},showpercentintooltip:{type:C,parser:function(b){return b.isstacked&&b.stack100percent?1:0}},stack100percent:{type:C,attr:"usepercentdistribution"},drawfullareaborder:{type:C},use3dlineshift:{type:C},parentyaxis:{type:C},radarborderthickness:{type:C},radarborderradius:{type:C},gaugeoriginx:{type:C},hasgaugeoriginx:{attr:"gaugeoriginx"},
gaugeoriginy:{type:C},hasgaugeoriginy:{attr:"gaugeoriginy"},gaugeradius:{type:C},hasgaugeradius:{attr:"gaugeradius"},showgaugeborder:{type:C},setAdaptiveMin:{type:C},adjustDiv:{type:C},axisNameWidth:{type:C},rotateAxisName:{type:C},useEllipsesWhenOverflow:{type:C},showZeroPlane:{type:C},zeroPlaneAlpha:{type:C},showZeroPlaneValue:{type:C},zeroPlaneOnTop:{type:C},trendlineThickness:{type:C},showTrendlinesOnTop:{type:C},trendlinesAreDashed:{type:C},trendlinesDashLen:{type:C},trendlinesDashGap:{type:C},
showTrendlines:{type:C},showTrendlineLabels:{type:C},showLabels:{type:C},rotateLabels:{type:C},slantLabel:{type:C},showAxisValues:{type:C},showTooltip:{type:C},maxLabelHeight:{type:C},useroundedges:{type:C,pAttr:"useroundedges"},placevaluesinside:{type:C},plotpaddingpercent:{type:C},use3dlighting:{type:C,pAttr:"use3dlighting"},usedataplotcolorforlabels:{type:C},plotspacepercent:{type:C,parser:function(b){return J(b.plotspacepercent%100,0)}},ratio:{pAttr:"plotfillratio"},base:{type:C},showMinorDivLineValues:{type:C},
numMinorDivLines:{type:C},majorTMNumber:{type:C},majorTMHeight:{type:C},showTickMarks:{type:C},majorTMThickness:{type:C},adjustTM:{type:H},minorTMNumber:{type:C},minorTMThickness:{type:C},tickMarkDistance:{type:C},placeTicksInside:{type:C},placeValuesInside:{type:C},axisValuePadding:{type:C},gridLineWidth:{type:C},showRadarBorder:{type:C},radarBorderThickness:{type:C},maxcolwidth:{type:C,parser:function(b){return Math.abs(b.maxcolwidth)}},maxbarheight:{type:C,parser:function(b){return Math.abs(b.maxbarheight)}},
plotborderalpha:{parser:function(b,u){return u.plotborderalpha||b.plotfillalpha}},autoscale:{type:C},plotborderdashlen:{type:C,pAttr:"plotborderdashlen"},plotborderdashgap:{type:C,pAttr:"plotborderdashgap"},plotfillratio:{pAttr:"plotfillratio"},drawverticaljoins:{type:C,pAttr:"drawverticaljoins"},useforwardsteps:{type:C,pAttr:"useforwardsteps"},minimizetendency:{type:C},usepercentdistribution:{type:C},stepatmiddle:{type:C}}}]);Q.register("module",["private","modules.renderer.js-lib",function(){var b=
this,v=b.window,J=b.core,C,H,A,u="https:"===v.location.protocol?"https://export.api3.fusioncharts.com/":"http://export.api3.fusioncharts.com/",a="https:"===v.location.protocol?"https://export.api3.fusioncharts.com/api/v1.0/logs":"http://export.api3.fusioncharts.com/api/v1.0/logs",O={DOWNLOAD:"download",SAVE:"save",DOWNLOADSAVE:"download-save"},q={CLIENT:"client",SERVER:"server",AUTO:"auto"},M=v.document,U=v.navigator,N=!(!v.SVGAngle&&!M.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure",
"1.1")),E=/msie/i.test(U.userAgent)&&!v.opera,r=/trident/i.test(U.userAgent)&&/rv:11/i.test(U.userAgent)&&!v.opera,k=v.parseFloat,m=/\s+/g,n=/^#?/,L=/^rgba/i,g=/[#\s]/ig,l=/\{br\}\s*/ig,B=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,e=Math.abs,V=Math.pow,p=Math.round,T=V(2,-24),K=Object.prototype.toString,t="ontouchstart"in M,Z=t&&!(U.maxTouchPoints||U.msMaxTouchPoints),P="http://www.fusioncharts.com?BS=FCHSEvalMark&utm_source=FCS_trial&pver="+escape(b.core.version),S=/fusioncharts\.com|fusioncharts\.github\.io$/i,
z=!S.test(v.location.hostname),R=Math,w=R.max,F=R.min,X=v.Image,h={pageX:0,pageY:0},d="createTouch"in M,f=d&&!(v.navigator.maxTouchPoints||v.navigator.msMaxTouchPoints),c=b.hcLib||(b.hcLib={}),D=c.SvgDeCanvo,G=function(c){var a=c.data,d=a.chart,f=d.components.paper,h=c.state,b=ka(ra(c.originalEvent)),I=b.target||b.originalTarget||b.srcElement||b.relatedTarget||b.fromElement,l=d.components.resizeBox,g=a.layerX=b.pageX-a.chartPosLeft,D=a.layerY=b.pageY-a.chartPosTop,G=g-a.ox,k=D-a.oy,t=a.bBox,ba=a.ox,
Ba=a.oy,p=a.zoomX,m=a.zoomY,t=a.canvasY,z=a.canvasX,B=a.canvasW,Oa=a.canvasH,aa=a.canvasX2,K=a.canvasY2,n=a.strokeWidth,G=a.attr;switch(h){case "start":c=sa(this);a.chartPosLeft=c.left;a.chartPosTop=c.top;g=b.pageX-a.chartPosLeft;D=b.pageY-a.chartPosTop;a.oy=D;a.ox=g;a.allowMove=!1;l||(l=d.components.resizeBox=f.rect(d.graphics.trackerGroup).attr(G));g>z&&g<aa&&D>t&&D<K&&(a.allowMove=!0);I&&I.ishot&&(a.allowMove=!1);l.attr({x:0,y:0,width:0,height:0}).show();break;case "end":t=l.getBBox();d={chart:d,
selectionLeft:t.x,selectionTop:t.y,selectionHeight:t.height,selectionWidth:t.width,originalEvent:c.originalEvent};a.isDragged&&(a.selectionEnd&&a.selectionEnd(d),a.isDragged=0);l.hide();delete a.oy;delete a.ox;break;default:a.allowMove&&(G=g-a.ox,k=D-a.oy,ba=a.ox,Ba=a.oy,a.isDragged||(d={chart:d,selectionLeft:(p?F(ba,ba+G):z)+.5*n,selectionTop:(m?F(Ba,Ba+k):t)+.5*n,selectionHeight:0,selectionWidth:0,originalEvent:c.originalEvent},a.selectionStart&&a.selectionStart(d),a.isDragged=1),G=-(ba-F(ba-(ba-
w(ba+G,z)),aa)),k=-(Ba-F(Ba-(Ba-w(Ba+k,t)),K)),l.attr({x:(p?F(ba,ba+G):z)+.5*n,y:(m?F(Ba,Ba+k):t)+.5*n,width:p?e(G):B,height:m?e(k):Oa}))}},aa=function(c){var a=c.data;c=c.originalEvent;var d=c.target||c.originalTarget||c.srcElement||c.relatedTarget||c.fromElement,f=c.type,h=c.layerX,b=c.layerY;void 0===h&&(h=c.pageX-a.chartPosLeft,b=c.pageY-a.chartPosTop);"mousedown"===f&&(d.ishot=h>a.canvasX&&h<a.canvasX2&&b>a.canvasY&&b<a.canvasY2);"mouseup"===f&&setTimeout(function(){d.ishot=!1},1)},Ra=function(){var c=
"innerWidth",a="innerHeight",d=M.documentElement||M.body,f=d;"innerWidth"in v?f=v:(c="clientWidth",a="clientHeight");return function(){return{width:f[c],height:f[a],scrollTop:d.scrollTop,scrollLeft:d.scrollLeft}}}(),Ia=function(c){c.data&&(c.data.elScroll=!1)},sa=function(a,d,f){d={top:0,left:0};var h,e,I,l,g,D;f&&(I=f.config,l=f.linkedItems,l=l.eventListeners||(l.eventListeners=[]),D=I.isEvntAdded||(I.isEvntAdded=!1));if(a){if(b._fullScreenMode)d=a.getBoundingClientRect();else{d.top=a.offsetTop;
d.left=a.offsetLeft;for(h=a;(h=h.parentNode)&&"BODY"!==h.tagName;)f&&(e=v.getComputedStyle(h).getPropertyValue("position"),/fixed/.test(e)&&(g=!0)),d.top-=h.scrollTop||0,d.left-=h.scrollLeft||0,f&&!D&&l.push(va(h,"scroll",Ia,I));f&&(I.itemFixed=g,c.toolTip.inform(f.chartInstance.id,g));for(;h;)d.top-=h.scrollTop||0,d.left-=h.scrollLeft||0,h=h.parentNode;for(;a=a.offsetParent;)d.top+=a.offsetTop,d.left+=a.offsetLeft;d.top+=v.pageYOffset||v.scrollY||M.documentElement.scrollTop;d.left+=v.pageXOffset||
v.scrollX||M.documentElement.scrollLeft}f&&!D&&(l.push(va(v,"resize scroll",Ia,I)),I.isEvntAdded=!0)}return d},wa=function(c){return c&&c.replace(/\$/g,"$$$$")},ca=function(c,a){return c||!1===c||0===c?c:a},ma=function(){var c,a,d;a=0;for(d=arguments.length;a<d;a+=1)if((c=arguments[a])||!1===c||0===c)return c;return""},qa=function(){var c,a,d;a=0;for(d=arguments.length;a<d;a+=1)if((c=arguments[a])||!1===c||0===c)return c},va=function(a,d,f,h){return c.dem.listen(a,d,f,h)},ha=function(a,d,f){return c.dem.unlisten(a,
d,f)},ra=function(c){c=c&&(c.sourceEvent||c.originalEvent||c);return t&&c&&c.touches&&c.touches[0]||c||h},ka=function(){return function(c){void 0===c.pageX&&(c.pageX=c.clientX+M.body.scrollLeft+M.documentElement.scrollLeft,c.pageY=c.clientY+M.body.scrollTop+M.documentElement.scrollTop);return c}}(),na=function(c,a,d){var f=ka(ra(a)),h=b._fullScreenMode?f.clientX:f.pageX,f=b._fullScreenMode?f.clientY:f.pageY,e=d&&d.config;a=a.type;var I=e&&e.itemFixed,l=I?v.pageYOffset||v.scrollY||M.documentElement.scrollTop:
0,I=I?v.pageXOffset||v.scrollX||M.documentElement.scrollLeft:0;e&&e.elScroll?c=e.posOb:(e&&(e.elScroll=!0),c=sa(c,void 0,d),e&&(e.posOb=c));if("touchend"===a)isNaN(h)&&(h=C),isNaN(f)&&(f=H);else if("touchmove"===a||"touchstart"===a)C=h,H=f;return{chartX:h-c.left-I,chartY:f-c.top-l,pageX:h,pageY:f}},da=function(c,a,d){c=M.createElement(c);for(var f in a)c.setAttribute(f,a[f]);d&&d.appendChild&&d.appendChild(c);return c},oa=function(c){return c&&c.replace(/^#?([a-f0-9]+)/ig,"#$1")||"none"},Y=function(){var c,
a,d;a=0;for(d=arguments.length;a<d;a+=1)if(((c=arguments[a])||!1===c||0===c)&&!isNaN(c=Number(c)))return c},za=function(c,a){c=c||!1===c||0===c?Number(c):NaN;return isNaN(c)?null:a?e(c):c},fa=function(c){return"string"===typeof c?c.replace(l,"<br />"):""},Aa=function(c,a){c=c.split(",")[a||0];c=c.replace(m,"");""==c&&(c="000000");return c.replace(n,"#")},ua=function(c){c=parseInt(c,10);if(isNaN(c)||100<c||0>c)c=100;return c},ia=function(c,a){for(var d=a.length,f=-1;d--;)if(c===a[d]){f=d;break}return f},
xa=function(){if(Array.isArray)return Array.isArray;var c=Object.prototype.toString,a=c.call([]);return function(d){return c.call(d)===a}}(),ja=function(c,a,d,f,h){var b,e,I,l;h?(f.push(c),h.push(a)):(f=[c],h=[a]);if(a instanceof Array)for(b=0;b<a.length;b+=1){try{e=c[b],I=a[b]}catch(g){continue}if("object"!==typeof I)d&&void 0===I||(c[b]=I);else{if(null===e||"object"!==typeof e)e=c[b]=I instanceof Array?[]:{};l=ia(I,h);-1!==l?e=c[b]=f[l]:ja(e,I,d,f,h)}}else for(b in a){try{e=c[b],I=a[b]}catch(g){continue}if(null!==
I&&"object"===typeof I)if(l=K.call(I),"[object Object]"===l){if(null===e||"object"!==typeof e)e=c[b]={};l=ia(I,h);-1!==l?e=c[b]=f[l]:ja(e,I,d,f,h)}else"[object Array]"===l?(null!==e&&e instanceof Array||(e=c[b]=[]),l=ia(I,h),-1!==l?e=c[b]=f[l]:ja(e,I,d,f,h)):c[b]=I;else c[b]=I}return c},ya=function(c,a,d){if("object"!==typeof c&&"object"!==typeof a)return null;if("object"!==typeof a||null===a)return c;"object"!==typeof c&&(c=a instanceof Array?[]:{});ja(c,a,d);return c},W=function(c,a){var d;if(a instanceof
Array)for(d=a.length-1;0<=d;--d)"object"!==typeof a[d]?!0===a[d]&&c&&c.splice&&c.splice(d,1):K.call(a[d])===K.call(c[d])&&W(c[d],a[d]);else for(d in a)"object"!==typeof a[d]?!0===a[d]&&c&&c.splice&&c.splice(d,1):K.call(a[d])===K.call(c[d])&&W(c[d],a[d]);return c},Ma=function(){var c=/^@window_/g;return function(a,d,f){a=a.replace(/\[[\'\"]/g,".").replace(/[\'\"]\]/g,"").replace(/\[/g,".@window_").replace(/\]/g,"").split(".");var h=v,b,e;e="";var I,l,g;l=a.length;for(g=0;g<l;g+=1){I=a[g];b=h;if(I.match(c))e=
v[I.replace(c,"")],h=h[e];else{if(void 0===h||null===h)throw(e||I).replace(c,"")+" is not defined";h=h[I]}e=I}!h||"function"!==typeof h.call&&h!==v.alert?"void"!==e&&setTimeout(function(){throw I.replace(c,"")+"() is not a function";},0):h===v.alert?h(d):f?h.apply(b,d.split("-")):h.call(b,d)}}(),ea=function(c,a){var d;c=c.replace(/^j\s*\-/i,"j-");d=c.indexOf("-",2);-1===d?Ma(c.slice(2)):Ma(c.substr(2,d-2).replace(/\s/g,""),c.slice(d+1),a)},ga=function(c){var a=c.split("(");c=a.pop().split(")")[0].split(",");
var d=c.length,f;f="j-"+a[0];for(a=0;a<d;a++)f+="-"+c[a].replace(/\s*/,"").replace(/\s*$/,"").replace(/[\'|\"]/g,"");ea(f,!0)},la=function(c){var a={image:!1};void 0!==c&&(c=c.replace(/^\s+/,"").replace(/\s+$/,""),/^i\s*[\-]\s*/i.test(c)?(a.image=!0,a.string=c.replace(/^i\s*[\-]\s*/i,"")):a.string=c.replace(/^\\/,""));return a},Ca=function(c,a){c=Number(c);c=isNaN(c)?100:c;void 0!==a&&(c=c*a/100);return c%101},Ha=function(c,a,d){c=c.split(",");var f;void 0!==d&&(d=Y(d.split(",")[0]));c[0]=Ca(c[0],
d);for(f=1;f<a;f+=1)c[f]=c[0]*Ca(c[f],d)/100;return c.join(",")},pa=function(c,a,d){var f=0,h=0,b=0;d&&d.match(L)&&(d=d.split(","),f=d[0].slice(d[0].indexOf("(")+1),h=d[1],b=d[2],a||0===a||(a=parseInt(100*d[3].slice(0,d[3].indexOf(")")),10)));if(c)if(c.match(L))d=c.split(","),f=d[0].slice(d[0].indexOf("(")+1),h=d[1],b=d[2];else{c=c.replace(g,"").split(",")[0];switch(c.length){case 3:c=c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2);break;case 6:break;default:c=(c+"FFFFFF").slice(0,
6)}f=parseInt(c.slice(0,2),16);h=parseInt(c.slice(2,4),16);b=parseInt(c.slice(4,6),16)}a||0===a||(a=100);"string"===typeof a&&(a=a.split(",")[0]);a=parseInt(a,10)/100;return"rgba("+f+","+h+","+b+","+a+")"},La=function(){var c={};return function(a){var d=(a=a||this)&&a.FCcolor||a,f=d.color,h=d.ratio,b=d.angle,e=d.alpha,I=d.r,l=d.cx,g=d.cy,D=d.fx,G=d.fy,t=d.gradientUnits,ba=d.x1,Ba=d.y1,p=d.x2,F=d.y2,m=1,z,B,Oa,w;if("string"===typeof a)return c[w="~"+a]||(c[w]=a.replace(/^#?([a-f0-9]{3,6})/ig,"#$1"));
f=f||"";if(!f)return z;w=[f,e,h,b,I,l,g,t,D,G,ba,p,Ba,F].join("_").replace(/[\(\)\s,\xb0#]/g,"_");if(c[w])return c[w];h=h&&(h+"").split(",")||[];e=(e||0===e)&&(e+"").split(",")||[];if(f=f.split(","))if(z="",1===f.length)Oa=f[0].replace(/^#?([a-f0-9]{3,6})/ig,"$1"),z=e.length?"rgba("+Ea(Oa).join(",")+","+.01*k(e[0])+")":Oa.replace(/^#?([a-f0-9]{3,6})/ig,"#$1");else{a=0;for(B=f.length;a<B;a++)Oa=f[a].replace(/^#?([a-f0-9]{3,6})/ig,"$1"),isNaN(h[a])||(h[a]=k(h[a]),Oa+=":"+h[a],isNaN(h[a+1])||(h[a+1]=
k(h[a+1])+h[a])),isNaN(e[a])||""===e[a]||(m=.01*e[a]),f[a]="rgba("+Ea(Oa).join(",")+","+m+")",isNaN(h[a])||(f[a]=f[a]+":"+h[a]);z+=f.join("-");if(void 0!==I||void 0!==D||void 0!==l||d.radialGradient)z="xr("+[D,G,I,l,g,t].join()+")"+z;else{z="-"+z;if(void 0!==ba||void 0!==Ba||void 0!==p||void 0!==F)z="("+[ba,Ba,p,F,t].join()+")"+z;void 0===b&&(b=0);z=360-k(b)%360+z}}return c[w]=z}}(),Ja=function(){return function(){return""}}(),Fa=function(c){return c.replace(g,"").replace(n,"#")},ta=function(c,a){a=
(0>a||100<a?100:a)/100;c=c.replace(g,"");var d=parseInt(c,16),f=Math.floor(d/65536),h=Math.floor((d-65536*f)/256);return("000000"+(f*a<<16|h*a<<8|(d-65536*f-256*h)*a).toString(16)).slice(-6)},Ka=function(c,a){a=(0>a||100<a?100:a)/100;c=c.replace(g,"");var d=parseInt(c,16),f=Math.floor(d/65536),h=Math.floor((d-65536*f)/256);return("000000"+(256-(256-f)*a<<16|256-(256-h)*a<<8|256-(256-(d-65536*f-256*h))*a).toString(16)).slice(-6)},Ea=function(c){c=parseInt(c,16);var a=Math.floor(c/65536),d=Math.floor((c-
65536*a)/256);return[a,d,Math.floor(c-65536*a-256*d)]},Da=function(a,d){if("object"!==typeof a)return"";if(a.fontSize||a["font-size"])!a.fontSize&&a["font-size"]&&(a.fontSize=a["font-size"],delete a["font-size"]),a.lineHeight=(parseFloat(a.fontSize)||d||10)*c.lineHeightFactor+"px",delete a["line-height"];!a.lineHeight&&a["line-height"]&&(a.lineHeight=a["line-height"],delete a["line-height"]);return a.lineHeight},Ga=function(c,a,d,f,h){var b=ma(c.labelbordercolor,a.bordercolor,d.labelbordercolor,""),
e=qa(c.labelbgcolor,a.bgcolor,d.labelbgcolor),I=Y(c.labelborderthickness,a.borderthickness,d.labelborderthickness,1);h=Y(d.usedataplotcolorforlabels,0)?h||f.color:f.color;b=b?pa(b,Y(c.labelborderalpha,a.borderalpha,d.labelborderalpha,c.labelalpha,a.alpha,d.labelalpha,100)):"";c={fontFamily:qa(c.labelfont,a.font,d.labelfont,f.fontFamily),fontSize:qa(c.labelfontsize,a.fontsize,d.labelfontsize,parseInt(f.fontSize,10))+"px",color:pa(qa(c.labelfontcolor,a.fontcolor,d.labelfontcolor,h),Y(c.labelfontalpha,
a.fontalpha,d.labelfontalpha,c.labelalpha,a.alpha,d.labelalpha,100)),fontWeight:Y(c.labelfontbold,a.fontbold,d.labelfontbold)?"bold":"normal",fontStyle:Y(c.labelfontitalic,a.fontitalic,d.labelfontitalic)?"italic":"normal",border:b||e?I+"px solid":"",borderColor:b,borderThickness:I,borderPadding:Y(c.labelborderpadding,a.borderpadding,d.labelborderpadding,2),borderRadius:Y(c.labelborderradius,a.borderradius,d.labelborderradius,0),backgroundColor:e?pa(e,Y(c.labelbgalpha,a.bgalpha,d.labelbgalpha,c.labelalpha,
a.alpha,d.labelalpha,100)):"",borderDash:Y(c.labelborderdashed,a.borderdashed,d.labelborderdashed,0)?Xa(Y(c.labelborderdashlen,a.borderdashlen,d.labelborderdashlen,4),Y(c.labelborderdashgap,a.borderdashgap,d.labelborderdashgap,2),I):"none"};c.lineHeight=Da(c);return c},Na=function(){var c={top:{align:"center",verticalAlign:"top",textAlign:"center"},right:{align:"right",verticalAlign:"middle",textAlign:"left"},bottom:{align:"center",verticalAlign:"bottom",textAlign:"center"},left:{align:"left",verticalAlign:"middle",
textAlign:"right"}},a=/([^\,^\s]+)\)$/g,d=function(c,a){var d;/^(bar|bar3d)$/.test(c)&&(this.isBar=!0,this.yPos="bottom",this.yOppPos="top",this.xPos="left",this.xOppPos="right");d=parseInt(a.labelstep,10);this.labelStep=1<d?d:1;this.showLabel=Y(a.showlabels,a.shownames,1);this.is3D=/3d$/.test(c)};d.prototype={isBar:!1,yPos:"left",yOppPos:"right",xPos:"bottom",xOppPos:"top",addAxisGridLine:function(d,f,h,b,e,I,l,g){var D=""===h?!1:!0,G=0<b||0<I.match(a)[1]?!0:!1,k;if(D||G)G||(I="rgba(0,0,0,0)",b=
.1),k={isGrid:!0,width:b,dashStyle:e,color:I,value:f,zIndex:void 0===l?2:l},D&&(f=d.opposite?g?this.xOppPos:this.yOppPos:g?this.xPos:this.yPos,f=c[f],k.label={text:h,style:d.labels.style,textAlign:f.textAlign,align:f.align,verticalAlign:f.verticalAlign,rotation:0,x:0,y:0}),d.plotLines.push(k);return k},addAxisAltGrid:function(c,a){if(!this.is3D){var d=Y(c._lastValue,c.min),f=qa(c._altGrid,!1);f&&c.plotBands.push({isGrid:!0,color:c.alternateGridColor,to:a,from:d,zIndex:1});c._lastValue=a;c._altGrid=
!f}},addXaxisCat:function(a,d,f,h,b,e,I,l){var g=c[a.opposite?this.xOppPos:this.xPos];d={isGrid:!0,isDataLabel:!0,width:.1,color:"rgba(0,0,0,0)",value:d,label:{text:h,link:qa(b.labellink,e.link,I.labellink),style:Ga(b,e,I,a.labels.style,l),textAlign:g.textAlign,align:g.align,verticalAlign:g.verticalAlign,rotation:0,x:0,y:0}};0!==f%this.labelStep&&(d.stepped=!0,d.label.style=a.steppedLabels.style);a.plotLines.push(d)},addVline:function(c,a,d,f){f=f._FCconf;var h=f.isBar,b=f.divlineStyle,e=fa(a.label),
I=!!Y(a.showlabelborder,f.showVLineLabelBorder,1),l=!!Y(a.showlabelbackground,1),g=qa(a.labelhalign,h?"left":"center"),D=qa(a.labelvalign,h?"middle":"bottom").toLowerCase(),G=Y(a.labelposition,0),k=Y(a.lineposition,.5),t=Y(a.showvlines,f.showVLines,1),ba=Y(a.alpha,f.vLineAlpha,80),Ba=qa(a.color,f.vLineColor).replace(/^#?/,"#"),p=l?qa(a.labelbgcolor,f.vLineLabelBgColor,"333333").replace(/^#?/,"#"):"",F=qa(a.labelcolor,f.vLineLabelColor,a.color,f.vLineColor).replace(/^#?/,"#"),z=Y(a.thickness,f.vLineThickness,
1),m=.5*z,B=!!Number(qa(a.dashed,0)),Oa=Y(a.dashlen,5),w=Y(a.dashgap,2),aa=f.smartLabel,K=parseInt(b.fontSize,10)+2,n=0,R=Y(a.rotatelabel,f.rotateVLineLabels)?270:0,k=0>k||1<k?.5:k,G=0>G||1<G?0:G;aa.setStyle(b);aa=aa.getOriSize(e);Ba=pa(Ba,t?ba:"0");if(h){switch(D){case "top":K-=aa.height+m+2;break;case "middle":K-=.5*aa.height+1;break;default:K+=m}a.labelhalign||(n-=aa.width*G)}else{switch(D){case "top":K=.5*-aa.height+1;break;case "middle":K=0;break;default:K=.5*aa.height}switch(g){case "left":n+=
z;break;case "right":n-=z+1}}c.plotLines.push({isVline:!0,color:Ba,width:z,value:d-1+k,zIndex:Y(a.showontop,f.showVLinesOnTop)?5:3,dashStyle:B?Xa(Oa,w,z):"none",label:{text:e,align:h?"left":"center",offsetScale:G,rotation:R,y:K,x:n,textAlign:g,backgroundColor:p,borderWidth:t&&I?1:0,borderType:t&&I?"solid":"",borderColor:t&&I?F:"",backgroundOpacity:t&&l?qa(a.labelbgalpha,f.vLineLabelBgAlpha)/100:0,style:{color:t?F:Ba,fontSize:b.fontSize,fontFamily:b.fontFamily,lineHeight:b.lineHeight,backgroundColor:p}}})}};
return d.prototype.constructor=d}(),Ua=function(){var c=function(c,d,f,h,b){c=Math.abs(d-c);d=c/(f+1);a(c,f,h)||(b&&Number(d)/Number(h)<(1<h?2:.5)&&(h/=10),d=(Math.floor(d/h)+1)*h,c=d*(f+1));return c},a=function(c,a,f){return d(c/(a+1))>d(f)?!1:!0},d=function(c){c=Math.abs(c);c=String(c);var a=0,d=c.indexOf(".");-1!=d&&(a=c.length-d-1);return a};return function(d,f,h,b,e,I,l,g){var D,G,k,t,ba,Ba,p,z=0;d=!0===isNaN(d)||void 0===d?.1:d;f=!0===isNaN(f)||void 0===f?0:f;d===f&&0===d&&(d=.1);G=Math.max(Math.floor(Math.log(Math.abs(f))/
Math.LN10),Math.floor(Math.log(Math.abs(d))/Math.LN10));D=Math.pow(10,G);2>Math.abs(d)/D&&2>Math.abs(f)/D&&(G--,D=Math.pow(10,G));G=Math.floor(Math.log(d-f)/Math.LN10);k=Math.pow(10,G);0<d-f&&10<=D/k&&(D=k);G=(Math.floor(d/D)+1)*D;0>f?k=-1*(Math.floor(Math.abs(f/D))+1)*D:I?k=0:(k=Math.floor(Math.abs(f/D)-1)*D,k=0>k?0:k);e&&0>=d&&(G=0);e=h||0===h?!0:!1;I=b||0===b?!0:!1;d=!1===e||!0===e&&Number(h)<d&&d-Number(h)>T?G:Number(h);f=!1===I||!0===I&&Number(b)>f&&Number(b)-f>T?k:Number(b);b=Math.abs(d-f);
if(!1===I&&!1===e&&g)if(0<d&&0>f)for(h=!1,e=10<D?D/10:D,g=c(f,d,l,e,!1),I=g-(l+1)*e;!1===h;){if(I+=(l+1)*e,a(I,l,e))if(g=I-b,G=I/(l+1),t=Math.min(Math.abs(f),d),k=t==Math.abs(f)?-1:1,0===l)h=!0;else for(Ba=1;Ba<=Math.floor((l+1)/2);Ba++)ba=G*Ba,!(ba-t>g)&&ba>t&&(p=I-ba,p/G==Math.floor(p/G)&&ba/G==Math.floor(ba/G)&&(b=I,d=-1==k?p:ba,f=-1==k?-ba:-p,h=!0))}else h=c(f,d,l,D,!0),g=h-b,b=h,0<d?d+=g:f-=g;else g&&(h=function(c,d,f){for(var h=0,b=1,e;;){e=c+h*b;e=0===e?1:e;if(a(d,e,f))break;h=-1==b||h>c?++h:
h;if(25<h){e=0;break}b=h<=c?-1*b:1}return e},0<l&&(g=h(l,b,D),0===g&&(g=h(l,b+1,D),z=1),l=g));return{Max:d,Min:f,Range:b,interval:D,divGap:(d-f+z)/(l+1)}}}(),Pa=function(){var c=function(c,a,d){var f=d.jsVars&&d.jsVars.smartLabel,h=c.offsetWidth,b=c.offsetHeight,e=this.chart;c=this.title;var I=d._chartMessageImageStyle,l=la(a);c.y=b/2;c.x=h/2;e.bgSWF=c.text=void 0;a=l.string;l.image?(e.bgSWF=a,e.bgImageHAlign=I.imageHAlign,e.bgImageVAlign=I.imageVAlign,e.bgImageScale=I.imageScale,e.bgSWFAlpha=I.imageAlpha):
void 0!==a&&(f?(Da(c.style),f.setStyle(c.style),a=f.getSmartText(fa(a),h,b),c.text=a.text):c.text=fa(a),c.verticalAlign="middle");c.style=d._chartMessageStyle;delete d._chartMessageImageStyle;delete d._chartMessageStyle};c.prototype={chart:{events:{},margin:[0,0,0,0],backgroundColor:{FCcolor:{alpha:0}}},credits:{href:P,text:"FusionCharts XT Trial",enabled:z},legend:{enabled:!1},title:{text:"",style:{fontFamily:"Verdana,sans",fontSize:"10px",color:"#666666"}},plotOptions:{series:{}},series:[{}],exporting:{enabled:!1},
nativeMessage:!0};return c.prototype.constructor=c}(),Sa={"true":{"true":{"true":"center","false":"center"},"false":{"true":"center","false":"center"}},"false":{"true":{"true":"right","false":"left"},"false":{"true":"left","false":"right"}}},ab=function(){return function(c,a,d,f,h,b,e){var I,l=d.trendStyle,g,D,G,k,t,ba,Ba,p,z,F,m,B,Oa,w=b?"xAxis":"dataLabels";if(b?d.showVLines:d.showTrendlines)for(I=0,D=c.length;I<D;I+=1)if((Oa=c[I])&&Oa.line)for(g=0,G=Oa.line.length;g<G;g+=1)k=Oa.line[g],F=d.numberFormatter.getCleanValue(qa(k.startvalue,
k.value,0)),m=d.numberFormatter.getCleanValue(qa(k.endvalue,qa(k.startvalue,k.value,0))),b?p=a:f&&k.parentyaxis&&/^s$/i.test(k.parentyaxis)?(p=a[1],B=1):p=a[0],ba=p.max,Ba=p.min,t=!1,ba>=F&&ba>=m&&Ba<=F&&Ba<=m&&(f&&k.parentyaxis&&/^s$/i.test(k.parentyaxis)?t="1"!==qa(k.valueonleft,d.trendlineValuesOnOpp):f||(t="1"===qa(k.valueonright,d.trendlineValuesOnOpp)),ba=!!Y(k.istrendzone,b?1:0),(Ba=(b?d.showVLineLabels:d.showTrendlineLabels)?fa(qa(k.displayvalue,d.numberFormatter[w](t?m:F,B))):"")?(z=F<m,
t={text:Ba,textAlign:h?"center":t?"left":"right",align:h?Sa[ba][!e][z]:t?"right":"left",verticalAlign:h?"bottom":"middle",rotation:0,x:0,y:0,style:l},Ba=qa(k.color,d.trendlineColor),k.alwaysVisible=ba,Ba&&(t.style=ya({},l),t.style.color=pa(Ba,Y(k.alpha,100)))):t=void 0,Ba=ca(fa(qa(k.tooltext,Oa.tooltext,d.trendLineToolText))),Ba=eb(Ba,[7,15,16,17,18,19],{startValue:F,startDataValue:d.numberFormatter[w](F,B),endValue:m,endDataValue:d.numberFormatter[w](m,B),axisName:p.title&&p.title.text},k),z=Y(k.thickness,
d.trendlineThickness,1),ba?p.plotBands.push({isTrend:!0,color:pa(qa(k.color,d.trendlineColor),qa(k.alpha,d.trendlineAlpha,40)),from:F,to:m,label:t,zIndex:d.is3d||"1"!==qa(k.showontop,d.showTrendlinesOnTop)?3:5,tooltext:Ba,alwaysVisible:k.alwaysVisible}):p.plotLines.push({isTrend:!0,color:pa(qa(k.color,d.trendlineColor,d.trendlineColor),qa(k.alpha,d.trendlineAlpha,99)),value:F,to:m,width:z,dashStyle:"1"==qa(k.dashed,d.trendlinesAreDashed)?Xa(Y(k.dashlen,d.trendlinesDashLen),Y(k.dashgap,d.trendlinesDashGap),
z):"none",label:t,zIndex:d.is3d||"1"!==qa(k.showontop,d.showTrendlinesOnTop)?3:5,tooltext:Ba}))}}(),Xa=function(c,a,d,f){return f||void 0===f?[c,a]:"none"},Za=function(){},bb=function(c,a,d,f,h){var b,e=bb[c],I;e||(I=function(){},I.prototype=d instanceof Za?d:new Za,I.prototype.constructor=I,e=bb[c]=new I,d&&(e.base=d),e.name=c,e.config={},null!==h&&(c=(h instanceof Za?h:d instanceof Za?d:{}).config)&&ya(e.config,c));f&&ya(e.config,f);for(b in a)switch(typeof a[b]){case "object":if(a[b]instanceof
Za){e[b]=a[b][b];break}default:e[b]=a[b];break;case "undefined":delete e[b]}return this instanceof bb?(a=function(){this.config={};this.__setDefaultConfig=function(){e&&e.config&&ya(this.config,e.config)};this.__setDefaultConfig()},a.prototype=e,a.prototype.constructor=a,new a):e},eb=function(){var c=[{regex:/((^|[^\\])((\\)\\)*\$cleanvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$cleanvalue))/ig,argIndex:2,argKey:"cleanvalue"},{regex:/((^|[^\\])((\\)\\)*\$datavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$datavalue))/ig,
argIndex:2,argKey:"formattedValue"},{regex:/((^|[^\\])((\\)\\)*\$value)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$value))/ig,argIndex:3,argKey:"value"},{regex:/((^|[^\\])((\\)\\)*\$label)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$label))/ig,argIndex:2,argKey:"label"},{regex:/((^|[^\\])((\\)\\)*\$seriesname)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$seriesname))/ig,argIndex:5,argKey:"seriesname"},{regex:/((^|[^\\])((\\)\\)*\$yaxisname)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$yaxisname))/ig,argIndex:2,argKey:"yaxisName"},
{regex:/((^|[^\\])((\\)\\)*\$xaxisname)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$xaxisname))/ig,argIndex:2,argKey:"xaxisName"},{regex:/((^|[^\\])((\\)\\)*\$displayvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$displayvalue))/ig,argIndex:3,argKey:"displayvalue"},{regex:/((^|[^\\])((\\)\\)*\$xdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$xdatavalue))/ig,argIndex:2,argKey:"xDataValue"},{regex:/((^|[^\\])((\\)\\)*\$ydatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$ydatavalue))/ig,argIndex:2,argKey:"yDataValue"},
{regex:/((^|[^\\])((\\)\\)*\$xvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$xvalue))/ig,argIndex:3,argKey:"x"},{regex:/((^|[^\\])((\\)\\)*\$yvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$yvalue))/ig,argIndex:3,argKey:"y"},{regex:/((^|[^\\])((\\)\\)*\$zvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$zvalue))/ig,argIndex:3,argKey:"z"},{regex:/((^|[^\\])((\\)\\)*\$name)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$name))/ig,argIndex:3,argKey:"name"},{regex:/((^|[^\\])((\\)\\)*\$percentValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$percentValue))/ig,
argIndex:2,argKey:"percentValue"},{regex:/((^|[^\\])((\\)\\)*\$startValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$startValue))/ig,argIndex:2,argKey:"startValue"},{regex:/((^|[^\\])((\\)\\)*\$startDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$startDataValue))/ig,argIndex:2,argKey:"startDataValue"},{regex:/((^|[^\\])((\\)\\)*\$endValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$endValue))/ig,argIndex:2,argKey:"endValue"},{regex:/((^|[^\\])((\\)\\)*\$endDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$endDataValue))/ig,
argIndex:2,argKey:"endDataValue"},{regex:/((^|[^\\])((\\)\\)*\$axisName)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$axisName))/ig,argIndex:2,argKey:"axisName"},{regex:/((^|[^\\])((\\)\\)*\$cumulativevalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$cumulativevalue))/ig,argIndex:2,argKey:"cumulativeValue"},{regex:/((^|[^\\])((\\)\\)*\$cumulativedatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$cumulativedatavalue))/ig,argIndex:2,argKey:"cumulativeDataValue"},{regex:/((^|[^\\])((\\)\\)*\$cumulativePercentValue)/ig,
escapeRegex:/((^|[^\\])((\\)\\)*\\(\$cumulativePercentValue))/ig,argIndex:2,argKey:"cumulativePercentValue"},{regex:/((^|[^\\])((\\)\\)*\$cumulativepercentdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$cumulativepercentdatavalue))/ig,argIndex:2,argKey:"cumulativePercentDataValue"},{regex:/((^|[^\\])((\\)\\)*\$sum)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$sum))/ig,argIndex:2,argKey:"sum"},{regex:/((^|[^\\])((\\)\\)*\$unformattedsum)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$unformattedsum))/ig,argIndex:2,
argKey:"unformattedSum"},{regex:/((^|[^\\])((\\)\\)*\$targetvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$targetvalue))/ig,argIndex:2,argKey:"targetValue"},{regex:/((^|[^\\])((\\)\\)*\$targetdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$targetdatavalue))/ig,argIndex:2,argKey:"targetDataValue"},{regex:/((^|[^\\])((\\)\\)*\$processname)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$processname))/ig,argIndex:2,argKey:"processName"},{regex:/((^|[^\\])((\\)\\)*\$start)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$start))/ig,
argIndex:2,argKey:"start"},{regex:/((^|[^\\])((\\)\\)*\$end)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$end))/ig,argIndex:2,argKey:"end"},{regex:/((^|[^\\])((\\)\\)*\$percentcomplete)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$percentcomplete))/ig,argIndex:2,argKey:"percentComplete"},{regex:/((^|[^\\])((\\)\\)*\$taskpercentcomplete)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$taskpercentcomplete))/ig,argIndex:2,argKey:"taskPercentComplete"},{regex:/((^|[^\\])((\\)\\)*\$taskstartdate)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$taskstartdate))/ig,
argIndex:2,argKey:"taskStartDate"},{regex:/((^|[^\\])((\\)\\)*\$taskenddate)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$taskenddate))/ig,argIndex:2,argKey:"taskEndDate"},{regex:/((^|[^\\])((\\)\\)*\$tasklabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$tasklabel))/ig,argIndex:2,argKey:"taskLabel"},{regex:/((^|[^\\])((\\)\\)*\$date)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$date))/ig,argIndex:2,argKey:"date"},{regex:/((^|[^\\])((\\)\\)*\$percentofprevvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$percentofprevvalue))/ig,
argIndex:2,argKey:"percentOfPrevValue"},{regex:/((^|[^\\])((\\)\\)*\$sname)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$sname))/ig,argIndex:2,argKey:"sName"},{regex:/((^|[^\\])((\\)\\)*\$lname)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$lname))/ig,argIndex:2,argKey:"lName"},{regex:/((^|[^\\])((\\)\\)*\$fromid)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromid))/ig,argIndex:2,argKey:"fromId"},{regex:/((^|[^\\])((\\)\\)*\$fromlabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromlabel))/ig,argIndex:2,argKey:"fromLabel"},
{regex:/((^|[^\\])((\\)\\)*\$toid)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toid))/ig,argIndex:2,argKey:"toId"},{regex:/((^|[^\\])((\\)\\)*\$tolabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$tolabel))/ig,argIndex:2,argKey:"toLabel"},{regex:/((^|[^\\])((\\)\\)*\$fromxvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromxvalue))/ig,argIndex:2,argKey:"fromXValue"},{regex:/((^|[^\\])((\\)\\)*\$fromyvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromyvalue))/ig,argIndex:2,argKey:"fromYValue"},{regex:/((^|[^\\])((\\)\\)*\$fromxdatavalue)/ig,
escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromxdatavalue))/ig,argIndex:2,argKey:"fromXDataValue"},{regex:/((^|[^\\])((\\)\\)*\$fromydatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromydatavalue))/ig,argIndex:2,argKey:"fromYDataValue"},{regex:/((^|[^\\])((\\)\\)*\$fromlabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromlabel))/ig,argIndex:2,argKey:"fromLabel"},{regex:/((^|[^\\])((\\)\\)*\$toxvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toxvalue))/ig,argIndex:2,argKey:"toXValue"},{regex:/((^|[^\\])((\\)\\)*\$toyvalue)/ig,
escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toyvalue))/ig,argIndex:2,argKey:"toYValue"},{regex:/((^|[^\\])((\\)\\)*\$toxdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toxdatavalue))/ig,argIndex:2,argKey:"toXDataValue"},{regex:/((^|[^\\])((\\)\\)*\$toydatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toydatavalue))/ig,argIndex:2,argKey:"toYDataValue"},{regex:/((^|[^\\])((\\)\\)*\$tolabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$tolabel))/ig,argIndex:2,argKey:"toLabel"},{regex:/((^|[^\\])((\\)\\)*\$openvalue)/ig,
escapeRegex:/((^|[^\\])((\\)\\)*\\(\$openvalue))/ig,argIndex:2,argKey:"openValue"},{regex:/((^|[^\\])((\\)\\)*\$closevalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$closevalue))/ig,argIndex:2,argKey:"closeValue"},{regex:/((^|[^\\])((\\)\\)*\$highvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$highvalue))/ig,argIndex:2,argKey:"highValue"},{regex:/((^|[^\\])((\\)\\)*\$lowvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$lowvalue))/ig,argIndex:2,argKey:"lowValue"},{regex:/((^|[^\\])((\\)\\)*\$opendatavalue)/ig,
escapeRegex:/((^|[^\\])((\\)\\)*\\(\$opendatavalue))/ig,argIndex:2,argKey:"openDataValue"},{regex:/((^|[^\\])((\\)\\)*\$closedatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$closedatavalue))/ig,argIndex:2,argKey:"closeDataValue"},{regex:/((^|[^\\])((\\)\\)*\$highdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$highdatavalue))/ig,argIndex:2,argKey:"highDataValue"},{regex:/((^|[^\\])((\\)\\)*\$lowdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$lowdatavalue))/ig,argIndex:2,argKey:"lowDataValue"},
{regex:/((^|[^\\])((\\)\\)*\$maxvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$maxvalue))/ig,argIndex:2,argKey:"maxValue"},{regex:/((^|[^\\])((\\)\\)*\$maxdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$maxdatavalue))/ig,argIndex:2,argKey:"maxDataValue"},{regex:/((^|[^\\])((\\)\\)*\$minvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$minvalue))/ig,argIndex:2,argKey:"minValue"},{regex:/((^|[^\\])((\\)\\)*\$mindatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$mindatavalue))/ig,argIndex:2,argKey:"minDataValue"},
{regex:/((^|[^\\])((\\)\\)*\$q1)/ig,argIndex:2,argKey:"Q1"},{regex:/((^|[^\\])((\\)\\)*\$unformattedQ1)/ig,argIndex:2,argKey:"unformattedQ1"},{regex:/((^|[^\\])((\\)\\)*\$q3)/ig,argIndex:2,argKey:"Q3"},{regex:/((^|[^\\])((\\)\\)*\$unformattedQ3)/ig,argIndex:2,argKey:"unformattedQ3"},{regex:/((^|[^\\])((\\)\\)*\$median)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$median))/ig,argIndex:2,argKey:"median"},{regex:/((^|[^\\])((\\)\\)*\$unformattedMedian)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$unformattedMedian))/ig,
argIndex:2,argKey:"unformattedMedian"},{regex:/((^|[^\\])((\\)\\)*\$SD)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$SD))/ig,argIndex:2,argKey:"SD"},{regex:/((^|[^\\])((\\)\\)*\$unformattedsd)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$unformattedsd))/ig,argIndex:2,argKey:"unformattedsd"},{regex:/((^|[^\\])((\\)\\)*\$QD)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$QD))/ig,argIndex:2,argKey:"QD"},{regex:/((^|[^\\])((\\)\\)*\$unformattedQD)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$unformattedQD))/ig,argIndex:2,
argKey:"unformattedQD"},{regex:/((^|[^\\])((\\)\\)*\$MD)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$MD))/ig,argIndex:2,argKey:"MD"},{regex:/((^|[^\\])((\\)\\)*\$unformattedMD)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$unformattedMD))/ig,argIndex:2,argKey:"unformattedMD"},{regex:/((^|[^\\])((\\)\\)*\$mean)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$mean))/ig,argIndex:2,argKey:"mean"},{regex:/((^|[^\\])((\\)\\)*\$unformattedMean)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$unformattedMean))/ig,argIndex:2,argKey:"unformattedMean"},
{regex:/((^|[^\\])((\\)\\)*\$unformattedMean)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$unformattedMean))/ig,argIndex:2,argKey:"unformattedMean"},{regex:/((^|[^\\])((\\)\\)*\$volumeValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$volumeValue))/ig,argIndex:2,argKey:"volumeValue"},{regex:/((^|[^\\])((\\)\\)*\$volumeDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$volumeDataValue))/ig,argIndex:2,argKey:"volumeDataValue"},{regex:/((^|[^\\])((\\)\\)*\$fromXValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromXValue))/ig,
argIndex:2,argKey:"fromXValue"},{regex:/((^|[^\\])((\\)\\)*\$fromYValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromYValue))/ig,argIndex:2,argKey:"fromYValue"},{regex:/((^|[^\\])((\\)\\)*\$fromXDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromXDataValue))/ig,argIndex:2,argKey:"fromXDataValue"},{regex:/((^|[^\\])((\\)\\)*\$fromYDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromYDataValue))/ig,argIndex:2,argKey:"fromYDataValue"},{regex:/((^|[^\\])((\\)\\)*\$fromLabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromLabel))/ig,
argIndex:2,argKey:"fromLabel"},{regex:/((^|[^\\])((\\)\\)*\$toXValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toXValue))/ig,argIndex:2,argKey:"toXValue"},{regex:/((^|[^\\])((\\)\\)*\$toYValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toYValue))/ig,argIndex:2,argKey:"toYValue"},{regex:/((^|[^\\])((\\)\\)*\$toXDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toXDataValue))/ig,argIndex:2,argKey:"toXDataValue"},{regex:/((^|[^\\])((\\)\\)*\$toYDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toYDataValue))/ig,
argIndex:2,argKey:"toYDataValue"},{regex:/((^|[^\\])((\\)\\)*\$tolabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$tolabel))/ig,argIndex:2,argKey:"toLabel"},{regex:/((^|[^\\])((\\)\\)*\$tlLabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$tlLabel))/ig,argIndex:5,argKey:"tlLabel"},{regex:/((^|[^\\])((\\)\\)*\$trlabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$trlabel))/ig,argIndex:5,argKey:"trLabel"},{regex:/((^|[^\\])((\\)\\)*\$bllabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$bllabel))/ig,argIndex:5,argKey:"blLabel"},
{regex:/((^|[^\\])((\\)\\)*\$brlabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$brlabel))/ig,argIndex:5,argKey:"brLabel"},{regex:/((^|[^\\])((\\)\\)*\$rowlabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$rowlabel))/ig,argIndex:5,argKey:"rowLabel"},{regex:/((^|[^\\])((\\)\\)*\$columnlabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$columnlabel))/ig,argIndex:5,argKey:"columnLabel"},{regex:/((^|[^\\])((\\)\\)*\$errorvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$errorvalue))/ig,argIndex:2,argKey:"errorValue"},
{regex:/((^|[^\\])((\\)\\)*\$errordatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$errordatavalue))/ig,argIndex:2,argKey:"errorDataValue"},{regex:/((^|[^\\])((\\)\\)*\$errorpercentvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$errorpercentvalue))/ig,argIndex:2,argKey:"errorPercentValue"},{regex:/((^|[^\\])((\\)\\)*\$errorpercentdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$errorpercentdatavalue))/ig,argIndex:2,argKey:"errorPercentDataValue"},{regex:/((^|[^\\])((\\)\\)*\$horizontalErrorValue)/ig,
escapeRegex:/((^|[^\\])((\\)\\)*\\(\$horizontalErrorValue))/ig,argIndex:2,argKey:"horizontalErrorValue"},{regex:/((^|[^\\])((\\)\\)*\$horizontalErrorDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$horizontalErrorDataValue))/ig,argIndex:2,argKey:"horizontalErrorDataValue"},{regex:/((^|[^\\])((\\)\\)*\$verticalErrorValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$verticalErrorValue))/ig,argIndex:2,argKey:"verticalErrorValue"},{regex:/((^|[^\\])((\\)\\)*\$verticalErrorDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$verticalErrorDataValue))/ig,
argIndex:2,argKey:"verticalErrorDataValue"},{regex:/((^|[^\\])((\\)\\)*\$horizontalErrorPercent)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$horizontalErrorPercentValue))/ig,argIndex:2,argKey:"horizontalErrorPercentValue"},{regex:/((^|[^\\])((\\)\\)*\$horizontalErrorPercentDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$horizontalErrorPercentDataValue))/ig,argIndex:2,argKey:"horizontalErrorPercentDataValue"},{regex:/((^|[^\\])((\\)\\)*\$verticalErrorPercent)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$verticalErrorPercentValue))/ig,
argIndex:2,argKey:"verticalErrorPercentValue"},{regex:/((^|[^\\])((\\)\\)*\$verticalErrorPercentDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$verticalErrorPercentDataValue))/ig,argIndex:2,argKey:"verticalErrorPercentDataValue"},{regex:/((^|[^\\])((\\)\\)*\$xaxispercentvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$xaxispercentvalue))/ig,argIndex:2,argKey:"xAxisPercentValue"},{regex:/((^|[^\\])((\\)\\)*\$percentdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$percentdatavalue))/ig,argIndex:2,
argKey:"percentDataValue"},{regex:/((^|[^\\])((\\)\\)*\$trType)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$trType))/ig,argIndex:4,argKey:"trtype"},{regex:/((^|[^\\])((\\)\\)*\$tlType)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$tlType))/ig,argIndex:4,argKey:"tltype"},{regex:/((^|[^\\])((\\)\\)*\$brType)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$brType))/ig,argIndex:4,argKey:"brtype"},{regex:/((^|[^\\])((\\)\\)*\$blType)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$blType))/ig,argIndex:4,argKey:"bltype"},{regex:/((^|[^\\])((\\)\\)*\$colorRangeLabel)/ig,
escapeRegex:/((^|[^\\])((\\)\\)*\\(\$colorRangeLabel))/ig,argIndex:5,argKey:"colorRangeLabel"},{regex:/((^|[^\\])((\\)\\)*\$zdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$zdatavalue))/ig,argIndex:2,argKey:"zDataValue"},{regex:/((^|[^\\])((\\)\\)*\$svalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$svalue))/ig,argIndex:3,argKey:"svalue"},{regex:/((^|[^\\])((\\)\\)*\$positiveErrorValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$positiveErrorValue))/ig,argIndex:2,argKey:"positiveErrorValue"},{regex:/((^|[^\\])((\\)\\)*\$negativeErrorValue)/ig,
escapeRegex:/((^|[^\\])((\\)\\)*\\(\$negativeErrorValue))/ig,argIndex:2,argKey:"negativeErrorValue"},{regex:/((^|[^\\])((\\)\\)*\$datasvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$datasvalue))/ig,argIndex:2,argKey:"formattedsValue"}],a=[],d,f=c.length;for(d=0;d<f;d+=1)a.push(d);return function(){var d=arguments[0],f=arguments[1],h,b,e,I,l;xa(f)||(f=a);if(d)for(l=f.length,I=0;I<l;I+=1)if(e=c[f[I]])h=wa(ca((b=arguments[e.argIndex])&&b[e.argKey],"")+""),d=d.replace(e.regex,"$2$4"+(e.parsingMethod?
e.parsingMethod(h):h)),d=d.replace(e.escapeRegex,"$2$4$5");return d}}(),Va=function(){var c=M.createElement("canvas");return!(!c.getContext||!c.getContext("2d"))},Ya=function(c){var a,d,f;a=0<=c.split(",")[0].indexOf("base64")?v.atob(c.split(",")[1]):v.unescape(c.split(",")[1]);c=c.split(",")[0].split(":")[1].split(";")[0];d=new Uint8Array(a.length);for(f=0;f<a.length;f++)d[f]=a.charCodeAt(f);return new v.Blob([d],{type:c})},$a=function(){var c=v.navigator.userAgent,a;return-1!==(a=c.indexOf("Edge"))?
{name:"Edge",version:c.substring(a+5,a+11)}:-1!==(a=c.indexOf("Chrome"))?{name:"Chrome",version:c.substring(a+7,a+11)}:-1!==(a=c.indexOf("MSIE"))?{name:"ie",version:c.substring(a+5,a+9)}:-1!==(a=c.indexOf("rv"))&&-1!==c.indexOf("Trident")?{name:"ie",version:c.substring(a+5,a+9)}:-1!==(a=c.indexOf("Firefox"))?{name:"Firefox",version:c.substring(a+8,a+12)}:-1!==(a=c.indexOf("Safari"))?{name:"Safari",version:c.substring(a+7,a+11)}:{name:"default",version:"Not Known"}},Ta=function(c){var a=document.createElement("div");
a.innerHTML="<a></a>";a.firstChild.href=c;a.innerHTML=a.innerHTML;return a.firstChild},kb=function(c,a){var d,f,h,b,e;a=void 0===a?!0:a;d=/<image [^\>]*href=["']([^\>'"]*)["'][^\>]*\>/g;f=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i;h=[];do b=d.exec(c),null!==b&&(e=b[1],f.test(e)||(a&&(e=Ta(e).href),h.push(e)));while(b&&null!==b);return h},hb=function(){var c;c={cacheCompleted:!1};return{cacheAllImages:function(a,d,f){var h,
b,e,I;d=d||!1;h=kb(a);b=h.length;if(Va()&&!d&&b)for(I=e=0;I<b;I++)(function(){var a,d;a=h[I];a in c?(e++,b===e&&(c.cacheCompleted=!0,f())):(d=new X,d.crossOrigin="",d.onload=function(){var h,I;h=document.createElement("canvas");h.width=d.width;h.height=d.height;h.getContext("2d").drawImage(this,0,0);try{I=h.toDataURL("image/png"),c[a]={loaded:!0,notCORS:!0,imageUri:I}}catch(l){c[a]={loaded:!0,notCORS:!1}}finally{e++,b===e&&(c.cacheCompleted=!0,f())}},d.onerror=function(){c[a]={loaded:!1};e++;b===
e&&(c.cacheCompleted=!0,f())},d.src=a)})();else f()},getImageCachedDetails:function(a){return c[a]},isCacheAllImagesCompleted:function(){return c.cacheCompleted}}}(),ib=hb.cacheAllImages,ob=hb.getImageCachedDetails,ba=hb.isCacheAllImagesCompleted,Ba=function(c){return c=c.replace(/<image [^\>]*\>/gi,function(c){return c=c.replace(/(:href=")([^"]*)(")/gi,function(c,a,d,f){return a+Ta(d).href+f})})},Oa=function(c){var a,d,f,h;c=Ba(c);ba();a=kb(c);for(d=0;d<a.length;d++)f=a[d],h=ob(f),void 0!==h&&h.loaded&&
h.notCORS&&h.imageUri&&(c=c.replace(f,h.imageUri));return c},Qa=function(c){var a,d;a=c;var f,h,b,e,I;d=/(<image [^\>]*href=["']([^\>'"]*)["'][^\>]*\>)/g;f=/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+\=[a-z\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i;h=[];do b=d.exec(a),null!==b&&(e=b[1],I=b[2],f.test(I)||h.push(e));while(b&&null!==b);for(a=0;a<h.length;a++)d=h[a],c=c.replace(d,"");return c},I=function(c,a,d,f){var h=$a(),b=f.chartId,e=f.exportCallback,I=f.paper,l;"Chrome"===
h.name||"Firefox"===h.name?("blob"===c&&(a=v.URL.createObjectURL(a)),l=M.createElement("a"),l.download=d,l.href=a,M.body.appendChild(l),l.onclick=function(){e&&v[e]&&"function"===typeof v[e]&&v[e].call(v,{statusCode:1,statusMessage:"success",DOMId:b,width:I&&I.width,height:I&&I.height});l.parentNode.removeChild(l)},l.click()):"ie"!==h.name&&"Edge"!==h.name||!v.navigator.msSaveBlob||(c="url"===c?Ya(a):a,v.navigator.msSaveBlob(c,d)&&e&&v[e]&&"function"===typeof v[e]&&v[e].call(v,{statusCode:1,statusMessage:"success",
DOMId:b,width:I&&I.width,height:I&&I.height}))},cb=function(c,a){var d,f,h,e;h=a.exportAction;var I=a.exportTargetWindow,l=a.exportCallback,g=a.fusionCharts,D=a.paper,k=a.chartId;f=a.exportHandler;e=c.parameters;var G;if(h===O.DOWNLOAD||h===O.DOWNLOADSAVE){/(webkit|gecko)/ig.test(v.navigator.userAgent)&&"_self"===I&&(I=h=k+"export_iframe",G||(G=h=da("IFRAME",{name:h,width:"1px",height:"1px"},M.body),h.style.cssText="position:absolute;left:-10px;top:-10px;"));f=da("form",{method:"POST",action:f,target:I,
style:"display:none;"},M.body);for(d in c)da("input",{type:"hidden",name:d,value:c[d]},f);f.submit();M.body.removeChild(f);f=void 0;d=e.match(/exportfilename=([^|]+)/)[1];e=e.match(/exportformat=([^|]+)/)[1];b.raiseEvent("exported",{DOMId:k,height:D.height,width:D.width,fileName:d+"."+e,statusCode:void 0,statusMessage:void 0,notice:void 0},g.chartInstance);l&&v[l]&&"function"===typeof v[l]&&v[l].call(v,{statusCode:1,statusMessage:"success",DOMId:k,width:D&&D.width,height:D&&D.height});return!0}e=
new b.ajax(function(c){var a={};c.replace(RegExp("([^?=&]+)(=([^&]*))?","g"),function(c,d,f,h){a[d]=h});l&&v[l]&&"function"===typeof v[l]&&v[l].call(v,a);b.raiseEvent("exported",a,g.chartInstance)},function(c){c={statusCode:0,statusMessage:"failure",error:c,DOMId:k,width:D&&D.width,height:D&&D.height};l&&v[l]&&"function"===typeof v[l]&&v[l].call(v,c);b.raiseEvent("exported",c,g.chartInstance,[c])});for(d in c)c.hasOwnProperty(d)&&(c[d]=encodeURIComponent(c[d]));e.post(f,c)},vb=function(c){if("chrome"===
$a().name.toLowerCase()){var a,d,f;a=c.length;for(f=c.length-1;0<=f;f--)d=c.charCodeAt(f),127<d&&2047>=d?a++:2047<d&&65535>=d&&(a+=2),56320<=d&&57343>=d&&f--;if(2E6<a)return!0}return!1},sb=function(c,a){var d=new b.ajax(function(){},function(){}),f;for(f in c)c.hasOwnProperty(f)&&(c[f]=encodeURIComponent(c[f]));d.post(a.logHandler,c)},pb=function(c){return c="data:image/svg+xml;base64,"+v.btoa(v.unescape(encodeURIComponent('<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'+
c)))},gb=function(){var c,a,d,f,h,b,e,I;if(this&&this!==v){this.disposing=!0;if(c=this.components)for(d in c)if(a=c[d],a instanceof Array)for(f=a.length,h=0;h<f;h++)(I=a[h])&&!this.disposing&&(I.dispose?I.dispose():gb.call(I));else a&&!a.disposing&&(a.dispose?a.dispose():gb.call(a));c=this.graphics;for(b in c)if(a=c[b])if(a.hide)a.hide(),a.followers&&a.followers[0]&&(a=a.followers[0].el)&&a.hide&&a.hide();else for(e in a)f=a[e],f.hide&&f.hide();for(d in this)delete this[d]}},qb=function(c,a){return(c.pIndex||
0)-(a.pIndex||0)},mb={},nb=$a();nb.hasCanvas=Va();nb.hasSvg=N;b.registrars.component=function(c){var a,d,f,h,b,e,I,l,g;if(c&&c.length&&c[0]&&c[0].toLowerCase&&(e=c[0].toLowerCase(),l=mb[e]||(mb[e]={}),c[1]&&c[1].toLowerCase)){e=c[1].toLowerCase();if(2==c.length){if("undefined"===typeof l[e])return}else{f=l[e]=l[e]||{constructor:function(){this.config={};this.__setDefaultConfig=function(){f&&f.defConfig&&ya(this.config,f.defConfig)};this.__setDefaultConfig()},defConfig:{}};h=f.constructor;g=f.defConfig;
"undefined"!==typeof c[3]&&(I=c[3].toLowerCase(),d=l[I]);if(I&&d){a=new d.constructor;h.prototype=a;h.prototype.constructor=h;I=c[2]||{};for(b in I)h.prototype[b]="undefined"!==typeof I[b]?I[b]:a[b];h.prototype.__base__=new d.constructor}else if(l[e])for(a in b=c[2],b)h.prototype[a]=b[a];else h.prototype=c[2],h.prototype.constructor=h;null!==c[5]&&("undefined"!==typeof c[5]&&(I=c[5].toLowerCase(),d=l[I]),d&&(d=d.defConfig,ya(g,d)));"undefined"!==typeof c[4]&&ya(g,c[4])}return l[e]&&l[e].constructor}};
b.core._setLineHeightFactor=function(a){!(a=k(a))||0>a||(c.lineHeightFactor=a)};c.ColorRange=A=function(c){this.linkedItems={iapi:c};this.configure()};A.prototype={configure:function(){var a=this.linkedItems.iapi,d=a.jsonData,f=d.colorrange&&ya({},d.colorrange).color,d=F(w(Y(d.chart.palette,0)-1,0),4),d=a.defaultPaletteOptions&&a.defaultPaletteOptions.paletteColors[d||0]||c.defaultPaletteOptions.paletteColors[d||0],h=function(c,a){return c.minvalue-a.minvalue},b=a.components,e,I,l,g,D;delete this.defaultAsigned;
d instanceof Array||(d=b.colorManager.getPlotColor(0));if(f&&0<f.length){for(I=l=f.length-1;0<=I;--I)if(a=f[I])a.minvalue=b.numberFormatter.getCleanValue(a.minvalue),a.maxvalue=b.numberFormatter.getCleanValue(a.maxvalue),null===a.minvalue&&(null!==a.maxvalue?a.minvalue=a.maxvalue:I!==l&&f.splice(I,1)),void 0!==a.label&&(a.label=fa(a.label)),void 0!==a.name&&(a.name=fa(a.name)),null!==a.maxvalue&&a.minvalue>a.maxvalue&&(g=a.minvalue,a.minvalue=a.maxvalue,a.maxvalue=g);f.sort(h);f[0].code||(f[0].code=
d[0]);void 0===ca(f[0].alpha)&&(f[0].alpha="100");I=0;for(l=f.length-1;I<l;I+=1)if(b=I+1,a=f[I],h=f[b],h.code||(h.code=d[b]),void 0===ca(h.alpha)&&(h.alpha="100"),null===a.maxvalue&&(a.maxvalue=h.minvalue),a.maxvalue>h.minvalue){if(a.maxvalue>h.maxvalue){b=ya(a);b.maxvalue=a.maxvalue;D=b.minvalue=h.maxvalue;for(g=I+2;g<l&&f[g].minvalue<D;g+=1);f.splice(g,0,b);l+=1}a.maxvalue=h.minvalue}a=f[I];null===a.maxvalue&&(a.maxvalue=a.minvalue)}f&&0<f.length||(e||(e={code:"CCCCCC",alpha:"100",bordercolor:"000000",
borderalpha:"100"}),f=[e],this.defaultAsigned=!0);this.colorArr=f},getColorObj:function(c){for(var a=this.colorArr,d=0,f=a.length,h,b,e={};d<f;d+=1){e.index=d;h=a[d];b=a[d+1];if(c<h.minvalue)return e.nextObj=h,e;if(c>=h.minvalue&&c<=h.maxvalue)return e.colorObj=h,b&&c==b.minvalue&&(e.nextObj=b,e.isOnMeetPoint=!0),e;e.prevObj=h}e.index=d-1;return e},getColorRangeArr:function(c,a){var d,f=this.colorArr,h,b,e=[],I,l;if(!this.defaultAsigned&&(c>a&&(d=c,c=a,a=d),c<a&&(h=this.getColorObj(c),b=this.getColorObj(a),
h&&b))){d=c;h=h.index;for(b=b.index;h<=b;h+=1)I=ya({},f[h]),I.minvalue!==d&&(I.minvalue=d),e.push(I),l=I,d=I.maxvalue;l.maxvalue=a}return e}};A.prototype.constructor=A;c.nonGradientColorRange=A=function(c){var a=c.sortLegend||!1,d=c.mapByCategory||!1,f=c.numberFormatter;c=(c.colorRange||{}).color;var h=this.colorArr=[],b,e,I,l,g,D,k=function(c,a){return c.maxvalue-a.maxvalue};this.mapByCategory=d;if(c&&(b=c.length)){for(e=0;e<b;e+=1)l=c[e],I=qa(l.color,l.code),g=Y(l.maxvalue),D=Y(l.minvalue),l=qa(l.label,
l.displayvalue,d?"":f.dataLabels(D)+" - "+f.dataLabels(g)),(I&&g>D||d&&l)&&h.push({code:I,maxvalue:g,minvalue:D,label:fa(l),labelId:l.toLowerCase()});h.length?a&&h.sort(k):this.noValidRange=!0}};A.prototype={getColorObj:function(c){var a=this.colorArr,d=this.gradient?1:0,f=a[d],h;if(this.mapByCategory){for(c=fa(c).toLowerCase();f;){if(f.labelId===c)return{code:f.code,seriesIndex:d};d+=1;f=a[d]}return{outOfRange:!0}}if(this.gradient){if(this.scaleMin<=c&&this.scaleMax>=c){for(;f&&f.maxvalue<c;)d+=
1,f=a[d];c=(c-f.minvalue)/f.range;a=a[d-1].codeRGB;f=f.codeRGB;d=a[0];h=a[1];a=a[2];return{code:("000000"+(d+(f[0]-d)*c<<16|h+(f[1]-h)*c<<8|a+(f[2]-a)*c).toString(16)).slice(-6)}}return{outOfRange:!0}}for(;f;){if(f.maxvalue>c&&f.minvalue<=c)return{code:f.code,seriesIndex:d};f.maxvalue===c&&(h=d);d+=1;f=a[d]}return(f=a[h])&&f.maxvalue===c?{code:f.code,seriesIndex:h}:{outOfRange:!0}}};A.prototype.constructor=A;c.priorityList=J.priorityList;c.schedular=J.schedular;b.extend(c,{BLANKSTRINGPLACEHOLDER:"#BLANK#",
BLANKSTRING:"",COLOR_BLACK:"000000",COLOR_GLASS:"rgba(255, 255, 255, 0.3)",COLOR_WHITE:"FFFFFF",COLOR_TRANSPARENT:"rgba(0,0,0,0)",HASHSTRING:"#",BREAKSTRING:"<br />",STRINGSTRING:"string",OBJECTSTRING:"object",COMMASTRING:",",ZEROSTRING:"0",SAMPLESTRING:"Ay0",TESTSTR:"Ag",ONESTRING:"1",DECIMALSTRING:".",STRINGUNDEFINED:"undefined",POSITION_TOP:"top",POSITION_RIGHT:"right",POSITION_BOTTOM:"bottom",POSITION_LEFT:"left",POSITION_CENTER:"center",POSITION_MIDDLE:"middle",POSITION_START:"start",POSITION_END:"end",
FC_CONFIG_STRING:"_FCconf",SHAPE_RECT:"rect",HUNDREDSTRING:"100",PXSTRING:"px",COMMASPACE:", ",TEXTANCHOR:"text-anchor",TOUCH_THRESHOLD_PIXELS:15,CLICK_THRESHOLD_PIXELS:5,DEFAULT_EXPORT_URL:u,DEFAULT_LOG_URL:a,EXPORTACTION:O,EXPORTMODE:{CLIENT:"client",SERVER:"server",AUTO:"auto"},LOGMODE:q,EXPORTFORMAT:{PNG:"png",SVG:"svg",JPEG:"jpeg",JPG:"jpg",PDF:"pdf",XLS:"xls"},regex:{stripWhitespace:m,dropHash:n,startsRGBA:L,cleanColorCode:g,breakPlaceholder:l,hexcode:/^#?[0-9a-f]{6}/i},fireEvent:function(a,
d,f,h){c.dem.fire(a,d,f,h)},plotEventHandler:function(a,h,e,I){h=h||{};var l=h.type,g=na(a.linkedItems.container,h,a);I=this.data("eventArgs")||I;g=ya(g,I);I=a.fireGroupEvent;var D=this.data("groupId"),k=function(a,d){h.FusionChartsPreventEvent=!0;E&&d.toolText&&c.toolTip&&c.toolTip.preventTooltip()};"index"in g&&!("dataIndex"in g)&&(g.dataIndex=g.index);"value"in g&&!("dataValue"in g)&&(g.dataValue=g.value);e=qa(e,"dataplotclick").toLowerCase();"dataplotrollover"===e?(h.FusionChartsPreventEvent=
!1,I?b.raiseEventGroup(D,e,g,a.chartInstance,void 0,void 0,k):b.raiseEvent(e,g,a.chartInstance,void 0,void 0,k)):I&&"dataplotclick"!==e?b.raiseEventGroup(D,e,g,a.chartInstance):b.raiseEvent(e,g,a.chartInstance);if(("click"===l||"mouseup"===l||"touchend"===l)&&/click/i.test(e)){if(d&&!f){e=(new Date).getTime();if(this.lastClickTimeStamp&&400>e-this.lastClickTimeStamp){h&&(h.originalEvent||h).preventDefault();return}this.lastClickTimeStamp=e}a.linkedItems&&a.linkedItems.linkClickFN.call({link:g.link},
a)}},getEventCoordinate:ka,getMouseCoordinate:na,addEvent:va,removeEvent:ha,getTouchEvent:ra,extend2:ya,deltend:function(c,a){if("object"!==typeof c||"object"!==typeof a)return null;W(c,a);return c},imprint:function(c,a,d){var f;if("object"!==typeof c||null===c)return a;if("object"!==typeof a||null===a)return c;for(f in a)if(void 0===c[f]||!d&&null===c[f])c[f]=a[f];return c},pluck:qa,pluckNumber:Y,getFirstDefinedValue:function(){var c,a,d;a=0;for(d=arguments.length;a<d;a+=1)if((c=arguments[a])||!1===
c||0===c||""==c)return c},createElement:da,hashify:oa,dehashify:function(c){return c&&c.replace(/^#?([a-f0-9]+)/ig,"$1")||"none"},pluckFontSize:function(){var c,a,d;a=0;for(d=arguments.length;a<d;a+=1)if(((c=arguments[a])||!1===c||0===c)&&!isNaN(c=Number(c)))return 1>c?1:c;return 1},getValidValue:ca,getPosition:sa,getViewPortDimension:Ra,bindSelectionEvent:function(c,a){a=a||{};var d=c.config,f=c.linkedItems,h=f.container,b=d.zoomType,e=ya({},a.attr||{}),I=e["stroke-width"]=Y(e.strokeWidth,e["stroke-width"],
1),f=f.eventListeners||(f.eventListeners=[]),l=sa(h,void 0,c);a=ya({chart:c,zoomX:/x/.test(b),zoomY:/y/.test(b),canvasY:d.canvasTop,canvasX:d.canvasLeft,canvasW:d.canvasWidth,canvasH:d.canvasHeight,canvasX2:d.canvasLeft+d.canvasWidth,canvasY2:d.canvasTop+d.canvasHeight,strokeWidth:I,chartPosLeft:l.left,chartPosTop:l.top,attr:e},a);e.stroke=ma(e.stroke,"rgba(51,153,255,0.8)");e.fill=ma(e.fill,"rgba(185,213,241,0.3)");e.ishot=!0;h&&(ha(h,"pointerdrag",G),f.push(va(h,"pointerdrag",G,a)));d.link&&(ha(c.linkedItems.container,
"mouseup mousedown",aa),f.push(va(c.linkedItems.container,"mouseup mousedown",aa,a)))},createContextMenu:function(a){var d=a.chart,f=d.smartLabel,h=d.logic.hcJSON&&d.logic.hcJSON.chart.useRoundEdges,b=c.Raphael,e=function(c){var a=c.menufillcolor&&oa(c.menufillcolor),d=c.menulabelcolor&&oa(c.menulabelcolor),f=c.menufillhovercolor&&oa(c.menufillhovercolor);c=c.menulabelhovercolor&&oa(c.menulabelhovercolor);return{attrs:{backgroundColor:a,color:d},hover:{backgroundColor:f,color:c}}}(d.definition.chart),
I=function(c,a,d){a=a||{};c=(c=(c=c&&b.tintshade(c.color,.7))&&b.getRGB(c))&&"rgb("+[c.r,c.g,c.b].join()+")";return{backgroundColor:a.backgroundHoverColor||d.backgroundColor||c||"rgb(64, 64, 64)",color:a.hoverColor||d.color||"#FFFFFF"}}(a.basicStyle,a.hover,e.hover),l=function(c,a,d){a=ya({},a||{});a=ya(a,c);return{fontFamily:a.fontFamily||"Verdana,sans",fontSize:a.fontSize||"10px",color:a.color||d.color||"#000000",backgroundColor:a.backgroundColor||d.backgroundColor||"rgb(255, 255, 255)"}}(a.basicStyle,
a.attrs,e.attrs),g={textAlign:"left",align:"left",paddingLeft:"5px",paddingRight:"5px",paddingTop:"5px",cursor:"pointer",borderWidth:"0px"},D=a.items,k=a.position,G=a.verticalPadding||3,t=a.horizontalPadding||6,ba={},Ba,p,z,F,m,B,Oa,aa,K,n,R,Qa,P;if(d)Ba=sa(d.linkedItems.container);else return!1;F=function(){var a=ba.items,d=a.length,b=0,e=0,I=0,D,k;ba.menuItems||(ba.menuItems=[]);for(f.setStyle(l);d--;)D=a[d],D=f.getOriSize(D.text),I||(I=D.height+2*G),b+=I,e=w(e,D.width+2*t);ba.height=b;ba.width=
e;ba.itemH=I;this.style.width=e+"px";ba.menuRect||(b=ba.menuRect=M.createElement("div"),b.style.border="1px solid rgb(100, 100, 100)",h&&(b.style.mozBorderRadius="4px",b.style.webkitBorderRadius="4px",b.style.borderRadius="4px",b.style.overflow="hidden"),E&&!N?b.style.filter="progid:DXImageTransform.Microsoft.Shadow(Color=#999999,direction=135,strength=3)":(b.style.mozBoxShadow="3px 3px 3px #999",b.style.webkitBoxShadow="3px 3px 3px #999",b.style.boxShadow="3px 3px 3px #999"),this.appendChild(b));
e=a.length;for(d=0;d<e;d+=1)if(D=a[d],ba.menuItems[d])ba.menuItems[d].label.innerHTML=D.text;else{ba.menuItems[d]={};b=ba.menuItems[d].box=M.createElement("div");b.style.height=I+"px";b.style.lineHeight=I+"px";for(k in g)b.style[k]=g[k];for(k in l)b.style[k]=l[k];ba.menuRect.appendChild(b);b.innerHTML=D.text;c.dem.listen(b,"click",P);c.dem.listen(b,"pointerhover",n);ba.menuItems[d].box._itemIdx=d}for(;ba.menuItems[d];)ba.menuItems[d].box.parentNode.removeChild(ba.menuItems[d].box),ba.menuItems.splice(d,
1)};m=function(){z||(z=M.createElement("div"),z.style.position="absolute",z.style.zIndex="50",z.style.display="none",d.linkedItems.container.appendChild&&d.linkedItems.container.appendChild(z));return z};B=function(){p=setTimeout(ba.hide,800)};Oa=function(){p&&clearTimeout(p)};aa=function(c){var a=c.x;c=c.y;var f={x:a,y:c},h=ba.width,b=ba.height,e=d.chartHeight,I=d.chartWidth;a+h>I&&0<a-h?f.x-=h:a+h>I&&(f.x=0);c+b>e&&0<c-b&&(f.y-=b);return f};K=function(){ba.hide()};n=function(c){c.target&&c.target.parentNode&&
("start"===c.state?R:Qa).call(c.target)};R=function(){var c=ba.menuItems[this._itemIdx],a;Oa();for(a in I)c.box.style[a]=I[a]};Qa=function(){var c=ba.menuItems[this._itemIdx],a;for(a in l)c.box.style[a]=l[a];B()};P=function(c){var a=ba.items[this._itemIdx];a.onclick&&a.onclick.call(a,c);c.originalEvent.stopPropagation?c.originalEvent.stopPropagation():c.originalEvent.cancelBubble=!0;ba.hide()};ba.showItem=function(c){c=this.menuItems[c];var a=this.height,d=this.itemH;c&&c._isHidden&&(c.box.style.display=
"",this.height=a+d,c._isHidden=!1,c=aa(k),this.left=c.x,this.top=c.y)};ba.hideItem=function(c){c=this.menuItems[c];var a=this.height,d=this.itemH;c&&!c._isHidden&&(c.box.style.display="none",this.height=a-d,c._isHidden=!0,c=aa(k),this.left=c.x,this.top=c.y)};ba.redraw=function(){var c=this.menuContainer;this.items=D;c?F.call(this.menuContainer):k&&void 0!==k.x&&void 0!==k.y?(this.menuContainer=m(),F.call(this.menuContainer),c=aa(k),this.left=c.x,this.top=c.y,this.menuContainer.style.left=this.left+
"px",this.menuContainer.style.top=this.top+"px"):(this.menuContainer=m(),F.call(this.menuContainer))};ba.show=function(c){var a=this;c&&void 0!==c.x&&void 0!==c.y?(c=aa(c),a.menuContainer.style.left=c.x+"px",a.menuContainer.style.top=c.y+"px"):(a.menuContainer.style.left=a.left+"px",a.menuContainer.style.top=a.top+"px");a.menuContainer.style.display="";setTimeout(function(){a.visible=!0;b.click(K)},400)};ba.hide=function(){this.visible&&(this.visible=!1,ba.menuContainer.style.display="none",ba.menuContainer.style.left=
-ba.width+"px",ba.menuContainer.style.top=-ba.height+"px",b.unclick(K))};ba.update=function(c){c&&c.length&&(this.items=c,this.redraw())};ba.updatePosition=function(c){var a=Ba.left,f=Ba.top;Ba=sa(d.linkedItems.container);c?(k=c,c=aa(c),this.left=c.x,this.top=c.y):(this.left-=a-Ba.left,this.top-=f-Ba.top)};ba.add=function(a){var d=this.menuItems,h=d.length,b;f.setStyle(l);this.width=w(this.width,f.getOriSize(a.text).width);d[h]={};d=d[h].box=M.createElement("div");d.style.height=this.itemH+"px";d.style.lineHeight=
this.itemH+"px";for(b in g)d.style[b]=g[b];for(b in l)d.style[b]=l[b];ba.menuRect.appendChild(d);d.innerHTML=a.text;c.dem.listen(d,"click",P);c.dem.listen(d,"pointerhover",n);ba.menuItems[h].box._itemIdx=h;this.height+=this.itemH};ba.removeItems=function(){for(var a=this.menuItems,d=a&&a.length,f;d--;)f=a[d],c.dem.unlisten(f.box,"click",P),c.dem.unlisten(f.box,"pointerhover",n),f.box&&f.box.parentNode&&f.box.parentNode.removeChild(f.box);delete this.menuItems;delete this.items};ba.setPosition=function(c){void 0!==
c.x&&void 0!==c.y&&(this.menuContainer.style.x=c.x,this.menuContainer.style.y=c.y)};ba.destroy=function(){this.removeItems();this.menuContainer.parentNode.removeChild(this.menuContainer)};D&&D.length&&(ba.redraw(),ba.hide());return ba},each:function(c,a,d,f){var h;d||(d=c);f||(f={});if(xa(c))for(h=0;h<c.length;h+=1){if(!1===a.call(d,c[h],h,c,f))return h}else if(null!==c&&void 0!==c)for(h in c)if(!1===a.call(d,c[h],h,c,f))return h},getDefinedColor:function(c,a){return c||0===c||""===c?c:a},getFirstValue:ma,
getFirstColor:Aa,getColorCodeString:function(c,a){var d="",f,h,b=0,e=a.split(",");for(h=e.length;b<h;b+=1)f=e[b].split("-"),d=2===f.length?"-1"!==f[0].indexOf("dark")?d+(Ka(c,100-parseInt(f[1],10))+","):d+(ta(c,100-parseInt(f[1],10))+","):d+(e[b]+",");return d.substring(0,d.length-1)},pluckColor:function(c){if(ca(c))return c=c.split(",")[0],c=c.replace(m,""),""==c&&(c="000000"),c.replace(n,"#")},toRaphaelColor:La,gradientify:Ja,trimString:function(c){c=c.replace(/^\s\s*/,"");for(var a=/\s/,d=c.length;a.test(c.charAt(--d)););
return c.slice(0,d+1)},getFirstAlpha:ua,parsePointValue:za,parseUnsafeString:fa,parseTooltext:eb,toPrecision:function(c,a){var d=V(10,a);return p(c*d)/d},hasTouch:Z,CREDIT_HREF:P,CREDIT_STRING:"FusionCharts XT Trial",getSentenceCase:function(c){c=c||"";return c.charAt(0).toUpperCase()+c.substr(1)},getCrispValues:function(c,a,d){var f=d%2/2;d=p(c+f)-f;c=p(c+a+f)-f-d;return{position:d,distance:c}},regescape:function(c){return c&&c.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},regReplaceEscape:wa,getImageURL:la,
isArray:xa,preDefStr:{colors:{B90000:"B90000",FFFFFF:"FFFFFF",AAAAAA:"AAAAAA",c000000:"000000"},defaultFontStr:"Verdana,sans",line:"line",bar:"bar",column:"column",volume:"volume",HUNDREDSTRING:"100",SEVENTYSTRING:"70",NINETYSTRING:"90",AUTOSTRING:"auto",configStr:"config",animationObjStr:"animationObj",showHoverEffectStr:"showHoverEffect",hiddenStr:"hidden",visibleStr:"visible",columnStr:"columns",barStr:"bars",barHotStr:"bar-hot",colHotStr:"col-hot",shadowStr:"shadow",dataLabelStr:"datalabel",errorBarStr:"errorBar",
errorHotStr:"error-hot",errorShadowStr:"error-shadow",negativeValueStr:"negative-values",positiveValueStr:"positive-values",zeroPlaneStr:"zero-plane",categoryPlotsStr:"categoryplots",noneStr:"NONE",setRolloverAttrStr:"setRolloverAttr",setRolloutAttrStr:"setRolloutAttr",elementStr:"element",hotElementStr:"hotElement",strokeWidthStr:"stroke-width",strokeDashStr:"stroke-dasharray",strokeLineJoinStr:"stroke-linejoin",miterStr:"miter",visiblilityStr:"visibility",ROUND:"round",PERCENTAGESTRING:"%",pStr:"p",
sStr:"s",divLineAlpha3DStr:"divLineAlpha3D",divLineAlphaStr:"divLineAlpha",altVGridColorStr:"altVGridColor",altVGridAlphaStr:"altVGridAlpha",altHGridColorStr:"altHGridColor",altHGridAlphaStr:"altHGridAlpha",PLOTFILLCOLOR_STR:"plotFillColor",UNDERSCORE:"_",gaugeFillColorStr:"gaugeFillColor",gaugeBorderColorStr:"gaugeBorderColor",NORMAL:"normal",BOLD:"bold",POINTER:"pointer",DEFAULT:"default",POSITION_MIDDLE:"middle",POSITION_START:"start",POSITION_TOP:"top",POSITION_BOTTOM:"bottom",POSITION_END:"end"},
stubFN:function(){},falseFN:function(){return!1},stableSort:function(c,a){var d=c.length,f;for(f=0;f<d;f++)c[f].ssI=f;c.sort(function(c,d){var f=a(c,d);return 0===f?c.ssI-d.ssI:f});for(f=0;f<d;f++)delete c[f].ssI},hasSVG:N,CREDIT_REGEX:S,isIE:E,isIE11:r,lineHeightFactor:1.2,getLinkAction:function(a,d){var f=function(c){return c};return function(h){var e=a.chart||a.map||{},I=Y(e.unescapelinks,1),e=Y(e.clickurloverridesplotlinks,0),l=ma(this.link,"");h=h.config&&h.config.link||"";var g=e?qa(h,l):qa(l,
h),D=g,k,G,ba,t,Ba,p,z,F,m,B;void 0!==g&&(I&&(g=v.decodeURIComponent?v.decodeURIComponent(g):v.unescape(g)),g=g.replace(/^\s+/,"").replace(/\s+$/,""),-1!==g.search(/^[a-z]*\s*[\-\:]\s*/i)&&(Ba=g.split(/\s*[\-\:]\s*/)[0].toLowerCase(),B=Ba.length),c.schedular.addJob(function(){var c;switch(Ba){case "j":ea(g);break;case "javascript":ga(g.replace(/^javascript\s*\:/i,""));break;case "n":g.replace(/^n\s*\-/i,"n-");v.open(f(g.slice(2),I));break;case "f":g=g.replace(/^f\s*\-/i,"f-");k=g.indexOf("-",2);-1!==
k?(G=g.substr(2,k-2))&&v.frames[G]?v.frames[G].location=f(g.slice(k+1),I):v.open(f(g.slice(k+1),I),G):v.open(f(g.slice(2),I));break;case "p":g=g.replace(/p\s*\-/i,"p-");k=g.indexOf("-",2);ba=g.indexOf(",",2);-1===k&&(k=1);t=f(g.slice(k+1),I);(c=v.open(t,g.substr(2,ba-2),g.substr(ba+1,k-ba-1)))&&c.focus();break;case "newchart":case "newmap":":"===g.charAt(B)&&(k=g.indexOf("-",B+1),m=g.substring(B+1,k),B=k);k=g.indexOf("-",B+1);p=g.substring(B+1,k).toLowerCase();switch(p){case "xmlurl":case "jsonurl":F=
g.substring(k+1,g.length);break;case "xml":case "json":c=z=g.substring(k+1,g.length);var h={chart:{}},e;c=c.toLowerCase();if(a.linkeddata)for(e=0;e<a.linkeddata.length;e+=1)a.linkeddata[e].id.toLowerCase()===c&&(h=a.linkeddata[e].linkedchart||a.linkeddata[e].linkedmap);F=h;p="json"}b.raiseEvent("linkedChartInvoked",{alias:m,linkType:p.toUpperCase(),data:F},d);break;default:v.location.href=g}b.raiseEvent("linkClicked",{linkProvided:D,linkInvoked:g,linkAction:Ba&&Ba.toLowerCase()},d)},c.priorityList.chartEvents))}},
graphics:{parseAlpha:Ha,convertColor:pa,getDarkColor:ta,getLightColor:Ka,mapSymbolName:function(c,a){var d="circle";c=za(c);3<=c&&(d=(a?"spoke_":"poly_")+c);return d},getColumnColor:function(c,a,d,f,h,b,e,I,l){var g,D;g=c.split(",");D=a.split(",");b=b.split(",");e=e.split(",");c=c.replace(/\s/g,"").replace(/\,$/,"");l?I={FCcolor:{color:g[0],alpha:D[0]}}:h?(c=g[0],D=D[0],I={FCcolor:{color:ta(c,75)+","+Ka(c,10)+","+ta(c,90)+","+Ka(c,55)+","+ta(c,80),alpha:D+","+D+","+D+","+D+","+D,ratio:"0,11,14,57,18",
angle:I?"90":"0"}},b=[ta(c,70)]):(a=Ha(a,g.length),I={FCcolor:{color:c,alpha:a,ratio:d,angle:I?-f:f}});return[I,{FCcolor:{color:b[0],alpha:e[0]}}]},getPointColor:function(c,a){var d,f;c=Aa(c);a=ua(a);d=Ka(c,70);f=ta(c,50);return{FCcolor:{gradientUnits:"objectBoundingBox",cx:.4,cy:.4,r:"100%",color:d+","+f,alpha:a+","+a,ratio:void 0,radialGradient:!0}}},getAngle:function(c,a,d){c=180*Math.atan(a/c)/Math.PI;2==d?c=180-c:3==d?c+=180:4==d&&(c=360-c);return c},parseColor:Fa,getValidColor:function(c){return B.test(Fa(c))&&
c},HSBtoRGB:function(c){var a=c[0],d=0,f=0,h=0,b=[],b=c[1]/100;c=c[2]/100;var e=a/60-Math.floor(a/60),I=c*(1-b),l=c*(1-e*b),b=c*(1-(1-e)*b);switch(Math.floor(a/60)%6){case 0:d=c;f=b;h=I;break;case 1:d=l;f=c;h=I;break;case 2:d=I;f=c;h=b;break;case 3:d=I;f=l;h=c;break;case 4:d=b;f=I;h=c;break;case 5:d=c,f=I,h=l}return b=[p(255*d),p(255*f),p(255*h)]},RGBtoHSB:function(c){var a=c[0],d=c[1];c=c[2];var f=Math.max(Math.max(a,d),c),h=Math.min(Math.min(a,d),c),b=0,e=0;f==h?b=0:f==a?b=(60*(d-c)/(f-h)+360)%
360:f==d?b=60*(c-a)/(f-h)+120:f==c&&(b=60*(a-d)/(f-h)+240);e=0===f?0:(f-h)/f;return[p(b),p(100*e),p(f/255*100)]},RGBtoHex:function(c){return("000000"+(c[0]<<16|c[1]<<8|c[2]).toString(16)).slice(-6)},rawRGBtoHEX:function(c){c=c.match(/[\d+]+/g).splice(0,3);return("000000"+(c[0]<<16|c[1]<<8|c[2]).toString(16)).slice(-6)},HEXtoRGB:Ea,getCubePathOutline:function(c){var a=c[2]||0,d=c[4]||0,f=c[5]||0;return["M",c[0]||0,c[1]||0,"l",d,-f,a,0,0,c[3]||0,-d,f,-a,0,"Z"]}},appliedCSS:["fontFamily","fontSize",
"fontWeight","fontStyle"],setImageDisplayMode:function(c,a,d,f,h,b,e,I){var l=f/100*I.width;f=f/100*I.height;I={};var g,D=b-2*h;g=e-2*h;var k=function(c,a,d,f,b,e){var I={};switch(c){case "top":I.y=h;break;case "bottom":I.y=e-f-h;break;case "middle":I.y=(e-f)/2}switch(a){case "left":I.x=h;break;case "right":I.x=b-d-h;break;case "middle":I.x=(b-d)/2}return I};switch(c){case "center":I.width=l;I.height=f;I.y=e/2-f/2;I.x=b/2-l/2;break;case "stretch":I.width=b-2*h;I.height=e-2*h;I.y=h;I.x=h;break;case "tile":I.width=
l;I.height=f;I.tileInfo={};I.tileInfo.xCount=c=Math.ceil(D/l);I.tileInfo.yCount=g=Math.ceil(g/f);a=k(a,d,l*c,f*g,b,e);I.y=a.y;I.x=a.x;break;case "fit":c=l/f>D/g?D/l:g/f;I.width=l*c;I.height=f*c;a=k(a,d,I.width,I.height,b,e);I.y=a.y;I.x=a.x;break;case "fill":c=l/f>D/g?g/f:D/l;I.width=l*c;I.height=f*c;a=k(a,d,I.width,I.height,b,e);I.y=a.y;I.x=a.x;break;default:a=k(a,d,l,f,b,e),I.width=l,I.height=f,I.y=a.y,I.x=a.x}return I},setLineHeight:Da,parsexAxisStyles:Ga,supportedStyle:{font:"font",fontFamily:"font-family",
"font-family":"font-family",fontWeight:"font-weight","font-weight":"font-weight",fontSize:"font-size","font-size":"font-size",lineHeight:"line-height","line-height":"line-height",textDecoration:"text-decoration","text-decoration":"text-decoration",color:"color",whiteSpace:"white-space","white-space":"white-space",padding:"padding",margin:"margin",background:"background",backgroundColor:"background-color","background-color":"background-color",backgroundImage:"background-image","background-image":"background-image",
backgroundPosition:"background-position","background-position":"background-position",backgroundPositionLeft:"background-position-left","background-position-left":"background-position-left",backgroundPositionTop:"background-position-top","background-position-top":"background-position-top",backgroundRepeat:"background-repeat","background-repeat":"background-repeat",border:"border",borderColor:"border-color","border-color":"border-color",borderStyle:"border-style","border-style":"border-style",borderThickness:"border-thickness",
"border-thickness":"border-thickness",borderTop:"border-top","border-top":"border-top",borderTopColor:"border-top-color","border-top-color":"border-top-color",borderTopStyle:"border-top-style","border-top-style":"border-top-style",borderTopThickness:"border-top-thickness","border-top-thickness":"border-top-thickness",borderRight:"border-right","border-right":"border-right",borderRightColor:"border-right-color","border-right-color":"border-right-color",borderRightStyle:"border-right-style","border-right-style":"border-right-style",
borderRightThickness:"border-right-thickness","border-right-thickness":"border-right-thickness",borderBottom:"border-bottom","border-bottom":"border-bottom",borderBottomColor:"border-bottom-color","border-bottom-color":"border-bottom-color",borderBottomStyle:"border-bottom-style","border-bottom-style":"border-bottom-style",borderBottomThickness:"border-bottom-thickness","border-bottom-thickness":"border-bottom-thickness",borderLeft:"border-left","border-left":"border-left",borderLeftColor:"border-left-color",
"border-left-color":"border-left-color",borderLeftStyle:"border-left-style","border-left-Style":"border-left-style",borderLeftThickness:"border-left-thickness","border-left-thickness":"border-left-thickness"},getAxisLimits:Ua,createTrendLine:ab,getDashStyle:Xa,axisLabelAdder:Na,chartAPI:bb,createDialog:Pa,isCanvasElemSupported:Va,componentDispose:gb,componentConfigurer:function(c){var a,d,f=[],h,b,e,I={};c=c||this;a=c.components;for(e in a)if(d=a[e],d instanceof Array)for(b=d.length,h=0;h<b;h+=1)f.push(d[h]);
else f.push(d);f.sort(qb);b=f.length;for(h=0;h<b;h+=1)d=f[h],a=d.customConfigFn,null!==a&&(a&&c[a]?I[a]||(c[a](),I[a]=!0):d.configure&&d.configure())},svgStrToDataUrl:pb,createExportActionOldString:function(c){return{download:O.DOWNLOAD,"download-save":O.DOWNLOAD,save:O.SAVE}[c]},createVersionNumberString:function(){var c;c=Q.version;return[c[0],c[1],c[2]].join(".")},cacheAllImages:ib,makeImageUrlsAbsolute:Ba,embedImagesWithNonDataURL:Oa,replaceImagesWithNonDataUrl:function(c){c=Oa(c);return c=Qa(c)},
hasUndownloadableImage:function(c){c=Oa(c);return c!==Qa(c)},isImageNotCORS:function(c){c=ob(c);return ba()?c.loaded?c.notCORS:!1:null},logCharts:function(c,a){a.logEnabled&&a.logMode!==q.SERVER&&sb(c,a)},logChartsWithoutCheck:sb,getBrowserDetails:$a,dataurlToBlob:Ya,downloadCharts:function(c,a,d,f,h){a&&!vb(a)?I(c,a,d,h):f&&cb(f,h)},isDataURITooLong:vb,browserDetails:nb,drawSvgOnCanvas:function(c,a,d,f,h,b,e){if("ie"==nb.name)new D(c,a,d,f,h,b,function(){e()});else{var I,l;c=pb(c);I=a.getContext("2d");
l=new X;l.onload=function(){I.drawImage(l,d,f,h,b);e()};l.onerror=function(){};l.src=c}},executeJS:ea,pseudoEval:ga});v.getComputedStyle||(v.getComputedStyle=function(c){this.el=c;this.getPropertyValue=function(a){var d=/(\-([a-z]){1})/g;"float"==a&&(a="styleFloat");d.test(a)&&(a=a.replace(d,function(c,a,d){return d.toUpperCase()}));return c.currentStyle[a]?c.currentStyle[a]:null};return this})}]);Q.register("module",["private","modules.renderer.js-mousetracker",function(){var b=this.hcLib,v=b.addEvent,
J=b.removeEvent,C=b.parseConfiguration,H={};Q.register("component",["tracker","mouse",{pIndex:1,init:function(b){this.eventsList="mousedown touchstart mouseup touchend mousemove touchmove click".split(" ");this.linkedItems={chart:b}},configure:function(){this.__setDefaultConfig();C(H,this.config,this.linkedItems.chart.config);this._addEvents()},_mouseEvtHandler:function(b){b.data.chart._mouseEvtHandler(b)},_getMouseEvents:function(b,u,a){var v=this._lastDatasetIndex,q=this._lastPointIndex,M={fireOut:!1,
events:[]};b=b.type;if(this.hasTouchEvent&&("mousedown"===b||"mouseout"===b))return M;switch(b){case "click":M.events.push("click");break;case "touchmove":case "mousemove":v===u&&q===a?M.events.push("mousemove"):(M.events.push("mouseover"),M.fireOut=!0);break;case "touchstart":this.hasTouchEvent=!0;case "mousedown":if(v!==u||q!==a)M.fireOut=!0,M.events.push("mouseover");M.events.push("mousedown");break;case "touchend":case "mouseup":M.events.push("mouseup");break;case "mouseout":if(v!==u||q!==a)M.fireOut=
!0,M.events.push("mouseover")}return M},_addEvents:function(){var b=this.linkedItems.chart,u=b.linkedItems.container,a=this.eventsList;b.config.enableMouseOutEvent&&a.push("mouseout");this._removeListners();v(u,a.join(" "),this._mouseEvtHandler,{chart:b,mouseTracker:this})},_removeListners:function(){var b=this.linkedItems.chart.linkedItems.container,u=this.eventsList,a,v=u.length;for(a=0;a<v;a+=1)J(b,u[a],this._mouseEvtHandler)},dispose:function(){this._removeListners()}},void 0,{stickytracking:void 0}])}]);
Q&&Q.register("module",["private","vendor.redraphael",function(){var b=this.hcLib,v=this.window,J=v.Raphael,C;(function(v){(function(b,u){var a=/[\.\/]/,v=function(){},q=function(a,b){return a-b},M,C,N={n:{}},E=function(a,b){a=String(a);var m=C,n=Array.prototype.slice.call(arguments,2),L=E.listeners(a),g=0,l,B=[],e={},V=[],p=M;M=a;for(var u=C=0,K=L.length;u<K;u++)"zIndex"in L[u]&&(B.push(L[u].zIndex),0>L[u].zIndex&&(e[L[u].zIndex]=L[u]));for(B.sort(q);0>B[g];)if(l=e[B[g++]],V.push(l.apply(b,n)),C)return C=
m,V;for(u=0;u<K;u++)if(l=L[u],"zIndex"in l)if(l.zIndex==B[g]){V.push(l.apply(b,n));if(C)break;do if(g++,(l=e[B[g]])&&V.push(l.apply(b,n)),C)break;while(l)}else e[l.zIndex]=l;else if(V.push(l.apply(b,n)),C)break;C=m;M=p;return V.length?V:null};E._events=N;E.listeners=function(b){b=b.split(a);var k=N,m,n,L,g,l,B,e,q=[k],p=[];L=0;for(g=b.length;L<g;L++){e=[];l=0;for(B=q.length;l<B;l++)for(k=q[l].n,m=[k[b[L]],k["*"]],n=2;n--;)if(k=m[n])e.push(k),p=p.concat(k.f||[]);q=e}return p};E.on=function(b,k){b=
String(b);if("function"!=typeof k)return function(){};for(var m=b.split(a),n=N,L=0,g=m.length;L<g;L++)n=n.n,n=n.hasOwnProperty(m[L])&&n[m[L]]||(n[m[L]]={n:{}});n.f=n.f||[];L=0;for(g=n.f.length;L<g;L++)if(n.f[L]==k)return v;n.f.push(k);return function(a){+a==+a&&(k.zIndex=+a)}};E.f=function(a){var b=[].slice.call(arguments,1);return function(){E.apply(null,[a,null].concat(b).concat([].slice.call(arguments,0)))}};E.stop=function(){C=1};E.nt=function(a){return a?(new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)")).test(M):
M};E.nts=function(){return M.split(a)};E.off=E.unbind=function(b,k){if(b){var m=b.split(a),n,L,g,l,B,e,q=[N];l=0;for(B=m.length;l<B;l++)for(e=0;e<q.length;e+=g.length-2){g=[e,1];n=q[e].n;if("*"!=m[l])n[m[l]]&&g.push(n[m[l]]);else for(L in n)n.hasOwnProperty(L)&&g.push(n[L]);q.splice.apply(q,g)}l=0;for(B=q.length;l<B;l++)for(n=q[l];n.n;){if(k){if(n.f){e=0;for(m=n.f.length;e<m;e++)if(n.f[e]==k){n.f.splice(e,1);break}!n.f.length&&delete n.f}for(L in n.n)if(n.n.hasOwnProperty(L)&&n.n[L].f){g=n.n[L].f;
e=0;for(m=g.length;e<m;e++)if(g[e]==k){g.splice(e,1);break}!g.length&&delete n.n[L].f}}else for(L in delete n.f,n.n)n.n.hasOwnProperty(L)&&n.n[L].f&&delete n.n[L].f;n=n.n}}else E._events=N={n:{}}};E.once=function(a,b){var m=function(){E.unbind(a,m);return b.apply(this,arguments)};return E.on(a,m)};E.version="0.4.2";E.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=E:b.eve=E})(this,!0);"undefined"===typeof v&&"object"===typeof window&&
(v=window);(function(b,u,a){u(b,"object"===typeof module&&"undefined"!==typeof module.exports?module.exports:b.eve)})(v,function(A,u){function a(c){var d,f;void 0===a._url&&(a._url="");if(a.is(c,"function"))return p?c():u.on("raphael.DOMload",c);if(a.is(c,t))return a._engine.create[T](a,c.splice(0,3+a.is(c[0],K))).add(c);d=Array.prototype.slice.call(arguments,0);return a.is(d[d.length-1],"function")?(f=d.pop(),p?f.call(a._engine.create[T](a,d)):u.on("raphael.DOMload",function(){f.call(a._engine.create[T](a,
d))})):a._engine.create[T](a,arguments)}function J(c){this._comparator=c;this._elements=[]}function q(){return this.hex}function M(c,a){for(var d=[],f=0,h=c.length;h-2*!a>f;f+=2){var b=[{x:+c[f-2],y:+c[f-1]},{x:+c[f],y:+c[f+1]},{x:+c[f+2],y:+c[f+3]},{x:+c[f+4],y:+c[f+5]}];a?f?h-4==f?b[3]={x:+c[0],y:+c[1]}:h-2==f&&(b[2]={x:+c[0],y:+c[1]},b[3]={x:+c[2],y:+c[3]}):b[0]={x:+c[h-2],y:+c[h-1]}:h-4==f?b[3]=b[2]:f||(b[0]={x:+c[f],y:+c[f+1]});d.push(["C",(-b[0].x+6*b[1].x+b[2].x)/6,(-b[0].y+6*b[1].y+b[2].y)/
6,(b[1].x+6*b[2].x-b[3].x)/6,(b[1].y+6*b[2].y-b[3].y)/6,b[2].x,b[2].y])}return d}function U(c,a,d,f,h,b,e,I,l){null==l&&(l=1);l=(1<l?1:0>l?0:l)/2;for(var g=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],D=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],k=0,G=0;12>G;G++)var ba=l*g[G]+l,t=ba*(ba*(-3*c+9*d-9*h+3*e)+6*c-12*d+6*h)-3*c+3*d,ba=ba*(ba*(-3*a+9*f-9*b+3*I)+6*a-12*f+6*b)-3*a+3*f,k=k+D[G]*oa(t*t+ba*ba);return l*k}function N(c,a,d,f,h,
b,e,I,l){if(!(0>l||U(c,a,d,f,h,b,e,I)<l)){var g=.5,D=1-g,k;for(k=U(c,a,d,f,h,b,e,I,D);.01<ra(k-l);)g/=2,D+=(k<l?1:-1)*g,k=U(c,a,d,f,h,b,e,I,D);return D}}function E(c,d,f){c=a._path2curve(c);d=a._path2curve(d);for(var h,b,e,I,l,g,D,k,G,ba,t=f?0:[],Ba=0,p=c.length;Ba<p;Ba++)if(G=c[Ba],"M"==G[0])h=l=G[1],b=g=G[2];else{"C"==G[0]?(G=[h,b].concat(G.slice(1)),h=G[6],b=G[7]):(G=[h,b,h,b,l,g,l,g],h=l,b=g);for(var z=0,F=d.length;z<F;z++)if(ba=d[z],"M"==ba[0])e=D=ba[1],I=k=ba[2];else{"C"==ba[0]?(ba=[e,I].concat(ba.slice(1)),
e=ba[6],I=ba[7]):(ba=[e,I,e,I,D,k,D,k],e=D,I=k);var m;var B=G,Oa=ba;m=f;var w=a.bezierBBox(B),aa=a.bezierBBox(Oa);if(a.isBBoxIntersect(w,aa)){for(var w=U.apply(0,B),aa=U.apply(0,Oa),w=va(~~(w/5),1),aa=va(~~(aa/5),1),K=[],n=[],R={},Qa=m?0:[],P=0;P<w+1;P++){var Ra=a.findDotsAtSegment.apply(a,B.concat(P/w));K.push({x:Ra.x,y:Ra.y,t:P/w})}for(P=0;P<aa+1;P++)Ra=a.findDotsAtSegment.apply(a,Oa.concat(P/aa)),n.push({x:Ra.x,y:Ra.y,t:P/aa});for(P=0;P<w;P++)for(B=0;B<aa;B++){var r=K[P],L=K[P+1],Oa=n[B],Ra=n[B+
1],Z=.001>ra(L.x-r.x)?"y":"x",q=.001>ra(Ra.x-Oa.x)?"y":"x",S;S=r.x;var X=r.y,V=L.x,ca=L.y,u=Oa.x,T=Oa.y,E=Ra.x,v=Ra.y;if(va(S,V)<ha(u,E)||ha(S,V)>va(u,E)||va(X,ca)<ha(T,v)||ha(X,ca)>va(T,v))S=void 0;else{var cb=(S*ca-X*V)*(u-E)-(S-V)*(u*v-T*E),sa=(S*ca-X*V)*(T-v)-(X-ca)*(u*v-T*E),Ia=(S-V)*(T-v)-(X-ca)*(u-E);if(Ia){var cb=cb/Ia,sa=sa/Ia,Ia=+cb.toFixed(2),ma=+sa.toFixed(2);S=Ia<+ha(S,V).toFixed(2)||Ia>+va(S,V).toFixed(2)||Ia<+ha(u,E).toFixed(2)||Ia>+va(u,E).toFixed(2)||ma<+ha(X,ca).toFixed(2)||ma>+va(X,
ca).toFixed(2)||ma<+ha(T,v).toFixed(2)||ma>+va(T,v).toFixed(2)?void 0:{x:cb,y:sa}}else S=void 0}S&&R[S.x.toFixed(4)]!=S.y.toFixed(4)&&(R[S.x.toFixed(4)]=S.y.toFixed(4),r=r.t+ra((S[Z]-r[Z])/(L[Z]-r[Z]))*(L.t-r.t),Oa=Oa.t+ra((S[q]-Oa[q])/(Ra[q]-Oa[q]))*(Ra.t-Oa.t),0<=r&&1.001>=r&&0<=Oa&&1.001>=Oa&&(m?Qa++:Qa.push({x:S.x,y:S.y,t1:ha(r,1),t2:ha(Oa,1)})))}m=Qa}else m=m?0:[];if(f)t+=m;else{w=0;for(aa=m.length;w<aa;w++)m[w].segment1=Ba,m[w].segment2=z,m[w].bez1=G,m[w].bez2=ba;t=t.concat(m)}}}return t}function r(c,
a,d,f,h,b){null!=c?(this.a=+c,this.b=+a,this.c=+d,this.d=+f,this.e=+h,this.f=+b):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}function k(){return this.x+" "+this.y+" "+this.width+"  "+this.height}function m(c,a,d,f,h,b){function e(c,a){var d,f,h,b;h=c;for(f=0;8>f;f++){b=((g*h+l)*h+I)*h-c;if(ra(b)<a)return h;d=(3*g*h+2*l)*h+I;if(1E-6>ra(d))break;h-=b/d}d=0;f=1;h=c;if(h<d)return d;if(h>f)return f;for(;d<f;){b=((g*h+l)*h+I)*h;if(ra(b-c)<a)break;c>b?d=h:f=h;h=(f-d)/2+d}return h}var I=3*a,l=3*
(f-a)-I,g=1-I-l,D=3*d,k=3*(h-d)-D,G=1-D-k;return function(c,a){var d=e(c,a);return((G*d+k)*d+D)*d}(c,1/(200*b))}function n(c,a){var d=[],f={};this.ms=a;this.times=1;if(c){for(var h in c)c.hasOwnProperty(h)&&(f[ca(h)]=c[h],d.push(ca(h)));d.sort(Ka)}this.anim=f;this.top=d[d.length-1];this.percents=d}function L(c,a,d){function f(c,a,d){c.isRadial&&!a.isRadial&&(a[0]={f1:c[0].f1,f2:c[0].f2},a.isRadial=!0);d||f(a,c,!0)}function h(c){var a=0,f=0,b=0,b=[],e={},I,l=e=0,g=0,a=e=b=0,f={f1:.5,f2:.5};1===c.length&&
("none"===c[0]&&(c[0]="rgba(0,0,0,0)"),c.unshift(0),c.defaultAngleSet=!0);isNaN(c[0])?~"rx".indexOf(c[0].charAt(0))?(c.isRadial=!0,b=1,-1!==c[0].indexOf(")")&&(b=c[0].indexOf(")"),e=c[0].indexOf("(")+1,a=b,b=c[0].substr(e,a-e).split(","),f.f1=parseInt(b[0])||0,f.f2=parseInt(b[1])||0,~b[2].indexOf("%")&&(b[2]=parseInt(b[2])/100),f.f3=parseInt(b[2])||0,f.f4=parseInt(b[3])||0,f.f5=parseInt(b[4])||0,f.f6=b[5]),c[0]=c[0].substr(a+1),c.unshift(f)):c[0]=0:c[0]=+c[0];a=1;for(f=c.length;a<f;++a)b=c[a].split(":"),
e=d(b[0]),c[a]={},c[a].r=e.r,c[a].g=e.g,c[a].b=e.b,c[a].opacity=e.opacity,c[a].opacity=+c[a].opacity,isNaN(c[a].opacity)&&(c[a].opacity=1),c[a].position=+b[1];c.sort(function(c,a){return"number"===typeof c||c.f1?-1:"number"===typeof a||c.f2?1:isNaN(c.position)&&isNaN(a.position)?0:isNaN(c.position)?-1:isNaN(a.position)?1:c.position-a.position});if(0!==+c[1].position)if(isNaN(c[1].position))c[1].position=0;else{e={};for(I in c[1])e[I]=c[1][I];e.position=0;c.push({});for(a=c.length-1;1!==a;--a)c[a]=
c[a-1];c[1]=e}f=c.length-1;if(100!==c[f].position)if(isNaN(c[f].position))c[f].position=100;else{e={};for(I in c[f])e[I]=c[f][I];e.position=100;c.push(e)}a=2;for(f=c.length;a<f;++a)if(!c[a].position){e=c[a-1].position;g=1;for(b=a+1;b<f;++b)if(++g,!isNaN(c[b].position)){l=+c[b].position;break}c[a].position=e+(l-e)/g}c.getColorAtPosition=function(c){for(var a=-1,d=this.length,f=1,h=this.length,b=0,e="",I={r:0,g:0,b:0};f<h-1;++f)if(this[f].position<=c&&(a=f,d=f+1),!(this[f].position<c)&&this[f].position>=
c){d=f;break}b=(c-this[a].position)/(this[d].position-this[a].position);isNaN(b)&&(b=0);for(e in I)I[e]=Db((1-b)*this[a][e]+b*this[d][e]);I.position=c;I.opacity=(1-b)*this[a].opacity+b*this[d].opacity;return I};return c}var b=c.split("-"),e=a.split("-"),I=0,l=0,g=[],D=[],k={},k=0,G=[];if(1===b.length&&1===e.length)return[c,a];b=h(b);e=h(e);!b.defaultAngleSet&&e.defaultAngleSet&&(e[0]=b[0]);!e.defaultAngleSet&&b.defaultAngleSet&&(b[0]=e[0]);f(b,e);I=1;for(l=b.length;I<l;++I)k=b[I].position,-1===G.indexOf(k)&&
G.push(k);I=1;for(l=e.length;I<l;++I)k=e[I].position,-1===G.indexOf(k)&&G.push(k);G.push(0);G.sort(function(c,a){return c-a});g=[b[0]];I=1;for(l=G.length;I<l;++I)k=G[I],k=b.getColorAtPosition(k),g.push(k);D=[e[0]];I=1;for(l=G.length;I<l;++I)k=G[I],k=e.getColorAtPosition(k),D.push(k);g.isRadial=b.isRadial;D.isRadial=e.isRadial;return[g,D]}function g(c,a){function d(c){var a=[],f=0,h=c.length;if("string"===typeof c)return c;for(f=0;f<h;++f)if(c[f].join)f&&c[f+1]&&"M"===c[f+1][0]&&"M"===c[f][0]||a.push(c[f].join(" "));
else return;a=a.join("");a=a.split(/[Mm]/).slice(1);f=0;for(h=a.length;f<h;++f)a[f]="M"+a[f];return a}function f(c){var a=0,d=0,h=[];c=c||[];d=c.length;for(a=0;a<d;++a)c[a].length-1&&h.push(c[a].join(" "));return h.join("")}function h(c,a){for(var d=c.length;d-- -1;)if(c[d].slice(1).toString()===c[d-1].slice(1).toString())c.pop();else break;1===c.length&&a&&(c.length=0)}function b(c,a){for(var d=[],f=[],h=c.length,e=0,I=0,l=0,g=0,g=0,h=a-h;0<=h;)e=c.length-1,c.push(c.slice(e)),--h;h=c.length;for(e=
0;e<=a;++e)f.push(Math.round(e/a*h));e=0;for(I=f.length-1;e<I;++e)d.push(c.slice(f[e],f[e+1])),"M"!==d[e][0][0]&&"m"!==d[e][0][0]&&(g=d[e-1].length-1,l=d[e-1][g][1],g=d[e-1][g][2],d[e].unshift(["M",l,g]));return d}var e=[],I=[],l=d(c),g=d(a),D=0,k=0,G,ba=(D=document.createElementNS&&document.createElementNS.bind(document))&&D("http://www.w3.org/2000/svg","path");if(!(l&&g&&ba&&!function(c,a){function d(c){for(var a=c.length;a-- -1;)if(c[a].join("")===c[a-1].join(""))c.pop();else break}function f(c){for(var a=
"",d=0,h=c.length;d<h;++d)a+=c[d].join(" ");return a}var h="",b="";ba.setAttribute("d","M300 10 L300 300 C50 310,50 640,350 650C600 640,600 310,400 300 L400 10 L295 10");h=ba.getTotalLength();b=ba.getPointAtLength(10);if(1829.1>h||1829.2<h||300!==Math.round(b.x)||20!==Math.round(b.y))return!0;d(c);d(a);h=f(c);b=f(a);return 2<h.split(/[Mm]/).length||2<b.split(/[Mm]/).length?!1:c.length===a.length?!0:!1}(c,a)&&c&&a))return[c,a];if(!document.createElementNS)return[c,a];l=d(c);g=d(a);if(-1!==l.join().indexOf("undefined")||
-1!==g.join().indexOf("undefined")||!ba.getTotalLength||!ba.getPointAtLength)return[c,a];k=Math.max(l.length,g.length);for(D=0;D<k;++D)G=B(l[D],g[D]),l[D]=G[0],g[D]=G[1];for(D=l.length;D--;)h(l[D],D),l[D].length||l.pop();for(D=g.length;D--;)h(g[D],D),g[D].length||g.pop();(function(c){var a=[],d=[],f=[],h=0,e=0,I=!0;if(0!==c){0<c?(a=g,I=!1):(c=-c,a=l);h=0;for(e=a.length;h<e;++h)d.push(1);for(;c--;)--h,0>h&&(h=e-1),d[h]++;for(h=0;h<e;++h)1===d[h]?f.push(a[h]):f.push.apply(f,b(a[h],d[h]));I?l=f:g=f}})(l.length-
g.length);k=Math.max(l.length,g.length);for(D=0;D<k;++D)G=B(f(l[D]),f(g[D])),l[D]=G[0],g[D]=G[1];D=0;for(k=l.length;D<k;++D)e=e.concat(l[D]);D=0;for(k=g.length;D<k;++D)I=I.concat(g[D]);return[e,I]}function l(c,a){function d(c){var a=0,f=0;c=c.split(/[MCLmcl]/).slice(1);a=0;for(f=c.length;a<f;++a)c[a]=c[a].split(" ").slice(1),a||c[a].unshift("M"),a&&(2===c[a].length&&c[a].unshift("L")||c[a].unshift("C"));return c}function f(c,a){for(var d=0,h=c.length,b,e,d=0,h=c.length;d<h;++d)b=c[d].join(" "),e=
c[d],"C"===e[0]&&e[3]===e[5]&&e[4]===e[6]?c[d].stringValue=["L",e[3],e[4]].join(" "):e.stringValue=b,a[e.stringValue]&&a[e.stringValue].push(d),a[e.stringValue]||(a[e.stringValue]=[d])}function h(c,a,d,f,b){for(var e=d,I=0,l=0,g;e<f;++e)if(g=a[c[e].stringValue])for(I=0,l=g.length;I<l;++I)if(g[I]>=b)return{index:e,mapValue:g[I],diff:e-d};return-1}function b(c){var a=c.length-1;return["M",c[a-1],c[a]].join(" ")}var e=0,I=0,l=0,g=0,D=0,k=0,G,ba,t={},Ba={},p=[],m=[],z=-1,F=-1,D=!0;c=d(c);a=d(a);f(c,t);
f(a,Ba);l=c.length;g=a.length;for(I=e=0;e<l&&I<g;){++z;++F;p[z]=[];m[F]=[];D=c[e].stringValue===a[I].stringValue;e&&(p[z].push(b(c[e-1])),m[F].push(b(a[I-1])));if(D)for(;e<l&&I<g&&c[e].stringValue===a[I].stringValue;)p[z].push(c[e].stringValue),m[F].push(a[I].stringValue),++e,++I;else{G=h(c,Ba,e,l,I);ba=h(a,t,I,g,e);D=G.index;k=G.mapValue;if(!~G||G.diff>ba.diff)D=ba.mapValue,k=ba.index;~G||~ba||(D=l-1,k=g-1);for(;e<=D;)p[z].push(c[e].stringValue),++e;for(;I<=k;)m[F].push(a[I].stringValue),++I}p[z]=
p[z].join("");m[F]=m[F].join("")}if(e<l){++z;p[z]=[];p[z].push(b(c[e-1]));++F;m[F]=[];for(m[F].push(b(a[I-1]));e<l;)p[z].push(c[e].stringValue),++e;p[z]=p[z].join("")}if(I<g){++z;p[z]=[];p[z].push(b(c[e-1]));++F;m[F]=[];for(m[F].push(b(a[I-1]));I<g;)m[F].push(a[I].stringValue),++I;m[F]=m[F].join("")}return[p,m]}function B(c,a){var d=0,f=0,h=[],b=[],e,I;c&&"M  "!==c||(c=a.split(" ").slice(0,3).join(" ").replace(/[LC]/,""));a&&"M  "!==a||(a=c.split(" ").slice(0,3).join(" ").replace(/[LC]/,""));e=l(c,
a);d=0;for(f=e[0].length;d<f;++d){I=e[0][d];var g=e[1][d],D=void 0,k=void 0,G=0,ba={},t=0,Ba=0,p=[],z=[],m=0,F=Math.round,D=document.createElementNS("http://www.w3.org/2000/svg","path");D.setAttribute("d",I);k=document.createElementNS("http://www.w3.org/2000/svg","path");k.setAttribute("d",g);t=D.getTotalLength();Ba=k.getTotalLength();m=.15*Math.max(t,Ba);m=Math.ceil(m);if(!m||!isFinite(m)||10>m)m=10;for(G=0;G<=m;++G)ba=D.getPointAtLength(G/m*t),p.push([G?"L":"M",F(ba.x),F(ba.y)]),ba=k.getPointAtLength(G/
m*Ba),z.push([G?"L":"M",F(ba.x),F(ba.y)]);I=[p,z];d?(h=h.concat(I[0].slice(1)),b=b.concat(I[1].slice(1))):(h=h.concat(I[0]),b=b.concat(I[1]))}return[h,b]}function e(c,d,f,h,b,e,I,l){f=ca(f);var D,k,G,ba,t,Ba,p,z=c.ms,F={},B={},Oa={};if(null!==d.type){l=l||{};l.hookFn&&l.hookFn.call(d);l.from=l.from||{};if(h)for(w=0,p=db.length;w<p;w++){if(Ba=db[w],Ba.el.id==d.id&&Ba.anim==c){Ba.percent!=f?(delete Ba.el.e,delete Ba.el,db.splice(w,1),G=1):k=Ba;d.attr(Ba.totalOrigin);break}}else h=+B;var w=0;for(p=c.percents.length;w<
p;w++)if(c.percents[w]==f||c.percents[w]>h*c.top){f=c.percents[w];t=c.percents[w-1]||0;z=z/c.top*(f-t);ba=c.percents[w+1];D=c.anim[f];break}else h&&d.attr(c.anim[c.percents[w]]);if(D){if(k)k.initstatus=h,k.start=new Date-k.ms*h;else{for(var aa in D)if(D.hasOwnProperty(aa))if(Fa.hasOwnProperty(aa)||d.ca[aa]){F[aa]=l.from[aa]||d.attr(aa);null==F[aa]&&(F[aa]=Ja[aa]);B[aa]=D[aa];Ba=!1;switch(Fa[aa]){case K:((p=B[aa]-F[aa])||isNaN(p))&&(Ba=!0);Oa[aa]=p/z;break;case "colour":if(F[aa]===B[aa])break;else Ba=
!0;w=L(F[aa],B[aa],a.getRGB);F[aa]=w[0];var n=w[1];if("string"===typeof n)"none"!==F[aa].toLowerCase()?(F[aa]=a.getRGB(F[aa]),F[aa].opacity||(F[aa].opacity=1)):F[aa]={r:0,g:0,b:0,opacity:0},"none"!==B[aa].toLowerCase()?(n=a.getRGB(B[aa]),n.opacity||(n.opacity=1)):n={r:0,g:0,b:0,opacity:0},Oa[aa]={r:(n.r-F[aa].r)/z,g:(n.g-F[aa].g)/z,b:(n.b-F[aa].b)/z,opacity:(n.opacity-F[aa].opacity)/z};else for(Oa[aa]=[],w=0,p=F[aa].length;w<p;++w)0===w?Oa[aa].push(n[0]):Oa[aa].push({r:(n[w].r-F[aa][w].r)/z,g:(n[w].g-
F[aa][w].g)/z,b:(n[w].b-F[aa][w].b)/z,opacity:(n[w].opacity-F[aa][w].opacity)/z});break;case "path":w=mb(F[aa],B[aa]);l.smartMorph&&(w=g(w[0],w[1],l));n=w[1];F[aa]=w[0];Oa[aa]=[];w=0;for(p=F[aa].length;w<p;w++){Oa[aa][w]=[0];var R;R=F[aa][w]?F[aa][w].length:0;for(var Qa=1;Qa<R;Qa++)Oa[aa][w][Qa]=(n[w][Qa]-F[aa][w][Qa])/z,!Ba&&Oa[aa][w][Qa]&&(Ba=!0)}break;case "transform":w=d._;p=Hb(w[aa],B[aa]);Ba=!0;if(p)for(F[aa]=p.from,B[aa]=p.to,Oa[aa]=[],Oa[aa].real=!0,w=0,p=F[aa].length;w<p;w++)for(Oa[aa][w]=
[F[aa][w][0]],Qa=1,R=F[aa][w].length;Qa<R;Qa++)Oa[aa][w][Qa]=(B[aa][w][Qa]-F[aa][w][Qa])/z;else p=d.matrix||new r,w={_:{transform:w.transform},getBBox:function(){return d.getBBox(1)}},F[aa]=[p.a,p.b,p.c,p.d,p.e,p.f],Bb(w,B[aa]),B[aa]=w._.transform,Oa[aa]=[(w.matrix.a-p.a)/z,(w.matrix.b-p.b)/z,(w.matrix.c-p.c)/z,(w.matrix.d-p.d)/z,(w.matrix.e-p.e)/z,(w.matrix.f-p.f)/z];break;case "csv":n=wa(D[aa]).split(ja);R=wa(F[aa]).split(ja);if("clip-rect"==aa)for(F[aa]=R,Oa[aa]=[],w=R.length;w--;)((p=n[w]-F[aa][w])||
isNaN(p))&&(Ba=!0),Oa[aa][w]=p/z;B[aa]=n;break;default:for(n=[].concat(D[aa]),R=[].concat(F[aa]),Oa[aa]=[],w=d.ca[aa].length;w--;)((p=(n[w]||0)-(R[w]||0))||isNaN(p))&&(Ba=!0),Oa[aa][w]=p/z}Ba||(delete F[aa],delete B[aa],delete D[aa],delete Oa[aa])}else if(a._availableAttrs.hasOwnProperty(aa)||"text"===aa||d.ca[aa])d.attr(aa,D[aa]),delete D[aa];Ba=D.easing;aa=a.easing_formulas[Ba];if(!aa)if((aa=wa(Ba).match(Ma))&&5==aa.length){var P=aa;aa=function(c){return m(c,+P[1],+P[2],+P[3],+P[4],z)}}else aa=
Da;Ba=D.start||c.start||+new Date;d.e=Ba={anim:c,percent:f,timestamp:Ba,start:Ba+(c.del||0),status:0,initstatus:h||0,stop:!1,ms:z,easing:aa,from:F,diff:Oa,to:B,el:d,callback:D.callback,prev:t,next:ba,repeat:e||c.times,origin:d.attr(),totalOrigin:b,parentEl:I,delayend:l&&l.end,delaystart:l&&l.start};db.push(Ba);if(h&&!k&&!G&&(Ba.stop=!0,Ba.start=new Date-z*h,1==db.length))return Vb();G&&(Ba.start=new Date-Ba.ms*h);1==db.length&&(ac||a.getAnimFrameFn())(Vb)}!1!==a.stopEvent&&u("raphael.anim.start."+
d.id,d,c)}}}function V(c){for(var a=0;a<db.length;a++)db[a].el.paper==c&&db.splice(a--,1)}a.upgrade="1.0.0";a.version="2.1.0";a.eve=u;C=a;var p,T="apply",K="number",t="array",Z=Array.prototype.slice,P=Array.prototype.splice,S=Array.prototype.shift,z=function(){return function(){}.hasOwnProperty("prototype")}(),R={doc:A.document,win:A},w=Object.prototype.hasOwnProperty.call(R.win,"Raphael"),F=R.win.Raphael,X=R.doc,h=R.win,d=a.supportsTouch="createTouch"in X,f=a.supportsOnlyTouch=d&&!(h.navigator.maxTouchPoints||
h.navigator.msMaxTouchPoints),c=function(){};a.ca=a.customAttributes=c.prototype;var D=function(){this.ca=this.customAttributes=new c;this._CustomAttributes=function(){};this._CustomAttributes.prototype=this.ca;this._elementsById={};this.id=a._oid++;u("raphael.new",this)},G=a.fn=D.prototype=a.prototype,aa={circle:1,rect:1,path:1,ellipse:1,text:1,image:1,group:1},Ra="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel dragstart dragmove dragend".split(" "),
Ia=a._touchMap={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},sa=a._dragEventMap={dragstart:"mousedown",dragmove:"mousemove",dragend:"mouseup"},wa=String,ca=h.parseFloat,ma=h.parseInt,qa=Math,va=qa.max,ha=qa.min,ra=qa.abs,ka=qa.pow,na=qa.cos,da=qa.sin,oa=qa.sqrt,Y=qa.round,za=qa.PI,fa=za/180,Aa=180/za,ua=wa.prototype.toLowerCase,ia=wa.prototype.toUpperCase,xa=Object.prototype.toString,ja=/[, ]+/,ya=/\{(\d+)\}/g;a._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i;var W=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
Ma=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ea=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,ga=/,?([achlmqrstvxz]),?/gi,la=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,
Ca=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,Q=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig;
a._radial_gradient=/^x?r(?:\(([^\)]*?)\))?/;var pa={NaN:1,Infinity:1,"-Infinity":1},La={hs:1,rg:1},Ja=a._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9","clip-path":"",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"about:blank","letter-spacing":0,"line-height":12,"vertical-align":"middle",opacity:1,path:"M0,0",r:0,rx:0,ry:0,
src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",visibility:"",title:"",transform:"",rotation:0,width:0,x:0,y:0,alpha:K},Fa=a._availableAnimAttrs={blur:K,"clip-rect":"csv","clip-path":"path",cx:K,cy:K,fill:"colour","fill-opacity":K,"font-size":K,height:K,opacity:K,path:"path",r:K,rx:K,ry:K,stroke:"colour","stroke-opacity":K,"stroke-width":K,transform:"transform",
width:K,x:K,y:K,color:"colour",borderColor:"colour",borderWidth:K,alpha:K},ta={},Ka=function(c,a){return ca(c)-ca(a)},Ea=function(){},Da=function(c){return c},Ga=a._rectPath=function(c,a,d,f,h){return h?[["M",c+h,a],["l",d-2*h,0],["a",h,h,0,0,1,h,h],["l",0,f-2*h],["a",h,h,0,0,1,-h,h],["l",2*h-d,0],["a",h,h,0,0,1,-h,-h],["l",0,2*h-f],["a",h,h,0,0,1,h,-h],["z"]]:[["M",c,a],["l",d,0],["l",0,f],["l",-d,0],["z"]]},Na=function(c,a,d,f){null==f&&(f=d);return[["M",c,a],["m",0,-f],["a",d,f,0,1,1,0,2*f],["a",
d,f,0,1,1,0,-2*f],["z"]]},Ua=a._getPath={group:function(){return!1},path:function(c){return c.attr("path")},circle:function(c){c=c.attrs;return Na(c.cx,c.cy,c.r)},ellipse:function(c){c=c.attrs;return Na(c.cx,c.cy,c.rx,c.ry)},rect:function(c){c=c.attrs;return Ga(c.x,c.y,c.width,c.height,c.r)},image:function(c){c=c.attrs;return Ga(c.x,c.y,c.width,c.height)},text:function(c){c=c._getBBox();return Ga(c.x,c.y,c.width,c.height)}},Pa=a.mapPath=function(c,a){if(!a)return c;var d,f,h,b,e,I,l;c=mb(c);h=0;for(e=
c.length;h<e;h++)for(l=c[h],b=1,I=l.length;b<I;b+=2)d=a.x(l[b],l[b+1]),f=a.y(l[b],l[b+1]),l[b]=d,l[b+1]=f;return c};a.pick=function(){for(var c,a=0,d=arguments.length;a<d;a+=1)if((c=arguments[a])||!1===c||0===c)return c};var Sa=a._lastArgIfGroup=function(c,d){var f=c.length-1,h=c[f];if(h&&h.constructor===a.el.constructor&&"group"===h.type)return d&&(c[f]=void 0,delete c[f],P.call(c,f,1)),h},ab=a._serializeArgs=function(c){var d=c[0],f,h;if(a.is(d,"object")&&!a.is(d,"array")&&"group"!==d.type)for(f=
d,d.path&&(d=d.path)&&!a.is(d,"string")&&a.is(d[0],t),d=1,h=arguments.length;d<h;d+=2)f[arguments[d]]||(f[arguments[d]]=arguments[d+1]);else for(f={},d=1,h=arguments.length;d<h;d+=2)f[arguments[d]]=c[(d-1)/2]||arguments[d+1];return f},Xa=a.merge=function(c,a,d,f,h){var b,e,I,l;h?(f.push(c),h.push(a)):(f=[c],h=[a]);if(a instanceof Array)for(b=0;b<a.length;b+=1){try{e=c[b],I=a[b]}catch(g){continue}if("object"!==typeof I)d&&void 0===I||(c[b]=I);else{if(null===e||"object"!==typeof e)e=c[b]=I instanceof
Array?[]:{};l=checkCyclicRef(I,h);-1!==l?e=c[b]=f[l]:Xa(e,I,d,f,h)}}else for(b in a){try{e=c[b],I=a[b]}catch(g){continue}if(null!==I&&"object"===typeof I)if(l=xa.call(I),"[object Object]"===l){if(null===e||"object"!==typeof e)e=c[b]={};l=checkCyclicRef(I,h);-1!==l?e=c[b]=f[l]:Xa(e,I,d,f,h)}else"[object Array]"===l?(null!==e&&e instanceof Array||(e=c[b]=[]),l=checkCyclicRef(I,h),-1!==l?e=c[b]=f[l]:Xa(e,I,d,f,h)):c[b]=I;else c[b]=I}return c};a.extend=function(c,a,d){if("object"!==typeof c&&"object"!==
typeof a)return null;if("object"!==typeof a||null===a)return c;"object"!==typeof c&&(c=a instanceof Array?[]:{});Xa(c,a,d);return c};var Za=a.is=function(c,a){a=ua.call(a);return"finite"==a?!pa.hasOwnProperty(+c):a==t?c instanceof Array:"object"!==a||void 0!==c&&null!==c?"null"==a&&null===c||a==typeof c&&null!==c||"object"==a&&c===Object(c)||"array"==a&&Array.isArray&&Array.isArray(c)||xa.call(c).slice(8,-1).toLowerCase()==a:!1};a.createUUID=function(c,a){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(c,
a).toUpperCase()}}(/[xy]/g,function(c){var a=16*qa.random()|0;return("x"==c?a:a&3|8).toString(16)});a.getElementID=function(c){return"rr-"+c};var bb=a.clone=z?function(c){if(Object(c)!==c)return c;var a=new c.constructor,d;for(d in c)"prototype"!==d&&c.hasOwnProperty(d)&&(a[d]=bb(c[d]));return a}:function(c){if(Object(c)!==c)return c;var a=new c.constructor,d;for(d in c)c.hasOwnProperty(d)&&(a[d]=bb(c[d]));return a},eb=A.Node;eb&&!eb.prototype.contains&&(eb.prototype.contains=function(c){for(;c=c.parentNode;)if(c===
this)return!0;return!1});a._g=R;J.prototype.isEmpty=function(){return 0===this.size()};J.prototype.peek=function(){return this.isEmpty()?null:this._elements[0]};J.prototype.deq=function(){var c=this.peek(),a=this._elements.pop(),d=this.size();if(0===d)return c;this._elements[0]=a;for(a=0;a<d;){var f=a,h=2*a+1,b=2*a+2;h<d&&0<=this._compare(h,f)&&(f=h);b<d&&0<=this._compare(b,f)&&(f=b);if(f===a)break;this._swap(f,a);a=f}return c};J.prototype.enq=function(c){c=this._elements.push(c);for(var a=c-1;0<
a;){var d=Math.floor((a-1)/2);if(0>=this._compare(a,d))break;this._swap(d,a);a=d}return c};J.prototype.size=function(){return this._elements.length};J.prototype._compare=function(c,a){return this._comparator(this._elements[c],this._elements[a])};J.prototype._swap=function(c,a){var d=this._elements[c];this._elements[c]=this._elements[a];this._elements[a]=d};a.type=h.ENABLE_RED_CANVAS&&(h.CanvasRenderingContext2D||X.createElement("canvas").getContext)?"CANVAS":h.SVGAngle||X.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure",
"1.1")?"SVG":"VML";if("VML"==a.type){var Va=X.createElement("div"),Ya;Va.innerHTML='<v:shape adj="1"/>';Ya=Va.firstChild;Ya.style.behavior="url(#default#VML)";if(!Ya||"object"!=typeof Ya.adj)return a.type="";Va=null}a.svg=!((a.vml="VML"==a.type)||(a.canvas="CANVAS"==a.type));a._Paper=D;a._id=0;a._oid=0;a.angle=function(c,d,f,h,b,e){return null==b?(c-=f,d-=h,c||d?(qa.atan2(-d,-c)*Aa+540)%360:0):a.angle(c,d,b,e)-a.angle(f,h,b,e)};a.rad=function(c){return c%360*fa};a.deg=function(c){return c*Aa%360};
a.snapTo=function(c,a,d){var f;Za(d,"finite")||(d=10);if(Za(c,t))for(f=c.length;f--;){if(ra(c[f]-a)<=d)return c[f]}else{c=+c;f=a%c;if(f<d)return a-f;if(f>c-d)return a-f+c}return a};a.setWindow=function(c){u("raphael.setWindow",a,R.win,c);h=R.win=c;X=R.doc=R.win.document;a._engine.initWin&&a._engine.initWin(R.win)};var $a=function(c){if(a.vml){var d=/^\s+|\s+$/g,f;try{var h=new ActiveXObject("htmlfile");h.write("<body>");h.close();f=h.body}catch(b){f=createPopup().document.body}var e=f.createTextRange();
$a=ba(function(c){try{f.style.color=wa(c).replace(d,"");var a=e.queryCommandValue("ForeColor");return"#"+("000000"+((a&255)<<16|a&65280|(a&16711680)>>>16).toString(16)).slice(-6)}catch(h){return"none"}})}else{var I=R.doc.createElement("i");I.title="Raphal Colour Picker";I.style.display="none";R.doc.body.appendChild(I);$a=ba(function(c){I.style.color=c;return R.doc.defaultView.getComputedStyle(I,"").getPropertyValue("color")})}return $a(c)},Ta=function(){return"hsb("+[this.h,this.s,this.b]+")"},kb=
function(){return"hsl("+[this.h,this.s,this.l]+")"},hb=function(){return this.hex},ib=function(c,d,f){null==d&&Za(c,"object")&&"r"in c&&"g"in c&&"b"in c&&(f=c.b,d=c.g,c=c.r);null==d&&Za(c,"string")&&(f=a.getRGB(c),c=f.r,d=f.g,f=f.b);if(1<c||1<d||1<f)c/=255,d/=255,f/=255;return[c,d,f]},ob=function(c,d,f,h){var b={r:c*=255,g:d*=255,b:f*=255,hex:a.rgb(c,d,f),toString:hb};Za(h,"finite")&&(b.opacity=h);return b};a.color=function(c){var d;a.is(c,"object")&&"h"in c&&"s"in c&&"b"in c?(d=a.hsb2rgb(c),c.r=
d.r,c.g=d.g,c.b=d.b,c.hex=d.hex):a.is(c,"object")&&"h"in c&&"s"in c&&"l"in c?(d=a.hsl2rgb(c),c.r=d.r,c.g=d.g,c.b=d.b,c.hex=d.hex):(a.is(c,"string")&&(c=a.getRGB(c)),a.is(c,"object")&&"r"in c&&"g"in c&&"b"in c?(d=a.rgb2hsl(c),c.h=d.h,c.s=d.s,c.l=d.l,d=a.rgb2hsb(c),c.v=d.b):(c={hex:"none"},c.r=c.g=c.b=c.h=c.s=c.v=c.l=-1));c.toString=hb;return c};a.hsb2rgb=function(c,a,d,f){this.is(c,"object")&&"h"in c&&"s"in c&&"b"in c&&(d=c.b,a=c.s,c=c.h,f=c.o);var h,b,e;c=360*c%360/60;e=d*a;a=e*(1-ra(c%2-1));d=h=
b=d-e;c=~~c;d+=[e,a,0,0,a,e][c];h+=[a,e,e,a,0,0][c];b+=[0,0,a,e,e,a][c];return ob(d,h,b,f)};a.hsl2rgb=function(c,a,d,f){this.is(c,"object")&&"h"in c&&"s"in c&&"l"in c&&(d=c.l,a=c.s,c=c.h);if(1<c||1<a||1<d)c/=360,a/=100,d/=100;var h,b,e;c=360*c%360/60;e=2*a*(.5>d?d:1-d);a=e*(1-ra(c%2-1));d=h=b=d-e/2;c=~~c;d+=[e,a,0,0,a,e][c];h+=[a,e,e,a,0,0][c];b+=[0,0,a,e,e,a][c];return ob(d,h,b,f)};a.rgb2hsb=function(c,a,d){d=ib(c,a,d);c=d[0];a=d[1];d=d[2];var f,h;f=va(c,a,d);h=f-ha(c,a,d);c=((0==h?null:f==c?(a-
d)/h:f==a?(d-c)/h+2:(c-a)/h+4)+360)%6*60/360;return{h:c,s:0==h?0:h/f,b:f,toString:Ta}};a.rgb2hsl=function(c,a,d){d=ib(c,a,d);c=d[0];a=d[1];d=d[2];var f,h,b;f=va(c,a,d);h=ha(c,a,d);b=f-h;c=((0==b?null:f==c?(a-d)/b:f==a?(d-c)/b+2:(c-a)/b+4)+360)%6*60/360;f=(f+h)/2;return{h:c,s:0==b?0:.5>f?b/(2*f):b/(2-2*f),l:f,toString:kb}};a._path2string=function(){return this.join(",").replace(ga,"$1")};var ba=a._cacher=function(c,a,d){function f(){var h=Z.call(arguments,0),b=h.join(""),e=f.cache=f.cache||{},I=f.count=
f.count||[];if(e.hasOwnProperty(b)){a:for(var h=I,I=b,l=0,g=h.length;l<g;l++)if(h[l]===I){h.push(h.splice(l,1)[0]);break a}return d?d(e[b]):e[b]}1E3<=I.length&&delete e[I.shift()];I.push(b);e[b]=c[T](a,h);return d?d(e[b]):e[b]}return f};a._preload=function(c,a){var d=X.createElement("img");d.style.cssText="position:absolute;left:-9999em;top:-9999em";d.onload=function(){a.call(this);this.onload=null;X.body.removeChild(this)};d.onerror=function(){X.body.removeChild(this)};X.body.appendChild(d);d.src=
c};a.getRGB=ba(function(c){var d,f,h,b,e;c&&Za(c,"object")&&"opacity"in c&&(d=c.opacity);if(!c||(c=wa(c)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:q};if("none"==c)return{r:-1,g:-1,b:-1,hex:"none",toString:q};!La.hasOwnProperty(c.toLowerCase().substring(0,2))&&"#"!==c.charAt()&&(c=$a(c));if(c=c.match(W)){c[2]&&(b=ma(c[2].substring(5),16),h=ma(c[2].substring(3,5),16),f=ma(c[2].substring(1,3),16));c[3]&&(b=ma((e=c[3].charAt(3))+e,16),h=ma((e=c[3].charAt(2))+e,16),f=ma((e=c[3].charAt(1))+
e,16));c[4]&&(e=c[4].split(ea),f=ca(e[0]),"%"==e[0].slice(-1)&&(f*=2.55),h=ca(e[1]),"%"==e[1].slice(-1)&&(h*=2.55),b=ca(e[2]),"%"==e[2].slice(-1)&&(b*=2.55),"rgba"==c[1].toLowerCase().slice(0,4)&&(d=ca(e[3])),e[3]&&"%"==e[3].slice(-1)&&(d/=100));if(c[5])return e=c[5].split(ea),f=ca(e[0]),"%"==e[0].slice(-1)&&(f*=2.55),h=ca(e[1]),"%"==e[1].slice(-1)&&(h*=2.55),b=ca(e[2]),"%"==e[2].slice(-1)&&(b*=2.55),"deg"!=e[0].slice(-3)&&""!=e[0].slice(-1)||(f/=360),"hsba"==c[1].toLowerCase().slice(0,4)&&(d=ca(e[3])),
e[3]&&"%"==e[3].slice(-1)&&(d/=100),a.hsb2rgb(f,h,b,d);if(c[6])return e=c[6].split(ea),f=ca(e[0]),"%"==e[0].slice(-1)&&(f*=2.55),h=ca(e[1]),"%"==e[1].slice(-1)&&(h*=2.55),b=ca(e[2]),"%"==e[2].slice(-1)&&(b*=2.55),"deg"!=e[0].slice(-3)&&""!=e[0].slice(-1)||(f/=360),"hsla"==c[1].toLowerCase().slice(0,4)&&(d=ca(e[3])),e[3]&&"%"==e[3].slice(-1)&&(d/=100),a.hsl2rgb(f,h,b,d);c={r:f,g:h,b:b,toString:q};c.hex="#"+(16777216|b|h<<8|f<<16).toString(16).slice(1);a.is(d,"finite")&&(c.opacity=d);return c}return{r:-1,
g:-1,b:-1,hex:"none",error:1,toString:q}},a);a.tintshade=ba(function(c,d){var f=a.getRGB(c),h;h=255;0>d&&(d*=-1,h=0);1<d&&(d=1);h=0===d?f:{r:h-(h-f.r)*d,g:h-(h-f.g)*d,b:h-(h-f.b)*d,toString:q};h.hex=a.rgb(h.r,h.g,h.b);f.error&&(h.error=f.error);"opacity"in f?(h.rgba="rgba("+[h.r,h.g,h.b,f.opacity].join()+")",h.opacity=f.opacity):h.rgba="rgb("+[h.r,h.g,h.b].join()+")";return h},a);a.hsb=ba(function(c,d,f){return a.hsb2rgb(c,d,f).hex});a.hsl=ba(function(c,d,f){return a.hsl2rgb(c,d,f).hex});a.rgb=ba(function(c,
a,d){return"#"+(16777216|d|a<<8|c<<16).toString(16).slice(1)});a.getColor=function(c){c=this.getColor.start=this.getColor.start||{h:0,s:1,b:c||.75};var a=this.hsb2rgb(c.h,c.s,c.b);c.h+=.075;1<c.h&&(c.h=0,c.s-=.2,0>=c.s&&(this.getColor.start={h:0,s:1,b:c.b}));return a.hex};a.getColor.reset=function(){delete this.start};a.parsePathString=function(c){if(!c)return null;var d=Ba(c);if(d.arr)return Qa(d.arr);var f={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},h=[];a.is(c,t)&&a.is(c[0],t)&&(h=Qa(c));h.length||
wa(c).replace(la,function(c,a,d){var b=[];c=a.toLowerCase();d.replace(Q,function(c,a){a&&b.push(+a)});"m"==c&&2<b.length&&(h.push([a].concat(b.splice(0,2))),c="l",a="m"==a?"l":"L");if("r"==c)h.push([a].concat(b));else for(;b.length>=f[c]&&(h.push([a].concat(b.splice(0,f[c]))),f[c]););});h.toString=a._path2string;d.arr=Qa(h);return h};a.parseTransformString=ba(function(c){if(!c)return null;var d=[];a.is(c,t)&&a.is(c[0],t)&&(d=Qa(c));d.length||wa(c).replace(Ca,function(c,a,f){var h=[];ua.call(a);f.replace(Q,
function(c,a){a&&h.push(+a)});d.push([a].concat(h))});d.toString=a._path2string;return d});var Ba=function(c){var a=Ba.ps=Ba.ps||{};a[c]?a[c].sleep=100:a[c]={sleep:100};setTimeout(function(){for(var d in a)a.hasOwnProperty(d)&&d!=c&&(a[d].sleep--,!a[d].sleep&&delete a[d])});return a[c]};a.findDotsAtSegment=function(c,a,d,f,h,b,e,I,l){var g=1-l,D=ka(g,3),k=ka(g,2),G=l*l,ba=G*l,t=D*c+3*k*l*d+3*g*l*l*h+ba*e,D=D*a+3*k*l*f+3*g*l*l*b+ba*I,k=c+2*l*(d-c)+G*(h-2*d+c),ba=a+2*l*(f-a)+G*(b-2*f+a),Ba=d+2*l*(h-
d)+G*(e-2*h+d),G=f+2*l*(b-f)+G*(I-2*b+f);c=g*c+l*d;a=g*a+l*f;h=g*h+l*e;b=g*b+l*I;I=90-180*qa.atan2(k-Ba,ba-G)/za;(k>Ba||ba<G)&&(I+=180);return{x:t,y:D,m:{x:k,y:ba},n:{x:Ba,y:G},start:{x:c,y:a},end:{x:h,y:b},alpha:I}};a.bezierBBox=function(c,d,f,h,b,e,I,l){a.is(c,"array")||(c=[c,d,f,h,b,e,I,l]);c=qb.apply(null,c);return{x:c.min.x,y:c.min.y,x2:c.max.x,y2:c.max.y,width:c.max.x-c.min.x,height:c.max.y-c.min.y}};a.isPointInsideBBox=function(c,a,d){return a>=c.x&&a<=c.x2&&d>=c.y&&d<=c.y2};a.isBBoxIntersect=
function(c,d){var f=a.isPointInsideBBox;return f(d,c.x,c.y)||f(d,c.x2,c.y)||f(d,c.x,c.y2)||f(d,c.x2,c.y2)||f(c,d.x,d.y)||f(c,d.x2,d.y)||f(c,d.x,d.y2)||f(c,d.x2,d.y2)||(c.x<d.x2&&c.x>d.x||d.x<c.x2&&d.x>c.x)&&(c.y<d.y2&&c.y>d.y||d.y<c.y2&&d.y>c.y)};a.pathIntersection=function(c,a){return E(c,a)};a.pathIntersectionNumber=function(c,a){return E(c,a,1)};a.isPointInsidePath=function(c,d,f){var h=a.pathBBox(c);return a.isPointInsideBBox(h,d,f)&&(1==E(c,[["M",d,f],["H",h.x2+10]],1)%2||1==E(c,[["M",d,f],["V",
h.y2+10]],1)%2)};a._removedFactory=function(c){return function(){u("raphael.log",null,"Raphal: you are calling to method "+c+" of removed object",c)}};var Oa=a.pathBBox=function(c){var a=Ba(c);if(!c)return{x:0,y:0,width:0,height:0,x2:0,y2:0};c=mb(c);for(var d=0,f=0,h=[],b=[],e,I=0,l=c.length;I<l;I++)e=c[I],"M"==e[0]?(d=e[1],f=e[2],h.push(d),b.push(f)):(d=qb(d,f,e[1],e[2],e[3],e[4],e[5],e[6]),h=h.concat(d.min.x,d.max.x),b=b.concat(d.min.y,d.max.y),d=e[5],f=e[6]);c=ha[T](0,h);e=ha[T](0,b);h=va[T](0,
h);b=va[T](0,b);b={x:c,y:e,x2:h,y2:b,width:h-c,height:b-e};a.bbox=bb(b);return b},Qa=function(c){c=bb(c);c.toString=a._path2string;return c},I=a._pathToRelative=function(c){var d=Ba(c);if(d.rel)return Qa(d.rel);a.is(c,t)&&a.is(c&&c[0],t)||(c=a.parsePathString(c));var f=[],h=0,b=0,e=0,I=0,l=0;"M"==c[0][0]&&(h=c[0][1],b=c[0][2],e=h,I=b,l++,f.push(["M",h,b]));for(var g=c.length;l<g;l++){var D=f[l]=[],k=c[l];if(k[0]!=ua.call(k[0]))switch(D[0]=ua.call(k[0]),D[0]){case "a":D[1]=k[1];D[2]=k[2];D[3]=k[3];
D[4]=k[4];D[5]=k[5];D[6]=+(k[6]-h).toFixed(3);D[7]=+(k[7]-b).toFixed(3);break;case "v":D[1]=+(k[1]-b).toFixed(3);break;case "m":e=k[1],I=k[2];default:for(var G=1,ba=k.length;G<ba;G++)D[G]=+(k[G]-(G%2?h:b)).toFixed(3)}else for(f[l]=[],"m"==k[0]&&(e=k[1]+h,I=k[2]+b),D=0,G=k.length;D<G;D++)f[l][D]=k[D];k=f[l].length;switch(f[l][0]){case "z":h=e;b=I;break;case "h":h+=+f[l][k-1];break;case "v":b+=+f[l][k-1];break;default:h+=+f[l][k-2],b+=+f[l][k-1]}}f.toString=a._path2string;d.rel=Qa(f);return f},cb=a._pathToAbsolute=
function(c){var d=Ba(c),f;if(d.abs)return Qa(d.abs);a.is(c,t)&&a.is(c&&c[0],t)||(c=a.parsePathString(c));if(!c||!c.length)return f=[["M",0,0]],f.toString=a._path2string,f;var h=0,b=0,e=0,I=0,l=0;f=[];"M"==c[0][0]&&(h=+c[0][1],b=+c[0][2],e=h,I=b,l++,f[0]=["M",h,b]);for(var g=3==c.length&&"M"==c[0][0]&&"R"==c[1][0].toUpperCase()&&"Z"==c[2][0].toUpperCase(),D,k=l,G=c.length;k<G;k++){f.push(l=[]);D=c[k];if(D[0]!=ia.call(D[0]))switch(l[0]=ia.call(D[0]),l[0]){case "A":l[1]=D[1];l[2]=D[2];l[3]=D[3];l[4]=
D[4];l[5]=D[5];l[6]=+(D[6]+h);l[7]=+(D[7]+b);break;case "V":l[1]=+D[1]+b;break;case "H":l[1]=+D[1]+h;break;case "R":for(var ba=[h,b].concat(D.slice(1)),p=2,F=ba.length;p<F;p++)ba[p]=+ba[p]+h,ba[++p]=+ba[p]+b;f.pop();f=f.concat(M(ba,g));break;case "M":e=+D[1]+h,I=+D[2]+b;default:for(p=1,F=D.length;p<F;p++)l[p]=+D[p]+(p%2?h:b)}else if("R"==D[0])ba=[h,b].concat(D.slice(1)),f.pop(),f=f.concat(M(ba,g)),l=["R"].concat(D.slice(-2));else for(ba=0,p=D.length;ba<p;ba++)l[ba]=D[ba];switch(l[0]){case "Z":h=e;
b=I;break;case "H":h=l[1];break;case "V":b=l[1];break;case "M":e=l[l.length-2],I=l[l.length-1];default:h=l[l.length-2],b=l[l.length-1]}}f.toString=a._path2string;d.abs=Qa(f);return f},vb=function(c,a,d,f){return[c,a,d,f,d,f]},sb=function(c,a,d,f,h,b){var e=1/3,I=2/3;return[e*c+I*d,e*a+I*f,e*h+I*d,e*b+I*f,h,b]},pb=function(c,a,d,f,h,b,e,I,l,g){var D=120*za/180,k=fa*(+h||0),G=[],t,Ba=ba(function(c,a,d){var f=c*na(d)-a*da(d);c=c*da(d)+a*na(d);return{x:f,y:c}});if(g)z=g[0],t=g[1],b=g[2],p=g[3];else{t=
Ba(c,a,-k);c=t.x;a=t.y;t=Ba(I,l,-k);I=t.x;l=t.y;na(fa*h);da(fa*h);t=(c-I)/2;z=(a-l)/2;p=t*t/(d*d)+z*z/(f*f);1<p&&(p=oa(p),d*=p,f*=p);var p=d*d,F=f*f,p=(b==e?-1:1)*oa(ra((p*F-p*z*z-F*t*t)/(p*z*z+F*t*t)));b=p*d*z/f+(c+I)/2;var p=p*-f*t/d+(a+l)/2,z=qa.asin(((a-p)/f).toFixed(9));t=qa.asin(((l-p)/f).toFixed(9));z=c<b?za-z:z;t=I<b?za-t:t;0>z&&(z=2*za+z);0>t&&(t=2*za+t);e&&z>t&&(z-=2*za);!e&&t>z&&(t-=2*za)}if(ra(t-z)>D){var G=t,F=I,m=l;t=z+D*(e&&t>z?1:-1);I=b+d*na(t);l=p+f*da(t);G=pb(I,l,d,f,h,0,e,F,m,[t,
G,b,p])}b=t-z;h=na(z);D=da(z);e=na(t);t=da(t);b=qa.tan(b/4);d=4/3*d*b;b*=4/3*f;f=[c,a];c=[c+d*D,a-b*h];a=[I+d*t,l-b*e];I=[I,l];c[0]=2*f[0]-c[0];c[1]=2*f[1]-c[1];if(g)return[c,a,I].concat(G);G=[c,a,I].concat(G).join().split(",");g=[];I=0;for(l=G.length;I<l;I++)g[I]=I%2?Ba(G[I-1],G[I],k).y:Ba(G[I],G[I+1],k).x;return g},gb=function(c,a,d,f,h,b,e,I,l){var g=1-l;return{x:ka(g,3)*c+3*ka(g,2)*l*d+3*g*l*l*h+ka(l,3)*e,y:ka(g,3)*a+3*ka(g,2)*l*f+3*g*l*l*b+ka(l,3)*I}},qb=ba(function(c,a,d,f,h,b,e,I){var l=h-
2*d+c-(e-2*h+d),g=2*(d-c)-2*(h-d),D=c-d,k=(-g+oa(g*g-4*l*D))/2/l,l=(-g-oa(g*g-4*l*D))/2/l,G=[a,I],ba=[c,e];"1e12"<ra(k)&&(k=.5);"1e12"<ra(l)&&(l=.5);0<k&&1>k&&(k=gb(c,a,d,f,h,b,e,I,k),ba.push(k.x),G.push(k.y));0<l&&1>l&&(k=gb(c,a,d,f,h,b,e,I,l),ba.push(k.x),G.push(k.y));l=b-2*f+a-(I-2*b+f);g=2*(f-a)-2*(b-f);D=a-f;k=(-g+oa(g*g-4*l*D))/2/l;l=(-g-oa(g*g-4*l*D))/2/l;"1e12"<ra(k)&&(k=.5);"1e12"<ra(l)&&(l=.5);0<k&&1>k&&(k=gb(c,a,d,f,h,b,e,I,k),ba.push(k.x),G.push(k.y));0<l&&1>l&&(k=gb(c,a,d,f,h,b,e,I,l),
ba.push(k.x),G.push(k.y));return{min:{x:ha[T](0,ba),y:ha[T](0,G)},max:{x:va[T](0,ba),y:va[T](0,G)}}}),mb=a._path2curve=ba(function(c,a){var d=!a&&Ba(c);if(!a&&d.curve)return Qa(d.curve);var f=cb(c),h=a&&cb(a),b={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},I=function(c,a){var d,f;if(!c)return["C",a.x,a.y,a.x,a.y,a.x,a.y];c[0]in{T:1,Q:1}||(a.qx=a.qy=null);switch(c[0]){case "M":a.X=c[1];a.Y=c[2];break;case "A":c=["C"].concat(pb[T](0,[a.x,a.y].concat(c.slice(1))));
break;case "S":d=a.x+(a.x-(a.bx||a.x));f=a.y+(a.y-(a.by||a.y));c=["C",d,f].concat(c.slice(1));break;case "T":a.qx=a.x+(a.x-(a.qx||a.x));a.qy=a.y+(a.y-(a.qy||a.y));c=["C"].concat(sb(a.x,a.y,a.qx,a.qy,c[1],c[2]));break;case "Q":a.qx=c[1];a.qy=c[2];c=["C"].concat(sb(a.x,a.y,c[1],c[2],c[3],c[4]));break;case "L":c=["C"].concat(vb(a.x,a.y,c[1],c[2]));break;case "H":c=["C"].concat(vb(a.x,a.y,c[1],a.y));break;case "V":c=["C"].concat(vb(a.x,a.y,a.x,c[1]));break;case "Z":c=["C"].concat(vb(a.x,a.y,a.X,a.Y))}return c},
l=function(c,a){if(7<c[a].length){c[a].shift();for(var d=c[a];d.length;)c.splice(a++,0,["C"].concat(d.splice(0,6)));c.splice(a,1);k=va(f.length,h&&h.length||0)}},g=function(c,a,d,b,e){c&&a&&"M"==c[e][0]&&"M"!=a[e][0]&&!e&&(a.splice(e,0,["M",b.x,b.y]),d.bx=0,d.by=0,d.x=c[e][1],d.y=c[e][2],k=va(f.length,h&&h.length||0))},D=0,k=va(f.length,h&&h.length||0);for(;D<k;D++){f[D]=I(f[D],b);l(f,D);h&&(h[D]=I(h[D],e));h&&l(h,D);g(f,h,b,e,D);g(h,f,e,b,D);var G=f[D],ba=h&&h[D],t=G.length,p=h&&ba.length;b.x=G[t-
2];b.y=G[t-1];b.bx=ca(G[t-4])||b.x;b.by=ca(G[t-3])||b.y;e.bx=h&&(ca(ba[p-4])||e.x);e.by=h&&(ca(ba[p-3])||e.y);e.x=h&&ba[p-2];e.y=h&&ba[p-1]}h||(d.curve=Qa(f));return h?[f,h]:f},null,Qa);a._parseDots=ba(function(c){for(var d=[],f=0,h=c.length;f<h;f++){var b={},e=c[f].match(/^([^:]*):?([\d\.]*)/);b.color=a.getRGB(e[1]);if(b.color.error)return null;b.opacity=b.color.opacity;b.color=b.color.hex;e[2]&&(b.offset=e[2]+"%");d.push(b)}f=1;for(h=d.length-1;f<h;f++)if(!d[f].offset){c=ca(d[f-1].offset||0);e=
0;for(b=f+1;b<h;b++)if(d[b].offset){e=d[b].offset;break}e||(e=100,b=h);e=ca(e);for(e=(e-c)/(b-f+1);f<b;f++)c+=e,d[f].offset=c+"%"}return d});var nb=a._tear=function(c,a){c==a.top&&(a.top=c.prev);c==a.bottom&&(a.bottom=c.next);c.next&&(c.next.prev=c.prev);c.prev&&(c.prev.next=c.next)};a._tofront=function(c,a){if(a.top===c)return!1;nb(c,a);c.next=null;c.prev=a.top;a.top.next=c;a.top=c;return!0};a._toback=function(c,a){if(a.bottom===c)return!1;nb(c,a);c.next=a.bottom;c.prev=null;a.bottom.prev=c;a.bottom=
c;return!0};a._insertafter=function(c,a,d,f){nb(c,d);c.parent=f;a===f.top&&(f.top=c);a.next&&(a.next.prev=c);c.next=a.next;c.prev=a;a.next=c};a._insertbefore=function(c,a,d,f){nb(c,d);c.parent=f;a===f.bottom&&(f.bottom=c);a.prev&&(a.prev.next=c);c.prev=a.prev;a.prev=c;c.next=a};var Fb=a.toMatrix=function(c,a){var d=Oa(c),f={_:{transform:""},getBBox:function(){return d}};Bb(f,a);return f.matrix};a.transformPath=function(c,a){return Pa(c,Fb(c,a))};var Bb=a._extractTransform=function(c,d){if(null==d)return c._.transform;
d=wa(d).replace(/\.{3}|\u2026/g,c._.transform||"");var f=a.parseTransformString(d),h=0,b=0,e=0,I=1,l=1,g=c._,e=new r;g.transform=f||[];if(f)for(var b=0,D=f.length;b<D;b++){var k=f[b],G=k.length,ba=wa(k[0]).toLowerCase(),t=k[0]!=ba,Ba=t?e.invert():0;"t"==ba&&3==G?t?(G=Ba.x(0,0),ba=Ba.y(0,0),t=Ba.x(k[1],k[2]),Ba=Ba.y(k[1],k[2]),e.translate(t-G,Ba-ba)):e.translate(k[1],k[2]):"r"==ba?2==G?(Ba=g.bb||(g.bb=c.getBBox(1)),e.rotate(k[1],Ba.x+Ba.width/2,Ba.y+Ba.height/2),h+=k[1]):4==G&&(t?(t=Ba.x(k[2],k[3]),
Ba=Ba.y(k[2],k[3]),e.rotate(k[1],t,Ba)):e.rotate(k[1],k[2],k[3]),h+=k[1]):"s"==ba?2==G||3==G?(Ba=g.bb||(g.bb=c.getBBox(1)),e.scale(k[1],k[G-1],Ba.x+Ba.width/2,Ba.y+Ba.height/2),I*=k[1],l*=k[G-1]):5==G&&(t?(t=Ba.x(k[3],k[4]),Ba=Ba.y(k[3],k[4]),e.scale(k[1],k[2],t,Ba)):e.scale(k[1],k[2],k[3],k[4]),I*=k[1],l*=k[2]):"m"==ba&&7==G&&e.add(k[1],k[2],k[3],k[4],k[5],k[6]);g.dirtyT=1;c.matrix=e}c.matrix=e;g.sx=I;g.sy=l;g.deg=h;g.dx=b=e.e;g.dy=e=e.f;1==I&&1==l&&!h&&g.bbox?(g.bbox.x+=+b,g.bbox.y+=+e):g.dirtyT=
1},Wb=function(c){var a=c[0];switch(a.toLowerCase()){case "t":return[a,0,0];case "m":return[a,1,0,0,1,0,0];case "r":return 4==c.length?[a,0,c[2],c[3]]:[a,0];case "s":return 5==c.length?[a,1,1,c[3],c[4]]:3==c.length?[a,1,1]:[a,1]}},Hb=a._equaliseTransform=function(c,d){d=wa(d).replace(/\.{3}|\u2026/g,c);c=a.parseTransformString(c)||[];d=a.parseTransformString(d)||[];for(var f=va(c.length,d.length),h=[],b=[],e=0,I,l,g,D;e<f;e++){g=c[e]||Wb(d[e]);D=d[e]||Wb(g);if(g[0]!=D[0]||"r"==g[0].toLowerCase()&&
(g[2]!=D[2]||g[3]!=D[3])||"s"==g[0].toLowerCase()&&(g[3]!=D[3]||g[4]!=D[4]))return;h[e]=[];b[e]=[];I=0;for(l=va(g.length,D.length);I<l;I++)I in g&&(h[e][I]=g[I]),I in D&&(b[e][I]=D[I])}return{from:h,to:b}};a._getContainer=function(c,d,f,h){var b;b=null!=h||a.is(c,"object")?c:R.doc.getElementById(c);if(null!=b)return b.tagName?null==d?{container:b,width:b.style.pixelWidth||b.offsetWidth,height:b.style.pixelHeight||b.offsetHeight}:{container:b,width:d,height:f}:{container:1,x:c,y:d,width:f,height:h}};
a.pathToRelative=I;a._engine={};a.path2curve=mb;a.matrix=function(c,a,d,f,h,b){return new r(c,a,d,f,h,b)};(function(c){function d(c){return c[0]*c[0]+c[1]*c[1]}function f(c){var a=oa(d(c));c[0]&&(c[0]/=a);c[1]&&(c[1]/=a)}c.add=function(c,a,d,f,h,b){var e=[[],[],[]],I=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]];a=[[c,d,h],[a,f,b],[0,0,1]];c&&c instanceof r&&(a=[[c.a,c.c,c.e],[c.b,c.d,c.f],[0,0,1]]);for(c=0;3>c;c++)for(d=0;3>d;d++){for(f=h=0;3>f;f++)h+=I[c][f]*a[f][d];e[c][d]=h}this.a=e[0][0];
this.b=e[1][0];this.c=e[0][1];this.d=e[1][1];this.e=e[0][2];this.f=e[1][2]};c.invert=function(){var c=this.a*this.d-this.b*this.c;return new r(this.d/c,-this.b/c,-this.c/c,this.a/c,(this.c*this.f-this.d*this.e)/c,(this.b*this.e-this.a*this.f)/c)};c.clone=function(){return new r(this.a,this.b,this.c,this.d,this.e,this.f)};c.translate=function(c,a){this.add(1,0,0,1,c,a)};c.scale=function(c,a,d,f){null==a&&(a=c);(d||f)&&this.add(1,0,0,1,d,f);this.add(c,0,0,a,0,0);(d||f)&&this.add(1,0,0,1,-d,-f)};c.rotate=
function(c,d,f){c=a.rad(c);d=d||0;f=f||0;var h=+na(c).toFixed(9);c=+da(c).toFixed(9);this.add(h,c,-c,h,d,f);this.add(1,0,0,1,-d,-f)};c.x=function(c,a){return c*this.a+a*this.c+this.e};c.y=function(c,a){return c*this.b+a*this.d+this.f};c.get=function(c){return+this[wa.fromCharCode(97+c)].toFixed(4)};c.toString=function(){return a.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()};c.toMatrixString=
function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};c.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};c.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};c.split=function(){var c={};c.dx=this.e;c.dy=this.f;var h=[[this.a,this.c],[this.b,this.d]];c.scalex=
oa(d(h[0]));f(h[0]);c.shear=h[0][0]*h[1][0]+h[0][1]*h[1][1];h[1]=[h[1][0]-h[0][0]*c.shear,h[1][1]-h[0][1]*c.shear];c.scaley=oa(d(h[1]));f(h[1]);c.shear/=c.scaley;var b=-h[0][1],h=h[1][1];0>h?(c.rotate=a.deg(qa.acos(h)),0>b&&(c.rotate=360-c.rotate)):c.rotate=a.deg(qa.asin(b));c.isSimple=!+c.shear.toFixed(9)&&(c.scalex.toFixed(9)==c.scaley.toFixed(9)||!c.rotate);c.isSuperSimple=!+c.shear.toFixed(9)&&c.scalex.toFixed(9)==c.scaley.toFixed(9)&&!c.rotate;c.noRotation=!+c.shear.toFixed(9)&&!c.rotate;return c};
c.toTransformString=function(c){c=c||this.split();return c.isSimple?(c.scalex=+c.scalex.toFixed(4),c.scaley=+c.scaley.toFixed(4),c.rotate=+c.rotate.toFixed(4),(c.dx||c.dy?"t"+[c.dx,c.dy]:"")+(1!=c.scalex||1!=c.scaley?"s"+[c.scalex,c.scaley,0,0]:"")+(c.rotate?"r"+[c.rotate,0,0]:"")):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}})(r.prototype);var wb=h.navigator,Nb=wb.userAgent.match(/Version\/(.*?)\s/)||wb.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==wb.vendor&&
(Nb&&4>Nb[1]||"iP"==wb.platform.slice(0,2))||"Google Inc."==wb.vendor&&Nb&&8>Nb[1]?G.safari=function(){var c=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){c.remove()});return!0}:G.safari=Ea;for(var xb=function(){this.returnValue=!1},yb=function(){return this.originalEvent.preventDefault()},Cb=function(){this.cancelBubble=!0},Ib=function(){return this.originalEvent.stopPropagation()},Jb=a.addEvent=function(){if(R.doc.addEventListener)return function(c,
a,h,b){var e=f&&Ia[a]||a,I;Ia[sa[a]]&&(e=Ia[sa[a]]);I=function(e){var I=R.doc.documentElement.scrollTop||R.doc.body.scrollTop,l=R.doc.documentElement.scrollLeft||R.doc.body.scrollLeft,g;if(d&&Ia.hasOwnProperty(f?a:sa[a]))for(var D=0,k=e.targetTouches&&e.targetTouches.length;D<k;D++)if(g=e.targetTouches[D].target,g==c||"tspan"==g.nodeName&&g.parentNode==c){g=e;e=e.targetTouches[D];e.originalEvent=g;e.preventDefault=yb;e.stopPropagation=Ib;break}return h.call(b,e,e.clientX+l,e.clientY+I)};c.addEventListener(e,
I,!1);return function(){c.removeEventListener(e,I,!1);return!0}};if(R.doc.attachEvent)return function(c,a,d,f){var h=function(c){c=c||R.win.event;var a=c.clientX+(R.doc.documentElement.scrollLeft||R.doc.body.scrollLeft),h=c.clientY+(R.doc.documentElement.scrollTop||R.doc.body.scrollTop);c.preventDefault=c.preventDefault||xb;c.stopPropagation=c.stopPropagation||Cb;return d.call(f,c,a,h)};c.attachEvent("on"+a,h);return function(){c.detachEvent("on"+a,h);return!0}}}(),ub=[],jb=function(c){for(var f=
c.clientX,h=c.clientY,b=R.doc.documentElement.scrollTop||R.doc.body.scrollTop,e=R.doc.documentElement.scrollLeft||R.doc.body.scrollLeft,I,l,g=ub.length;g--;){I=ub[g];if(d&&"touchmove"===c.type){l=c.touches.length;for(var D;l--;)if(D=c.touches[l],D.identifier==I.el._drag.id){f=D.clientX;h=D.clientY;(c.originalEvent?c.originalEvent:c).preventDefault();break}}else c.preventDefault();if(!I.el.removed){l=a._engine.getNode(I.el);var k=l.nextSibling,G=l.parentNode,ba=l.style.display;R.win.opera&&G.removeChild(l);
l.style.display="none";D=I.el.paper.getElementByPoint(f,h);l.style.display=ba;R.win.opera&&(k?G.insertBefore(l,k):G.appendChild(l));D&&u("raphael.drag.over."+I.el.id,I.el,D);f+=e;h+=b;l=c.data=[f-I.el._drag.x,h-I.el._drag.y,f,h];u("raphael.drag.move."+I.el.id,I.move_scope||I.el,c,l)}}},tb=function(c){a.undragmove(jb).undragend(tb);a.unmousemove(jb).unmouseup(tb);for(var d=ub.length,f;d--;)f=ub[d],f.el._drag={},u("raphael.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,c);ub=[]},
Wa=a.el={},Kb=Ra.length;Kb--;)(function(c){a[c]=Wa[c]=function(d,f){a.is(d,"function")&&(this.events=this.events||[],this.events.push({name:c,f:d,unbind:Jb(this.shape||this.node||R.doc,c,d,f||this)}));return this};a["un"+c]=Wa["un"+c]=function(a){for(var d=this.events||[],f=d.length;f--;)if(d[f].name==c&&d[f].f==a){d[f].unbind();d.splice(f,1);!d.length&&delete this.events;break}return this}})(Ra[Kb]);Wa.data=function(c,d){var f=ta[this.id]=ta[this.id]||{};if(1==arguments.length){if(a.is(c,"object")){for(var h in c)c.hasOwnProperty(h)&&
this.data(h,c[h]);return this}u("raphael.data.get."+this.id,this,f[c],c);return f[c]}f[c]=d;u("raphael.data.set."+this.id,this,d,c);return this};Wa.removeData=function(c){null==c?delete ta[this.id]:ta[this.id]&&delete ta[this.id][c];return this};Wa.getData=function(){return bb(ta[this.id]||{})};var zb=[],Gb=function(){this.untrack=Jb(R.doc,"mouseup",Sb,this)},Sb=function(){this.untrack();this.untrack=null;return this.fn&&this.fn.apply(this.scope||this.el,arguments)};Wa.mouseup=function(c,d,f){if(!f)return a.mouseup.apply(this,
arguments);zb.push(f={el:this,fn:c,scope:d});f.unbind=Jb(this.shape||this.node||R.doc,"mousedown",Gb,f);return this};Wa.unmouseup=function(c){for(var d=zb.length,f;d--;)zb[d].el===this&&zb[d].fn===c&&(f=zb[d],f.unbind(),f.untrack&&f.untrack(),zb.splice(d,1));return f?this:a.unmouseup.apply(this,arguments)};Wa.hover=function(c,a,d,f){return this.mouseover(c,d).mouseout(a,f||d)};Wa.unhover=function(c,a){return this.unmouseover(c).unmouseout(a)};var fb=[];Wa.drag=function(c,h,b,e,I,l){function g(D){var k=
R.doc.documentElement.scrollTop||R.doc.body.scrollTop,G=R.doc.documentElement.scrollLeft||R.doc.body.scrollLeft;this._drag.x=D.clientX+G;this._drag.y=D.clientY+k;this._drag.id=D.identifier;d&&!f&&!ub.length&&a.dragmove(jb).dragend(tb);!ub.length&&a.mousemove(jb).mouseup(tb);ub=[{el:this,move_scope:e,start_scope:I,end_scope:l}];k=D.data=[D.clientX+G,D.clientY+k];h&&h.call(I||e||this,D,k);c&&u.on("raphael.drag.move."+this.id,c);b&&u.on("raphael.drag.end."+this.id,b)}this._drag={};fb.push({el:this,start:g,
onstart:h,onmove:c,onend:b});d&&!f&&this.dragstart(g);this.mousedown(g);return this};Wa.onDragOver=function(c){c?u.on("raphael.drag.over."+this.id,c):u.unbind("raphael.drag.over."+this.id)};Wa.undrag=function(){for(var c=fb.length;c--;)fb[c].el==this&&(this.unmousedown(fb[c].start),fb.splice(c,1),u.unbind("raphael.drag.*."+this.id));!fb.length&&a.unmousemove(jb).unmouseup(tb);delete this._drag};Wa.undragmove=function(){for(var c=fb.length;c--;)fb[c].el==this&&fb[c].onmove&&(this.unmousedown(fb[c].start),
fb.splice(c,1),u.unbind("raphael.drag.move."+this.id));!fb.length&&a.unmousemove(jb).unmouseup(tb)};Wa.undragend=function(){for(var c=fb.length;c--;)fb[c].el==this&&fb[c].onend&&(this.unmousedown(fb[c].start),fb.splice(c,1),u.unbind("raphael.drag.end."+this.id));!fb.length&&a.unmousemove(jb).unmouseup(tb)};Wa.undragstart=function(){for(var c=fb.length;c--;)fb[c].el==this&&fb[c].onstart&&(this.unmousedown(fb[c].start),fb.splice(c,1),u.unbind("raphael.drag.start."+this.id),this._dragstart=!1);!fb.length&&
a.unmousemove(jb).unmouseup(tb)};Wa.follow=function(c,d,f){if(c.removed||c.constructor!==a.el.constructor)return this;c.followers.push({el:this,stalk:f={before:"insertBefore",after:"insertAfter"}[f],cb:d});f&&this[f](c);return this};Wa.unfollow=function(c){if(c.removed||c.constructor!==a.el.constructor)return this;for(var d=0,f=c.followers.length;d<f;d++)if(c.followers[d].el===this){c.followers.splice(d,1);break}return this};G.hide=function(){this.canvas.style.visibility="hidden";return this};G.show=
function(){this.canvas.style.visibility="";return this};G.group=function(){var c=arguments,d=Sa(c,!0),c=a._engine.group(this,c[0],d);return this.__set__&&this.__set__.push(c),this._elementsById[c.id]=c};G.circle=function(){var c=arguments,d=Sa(c,!0),c=ab(c,"cx",0,"cy",0,"r",0,"fill","none","stroke","#000"),d=a._engine.circle(this,c,d);return this.__set__&&this.__set__.push(d),this._elementsById[d.id]=d};G.rect=function(){var c=arguments,d=Sa(c,!0),c=ab(c,"x",0,"y",0,"width",0,"height",0,"r",0,"fill",
"none","stroke","#000"),d=a._engine.rect(this,c,d);return this.__set__&&this.__set__.push(d),this._elementsById[d.id]=d};G.ellipse=function(){var c=arguments,d=Sa(c,!0),c=ab(c,"x",0,"y",0,"rx",0,"ry",0,"fill","none","stroke","#000"),d=a._engine.ellipse(this,c,d);return this.__set__&&this.__set__.push(d),this._elementsById[d.id]=d};G.path=function(){var c=arguments,d=Sa(c,!0),f=this.config,c=ab(c,"path","","fill","none","stroke","#000","stroke-linecap",f&&f["stroke-linecap"]||"butt"),d=a._engine.path(this,
c,d);return this.__set__&&this.__set__.push(d),this._elementsById[d.id]=d};G.image=function(){var c=arguments,d=Sa(c,!0),c=ab(c,"src","","x",0,"y",0,"width",0,"height",0);out=a._engine.image(this,c,d);return this.__set__&&this.__set__.push(out),this._elementsById[out.id]=out};G.text=function(){var c=arguments,d=Sa(c,!0),f=ab(c,"x",0,"y",0,"text","","stroke","none","fill","#000","text-anchor","middle","vertical-align","middle"),c=a._engine.text(this,f,d,c[1]);return this.__set__&&this.__set__.push(c),
this._elementsById[c.id]=c};G.set=function(c){!a.is(c,"array")&&(c=P.call(arguments,0,arguments.length));var d=new Eb(c);this.__set__&&this.__set__.push(d);return d};G.setConfig=function(c,a){void 0!==c&&void 0!==a&&(this.config=this.config||{},this.config[c]=a);return this.config};G.setStart=function(c){this.__set__=c||this.set()};G.setFinish=function(c){c=this.__set__;delete this.__set__;return c};G.setSize=function(c,d){return a._engine.setSize.call(this,c,d)};G.setDimension=function(c,a){"object"===
typeof c?this.setSize(c.width,c.height):this.setSize(c,a)};G.attr=function(c){if(null==c)return{width:this.width,height:this.height};if(a.is(c,"string"))return this[c];this.setDimension(c);return this};G.status=function(c,a){return Wa.status.call(this,c,a)};G.animateWith=function(c,a,d,f,h,b,e){return Wa.animateWith.call(this,c,a,d,f,h,b,e)};G.animate=function(c,a,d,f){return Wa.animate.call(this,c,a,d,f)};G.setViewBox=function(c,d,f,h,b){return a._engine.setViewBox.call(this,c,d,f,h,b)};G.top=G.bottom=
null;G.raphael=a;G.getElementByPoint=function(c,a){var d,f,h=this.canvas,b=R.doc.elementFromPoint(c,a);if(R.win.opera&&"svg"==b.tagName){f=h.getBoundingClientRect();d=h.ownerDocument;var e=d.body,I=d.documentElement;d=f.top+(R.win.pageYOffset||I.scrollTop||e.scrollTop)-(I.clientTop||e.clientTop||0);f=f.left+(R.win.pageXOffset||I.scrollLeft||e.scrollLeft)-(I.clientLeft||e.clientLeft||0);e=h.createSVGRect();e.x=c-f;e.y=a-d;e.width=e.height=1;d=h.getIntersectionList(e,null);d.length&&(b=d[d.length-1])}if(!b)return null;
for(;b.parentNode&&b!=h.parentNode&&!b.raphael;)b=b.parentNode;b==this.canvas.parentNode&&(b=h);return b=b&&b.raphael?this.getById(b.raphaelid):null};G.getElementsByBBox=function(c){var d=this.set();this.forEach(function(f){a.isBBoxIntersect(f.getBBox(),c)&&d.push(f)});return d};G.getById=function(c){return this._elementsById[c]||null};G.forEach=function(c,a){for(var d=this.bottom;d&&!1!==c.call(a,d);)d=d.next;return this};G.getElementsByPoint=function(c,a){var d=this.set();this.forEach(function(f){f.isPointInside(c,
a)&&d.push(f)});return d};Wa.isPointInside=function(c,d){var f=this.realPath=this.realPath||Ua[this.type](this),h;return a.isPointInsidePath((h=this.attr("transform"))&&h.length&&a.transformPath(f,h)||f,c,d)};Wa.getBBox=function(c){if(this.removed)return{};var a=this._;if(c){if(a.dirty||!a.bboxwt)this.realPath=Ua[this.type](this),a.bboxwt=Oa(this.realPath),a.bboxwt.toString=k,a.dirty=0;return a.bboxwt}if(a.dirty||a.dirtyT||!a.bbox){if(a.dirty||!this.realPath)a.bboxwt=0,this.realPath=Ua[this.type](this);
a.bbox=Oa(Pa(this.realPath,this.matrix));a.bbox.toString=k;a.dirty=a.dirtyT=0}return a.bbox};Wa.clone=function(){if(this.removed)return null;var c=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(c);return c};Wa.glow=function(c){if("text"==this.type)return null;c=c||{};var a=(c.width||10)+(+this.attr("stroke-width")||1),d=c.fill||!1,f=c.opacity||.5,h=c.offsetx||0,b=c.offsety||0;c=c.color||"#000";for(var e=a/2,I=this.paper,l=I.set(),g=this.realPath||Ua[this.type](this),g=this.matrix?
Pa(g,this.matrix):g,D=1;D<e+1;D++)l.push(I.path(g).attr({stroke:c,fill:d?c:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(a/e*D).toFixed(3),opacity:+(f/e).toFixed(3)}));return l.insertBefore(this).translate(h,b)};var Tb=function(c,d,f,h,b,e,I,l,g){return null==g?U(c,d,f,h,b,e,I,l):a.findDotsAtSegment(c,d,f,h,b,e,I,l,N(c,d,f,h,b,e,I,l,g))},Lb=function(c,d){return function(f,h,b){f=mb(f);for(var e,I,l,g,D="",k={},G=0,ba=0,t=f.length;ba<t;ba++){l=f[ba];if("M"==l[0])e=+l[1],
I=+l[2];else{g=Tb(e,I,l[1],l[2],l[3],l[4],l[5],l[6]);if(G+g>h){if(d&&!k.start){e=Tb(e,I,l[1],l[2],l[3],l[4],l[5],l[6],h-G);D+=["C"+e.start.x,e.start.y,e.m.x,e.m.y,e.x,e.y];if(b)return D;k.start=D;D=["M"+e.x,e.y+"C"+e.n.x,e.n.y,e.end.x,e.end.y,l[5],l[6]].join();G+=g;e=+l[5];I=+l[6];continue}if(!c&&!d)return e=Tb(e,I,l[1],l[2],l[3],l[4],l[5],l[6],h-G),{x:e.x,y:e.y,alpha:e.alpha}}G+=g;e=+l[5];I=+l[6]}D+=l.shift()+l}k.end=D;e=c?G:d?k:a.findDotsAtSegment(e,I,l[0],l[1],l[2],l[3],l[4],l[5],1);e.alpha&&(e=
{x:e.x,y:e.y,alpha:e.alpha});return e}},Mb=Lb(1),Ob=Lb(),Pb=Lb(0,1);a.getTotalLength=Mb;a.getPointAtLength=Ob;a.getSubpath=function(c,a,d){if(1E-6>this.getTotalLength(c)-d)return Pb(c,a).end;c=Pb(c,d,1);return a?Pb(c,a).end:c};Wa.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():Mb(this.attrs.path)};Wa.getPointAtLength=function(c){if("path"==this.type)return Ob(this.attrs.path,c)};Wa.getSubpath=function(c,d){if("path"==this.type)return a.getSubpath(this.attrs.path,
c,d)};var rb=a.easing_formulas={linear:function(c){return c},"<":function(c){return ka(c,1.7)},">":function(c){return ka(c,.48)},"<>":function(c){var a=.48-c/1.04,d=oa(.1734+a*a);c=d-a;c=ka(ra(c),1/3)*(0>c?-1:1);a=-d-a;a=ka(ra(a),1/3)*(0>a?-1:1);c=c+a+.5;return 3*(1-c)*c*c+c*c*c},backIn:function(c){return c*c*(2.70158*c-1.70158)},backOut:function(c){--c;return c*c*(2.70158*c+1.70158)+1},elastic:function(c){return c==!!c?c:ka(2,-10*c)*da(2*(c-.075)*za/.3)+1},bounce:function(c){c<1/2.75?c*=7.5625*c:
c<2/2.75?(c-=1.5/2.75,c=7.5625*c*c+.75):c<2.5/2.75?(c-=2.25/2.75,c=7.5625*c*c+.9375):(c-=2.625/2.75,c=7.5625*c*c+.984375);return c},oneBounceOut:function(c){return.9>=c?1.33*rb.easeIn(c):1.2-c/5},elasticOnce:function(c){return c==!!c?c:Math.pow(2,-10*c)*Math.sin(2*(c-.225)*Math.PI/.9)+1},easeInQuad:function(c){return c*c},easeOutQuad:function(c){return c*(2-c)},easeInOutQuad:function(c){return.5>c?2*c*c:-1+(4-2*c)*c},easeInCubic:function(c){return c*c*c},easeOutCubic:function(c){return--c*c*c+1},
easeInOutCubic:function(c){return.5>c?4*c*c*c:(c-1)*(2*c-2)*(2*c-2)+1},easeInQuart:function(c){return c*c*c*c},easeOutQuart:function(c){return 1- --c*c*c*c},easeInOutQuart:function(c){return.5>c?8*c*c*c*c:1-8*--c*c*c*c},easeInQuint:function(c){return c*c*c*c*c},easeOutQuint:function(c){return 1+--c*c*c*c*c},easeInOutQuint:function(c){return.5>c?16*c*c*c*c*c:1+16*--c*c*c*c*c}};rb.easeIn=rb["ease-in"]=rb["<"];rb.easeOut=rb["ease-out"]=rb[">"];rb.easeInOut=rb["ease-in-out"]=rb["<>"];rb["back-in"]=rb.backIn;
rb["back-out"]=rb.backOut;var db=[],ac,Vb=function(){for(var c=+new Date,d=0,f=[],h=0,I=0;d<db.length;d++)if(I=db[d],!(I.el.removed||I.paused||I.parentEl&&I.parentEl.e&&I.parentEl.e.paused)){for(var l=c-I.start,g=I.ms,D=I.easing,k=I.from,G=I.diff,ba=I.to,t=I.el,Ba={},p,z={},F=!1!==a.stopEvent,m,h=0,h=I.el&&I.el.animElements&&I.el.animElements.peek();h&&h.pos<=l/g;)f.push(I.el.animElements.deq()),h=I.el.animElements.peek();I.initstatus?(l=(I.initstatus*I.anim.top-I.prev)/(I.percent-I.prev)*g,I.status=
I.initstatus,delete I.initstatus,I.stop&&(delete I.el,db.splice(d--,1))):I.status=(I.prev+l/g*(I.percent-I.prev))/I.anim.top;h=g;I.parentEl&&I.parentEl.animElements?(g=I.delayend-I.delaystart,l=I.parentEl.cPos-I.delaystart):I.el.animElements&&(I.el.cPos=l/g);if(!(0>l))if(l<g){var aa=D(l/g),g=h,w;for(w in k)if(k.hasOwnProperty(w)){switch(Fa[w]){case K:p=+k[w]+aa*g*G[w];break;case "colour":if(G[w].length){p=[];h=0;for(l=k[w].length;h<l;++h)0===h?k[w].isRadial||G[w].isRadial?(radial="xr(",radial+=k[w][0].f1*
(1-aa)+G[w][0].f1*aa||"",radial+=",",radial+=k[w][0].f2*(1-aa)+G[w][0].f2*aa||"",radial+=",",radial+=k[w][0].f3*(1-aa)+G[w][0].f3*aa||"",radial+=",",radial+=k[w][0].f4*(1-aa)+G[w][0].f4*aa||"",radial+=",",radial+=k[w][0].f5*(1-aa)+G[w][0].f5*aa||"",radial+=",",radial+=k[w][0].f6||"userSpaceOnUse",radial+=")",p.push(radial)):(p.push(k[w][h]*(1-aa)+aa*G[w][h]),0>=p[0]&&(p[0]+=360)):p.push("rgba("+[Db(Y(k[w][h].r+aa*g*G[w][h].r)),Db(Y(k[w][h].g+aa*g*G[w][h].g)),Db(Y(k[w][h].b+aa*g*G[w][h].b)),k[w][h].opacity+
aa*g*G[w][h].opacity].join()+"):"+k[w][h].position);p=p.join("-");if(k[w].isRadial||G[w].isRadial)p=p.replace("-","")}else tmpOpacity=k[w].opacity+aa*g*G[w].opacity,isNaN(tmpOpacity)&&(tmpOpacity=1),p="rgba("+[Db(Y(k[w].r+aa*g*G[w].r)),Db(Y(k[w].g+aa*g*G[w].g)),Db(Y(k[w].b+aa*g*G[w].b)),tmpOpacity].join()+")";break;case "path":p=[];h=0;for(l=k[w].length;h<l;h++){p[h]=[k[w][h][0]];D=k[w][h]?k[w][h].length:0;for(ba=1;ba<D;ba++)p[h][ba]=(+k[w][h][ba]+aa*g*G[w][h][ba]).toFixed(4);p[h]=p[h].join(" ")}p=
p.join(" ");break;case "transform":if(G[w].real)for(p=[],h=0,l=k[w].length;h<l;h++)for(p[h]=[k[w][h][0]],ba=1,D=k[w][h].length;ba<D;ba++)p[h][ba]=k[w][h][ba]+aa*g*G[w][h][ba];else p=function(c){return+k[w][c]+aa*g*G[w][c]},p=[["m",p(0),p(1),p(2),p(3),p(4),p(5)]];break;case "csv":if("clip-rect"==w)for(p=[],h=4;h--;)p[h]=+k[w][h]+aa*g*G[w][h];break;default:for(l=[].concat(k[w]),p=[],h=t.ca[w].length;h--;)p[h]=+l[h]+aa*g*G[w][h]}Ba[w]=p}t.attr(Ba);F&&function(c,a,d){setTimeout(function(){u("raphael.anim.frame."+
c,a,d)})}(t.id,t,I.anim)}else{(function(c,d,f){setTimeout(function(){F&&u("raphael.anim.frame."+d.id,d,f);F&&u("raphael.anim.finish."+d.id,d,f);a.is(c,"function")&&c.call(d)})})(I.callback,t,I.anim);t.attr(ba);delete I.el;db.splice(d--,1);if(1<I.repeat&&!I.next){for(m in ba)ba.hasOwnProperty(m)&&(z[m]=I.totalOrigin[m]);I.el.attr(z);e(I.anim,I.el,I.anim.percents[0],null,I.totalOrigin,I.repeat-1)}I.next&&!I.stop&&e(I.anim,I.el,I.next,null,I.totalOrigin,I.repeat)}}a.svg&&t&&t.paper&&t.paper.safari();
d=0;for(I=f.length;d<I;++d)b.schedular.addJob(function(c){return function(){e.apply(null,f[c].params)}}(d),b.priorityList.instant);db.length&&(ac||a.getAnimFrameFn())(Vb)},Db=function(c){return 255<c?255:0>c?0:c},Qb=function(c){1<c&&(c=1);0>c&&(c=0);return c};a.getAnimFrameFn=function(){return ac=a.requestAnimFrame||A.webkitRequestAnimationFrame||A.mozRequestAnimationFrame||A.oRequestAnimationFrame||A.msRequestAnimationFrame||function(c){setTimeout(c,16)}};Wa.animateWith=function(c,d,f,h,b,I,l){var g=
this,D={},k;l=l||{};for(k in l)l.hasOwnProperty(k)&&(D[k]=l[k]);l=D;if(g.removed)return I&&I.call(g),g;if(0==h)return a.is(I,"function")&&setTimeout(function(){I.call(g)},0),g.attr(f);h=f instanceof n?f:a.animation(f,h,b,I);l.start=Qb(l.start||0);l.end=Qb(l.end||1);l.start>=l.end&&(l.start=l.end);!l.from&&.01<l.start?(c.animElements=c.animElements||new J(function(c,a){return a.pos-c.pos}),c.animElements.enq({pos:l.start,attr:l.start===l.end,params:[h,g,h.percents[0],null,g.attr(),void 0,c,{start:l.start,
end:l.end,smartMorph:l.smartMorph,hookFn:l.hookFn},f],executeOb:{el:this,attrs:f,callback:I,hookFn:l.hookFn}})):e(h,g,h.percents[0],null,g.attr(),void 0,c,l);f=0;for(l=db.length;f<l;f++)if(db[f].anim==d&&db[f].el==c){db[l-1].start=db[f].start;break}return g};Wa.onAnimation=function(c){c?u.on("raphael.anim.frame."+this.id,c):u.unbind("raphael.anim.frame."+this.id);return this};n.prototype.delay=function(c){var a=new n(this.anim,this.ms);a.times=this.times;a.del=+c||0;return a};n.prototype.repeat=function(c){var a=
new n(this.anim,this.ms);a.del=this.del;a.times=qa.floor(va(c,0))||1;return a};a.animation=function(c,d,f,h,b){if(c instanceof n)return c;if(a.is(f,"function")||!f)h=h||f||null,f=null;void 0===a.stopEvent&&(a.stopEvent=b);c=Object(c);d=+d||0;b={};var e,I;for(I in c)c.hasOwnProperty(I)&&ca(I)!=I&&ca(I)+"%"!=I&&(e=!0,b[I]=c[I]);return e?(f&&(b.easing=f),h&&(b.callback=h),new n({100:b},d)):new n(c,d)};Wa.animate=function(c,d,f,h){if(this.removed)return h&&h.call(this),this;c=c instanceof n?c:a.animation(c,
d,f,h);e(c,this,c.percents[0],null,this.attr());return this};Wa.setTime=function(c,a){c&&null!=a&&this.status(c,ha(a,c.ms)/c.ms);return this};Wa.status=function(c,a){var d=[],f=0,h,b;if(null!=a)return e(c,this,-1,ha(a,1)),this;for(h=db.length;f<h;f++)if(b=db[f],b.el.id==this.id&&(!c||b.anim==c)){if(c)return b.status;d.push({anim:b.anim,status:b.status})}return c?0:d};Wa.pause=function(c,a){var d=+new Date,f,h;for(h=0;h<db.length;h++)f=db[h],!(f.el.id===this.id||a&&f.parentEl&&f.parentEl.e.el&&f.parentEl.e.el.id===
this.id)||c&&f.anim!=c||!1===u("raphael.anim.pause."+this.id,this,f.anim)||(f.paused=!0,f.pauseStart=d);return this};Wa.resume=function(c,a){var d=+new Date,f,h;for(h=0;h<db.length;h++)f=db[h],!(f.el.id===this.id||a&&f.parentEl&&f.parentEl.e.el&&f.parentEl.e.el.id===this.id)||c&&f.anim!=c||!1===u("raphael.anim.resume."+this.id,this,f.anim)||(delete f.paused,f.el.status(f.anim,f.status),f.pauseEnd=d,f.start+=(f.parentEl&&f.parentEl.e.pauseEnd||f.pauseEnd)-(f.parentEl&&f.parentEl.e.pauseStart||f.pauseStart)||
0);return this};Wa.stop=function(c,a,d){var f;if(a)for(f=db.length-1;0<=f;f--)a=db[f],!(a.el.id===this.id||a.parentEl&&a.parentEl.id===this.id)||c&&db[f].anim!=c||(ele=a.el,d&&ele.attr(a.to),a.callback&&a.callback.call(ele),delete ele.e,delete a.el,db.splice(f,1));else for(f=0;f<db.length;f++)a=db[f],a.el.id!==this.id||c&&a.anim!==c||!1!==u("raphael.anim.stop."+this.id,this,a.anim)&&db.splice(f--,1);if(this.animElements)for(c=this.animElements;d=c.deq();)d=d.executeOb,d.hookFn&&d.hookFn.call(d.el),
d.el.attr(d.attrs),d.callback&&d.callback.call(d.el);return this};u.on("raphael.remove",V);u.on("raphael.clear",V);Wa.toString=function(){return"Raphals object"};Wa.toFront=function(){if(this.removed)return this;var c=a._engine.getNode(this),d=this.parent,f=this.followers,h;a._tofront(this,d)&&d.canvas.appendChild(c);c=0;for(d=f.length;c<d;c++)(h=f[c]).stalk&&h.el[h.stalk](this);return this};Wa.toBack=function(){if(this.removed)return this;var c=a._engine.getNode(this),d=this.parent,f=this.followers,
h;a._toback(this,d)&&d.canvas.insertBefore(c,d.canvas.firstChild);c=0;for(d=f.length;c<d;c++)(h=f[c]).stalk&&h.el[h.stalk](this);return this};Wa.insertAfter=function(c){if(this.removed)return this;var d=a._engine.getNode(this),f=a._engine.getLastNode(c),h=c.parent.canvas,b=this.followers,e;f.nextSibling?h.insertBefore(d,f.nextSibling):h.appendChild(d);a._insertafter(this,c,this.parent,c.parent);d=0;for(f=b.length;d<f;d++)(e=b[d]).stalk&&e.el[e.stalk](c);return this};Wa.insertBefore=function(c){if(this.removed)return this;
var d=a._engine.getNode(this),f=a._engine.getNode(c),h=this.followers,b;c.parent.canvas.insertBefore(d,f);a._insertbefore(this,c,this.parent,c.parent);this.parent=c.parent;d=0;for(f=h.length;d<f;d++)(b=h[d]).stalk&&b.el[b.stalk](c);return this};Wa.appendChild=function(c){if(this.removed||"group"!==this.type)return this;var d=this.followers,f,h,b;if(c.parent===this)return c.toFront(),this;h=a._engine.getNode(c);a._tear(c,c.parent);this.canvas.appendChild(h);c.parent=this;!this.bottom&&(this.bottom=
c);c.prev=this.top;c.next=null;this.top&&(this.top.next=c);this.top=c;h=0;for(b=d.length;h<b;h++)(f=d[h]).stalk&&f.el[f.stalk](c);return this};Wa.removeChild=function(c){if(this.removed||"group"!==this.type||c.parent!==this)return this;var d=a._engine.getNode(c),f=this.paper;a._tear(c,this);f.canvas.appendChild(d);this.parent=f;!f.bottom&&(f.bottom=this);(this.prev=f.top)&&(f.top.next=this);f.top=this;this.next=null;return this};var Eb=function(c){this.items=[];this.length=0;this.type="set";if(c)for(var a=
0,d=c.length;a<d;a++)!c[a]||c[a].constructor!=Wa.constructor&&c[a].constructor!=Eb||(this[this.items.length]=this.items[this.items.length]=c[a],this.length++)},lb=Eb.prototype;lb.push=function(){for(var c,a,d=0,f=arguments.length;d<f;d++)!(c=arguments[d])||c.constructor!=Wa.constructor&&c.constructor!=Eb||(a=this.items.length,this[a]=this.items[a]=c,this.length++);return this};lb.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};lb.forEach=function(c,a){for(var d=0,f=
this.items.length;d<f&&!1!==c.call(a,this.items[d],d);d++);return this};for(var Ub in Wa)Wa.hasOwnProperty(Ub)&&(lb[Ub]=function(c){return function(){var a=arguments;return this.forEach(function(d){d[c][T](d,a)})}}(Ub));lb.attr=function(c,d){if(c&&a.is(c,t)&&a.is(c[0],"object"))for(var f=0,h=c.length;f<h;f++)this.items[f].attr(c[f]);else for(f=0,h=this.items.length;f<h;f++)this.items[f].attr(c,d);return this};lb.clear=function(){for(;this.length;)this.pop()};lb.splice=function(c,a,d){c=0>c?va(this.length+
c,0):c;a=va(0,ha(this.length-c,isNaN(a)&&this.length||a));var f=[],h=[],b=[],e;for(e=2;e<arguments.length;e++)b.push(arguments[e]);for(e=0;e<a;e++)h.push(this[c+e]);for(;e<this.length-c;e++)f.push(this[c+e]);var I=b.length;for(e=0;e<I+f.length;e++)this.items[c+e]=this[c+e]=e<I?b[e]:f[e-I];for(e=this.items.length=this.length-=a-I;this[e];)delete this[e++];return new Eb(h)};lb.exclude=function(c){for(var a=0,d=this.length;a<d;a++)if(this[a]==c)return this.splice(a,1),!0};lb.animate=function(c,d,f,h){!a.is(f,
"function")&&f||(h=f||null);var b=this.items.length,e=b,I=this,l;if(!b)return this;h&&(l=function(){!--b&&h.call(I)});f=a.is(f,"string")?f:l;d=a.animation(c,d,f,l);for(c=this.items[--e].animate(d);e--;)this.items[e]&&!this.items[e].removed&&this.items[e].animateWith(c,d,d);return this};lb.insertAfter=function(c){for(var a=this.items.length;a--;)this.items[a].insertAfter(c);return this};lb.getBBox=function(){for(var c=[],a=[],d=[],f=[],h=this.items.length;h--;)if(!this.items[h].removed){var b=this.items[h].getBBox();
c.push(b.x);a.push(b.y);d.push(b.x+b.width);f.push(b.y+b.height)}c=ha[T](0,c);a=ha[T](0,a);d=va[T](0,d);f=va[T](0,f);return{x:c,y:a,x2:d,y2:f,width:d-c,height:f-a}};lb.clone=function(c){c=new Eb;for(var a=0,d=this.items.length;a<d;a++)c.push(this.items[a].clone());return c};lb.toString=function(){return"Raphals set"};lb.glow=function(c){var a=this.paper.set();this.forEach(function(d,f){var h=d.glow(c);null!=h&&h.forEach(function(c,d){a.push(c)})});return a};a.registerFont=function(c){if(!c.face)return c;
this.fonts=this.fonts||{};var a={w:c.w,face:{},glyphs:{}},d=c.face["font-family"],f;for(f in c.face)c.face.hasOwnProperty(f)&&(a.face[f]=c.face[f]);this.fonts[d]?this.fonts[d].push(a):this.fonts[d]=[a];if(!c.svg){a.face["units-per-em"]=ma(c.face["units-per-em"],10);for(var h in c.glyphs)if(c.glyphs.hasOwnProperty(h)&&(d=c.glyphs[h],a.glyphs[h]={w:d.w,k:{},d:d.d&&"M"+d.d.replace(/[mlcxtrv]/g,function(c){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[c]||"M"})+"z"},d.k))for(var b in d.k)d.hasOwnProperty(b)&&
(a.glyphs[h].k[b]=d.k[b])}return c};G.getFont=function(c,d,f,h){h=h||"normal";f=f||"normal";d=+d||{normal:400,bold:700,lighter:300,bolder:800}[d]||400;if(a.fonts){var b=a.fonts[c];if(!b){c=new RegExp("(^|\\s)"+c.replace(/[^\w\d\s+!~.:_-]/g,"")+"(\\s|$)","i");for(var e in a.fonts)if(a.fonts.hasOwnProperty(e)&&c.test(e)){b=a.fonts[e];break}}var I;if(b)for(e=0,c=b.length;e<c&&(I=b[e],I.face["font-weight"]!=d||I.face["font-style"]!=f&&I.face["font-style"]||I.face["font-stretch"]!=h);e++);return I}};G.print=
function(c,d,f,h,b,e,I){e=e||"middle";I=va(ha(I||0,1),-1);var l=wa(f).split(""),g=0,D=0,k="";a.is(h,f)&&(h=this.getFont(h));if(h){f=(b||16)/h.face["units-per-em"];var G=h.face.bbox.split(ja);b=+G[0];var ba=G[3]-G[1],t=0;e=+G[1]+("baseline"==e?ba+ +h.face.descent:ba/2);for(var G=0,Ba=l.length;G<Ba;G++){if("\n"==l[G])D=w=g=0,t+=ba;else var p=D&&h.glyphs[l[G-1]]||{},w=h.glyphs[l[G]],g=g+(D?(p.w||h.w)+(p.k&&p.k[l[G]]||0)+h.w*I:0),D=1;w&&w.d&&(k+=a.transformPath(w.d,["t",g*f,t*f,"s",f,f,b,e,"t",(c-b)/
f,(d-e)/f]))}}return this.path(k).attr({fill:"#000",stroke:"none"})};G.add=function(c){if(a.is(c,"array"))for(var d=this.set(),f=0,h=c.length,b;f<h;f++)b=c[f]||{},aa.hasOwnProperty(b.type)&&d.push(this[b.type]().attr(b));return d};a.format=function(c,d){var f=a.is(d,t)?[0].concat(d):arguments;c&&a.is(c,"string")&&f.length-1&&(c=c.replace(ya,function(c,a){return null==f[++a]?"":f[a]}));return c||""};a.fullfill=function(){var c=/\{([^\}]+)\}/g,a=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,
d=function(c,d,f){var h=f;d.replace(a,function(c,a,d,f,b){a=a||f;h&&(a in h&&(h=h[a]),"function"==typeof h&&b&&(h=h()))});return h=(null==h||h==f?c:h)+""};return function(a,f){return String(a).replace(c,function(c,a){return d(c,a,f)})}}();a.ninja=function(){w?R.win.Raphael=F:delete R.win.Raphael;return a};var Zb=a.vml&&.5||0;a.crispBound=ba(function(c,a,d,f,h){var b={},e;c=c||0;a=a||0;d=d||0;f=f||0;h=h||0;e=h%2/2+Zb;b.x=Y(c+e)-e;b.y=Y(a+e)-e;b.width=Y(c+d+e)-e-b.x;b.height=Y(a+f+e)-e-b.y;b["stroke-width"]=
h;0===b.width&&0!==d&&(b.width=1);0===b.height&&0!==f&&(b.height=1);return b},a);Wa.crisp=function(){var c=this.attrs,d,f=this.attr(["x","y","width","height","stroke-width"]),f=a.crispBound(f.x,f.y,f.width,f.height,f["stroke-width"]);for(d in f)c[d]===f[d]&&delete f[d];return this.attr(f)};a.st=lb;a.define=function(c,d,f,h,b,e){var I;if(a.is(c,t))for(e=0,I=c.length;e<I;e++)a.define(c[e]);else if(a.is(c,"object"))a.define(c.name,c[c.name],c.ca,c.fn,c.e,c.data);else if(c&&!a.fn[c])return a.fn[c]=function(){var e=
arguments,I=d.apply(this,e),l;if(h&&a.is(h,"object"))for(l in h)I[l]=h[l];if(b&&a.is(b,"object"))for(l in b)I[l]&&I[l](b[l]);if(f){if(a.is(f,"function"))I.ca[c]=f;else for(l in f)I.ca[l]=f[l];I.ca[c]&&(a._lastArgIfGroup(e,!0),e.length&&I.attr(c,Z.call(e)))}return I},f&&(a.fn[c].ca=f),h&&(a.fn[c].fn=h),b&&(a.fn[c].e=b),e&&(a.fn[c].data=e),a.fn[c]};(function(c,d,f){function h(){/in/.test(c.readyState)?setTimeout(h,9):a.eve("raphael.DOMload")}null==c.readyState&&c.addEventListener&&(c.addEventListener(d,
f=function(){c.removeEventListener(d,f,!1);c.readyState="complete"},!1),c.readyState="loading");h()})(X,"DOMContentLoaded");u.on("raphael.DOMload",function(){p=!0});"undefined"===typeof v&&"object"===typeof window&&(v=window);(function(){function c(a){for(var d={},f=a,h=d;f;)f.node&&f.node.style&&"none"===f.node.style.display&&(f.show(),h._doHide=!0),f=f.parent,h.parent={},h=h.parent;return function(){for(var c=a,f=d;c;)f._doHide&&c.hide(),c=c.parent,f=f.parent}}function d(c,a){var f=a.src,h=c.node,
b=c._.RefImg;b||(b=c._.RefImg=new Image);void 0!==a.src&&(b.src=f,b.onload=function(){c.attr({width:c.attrs.width||b.width,height:c.attrs.height||b.height})},b.onerror=function(c){h.onerror&&h.onerror(c)},c._.RefImg=b)}if(a.svg){var f=String,h=parseFloat,b=parseInt,e=Math,I=e.max,l=e.abs,g=e.pow,D=e.sqrt,k=/[, ]+/,G=!(!/AppleWebKit/.test(a._g.win.navigator.userAgent)||/Chrome/.test(a._g.win.navigator.userAgent)&&!(29>a._g.win.navigator.appVersion.match(/Chrome\/(\d+)\./)[1])),ba=a.eve,t={block:"M5,0 0,2.5 5,5z",
classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},Ba={},p=-1<a._g.win.navigator.userAgent.toLowerCase().indexOf("firefox");a.cachedFontHeight={};a.toString=function(){return"Your browser supports SVG.\nYou are running Raphal "+this.version};a._url="";var w=function(c,a){var d=c.gradient;if(d){if(d===a)return;d.refCount--;d.refCount||d.parentNode.removeChild(d);delete c.gradient}a&&(c.gradient=a,
a.refCount++)},z=a._createNode=function(c,d){if(d){"string"==typeof c&&(c=z(c));for(var h in d)d.hasOwnProperty(h)&&("xlink:"==h.substring(0,6)?c.setAttributeNS("http://www.w3.org/1999/xlink",h.substring(6),f(d[h])):c.setAttribute(h,f(d[h])))}else c=a._g.doc.createElementNS("http://www.w3.org/2000/svg",c);return c},F={userSpaceOnUse:"userSpaceOnUse",objectBoundingBox:"objectBoundingBox"},aa={pad:"pad",redlect:"reflect",repeat:"repeat"},m=function(c,d){if(!c.paper||!c.paper.defs)return 0;var b="linear",
k=c.paper,G=a.getElementID((k.id+"-"+d).replace(/[\(\)\s%:,\xb0#]/g,"_")),ba=.5,t=.5,Ba,p,m,Oa,B,n=c.node,K=n.style,R=a._g.doc.getElementById(G);if(!R){d=f(d).replace(a._radial_gradient,function(c,a){b="radial";a=a&&a.split(",")||[];Oa=a[5];B=a[6];var d=a[0],f=a[1],e=a[2],I=a[3],l=a[4],k=d&&f,G;e&&(Ba=/\%/.test(e)?e:h(e));if(Oa===F.userSpaceOnUse)return k&&(ba=d,t=f),I&&l&&(p=I,m=l,k||(ba=p,t=m)),"";k&&(ba=h(d),t=h(f),d=2*(.5<t)-1,.25<(G=g(ba-.5,2))+g(t-.5,2)&&.25>G&&(t=D(.25-G)*d+.5)&&.5!==t&&(t=
t.toFixed(5)-1E-5*d));I&&l&&(p=h(I),m=h(l),d=2*(.5<m)-1,.25<(G=g(p-.5,2))+g(m-.5,2)&&.25>G&&(m=D(.25-G)*d+.5)&&.5!==m&&(m=m.toFixed(5)-1E-5*d),k||(ba=p,t=m));return""});d=d.split(/\s*\-\s*/);if("linear"==b){var R=d.shift(),Qa=R.match(/\((.*)\)/),P,Qa=Qa&&Qa[1]&&Qa[1].split(/\s*\,\s*/),R=-h(R);if(isNaN(R))return null;Qa&&Qa.length?(Qa[0]in F?(Oa=Qa.shift(),Qa[0]in aa&&(B=Qa.shift())):(Qa[4]&&(Oa=Qa[4]),Qa[5]&&(B=Qa[5])),P=[Qa[0]||"0%",Qa[1]||"0%",Qa[2]||"100%",Qa[3]||"0%"]):(P=[0,0,e.cos(a.rad(R)),
e.sin(a.rad(R))],R=1/(I(l(P[2]),l(P[3]))||1),P[2]*=R,P[3]*=R,0>P[2]&&(P[0]=-P[2],P[2]=0),0>P[3]&&(P[1]=-P[3],P[3]=0))}Qa=a._parseDots(d);if(!Qa)return null;R=z(b+"Gradient",{id:G});R.refCount=0;Oa in F&&R.setAttribute("gradientUnits",f(Oa));B in aa&&R.setAttribute("spreadMethod",f(B));"radial"===b?(void 0!==Ba&&R.setAttribute("r",f(Ba)),void 0!==p&&void 0!==m&&(R.setAttribute("cx",f(p)),R.setAttribute("cy",f(m))),R.setAttribute("fx",f(ba)),R.setAttribute("fy",f(t))):z(R,{x1:P[0],y1:P[1],x2:P[2],y2:P[3]});
P=0;for(var r=Qa.length;P<r;P++)R.appendChild(z("stop",{offset:Qa[P].offset?Qa[P].offset:P?"100%":"0%","stop-color":Qa[P].color||"#fff","stop-opacity":void 0===Qa[P].opacity?1:Qa[P].opacity}));k.defs.appendChild(R)}w(c,R);z(n,{fill:"url('"+a._url+"#"+G+"')","fill-opacity":1});K.fill="";return K.fillOpacity=1},B=function(c){var a=c.getBBox(1);z(c.pattern,{patternTransform:c.matrix.invert()+" translate("+a.x+","+a.y+")"})},Oa=function(c,d,h){if("path"==c.type){for(var b=f(d).toLowerCase().split("-"),
e=c.paper,I=h?"end":"start",l=c.node,g=c.attrs,D=g["stroke-width"],k=b.length,G="classic",ba,p,w=3,F=3,aa=5;k--;)switch(b[k]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":G=b[k];break;case "wide":F=5;break;case "narrow":F=2;break;case "long":w=5;break;case "short":w=2}"open"==G?(w+=2,F+=2,aa+=2,ba=1,p=h?4:1,b={fill:"none",stroke:g.stroke}):(p=ba=w/2,b={fill:g.stroke,stroke:"none"});c._.arrows?h?(c._.arrows.endPath&&Ba[c._.arrows.endPath]--,c._.arrows.endMarker&&Ba[c._.arrows.endMarker]--):
(c._.arrows.startPath&&Ba[c._.arrows.startPath]--,c._.arrows.startMarker&&Ba[c._.arrows.startMarker]--):c._.arrows={};if("none"!=G){var k="raphael-marker-"+G,m="raphael-marker-"+I+G+w+F+"-obj"+c.id;a._g.doc.getElementById(k)?Ba[k]++:(e.defs.appendChild(z(z("path"),{"stroke-linecap":"round",d:t[G],id:k})),Ba[k]=1);var Oa=a._g.doc.getElementById(m);Oa?(Ba[m]++,w=Oa.getElementsByTagName("use")[0]):(Oa=z(z("marker"),{id:m,markerHeight:F,markerWidth:w,orient:"auto",refX:p,refY:F/2}),w=z(z("use"),{"xlink:href":"#"+
k,transform:(h?"rotate(180 "+w/2+" "+F/2+") ":"")+"scale("+w/aa+","+F/aa+")","stroke-width":(1/((w/aa+F/aa)/2)).toFixed(4)}),Oa.appendChild(w),e.defs.appendChild(Oa),Ba[m]=1);z(w,b);e=ba*("diamond"!=G&&"oval"!=G);h?(h=c._.arrows.startdx*D||0,D=a.getTotalLength(g.path)-e*D):(h=e*D,D=a.getTotalLength(g.path)-(c._.arrows.enddx*D||0));b={};b["marker-"+I]="url('"+a._url+"#"+m+"')";if(D||h)b.d=a.getSubpath(g.path,h,D);z(l,b);c._.arrows[I+"Path"]=k;c._.arrows[I+"Marker"]=m;c._.arrows[I+"dx"]=e;c._.arrows[I+
"Type"]=G;c._.arrows[I+"String"]=d}else h?(h=c._.arrows.startdx*D||0,D=a.getTotalLength(g.path)-h):(h=0,D=a.getTotalLength(g.path)-(c._.arrows.enddx*D||0)),c._.arrows[I+"Path"]&&z(l,{d:a.getSubpath(g.path,h,D)}),delete c._.arrows[I+"Path"],delete c._.arrows[I+"Marker"],delete c._.arrows[I+"dx"],delete c._.arrows[I+"Type"],delete c._.arrows[I+"String"];for(b in Ba)Ba.hasOwnProperty(b)&&!Ba[b]&&(c=a._g.doc.getElementById(b))&&c.parentNode.removeChild(c)}},n={"":["none"],none:["none"],"-":[3,1],".":[1,
1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},K=function(c,d,h){var b=n[f(d).toLowerCase()],e,I,l;if(d=b||void 0!==d&&[].concat(d)){e=c.attrs["stroke-width"]||1;h={round:e,square:e,butt:0}[h["stroke-linecap"]||c.attrs["stroke-linecap"]]||0;I=d.length;l=b?e:1;if("none"==d[0])b=d;else for(b=[];I--;)b[I]=d[I]*l+(I%2?1:-1)*h,0>=b[I]&&(b[I]=.01+(1>=e?h:0)),isNaN(b[I])&&(b[I]=0);a.is(d,"array")&&z(c.node,{"stroke-dasharray":b.join(",")})}},
R=function(c,a){for(var d in a)ba("raphael.attr."+d+"."+c.id,c,a[d],d),c.ca[d]&&c.attr(d,a[d])},Qa=a._setFillAndStroke=function(c,h,e){if(c.paper.canvas){var g=c.node,D=c.attrs,ba=c.paper,t=g.style,Ba=t.visibility;h&&h.text&&h.text.replace&&(h.text=h.text.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&<br\/>lt;|&l<br\/>t;|&lt<br\/>;/g,"<<br/>").replace(/&<br\/>gt;|&g<br\/>t;|&gt<br\/>;/g,"><br/>"));t.visibility="hidden";"image"===c.type&&d(c,h);for(var p in h)if(h.hasOwnProperty(p)&&a._availableAttrs.hasOwnProperty(p)){var F=
h[p];D[p]=F;switch(p){case "blur":c.blur(F);break;case "href":case "title":case "target":var aa=g.parentNode;if("a"!=aa.tagName.toLowerCase()){if(""==F)break;var R=z("a");R.raphael=!0;R.raphaelid=g.raphaelid;aa.insertBefore(R,g);R.appendChild(g);aa=R}"target"==p?aa.setAttributeNS("http://www.w3.org/1999/xlink","show","blank"==F?"new":F):aa.setAttributeNS("http://www.w3.org/1999/xlink",p,F);g.titleNode=aa;break;case "cursor":t.cursor=F;break;case "transform":c.transform(F);break;case "rotation":a.is(F,
"array")?c.rotate.apply(c,F):c.rotate(F);break;case "arrow-start":Oa(c,F);break;case "arrow-end":Oa(c,F,1);break;case "clip-path":var n=!0;case "clip-rect":aa=!n&&f(F).split(k);c._.clipispath=!!n;if(n||4==aa.length){c.clip&&c.clip.parentNode.parentNode.removeChild(c.clip.parentNode);var R=z("clipPath"),Qa=z(n?"path":"rect");R.id=a.getElementID(a.createUUID());z(Qa,n?{d:F?D["clip-path"]=a._pathToAbsolute(F):a._availableAttrs.path,fill:"none"}:{x:aa[0],y:aa[1],width:aa[2],height:aa[3],transform:c.matrix.invert()});
R.appendChild(Qa);ba.defs.appendChild(R);z(g,{"clip-path":"url('"+a._url+"#"+R.id+"')"});c.clip=Qa}!F&&(F=g.getAttribute("clip-path"))&&((F=a._g.doc.getElementById(F.replace(/(^url\(#|\)$)/g,"")))&&F.parentNode.removeChild(F),z(g,{"clip-path":""}),11===document.documentMode&&g.removeAttribute("clip-path"),delete c.clip);break;case "path":"path"==c.type&&(z(g,{d:F?D.path=a._pathToAbsolute(F):a._availableAttrs.path}),c._.dirty=1,c._.arrows&&("startString"in c._.arrows&&Oa(c,c._.arrows.startString),
"endString"in c._.arrows&&Oa(c,c._.arrows.endString,1)));break;case "width":if(g.setAttribute(p,F),c._.dirty=1,D.fx)p="x",F=D.x;else break;case "x":D.fx&&(F=-D.x-(D.width||0));case "rx":if("rx"==p&&"rect"==c.type)break;case "cx":g.setAttribute(p,F);c.pattern&&B(c);c._.dirty=1;break;case "height":if(g.setAttribute(p,F),c._.dirty=1,D.fy)p="y",F=D.y;else break;case "y":D.fy&&(F=-D.y-(D.height||0));case "ry":if("ry"==p&&"rect"==c.type)break;case "cy":g.setAttribute(p,F);c.pattern&&B(c);c._.dirty=1;break;
case "r":"rect"==c.type?z(g,{rx:F,ry:F}):g.setAttribute(p,F);c._.dirty=1;break;case "src":"image"==c.type&&g.setAttributeNS("http://www.w3.org/1999/xlink","href",F);break;case "stroke-width":if(1!=c._.sx||1!=c._.sy)F/=I(l(c._.sx),l(c._.sy))||1;ba._vbSize&&(F*=ba._vbSize);G&&0===F&&(F=1E-6);g.setAttribute(p,F);D["stroke-dasharray"]&&K(c,D["stroke-dasharray"],h);c._.arrows&&("startString"in c._.arrows&&Oa(c,c._.arrows.startString),"endString"in c._.arrows&&Oa(c,c._.arrows.endString,1));break;case "stroke-dasharray":K(c,
F,h);break;case "fill":var P=f(F).match(a._ISURL);if(P){var R=z("pattern"),r=z("image");R.id=a.getElementID(a.createUUID());z(R,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});z(r,{x:0,y:0,"xlink:href":P[1]});R.appendChild(r);(function(c){a._preload(P[1],function(){var a=this.offsetWidth,d=this.offsetHeight;z(c,{width:a,height:d});z(r,{width:a,height:d});ba.safari()})})(R);ba.defs.appendChild(R);t.fill="url('"+a._url+"#"+R.id+"')";z(g,{fill:t.fill});c.pattern=R;c.pattern&&B(c);break}aa=
a.getRGB(F);if(!aa.error)delete h.gradient,delete D.gradient,!a.is(D["fill-opacity"],"undefined")&&a.is(h["fill-opacity"],"undefined")&&z(g,{"fill-opacity":D["fill-opacity"]}),c.gradient&&w(c);else if(("circle"==c.type||"ellipse"==c.type||"r"!=f(F).charAt())&&m(c,F)){if("opacity"in D||"fill-opacity"in D)if(aa=a._g.doc.getElementById(g.getAttribute("fill").replace(/^url\(#|\)$/g,"")))aa=aa.getElementsByTagName("stop"),z(aa[aa.length-1],{"stop-opacity":("opacity"in D?D.opacity:1)*("fill-opacity"in D?
D["fill-opacity"]:1)});D.gradient=F;D.fill="none";t.fill="";break}aa.hasOwnProperty("opacity")?(z(g,{"fill-opacity":t.fillOpacity=1<aa.opacity?aa.opacity/100:aa.opacity}),c._.fillOpacityDirty=!0):c._.fillOpacityDirty&&a.is(D["fill-opacity"],"undefined")&&a.is(h["fill-opacity"],"undefined")&&(g.removeAttribute("fill-opacity"),t.fillOpacity="",delete c._.fillOpacityDirty);case "stroke":aa=a.getRGB(F);g.setAttribute(p,aa.hex);t[p]=aa.hex;"stroke"==p&&(aa.hasOwnProperty("opacity")?(z(g,{"stroke-opacity":t.strokeOpacity=
1<aa.opacity?aa.opacity/100:aa.opacity}),c._.strokeOpacityDirty=!0):c._.strokeOpacityDirty&&a.is(D["stroke-opacity"],"undefined")&&a.is(h["stroke-opacity"],"undefined")&&(g.removeAttribute("stroke-opacity"),t.strokeOpacity="",delete c._.strokeOpacityDirty),c._.arrows&&("startString"in c._.arrows&&Oa(c,c._.arrows.startString),"endString"in c._.arrows&&Oa(c,c._.arrows.endString,1)));break;case "gradient":"circle"!=c.type&&"ellipse"!=c.type&&"r"==f(F).charAt()||m(c,F);break;case "line-height":case "vertical-align":break;
case "visibility":"hidden"===F?c.hide():c.show();break;case "opacity":F=1<F?F/100:F;z(g,{opacity:F});t.opacity=F;break;case "fill-opacity":F=1<F?F/100:F;z(g,{"fill-opacity":F});t.fillOpacity=F;break;default:"font-size"==p&&(F=b(F,10)+"px"),aa=p.replace(/(\-.)/g,function(c){return c.substring(1).toUpperCase()}),t[aa]=F,c._.dirty=1,g.setAttribute(p,F)}}"text"===c.type&&!h["_do-not-tune"]&&Ra(c,h,e);t.visibility=Ba}},P=a._updateFollowers=function(){var c,a,d,f=arguments,h=S.call(f),b=S.call(f);c=0;for(a=
h.followers.length;c<a;c++)d=h.followers[c].el,d[b].apply(d,f)},Ra=function(c,d,b){if("text"==c.type&&(d.hasOwnProperty("text")||d.hasOwnProperty("font")||d.hasOwnProperty("font-size")||d.hasOwnProperty("x")||d.hasOwnProperty("y")||d.hasOwnProperty("line-height")||d.hasOwnProperty("vertical-align"))){var I=c.attrs,l=c.node;l.firstChild&&a._g.doc.defaultView.getComputedStyle(l.firstChild,"");var g=d.fontSize||d["font-size"]||I["font-size"]||b&&b.attrs.fontSize,D=h(d["line-height"]||I["line-height"])||
1.2*g,k=I.hasOwnProperty("vertical-align")?I["vertical-align"]:"middle",G=d.direction||b&&b.attrs.direction||"initial";isIE=!!document.documentMode;fontFamily=d.fontFamily||d["font-family"]||I["font-family"]||b&&b.attrs.fontFamily||"Verdana,sans";g=void 0===g?D/1.2||10:g.toString().replace(/px/,"");isNaN(D)&&(D=1.2*g);a.is(d.text,"array")&&(d.text=d.text.join("<br>"));valign="top"===k?-.5:"bottom"===k?.5:0;if(d.hasOwnProperty("text")&&(d.text!==I.text||c._textdirty)){for(I.text=d.text;l.firstChild;)l.removeChild(l.firstChild);
var ba=f(d.text).split(/\n|<br\s*?\/?>/ig);d=[];for(var t=0,p=ba.length;t<p;t++)b=z("tspan"),t?z(b,{dy:D,x:I.x}):z(b,{dy:D*ba.length*valign,x:I.x}),ba[t]||(b.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),ba[t]=" "),b.appendChild(a._g.doc.createTextNode(ba[t])),l.appendChild(b),d[t]=b,!isIE&&"rtl"===G&&t<p-1&&(b=z("tspan"),z(b,{visibility:"hidden","font-size":"0px"}),b.appendChild(a._g.doc.createTextNode("i")),l.appendChild(b));c._textdirty=!1}else for(d=l.getElementsByTagName("tspan"),
t=ba=0,p=d.length;t<p;t++)if(b=d[t],G=b.attributes[0],!G||"visibility"!==G.name&&"visibility"!==G.nodeName||"hidden"!==G.value&&"hidden"!==G.nodeValue)t?z(b,{dy:D,x:I.x}):(G=d[1]&&d[1].attributes[0],!G||"visibility"!==G.name&&"visibility"!==G.nodeName||"hidden"!==G.value&&"hidden"!==G.nodeValue||(ba=e.floor(.5*d.length)),z(d[0],{dy:D*(d.length-ba)*valign,x:I.x}));z(l,{x:I.x,y:I.y});c._.dirty=1;(c=c._getCustomBBox(fontFamily,g+"px",k,t).diff)&&a.is(c,"finite")&&d[0]&&z(d[0],{dy:c})}},r=function(c,
d,f){f=f||d;f.canvas&&f.canvas.appendChild(c);this.node=this[0]=c;c.raphael=!0;c.raphaelid=this.id=a._oid++;this.matrix=a.matrix();this.realPath=null;this.attrs=this.attrs||{};this.followers=this.followers||[];this.paper=d;this.ca=this.customAttributes=this.customAttributes||new d._CustomAttributes;this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};this.parent=f;!f.bottom&&(f.bottom=this);(this.prev=f.top)&&(f.top.next=this);f.top=this;this.next=null},L=a.el;r.prototype=L;L.constructor=r;a._engine.getNode=
function(c){c=c.node||c[0].node;return c.titleNode||c};a._engine.getLastNode=function(c){c=c.node||c[c.length-1].node;return c.titleNode||c};L.rotate=function(c,a,d){if(this.removed)return this;P(this,"rotate",c,a,d);c=f(c).split(k);c.length-1&&(a=h(c[1]),d=h(c[2]));c=h(c[0]);null==d&&(a=d);if(null==a||null==d)d=this.getBBox(1),a=d.x+d.width/2,d=d.y+d.height/2;this.transform(this._.transform.concat([["r",c,a,d]]));return this};L.scale=function(c,a,d,b){var e;if(this.removed)return this;P(this,"scale",
c,a,d,b);c=f(c).split(k);c.length-1&&(a=h(c[1]),d=h(c[2]),b=h(c[3]));c=h(c[0]);null==a&&(a=c);null==b&&(d=b);if(null==d||null==b)e=this.getBBox(1);d=null==d?e.x+e.width/2:d;b=null==b?e.y+e.height/2:b;this.transform(this._.transform.concat([["s",c,a,d,b]]));return this};L.translate=function(c,a){if(this.removed)return this;P(this,"translate",c,a);c=f(c).split(k);c.length-1&&(a=h(c[1]));c=h(c[0])||0;this.transform(this._.transform.concat([["t",c,+a||0]]));return this};L.transform=function(c){var d=
this._;if(null==c)return d.transform;a._extractTransform(this,c);this.clip&&!d.clipispath&&z(this.clip,{transform:this.matrix.invert()});this.pattern&&B(this);this.node&&z(this.node,{transform:this.matrix});c=this.attrs.hasOwnProperty("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":c});return this};L.hide=function(){P(this,"hide");!this.removed&&this.paper.safari(this.node.style.display="none");return this};L.show=function(){P(this,"show");!this.removed&&this.paper.safari(this.node.style.display=
"");return this};L.remove=function(){if(!this.removed&&this.parent.canvas){var c=a._engine.getNode(this),d=this.paper,f=d.defs;d.__set__&&d.__set__.exclude(this);ba.unbind("raphael.*.*."+this.id);for(this.gradient&&f&&w(this);f=this.followers.pop();)f.el.remove();for(;f=this.bottom;)f.remove();this._drag&&this.undrag();if(this.events)for(;f=this.events.pop();)f.unbind();this.parent.canvas.contains(c)&&this.parent.canvas.removeChild(c);this.removeData();delete d._elementsById[this.id];a._tear(this,
this.parent);for(f in this)this[f]="function"===typeof this[f]?a._removedFactory(f):null;this.removed=!0}};L._getCustomBBox=function(d,f,h,b){var e,I=this.node,l,g="text"===this.type,D=!!document.documentMode,k,G,ba;D&&g?e=c(this):"none"===I.style.display&&(this.show(),l=!0);if(g){k=a.cachedFontHeight;G=k.txtElem;ba=k[d]||(k[d]={});I=ba[f];I||(G||(G=k.txtElem=document.createElementNS("http://www.w3.org/2000/svg","text"),G.setAttribute("x",-100),G.setAttribute("y",-100),I=document.createTextNode("abcdefhiklmnopqrstuvwxyz"),
G.appendChild(I),document.getElementsByTagName("svg")[0].appendChild(G)),G.setAttribute("style","font-family :"+d+"; font-size :"+f),p?(I=this.paper.canvas.getBoundingClientRect(),G=G.getBoundingClientRect(),G.x=G.left-I.left,G.y=G.top-I.top):G=G.getBBox(),ba[f]=I=[],I.push(G.height),I.push(G.y));f=I[1];d=I[0];switch(h){case "bottom":h=-100-f-d*b;break;case "top":h=-100-f;break;default:h=-100-f-d/2*b}G={height:I[0],diff:h}}D&&g?e&&e():l&&this.hide();return G};L._getBBox=function(){var a,d=this.node,
f={},h=this.attrs,b,e,I="text"===this.type,l=!!document.documentMode;l&&I?a=c(this):"none"===d.style.display&&(this.show(),e=!0);try{f=d.getBBox(),I&&(void 0===f.x&&(f.isCalculated=!0,b=h["text-anchor"],f.x=(h.x||0)-f.width*("start"===b?0:"middle"===b?.5:1)),void 0===f.y&&(f.isCalculated=!0,b=h["vertical-align"],f.y=(h.y||0)-f.height*("bottom"===b?1:"middle"===b?.5:0)))}catch(g){}finally{f=f||{}}l&&I?a&&a():e&&this.hide();return f};L.attr=function(c,d){if(this.removed)return this;if(null==c){var f=
{},h;for(h in this.attrs)this.attrs.hasOwnProperty(h)&&(f[h]=this.attrs[h]);f.gradient&&"none"==f.fill&&(f.fill=f.gradient)&&delete f.gradient;f.transform=this._.transform;f.visibility="none"===this.node.style.display?"hidden":"visible";return f}if(null==d&&a.is(c,"string")){if("fill"==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==c)return this._.transform;if("visibility"==c)return"none"===this.node.style.display?"hidden":"visible";var f=c.split(k),b={},
e=0;for(h=f.length;e<h;e++)c=f[e],c in this.attrs?b[c]=this.attrs[c]:a.is(this.ca[c],"function")?b[c]=this.ca[c].def:b[c]=a._availableAttrs[c];return h-1?b:b[f[0]]}if(null==d&&a.is(c,"array")){b={};e=0;for(h=c.length;e<h;e++)b[c[e]]=this.attr(c[e]);return b}null!=d?(f={},f[c]=d):null!=c&&a.is(c,"object")&&(f=c);if(!1!==a.stopEvent)for(e in f)ba("raphael.attr."+e+"."+this.id,this,f[e],e);var I={};for(e in this.ca)if(this.ca[e]&&f.hasOwnProperty(e)&&a.is(this.ca[e],"function")&&!this.ca["_invoked"+
e]){this.ca["_invoked"+e]=!0;h=this.ca[e].apply(this,[].concat(f[e]));delete this.ca["_invoked"+e];for(b in h)h.hasOwnProperty(b)&&(f[b]=h[b]);this.attrs[e]=f[e];!1===h&&(I[e]=f[e],delete f[e])}Qa(this,f);var l,e=0;for(h=this.followers.length;e<h;e++)l=this.followers[e],l.cb&&!l.cb.call(l.el,f,this)||l.el.attr(f);for(b in I)f[b]=I[b];return this};L.blur=function(c){if(0!==+c){var d=z("filter"),f=z("feGaussianBlur");this.attrs.blur=c;d.id=a.getElementID(a.createUUID());z(f,{stdDeviation:+c||1.5});
d.appendChild(f);this.paper.defs.appendChild(d);this._blur=d;z(this.node,{filter:"url('"+a._url+"#"+d.id+"')"})}else this._blur&&(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),this.node.removeAttribute("filter")};L.on=function(c,d){var f,h;if(this.removed)return this;if("dragstart"===c)return this.drag(null,d),this;if("dragmove"===c)return this.drag(d),this;if("dragend"===c)return this.drag(null,null,d),this;f=d;h=c;a.supportsTouch&&(c=a._touchMap[c]||"click"===
c&&"touchstart"||c,c!==h&&(this._tempTouchListeners||(this._tempTouchListeners={}),this._tempTouchListeners[h]||(this._tempTouchListeners[h]=[]),f=function(c){c.preventDefault();d(c)},this._tempTouchListeners[h].push({oldFn:d,newFn:f,newEvt:c})));this.node.addEventListener?this.node.addEventListener(c,f):this.node["on"+c]=f;return this};L.off=function(c,d){var f,h,b;if(this.removed)return this;if("dragstart"===c)return this.undragstart(),this;if("dragmove"===c)return this.undragmove(),this;if("dragend"===
c)return this.undragend(),this;f=d;oldEventType=c;if(a.supportsTouch&&this._tempTouchListeners&&this._tempTouchListeners[oldEventType])for(b=this._tempTouchListeners[oldEventType].length,h=0;h<b&&oldEventType===c;h+=1)this._tempTouchListeners[oldEventType][h]&&this._tempTouchListeners[oldEventType][h].oldFn===f&&(c=this._tempTouchListeners[oldEventType][h].newEvt,f=this._tempTouchListeners[oldEventType][h].newFn,this._tempTouchListeners[oldEventType].splice(h,1));this.node.removeEventListener?this.node.removeEventListener(c,
f):this.node["on"+c]=null;return this};a._engine.path=function(c,a,d){var f=z("path");c=new r(f,c,d);c.type="path";Qa(c,a);R(c,a);return c};a._engine.group=function(c,a,d){var f=z("g");c=new r(f,c,d);c.type="group";c.canvas=c.node;c.top=c.bottom=null;c._id=a||"";a&&f.setAttribute("class","raphael-group-"+c.id+"-"+a);return c};a._engine.circle=function(c,a,d){var f=z("circle");c=new r(f,c,d);c.type="circle";Qa(c,a);R(c,a);return c};a._engine.rect=function(c,a,d){var f=z("rect");c=new r(f,c,d);c.type=
"rect";a.rx=a.ry=a.r;Qa(c,a);R(c,a);return c};a._engine.ellipse=function(c,a,d){var f=z("ellipse");c=new r(f,c,d);c.type="ellipse";Qa(c,a);R(c,a);return c};a._engine.image=function(c,a,d){var f=z("image"),h=new r(f,c,d,!0);h._.group=d||c;h.type="image";f.setAttribute("preserveAspectRatio","none");Qa(h,a);R(h,a);return h};a._engine.text=function(c,a,d,f){var h=z("text");c=new r(h,c,d);c.type="text";c._textdirty=!0;f&&c.css&&c.css(f,void 0,!0);Qa(c,a,d);R(c,a);return c};a._engine.setSize=function(c,
a){this.width=c||this.width;this.height=a||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this};a._engine.create=function(){var c=a._getContainer.apply(0,arguments),d=c&&c.container,f=c.x,h=c.y,b=c.width,c=c.height;if(!d)throw Error("SVG container not found.");var e=z("svg"),I;I="overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-moz-user-select:-moz-none;-khtml-user-select:none;-ms-user-select:none;user-select:none;-o-user-select:none;cursor:default;vertical-align:middle;";
var l,f=f||0,h=h||0,b=b||512,c=c||342;z(e,{height:c,version:1.1,width:b,xmlns:"http://www.w3.org/2000/svg"});1==d?(e.style.cssText=I+"position:absolute;left:"+f+"px;top:"+h+"px",a._g.doc.body.appendChild(e),l=1):(e.style.cssText=I+"position:relative",d.firstChild?d.insertBefore(e,d.firstChild):d.appendChild(e));d=new a._Paper;d.width=b;d.height=c;d.canvas=e;z(e,{id:"raphael-paper-"+d.id});d.clear();d._left=d._top=0;l&&(d.renderfix=function(){});d.renderfix();return d};a._engine.setViewBox=function(c,
a,d,f,h){ba("raphael.setViewBox",this,this._viewBox,[c,a,d,f,h]);var b=I(d/this.width,f/this.height),e=this.top,l=h?"meet":"xMinYMin",g;null==c?(this._vbSize&&(b=1),delete this._vbSize,g="0 0 "+this.width+" "+this.height):(this._vbSize=b,g=c+" "+a+" "+d+" "+f);for(z(this.canvas,{viewBox:g,preserveAspectRatio:l});b&&e;)l="stroke-width"in e.attrs?e.attrs["stroke-width"]:1,e.attr({"stroke-width":l}),e._.dirty=1,e._.dirtyT=1,e=e.prev;this._viewBox=[c,a,d,f,!!h];return this};a.prototype.renderfix=function(){var c=
this.canvas,a=c.style,d;try{d=c.getScreenCTM()||c.createSVGMatrix()}catch(f){d=c.createSVGMatrix()}c=-d.e%1;d=-d.f%1;if(c||d)c&&(this._left=(this._left+c)%1,a.left=this._left+"px"),d&&(this._top=(this._top+d)%1,a.top=this._top+"px")};a.prototype._desc=function(c){var d=this.desc;if(d)for(;d.firstChild;)d.removeChild(d.firstChild);else this.desc=d=z("desc"),this.canvas.appendChild(d);d.appendChild(a._g.doc.createTextNode(a.is(c,"string")?c:"Created with Red Raphal "+a.version))};a.prototype.clear=
function(){var c;for(ba("raphael.clear",this);c=this.bottom;)c.remove();for(c=this.canvas;c.firstChild;)c.removeChild(c.firstChild);this.bottom=this.top=null;c.appendChild(this.desc=z("desc"));c.appendChild(this.defs=z("defs"))};a.prototype.remove=function(){var c;for(ba("raphael.remove",this);c=this.bottom;)c.remove();this.defs&&this.defs.parentNode.removeChild(this.defs);this.desc&&this.desc.parentNode.removeChild(this.desc);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);
for(c in this)this[c]="function"==typeof this[c]?a._removedFactory(c):null;this.removed=!0};var Z=a.st,q;for(q in L)L.hasOwnProperty(q)&&!Z.hasOwnProperty(q)&&(Z[q]=function(c){return function(){var a=arguments;return this.forEach(function(d){d[c].apply(d,a)})}}(q))}})();"undefined"===typeof v&&"object"===typeof window&&(v=window);(function(){if(a.vml){var c=String,d=parseFloat,f=Math,h=f.round,b=f.max,e=f.min,I=f.sqrt,l=f.abs,g=/[, ]+/,D=a.eve,k={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},
G=/([clmz]),?([^clmz]*)/gi,ba=/ progid:\S+Blur\([^\)]+\)/g,t=/-?[^,\s-]+/g,p={path:1,rect:1,image:1},Ba={circle:1,ellipse:1},F=function(d){var f=/[ahqstv]/ig,b=a._pathToAbsolute;c(d).match(f)&&(b=a._path2curve);f=/[clmz]/g;if(b==a._pathToAbsolute&&!c(d).match(f))return(d=c(d).replace(G,function(c,d,a){var f=[],b="m"==d.toLowerCase(),e=k[d];a.replace(t,function(c){b&&2==f.length&&(e+=f+k["m"==d?"l":"L"],f=[]);f.push(h(21600*c))});return e+f}))||"m0,0";var f=b(d),e;d=[];for(var I=0,l=f.length;I<l;I++){b=
f[I];e=f[I][0].toLowerCase();"z"==e&&(e="x");for(var g=1,D=b.length;g<D;g++)e+=h(21600*b[g])+(g!=D-1?",":"");d.push(e)}return d.length?d.join(" "):"m0,0"},z=function(c,d,f){var h=a.matrix();h.rotate(-c,.5,.5);return{dx:h.x(d,f),dy:h.y(d,f)}},w=function(c,d,a,f,h,b){var e=c._,I=c.matrix,g=e.fillpos;c=c.node;var D=c.style,k=1,G="",ba=21600/d,t=21600/a;D.visibility="hidden";if(d&&a){c.coordsize=l(ba)+" "+l(t);D.rotation=b*(0>d*a?-1:1);b&&(h=z(b,f,h),f=h.dx,h=h.dy);0>d&&(G+="x");0>a&&(G+=" y")&&(k=-1);
D.flip=G;c.coordorigin=f*-ba+" "+h*-t;if(g||e.fillsize)if(f=(f=c.getElementsByTagName("fill"))&&f[0])c.removeChild(f),g&&(h=z(b,I.x(g[0],g[1]),I.y(g[0],g[1])),f.position=h.dx*k+" "+h.dy*k),e.fillsize&&(f.size=e.fillsize[0]*l(d)+" "+e.fillsize[1]*l(a)),c.appendChild(f);D.visibility="visible"}};a._url="";a.toString=function(){return"Your browser doesnt support SVG. Falling down to VML.\nYou are running Raphal "+this.version};var aa=function(d,a,f){a=c(a).toLowerCase().split("-");f=f?"end":"start";
for(var h=a.length,b="classic",e="medium",I="medium";h--;)switch(a[h]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":b=a[h];break;case "wide":case "narrow":I=a[h];break;case "long":case "short":e=a[h]}d=d.node.getElementsByTagName("stroke")[0];d[f+"arrow"]=b;d[f+"arrowlength"]=e;d[f+"arrowwidth"]=I},m=function(c,d){for(var a in d)D("raphael.attr."+a+"."+c.id,c,d[a],a),c.ca[a]&&c.attr(a,d[a])},Oa=a._setFillAndStroke=function(f,I){if(f.paper.canvas){f.attrs=f.attrs||
{};var l=f.node,D=f.attrs,k=l.style,G=p[f.type]&&(I.x!=D.x||I.y!=D.y||I.width!=D.width||I.height!=D.height||I.cx!=D.cx||I.cy!=D.cy||I.rx!=D.rx||I.ry!=D.ry||I.r!=D.r),ba=Ba[f.type]&&(D.cx!=I.cx||D.cy!=I.cy||D.r!=I.r||D.rx!=I.rx||D.ry!=I.ry),t="group"===f.type,z;for(z in I)I.hasOwnProperty(z)&&(D[z]=I[z]);G&&(D.path=a._getPath[f.type](f),f._.dirty=1);I.href&&(l.href=I.href);I.title&&(l.title=I.title);I.target&&(l.target=I.target);I.cursor&&(k.cursor=I.cursor);"blur"in I&&f.blur(I.blur);if(I.path&&"path"==
f.type||G)l.path=F(~c(D.path).toLowerCase().indexOf("r")?a._pathToAbsolute(D.path):D.path),"image"==f.type&&(f._.fillpos=[D.x,D.y],f._.fillsize=[D.width,D.height],w(f,1,1,0,0,0));"transform"in I&&f.transform(I.transform);"rotation"in I&&(k=I.rotation,a.is(k,"array")?f.rotate.apply(f,k):f.rotate(k));"visibility"in I&&("hidden"===I.visibility?f.hide():f.show());ba&&(k=+D.cx,ba=+D.cy,G=+D.rx||+D.r||0,z=+D.ry||+D.r||0,l.path=a.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",h(21600*(k-G)),h(21600*(ba-z)),
h(21600*(k+G)),h(21600*(ba+z)),h(21600*k)));"clip-rect"in I&&(k=c(I["clip-rect"]).split(g),4==k.length&&(k[0]=+k[0],k[1]=+k[1],k[2]=+k[2]+k[0],k[3]=+k[3]+k[1],G=t?l:l.clipRect||a._g.doc.createElement("div"),ba=G.style,t?(f.clip=k.slice(),G=f.matrix.offset(),G=[d(G[0]),d(G[1])],k[0]-=G[0],k[1]-=G[1],k[2]-=G[0],k[3]-=G[1],ba.width="1px",ba.height="1px"):l.clipRect||(ba.top="0",ba.left="0",ba.width=f.paper.width+"px",ba.height=f.paper.height+"px",l.parentNode.insertBefore(G,l),G.appendChild(l),G.raphael=
!0,G.raphaelid=l.raphaelid,l.clipRect=G),ba.position="absolute",ba.clip=a.format("rect({1}px {2}px {3}px {0}px)",k)),I["clip-rect"]||(t&&f.clip?(l.style.clip="rect(0px 10800px 10800px 0px)",delete f.clip):l.clipRect&&(l.clipRect.style.clip="rect(0px 10800px 10800px 0px)")));if(f.textpath||t)t=t?l.style:f.textpath.style,I.font&&(t.font=I.font),I["font-family"]&&(t.fontFamily='"'+I["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"'),I["font-size"]&&(t.fontSize=I["font-size"]),I["font-weight"]&&
(t.fontWeight=I["font-weight"]),I["font-style"]&&(t.fontStyle=I["font-style"]);"arrow-start"in I&&aa(f,I["arrow-start"]);"arrow-end"in I&&aa(f,I["arrow-end"],1);if(null!=I.opacity||null!=I["stroke-width"]||null!=I.fill||null!=I.src||null!=I.stroke||null!=I["stroke-width"]||null!=I["stroke-opacity"]||null!=I["fill-opacity"]||null!=I["stroke-dasharray"]||null!=I["stroke-miterlimit"]||null!=I["stroke-linejoin"]||null!=I["stroke-linecap"]){t=l.getElementsByTagName("fill");k=-1;t=t&&t[0];!t&&(t=Qa("fill"));
"image"==f.type&&I.src&&(t.src=I.src);I.fill&&(t.on=!0);if(null==t.on||"none"==I.fill||null===I.fill)t.on=!1;t.on&&I.fill&&((ba=c(I.fill).match(a._ISURL))?(t.parentNode==l&&l.removeChild(t),t.rotate=!0,t.src=ba[1],t.type="tile",G=f.getBBox(1),t.position=G.x+" "+G.y,f._.fillpos=[G.x,G.y],a._preload(ba[1],function(){f._.fillsize=[this.offsetWidth,this.offsetHeight]})):(ba=a.getRGB(I.fill),t.color=ba.hex,t.src="",t.type="solid",ba.error&&(f.type in{circle:1,ellipse:1}||"r"!=c(I.fill).charAt())&&R(f,
I.fill,t)?(D.fill="none",D.gradient=I.fill,t.rotate=!1):"opacity"in ba&&!("fill-opacity"in I)&&(k=ba.opacity)));if(-1!==k||"fill-opacity"in I||"opacity"in I)ba=((+D["fill-opacity"]+1||2)-1)*((+D.opacity+1||2)-1)*((+k+1||2)-1),ba=e(b(ba,0),1),t.opacity=ba,t.src&&(t.color="none");l.appendChild(t);t=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0];k=!1;!t&&(k=t=Qa("stroke"));if(I.stroke&&"none"!=I.stroke||I["stroke-width"]||null!=I["stroke-opacity"]||I["stroke-dasharray"]||I["stroke-miterlimit"]||
I["stroke-linejoin"]||I["stroke-linecap"])t.on=!0;"none"!=I.stroke&&null!==I.stroke&&null!=t.on&&0!=I.stroke&&0!=I["stroke-width"]||(t.on=!1);ba=a.getRGB("stroke"in I?I.stroke:D.stroke);t.on&&I.stroke&&(t.color=ba.hex);ba=((+D["stroke-opacity"]+1||2)-1)*((+D.opacity+1||2)-1)*((+ba.opacity+1||2)-1);G=.75*(d(I["stroke-width"])||1);ba=e(b(ba,0),1);null==I["stroke-width"]&&(G=D["stroke-width"]);I["stroke-width"]&&(t.weight=G);G&&1>G&&(ba*=G)&&(t.weight=1);t.opacity=ba;I["stroke-linejoin"]&&(t.joinstyle=
I["stroke-linejoin"])||k&&(k.joinstyle="miter");t.miterlimit=I["stroke-miterlimit"]||8;I["stroke-linecap"]&&(t.endcap="butt"==I["stroke-linecap"]?"flat":"square"==I["stroke-linecap"]?"square":"round");I["stroke-dasharray"]&&(ba={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},t.dashstyle=ba.hasOwnProperty(I["stroke-dasharray"])?ba[I["stroke-dasharray"]]:I["stroke-dasharray"].join&&
I["stroke-dasharray"].join(" ")||"");k&&l.appendChild(t)}if("text"==f.type){f.paper.canvas.style.display="";l=f.paper.span;t=D.font&&D.font.match(/\d+(?:\.\d*)?(?=px)/);ba=D["line-height"]&&(D["line-height"]+"").match(/\d+(?:\.\d*)?(?=px)/);k=l.style;D.font&&(k.font=D.font);D["font-family"]&&(k.fontFamily=D["font-family"]);D["font-weight"]&&(k.fontWeight=D["font-weight"]);D["font-style"]&&(k.fontStyle=D["font-style"]);t=d(D["font-size"]||t&&t[0])||10;k.fontSize=100*t+"px";ba=d(D["line-height"]||ba&&
ba[0])||12;D["line-height"]&&(k.lineHeight=100*ba+"px");a.is(I.text,"array")&&(I.text=f.textpath.string=I.text.join("\n").replace(/<br\s*?\/?>/ig,"\n"));f.textpath.string&&(l.innerHTML=c(f.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));l=l.getBoundingClientRect();f.W=D.w=(l.right-l.left)/100;f.H=D.h=(l.bottom-l.top)/100;f.X=D.x;f.Y=D.y;switch(D["vertical-align"]){case "top":f.bby=f.H/2;break;case "bottom":f.bby=-f.H/2;break;default:f.bby=0}("x"in I||"y"in I||void 0!==
f.bby)&&(f.path.v=a.format("m{0},{1}l{2},{1}",h(21600*D.x),h(21600*(D.y+(f.bby||0))),h(21600*D.x)+1));l="x y text font font-family font-weight font-style font-size line-height".split(" ");t=0;for(k=l.length;t<k;t++)if(l[t]in I){f._.dirty=1;break}switch(D["text-anchor"]){case "start":f.textpath.style["v-text-align"]="left";f.bbx=f.W/2;break;case "end":f.textpath.style["v-text-align"]="right";f.bbx=-f.W/2;break;default:f.textpath.style["v-text-align"]="center",f.bbx=0}f.textpath.style["v-text-kern"]=
!0}}},B=a._updateFollowers=function(){var c,d,a,f=arguments,h=S.call(f),b=S.call(f);c=0;for(d=h.followers.length;c<d;c++)a=h.followers[c].el,a[b].apply(a,f)},R=function(f,h,b){f.attrs=f.attrs||{};var e=Math.pow,l="linear",g=".5 .5";f.attrs.gradient=h;h=c(h).replace(a._radial_gradient,function(c,a){l="radial";a=a&&a.split(",")||[];var f=a[3],h=a[4];f&&h&&(f=d(f),h=d(h),.25<e(f-.5,2)+e(h-.5,2)&&(h=I(.25-e(f-.5,2))*(2*(.5<h)-1)+.5),g=f+" "+h);return""});h=h.split(/\s*\-\s*/);if("linear"==l){var D=h.shift(),
D=-d(D);if(isNaN(D))return null}h=a._parseDots(h);if(!h)return null;f=f.shape||f.node;if(h.length){b.parentNode==f&&f.removeChild(b);b.on=!0;b.method="none";b.color=h[0].color;b.color2=h[h.length-1].color;for(var k=[],G=1,ba=void 0===h[0].opacity?1:h[0].opacity,t=0,p=h.length;t<p;t++)h[t].offset&&k.push(h[t].offset+" "+h[t].color),void 0!==h[t].opacity&&(G=h[t].opacity);b.colors=k.length?k.join():"0% "+b.color;b.opacity=G;b["o:opacity2"]=ba;"radial"==l?(b.type="gradientTitle",b.focus="100%",b.focussize=
"0 0",b.focusposition=g,b.angle=0):(b.type="gradient",b.angle=(270-D)%360);f.appendChild(b)}return 1},n=function(c,d,f){f=f||d;var h;f.canvas&&f.canvas.appendChild(c);h=Qa("skew");h.on=!0;c.appendChild(h);this.skew=h;this.node=this[0]=c;c.raphael=!0;c.raphaelid=this.id=a._oid++;this.Y=this.X=0;this.attrs=this.attrs||{};this.followers=this.followers||[];this.paper=d;this.ca=this.customAttributes=this.customAttributes||new d._CustomAttributes;this.matrix=a.matrix();this._={transform:[],sx:1,sy:1,dx:0,
dy:0,deg:0,dirty:1,dirtyT:1};this.parent=f;!f.bottom&&(f.bottom=this);(this.prev=f.top)&&(f.top.next=this);f.top=this;this.next=null},f=a.el;n.prototype=f;f.constructor=n;f.transform=function(d){if(null==d)return this._.transform;var f=this.paper._viewBoxShift,h=f?"s"+[f.scale,f.scale]+"-1-1t"+[f.dx,f.dy]:"",b;f&&(b=d=c(d).replace(/\.{3}|\u2026/g,this._.transform||""));a._extractTransform(this,h+d);var f=this.matrix.clone(),e=this.skew;d=this.node;var h=~c(this.attrs.fill).indexOf("-"),I=!c(this.attrs.fill).indexOf("url(");
f.translate(-.5,-.5);I||h||"image"==this.type?(e.matrix="1 0 0 1",e.offset="0 0",e=f.split(),h&&e.noRotation||!e.isSimple?(d.style.filter=f.toFilter(),f=this.getBBox(),h=this.getBBox(1),I=f.x2&&h.x2&&"x2"||"x",e=f.y2&&h.y2&&"y2"||"y",I=f[I]-h[I],f=f[e]-h[e],d.coordorigin=-21600*I+" "+-21600*f,w(this,1,1,I,f,0)):(d.style.filter="",w(this,e.scalex,e.scaley,e.dx,e.dy,e.rotate))):(d.style.filter="",e.matrix=c(f),e.offset=f.offset());b&&(this._.transform=b);return this};f.rotate=function(a,f,h){if(this.removed)return this;
B(this,"rotate",a,f,h);if(null!=a){a=c(a).split(g);a.length-1&&(f=d(a[1]),h=d(a[2]));a=d(a[0]);null==h&&(f=h);if(null==f||null==h)h=this.getBBox(1),f=h.x+h.width/2,h=h.y+h.height/2;this._.dirtyT=1;this.transform(this._.transform.concat([["r",a,f,h]]));return this}};f.translate=function(a,f){if(this.removed)return this;B(this,"translate",a,f);a=c(a).split(g);a.length-1&&(f=d(a[1]));a=d(a[0])||0;f=+f||0;this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=f);this.transform(this._.transform.concat([["t",a,
f]]));return this};f.scale=function(a,f,h,b){if(this.removed)return this;B(this,"scale",a,f,h,b);a=c(a).split(g);a.length-1&&(f=d(a[1]),h=d(a[2]),b=d(a[3]),isNaN(h)&&(h=null),isNaN(b)&&(b=null));a=d(a[0]);null==f&&(f=a);null==b&&(h=b);if(null==h||null==b)var e=this.getBBox(1);h=null==h?e.x+e.width/2:h;b=null==b?e.y+e.height/2:b;this.transform(this._.transform.concat([["s",a,f,h,b]]));this._.dirtyT=1;return this};f.hide=function(c){B(this,"hide",c);!this.removed&&(this.node.style.display="none");return this};
f.show=function(c){B(this,"show",c);!this.removed&&(this.node.style.display="");return this};f._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y+(this.bby||0)-this.H/2,width:this.W,height:this.H}};f.remove=function(){if(!this.removed&&this.parent.canvas){var c=a._engine.getNode(this),d=this.paper,f=this.shape;d.__set__&&d.__set__.exclude(this);D.unbind("raphael.*.*."+this.id);f&&f.parentNode.removeChild(f);for(c.parentNode&&c.parentNode.removeChild(c);c=this.followers.pop();)c.el.remove();
for(;c=this.bottom;)c.remove();this._drag&&this.undrag();if(this.events)for(;c=this.events.pop();)c.unbind();this.removeData();delete d._elementsById[this.id];a._tear(this,this.parent);for(c in this)this[c]="function"===typeof this[c]?a._removedFactory(c):null;this.removed=!0}};f.attr=function(c,d){if(this.removed)return this;if(null==c){var f={},h;for(h in this.attrs)this.attrs.hasOwnProperty(h)&&(f[h]=this.attrs[h]);f.gradient&&"none"==f.fill&&(f.fill=f.gradient)&&delete f.gradient;f.transform=
this._.transform;f.visibility="none"===this.node.style.display?"hidden":"visible";return f}if(null==d&&a.is(c,"string")){if("fill"==c&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("visibility"==c)return"none"===this.node.style.display?"hidden":"visible";var f=c.split(g),b={},e=0;for(h=f.length;e<h;e++)c=f[e],c in this.attrs?b[c]=this.attrs[c]:a.is(this.ca[c],"function")?b[c]=this.ca[c].def:b[c]=a._availableAttrs[c];return h-1?b:b[f[0]]}if(this.attrs&&null==d&&a.is(c,
"array")){b={};e=0;for(h=c.length;e<h;e++)b[c[e]]=this.attr(c[e]);return b}null!=d&&(f={},f[c]=d);null==d&&a.is(c,"object")&&(f=c);if(!1!==a.stopEvent)for(e in f)D("raphael.attr."+e+"."+this.id,this,f[e],e);if(f){var I={};for(e in this.ca)if(this.ca[e]&&f.hasOwnProperty(e)&&a.is(this.ca[e],"function")&&!this.ca["_invoked"+e]){this.ca["_invoked"+e]=!0;h=this.ca[e].apply(this,[].concat(f[e]));delete this.ca["_invoked"+e];for(b in h)h.hasOwnProperty(b)&&(f[b]=h[b]);this.attrs[e]=f[e];!1===h&&(I[e]=f[e],
delete f[e])}"text"in f&&"text"==this.type&&(a.is(f.text,"array")&&(f.text=f.text.join("\n")),this.textpath.string=f.text.replace(/<br\s*?\/?>/ig,"\n"));Oa(this,f);var l,e=0;for(h=this.followers.length;e<h;e++)l=this.followers[e],l.cb&&!l.cb.call(l.el,f,this)||l.el.attr(f);for(b in I)f[b]=I[b]}return this};f.blur=function(c){var d=this.node.runtimeStyle,f=d.filter,f=f.replace(ba,"");0!==+c?(this.attrs.blur=c,d.filter=f+"  progid:DXImageTransform.Microsoft.Blur(pixelradius="+(+c||1.5)+")",d.margin=
a.format("-{0}px 0 0 -{0}px",h(+c||1.5))):(d.filter=f,d.margin=0,delete this.attrs.blur);return this};f.on=function(c,d){if(this.removed)return this;if("dragstart"===c)return this.drag(null,d),this;if("dragmove"===c)return this.drag(d),this;if("dragend"===c)return this.drag(null,null,d),this;this.node.attachEvent?this.node.attachEvent("on"+c,d):this.node["on"+c]=function(){var c=a._g.win.event;c.target=c.srcElement;d(c)};return this};f.off=function(c,d){if(this.removed)return this;if("dragstart"===
c)return this.undragstart(),this;if("dragmove"===c)return this.undragmove(),this;if("dragend"===c)return this.undragend(),this;this.node.attachEvent?this.node.detachEvent("on"+c,d):this.node["on"+c]=null;return this};a._engine.getNode=function(c){c=c.node||c[0].node;return c.clipRect||c};a._engine.getLastNode=function(c){c=c.node||c[c.length-1].node;return c.clipRect||c};a._engine.group=function(c,d,f){var h=a._g.doc.createElement("div"),b=new n(h,c,f);h.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";
b._id=d||"";d&&(h.className="raphael-group-"+b.id+"-"+d);(f||c).canvas.appendChild(h);b.type="group";b.canvas=b.node;b.transform=a._engine.group.transform;b.top=null;b.bottom=null;return b};a._engine.group.transform=function(f){if(null==f)return this._.transform;var h=this.node.style,b=this.clip,e=this.paper._viewBoxShift,I=e?"s"+[e.scale,e.scale]+"-1-1t"+[e.dx,e.dy]:"";e&&(f=c(f).replace(/\.{3}|\u2026/g,this._.transform||""));a._extractTransform(this,I+f);f=this.matrix;I=f.offset();e=d(I[0])||0;
I=d(I[1])||0;h.left=e+"px";h.top=I+"px";h.zoom=(this._.tzoom=f.get(0))+"";b&&(h.clip=a.format("rect({1}px {2}px {3}px {0}px)",[b[0]-e,b[1]-I,b[2]-e,b[3]-I]));return this};a._engine.path=function(c,d,a){var f=Qa("shape");f.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";f.coordsize="21600 21600";f.coordorigin=c.coordorigin;c=new n(f,c,a);c.type=d.type||"path";c.path=[];c.Path="";d.type&&delete d.type;Oa(c,d);m(c,d);return c};a._engine.rect=function(c,d,f){var h=a._rectPath(d.x,
d.y,d.w,d.h,d.r);d.path=h;d.type="rect";c=c.path(d,f);d=c.attrs;c.X=d.x;c.Y=d.y;c.W=d.width;c.H=d.height;d.path=h;return c};a._engine.ellipse=function(c,d,a){d.type="ellipse";c=c.path(d,a);d=c.attrs;c.X=d.x-d.rx;c.Y=d.y-d.ry;c.W=2*d.rx;c.H=2*d.ry;return c};a._engine.circle=function(c,d,a){d.type="circle";c=c.path(d,a);d=c.attrs;c.X=d.x-d.r;c.Y=d.y-d.r;c.W=c.H=2*d.r;return c};a._engine.image=function(c,d,f){var h=a._rectPath(d.x,d.y,d.w,d.h);d.path=h;d.type="image";d.stroke="none";c=c.path(d,f);f=
c.attrs;var h=c.node,b=h.getElementsByTagName("fill")[0];f.src=d.src;c.X=f.x=d.x;c.Y=f.y=d.y;c.W=f.width=d.w;c.H=f.height=d.h;b.parentNode==h&&h.removeChild(b);b.rotate=!0;b.src=f.src;b.type="tile";c._.fillpos=[f.x,f.y];c._.fillsize=[f.w,f.h];h.appendChild(b);w(c,1,1,0,0,0);return c};a._engine.text=function(d,f,b,e){var I=Qa("shape"),l=Qa("path"),g=Qa("textpath");x=f.x||0;y=f.y||0;text=f.text;l.v=a.format("m{0},{1}l{2},{1}",h(21600*f.x),h(21600*f.y),h(21600*f.x)+1);l.textpathok=!0;g.string=c(f.text).replace(/<br\s*?\/?>/ig,
"\n");g.on=!0;I.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";I.coordsize="21600 21600";I.coordorigin="0 0";d=new n(I,d,b);d.shape=I;d.path=l;d.textpath=g;d.type="text";d.attrs.text=c(f.text||"");d.attrs.x=f.x;d.attrs.y=f.y;d.attrs.w=1;d.attrs.h=1;e&&d.css&&d.css(e,void 0,!0);Oa(d,f);m(d,f);I.appendChild(g);I.appendChild(l);return d};a._engine.setSize=function(c,d){var f=this.canvas.style;this.width=c;this.height=d;c==+c&&(c+="px");d==+d&&(d+="px");c&&(f.width=c);d&&(f.height=
d);f.clip="rect(0 "+f.width+" "+f.height+" 0)";this._viewBox&&a._engine.setViewBox.apply(this,this._viewBox);return this};a._engine.setViewBox=function(c,d,a,f,h){D("raphael.setViewBox",this,this._viewBox,[c,d,a,f,h]);var e=this.width,I=this.height,l=1/b(a/e,f/I),g,k;h&&(g=I/f,k=e/a,a*g<e&&(c-=(e-a*g)/2/g),f*k<I&&(d-=(I-f*k)/2/k));this._viewBox=[c,d,a,f,!!h];this._viewBoxShift={dx:-c,dy:-d,scale:l};this.forEach(function(c){c.transform("...")});return this};var Qa;a._engine.initWin=function(d){var f=
d.document;f.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!f.namespaces.rvml&&f.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),Qa=a._createNode=function(d,a){var h=f.createElement("<rvml:"+d+' class="rvml">'),b;for(b in a)h[b]=c(a[b]);return h}}catch(h){Qa=a._createNode=function(d,a){var h=f.createElement("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">'),b;for(b in a)h[b]=c(a[b]);return h}}};a._engine.initWin(a._g.win);a._engine.create=function(){var c=
a._getContainer.apply(0,arguments),d=c.container,f=c.height,h=c.width,b=c.x,c=c.y;if(!d)throw Error("VML container not found.");var e=new a._Paper,I=e.canvas=a._g.doc.createElement("div"),l=I.style,b=b||0,c=c||0,h=h||512,f=f||342;e.width=h;e.height=f;h==+h&&(h+="px");f==+f&&(f+="px");e.coordsize="21600000 21600000";e.coordorigin="0 0";I.id="raphael-paper-"+e.id;e.span=a._g.doc.createElement("span");e.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";
I.appendChild(e.span);l.cssText=a.format("top:0;left:0;width:{0};height:{1};display:inline-block;cursor:default;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",h,f);1==d?(a._g.doc.body.appendChild(I),l.left=b+"px",l.top=c+"px",l.position="absolute"):d.firstChild?d.insertBefore(I,d.firstChild):d.appendChild(I);e.renderfix=function(){};return e};a.prototype.clear=function(){var c;for(D("raphael.clear",this);c=this.bottom;)c.remove();this.canvas.innerHTML="";this.span=a._g.doc.createElement("span");
this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};a.prototype.remove=function(){var c;for(D("raphael.remove",this);c=this.bottom;)c.remove();this.canvas.parentNode.removeChild(this.canvas);for(c in this)this[c]="function"==typeof this[c]?a._removedFactory(c):null;return!0};var K=a.st,P;for(P in f)f.hasOwnProperty(P)&&!K.hasOwnProperty(P)&&(K[P]=function(c){return function(){var d=
arguments;return this.forEach(function(a){a[c].apply(a,d)})}}(P))}})();w&&(R.win.Raphael=a);return a},!0);b.Raphael=C;b.Raphael.desc="";J&&J!==C?v.Raphael=J:v.Raphael===C&&(v.Raphael=void 0)})(v||window)}]);Q.register("module",["private","fusioncharts.redraphael.helper",function(){var b=this.hcLib,v=b.Raphael,J={};v.fn._elementFromEvent=function(b){if(!b||this.removed)return null;var v=b.srcElement||b.target||(b=b.originalEvent)&&(b.srcElement||b.target)||J;"tspan"===v.nodeName&&(v=v.parentNode);
return this.getById(v.raphaelid)};v.requestAnimFrame=b.schedular.addJob&&function(v){b.schedular.addJob(v,b.priorityList.animation,!0)}}]);Q.register("module",["private","fusioncharts.redraphael.css",function(){var b=this.hcLib,v=b.Raphael,J=v.eve,C=v._g,H=v.fn,A=v.el,u=/[, ]+/,a=/\B([A-Z]{1})/g,O,q;O=function(a){this.styleSheet="";this.rules={};this.ns=a||""};q=O.prototype;q.getSheet=function(){var a=this.node;this.styleSheet=q.getStyleSheet("fusioncharts-raphael-stylesheet");this.styleSheet||(a=
this.node=C.doc.createElement("style"),a.setAttribute("id",v.format("raphael-stylesheet-{0}",v._oid++)),a.setAttribute("type","text/css"),a.setAttribute("title","fusioncharts-raphael-stylesheet"),(C.doc.head||C.doc.getElementsByTagName("head")[0]).appendChild(this.node),this.styleSheet=q.getStyleSheet("fusioncharts-raphael-stylesheet"));return this.styleSheet};q.getStyleSheet=function(a){for(var b=C.doc.styleSheets,q=b.length,u;q--;)if(u=b[q],u.title===a)return u};q.applyCSSRule=function(a,b){var q=
this.styleSheet,u;if(!q)if(a&&b)q=this.getSheet();else return;u=(q.rules||q.cssRules||{}).length||0;q.insertRule?q.insertRule(a+"{"+b+"}",u):q.addRule&&q.addRule(a,b,u)};q.removeCSS=function(a){var b=this.styleSheet,q=b.rules||b.cssRules||{},u=q.length||0,r;for(a=a||this.ns;u--;)r=q[u],(new RegExp(a)).test(r.selectorText)&&(b.removeRule?b.removeRule(u):b.deleteRule(u))};q.destroy=function(){this.removeCSS();delete this.node;delete this.styleSheet;delete this.ns;delete this.rules};q.clear=function(){this.removeCSS();
this.rules={}};q.add=function(b,q,u){var E,r="",k=this.rules[b]||(this.rules[b]={}),m=u?"":"\t";u=u?":":": ";for(E in q)(k[E]=q[E])&&(r+=m+E.replace(a,"-$1").toLowerCase()+u+k[E]+";");this.applyCSSRule(b,r)};q.render=function(){this.setCssText()};q.setCssText=function(b){var q=b?"":"\t";b=b?":":": ";var u="",E="",r,k;for(r in this.rules){u="";E=r.replace(/(^|\,)/g,"$1"+this.ns+" ");r=this.rules[r];for(k in r)r[k]&&(u+=q+k.replace(a,"-$1").toLowerCase()+b+r[k]+";");this.applyCSSRule(E,u)}};J.on("raphael.new",
function(){this._stylesheet=this._stylesheet||new O;this.cssNamespace("")});J.on("raphael.remove",function(){this._stylesheet&&this._stylesheet.destroy();delete this._stylesheet});H.cssNamespace=function(a){arguments.length&&(this._stylesheet.ns=v.format("{0}#raphael-paper-{1}",a&&a+" "||"",this.id));return this._stylesheet.ns};H.cssAddRule=function(a,b){if(1===arguments.length&&"object"===typeof a){for(var q in a)this.cssAddRule(q,a[q]);return this}return this._stylesheet.add(a,b),this};H.cssRender=
function(){return v.svg&&this._stylesheet.render(),this};H.cssClear=function(){return this._stylesheet.clear(),this};v.ca["class"]=function(a){var b=this.node,q=this.paper,u="."+a,q=q._stylesheet&&q._stylesheet.rules,r=this.parent,k=this.attrs,m={},n;if(v.svg)a=a||"",b.setAttribute("class","group"===this.type&&this._id?"raphael-group-"+this.id+"-"+this._id+" "+a:a);else if(v.vml&&(b.className="group"===this.type?a&&this._id+" "+a||this._id:"rvml "+a,u&&q)){a=q[u];for(n in a)"color"===n&&"text"===
this.type&&(n="fill"),!k[n]&&(m[n]=a[n]);for(;r&&r.attr;){if(a=r.attr("class"))for(n in u="."+a+" "+u,a=q[u],a)"color"===n&&"text"===this.type&&(n="fill"),k[n]||m[n]||(m[n]=a[n]);r=r.parent}this.css(m)}};A.css=function(a,b,q){var E,r;if(this.removed)return this;this.styles||(this.styles={});if(null==b&&v.is(a,"string")){q=a.split(u);E={};r=0;for(b=q.length;r<b;r++)a=q[r],a in this.styles&&(E[a]=this.styles[a]);return b-1?E:E[q[0]]}if(null==b&&v.is(a,"array")){E={};r=0;for(b=a.length;r<b;r++)E[a[r]]=
this.styles(a[r]);return E}null!=b?(E={},E[a]=b):null!=a&&v.is(a,"object")&&(E=a);a={};for(r in E)b=r.replace(/\B([A-Z]{1})/g,"-$1").toLowerCase(),v._availableAttrs.hasOwnProperty(b)||"color"===b?("color"===b&&"text"===this.type&&(b="fill"),a[b]=E[r],a.dirty=!0):(J("raphael.css."+b+"."+this.id,this,E[r],b),this.node.style[b]=E[r],this.styles[b]=E[r]);r=0;for(b=this.followers.length;r<b;r++)this.followers[r].el.attr(E);a.hasOwnProperty("dirty")&&(delete a.dirty,q&&(a["_do-not-tune"]=!0),this.attr(a));
return this};A.removeCSS=function(a){var q,u,E;!a&&(a=b.appliedCSS);if(this.removed)return this;v.is(a,"string")&&(a=a.split(","));if(v.is(a,"array"))for(E=a.length,u=0;u<E;u++)q=a[u].replace(/\B([A-Z]{1})/g,"-$1").toLowerCase(),this.node.removeAttribute(q),this.node.style[q]="";return this}}]);Q.register("module",["private","modules.renderer.js-raphaelexport",function(){var b=this.hcLib,v=b.Raphael,J=b.pluckNumber,C=b.pluck,H=v._availableAttrs,A=/^matrix\(|\)$/g,u=/\,/g,a=/\n|<br\s*?\/?>/ig,O=/[^\d\.]/ig,
q=/[\%\(\)\s,\xb0#]/g,M=/group/ig,U=/&/g,N=/"/g,E=/'/g,r=/</g,k=/>/g,m=0;(function(b){var L=Math,g=parseFloat,l=L.max,B=L.abs,e=L.pow,V=String,p=/[, ]+/,T=[{reg:/xmlns\=\"http\:\/\/www.w3.org\/2000\/svg\"/ig,repStr:""},{reg:/^.*<svg /,repStr:'<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" '},{reg:/\/svg>.*$/,repStr:"/svg>"},{reg:/<desc\>[^<]*<\/desc\>/,repStr:""},{reg:/zIndex="[^"]+"/g,repStr:""},{reg:/url\((\\?[\'\"])[^#]+#/g,repStr:"url($1#"},{reg:/ href=/g,repStr:" xlink:href="},
{reg:/(id|class|width|height)=([^" >]+)/g,repStr:'$1="$2"'},{reg:/:(path|rect)/g,repStr:"$1"},{reg:/<ima?ge? ([^\>]+?[^\/])\>/gi,repStr:"<image $1 />"},{reg:/<\/ima?ge?\>/g,repStr:""},{reg:/style="([^"]+)"/g,repStr:function(a){return a.toLowerCase()}}],K={blur:function(){},transform:function(){},src:function(a,b){b.attrSTR+=' xlink:href="'+b.attrs.src+'"'},path:function(a,e){var l=e.attrs.path,l=b._pathToAbsolute(l||"");e.attrSTR+=' d="'+(l.toString&&l.toString()||"").replace(u," ")+'"'},gradient:function(a,
k,t){var p=a.attrs.gradient,F="linear",m,h,d,f=.5,c=.5,D=h="",G="",aa,K,P,r;m=p.replace(q,"_");if(!t[m]){p=V(p).replace(b._radial_gradient,function(d,a){var h,b,l,D,k,G,t;a=a&&a.split(",")||[];F="radial";h=a[0];b=a[1];l=a[2];D=a[3];k=a[4];r=a[5];t=h&&b;l&&(P=/\%/.test(l)?l:g(l));if("userSpaceOnUse"===r)return t&&(f=h,c=b),D&&k&&(aa=D,K=k,t||(f=aa,c=K)),"";t&&(f=g(h),c=g(b),h=2*(.5<c)-1,.25<(G=e(f-.5,2))+e(c-.5,2)&&.25>G&&(c=L.sqrt(.25-G)*h+.5)&&.5!==c&&(c=c.toFixed(5)-1E-5*h));D&&k&&(aa=g(D),K=g(k),
h=2*(.5<K)-1,.25<(G=e(aa-.5,2))+e(K-.5,2)&&.25>G&&(K=L.sqrt(.25-G)*h+.5)&&.5!==K&&(K=K.toFixed(5)-1E-5*h),t||(f=aa,c=K));return""});p=p.split(/\s*\-\s*/);if("linear"===F){h=p.shift();h=-g(h);if(isNaN(h))return null;d=[0,0,L.cos(b.rad(h)),L.sin(b.rad(h))];h=1/(l(B(d[2]),B(d[3]))||1);d[2]*=h;d[3]*=h;0>d[2]&&(d[0]=-d[2],d[2]=0);0>d[3]&&(d[1]=-d[3],d[3]=0)}p=b._parseDots(p);if(!p)return null;"radial"===F?(h='<radialGradient fx = "'+f+'" fy = "'+c+'" cy = "'+K+'" cx = "'+aa+'" r = "'+P+'" gradientUnits = "'+
r+'" id = "'+m+'">',D="</radialGradient>"):(h='<linearGradient x1 = "'+d[0]+'" y1 = "'+d[1]+'" x2 = "'+d[2]+'" y2 = "'+d[3]+'" gradientTransform ="matrix('+a.matrix.invert()+')" id = "'+m+'">',D="</linearGradient>");a=0;for(d=p.length;a<d;a++)G+='<stop offset="'+(p[a].offset?p[a].offset:a?"100%":"0%")+'" stop-color="'+(p[a].color||"#fff")+'" stop-opacity="'+(void 0===p[a].opacity?1:p[a].opacity)+'" />';t[m]=!0;t.str+=h+G+D}k.attrSTR+=" fill=\"url('#"+m+"')\""},fill:function(a,e){var l=e.attrs,g=l.fill,
k;a.attrs.gradient||(g=b.color(g),k=g.opacity,"text"===a.type?e.styleSTR+="fill:"+g+"; stroke-opacity:0; ":(e.attrSTR+=' fill="'+g+'"',l["fill-opacity"]||!k&&0!==k||(e.attrSTR+=' fill-opacity="'+k+'"')))},stroke:function(a,e){var l=e.attrs,g,k;g=b.color(l.stroke);k=g.opacity;"text"!==a.type&&(e.attrSTR+=' stroke="'+g+'"',l["stroke-opacity"]||!k&&0!==k||(e.attrSTR+=' stroke-opacity="'+k+'"'))},"clip-rect":function(a,b,e){var l=V(b.attrs["clip-rect"]),g=l.split(p),l=l.replace(q,"_")+"__"+m++;4===g.length&&
(e[l]||(e[l]=!0,e.str+='<clipPath id="'+l+'"><rect x="'+g[0]+'" y="'+g[1]+'" width="'+g[2]+'" height="'+g[3]+'" transform="matrix('+a.matrix.invert().toMatrixString().replace(A,"")+')"/></clipPath>'),b.attrSTR+=' clip-path="url(#'+l+')"')},cursor:function(a,b){var e=b.attrs.cursor;e&&(b.styleSTR+="cursor:"+e+"; ")},font:function(a,b){b.styleSTR+="font:"+b.attrs.font.replace(/\"/ig," ")+"; "},"font-size":function(a,b){var e=C(b.attrs["font-size"],"10");e&&e.replace&&(e=e.replace(O,""));b.styleSTR+=
"font-size:"+e+"px; "},"font-weight":function(a,b){b.styleSTR+="font-weight:"+b.attrs["font-weight"]+"; "},"font-family":function(a,b){b.styleSTR+="font-family:"+b.attrs["font-family"]+"; "},"line-height":function(){},"clip-path":function(){},visibility:function(){},"vertical-align":function(){},"text-anchor":function(a,b){var e=b.attrs["text-anchor"]||"middle";"text"===a.type&&(b.attrSTR+=' text-anchor="'+e+'"')},title:function(){},text:function(b,e){var l=e.attrs,g=l.text,t=C(l["font-size"],l.font,
"10"),p=C(l["line-height"]),h,d,f;t&&t.replace&&(t=t.replace(O,""));t=J(t);p&&p.replace&&(p=p.replace(O,""));p=J(p,t&&1.2*t);h=t?.85*t:.75*p;t=l.x;d=C(l["vertical-align"],"middle").toLowerCase();g=V(g).split(a);f=g.length;l=0;for(h="top"===d?h:"bottom"===d?h-p*f:h-p*f*.5;l<f;l++)e.textSTR+="<tspan ",d=(g[l]||"").replace(U,"&amp;").replace(N,"&quot;").replace(E,"&#39;").replace(r,"&lt;").replace(k,"&gt;"),e.textSTR=l?e.textSTR+('dy="'+p+'" x="'+t+'" '):e.textSTR+('dy="'+h+'"'),e.textSTR+=">"+d+"</tspan>"}},
t=function(a,b){var e="",l={attrSTR:"",styleSTR:"",textSTR:"",attrs:a.attr()},g=a.isShadow,k="",h="",d,f,c=l.attrs;if("none"===a.node.style.display||g)a.next&&(e+=t(a.next,b));else{for(d in c)if("gradient"!==d&&(void 0!==H[d]||K[d])&&void 0!==c[d])if(K[d])K[d](a,l,b);else l.attrSTR+=" "+d+'="'+c[d]+'"';a.attrs.gradient&&K.gradient(a,l,b);"rect"===a.type&&c.r&&(l.attrSTR+=' rx="'+c.r+'" ry="'+c.r+'"');for(f in a.styles)l.styleSTR+=f+":"+a.styles[f]+"; ";"image"===a.type&&(l.attrSTR+=' preserveAspectRatio="none"');
if("text"===a.type&&!c["text-anchor"])K["text-anchor"](a,l);a.bottom&&(k=t(a.bottom,b));a.next&&(h=t(a.next,b));g=a.type;g.match(M)&&(g="g");e+="<"+g+' transform="matrix('+a.matrix.toMatrixString().replace(A,"")+')" style="'+l.styleSTR+'"'+l.attrSTR+">"+l.textSTR+k+"</"+g+">"+h}return e},Z=function(a){a=JSON.stringify(a);a=a.replace(/([a-z]+)([A-Z]+)([a-z]+)/g,function(a,b,e,l){return b+"-"+e.toLowerCase()+l});a=a.replace(/\"\,\"/g,'";"');a=a.replace(/\"/g," ");return a=a=a.replace(/\{|\}/g,"")},
P=function(a,b){var e,l,g,k,h,d=function(a){return a=a.match(/style\s*=/)?a.replace(/(style\s*=")([^"]+)/g,function(c,a,d){return a+g+d}):a.replace(/class\s*="[^"]*"/i,function(c){return c+' style="'+g+'" '})};for(e in b)if(b.hasOwnProperty(e))for(h in l=/\s+/,l=e.split(l),g=Z(b[e]),l)l.hasOwnProperty(h)&&(k=l[h].trim().replace(".",""),k=new RegExp("<[^>]+("+k+")[^>]+","g"),a=a.replace(k,d));return a};b.fn.toSVG=function(a){var e="",l={str:""},g=0,k=T.length,p="";if(b.svg){if(this.canvas&&this.canvas.parentNode){for(e=
this.canvas.parentNode.innerHTML;g<k;g+=1)l=T[g],e=e.replace(l.reg,l.repStr);this._stylesheet&&this._stylesheet.rules&&(e=P(e,this._stylesheet.rules))}a||(e=e.replace(/<image[^\>]*\>/gi,function(a){return a.match(/href=\"data\:image/i)?a:""}))}else e='<svg style="overflow: hidden; position: relative;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+this.width+'" version="1.1" height="'+this.height+'">',this.bottom&&(p=t(this.bottom,l)),e+="<defs>"+l.str+"</defs>"+
p+"</svg>",a||(e=e.replace(/<image[^\>]*\>[^\>]*\>/gi,function(a){return a.match(/href=\"data\:image/i)?a:""}));return e}})(v)}]);Q.register("module",["private","modules.renderer.js-raphaelshadow",function(){var b=this.window,v=Math.sqrt,J=b.parseFloat,C=b.parseInt,b=b.SVGFilterElement||b.SVGFEColorMatrixElement&&2===b.SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE,H=this.hcLib.Raphael,A={"drop-shadow":"drop-shadow",stroke:"stroke",fill:"fill","stroke-width":"stroke-width","stroke-opacity":"stroke-opacity",
"stroke-linecap":"stroke-linecap","stroke-linejoin":"stroke-linejoin","shape-rendering":"shape-rendering",transform:"transform"},u=H._createNode,a;H.svg?(b&&(H.el.dropshadow=function(a,b,C,A){var N=this.node,E=this._.shadowFilter,r=this.paper.cacheShadows||(this.paper.cacheShadows={}),k="drop-shadow"+[a,b,C,A].join(" "),m;if("none"===a){if(E){--E.use;this.node.removeAttribute("filter");if(!E.use){k=E.hash;for(m in E)a=E[m],a.parentNode&&a.parentNode.removeChild(a),delete E[m];delete r[k]}delete this._.shadowFilter}}else E&&
r[k]===E||(E=this.paper.defs.appendChild(u("filter",{id:H.getElementID(H.createUUID()),width:"200%",height:"200%"})),A=H.color(A),A.error&&(A=H.color("rgba(0,0,0,1)")),m=H.pick(A.opacity,1),this._.shadowFilter=r[k]={use:1,filter:E,hash:k,offset:E.appendChild(u("feOffset",{result:"offOut","in":"SourceGraphic",dx:J(a),dy:J(b)})),matrix:E.appendChild(u("feColorMatrix",{result:"matrixOut","in":"offOut",type:"matrix",values:"0 0 0 0 "+A.r/255+" 0 0 0 0 "+A.g/255+" 0 0 0 0 "+A.b/255+" 0 0 0 "+m+" 0"})),
blur:E.appendChild(u("feGaussianBlur",{result:"blurOut","in":"matrixOut",stdDeviation:v(J(C))})),blend:E.appendChild(u("feComposite",{"in":"SourceGraphic",in2:"blurOut",operator:"over"}))},N.setAttribute("filter",'url("'+H._url+"#"+E.id+'")'));return this}),a=function(a,b){var u=this.__shadowscale,v={},N,E;for(E in a)switch(A[E]&&(v[E]=a[E],delete a[E]),E){case "transform":N=b.matrix.clone();N.translate(this.__shadowx,this.__shadowy);this.transform(N.toTransformString());break;case "stroke-width":a[E]=
((v[E]||1)+6-2*this.__shadowlevel)*u}this.attr(a);for(E in v)a[E]=v[E]},H.ca["drop-shadow"]=function(b,q,u,v,N,E){u=this._.shadows||(this._.shadows=[]);var r,k,m,n,L;if(!this.__shadowblocked)if("none"===b)for(;k=u.pop();)k.remove();else for(v=H.color(v),v.error&&(v=H.color("rgba(0,0,0,1)")),N instanceof Array?(r=N[0],N=N[1]):r=N,r=1/H.pick(r,1),N=1/H.pick(N,1),b=H.pick(b,1)*r,q=H.pick(q,1)*r,r=.05*H.pick(v.opacity,1),m=C(this.attr("stroke-width")||1,10)+6,n=this.matrix.clone(),n.translate(b,q),L=
1;3>=L;L++)k=(u[L-1]||this.clone().follow(this,a,!E&&"before")).attr({stroke:v.hex,"stroke-opacity":r*L,"stroke-width":(m-2*L)*N,transform:n.toTransformString(),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none"}),k.__shadowlevel=L,k.__shadowscale=N,k.__shadowx=b,k.__shadowy=q,E&&E.appendChild(k),u.push(k);return!1},H.el.shadow=function(a,b,u,v){var N;u&&u.constructor===H.el.constructor&&(v=u,u=void 0);"object"===typeof a&&(b&&b.constructor===H.el.constructor&&(v=b),b=a.opacity,u=a.scalefactor,
N=!!a.useFilter,a=void 0===a.apply?!!b:a.apply);void 0===b&&(b=1);if(this.dropshadow){if(N)return a&&this.dropshadow(1,1,3,"rgb(64,64,64)")||this.dropshadow("none"),this;this._.shadowFilter&&this.dropshadow("none")}return this.attr("drop-shadow",a?[1,1,3,"rgba(64,64,64,"+b+")",u,v]:"none")}):H.vml?(H.ca["drop-shadow"]=function(a,b,u,v,N,E){var r=this._.shadow,k,m;if(this.isShadow)return!1;"none"===a?r&&(this._.shadow=r.remove()):(r||(r=this._.shadow=this.clone(),E&&E.appendChild(r.follow(this))||
r.follow(this,void 0,"before"),r.attr({fill:"none","fill-opacity":.5,"stroke-opacity":1}).isShadow=!0,0>=r.attr("stroke-width")&&r.attr("stroke-width",1)),E=r.node.runtimeStyle,k=E.filter.replace(/ progid:\S+Blur\([^\)]+\)/g,""),v=H.color(v),v.error&&(v=H.color("rgba(0,0,0,1)")),m=H.pick(v.opacity,1)/5,N=1/H.pick(N,1),a=H.pick(a,1)*N,b=H.pick(b,1)*N,r.translate(a,b),E.filter=k+" progid:DXImageTransform.Microsoft.Blur(pixelRadius="+J(.4*u)+" makeShadow=True Color="+v.hex+' shadowOpacity="'+m+'");');
return!1},H.el.shadow=function(a,b,u,v){u&&u.constructor===H.el.constructor&&(v=u,u=void 0);"object"===typeof a&&(b&&"group"===b.type&&(v=b),b=a.opacity,u=a.scalefactor,a=void 0===a.apply?!!b:a.apply);void 0===b&&(b=1);return this.attr("drop-shadow",a||!b?[1,1,5,"rgba(64,64,64,"+b+")",u,v]:"none")}):H.canvas&&(H.el.shadow=function(){return this})}]);Q.register("module",["private","modules.renderer.js-raphaelshapes",function(){var b=this.window,v="createTouch"in b.document,J=/msie/i.test(b.navigator.userAgent)&&
!b.opera,C=Math,H=C.cos,A=C.sin,u=C.abs,a=C.pow,O=C.atan2,q=C.tan,M=C.acos,U=C.min,N=C.round,E=C.PI,r=C.sqrt,k=2*E,m=b.parseInt,n=b.parseFloat,L=String,g=Array.prototype.slice,l=a(2,-24),B="rgba(192,192,192,"+(J?.002:1E-6)+")",e=this.hcLib.Raphael,V=e.eve,p=e._createNode,T=e._setFillAndStroke,K=e.el.constructor,t={speed:"optimizeSpeed",crisp:"crispEdges",precision:"geometricPrecision"},Z={enabled:!1,"false":!1,0:!1,disabled:!0,"true":!0,1:!0},P={Q:"L",Z:"X",q:"l",z:"x",",":" "},S=/,?([achlmqrstvxz]),?/gi,
z=/\s*\,\s*/g,R,w=function(){return this.join(",").replace(S,R)},F,X,h=e._cacher(function(d,c,h,b){return r(a(h-d,2)+a(b-c,2))}),d=e._cacher(function(a,c,d,b,e){var l=d-a,g=b-c;d=h(a,c,d,b);return{x:a+l/d*e,y:c+g/d*e}});if(e.svg)V.on("raphael.attr.shape-rendering",function(a,c){var d=this.node;this.attrs[c]=a=t[a]||a||"auto";d.setAttribute(c,a);d.style.shapeRendering=a});else if(e.vml)V.on("raphael.attr.shape-rendering",function(a){this.node.style.antialias="crisp"!==a});e.define&&e.define([{name:"polypath",
polypath:function(){return this.path(void 0,e._lastArgIfGroup(arguments))},ca:{polypath:function(a,c,d,h,b,l){var g,k,t;g=[];a=m(a,10)||0;c=n(c)||0;d=n(d)||0;h=n(h)||0;b=null===b||isNaN(b)?.5*E:e.rad(b);l=null===l||isNaN(l)?0:n(l);k=b;if(2<a)switch(b=2*E/a,l){case 0:for(l=0;l<a;l++)g.push("L",c+h*H(-k),d+h*A(-k)),k+=b;g[0]="M";g.push("Z");break;case 1:for(l=0;l<a;l++)g.push("M",c,d,"L",c+h*H(-k),d+h*A(-k)),k+=b;break;default:b*=.5;t=h*H(b)*(1-l);for(l=0;l<a;l++)g.push("L",c+h*H(-k),d+h*A(-k)),k+=
b,g.push("L",c+t*H(-k),d+t*A(-k)),k+=b;g[0]="M";g.push("Z")}else 0===h?g.push("M",c,d,"L",c,d,"Z"):g.push("M",c-h,d,"A",h,h,0,0,0,c+h,d,"A",h,h,0,0,0,c-h,d,"Z");return{path:g}},r:function(a){var c=this.attrs.polypath;c[3]=a;this.attr("polypath",c);return!1}}},{name:"ringpath",ringpath:function(){return this.path(void 0,e._lastArgIfGroup(arguments))},ca:function(a,c,d,h,b,e){var g=e%k-b%k,t=e-b,p,F,m,z,w,B;this._.ringangle=.5*(b+e);u(t)<l?(p=H(b),t=A(b),d=["M",a+d*p,c+d*t,"L",a+h*p,c+h*t,"Z"]):(u(t)>
l&&+(u(t)%k<l||k-u(t)%k<l)?(d=["M",a-d,c,"A",d,d,0,0,0,a+d,c,"A",d,d,0,0,0,a-d,c],0!==h&&(d=d.concat(["M",a-h,c,"A",h,h,0,0,1,a+h,c,"A",h,h,0,0,1,a-h,c]))):(p=H(b),t=A(b),F=H(e),e=A(e),g%=k,0>g&&(g+=k),g=g<E?0:1,m=a+d*p,w=c+d*t,z=a+d*F,B=c+d*e,F=a+h*F,e=c+h*e,.01>u(m-z)&&.01>u(w-B)&&(m=a+d*H(b+1.745329E-4),w=c+d*A(b+1.745329E-4)),d=["M",m,w,"A",d,d,0,g,1,z,B,"L",F,e],0!==h&&(p=a+h*p,t=c+h*t,.01>u(F-p)&&.01>u(e-t)&&(p=a+h*H(b+1.745329E-4),t=c+h*A(b+1.745329E-4)),d.push("A",h,h,0,g,0,p,t))),d.push("Z"));
return{path:d}}},{name:"cubepath",cubepath:function(){var a={"stroke-linejoin":"round","shape-rendering":"precision",stroke:"none"},c=arguments,d=c.length-1,h=c[d],b,l;h&&h.constructor===e.el.constructor?c[d]=void 0:h=void 0;d=this.path(a,h);b=this.path(a,h);a=this.path(a,h);a._.cubetop=d.follow(a,void 0,"before");a._.cubeside=b.follow(a,void 0,"before");for(l in e.fn.cubepath.ca)a.ca[l]=e.fn.cubepath.ca[l];return a.attr("cubepath",[c[0],c[1],c[2],c[3],c[4],c[5]])},fn:{_getBBox2:function(){var a=
this._.cubeside.getBBox(),c=this._.cubetop.getBBox(),d=this.getBBox();return{x:d.x+c.height,y:d.y-a.width,width:d.width,height:d.height}}},ca:{cubepath:function(a,c,d,h,b,e){var l=this._.cubetop,g=this._.cubeside;a=a||0;c=c||0;d=d||0;h=h||0;b=b||0;e=e||0;this.attr("path",["M",a+d,c,"l",0,h,-d,0,0,-h,"z"]);l.attr("path",["M",a,c,"l",1,1,d-1,0,0,-1,b,-e,-d,0,"z"]);g.attr("path",["M",a+d-1,c+1,"l",0,h-1,1,0,b,-e,0,-h,-b,e]);return!1},"stroke-linejoin":function(){return{"stroke-linejoin":"round"}},"drop-shadow":function(a,
c,d,h){var b=this._.cubetop,e=this._.cubeside;this.dropshadow&&(b.dropshadow(a,-c,d,h),e.dropshadow(a,-c,d,h));return!1},fill:function(a,c){var d=this._.cubetop,h=this._.cubeside,b=this.attr("cubepath")||[0,0,0,0,0,0],l=b[2],g=b[4],b=b[5],k;a=e.color(a);c?(this.attr("fill",a),d.attr("fill",e.tintshade(a,-.78).rgba),h.attr("fill",e.tintshade(a,-.65).rgba)):(k="opacity"in a?"rgba("+[a.r,a.g,a.b,a.opacity]+")":"rgb("+[a.r,a.g,a.b]+")",this.attr("fill",[270,e.tintshade(k,.55).rgba,e.tintshade(k,-.65).rgba].join("-")),
h.attr("fill",[270,e.tintshade(k,-.75).rgba,e.tintshade(k,-.35).rgba].join("-")),d.attr("fill",[45+e.deg(O(b,g+l)),e.tintshade(k,-.78).rgba,e.tintshade(k,.22).rgba].join("-")));return!1}}},{name:"arcpath",arcpath:function(){return this.path(void 0,e._lastArgIfGroup(arguments))},ca:function(a,c,d,h){var b=(h-90)/180*Math.PI;return{path:["M",a,c-d,"A",d,d,0,180<h?1:0,1,a+d*Math.cos(b),c+d*Math.sin(b)]}}},{name:"scroller",scroller:function(a,c,d,h,b,l,g){var k=this.group("scroller",g),t=k.attrs,p=k._.scroller=
{};b=b&&"horizontal"||"vertical";var F,m={},z,w,B;p.track=this.rect(k).mousedown(function(c){var a=t["scroll-position"];c="horizontal"===t["scroll-orientation"]?c.layerX||c.x:c.layerY||c.y;c=(c-p.anchorOffset)/p.trackLength;F=e.animation({"scroll-position":c},2E3*u(a-c),"easeIn");k.animate(F);V("raphael.scroll.start."+k.id,k,a)}).mouseup(p._mouseupTrack=function(){this.stop(F);V("raphael.scroll.end."+this.id,this,t["scroll-position"])},k,!0);p.anchor=this.rect(k).drag(function(c,a){m["scroll-position"]=
z+a[w]/p.trackLength;k.animate(m,0)},function(c){w="horizontal"===t["scroll-orientation"]?0:1;V("raphael.scroll.start."+k.id,k,z=t["scroll-position"]);c.stopPropagation()},function(){V("raphael.scroll.end."+k.id,k,z=t["scroll-position"])});for(B in e.fn.scroller.fn)k[B]=e.fn.scroller.fn[B];for(B in e.fn.scroller.ca)k.ca[B]=e.fn.scroller.ca[B];t["scroll-orientation"]=b;t["stroke-width"]=1;k.ca["scroll-repaint"]=k.ca["scroll-repaint-"+b];!e.is(l,"object")&&(l={});return k.attr({ishot:!0,"scroll-display-buttons":l.showButtons&&
"arrow"||"none","scroll-display-style":l.displayStyleFlat&&"flat"||"3d","scroll-ratio":n(l.scrollRatio)||1,"scroll-position":n(l.scrollPosition)||0,"scroll-repaint":[a,c,d,h]})},fn:{scroll:function(a,c){var d=this._.scroller;c=c||this;d.callback=function(){return a.apply(c,arguments)};return this},remove:function(){var a=this._.scroller,c;this.attr("scroll-display-buttons","none");a.track.unmouseup(a._mouseupTrack);for(c in a)a[c]&&a[c].remove&&a[c].remove(),a[c]=null;delete this._.scroller;e.el.remove.apply(this,
arguments)}},ca:{"stroke-width":function(){return!1},"drop-shadow":function(a,c,d,h,b,e){this._.scroller.track.attr("drop-shadow",[a,c,d,h,b,e]);return!1},"scroll-display-style":function(a){var c=this.attrs,d=c["scroll-display-style"],h=c.fill;a={flat:"flat","3d":"3d",transparent:"transparent"}[a]||d;h&&a!==d&&(c["scroll-display-style"]=a,this.attr("fill",h));return{"scroll-display-style":a}},"scroll-display-buttons":function(a){var c=this,d=c.paper,h=c._.scroller,b=c.attrs,l=b["scroll-display-buttons"],
g=b["scroll-repaint"],k,t;void 0===l&&(l="none");a={none:"none",arrow:"arrow"}[a]||l;a!==l&&(b["scroll-display-buttons"]=a,"none"===a&&h.start?(h.arrowstart.remove(),delete h.arrowstart,h.arrowend.remove(),delete h.arrowend,h.start.unmouseup(h._mouseupStart),h.start.remove(),delete h.start,h.end.unmouseup(h._mouseupEnd),h.end.remove(),delete h.end):(h.arrowstart=d.polypath(c),h.arrowend=d.polypath(c),h.start=d.rect(c).mousedown(function(){var a;0!==(a=b["scroll-position"])&&(c.animate({"scroll-position":a-
.1},100).animate(k=e.animation({"scroll-position":0},4500*a,"easeIn")),V("raphael.scroll.start."+c.id,c,a))}).mouseup(h._mouseupStart=function(){c.stop(k);V("raphael.scroll.end."+c.id,c,b["scroll-position"])},c,!0),h.end=d.rect(c).mousedown(function(){var a;1!==(a=b["scroll-position"])&&(c.animate({"scroll-position":a+.1},100).animate(t=e.animation({"scroll-position":1},4500*(1-a),"easeIn")),V("raphael.scroll.start."+c.id,c,a))}).mouseup(h._mouseupEnd=function(){c.stop(t);V("raphael.scroll.end."+
c.id,c,b["scroll-position"])},c,!0),b.fill&&c.attr("fill",b.fill)),g&&c.attr("scroll-repaint",g));return{"scroll-display-buttons":a}},"scroll-orientation":function(a){var c=this.attrs,d=c["scroll-repaint"],h=c["scroll-orientation"];a={horizontal:"horizontal",vertical:"vertical"}[a]||h;h!==a&&(this.ca["scroll-repaint"]=this.ca["scroll-repaint-"+a],d&&(d[2]+=d[3],d[3]=d[2]-d[3],d[2]-=d[3],this.attr("scroll-repaint",d)),c.fill&&this.attr("fill",c.fill));return{"scroll-orientation":a}},"scroll-ratio":function(a){var c=
this.attrs,d=c["scroll-ratio"],h=c["scroll-repaint"];a=1<a?1:.01>a?.01:n(a);h&&a!==d&&(c["scroll-ratio"]=a,this.attr("scroll-repaint",h));return{"scroll-ratio":a}},"scroll-position":function(a,c){var d=this.attrs,h="horizontal"===d["scroll-orientation"],b=d["scroll-repaint"],e=d["scroll-position"],l=this._.scroller,g=l.anchor;a=1<a?1:0>a?0:n(a);isNaN(a)&&(a=e);b&&(e!==a||c)&&(e=l.start&&l.start.attr(h&&"width"||"height")||0,h&&g.attr("x",b[0]+e+(b[2]-2*e-g.attr("width"))*a+.5)||g.attr("y",b[1]+e+
(b[3]-2*e-g.attr("height"))*a+.5),!c&&1>d["scroll-ratio"]&&(V("raphael.scroll.change."+this.id,this,a),l.callback&&l.callback(a)));return{"scroll-position":a}},r:function(a){var c=this._.scroller;c.track.attr("r",a);c.anchor.attr("r","none"===this.attrs["scroll-display-buttons"]&&a||0);return!1},"scroll-repaint-horizontal":function(a,c,d,h){var b=this.attrs,e=this._.scroller,l=b["scroll-ratio"],g=b["scroll-position"],k=0,t=d*l,b="none"===b["scroll-display-buttons"];d&&--d;a&&(a+=.5);h&&--h;c&&(c+=
.5);e.track.attr({width:d,height:h,y:c,x:a}).crisp();b||(k=U(h,.5*d),t-=2*k*l,e.start.attr({width:k,height:h,x:a,y:c}),e.arrowstart.attr("polypath",[3,a+.5*k,c+.5*h,.25*k,180]),e.end.attr({width:k,height:h,x:a+d-k,y:c}),e.arrowend.attr("polypath",[3,a+d-.5*k,c+.5*k,.25*k,0]));e.trackLength=d-2*k-t;e.trackOffset=a+k+.5;e.anchorOffset=e.trackOffset+.5*(t-1);e.anchor.attr({height:h,width:t-1,y:c,x:e.trackOffset+e.trackLength*g}).crisp()},"scroll-repaint-vertical":function(a,c,d,h){var b=this.attrs,e=
this._.scroller,l=b["scroll-ratio"],g=b["scroll-position"],k=0,t=h*l,b="none"===b["scroll-display-buttons"];d&&--d;a&&(a+=.5);h&&--h;c&&(c+=.5);e.track.attr({width:d,height:h,y:c,x:a}).crisp();b||(k=U(d,.5*h),t-=2*k*l,e.start.attr({width:d,height:k,x:a,y:c}),e.arrowstart.attr("polypath",[3,a+.5*d,c+.5*k,.25*k,90]),e.end.attr({width:d,height:k,x:a,y:c+h-k}),e.arrowend.attr("polypath",[3,a+.5*d,c+h-.5*k,.25*k,-90]));e.trackLength=h-2*k-t;e.trackOffset=c+k+.5;e.anchorOffset=e.trackOffset+.5*(t-1);e.anchor.attr({height:0>
t-1?0:t-1,width:d,y:e.trackOffset+e.trackLength*g,x:a}).crisp()},fill:function(a){var c=this.attrs,d=this._.scroller,h=c["scroll-repaint"],b="flat"===c["scroll-display-style"],l="horizontal"===c["scroll-orientation"],g={stroke:"none"},k;v&&h&&3<(k=16-h[l&&3||2])&&(g.stroke=B,g["stroke-width"]=k);a=e.color(a);a.error&&(a=e.color("#000000"));a="opacity"in a?"rgba("+[a.r,a.g,a.b,a.opacity]+")":"rgb("+[a.r,a.g,a.b]+")";g.fill=b&&a||[90*l,e.tintshade(a,.15).rgba,a].join("-");g.stroke=e.tintshade(a,-.75).rgba;
d.track.attr(g);g.fill=b&&e.tintshade(a,-.6).rgba||[270*l,e.tintshade(a,.3).rgba+":40",e.tintshade(a,-.7).rgba].join("-");g.stroke=e.tintshade(a,-.6).rgba;d.anchor.attr(g);g.stroke="none";"none"!==c["scroll-display-buttons"]&&(g.fill=B,d.start.attr(g),d.end.attr(g),g.fill=e.tintshade(a,-.4).rgba,d.arrowstart.attr(g),d.arrowend.attr(g));return!1}}},{name:"button",button:function(a,c,d,h,b,l){l=this.group("button",l);var g;l._.button={bound:this.rect(l),tracker:this.rect(l).attr({fill:B,stroke:B,cursor:"pointer"}).data("compositeButton",
l)};!e.is(b,"object")&&(b={});for(g in e.fn.button.fn)l[g]=e.fn.button.fn[g];for(g in e.fn.button.ca)l.ca[g]=e.fn.button.ca[g];return l.attr({ishot:!0,"button-padding":[b.horizontalPadding,b.verticalPadding],"button-label":d,"button-symbol":h,"button-disabled":b.disabled||"false","button-symbol-position":b.symbolPosition,"button-symbol-padding":b.symbolPadding}).attr("button-repaint",[a,c,b.width,b.height,b.r])},data:{hoverin:function(){var a=this._.button,c=a.hoverbackIn,d=this._hover||{};d.fill||
d["fill-symbol"]||d.stroke||d["stroke-width"]||d.cursor?(d.fill&&this.bottom.attr("fill",d.fill)&&!d["fill-symbol"]&&a.symbol.attr("fill",d.fill),d["fill-symbol"]&&a.symbol.attr("fill",d["fill-symbol"]),d.stroke&&this.bottom.attr("stroke",d.stroke)&&a.symbol.attr("stroke",d.stroke),d["stroke-width"]&&this.bottom.attr("stroke-width",d["stroke-width"])&&a.symbol.attr("stroke-width",d["stroke-width"]),d.cursor&&a.tracker.attr("cursor",d.cursor),c&&c()):c&&!1===c(arguments)||this.attr("fill","hover");
this.hovered=!0},hoverout:function(){var a=this._.button,c=a.hoverbackOut,d=this._normal||{};d.fill||d["fill-symbol"]||d.stroke||d["stroke-width"]||d.cursor?(d.fill&&this.bottom.attr("fill",d.fill)&&!d["fill-symbol"]&&a.symbol.attr("fill",d.fill),d["fill-symbol"]&&a.symbol.attr("fill",d["fill-symbol"]),d.stroke&&this.bottom.attr("stroke",d.stroke)&&a.symbol.attr("stroke",d.stroke),d["stroke-width"]&&this.bottom.attr("stroke-width",d["stroke-width"])&&a.symbol.attr("stroke-width",d["stroke-width"]),
d.cursor&&a.tracker.attr("cursor",d.cursor),c&&c()):c&&!1===c(arguments)||this.attr("fill",(this.pressed||this.active)&&"active"||"normal");this.hovered=!1},mousedown:function(){var a=this._.button,c=this._pressed||{};c.fill||c["fill-symbol"]||c.stroke||c["stroke-width"]||c.cursor?(c.fill&&this.bottom.attr("fill",c.fill)&&!c["fill-symbol"]&&a.symbol.attr("fill",c.fill),c["fill-symbol"]&&a.symbol.attr("fill",c["fill-symbol"]),c.stroke&&this.bottom.attr("stroke",c.stroke)&&a.symbol.attr("stroke",c.stroke),
c["stroke-width"]&&this.bottom.attr("stroke-width",c["stroke-width"])&&a.symbol.attr("stroke-width",c["stroke-width"]),c.cursor&&a.tracker.attr("cursor",c.cursor)):this.attr("fill","active");this.pressed=!0},mouseup:function(){var a=this._.button,c=a.callback,d=this._normal||{};d.fill||d.stroke||d["stroke-width"]||d.cursor?(d.fill&&this.bottom.attr("fill",d.fill)&&a.symbol.attr("fill",d.fill),d.stroke&&this.bottom.attr("stroke",d.stroke)&&a.symbol.attr("stroke",d.stroke),d["stroke-width"]&&this.bottom.attr("stroke-width",
d["stroke-width"])&&a.symbol.attr("stroke-width",d["stroke-width"]),d.cursor&&a.tracker.attr("cursor",d.cursor)):this.attr("fill",this.hovered&&"hover"||this.active&&"active"||"normal");this.pressed=!1;c&&c(arguments)},mousemove:function(){var a=this._.button.mousemove;a&&a(arguments)}},fn:{tooltip:function(){e.el.tooltip&&e.el.tooltip.apply(this._.button.tracker,arguments);return this},buttonclick:function(a,c){var d=this._.button;c=c||this;d.callback=function(){return a.apply(c,arguments)};return this},
labelcss:function(){var a=this._.button,c=a.label;a.cssArg=arguments;c&&c.css.apply(c,arguments);return this.attr("button-repaint",this.attrs["button-repaint"])},buttonhover:function(a,c,d,h,b,e){var l=this._.button;d=d||this;h=h||this;e=e||this;b&&(l.mousemove=function(){return b.apply(e,arguments)});l.hoverbackIn=function(){return a.apply(d,arguments)};l.hoverbackOut=function(){return c.apply(h,arguments)};return this},remove:function(){var a=this._.button,c;this.attr("button-disabled","true");
for(c in a)a[c]&&a[c].remove&&a[c].remove(),a[c]=null;delete this._.button;e.el.remove.apply(this,arguments)}},ca:{"button-active":function(a){this.attr("fill",(this.active=!!a)?"active":this.hovered&&"hover"||"normal")},"button-disabled":function(a){var c=this._.button,d=c.tracker,h=this.attrs["button-disabled"],b=this.paper.button.data,e=this._disabled||{};a=Z[a];h=Z[h];if(void 0!==a&&a!==h)switch(a){case !0:e.fill||e.stroke||e["stroke-width"]||e.cursor?(e.fill&&this.bottom.attr("fill",e.fill)&&
c.symbol.attr("fill",e.fill),e.stroke&&this.bottom.attr("stroke",e.stroke)&&c.symbol.attr("stroke",e.stroke),e["stroke-width"]&&this.bottom.attr("stroke-width",e["stroke-width"]&&c.symbol.attr("fill",e.fill)),e.cursor&&c.tracker.attr("cursor",e.cursor)):d.attr("fill","rgba(204,204,205,.5)");d.unmousedown(b.mousedown).unmouseup(b.mouseup).unhover(b.hoverin,b.hoverout).unmousemove(b.mousemove);break;case !1:d.attr("fill",B).mousedown(b.mousedown,this).mouseup(b.mouseup,this,!0).hover(b.hoverin,b.hoverout,
this,this).mousemove(b.mousemove,this)}},"button-label":function(a){var c=this._.button,d=this.attrs,h=c.label,b=c.cssArg,e=this.attrs["button-repaint"];a=L(a||"");"none"===a?h&&(c.label=h.remove()):a&&(!h&&(h=c.label=this.paper.text(this).insertBefore(c.tracker)),h.attr({text:a,"text-anchor":"middle","vertical-align":"middle"}),b&&b.length&&h.css.apply(h,b));e&&d["button-label"]!==a&&this.attr("button-repaint",e)},"button-symbol":function(a){var c=this._.button,d=c.symbol,h=this.attrs["button-repaint"];
a=L(a||"");"none"===a?(d&&(c.symbol=d.remove()),delete c.symbol):a&&!d&&(c.symbol=this.paper.symbol(this).insertAfter(c.bound));h&&this.attr("button-repaint",h)},"button-symbol-position":function(a){return{"button-symbol-position":{top:"top",right:"right",bottom:"bottom",left:"left",none:"none"}[L(a).toLowerCase()]||"none"}},"button-symbol-padding":function(a){return{"button-symbol-padding":n(a)}},"button-padding":function(a,c){return{"button-padding":[null==a&&(a=5)||n(a),null==c&&a||n(c)]}},"button-repaint":function(a,
c,d,h,b){var l=this._.button,g=l.bound,k=l.label,t=l.symbol,p=this.attrs,F=p["button-padding"],m=F[0],z=F[1],w,B;void 0===a&&(a=0);void 0===c&&(c=0);if(void 0===d||void 0===h)w=k&&k.getBBox()||{width:0,height:0},void 0===d&&(d=2*m+w.width),void 0===h&&(h=2*z+w.height);g=e.crispBound(a,c,d,h,g.attr("stroke-width"));g.r=e.pick(b,N(.1*U(h,d)));a=g.x;c=g.y;d=g.width;h=g.height;k&&k.attr({x:a+d/2,y:c+h/2});if(t){!e.is(B=p["button-symbol-padding"],"finite")&&(B=.2*h);b=h-z;w=.5*b;switch(p["button-symbol-position"]+
(k&&"+"||"-")){case "right+":a=a+(d+(2*w+z))-w-m;c+=.5*h;k.attr("transform",["t",-(b+B),0]);break;case "left+":a=a+m+w;c+=.5*h;k.attr("transform",["t",b+B,0]);break;case "top+":a+=.5*d;c=c+F[1]+w;k.attr("transform",["t",0,b+B]);break;case "bottom+":a+=.5*d;c=c+(h+(2*w+B))-z-w;k.attr("transform",["t",0,-(b+B)]);break;default:a+=.5*d,c+=.5*h}t.attr("symbol",[p["button-symbol"],a,c,w])}l.bound.attr(g);l.tracker.attr(g)},fill:function(a,c,d,h,b){var l=this._.button,g=l.bound,k=l.symbol,t=l.label,p={normal:l.gradient,
active:l.gradientActive,hover:l.gradientHover}[a];p||(b||(a=e.getRGB(a),a.error&&(a=e.color("#cccccc")),a="opacity"in a?"rgba("+[a.r,a.g,a.b,a.opacity]+")":"rgb("+[a.r,a.g,a.b]+")"),l.gradient=b?a:[90,e.tintshade(a,-.8).rgba+":0",e.tintshade(a,.8).rgba+":100"].join("-"),l.gradientActive=[270,e.tintshade(a,-.8).rgba+":0",e.tintshade(a,.8).rgba+":100"].join("-"),h=e.getRGB(h),h.error&&(h=a)||(h="opacity"in h?"rgba("+[h.r,h.g,h.b,h.opacity]+")":"rgb("+[h.r,h.g,h.b]+")"),l.gradientHover=b?h:[90,e.tintshade(h,
-.9).rgba+":0",e.tintshade(h,.7).rgba+":100"].join("-"),d=d||e.tintshade(a,.2).rgba,c=c||e.tintshade(a,-.2).rgba,l.symbolFill=d,l.labelFill=c,p=(this.pressed||this.active)&&l.gradientActive||this.hovered&&l.gradienthover||l.gradient);g.attr("fill",p);k&&k.attr("fill",l.symbolFill);t&&t.attr("fill",l.labelFill);return!1},stroke:function(a,c){var d=this._.button,h=d.symbol;a=e.color(a);a.error&&(a=e.color("#999999"));d.bound.attr("stroke",a);h&&h.attr("stroke",c||a);return!1},"stroke-width":function(a,
c){var d=this._.button,h=d.symbol;d.bound.attr("stroke-width",a);d.tracker.attr("stroke-width",a);h&&h.attr("stroke-width",c);return!1},config:function(a){a.hover&&(this._hover={fill:a.hover.fill,"fill-symbol":a.hover["fill-symbol"],stroke:a.hover.stroke,"stroke-width":a.hover["stroke-width"],cursor:a.hover.cursor});a.disabled&&(this._disabled={fill:a.disabled.fill,"fill-symbol":a.disabled["fill-symbol"],stroke:a.disabled.stroke,"stroke-width":a.disabled["stroke-width"],cursor:a.disabled.cursor});
a.pressed&&(this._pressed={fill:a.pressed.fill,"fill-symbol":a.pressed["fill-symbol"],stroke:a.pressed.stroke,"stroke-width":a.pressed["stroke-width"],cursor:a.pressed.cursor});a.normal&&(this._normal={fill:a.normal.fill,"fill-symbol":a.normal["fill-symbol"],stroke:a.normal.stroke,"stroke-width":a.normal["stroke-width"],cursor:a.normal.cursor});a.symbol&&(a.symbol={stroke:a.normal.stroke,"stroke-width":a.normal["stroke-width"]})}}},{name:"trianglepath",trianglepath:function(){var a=arguments,c=e._lastArgIfGroup(a);
return this.path(c).attr("trianglepath",[a[0],a[1],a[2],a[3],a[4],a[5],a[6]||0,a[7]||0,a[8]||0])},fn:{sides:function(){var a=this._args;return[h(a[0],a[1],a[2],a[3]),h(a[2],a[3],a[4],a[5]),h(a[4],a[5],a[0],a[1])]},enclosedAngles:function(){var d=this._sides;return[M((a(d[0],2)+a(d[2],2)-a(d[1],2))/(2*d[0]*d[2])),M((a(d[0],2)+a(d[1],2)-a(d[2],2))/(2*d[0]*d[1])),M((a(d[2],2)+a(d[1],2)-a(d[0],2))/(2*d[2]*d[1]))]},semiperimeter:function(){var a=this._sides||this.sides();return(a[0]+a[1]+a[2])/2}},ca:{trianglepath:function(a,
c,h,b,e,l,g,k,t){if(g||k||t){this._args=arguments;this._sides=this.sides();var p=this.enclosedAngles(),F;F=this.semiperimeter();F=r(F*(F-this._sides[0])*(F-this._sides[1])*(F-this._sides[2]))/F;p=[U(g,F)/q(p[0]/2),U(k,F)/q(p[1]/2),U(t,F)/q(p[2]/2)];p=[d(a,c,e,l,p[0]),d(a,c,h,b,p[0]),d(h,b,a,c,p[1]),d(h,b,e,l,p[1]),d(e,l,h,b,p[2]),d(e,l,a,c,p[2])];this.attr({path:["M",p[0].x,p[0].y,"Q",a,c,p[1].x,p[1].y,"L",p[2].x,p[2].y,"Q",h,b,p[3].x,p[3].y,"L",p[4].x,p[4].y,"Q",e,l,p[5].x,p[5].y,"L",p[0].x,p[0].y]})}else this.attr({path:["M",
a,c,"L",h,b,e,l,"Z"]})}}}]);e.ca["text-bound"]=function(a,c,d,h,b,l){var g=this.paper,k=this._.textbound;if("text"===this.type){if(!(c&&"none"!==c||a&&"none"!==a))return this._.textbound=k&&k.unfollow(this).remove(),!1;this.attrs["text-bound"]=arguments;d&&e.is(d,"finite")||(d=0);b&&e.is(b,"finite")||(b=0);!k&&(k=this._.textbound=g.rect(0,0,0,0,this.group).follow(this,e.ca["text-bound"].reposition,"before"));k.attr({stroke:c,"stroke-width":d,fill:a,"shape-rendering":1===d&&"crisp"||"",r:b});l&&k.attr("stroke-dasharray",
l);e.ca["text-bound"].reposition.call(k,this.attr(),this);return!1}};e.ca["text-bound"].reposition=function(a,c){var d={},h,b,l,g,k;a.hasOwnProperty("visibility")&&this.attr("visibility",a.visibility);if(a.hasOwnProperty("text-bound")||a.hasOwnProperty("x")||a.hasOwnProperty("y")||a.hasOwnProperty("text")||a.hasOwnProperty("text-anchor")||a.hasOwnProperty("text-align")||a.hasOwnProperty("font-size")||a.hasOwnProperty("line-height")||a.hasOwnProperty("vertical-align")||a.hasOwnProperty("transform")||
a.hasOwnProperty("rotation"))h=c.attrs["text-bound"],b=L(h&&h[3]||"0").split(z),h=n(b[0])||0,b=e.pick(n(b[1]),h),l=c.getBBox(),g=l.width,k=l.height,isNaN(g)||(d.x=l.x-h,d.y=l.y-b,d.width=g+2*h,d.height=k+2*b),this.attr(d)};e.fn.symbol=function(){var a=arguments,c=a.length-1,d=a[c];d&&d.constructor===e.el.constructor?a[c]=void 0:d=void 0;c=this.path(void 0,d);c.ca.symbol=e.fn.symbol.ca.symbol;return a.length===!!d+0?c:c.attr("symbol",a)};e.fn.getSuggestiveRotation=function(){var a,c,d;a=arguments[0];
1===arguments.length?(c=a.angle,d=a.x,a=a.y):(c=a,d=arguments[1],a=arguments[2]);return"r"+(c||0)+","+d+","+a};e.fn.symbol.cache={"":e._cacher(function(a,c,d,h){return 3<arguments.length?["M",a,c,"h",d,"v",h,"h",-d,"v",-h,"z"]:["M",a-d,c-d,"h",d*=2,"v",d,"h",-d,"v",-d,"z"]})};e.fn.symbol.ca={symbol:function(a){var c=e.is(a,"object")&&1===arguments.length&&!e.is(a,"function")?a:arguments,d;c===a&&(a=c[0]);c=(d=e.is(a,"function")&&a||e.fn.symbol.cache[a]||e.fn.symbol.cache[""])&&d.apply(e,g.call(c,
1));e.is(c,"array")||e.is(c,"string")?this.attr("path",c):c&&this.attr(c)}};e.addSymbol=function(a,c){var d=e.is(c,"function")&&(d={},d[a]=c,d)||a,h=e.fn.symbol.cache,b=[],l;for(l in d)c=d[l],h[l]=e.is(c,"function")&&e._cacher(c,e)||(b.push(l),c);for(;l=b.pop();)h[l]=h[h[l]]};e.svg?(R="$1",F=function(a){a?"string"===typeof a?a=a.replace(S,R):a.toString=w:a="M0,0";this.node.setAttribute("d",a.toString())},e._engine.litepath=function(a,c,d,h){a=p("path");(h||c).canvas.appendChild(a);c=new K(a,c,h);
c.type="litepath";c.id=a.raphaelid=e._oid++;a.raphael=!0;T(c,{fill:"none",stroke:"#000"});return c},e._getPath.litepath=function(a){return e.parsePathString(a.node.getAttribute("d"))}):e.vml&&(R=function(a,c){return P[c]||c},X=function(){this._transform.apply(this,arguments);this._.bcoord&&(this.node.coordsize=this._.bcoord);return this},F=function(a){a?"string"===typeof a?a=a.replace(S,R):a.toString=w:a="M0,0";this.node.path=a;return this},e._engine.litepath=function(a,c,d,h){a=p("shape");var b=
a.style,l=new K(a,c,h);b.cssText="position:absolute;left:0;top:0;width:21600px;height:21600px;";d=n(d);isNaN(d)?a.coordsize="21600 21600":(l._.bzoom=d,b.width="1px",b.height="1px",a.coordsize=l._.bcoord=d+" "+d);a.coordorigin=c.coordorigin;l.type="litepath";l.id=a.raphaelid=e._oid++;a.raphael=!0;l._transform=l.transform;l.transform=X;e._setFillAndStroke(l,{fill:"none",stroke:"#000"});(h||c).canvas.appendChild(a);c=p("skew");c.on=!0;a.appendChild(c);l.skew=c;return l},e._getPath.litepath=function(a){return e.parsePathString(a.node.path||
"")});e.fn.litepath=function(a,c,d){c&&c.constructor===K&&(d=c,c=void 0);a&&a.constructor===K&&(d=a,a="");c=e._engine.litepath(a,this,c,d);c.ca.litepath=F;a&&c.attr("litepath",e.is(a,"array")?[a]:a);return this.__set__&&this.__set__.push(c),this._elementsById[c.id]=c}}]);Q.register("module",["private","modules.renderer.js-htmlrenderer",function(){var b=this.hcLib,v=b.Raphael,J=b.dem,C=this.window,H=C.document,A=/msie/i.test(C.navigator.userAgent)&&!C.opera,u="VML"===v.type,a=b.hasTouch,O={cursor:"cursor"},
q={x:"left",y:"top",strokeWidth:"borderThickness","stroke-width":"borderThickness",width:"width",height:"height"},M={fill:"backgroundColor",stroke:"borderColor",color:"color"},U={left:0,top:0,padding:0,border:"none",margin:0,outline:"none","-webkit-apperance":"none",position:"absolute",zIndex:20},N,E=function(a,b,n,r){a=H.createElement(a);for(var g in b)q[g]?a.style[g]=b[g]:a.setAttribute(g,b[g]);for(g in n)a.style[g]=n[g];r&&r.appendChild&&r.appendChild(a);return a},r;r=function(a,b,n){b&&b instanceof
r&&(b=b.element);(this.element=E(a,n,U,b)).ishot="true";this.nodeName=a.toLowerCase();this.added=!!b};r.prototype={attr:function(a){var b=this.element,n={},r,g,l,B,e,V,p;if("object"!==typeof a){if(!(n=this[a])){if("string"===typeof a)b&&b.getAttribute&&(B=b.getAttribute(a));else if(void 0!==a&&null!==a&&"object"===typeof a)for(l in a)b.setAttribute(l,a[l]);n=B}return n}for(r in a){l=a[r];if(O[r]){switch(r){case "cursor":"pointer"===l&&u&&(l="hand")}b.style[O[r]]=l;g=!0}else if(q[r])b.style[q[r]]=
l+"px",g=!0;else if(M[r])b.style[M[r]]=l&&l.replace(/^#?([a-f0-9]+)/ig,"#$1")||"none",g=!0;else if(/^visibility$/i.test(r))g="hidden"===l,b.style.display=g?"none":"",this.hidden=g,g=!0;else if(/^opacity$/i.test(r))b.style.opacity=l,A&&(g=100*Number(l),b.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+g+")"),g=!0;else if(/^innerhtml$/i.test(r)){if(u&&"select"==b.nodeName.toLowerCase()){for(g=l.match(/<option\s?[\s\S]*?(\/>|><\/option>|>[\s\S]*?<\/option>)/ig);b.firstChild;)b.removeChild(b.firstChild);
e=0;for(V=g.length;e<V;e+=1)B=g[e],p=H.createElement("option"),/<option\s([\s\S]*[\'\"])\s*?(\/>|>[\s\S]*<\/option>)/ig.test(B)&&(p.value=B.replace(/<option\s([\s\S]*[\'\"])\s*?(\/>|>[\s\S]*<\/option>)/ig,"$1").replace(/[\s\S]*value\s*\=\s*[\'\"]([\s\S]*)[\'\"]/,"$1")),p.text=B.replace(/<option\s*[\s\S]*[\'\"]?\s*?[\/>|\>]([\s\S]*)<\/option>/ig,"$1 "),b.options.add(p)}else"input"!==b.nodeName.toLowerCase()&&void 0!==l&&(b.innerHTML=l||"");g=!0}else/^text$/i.test(r)?("input"!==b.nodeName.toLowerCase()&&
(b.innerHTML="",void 0!==l&&b.appendChild(H.createTextNode(l))),g=!0):/^type$/i.test(r)&&A&&this.added&&(g=!0);g&&(n[r]=l,delete a[r],g=!1)}for(r in a)b.setAttribute(r,a[r]);for(r in n)this[r]=a[r]=n[r],delete n[r];return this},val:function(a){var b=this.element,n=void 0===a;return"input"===this.nodeName&&"checkbox"===b.getAttribute("type")?n?this.checked()?1:0:this.checked(a):n?b.value:(b.value=a,this)},checked:function(a){var b=this.element;return void 0===a?b.checked:(a?b.setAttribute("checked",
"checked"):b.removeAttribute("checked"),this)},css:function(a,b){var n=this.element.style,r;if("object"===typeof a)for(r in a)n[r]=a[r];else r&&void 0!==b&&(n[r]=b);return this},translate:function(a,b){var n=this.element;void 0!==a&&(n.style.left=a+"px");void 0!==b&&(n.style.top=b+"px");return this},add:function(a,b){var n=this.element,r=a.element;b?r.insertBefore(n,r.firstChild):r.appendChild(n);this.added=!0;return this},hide:function(){this.element.style.display="none";return this},show:function(){this.element.style.display=
"";return this},focus:function(){"function"===typeof this.element.focus?this.element.focus():b.dem.fire(this.element,"focus")},destroy:function(){var a=this.element||{};a.onclick=a.onmouseout=a.onmouseover=a.onmousemove=a.onblur=a.onfocus=null;N||(N=E("div"));a&&N.appendChild(a);N.innerHTML="";delete this.element;return null},on:u?function(a,b){this.element["on"+a]=function(){var a=C.event;a.target=a.srcElement;b(a)};return this}:function(b,m){var n=m;a&&"click"===b&&(b="touchstart",n=function(a){a.preventDefault();
m()});this.element["on"+b]=n;return this},bind:function(a,b,n){J.listen(this.element,a,b,n);return this},unbind:function(a,b){J.unlisten(this.element,a,b);return this},trigger:function(a,b){J.fire(this.element,a,b);return this},fadeIn:function(a,m){var n="fast"===a?400:1E3;this.show();this.attr({opacity:0});b.danimate.animate(this.element,{opacity:1},n,"linear",m)},animate:function(a,m,n,r){b.danimate.animate(this.element,a,m,n,r)}};r.prototype.constructor=r;v.fn.html=function(a,b,n,q){var g={},l;
b&&"type"in b&&(g.type=b.type,delete b.type);a=(new r(a,q,g)).css(n).attr(b);for(l in g)b[l]=g[l];return a}}]);Q.register("module",["private","modules.renderer.js-dom",function(){var b=this.hcLib,v=this.window,J=v.document,C=b.extend2,H="ontouchstart"in v;(function(b){var u=function(){var a={},b;a.pointerdrag={start:["mousedown"],end:["mouseup"],onStart:["mousemove"],postHandlers:{},preHandlers:{}};a.pointerhover={start:["mouseover"],end:["mouseout"]};a.click={start:["click"]};a.escape={start:["keydown"],
preHandlers:{start:function(a){a=a||v.event;return a.keyCode&&27===a.keyCode?!0:!1}}};H&&(b=a.pointerdrag,b.start.push("touchstart"),b.end.push("touchend"),b.onStart.push("touchmove"),b.postHandlers.onStart=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1});return a}(),a;a=C({},u);b.dem=new function(){var b={},q={},u=J.addEventListener?function(a,b,n){a.addEventListener(b,n,!1)}:function(a,b,n){a.attachEvent("on"+b,n)},A=J.removeEventListener?function(a,b,n){a.removeEventListener(b,
n,!1)}:function(a,b,n){a.detachEvent("on"+b,n)},N=function(b,m,n){var r=[],g,l,B;B=a[m];n.start=function(a){a=a||v.event;for(var l=B.onStart,g=B.end,m=[],K=[],t=l&&l.length||0;t--;)m.push(E(b,l[t],n,"onStart"));for(t=g&&g.length||0;t--;)K.push(E(b,g[t],n,"end"));n.startUn=n.startUn?n.startUn.concat(m):m;n.endUn=n.endUn?n.endUn.concat(K):K;n.state="start";n.closure(a)};n.onStart=function(a){a=a||v.event;n.state="on";if(n.gDef&&n.gDef.preHandlers&&"function"===typeof n.gDef.preHandlers.onStart)n.gDef.preHandlers.onStart(a);
n.closure(a);if(n.gDef&&n.gDef.postHandlers&&"function"===typeof n.gDef.postHandlers.onStart)n.gDef.postHandlers.onStart(a)};n.end=function(a){a=a||v.event;for(var b=n.startUn,l=n.endUn,g=b&&b.length||0;g--;)b[g]();delete n.startUn;n.startUn=[];for(g=l&&l.length||0;g--;)l[g]();delete n.endUn;n.endUn=[];n.state="end";n.closure(a)};if(B)for(m=B.start,l=m.length;l--;)(g=m[l])&&r.push(E(b,g,n,"start"));return r},E=function(a,b,n,r){r=r||"closure";u(a,b,n[r]);return function(){A(a,b,n[r])}},r=function(a){return function(b){b=
b||v.event;a.handler.call(a.context||a.elem,{data:a.data,type:a.type,state:a.state,isGesture:a.isGesture,target:b.target||b.srcElement,originalEvent:b})}};return{listen:function(k,m,n,u,g){var l=this;m="string"===typeof m?m.split(" "):m;var B=m.length,e=[],V=function(a,b,g){e.push(function(){l.unlisten(a,b,g)})},p,T,K,t,Z;if(k.ownerDocument&&k.ownerDocument===J)for(;B--;)T=m[B],t=!!a[T],Z="function"===typeof n?n:n[B],K={handler:Z,elem:k,type:T,isGesture:t,gDef:t?a[T]:null,data:u,context:g,start:[],
end:[],links:{prev:null,next:null}},K.closure=r(K),t?((p=q[T])||(p=q[T]=[]),p.push(K),N(k,T,K)):((p=b[T])||(p=b[T]=[]),p.push(K),E(k,T,K)),V(k,T,Z);else for(;B--;)T=m[B],Z="function"===typeof n?n:n[B],K={handler:Z,elem:k,type:T,isGesture:t,data:u,context:g,start:[],end:[],links:{prev:null,next:null}},K.closure=r(K),(p=b[T])||(p=b[T]=[]),p.push(K),E(k,T,K),V(k,T,Z);return{unlisten:function(){for(var a=e.length;a--;)e[a]();e.length=0;e=null}}},unlisten:function(k,m,n){var r,g=!1,l,B;if(a[m])for(l=(r=
q[m])&&r.length||0;l--;){if(B=r[l],B.handler===n&&B.elem===k){var g=k,e=B,u=void 0,p=void 0,T=void 0,u=void 0;if(u=a[m])for(u=u.start,T=u.length;T--;)(p=u[T])&&A(g,p,e.start);r.splice(l,1);g=!0;B.closure=null;B.start=null;B.onStart=null;B.end=null}}else for(l=(r=b[m])&&r.length||0;l--;)B=r[l],B.handler===n&&B.elem===k&&(A(k,m,B.closure),r.splice(l,1),g=!0,B.closure=null);return g},fire:function(a,m,n,r){var g;if(a.ownerDocument&&a.ownerDocument===J)J.createEvent?(g=J.createEvent("HTMLEvents"),g.initEvent(m,
!0,!0),n&&(n.originalEvent?n.originalEvent=g:C(g,n)),"function"===typeof a[m]&&a[m].call(a),a.dispatchEvent(g)):(g=J.createEventObject(),g.eventType=m,n&&(n.originalEvent?n.originalEvent=g:C(g,n)),"function"===typeof a[m]&&a[m].call(a),a.fireEvent("on"+m,g)),r&&!g.returnValue&&r(g);else for(r=(m=b[m])&&m.length||0;r--;)g=m[r],g.elem===a&&g.closure(n)}}}})(b||v);(function(b){function u(a,b){var q="";J.defaultView&&J.defaultView.getComputedStyle?q=J.defaultView.getComputedStyle(a,"").getPropertyValue(b):
a.currentStyle&&(b=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),q=a.currentStyle[b]);q=parseInt(q,10);return isNaN(q)?0:q}function a(a,b,u,r,k,m,n,L){var g=b/40,l=q[m||"linear"](r-u,g),B=0,e,V,p=v.requestAnimationFrame||v.webkitRequestAnimationFrame||v.mozRequestAnimationFrame||v.oRequestAnimationFrame||v.msRequestAnimationFrame||function(a){setTimeout(a,40)},T=function(m){var t;t=!1;m?(e||(e=m),V=m-e,m=Math.abs(u-r),t=(t=0>u-r?!1:!0)?Math.max(u-m/b*V,r)+L:Math.min(u+m/b*V,r)+L,a.style[k]=
t,M&&"opacity"===k&&(t=100*Number(t),a.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+t+")"),V<b?p(T):n&&n()):B<g?(t=l[B],a.style[k]=u+t+L,M&&"opacity"===k&&(t=100*Number(t),a.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+t+")"),B+=1,setTimeout(T,40)):n&&n()};L=L||"";p(T)}var H={width:{suffix:"px"},height:{suffix:"px"},opacity:!0,top:{suffix:"px"},left:{suffix:"px"}},q={linear:function(a,b){for(var q=[],r=a/b,k=0;k<b;k+=1)q[k]=r*(k+1);return q}},M=/msie/i.test(v.navigator.userAgent)&&
!v.opera;b.danimate=C({animate:function(b,q,v,r,k){r={};var m={},n=function(){g+=1;g===L&&"function"===typeof k&&k()},L=0,g=0,l,B;if(40>v){for(B in q)b.style[B]=q[B];k&&k()}else for(B in q)l=null,"x"===B?(l=B,B="left"):"y"===B&&(l=B,B="top"),H[B]&&(L+=1,r[B]=q[l||B],m[B]=u(b,B),l="object"===typeof H[B]&&H[B].suffix,a(b,v,m[B],r[B],B,"linear",n,l))}},{})})(b||v)}]);Q.register("module",["private","modules.renderer.js-raphaeltooltip",function(){var b=this,v=b.window,J=v.document,C=J.body||J.getElementsByTagName("body")[0],
H=b.hcLib,A=H.Raphael,u=A.eve,a=H.createElement,O=H.addEvent,q=H.removeEvent,M=H.getPosition,U=H.hasTouch,N=H.getTouchEvent,E=Math,r=E.ceil,k=E.floor,m={},n=v.screen.availHeight,L=v.screen.availWidth,g={E:1,moz:1,webkit:1,o:1,ms:1},l={borderRadius:"borderRadius",boxShadow:"boxShadow"},B=/\-([a-z])/ig,e=function(a,b){return b.toUpperCase()},V=function(a){var b=p.forbiddenStyle,k,m,z;for(k in a)m=B.test(k)?k.replace(B,e):k,void 0!==a[k]&&!b[m]&&(this[m]=a[k]),A.vml&&/color/ig.test(m)&&(this[m]=A.getRGB(this[m]).toString());
for(k in l)if(this[k])for(z in g)this[z+k]=this[k]},p=H.toolTip={elementId:"fusioncharts-tooltip-element",element:null,lastTarget:null,currentTarget:null,currentPaper:null,pointeroffset:12,prevented:!1,defaultStyle:H.extend2(V.prototype,{backgroundColor:"#ffffee",borderColor:"#000000",borderWidth:"1px",color:"#000000",fontSize:"10px",lineHeight:"12px",padding:"3px",borderStyle:"solid"}),defaultContainerStyle:{position:"absolute",textAlign:"left",margin:"0",zIndex:"99999",pointer:"default",display:"block"},
forbiddenStyle:{}},T=function(e,l){var g=e.element,k=e.textElement,z=e.style,m=e.defaultContainerStyle,w=e.forbiddenStyle,F,g=e.element=a("span");(J.body||J.getElementsByTagName("body")[0]).appendChild(g);g.setAttribute("id",p.elementId);z=e.containerStyle=g.style;k=e.textElement=a("span");g.appendChild(k);e.style=A.vml?k.runtimeStyle:k.style;e.style.overflow="hidden";e.style.display="block";e.hidden=!1;p.hide.call(e);for(F in m)!w[F]&&(z[F]=m[F]);e.scatted=!0;l&&(u.on("raphael.drag.start.*",function(){p.scatted&&
(p.waitingScat=!0)}),u.on("raphael.drag.move.*",function(){p.waitingScat&&(p.block(),p.waitingScat=!1)}),u.on("raphael.drag.end.*",function(){p.waitingScat=!1;p.scatted&&p.unblock(!0)}),u.on("raphael.remove",function(){if(p.currentPaper===this||p.currentTarget&&p.currentTarget.paper===this)p.hide(),p.currentTarget=p.currentPaper=null}),b.addEventListener("LinkedChartInvoked",function(a){p.currentPaper===a.sender.apiInstance.components.paper&&p.hide()}),b.addEventListener("realTimeUpdateComplete",
function(a){p.currentPaper===a.sender.apiInstance.components.paper&&p.hide()}));return e},K=function(a){!0===p._oobready?p._oobready=!1:(q(C,"touchstart",K),!p.hidden&&p.currentTarget&&(a=a.srcElement||a.target||m,a.raphael&&p.currentTarget.paper.getById(a.raphaelid)===p.currentTarget||p.hide()))};p.fixedChartID={};A.svg&&(p.defaultContainerStyle.pointerEvents="none",p.defaultStyle.borderRadius="0",p.defaultStyle.boxShadow="none");A.vml&&(p.forbiddenStyle.borderRadius=!0,p.forbiddenStyle.boxShadow=
!0,p.defaultStyle.filter="");p.setup=function(){p.element||T(p,!0)};p.restyle=function(a){var b=this.style,e;for(e in a)b[e]=a[e]};p.onelement=function(a){if(!a.__tipProcessed){var b=this.paper,e="group"===this.type?b&&b._elementFromEvent(a):this,l=b.__tipStyle;e&&l&&e.__tipNeeded&&((a.originalEvent||a).FusionChartsPreventEvent&&p.preventTooltip(),p.hiding&&(p.hiding=clearTimeout(p.hiding)),p.setStyle(b),p.lastTarget=p.currentTarget,p.currentTarget=e,(p.scatted=e.__tipScatted)&&p.unblock(!0),p.onredraw.call(this,
a),a.__tipProcessed=!0,U&&(p._oobready=!0,O(C||(C=J.body||J.getElementsByTagName("body")[0]),"touchstart",K)))}};p.setStyle=function(a){p.currentPaper!==a&&(a.__tipCp=a.canvas&&M(a.canvas.parentNode,!0)||{},p.restyle.call(this,a.__tipStyle),p.currentPaper=a)};p.onredraw=function(a){a.__tipProcessed||(a.__tipProcessed=!0,(this.paper&&this.paper._elementFromEvent(a))===p.currentTarget&&(p.setPosition(a),p.redraw()))};p.setPosition=function(a,e,l){a=N(a);this.x=e||k((b._fullScreenMode?a.clientX:a.pageX)||
a.clientX+J.body.scrollLeft+J.documentElement.scrollLeft||0);this.y=l||k((b._fullScreenMode?a.clientY:a.pageY)||a.clientY+J.body.scrollTop+J.documentElement.scrollTop||0)};p.onhide=function(a){a.__tipProcessed||(a.__tipProcessed=!0,(this.paper&&this.paper._elementFromEvent(a))===p.currentTarget&&(p.hiding=setTimeout(p.hide,200)))};p.redraw=function(){var a,b;!p.prevented&&!p.blocked&&p.currentTarget&&p.currentTarget.__tipNeeded&&(a=p.currentTarget,b=a.paper,a=a.__tipText,p.draw.call(this,a,b))};p.customDraw=
function(a,b,e,l,g,k){var w,F=p.callee&&p.callee===k;(w=p[k])||p.currentPaper===b||(!p.drawTrendRegion||p.hidden||F?p.callee=k:w=p[k]=T({elementId:"fusioncharts-tooltip-element-"+k,pointeroffset:12,defaultStyle:p.defaultStyle,defaultContainerStyle:p.defaultContainerStyle,forbiddenStyle:{}}));!w&&(w=p);p.isFixed=p.fixedChartID[k];p.setStyle.call(w,b,p.hidden&&k);p.setPosition.call(w,e,l,g);p.draw.call(w,a,b,F)};p.draw=function(a,b,e){var l=void 0!==e?this:p,g=l.textElement,k=l.containerStyle,w=l.style,
F=l.pointeroffset,m=b.__tipCp,h=l.x,d=l.y,f,c=b.width,D=b.height;b=b.__tipConstrain;if(100>c||100>D)b=!1;l.hidden&&(l.containerStyle.top="-999em",p.show.call(l));e&&a===l.text||(l.text=a,k.width=k.height="",g.innerHTML=a,w.whiteSpace="nowrap",e=r(w.pixelWidth||g.offsetWidth||0),a=r(w.pixelHeight||g.offsetHeight||0),(l.textWidthOverflow=h+e>m.left+c)?(e=c-2*F>e?k.width:c-2*F||0,k.width=e&&e+"px"||"",w.whiteSpace="normal"):k.width="",(l.textHeightOverflow=a>D)?(k.height=(D||0)-2*F+"px",w.whiteSpace=
"normal"):k.height="");e=r(w.pixelWidth||g.offsetWidth||0);a=r(w.pixelHeight||g.offsetHeight||0);b?(l.textWidthOverflow?h=h-e<m.left?m.left:h-e:!p.isFixed&&(f=h+F+e-(m.left+c-F))&&0<f?h-=f:h+F+e>m.left+c-F&&(h=h-e-F),l.textHeightOverflow?d=m.top:!p.isFixed&&(f=d+F+a-(m.top+D-F))&&0<f?d-=f:d+F+a>m.top+D-F&&(d=d-a-1.5*F)):(L<h+F+e&&(h=h-e-F),n<d+F+a&&(d=d-a-1.5*F));k.left=(h+F||0)+"px";k.top=(d+F||0)+"px";l.hidden&&p.show.call(l)};p.inform=function(a,b){p.fixedChartID[a]=b};p.hide=function(a){a=p[a]||
p;a.hiding&&(a.hiding=clearTimeout(a.hiding));a.containerStyle.display="none";a.hidden=!0;a.prevented=!1};p.show=function(){this.blocked||(this.hiding&&(this.hiding=clearTimeout(this.hiding)),this.containerStyle.display="inline",this.hidden=!1)};p.preventTooltip=function(){p.prevented=!0};p.block=function(){this.blocked=!0;this.containerStyle.display="none"};p.unblock=function(a){this.blocked=!1;a&&(this.containerStyle.display=this.hidden&&"none"||"inline")};A.fn.tooltip=function(a,b,e){b&&(b=.4*
(void 0===b.opacity?1:b.opacity),A.svg?a.boxShadow="1px 1px 3px rgba(64,64,64,"+b+")":a.filter='progid:DXImageTransform.Microsoft.Shadow(Strength=2, Direction=135, Color="#404040", shadowOpacity="'+b/2+'")');this.__tipStyle=new V(a);this.__tipCp=this.canvas&&M(this.canvas.parentNode,!0)||{};this.__tipConstrain=!!e;p.style&&p.restyle(this.__tipStyle);p.containerStyle&&p.hide();return this};A.el.trackTooltip=function(a){var b=!!this.__tiptracking;if(void 0===a||(a=!!a)===b)return this;a?U?this.touchstart(p.onelement):
(this.mouseover(p.onelement),this.mousemove(p.onredraw),this.mouseout(p.onhide)):U?this.untouchstart(p.onelement):(this.unmouseover(p.onelement),this.unmousemove(p.onredraw),this.unmouseout(p.onhide));this.__tiptracking=a;return this};A.el.tooltip=function(a,b,e,l,g){p.setup();A.el.tooltip=function(a,b,e,l,h){b=!1===a||void 0===a||""===a;this.__tipScatted=void 0===l?this.__tipScatted:!l;void 0===this.__tipScatted&&(this.__tipScatted=!0);null!==h&&(this.__tip_blocked=h);b^!this.__tipText&&(this.__tipNeeded=
!b);this.__tipText=a;if(p.currentTarget===this&&a!==p.text&&!p.hidden)p[b?"hide":"redraw"]();return this};return A.el.tooltip.call(this,a,b,e,l,g)};b.core._setTooltipZIndex=function(a){a=parseInt(a,10);p&&!isNaN(a)&&(p.defaultContainerStyle.zIndex=a,p.containerStyle&&(p.containerStyle.zIndex=a))};H.addEvent(v,"webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(a){var e=a.target,l,g,k,m=J.webkitIsFullScreen||J.mozFullScreen||J.msFullscreenElement||void 0!==J.fullscreenElement,
w;if(p.element){if("mozfullscreenchange"===a.type)e=a.originalEvent.explicitOriginalTarget.mozFullScreenElement;else if("MSFullscreenChange"===a.type)e=a.originalEvent.srcElement.activeElement;else if("fullscreenchange"===a.type)e=a.originalEvent.srcElement.firstElementChild;else if(e===v||e===J)return;if(!e||e instanceof v.SVGElement)e=p._lastTargetElem;a=e.getElementsByClassName("fusioncharts-container");l=a.length;b._fullScreenMode=m;for(w=0;w<l;w++)g=a[w].FusionCharts.apiInstance,k=g.components.paper,
k.__tipCp=k.canvas&&H.getPosition(k.canvas.parentNode,!0,g)||{};m?(e.appendChild(p.element),p._lastTargetElem=e):J.body.appendChild(p.element)}})}]);Q.register("module",["private","modules.renderer.js-smartlabel",function(){var b=this.hcLib,v=b.isIE,J=b.hasSVG,C=Math,H=C.max,A=C.round,C=this.window,u=/ HtmlUnit/.test(C.navigator.userAgent),a=C.document,O=/ AppleWebKit\//.test(C.navigator.userAgent),q=!!a.createElement("canvas").getContext,M=(C=!(!q||!a.createElement("canvas").getContext("2d")))&&
C.measureText,U=/<br\/>/ig,N=/&lt;|&gt;/g,E=[],r={" ":"&nbsp;"},C=function(){function k(a,b,h){if(!a||!a.length)return 0;var d=h.getWidthFunction(),f=0,c=0,c=d(a),e=c/a.length;h=b;f=Math.ceil(b/e);if(c<b)return a.length-1;f>a.length&&(h=b-c,f=a.length);for(;0<h;)if(h=b-d(a.substr(0,f)),c=Math.floor(h/e))f+=c;else return f;for(;0>h;)if(h=b-d(a.substr(0,f)),c=Math.floor(h/e))f+=c;else break;return f}function m(b,e){e=5<e?e:5;this.maxContainers=20>e?e:20;this.last=this.first=null;this.containers={};
this.length=0;this.rootNode=b;if(Z){var h=a.createElementNS("http://www.w3.org/2000/svg","svg");h.setAttributeNS("http://www.w3.org/2000/svg","xlink","http://www.w3.org/1999/xlink");h.setAttributeNS("http://www.w3.org/2000/svg","height","0");h.setAttributeNS("http://www.w3.org/2000/svg","width","0");this.svgRoot=h;this.rootNode.appendChild(h)}}function n(b,e,h){if("undefined"!==typeof b&&"object"!==typeof b){this.id=b;var d;"string"===typeof e&&(e=a.getElementById(e));a:{if(e&&(e.offsetWidth||e.offsetHeight)){if(e.appendChild){e.appendChild(e=
a.createElement("div"));e.className="fusioncharts-smartlabel-container";e.setAttribute("aria-hidden","true");e.setAttribute("role","presentation");b=e;break a}}else if((b=a.getElementsByTagName("body")[0])&&b.appendChild){e=a.createElement("div");e.className="fusioncharts-smartlabel-container";e.setAttribute("aria-hidden","true");e.setAttribute("role","presentation");b.appendChild(e);b=e;break a}b=void 0}b=this.parentContainer=b;b.innerHTML="WgI";if(u||!v&&!b.offsetHeight&&!b.offsetWidth)Z=!0;b.innerHTML=
"";for(d in l)b.style[d]=l[d];this.containerManager=new m(b,10);this.showNoEllipses=!h;this.init=!0;this.style={};this.setStyle()}}var L=b.supportedStyle,g={fontWeight:1,"font-weight":1,fontStyle:1,"font-style":1,fontSize:1,"font-size":1,fontFamily:1,"font-family":1},l={position:"absolute",top:"-9999em",whiteSpace:"nowrap",padding:"0px",width:"1px",height:"1px",overflow:"hidden"},B=O?0:4.5,e=0,V=/\b_SmartLabel\b/,p=/\b_SmartLabelBR\b/,T=/(<[^<\>]+?\>)|(&(?:[a-z]+|#[0-9]+);|.)/ig,K=RegExp("\\<span[^\\>]+?_SmartLabel[^\\>]{0,}\\>(.*?)\\<\\/span\\>",
"ig"),t=/<[^>][^<]*[^>]+>/i,Z=!1,P=0,S=0,z,R,w;a.getElementsByClassName?(z="getElementsByClassName",R="_SmartLabel",w=!0):(z="getElementsByTagName",R="span",w=!1);m.prototype={get:function(a){var b=this.containers,h=this.length,d=this.maxContainers,f,c="",e="",e=this.getCanvasFont(a);for(f in L)void 0!==a[f]&&(c+=L[f]+":"+a[f]+";");if(!c)return!1;if(b[c])c=b[c],this.first!==c&&(c.prev&&(c.prev.next=c.next),c.next&&(c.next.prev=c.prev),c.next=this.first,c.next.prev=c,this.last===c&&(this.last=c.prev),
c.prev=null,this.first=c);else{if(h>=d)for(a=h-d+1;a--;)this.removeContainer(this.last);c=this.addContainer(c,e)}return c},getCanvasFont:function(a){var b,h=[];if(!q||!M)return!1;for(b in g)void 0!==a[b]&&h.push(a[b]);return h.join(" ")},setMax:function(a){var b=this.length;a=5<a?a:5;a=20>a?a:20;if(a<b){for(b-=a;b--;)this.removeContainer(this.last);this.length=a}this.maxContainers=a},addContainer:function(b,e){var h,d;this.containers[b]=d={next:null,prev:null,node:null,ellipsesWidth:0,lineHeight:0,
dotWidth:0,avgCharWidth:4,keyStr:b,canvasStr:e,charCache:{}};d.next=this.first;d.next&&(d.next.prev=d);this.first=d;this.last||(this.last=d);this.length+=1;h=d.node=a.createElement("div");this.rootNode.appendChild(h);v&&!J?h.style.setAttribute("cssText",b):h.setAttribute("style",b);h.setAttribute("aria-hidden","true");h.setAttribute("role","presentation");h.style.display="inline-block";h.innerHTML="WgI";d.lineHeight=h.offsetHeight;d.avgCharWidth=h.offsetWidth/3;Z?(h=d.svgText=a.createElementNS("http://www.w3.org/2000/svg",
"text"),h.setAttribute("style",b),this.svgRoot.appendChild(h),h.textContent="WgI",d.lineHeight=h.getBBox().height,d.avgCharWidth=(h.getBBox().width-B)/3,h.textContent="...",d.ellipsesWidth=h.getBBox().width-B,h.textContent=".",d.dotWidth=h.getBBox().width-B):e?(h=d.canvas=a.createElement("canvas"),h.style.height=h.style.width="0px",this.rootNode.appendChild(h),d.context=h=h.getContext("2d"),h.font=e,d.ellipsesWidth=h.measureText("...").width,d.dotWidth=h.measureText(".").width):(h.innerHTML="...",
d.ellipsesWidth=h.offsetWidth,h.innerHTML=".",d.dotWidth=h.offsetWidth,h.innerHTML="");return d},removeContainer:function(a){var b=a.keyStr;b&&this.length&&a&&(--this.length,a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),this.first===a&&(this.first=a.next),this.last===a&&(this.last=a.prev),a.node.parentNode.removeChild(a.node),a.canvas&&a.canvas.parentNode.removeChild(a.canvas),delete this.containers[b])},dispose:function(){var a,b=this.containers;this.maxContainers=null;for(a in b)this.removeContainer(b[a]);
this.rootNode.parentNode.removeChild(this.rootNode);this.last=this.first=this.rootNode=null}};m.prototype.constructor=m;n.prototype={dispose:function(){this.init&&(this.containerManager&&this.containerManager.dispose&&this.containerManager.dispose(),delete this.container,delete this.context,delete this.cache,delete this.containerManager,delete this.containerObj,delete this.id,delete this.style,delete this.parentContainer,delete this.showNoEllipses)},useEllipsesOnOverflow:function(a){this.init&&(this.showNoEllipses=
!a)},getWidthFunction:function(){var a=this.context,b=this.container,h=this.containerObj.svgText;return h?function(a){var b;h.textContent=a;a=h.getBBox();b=a.width-B;1>b&&(b=a.width);return b}:a?function(d){d=d&&d.split?d.split(U):E;for(var h=0,c=d.length,b=0,h=0;h<c;h+=1)b=H(a.measureText(d[h]||"").width,b);return b}:function(a){b.innerHTML=a;return b.offsetWidth}},getSmartText:function(b,l,h,d){if(!this.init)return!1;if(void 0===b||null===b)b="";var f={text:b,maxWidth:l,maxHeight:h,width:null,height:null,
oriTextWidth:null,oriTextHeight:null,oriText:b,isTruncated:!1},c=!1,g,G,m=0,B,n,r,q,u,L=-1,v=q=-1;G=this.container;var E=this.context,C=0;u=0;var A,J,M;M=[];var da=0,oa=this.showNoEllipses?"":"...";r=this.lineHeight;var Y,C=[],L=g=-1;Y=function(c){c=c.replace(/^\s\s*/,"");for(var a=/\s/,d=c.length;a.test(c.charAt(--d)););return c.slice(0,d+1)};q=-1;J=this.getWidthFunction();h===r&&(h*=1.2);if(G){if(!Z){(c=t.test(b))?(G.innerHTML=b,f.oriTextWidth=q=G.offsetWidth,f.oriTextHeight=u=G.offsetHeight):(n=
b.replace(N,function(c){return"&lt;"===c?"<":">"}),n=this.getOriSizeImprove(n,!0),f.oriTextWidth=q=n.width,f.oriTextHeight=u=n.height);if(u<=h&&q<=l)return f.width=f.oriTextWidth=q,f.height=f.oriTextHeight=u,f;if(r>h)return f.text="",f.width=f.oriTextWidth=0,f.height=f.oriTextHeight=0,f}b=Y(b).replace(/(\s+)/g," ");r=this.showNoEllipses?l:l-e;if(c){m=b.replace(T,"$2");b=b.replace(T,'$1<span class="_SmartLabel">$2</span>');b=b.replace(/(<br\s*\/*\>)/g,'<span class="_SmartLabel _SmartLabelBR">$1</span>');
G.innerHTML=b;da=G[z](R);E=0;for(J=da.length;E<J;E+=1)if(b=da[E],w||V.test(b.className))Y=b.innerHTML,""!==Y&&(" "===Y?L=C.length:"-"===Y&&(g=C.length),C.push({spaceIdx:L,dashIdx:g,elem:b}),M.push(Y));da=0;g=C.length;P=C[0].elem.offsetWidth;if(P>l)return f.text="",f.width=f.oriTextWidth=f.height=f.oriTextHeight=0,f;P>r&&!this.showNoEllipses&&(r=l-2*S,r>P?oa="..":(r=l-S,r>P?oa=".":(r=0,oa="")));M=C[0].elem.offsetLeft;E=C[0].elem.offsetTop;if(d)for(;da<g;da+=1)b=C[da].elem,J=b.offsetLeft-M+b.offsetWidth,
J>r&&(A||(A=da),G.offsetWidth>l&&(B=da,da=g));else for(;da<g;da+=1)b=C[da].elem,Y=b.offsetHeight+(b.offsetTop-E),J=b.offsetLeft-M+b.offsetWidth,d=null,J>r?(A||(A=da),J>l&&(q=C[da].spaceIdx,L=C[da].dashIdx,q>v?(C[q].elem.innerHTML="<br/>",v=q):L>v?(C[L].elem.innerHTML=L===da?"<br/>-":"-<br/>",v=L):b.parentNode.insertBefore(d=a.createElement("br"),b),b.offsetHeight+b.offsetTop>h?(d?d.parentNode.removeChild(d):v===L?C[L].elem.innerHTML="-":C[q].elem.innerHTML=" ",B=da,da=g):A=null)):Y>h&&(B=da,da=g);
if(B<g){f.isTruncated=!0;A=A?A:B;for(da=g-1;da>=A;--da)b=C[da].elem,b.parentNode.removeChild(b);for(;0<=da;--da)b=C[da].elem,p.test(b.className)?b.parentNode.removeChild(b):da=0}f.text=G.innerHTML.replace(K,"$1").replace(/\&amp\;/g,"&");f.isTruncated&&(f.text+=oa,f.tooltext=m)}else{M=b.split("");g=M.length;G="";B=[];A=M[0];this.cache[A]?P=this.cache[A].width:(P=J(A),this.cache[A]={width:P});if(r>P)B=b.substr(0,k(b,r,this)).split(""),da=B.length;else{if(P>l)return f.text="",f.width=f.oriTextWidth=
f.height=f.oriTextHeight=0,f;oa&&(r=l-2*S,r>P?oa="..":(r=l-S,r>P?oa=".":(r=0,oa="")))}C=J(B.join(""));u=this.lineHeight;if(d){for(;da<g;da+=1)if(A=B[da]=M[da],this.cache[A]?P=this.cache[A].width:(n&&(P=n.detailObj[A])||(P=J(A)),this.cache[A]={width:P}),C+=P,C>r&&(G||(G=B.slice(0,-1).join("")),C>l))return f.text=Y(G)+oa,f.tooltext=f.oriText,f.width=J(f.text),f.height=this.lineHeight,f;f.text=B.join("");f.width=C;f.height=this.lineHeight}else{for(;da<g;da+=1)if(A=B[da]=M[da]," "!==A||E||(A="&nbsp;"),
this.cache[A]?P=this.cache[A].width:(n&&(P=n.detailObj[A])||(P=J(A)),this.cache[A]={width:P}),C+=P,C>r&&(G||(G=B.slice(0,-1).join("")),C>l)){q=b.substr(0,B.length).lastIndexOf(" ");L=b.substr(0,B.length).lastIndexOf("-");q>v?(C=J(B.slice(v+1,q).join("")),B.splice(q,1,"<br/>"),v=q,d=q+1):L>v?(L===B.length-1?(C=J(B.slice(v+1,q).join("")),B.splice(L,1,"<br/>-")):(C=J(B.slice(v+1,q).join("")),B.splice(L,1,"-<br/>")),v=L,d=L+1):(B.splice(B.length-1,1,"<br/>"+M[da]),q=B.length-2,C=J(B.slice(v+1,q+1).join("")),
v=q,d=da);u+=this.lineHeight;if(u>h)return f.text=Y(G)+oa,f.tooltext=f.oriText,f.width=l,f.height=u-this.lineHeight,f;m=H(m,C);G=null;A=k(b.substr(d),r,this);C=J(b.substr(d,A||1));B.length<d+A&&(B=B.concat(b.substr(B.length,d+A-B.length).split("")),da=B.length-1)}m=H(m,C);f.text=B.join("");f.width=m;f.height=u}return f}f.height=G.offsetHeight;f.width=G.offsetWidth}else f.error=Error("Body Tag Missing!");return f},setStyle:function(a){if(!this.init)return!1;if(a!==this.style||this.styleNotSet){a||
(a=this.style);var b=a,h=b.fontSize=b.fontSize||"12px";b.lineHeight=b.lineHeight||b["line-height"]||1.2*parseInt(h,10)+"px";this.style=a;(this.containerObj=a=this.containerManager.get(a))?(this.container=a.node,this.context=a.context,this.cache=a.charCache,this.lineHeight=a.lineHeight,e=a.ellipsesWidth,S=a.dotWidth,this.styleNotSet=!1):this.styleNotSet=!0}},getTextSize:function(a,b,h){if(!this.init)return!1;var d={text:a,width:null,height:null,oriTextWidth:null,oriTextHeight:null,isTruncated:!1},
f=this.container;f&&(f.innerHTML=a,d.oriTextWidth=f.offsetWidth,d.oriTextHeight=f.offsetHeight,d.width=Math.min(d.oriTextWidth,b),d.height=Math.min(d.oriTextHeight,h),d.width<d.oriTextWidth||d.height<d.oriTextHeight)&&(d.isTruncated=!0);return d},getOriSize:function(a){if(!this.init)return!1;var b={text:a,width:null,height:null},h=this.container,d=this.getWidthFunction(),f=0;if(Z){a=a.split(/(<br\s*\/*\>)/g);h=a.length;for(b.height=this.lineHeight*h;h--;)f=H(f,d(a[h]));b.width=f}else h&&(h.innerHTML=
a,b.width=h.offsetWidth,b.height=h.offsetHeight);return b},getOriSizeImprove:function(a,b){if(!this.init)return!1;var h,d,f,c=0,e=0,l={},g,k;if(!b)return this.calCharDimWithCache(a);h=a.split("");g=0;for(k=h.length;g<k;g++)d=h[g],f=this.calCharDimWithCache(d,!0,h.length),e=H(e,f.height),c+=f.width,l[d]=f.width;return{width:A(c),height:e,detailObj:l}},calCharDimWithCache:function(a,b,h){if(!this.init)return!1;var d=this.container,f=this.style||{},c=this.advancedCache||(this.advancedCache={}),e=this.advancedCacheKey||
(this.advancedCacheKey=[]),l=a+(f.fontSize||"")+(f.fontFamily||"")+(f.fontWeight||"")+(f.fontStyle||""),f=a+"init"+(f.fontSize||"")+(f.fontFamily||"")+(f.fontWeight||"")+(f.fontStyle||""),g;r[a]&&(a=r[a]);b?void 0===(b=c[f])&&(d.innerHTML=a.repeat?a.repeat(h):Array(h+1).join(a),b=d.offsetWidth,d.innerHTML=a,g=d.offsetWidth,b=c[f]=(b-h*g)/(h+1),e.push(f),500<e.length&&delete c[e.shift()]):b=0;if(h=c[l])return c=h.split(","),{width:parseFloat(c[0],10),height:parseFloat(c[1],10)};d.innerHTML=a;a={height:d.offsetHeight,
width:d.offsetWidth+b};c[l]=a.width+","+a.height;e.push(l);500<e.length&&delete c[e.shift()];return a}};return n.prototype.constructor=n}();b.SmartLabelManager=C}]);Q.register("module",["private","modules.renderer.js-numberformatter",function(){var b=this,v=b.hcLib,J=v.pluckNumber,C=v.extend2,H=v.getValidValue,A=v.pluck,u=v.getFirstValue,a=Math.abs,O=Math.pow,q=Math.round,M=function(a){return a&&a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},U={},N=function(a){var b=[],m;for(m in a)b.push(m+"_"+a[m]);
b.sort();return b.join(",")},E=function(a){var b={},m;for(m in a)b[m.toLowerCase()]=a[m];return b};v.NumberFormatter=function(){function b(a,g,e){var k;if(0>=g)return q(a)+"";if(isNaN(g))return a+="",12<a.length&&-1!=a.indexOf(".")&&(g=12-a.split(".")[0].length,k=O(10,g),a=q(a*k)/k+""),a;k=O(10,g);a=q(a*k)/k+"";if(1==e)for(-1==a.indexOf(".")&&(a+=".0"),e=a.split("."),g-=e[1].length,e=1;e<=g;e++)a+="0";return a}function k(a,b,e,g,k){var m=Number(a),n="",t=!1,r="",P="",q=r=0;if(isNaN(m))return"";if(1E15<
m)return m.toExponential(k?1:14);r=0;q=a.length;-1!=a.indexOf(".")&&(n=a.substring(a.indexOf(".")+1,a.length),q=a.indexOf("."));0>m&&(t=!0,r=1);r=a.substring(r,q);a=r.length;k=g.length-1;m=g[k];if(a<m)P=r;else for(;a>=m;)P=(a-m?e:"")+r.substr(a-m,m)+P,a-=m,m=0>=--k?g[0]:g[k],a<m&&(P=r.substring(a,0)+P);""!=n&&(P=P+b+n);!0===t&&(P="-"+P);return P}var m,n={formatnumber:"1",formatnumberscale:"1",forcenumberscale:"0",defaultnumberscale:"",numberscaleunit:["K","M"],numberscalevalue:[1E3,1E3],numberprefix:"",
numbersuffix:"",decimals:"",forcedecimals:"0",yaxisvaluedecimals:"2",decimalseparator:".",thousandseparator:",",thousandseparatorposition:[3],indecimalseparator:"",inthousandseparator:"",sformatnumber:"1",sformatnumberscale:"0",sforcenumberscale:"0",sdefaultnumberscale:"",snumberscaleunit:["K","M"],snumberscalevalue:[1E3,1E3],snumberprefix:"",snumbersuffix:"",sdecimals:"2",sforcedecimals:"0",syaxisvaluedecimals:"2",xFormatNumber:"0",xFormatNumberScale:"0",xforcenumberscale:"0",xDefaultNumberScale:"",
xNumberScaleUnit:["K","M"],xNumberScaleValue:[1E3,1E3],xNumberPrefix:"",xNumberSuffix:""},L={mscombidy2d:{formatnumberscale:"1"}},g=function(a,b){var e=a.name,g=this.csConf=C({},n);(e=L[e])&&C(g,e);this.linkedItems={iapi:a};this.configure(b)};g.prototype={configure:function(a){var b=this.linkedItems.iapi,e=b.jsonData;a=a||e.chart;var e=b.name,g=this.csConf,k,m,r,t,q,P,L,z,R,w,F,v,h,d,f,c,D,G,aa,E;this.csConf=g;this.useScaleRecursively=b.useScaleRecursively;H(a.numberscaleunit)&&(k=a.numberscaleunit.split(","));
if(m=H(a.snumberscaleunit,a.numberscaleunit))m=m.split(",");if(r=H(a.xnumberscaleunit,a.numberscaleunit))r=r.split(",");if(t=H(a.ticknumberscaleunit,a.numberscaleunit))t=t.split(",");if(q=H(a.ynumberscaleunit,a.numberscaleunit))q=q.split(",");H(a.numberscalevalue)&&(P=a.numberscalevalue.split(","));if(F=H(a.snumberscalevalue,a.numberscalevalue))F=F.split(",");if(L=H(a.xnumberscalevalue,a.numberscalevalue))L=L.split(",");if(z=H(a.ticknumberscalevalue,a.numberscalevalue))z=z.split(",");if(R=H(a.ynumberscalevalue,
a.numberscalevalue))R=R.split(",");if(H(a.thousandseparatorposition))for(w=a.thousandseparatorposition.split(","),v=w.length,d=n.thousandseparatorposition[0];v--;)h=parseInt(w[v],10),0>=h&&(h=d),d=w[v]=h;b||(b={});v=J(a.scalerecursively,0);h=J(a.sscalerecursively,v);d=J(a.xscalerecursively,v);f=J(a.maxscalerecursion,-1);c=J(a.smaxscalerecursion,f);D=J(a.xmaxscalerecursion,f);G=H(a.scaleseparator," ");aa=H(a.sscaleseparator,G);E=H(a.xscaleseparator,G);f||(f=-1);this.baseConf=w={cacheStore:[],formatnumber:A(a.formatnumber,
b.formatnumber,g.formatnumber),formatnumberscale:A(a.formatnumberscale,b.formatnumberscale,g.formatnumberscale),forcenumberscale:A(a.forcenumberscale,b.forcenumberscale,g.forcenumberscale),defaultnumberscale:u(a.defaultnumberscale,b.defaultnumberscale,g.defaultnumberscale),numberscaleunit:A(k,b.numberscaleunit,g.numberscaleunit).concat(),numberscalevalue:A(P,b.numberscalevalue,g.numberscalevalue).concat(),numberprefix:u(a.numberprefix,b.numberprefix,g.numberprefix),numbersuffix:u(a.numbersuffix,b.numbersuffix,
g.numbersuffix),decimalprecision:parseInt("auto"===a.decimals?g.decimalprecision:A(a.decimals,a.decimalprecision,b.decimals,g.decimals,b.decimalprecision,g.decimalprecision),10),forcedecimals:A(a.forcedecimals,b.forcedecimals,g.forcedecimals),decimalseparator:A(a.decimalseparator,b.decimalseparator,g.decimalseparator),thousandseparator:A(a.thousandseparator,b.thousandseparator,g.thousandseparator),thousandseparatorposition:A(w,b.thousandseparatorposition,g.thousandseparatorposition),indecimalseparator:u(a.indecimalseparator,
b.indecimalseparator,g.indecimalseparator),inthousandseparator:u(a.inthousandseparator,b.inthousandseparator,g.inthousandseparator),scalerecursively:v,maxscalerecursion:f,scaleseparator:G};H(w.inthousandseparator)&&(this.baseConf._REGinthousandseparator=new RegExp(M(w.inthousandseparator),"g"));H(w.indecimalseparator)&&(this.baseConf._REGindecimalseparator=new RegExp(M(w.indecimalseparator)));this.Y=[];k={cacheStore:[],formatnumber:w.formatnumber,formatnumberscale:w.formatnumberscale,forcenumberscale:w.forcenumberscale,
defaultnumberscale:w.defaultnumberscale,numberscaleunit:w.numberscaleunit.concat(),numberscalevalue:w.numberscalevalue.concat(),numberprefix:w.numberprefix,numbersuffix:w.numbersuffix,decimalprecision:w.decimalprecision,forcedecimals:w.forcedecimals,decimalseparator:w.decimalseparator,thousandseparator:w.thousandseparator,thousandseparatorposition:w.thousandseparatorposition,indecimalseparator:w.indecimalseparator,inthousandseparator:w.inthousandseparator,scalerecursively:v,maxscalerecursion:f,scaleseparator:G};
b.useScaleRecursively&&(k.numberscalevalue&&k.numberscalevalue.length)==(k.numberscaleunit&&k.numberscaleunit.length)||(k.scalerecursively=v=0);P={cacheStore:[],formatnumber:k.formatnumber,formatnumberscale:k.formatnumberscale,forcenumberscale:k.forcenumberscale,defaultnumberscale:k.defaultnumberscale,numberscaleunit:k.numberscaleunit.concat(),numberscalevalue:k.numberscalevalue.concat(),numberprefix:k.numberprefix,numbersuffix:k.numbersuffix,decimalprecision:parseInt(A(a.yaxisvaluedecimals,k.decimalprecision,
2),10),forcedecimals:A(a.forceyaxisvaluedecimals,k.forcedecimals),decimalseparator:k.decimalseparator,thousandseparator:k.thousandseparator,thousandseparatorposition:k.thousandseparatorposition.concat(),indecimalseparator:k.indecimalseparator,inthousandseparator:k.inthousandseparator,scalerecursively:v,maxscalerecursion:f,scaleseparator:G};F={cacheStore:[],formatnumber:A(a.sformatnumber,b.sformatnumber,n.sformatnumber),formatnumberscale:A(a.sformatnumberscale,b.sformatnumberscale,n.sformatnumberscale),
forcenumberscale:A(a.sforcenumberscale,b.sforcenumberscale,n.sforcenumberscale),defaultnumberscale:u(a.sdefaultnumberscale,b.sdefaultnumberscale,k.defaultnumberscale),numberscaleunit:A(m,b.snumberscaleunit,n.snumberscaleunit).concat(),numberscalevalue:A(F,b.snumberscalevalue,n.snumberscalevalue).concat(),numberprefix:u(a.snumberprefix,b.snumberprefix,n.snumberprefix),numbersuffix:u(a.snumbersuffix,b.snumbersuffix,n.snumbersuffix),decimalprecision:parseInt(A(a.syaxisvaluedecimals,a.sdecimals,a.decimals,
b.sdecimals,n.sdecimals),10),forcedecimals:A(a.forcesyaxisvaluedecimals,a.sforcedecimals,a.forcedecimals,b.sforcedecimals,n.sforcedecimals),decimalseparator:A(a.decimalseparator,b.decimalseparator,n.decimalseparator),thousandseparator:A(a.thousandseparator,b.thousandseparator,n.thousandseparator),thousandseparatorposition:k.thousandseparatorposition.concat(),indecimalseparator:A(a.indecimalseparator,b.indecimalseparator,n.indecimalseparator),inthousandseparator:A(a.inthousandseparator,b.inthousandseparator,
n.inthousandseparator),scalerecursively:h,maxscalerecursion:c,scaleseparator:aa};m=C({},F);m.decimalprecision=parseInt(A(a.sdecimals,a.decimals,a.syaxisvaluedecimals,b.sdecimals,n.sdecimals),10);m.forcedecimals=A(a.sforcedecimals,a.forcedecimals,a.forcesyaxisvaluedecimals,b.sforcedecimals,n.sforcedecimals);m.cacheStore=[];b.useScaleRecursively&&(F.numberscalevalue&&F.numberscalevalue.length)==(F.numberscaleunit&&F.numberscaleunit.length)||(F.scalerecursively=h=0);/^(bubble|scatter|selectscatter|zoomscatter)$/.test(e)&&
(P.formatnumber=A(a.yformatnumber,P.formatnumber),P.formatnumberscale=A(a.yformatnumberscale,P.formatnumberscale),P.forcenumberscale=A(a.yforcenumberscale,P.forcenumberscale),P.defaultnumberscale=u(a.ydefaultnumberscale,P.defaultnumberscale),P.numberscaleunit=A(q,P.numberscaleunit),P.numberscalevalue=A(R,P.numberscalevalue),P.numberprefix=A(a.ynumberprefix,P.numberprefix),P.numbersuffix=A(a.ynumbersuffix,P.numbersuffix),k.formatnumber=A(a.yformatnumber,k.formatnumber),k.formatnumberscale=A(a.yformatnumberscale,
k.formatnumberscale),k.forcenumberscale=A(a.yforcenumberscale,k.forcenumberscale),k.defaultnumberscale=u(a.ydefaultnumberscale,k.defaultnumberscale),k.numberscaleunit=A(a.ynumberscaleunit,k.numberscaleunit.concat()),k.numberscalevalue=A(a.ynumberscalevalue,k.numberscalevalue.concat()),k.numberprefix=A(a.ynumberprefix,k.numberprefix),k.numbersuffix=A(a.ynumbersuffix,k.numbersuffix));/^(pie2d|pie3d|doughnut2d|doughnut3d|marimekko|pareto2d|pareto3d)$/.test(e)&&(k.decimalprecision=A(a.decimals,"2"));
v&&(k.numberscalevalue.push(1),k.numberscaleunit.unshift(k.defaultnumberscale),P.numberscalevalue.push(1),P.numberscaleunit.unshift(P.defaultnumberscale));h&&(F.numberscalevalue.push(1),F.numberscaleunit.unshift(F.defaultnumberscale),m.numberscalevalue.push(1),m.numberscaleunit.unshift(m.defaultnumberscale));this.Y[0]={yAxisLabelConf:P,dataLabelConf:k};this.Y[1]={yAxisLabelConf:F,dataLabelConf:m};this.paramLabels=k;this.param1=P;this.param2=F;this.paramLabels2=m;this.paramX={cacheStore:[],formatnumber:A(a.xformatnumber,
w.formatnumber),formatnumberscale:A(a.xformatnumberscale,w.formatnumberscale),forcenumberscale:A(a.xforcenumberscale,w.forcenumberscale),defaultnumberscale:u(a.xdefaultnumberscale,w.defaultnumberscale),numberscaleunit:A(r,w.numberscaleunit.concat()),numberscalevalue:A(L,w.numberscalevalue.concat()),numberprefix:A(a.xnumberprefix,w.numberprefix),numbersuffix:A(a.xnumbersuffix,w.numbersuffix),decimalprecision:parseInt(A(a.xaxisvaluedecimals,a.xaxisvaluesdecimals,w.decimalprecision,2),10),forcedecimals:A(a.forcexaxisvaluedecimals,
0),decimalseparator:w.decimalseparator,thousandseparator:w.thousandseparator,thousandseparatorposition:w.thousandseparatorposition.concat(),indecimalseparator:w.indecimalseparator,inthousandseparator:w.inthousandseparator,scalerecursively:d,maxscalerecursion:D,scaleseparator:E};this.paramLegend=C(C({},w),{cacheStore:[],decimalprecision:parseInt(J(a.legendvaluedecimals,w.decimalprecision,2),10),forcedecimals:J(a.legendvalueforcedecimals,w.forcedecimals,0),formatnumberscale:A(a.legendvalueformatnumberscale,
w.formatnumberscale),forcenumberscale:A(a.legendvalueforcenumberscale,w.forcenumberscale),formatnumber:A(a.legendvalueformatnumber,w.formatnumber)});v&&(this.paramLegend.numberscalevalue.push(1),this.paramLegend.numberscaleunit.unshift(this.paramLegend.defaultnumberscale));b.useScaleRecursively&&(this.paramX.numberscalevalue&&this.paramX.numberscalevalue.length)==(this.paramX.numberscaleunit&&this.paramX.numberscaleunit.length)||(this.paramX.scalerecursively=d=0);d&&(this.paramX.numberscalevalue.push(1),
this.paramX.numberscaleunit.unshift(this.paramX.defaultnumberscale));this.paramScale={cacheStore:[],formatnumber:A(a.tickformatnumber,w.formatnumber),formatnumberscale:A(a.tickformatnumberscale,w.formatnumberscale),forcenumberscale:A(a.tickforcenumberscale,w.forcenumberscale),defaultnumberscale:u(a.tickdefaultnumberscale,w.defaultnumberscale),numberscaleunit:A(t,w.numberscaleunit.concat()),numberscalevalue:A(z,w.numberscalevalue.concat()),numberprefix:A(a.ticknumberprefix,w.numberprefix),numbersuffix:A(a.ticknumbersuffix,
w.numbersuffix),decimalprecision:parseInt(A(a.tickvaluedecimals,w.decimalprecision,"2"),10),forcedecimals:A(a.forcetickvaluedecimals,w.forcedecimals,0),decimalseparator:w.decimalseparator,thousandseparator:w.thousandseparator,thousandseparatorposition:w.thousandseparatorposition.concat(),indecimalseparator:w.indecimalseparator,inthousandseparator:w.inthousandseparator,scalerecursively:v,maxscalerecursion:f,scaleseparator:G};v&&(this.paramScale.numberscalevalue.push(1),this.paramScale.numberscaleunit.unshift(this.paramScale.defaultnumberscale));
this.timeConf={inputDateFormat:A(a.inputdateformat,a.dateformat,"mm/dd/yyyy"),outputDateFormat:A(a.outputdateformat,a.inputdateformat,a.dateformat,"mm/dd/yyyy"),days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),months:"January February March April May June July August September October November December".split(" "),daySuffix:" st nd rd th th th th th th th th th th th th th th th th th st nd rd th th th th th th th st".split(" ")};this.cleaneValueCacheStore={};this.percentStrCacheStore=
{}},cleaneValueCacheStore:{},percentStrCacheStore:{},dispose:function(){this.Y&&delete this.Y;this.cleaneValueCacheStore&&delete this.cleaneValueCacheStore;this.percentStrCacheStore&&delete this.percentStrCacheStore;this.paramLabels&&delete this.paramLabels;this.param1&&delete this.param1;this.param2&&delete this.param2;this.paramLabels2&&delete this.paramLabels2;this.csConf&&delete this.csConf;this.iapi&&delete this.iapi;this.baseConf&&delete this.baseConf;this.timeConf&&delete this.timeConf;this.paramX&&
delete this.paramX;this.paramScale&&delete this.paramScale},parseMLAxisConf:function(b,g){var e=this.baseConf,k=this.csConf,p=J(b.scalerecursively,e.scalerecursively),m=J(b.maxscalerecursion,e.maxscalerecursion),r=H(b.scaleseparator,e.scaleseparator),t,q,P,L,z,R;g=J(g,this.Y.length);H(b.numberscaleunit)&&(t=b.numberscaleunit.split(","));H(b.numberscalevalue)&&(q=b.numberscalevalue.split(","));m||(m=-1);if(H(b.thousandseparatorposition))for(P=b.thousandseparatorposition.split(","),L=P.length,R=n.thousandseparatorposition[0];L--;)(z=
J(a(P[L])))?R=z:z=R,P[L]=z;e={cacheStore:[],formatnumber:A(b.formatnumber,e.formatnumber),formatnumberscale:A(b.formatnumberscale,e.formatnumberscale),forcenumberscale:A(b.forcenumberscale,e.forcenumberscale),defaultnumberscale:u(b.defaultnumberscale,e.defaultnumberscale),numberscaleunit:A(t,e.numberscaleunit).concat(),numberscalevalue:A(q,e.numberscalevalue).concat(),numberprefix:u(b.numberprefix,e.numberprefix),numbersuffix:u(b.numbersuffix,e.numbersuffix),forcedecimals:A(b.forcedecimals,e.forcedecimals),
decimalprecision:parseInt("auto"===b.decimals?k.decimalprecision:A(b.decimals,e.decimalprecision),10),decimalseparator:A(b.decimalseparator,e.decimalseparator),thousandseparator:A(b.thousandseparator,e.thousandseparator),thousandseparatorposition:A(P,e.thousandseparatorposition),indecimalseparator:u(b.indecimalseparator,e.indecimalseparator),inthousandseparator:u(b.inthousandseparator,e.inthousandseparator),scalerecursively:p,maxscalerecursion:m,scaleseparator:r};this.useScaleRecursively&&(e.numberscalevalue&&
e.numberscalevalue.length)==(e.numberscaleunit&&e.numberscaleunit.length)||(e.scalerecursively=p=0);m={cacheStore:[],formatnumber:e.formatnumber,formatnumberscale:e.formatnumberscale,forcenumberscale:e.forcenumberscale,defaultnumberscale:e.defaultnumberscale,numberscaleunit:e.numberscaleunit.concat(),numberscalevalue:e.numberscalevalue.concat(),numberprefix:e.numberprefix,numbersuffix:e.numbersuffix,decimalprecision:parseInt(A(b.yaxisvaluedecimals,e.decimalprecision,2),10),forcedecimals:A(b.forceyaxisvaluedecimals,
e.forcedecimals),decimalseparator:e.decimalseparator,thousandseparator:e.thousandseparator,thousandseparatorposition:e.thousandseparatorposition.concat(),indecimalseparator:e.indecimalseparator,inthousandseparator:e.inthousandseparator,scalerecursively:p,maxscalerecursion:m,scaleseparator:r};p&&(e.numberscalevalue.push(1),e.numberscaleunit.unshift(e.defaultnumberscale),m.numberscalevalue.push(1),m.numberscaleunit.unshift(m.defaultnumberscale));this.Y[g]={dataLabelConf:e,yAxisLabelConf:m}},percentValue:function(a){var g=
this.percentStrCacheStore[a];void 0===g&&(g=isNaN(this.paramLabels.decimalprecision)?"2":this.paramLabels.decimalprecision,g=this.percentStrCacheStore[a]=k(b(a,g,this.paramLabels.forcedecimals),this.paramLabels.decimalseparator,this.paramLabels.thousandseparator,this.paramLabels.thousandseparatorposition)+"%");return g},getCleanValue:function(b,g){var e=this.cleaneValueCacheStore[b];if(void 0===e||g){var k=this.baseConf,e=b+"";k._REGinthousandseparator&&(e=e.replace(k._REGinthousandseparator,""));
k._REGindecimalseparator&&(e=e.replace(k._REGindecimalseparator,"."));e=parseFloat(e);e=isFinite(e)?e:NaN;this.cleaneValueCacheStore[b]=e=isNaN(e)?null:g?a(e):e}return e},dataLabels:function(a,b){var e=this.Y[b]||(b?this.Y[1]:this.Y[0]),g,e=e&&e.dataLabelConf||this.baseConf;g=e.cacheStore[a];void 0===g&&(g=e.cacheStore[a]=m(a,e));return g},yAxis:function(a,b){var e=this.Y[b]||(b?this.Y[1]:this.Y[0]),g,e=e&&e.yAxisLabelConf||this.baseConf;g=e.cacheStore[a];void 0===g&&(g=e.cacheStore[a]=m(a,e,!0));
return g},xAxis:function(a){var b=this.paramX.cacheStore[a];void 0===b&&(b=this.paramX.cacheStore[a]=m(a,this.paramX,!0));return b},sYAxis:function(a){var b=this.Y[1],e,b=b&&b.yAxisLabelConf||this.baseConf;e=b.cacheStore[a];void 0===e&&(e=b.cacheStore[a]=m(a,b));return e},scale:function(a){var b=this.paramScale.cacheStore[a];void 0===b&&(b=this.paramScale.cacheStore[a]=m(a,this.paramScale));return b},getCleanTime:function(a){var b;this.timeConf.inputDateFormat&&Date.parseExact&&(b=Date.parseExact(a,
this.timeConf.inputDateFormat));return b&&b.getTime()},legendValue:function(a){var b=this.paramLegend.cacheStore[a];void 0===b&&(b=this.paramLegend.cacheStore[a]=m(a,this.paramLegend));return b},legendPercentValue:function(a){var g=this.percentStrCacheStore[a],e=this.paramLegend;void 0===g&&(g=isNaN(e.decimalprecision)?"2":e.decimalprecision,g=this.percentStrCacheStore[a]=k(b(a,g,e.forcedecimals),e.decimalseparator,e.thousandseparator,e.thousandseparatorposition)+"%");return g},getDateValue:function(a){var b,
e,g;a&&!/\//.test(this.timeConf.inputDateFormat)&&(a=a.replace(new RegExp(this.timeConf.inputDateFormat.replace(/[a-z]/ig,"").slice(0,1),"g"),"/"));a=/^dd/.test(this.timeConf.inputDateFormat)&&a&&a.replace(/(\d{1,2})\/(\d{1,2})\/(\d{2,4})/,"$2/$1/$3")||a;b=new Date(a);e=b.getTime();!e&&a&&/\:/.test(a)&&(a=a.split(":"),e=J(a[0],0),g=J(a[1],0),a=J(a[2],0),e=23<e?24===e&&0===g&&0===a?e:23:e,g=59<g?59:g,a=59<a?59:a,b=new Date,b.setHours(e),b.setMinutes(g),b.setSeconds(a),e=b.getTime());return{ms:e,date:b}},
getFormattedDate:function(a,b){var e="object"===typeof a&&a||new Date(a),g=this.timeConf,k=A(b,g.outputDateFormat),m=e.getFullYear(),n=e.getMonth(),t=e.getDate(),r=e.getDay(),P=e.getMinutes(),q=e.getSeconds(),e=e.getHours(),P=9<P?""+P:"0"+P,q=9<q?""+q:"0"+q,e=9<e?""+e:"0"+e;k.match(/dnl/)&&(k=k.replace(/dnl/ig,g.days[r]));k.match(/dns/)&&(k=k.replace(/dns/ig,g.days[r]&&g.days[r].substr(0,3)));k.match(/dd/)&&(k=k.replace(/dd/ig,t));k.match(/mnl/)&&(k=k.replace(/mnl/ig,g.months[n]));k.match(/mns/)&&
(k=k.replace(/mns/ig,g.months[n]&&g.months[n].substr(0,3)));k.match(/mm/)&&(k=k.replace(/mm/ig,n+1));k.match(/yyyy/)&&(k=k.replace(/yyyy/ig,m));k.match(/yy/)&&(k=k.replace(/yy/ig,(m%1E3%100+"").replace(/^(\d)$/,"0$1")));k.match(/hh12/)&&(k=k.replace(/hh12/ig,e%12||12));k.match(/hh/)&&(k=k.replace(/hh/ig,e));k.match(/mn/)&&(k=k.replace(/mn/ig,P));k.match(/ss/)&&(k=k.replace(/ss/ig,q));k.match(/ampm/)&&(k=k.replace(/ampm/ig,12>e?"AM":"PM"));k.match(/ds/)&&(k=k.replace(/ds/ig,g.daySuffix[t]));return k}};
g.prototype.constructor=g;m=function(a,g,e){if(null!==a){a=Number(a);var m=a+"",p,n,K,t,q;p=1==g.formatnumberscale?g.defaultnumberscale:"";q=(q=m.split(".")[1])?q.length:g.forcedecimals?"2":"";if(1==g.formatnumberscale){m=a;n=g.defaultnumberscale;a=g.numberscalevalue;p=g.numberscaleunit;var P=g.scalerecursively;K=g.forcenumberscale;t={};var u=n,z=0,R=[],w=[],F;K=J(K)||0;if(P){u=J(a[0])||1E3;for(z=0;z<a.length;z++)if(P=J(a[z])||1E3,Math.abs(Number(m))>=P&&z<a.length-1)F=m%P,m=(m-F)/P,0===z&&0!==F&&
""===p[z]&&K?(R.push(F/u),w.push(p[1]||"")):0!==F&&(1===z&&""===n&&K?(P=F+(R.length?R.pop():0),w.pop(),R.push(P)):R.push(F),w.push(p[z]));else{0===z&&""===n&&K?(m=Number(m)/u,R.push(m),w.push(p[1]||"")):(1===z&&""===n&&K?(P=m+(R.length?R.pop():0),w.pop(),R.push(P)):R.push(m),w.push(p[z]));break}R.reverse();w.reverse();t.value=R;t.scale=w}else{if(a.length===p.length)for(z=0;z<a.length;z++)if(P=J(a[z])||1E3,Math.abs(Number(m))>=P)u=p[z]||"",m=Number(m)/P;else{0===z&&""===n&&K&&(u=p[0]||"",m=Number(m)/
P);break}t.value=m;t.scale=u}n=t;a=m=n.value;p=n.scale}if(g.scalerecursively&&0!==g.formatnumberscale&&"0"!==g.formatnumberscale){e=n.value;n=n.scale;a=-1==g.maxscalerecursion?e.length:Math.min(e.length,g.maxscalerecursion);if(1==g.formatnumber)for(m="",t=0;t<a;t++)p=0===t?e[t]:Math.abs(e[t]),K=p+"",t==a-1&&(K=b(p,A(g.decimalprecision,q),g.forcedecimals)),m=m+k(K,g.decimalseparator,g.thousandseparator,g.thousandseparatorposition)+n[t]+(t<a-1?g.scaleseparator:"");else for(m="",t=0;t<a;t++)m=m+(0===
t?e[t]:Math.abs(e[t])+"")+n[t]+(t<a-1?g.scaleseparator:"");m=(g.numberprefix||"")+m+(g.numbersuffix||"")}else 1==g.formatnumber&&(m=b(a,A(g.decimalprecision,q),g.forcedecimals),m=k(m,g.decimalseparator,g.thousandseparator,g.thousandseparatorposition,e)),m=(g.numberprefix||"")+m+p+(g.numbersuffix||"");return m}};return g}();b.extend(b.core,{formatNumber:function(a,b,m){b=b&&E(b)||{};var n=N(b),q;U[n]?q=U[n]:U[n]=q=new v.NumberFormatter(b,{useScaleRecursively:!0});return q.dataLabels(a,m)}},!1);b.extend(b.core,
{formatNumber:function(a,k,m,n){m=m&&E(m)||{};var q=this.jsVars.instanceAPI||{},g=q.numberFormatter,l;""===N(m)?g?l=g:(g=this.getChartData(b.dataFormats.JSON,!0),g=g.data||{},g=g.chart||{},m=N(g),U[m]?l=U[m]:U[m]=l=new v.NumberFormatter(g,q)):(g=this.getChartData(b.dataFormats.JSON,!0),g=g.data||{},g=g.chart||{},g=C(C({},g),m),m=N(g),U[m]?l=U[m]:U[m]=l=new v.NumberFormatter(g,q));switch((k&&k.toLowerCase?k:"").toLowerCase()){case "yaxisvalues":a=l.yAxis(a,n);break;case "xaxisvalues":a=l.xAxis(a);
break;case "scale":a=l.scale(a);break;default:a=l.dataLabels(a,n)}return a}},!0)}]);Q.register("module",["private","modules.renderer.js-colormanager",function(){var b=this.hcLib,v=b.pluckNumber,J=b.graphics.getDarkColor,C=b.graphics.getLightColor,H="AFD8F8 F6BD0F 8BBA00 FF8E46 008E8E D64646 8E468E 588526 B3AA00 008ED6 9D080D A186BE CC6600 FDC689 ABA000 F26D7D FFF200 0054A6 F7941C CC3300 006600 663300 6DCFF6".split(" "),A="8BBA00 F6BD0F FF654F AFD8F8 FDB398 CDC309 B1D0D2 FAD1B9 B8A79E D7CEA5 C4B3CE E9D3BE EFE9AD CEA7A2 B2D9BA".split(" "),
u=b.defaultPaletteOptions={paletteColors:[H,H,H,H,H],bgColor:["CBCBCB,E9E9E9","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:["0,100","0,100","0,100","0,100","0,100"],bgAlpha:["50,50","60,50","40,20","20,10","30,30"],canvasBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],canvasBgAngle:[0,0,0,0,0],canvasBgAlpha:["100","100","100","100","100"],canvasBgRatio:["","","","",""],canvasBorderColor:["545454","545454","415D6F","845001","68001B"],
canvasBorderAlpha:[100,100,100,90,100],showShadow:[0,1,1,1,1],divLineColor:["717170","7B7D6D","92CDD6","965B01","68001B"],divLineAlpha:[40,45,65,40,30],altHGridColor:["EEEEEE","D8DCC5","99C4CD","DEC49C","FEC1D0"],altHGridAlpha:[50,35,10,20,15],altVGridColor:["767575","D8DCC5","99C4CD","DEC49C","FEC1D0"],altVGridAlpha:[10,20,10,15,10],anchorBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F",
"845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50],legendBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],legendBorderColor:["545454","545454","415D6F","845001","D55979"],plotGradientColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],plotBorderColor:["333333","8A8A8A","FFFFFF","FFFFFF","FFFFFF"],plotFillColor:["767575","D8DCC5","99C4CD","DEC49C","FEC1D0"],bgColor3D:["FFFFFF",
"FFFFFF","FFFFFF","FFFFFF","FFFFFF"],bgAlpha3D:["100","100","100","100","100"],bgAngle3D:[90,90,90,90,90],bgRatio3D:["","","","",""],canvasBgColor3D:["DDE3D5","D8D8D7","EEDFCA","CFD2D8","FEE8E0"],canvasBaseColor3D:["ACBB99","BCBCBD","C8A06C","96A4AF","FAC7BC"],divLineColor3D:["ACBB99","A4A4A4","BE9B6B","7C8995","D49B8B"],divLineAlpha3D:[100,100,100,100,100],legendBgColor3D:["F0F3ED","F3F3F3","F7F0E8","EEF0F2","FEF8F5"],legendBorderColor3D:["C6CFB8","C8C8C8","DFC29C","CFD5DA","FAD1C7"],toolTipbgColor3D:["FFFFFF",
"FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor3D:["49563A","666666","49351D","576373","681C09"],baseFontColor3D:["49563A","4A4A4A","49351D","48505A","681C09"],anchorBgColor3D:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"]},H=b.colorManager=function(a){this.linkedItems={iapi:a};this.configure()};H.prototype={configure:function(){var a=this.linkedItems.iapi,A=a.jsonData.chart||{},q=b.extend2({},u),H=a.defaultPaletteOptions||{},U;q||(q={});for(U in H)q[U]=H[U];q=this.paletteOptions=q;H=this.themeEnabled=
A.palettethemecolor;this.paletteIndex=(0<A.palette&&6>A.palette?A.palette:v(a.paletteIndex,1))-1;this.iterator=0;this.paletteColors=q.paletteColors[this.themeEnabled?0:this.paletteIndex];U=A.palettecolors;void 0!==U&&null!==U&&""!==A.palettecolors&&(this.paletteColors=A.palettecolors.split(/\s*\,\s*/));this.paletteLen=this.paletteColors.length;this.useFlatColors=v(A.useflatdataplotcolor,a.useFlatColor,0);H&&(this.paletteIndex=5,q.bgColor[5]=C(H,35)+","+C(H,10),q.bgAngle[5]=270,q.bgRatio[5]="0,100",
q.bgAlpha[5]="50,50",q.canvasBgColor[5]="FFFFFF",q.canvasBgAngle[5]=0,q.canvasBgAlpha[5]="100",q.canvasBgRatio[5]="",q.canvasBorderColor[5]=J(H,80),q.canvasBorderAlpha[5]=100,q.showShadow[5]=1,q.divLineColor[5]=J(H,20),q.divLineAlpha[5]=40,q.altHGridColor[5]=C(H,20),q.altHGridAlpha[5]=15,q.altVGridColor[5]=C(H,80),q.altVGridAlpha[5]=10,q.anchorBgColor[5]="FFFFFF",q.toolTipBgColor[5]="FFFFFF",q.toolTipBorderColor[5]=J(H,80),q.baseFontColor[5]=H.split&&H.split(",")[0],q.borderColor[5]=J(H,60),q.borderAlpha[5]=
50,q.legendBgColor[5]="FFFFFF",q.legendBorderColor[5]=J(H,80),q.plotGradientColor[5]="FFFFFF",q.plotBorderColor[5]=J(H,85),q.plotFillColor[5]=J(H,85),q.bgColor3D[5]="FFFFFF",q.bgAlpha3D[5]="100",q.bgAngle3D[5]=90,q.bgRatio3D[5]="",q.canvasBgColor3D[5]=C(H,20),q.canvasBaseColor3D[5]=C(H,40),q.divLineColor3D[5]=J(H,20),q.divLineAlpha3D[5]=40,q.legendBgColor3D[5]="FFFFFF",q.legendBorderColor3D[5]=J(H,80),q.toolTipbgColor3D[5]="FFFFFF",q.toolTipBorderColor3D[5]=J(H,80),q.baseFontColor3D[5]=H.split&&H.split(",")[0],
q.anchorBgColor3D[5]="FFFFFF",q.tickColor&&(q.tickColor[5]=J(H,90)),q.trendDarkColor&&(q.trendDarkColor[5]=J(H,90)),q.trendLightColor&&(q.trendLightColor[5]=C(H,q.TrendLightShadeOffset)),q.msgLogColor&&(q.msgLogColor[5]=C(H,80)),q.dialColor&&(q.dialColor[5]=J(H,95)+",FFFFFF,"+J(H,95)),q.dialBorderColor&&(q.dialBorderColor[5]=J(H,95)+",FFFFFF,"+J(H,95)),q.pivotColor&&(q.pivotColor[5]=C(H,95)+",FFFFFF,"+C(H,95)),q.pivotBorderColor&&(q.pivotBorderColor[5]=J(H,95)+",FFFFFF,"+J(H,95)),q.pointerBorderColor&&
(q.pointerBorderColor[5]=J(H,75)),q.pointerBgColor&&(q.pointerBgColor[5]=J(H,75)),q.thmBorderColor&&(q.thmBorderColor[5]=J(H,90)),q.thmFillColor&&(q.thmFillColor[5]=C(H,55)),q.gaugeBorderColor&&(q.gaugeBorderColor[5]=J(H,90)),q.gaugeFillColor&&(q.gaugeFillColor[5]=C(H,55)),q.cylFillColor&&(q.cylFillColor[5]=C(H,55)),q.periodColor&&(q.periodColor[5]=C(H,10)),q.winColor&&(q.winColor[5]="666666"),q.lossColor&&(q.lossColor[5]="CC0000"),q.drawColor&&(q.drawColor[5]="666666"),q.scorelessColor&&(q.scorelessColor[5]=
"FF0000"),q.gridColor&&(q.gridColor[5]=C(H,30)),q.categoryBgColor&&(q.categoryBgColor[5]=C(H,10)),q.dataTableBgColor&&(q.dataTableBgColor[5]=C(H,10)),q.gridResizeBarColor&&(q.gridResizeBarColor[5]=J(H,90)),q.scrollBarColor&&(q.scrollBarColor[5]=C(H,50)))},getColor:function(a){return this.paletteOptions[a][this.paletteIndex]},getPlotColor:function(a){var b=this.paletteColors;a=this.useFlatColors?this.getColor("plotFillColor"):b[a%this.paletteLen];a||(this.iterator===this.paletteLen&&(this.iterator=
0),a=b[this.iterator],this.iterator+=1);return a},parseColorMix:function(a,b){var q=[],u,v,A,E,r,k,m,n,L,g;b=b.replace(/\s/g,"");b=b.toLowerCase();if(""===b||null===b||void 0===b)q=[a];else for(v=b.split(","),A=a.split(","),E=Math.max(v.length,A.length,1),r=v[0],k=A[0],L=/[\{\}]/ig,g=0;g<E;g++)m=(v[g]||r).replace(L,""),n=A[g]||k,"color"==m?q.push(n):"light"==m.substr(0,5)?(u=m.indexOf("-"),u=-1==u?1:m.substr(u+1,m.length-u),u=100-u,q.push(C(n,u))):"dark"==m.substr(0,4)?(u=m.indexOf("-"),u=-1==u?1:
m.substr(u+1,m.length-u),u=100-u,q.push(J(n,u))):q.push(m);return q},parseAlphaList:function(a,b){var q=a.split(","),u=[],A,C=100,E;for(E=0;E<b;E++)A=v(q[E]),void 0!==A&&null!==A&&(C=A),u[E]=C;return u.join()},parseRatioList:function(a,b){var q=a.split(","),u=[],v=0,A,E;for(E=0;E<b;E++)A=q[E],A=isNaN(A)||void 0===A?0:Math.abs(Number(A)),A=100<A?100:A,u[E]=A,v+=A;v=100<v?100:v;if(q.length<b)for(E=q.length;E<b;E++)u[E]=(100-v)/(b-q.length);u[-1]=0;return u.join()}};H.prototype.constructor=H;b.defaultGaugePaletteOptions=
{paletteColors:[A,A,A,A,A],bgColor:["CBCBCB,E9E9E9","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:["0,100","0,100","0,100","0,100","0,100"],bgAlpha:["50,50","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendDarkColor:["333333",
"60634E","025B6A","A15E01","68001B"],trendLightColor:["f1f1f1","F3F5DD","EDFBFE","FFF5E8","FFD1DD"],pointerBorderColor:["545454","60634E","415D6F","845001","68001B"],pointerBgColor:["545454","60634E","415D6F","845001","68001B"],canvasBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],canvasBgAngle:[0,0,0,0,0],canvasBgAlpha:["100","100","100","100","100"],canvasBgRatio:["","","","",""],canvasBorderColor:["545454","545454","415D6F","845001","68001B"],canvasBorderAlpha:[100,100,100,90,100],altHGridColor:["EEEEEE",
"D8DCC5","99C4CD","DEC49C","FEC1D0"],altHGridAlpha:[50,35,10,20,15],altVGridColor:["767575","D8DCC5","99C4CD","DEC49C","FEC1D0"],altVGridAlpha:[10,20,10,15,10],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50],legendBgColor:["ffffff","ffffff","ffffff","ffffff","ffffff"],legendBorderColor:["545454","545454","415D6F","845001","D55979"],plotFillColor:["767575","D8DCC5","99C4CD","DEC49C","FEC1D0"],plotBorderColor:["999999","8A8A8A","6BA9B6","C1934D","FC819F"],msgLogColor:["717170",
"7B7D6D","92CDD6","965B01","68001B"],TrendLightShadeOffset:30}}]);Q.register("module",["private","modules.renderer.js-annotations",function(){var b=this,v=b.core,J=b.hcLib,C=b.window,H=/msie/i.test(C.navigator.userAgent)&&!C.opera,A=J.addEvent,u=J.removeEvent,a=J.hasTouch,O=C.Number,q=a?6:5,M="rgba(192,192,192,"+(H?.002:1E-6)+")",H=Math,U=H.min,N=H.max,E=H.sin,r=H.cos,k=H.PI,m=k/180,n=H.abs,L=b.extend,g=J.pluck,l=J.pluckNumber,B=J.graphics.convertColor,e=J.getValidValue,V=J.parseUnsafeString,p=J.setImageDisplayMode,
T=J.graphics.parseColor,K=J.setLineHeight,t=J.getMouseCoordinate,Z={style:{}},P=J.toRaphaelColor,S=function(a,b){return{start:-a,end:-b,angle:a-b}},z=function(a,b){var c=0;switch(a){case "startx":c=b.x;break;case "starty":c=b.y;break;case "x":case "middlex":case "centerx":c=b.x+b.width/2;break;case "y":case "middley":case "centery":c=b.y+b.height/2;break;case "endx":c=b.x+b.width;break;case "endy":c=b.y+b.height;break;default:c=0}return c},R=function(a,b,c,h,e){var g,l,k=0,t=0;l=void 0===b||null===
b?1:b;var p;if(!a||!a.toString)return{value:c,hasDynamicMacros:!1};a=a.toString();a=a.toLowerCase().replace(/\s/g,"");if(c=a.match(/^[\+\-]?\d+(\.\d+)?|[\+\-]\d+(\.\d+)?/g)){for(b=0;b<c.length;b+=1)k+=Number(c[b])||0;k*=l}if(c=a.match(/^[\+\-]?(\$[a-z0-9\.]+)|[\+\-](\$[a-z0-9\.]+)/g))for(b=0;b<c.length;b+=1){g=c[b];var m=h,z=e,w=g.split("."),F=void 0,n=void 0,r=0;for(l=void 0;F=w.shift();)switch(typeof(n=m[F])){case "object":m=n[F];break;case "function":n=n(w,z),"-"===g.charAt()&&(n*=-1),l=!0;default:r+=
O(n)||0,w.length=0}g=r;l&&(p=!0);t+=g}if(c=a.match(/^[\+\-]?\$\d+(\.\d+)?|[\+\-]\$\d+(\.\d+)?/g))for(b=0;b<c.length;b+=1)t=t+Number(c[b].replace("$",""))||0;return{value:k+t,hasDynamicMacros:p}},w=function(a,h,c){if(!h.removed){h=h.data("annotation");var e=h.getRenderer(),g=t(e.linkedItems.container,c),l=g.annotationOptions=h.options,k=g.groupOptions=h.group.options;g._shape=h;"id"in l&&(g.annotationId=l.id);"id"in k&&(g.groupId=k.id);b.raiseEvent(a,g,e.chartInstance,c)}},F,X,h;X=function(a,b,c,e,
g,l){this.options=a;this.attrs={};this.css={};this.bounds={};this.shared=b;this.snaps=c||{};this.annotations=g;this.items=b=[];this._idstore=e;a.id&&(this._id=a.id,e[a.id]=this);if(a=a.items)for(e=0,c=a.length;e<c;e+=1)b.push(new h(a[e],this)),b[e].chart=l};L(X.prototype,{scaleImageX:1,scaleImageY:1,scaleText:1,scaleValue:1,scaleValueComplement:1,scaleX:1,scaleY:1});X.prototype.setup=function(){var a=this.options,b=this.shared,c=this.getRenderer();c&&(this.isBelow=0!==l(a.showbelow,a.showbelowchart,
b.showbelow),this.useTracker=!this.isBelow&&c.graphics.trackerGroup&&this.shared.useTracker,this.raiseOwnEvents=b.interactionevents)};X.prototype.scale=function(){var a=this.options,b=this.shared,c=this.bounds,h=this.snaps,e=this.getRenderer(),k=b.rootxscale,t=b.rootyscale,p=c.xs=l(a.xscale,b.xscale,100)/100,m=c.ys=l(a.yscale,b.yscale,100)/100,z,w,F;z=(z=this.annotations)&&z.resetScale;e&&(z&&(this.scaleText=1),this.scaleText*=m,this.scaleImageX*=p,this.scaleImageY*=m,0!==l(a.autoscale,b.autoscale)&&
(p=l(a.origw,b.origw),m=l(a.origh,b.origh),p=e.config.width/p,m=e.config.height/m,e=0!==l(a.constrainedscale,b.constrainedscale),z=p<m?p:m,w=e?z:p,F=e?z:m,this.scaleValue=X.prototype.scaleValue*z,this.scaleValueComplement=X.prototype.scaleValueComplement*(e?z:p<m?m:p),this.scaleX=X.prototype.scaleX*w,this.scaleY=X.prototype.scaleX*F,c.xs*=w,c.ys*=F,k*=w,t*=F,"1"==g(a.scaletext,b.scaletext)&&(this.scaleText=X.prototype.scaleText*F),"1"==g(a.scaleimages,b.scaleimages)&&(this.scaleImageX=X.prototype.scaleImageX*
w,this.scaleImageY=X.prototype.scaleImageY*F)),c.x=R(g(a.x,a.xpos),k,0,h,this.isBelow).value+l(a.grpxshift,b.grpxshift,0),c.y=R(g(a.y,a.ypos),t,0,h,this.isBelow).value+l(a.grpyshift,b.grpyshift,0),this.xshift=l(a.xshift,b.xshift,0),this.yshift=l(a.yshift,b.yshift,0))};X.prototype.draw=function(){var a=this.getRenderer(),b=this.options,c=this.bounds,h=this.items,e=a&&a.graphics,g,k=this.wrapper,t,p=[],m,z,w=this.chart,F=w&&w.config||{},w=F.annRenderDelay,F=F.resize,n=function(){m=0;for(z=p.length;m<
z;m++)t=p[m],t.draw()},r=(g=this.annotations)&&g.resetScale;if(a){a.annotationRelativeLayer&&"axis"===a.annotationRelativeLayer?(g=e.axisTopGroup||e.datasetGroup,e=e.axisBottomGroup||e.datasetGroup):g=e=e.datasetGroup;k||(this.wrapper=k=a.components.paper.group("annotations"),g&&e&&(this.isBelow?k.insertBefore(e):k.insertAfter(a.graphics.datalabelsGroup||g)));r&&this.wrapper.attr({transform:""});this.wrapper.attr({x:0,y:0,visibility:l(b.visible,1)?"":"hidden"}).translate(c.x,c.y);m=0;for(z=h.length;m<
z;m+=1)t=h[m],t.scale(!0),t.queueDraw?t.queue():(p.push(t),t.setup());w&&!F?setTimeout(function(){n()},w):n();return this}};X.prototype.destroy=function(){for(var a=this.wrapper,b=this.items,c;c=b.shift();)c.destroy();a&&(this.wrapper=a.remove());this._idstore[this._id]===this&&delete this._idstore[this._id]};X.prototype.addItem=function(a,b,c){var e=this.items,g=this._idstore;this.chart=c;e.push(a=new h(a,this,g));b&&null!==this.getRenderer()&&(a.scale(),a.setup(),a.draw());return a};X.prototype.removeItem=
function(a){for(var b=this.items,c=b.length;c--;)if(a===b[c]._id)return b.splice(c,1)};X.prototype.getRenderer=function(){return this.annotations&&this.annotations.getRenderer()||null};h=function(a,b){var c=!1,e;this.options=a;this.chart=(this.group=b)&&b.chart;this.args=[];this.attrs={};this.attrsTracker={};this.style={};this.bounds={};this._idstore=b._idstore;a.id&&(this._id=a.id,b._idstore[a.id]=this);this.type=a.type&&a.type.toLowerCase&&a.type.toLowerCase();for(e in h.eventNames)"function"===
typeof a[e]&&(this[e]=a[e],c=!0);this.hasEvents=c;"function"===typeof a.onload&&(this.onload=a.onload)};b.extend(h.prototype,{getAbsoluteBounds:function(){var a=this.bounds,b=a.x1,c=a.y1,h=a.x2,e=a.y2,g=U(b,h),l=U(c,e),b=N(b,h)-g,c=N(c,e)-l;return{x:g,width:b,y:l,height:c,r:a.r,unscaled:{width:b/a.xs,height:c/a.ys}}},queue:function(){this.group.annotations.shapesToDraw.push(this)},scale:function(a){var b=this,c=b.group,e=c.bounds,k=b.bounds,t=b.options,p=c.snaps,m=g(t.x,t.xpos),z=g(t.y,t.ypos),w=
g(t.tox,t.toxpos),F=g(t.toy,t.toypos),n=k.xs=e.xs,e=k.ys=e.ys,r=l(t.xshift,c.xshift,0),B=l(t.yshift,c.yshift,0),K;K=function(h,e,g,l){h=R(h,e,g,l,c.isBelow);h.hasDynamicMacros&&a&&(b.queueDraw=!0);return h.value};b.hasDimension=!0;b.hasDimensionX=!0;b.hasDimensionY=!0;k.x1=K(m,n,0,p)+r;void 0===w?(b.hasDimension=!1,b.hasDimensionX=!1,k.x2=k.x1):k.x2=K(w,n,0,p)+r;k.y1=K(z,e,0,p)+B;void 0===F?(b.hasDimension=!1,b.hasDimensionY=!1,k.y2=k.y1):k.y2=K(F,e,0,p)+B;h.angularShapeTypes[b.type]&&(k.angles=S(K(t.startangle,
1,0,p),K(t.endangle,1,360,p)));k.r=K(t.radius,c.scaleValue,0,p)},setup:function(){var a=this.options,b=this.group,c=b.options,k=this.attrs,t=this.style,p=b.scaleValue,m=l(c.fillalpha,c.alpha,100),z=this.fillAlpha=g(a.fillalpha,a.alpha,m),w=this.fillColor=g(a.fillcolor,a.color,c.color),F=this.fillPattern=g(a.fillpattern&&a.fillpattern.toLowerCase&&a.fillpattern.toLowerCase(),c.fillpattern&&c.fillpattern.toLowerCase&&c.fillpattern.toLowerCase()),n=this.bordered=l(a.showborder,h.borderedShapeTypes[this.type],
!!e(a.bordercolor)),r=this.borderColor=g(a.bordercolor,c.bordercolor,w),m=this.borderAlpha=l(a.borderalpha,a.alpha,c.borderalpha,m),K=this.dashed=!!l(a.dashed,0),q=l(a.borderthickness,a.thickness,2)*p;this.link=g(a.link,c.link);this.shadow="1"==g(a.showshadow,c.showshadow);void 0===w&&(w=h.borderedShapeTypes[this.type]&&"none"||"#ff0000",void 0===r&&(r="#ff0000"));n&&q?(k.stroke=B(r,m),k["stroke-linecap"]="round",k["stroke-width"]=q,K&&(k["stroke-dasharray"]=[l(a.dashlen,5)*p,l(a.dashgap,3)*p])):
k.stroke="none";this.fillOptions={gradientUnits:"objectBoundingBox",color:w,alpha:z,ratio:g(a.fillratio,c.fillratio),angle:360-l(a.fillangle,0),radialGradient:"radial"===F};this.link&&(t.cursor="pointer",t._cursor="hand");k.visibility=l(a.visible,1)?"":"hidden";this.useTracker=b.useTracker;this.toolText=V(g(a.tooltext,c.tooltext));if(this.useTracker||this.link||this.toolText)L(this.attrsTracker,{stroke:M,fill:M}),this.link&&(this.attrsTracker.ishot=+new Date);this.raiseOwnEvents=b.raiseOwnEvents},
draw:function(){var a=this.getRenderer(),b=this.type,c=this.attrs,e=this.style,g=a&&a.components.paper,l=h.types[b]&&h.types[b].call&&h.types[b].call(this,a),k=h.imageShapeTypes[l],t=h.textShapeTypes[l],p=k||t||h.trackerShapeTypes[l],m=this.link||this.toolText,z=this.wrapper,b=this.tracker,w=a&&a.graphics.trackerGroup||this.group.wrapper,F=!1,n=b||z,r=h.eventNames,K=h.ownEvents,B,q;if(a){if(l){if(z)if(z.elemType!==l){if(this.ownEventsAttached){for(q in K)n["un"+q].apply(z,K[q]);this.ownEventsAttached=
!1}z=z.remove()}else if(this.hasEvents)for(B in r)(q=this[B])&&q.eventAttached&&(u(n.node,r[B],q),q.eventAttached=!1);k||(c.fill=P(this.fillOptions));z?z.attr(c).css(e):(this.args.push(this.group.wrapper),z=this.wrapper="text"===l?g[l].call(g,c,e,this.group.wrapper):g[l].apply(g,this.args).attr(c).css(e),z.elemType=l,z.data("annotation",this),F=!0,this.args.pop());!this.shadow||this.shadowAdded||k||t?z.shadow(this.shadowAdded=!1):z.shadow(this.shadowAdded=!0,N(this.borderAlpha,this.fillOptions.alpha)/
100);m?this.useTracker&&(b||(this.args.push(w),b=this.tracker=p?g.rect(0,0,0,0,0,w):g[l].apply(g,this.args),this.args.pop()),b.attr(c).attr(this.attrsTracker)):b&&(b=b.remove());n=b||z;if(this.raiseOwnEvents&&!this.ownEventsAttached){for(q in K)n[q].apply(z,K[q]);this.ownEventsAttached=!0}this.link&&n.click(a.linkedItems.linkClickFN,this);this.toolText&&(n.tooltip(this.toolText||""),this.group.wrapper.trackTooltip(!0));if(this.hasEvents)for(B in r)(q=this[B])&&!q.eventAttached&&(A(n.node,r[B],q,this),
q.eventAttached=!0);k||(b&&p&&(a=z.getBBox(),b.attr({x:a.x,y:a.y,width:a.width,height:a.height})),F&&this.onload&&this.onload(c))}return this}},destroy:function(){var a=this.wrapper,b=this.tracker,c=b||a,e=h.eventNames,g=h.ownEvents,l,k;if(a){if(this.ownEventsAttached){for(k in g)c["un"+k].apply(a,g[k]);this.ownEventsAttached=!1}if(this.hasEvents)for(l in e)(k=this[l])&&k.eventAttached&&(u(c.node,e[l],k),k.eventAttached=!1);b&&(this.tracker=b.remove());this.wrapper=a.remove()}this._idstore[this._id]===
this&&delete this._idstore[this._id]},getRenderer:function(){return this.group&&this.group.getRenderer()||null}});b.extend(h,{imageShapeTypes:{image:!0},angularShapeTypes:{circle:!0,arc:!0},textShapeTypes:{text:!0},trackerShapeTypes:{image:!0,text:!0},borderedShapeTypes:{path:!0,line:!0},eventNames:{onmouseover:a?"touchstart":"mouseover",onmouseout:"mouseout",onmousemove:a?"touchmove":"mousemove",onclick:"click"},ownEvents:{click:[function(a){w("annotationClick",this,a)}],hover:[function(a){w("annotationRollOver",
this,a)},function(a){w("annotationRollOut",this,a)}]},textAlignOptions:{left:"start",right:"end",center:"middle"},textVerticalAlignOptions:{top:"bottom",middle:"middle",bottom:"top"},textRotationOptions:{0:"0",1:"270",right:"90",cw:"90",left:"270",ccw:"270"},types:{rectangle:function(){var a=this.args,b=this.attrs,c=this.getAbsoluteBounds(),h=.5*c.width;c.r>h&&(c.r=h);a[0]=b.x=c.x;a[1]=b.y=c.y;a[2]=b.width=c.width;a[3]=b.height=c.height;a[4]=b.r=c.r;return"rect"},line:function(){var a=this.attrs,
b=this.bounds;this.args[0]=a.path=["M",b.x1,b.y1,"L",b.x2,b.y2];1===a["stroke-width"]&&(a["shape-rendering"]="crisp");a["stroke-width"]<q&&(this.attrsTracker["stroke-width"]=q);this.bordered&&this.dashed&&(this.attrsTracker["stroke-dasharray"]="solid");return"path"},path:function(){var a=this.attrs,b=this.bounds;this.args[0]=a.path=this.options.path;a.transform=["T",b.x1,b.y1,"S",b.xs,b.ys,b.x1,b.y1];1===a["stroke-width"]&&(a["shape-rendering"]="crisp");return"path"},polygon:function(){var a=this.args,
b=this.attrs,c=this.options,h=this.bounds,e=this.group,g=e.snaps;a[0]=R(c.sides,1,5,g,e.isBelow).value;a[1]=h.x1;a[2]=h.y1;a[3]=h.r;a[4]=R(c.startangle,1,0,g,e.isBelow).value;a[5]=0;b.polypath=a.slice(0);return"polypath"},circle:function(a){var b=this.args,c=this.attrs,h=this.options,e=this.bounds,l=a.config.width,t=a.config.height,p=this.group.scaleValueComplement,z=this.group.snaps,w=e.angles,F=this.group;a=e.r;g(h.radius)||(e.r=l<t?l*e.xs:t*e.ys,e.r=a=.3*e.r);h=R(h.yradius,p,a,z,F.isBelow).value;
this.fillPattern||(this.fillOptions.radialGradient=!0,this.fillPattern="radial");"radial"===this.fillPattern&&(this.fillOptions.cx=this.fillOptions.cy=.5);t=w.angle%360;if(!t&&a===h)return b[0]=c.cx=e.x1,b[1]=c.cy=e.y1,b[2]=c.r=e.r,"circle";t||(w.angle=0<w.angle?w.angle-.001:w.angle+.001,w.start=w.end-w.angle);t||t==w.angle||(t=360);l=w.start*m;w=w.end*m;t*=m;z=e.x1;F=e.y1;e=z+r(l)*a;p=F+E(l)*h;z+=r(w)*a;F+=E(w)*h;a=["M",e,p,"A",a,h,0,n(t)>=k?1:0,l<w?1:0,z,F,"Z"];b[0]=c.path=a;return"path"},arc:function(a){var b=
this.options,c=this.args,h=this.attrs,e=this.bounds,l=a.config.width;a=a.config.height;var k=this.group,t=k.scaleValue,p=e.angles;g(b.radius)||(e.r=l<a?l*e.xs:a*e.ys,e.r*=.3);e.innerR=R(b.innerradius,t,.8*e.r,this.group.snaps,k.isBelow).value;e.innerR>e.r&&(e.innerR+=e.r,e.r=e.innerR-e.r,e.innerR-=e.r);this.fillPattern||(this.fillOptions.radialGradient=!0,this.fillPattern="radial");"radial"===this.fillPattern&&(this.fillOptions.cx=this.fillOptions.cy=.5);c[0]=e.x1;c[1]=e.y1;c[2]=e.r;c[3]=e.innerR;
c[4]=p.end*m;c[5]=p.start*m;h.ringpath=c.slice(0);return"ringpath"},text:function(a){var b=this.args,c=this.style,e=this.attrs,k=this.group,t=this.bounds,p=this.options,m=this.getAbsoluteBounds(),z=g(p.align,k.options.textalign,"center").toLowerCase(),w=g(p.valign,k.options.textvalign,"middle").toLowerCase(),F=V(g(p.text,p.label)),n=a.linkedItems.smartLabel,r=l(p.wrap,k.options.wraptext,1),B,q,P=g(p.rotatetext,k.options.rotatetext,"0").toLowerCase(),P=h.textRotationOptions[P],R="0"!==P?"y":"x",u=
a.config.orphanStyles;a=L({},u.defaultStyle.style||{});u=k.id&&u[k.id.toLowerCase()]||Z;a=L(a,u.style);var u=parseFloat(a.fontSize),v=g(p.font,k.options.font,a.fontFamily),k=l(p.fontsize,k.options.fontsize,u)*k.scaleText;r&&(B=l(p.wrapwidth,this.hasDimensionX?m.width/t.xs:void 0),q=l(p.wrapheight,this.hasDimensionY?m.height/t.ys:void 0),B&&(B*=t.xs),q&&(q*=t.ys));c.fontFamily=v;c.fontWeight=l(p.bold,p.isbold,0)?"bold":"normal";l(p.italic,p.isitalic,0)&&(c.fontStyle="italic");p.bgcolor&&(!e["text-bound"]&&
(e["text-bound"]=[]),e["text-bound"][0]=T(p.bgcolor));p.bordercolor&&(!e["text-bound"]&&(e["text-bound"]=[]),e["text-bound"][1]=T(p.bordercolor),e["text-bound"][2]=l(p.borderthickness,1),e["text-bound"][3]=l(p.padding,1));p.fontcolor&&(e.fill=T(p.fontcolor),this.fillOptions&&(this.fillOptions.color=e.fill));c.fontSize=k+"px";k===u?c.lineHeight=a.lineHeight:K(c);e["text-anchor"]=h.textAlignOptions[z]||h.textAlignOptions.center;n.setStyle(c);c=n.getSmartText(F,B,q,!1);e["vertical-align"]=h.textVerticalAlignOptions[w]||
h.textVerticalAlignOptions.middle;e["text-anchor"]===h.textAlignOptions.left?m[R]+=l(p.leftmargin,0):e["text-anchor"]===h.textAlignOptions.center&&(m[R]+=.5*l(p.leftmargin,0));"0"!==P&&(e.rotation=[parseFloat(P),m.x,m.y]);b[0]=e.x=m.x;b[1]=e.y=m.y;b[2]=e.text=c.text;c.tooltext&&(e.title=c.tooltext);delete e.stroke;delete e["stroke-weight"];return"text"},image:function(a){var b=this,c=b.style,h=a.config.width,k=a.config.height;a=b.options;var t=b.attrs,m=b.args,z=e(a.url),w=b.group.scaleImageX*g(Number(a.xscale),
100)/100,F=b.group.scaleImageY*g(Number(a.yscale),100)/100,n=b.getAbsoluteBounds(),r={width:1,height:1},B;if(!z)return m[0]=t.x=n.x,m[1]=t.y=n.y,m[2]=t.width=n.width,m[3]=t.height=n.height,m[4]=t.r=n.r,"rect";B=new C.Image;B.onload=function(){r=p("none","top","left",100,0,h,k,B);delete r.x;delete r.y;r=L(r,{width:(b.hasDimensionX?n.unscaled.width:r.width)*w,height:(b.hasDimensionY?n.unscaled.height:r.height)*F});setTimeout(function(){var a,d,h;if(a=b.wrapper){a.attr(r);if(d=b.tracker)h=a.getBBox(),
d.attr({x:h.x,y:h.y,width:h.width,height:h.height});a.css({opacity:c.opacity=N(l(b.fillAlpha,b.borderAlpha),b.borderAlpha)/100})}b.onload&&b.onload(r)},0)};B.src=z;m[0]=t.src=z;m[1]=t.x=n.x;m[2]=t.y=n.y;m[3]=t.width=(b.hasDimensionX?n.unscaled.width:r.width)*w;m[4]=t.height=(b.hasDimensionY?n.unscaled.height:r.height)*F;c.opacity=N(l(b.fillAlpha,b.borderAlpha),b.borderAlpha)/100;delete t.stroke;delete t.fill;delete t["stroke-linecap"];return"image"}}});F=function(){this.groups=[];this._idstore={};
this._options={}};J.Annotations=F;b.extend(F.prototype,{reset:function(a,b,c){var h=this.groups,e,g;this.chart=c;this.clear();if(g=this.setSnapPoints()){e={};for(var l in g)switch(typeof g[l]){case "object":case "function":e["-$"+l]=e["$"+l]=e["+$"+l]=g[l];break;default:e["$"+l]=e["+$"+l]=g[l],e["-$"+l]=-1*g[l]}e=this._literals=e}b&&(this._options=b);if(a&&a.groups&&h)for(g=0;g<a.groups.length;g+=1)h.push(new X(a.groups[g],b,e,this._idstore,this,c)),h[g].chart=c},getRenderer:function(){return this._renderer},
addGroup:function(a){var b=this.getRenderer();this.groups.push(a=new X(a,this._options,this._literals,this._idstore,this,this.chart));b&&(a.setup(),a.scale(),a.draw());return a},addItem:function(a,h,c){var e,g=this.getRenderer();"string"===typeof a?e=this._idstore[a]:(c=h,h=a);if(e&&e.addItem){if(!g&&c){b.raiseWarning(this,"04031411430","run","Annotations~addItem()","Cannot draw the shapeif the group has not been drawn. Use Annotations~draw() to draw the group and pass the renderer to it.");return}a=
e.addItem(h,c)}else a=this.addGroup({}).addItem(h,c);return a},draw:function(a,b){var c=this.groups,h,e,g;if(c&&(this._renderer=a||this._renderer))for(this.resetScale=b,e=0,g=c.length;e<g;e++)h=c[e],h.setup(),h.scale(),h.draw()},clear:function(){var a=this.groups,b;if(a){for(;b=a.shift();)b.destroy();this.shapesToDraw=[]}},dispose:function(){var a;this.disposing=!0;this.clear();for(a in this)delete this[a];this.disposed=!0},hide:function(a){if(a=this._idstore[a])return a.attrs.visibility="hidden",
a.wrapper&&a.wrapper.hide(),a},show:function(a){if(a=this._idstore[a])return a.attrs.visibility="",a.wrapper&&a.wrapper.show(),a},update:function(a,b,c){a=this._idstore[a];var h;if(a&&b){if("object"===typeof b)for(h in b.id&&delete b.id,b.type&&delete b.type,b)a.options[(h+"").toLowerCase()]=b[h]+"";else a.options[(b+"").toLowerCase()]=c+"";a.wrapper&&(a.scale(),a.setup(),a.draw());return a}},destroy:function(a){var b=this._idstore[a],c=b.group;b&&"function"===typeof b.destroy&&(c&&c.removeItem(a),
b.destroy())},shapesToDraw:[],setSnapPoints:function(){var a=this.chart,b=a.config,c=a.components,h=c.legend,e=c.gradientLegend,g=c.caption.config,c=c.subCaption.config,l=g.width||0,k=c.width||0,t,p=this.datasetFunction.bind(a),m=this.xAxisFunction.bind(a),z=this.yAxisFunction.bind(a);"end"===g.align?(a=g.x-l,t=g.x-k):"start"===g.align?a=t=g.x:(a=g.x-l/2,t=g.x-k/2);h=b.gLegendEnabled?e.conf:h.config;return{canvasendx:b.canvasRight,canvasendy:b.canvasBottom,canvasheight:b.canvasHeight,canvasstartx:b.canvasLeft,
canvasstarty:b.canvasTop,canvaswidth:b.canvasWidth,canvascenterx:b.canvasCenterX||b.canvasLeft+(b.canvasRight-b.canvasLeft)/2,canvascentery:b.canvasCenterY||b.canvasTop+(b.canvasBottom-b.canvasTop)/2,chartcenterx:b.width/2,chartcentery:b.height/2,chartstartx:0,chartstarty:0,chartendx:b.width,chartendy:b.height,chartheight:b.height,chartwidth:b.width,chartleftmargin:b.marginLeft,chartrightmargin:b.marginRight,chartbottommargin:b.marginBottom,charttopmargin:b.marginTop,captionendx:a+g.width,captionendy:g.y+
g.height,captionheight:g.height,captionstartx:a,captionstarty:g.y,captionwidth:l,subcaptionendx:t+c.width,subcaptionendy:c.y+c.height,subcaptionheight:c.height,subcaptionstartx:t,subcaptionstarty:c.y,subcaptionwidth:k,legendendx:h.xPos+h.width,legendendy:h.yPos+h.height,legendheight:h.height,legendstartx:h.xPos,legendstarty:h.yPos,legendwidth:h.width,dataset:p,xaxis:m,yaxis:z,gaugestartx:b.gaugeStartX,gaugestarty:b.gaugeStartY,gaugeendx:b.gaugeEndX,gaugeendy:b.gaugeEndY,gaugecenterx:b.gaugeCenterX,
gaugecentery:b.gaugeCenterY,gaugestartangle:b.gaugeStartAngle,gaugeendangle:b.gaugeEndAngle,gaugeradius:b.gaugeRadius,plotwidth:b.plotWidth,plotsemiwidth:b.plotSemiWidth}},datasetFunction:function(a,b){var c=this.components.dataset,h,e,g,l,k;l=this.is3D;if(!c||!c.length)return 0;isNaN(a[0])?h=0:(h=Number(a[0]),a=a.slice(1));e=a[0];if("set"===e){isNaN(a[1])?(g=0,a=a.slice(1)):(g=Number(a[1]),a=a.slice(2));e=a[0];k=(g=c[h]&&c[h].components.data[g])&&(g.graphics.element||g.graphics.hotElement||g.graphics.upperBoxElem);
c=c[h]&&c[h].graphics.sharedAnchor;!k&&c&&g._polyPath&&(k=c.element.attr(g._polyPath));if(!k)return 0;l=b&&l?k._getBBox2():k.getBBox();g=z(e,l)}return g},xAxisFunction:function(a){var b=this.components&&this.components.xAxis&&this.components.xAxis[0],c,h;if(!b)return 0;h=a[0];if("label"===h){isNaN(a[1])?(c=0,a=a.slice(1)):(c=Number(a[1]),a=a.slice(2));h=a[0];a=b._getLabelElement(c);if(!a)return 0;a=a.getBBox();c=z(h,a)}return c},yAxisFunction:function(a){var b=this.components&&this.components.yAxis,
c,h;if(!b||!b.length)return 0;isNaN(a[0])?c=0:(c=Number(a[0]),a=a.slice(1));c=b[c];if(!c)return 0;b=a[0];if("label"===b){isNaN(a[1])?(h=0,a=a.slice(1)):(h=Number(a[1]),a=a.slice(2));b=a[0];a=c._getLabelElement(h);if(!a)return 0;a=a.getBBox();h=z(b,a)}return h}});b.core.addEventListener("beforeinitialize",function(a){"javascript"===a.sender.options.renderer&&(a.sender.annotations=new F)});b.core.addEventListener("disposed",function(a){a.sender.annotations&&a.sender.annotations.dispose()});b.addEventListener("internal.animationComplete",
function(a){a=a.sender;var b=a.annotations,c=b&&b.shapesToDraw,h=c&&c.length,e,g;a=a.apiInstance.config;var l=a.annRenderDelay,k=a.resize,t=(new Date).getTime(),p,m=function(){for(g=0;g<h;g++)e=c[g],e.draw()};if(h){for(g=0;g<h;g++)e=c[g],e.queueDraw=!1,e.scale(),e.setup();p=(new Date).getTime();l&&!k?setTimeout(function(){m();b.shapesToDraw=[]},l-(p-t)):(m(),b.shapesToDraw=[])}a.resize=!1});v.addEventListener("rendered",function(a,b){if("javascript"===b.renderer){var c=a.sender;c.apiInstance&&(c.apiInstance.showAnnotation||
(c.apiInstance.showAnnotation=function(){c.annotations.show.apply(c.annotations,arguments)}),c.apiInstance.hideAnnotation||(c.apiInstance.hideAnnotation=function(){c.annotations.hide.apply(c.annotations,arguments)}))}})}]);Q.register("module",["private","modules.renderer.jpegtopdf",function(){var b=this.window,v=b.btoa,J=b.atob;this.hcLib.JpegToPdf=function(b,H){var A=[],u=0,a=b||500,O=H||500,q,M,U;q=function(a){u+=a.length+1;A.push(a)};this.addImage=function(a){a=/base64,(.+?)$/g.exec(a);U=J(a[1])};
M=function(){var b=[],v,r;q("%PDF-1.7");b[1]=u;q("1 0 obj");q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");q("endobj");b[4]=u;q("4 0 obj");q("<< /Length 36>>");q("stream");q("q "+O+" 0 0 "+a+" 0 0 cm /Im3 Do Q");q("endstream");q("endobj");b[5]=u;q("5 0 obj");q("<</Type /Page /Parent 2 0 R /MediaBox [0 0 "+O+" "+a+"] /Contents [4 0 R ] /Resources <</ProcSet 1 0 R /Font <<>> /XObject <</Im3 3 0 R >> >> >>");q("endobj");b[3]=u;q("3 0 obj");q("<</Type /XObject /Subtype /Image /Width "+O+" /Height "+
a+" /ColorSpace /DeviceRGB /BitsPerComponent 8 /Filter /DCTDecode /Length "+U.length+">>");q("stream");q(U);q("endstream");q("endobj");b[2]=u;q("2 0 obj");q("<</Type /Pages /Kids [5 0 R ] /Count 1>>");q("endobj");b[6]=u;q("6 0 obj");q("<</Type /Catalog /Pages 2 0 R >>");q("endobj");v=u;q("xref");q("0 7");q("0000000000 65535 f ");for(r=1;6>=r;r++)q(("0000000000"+b[r]).slice(-10)+" 00000 n ");q("trailer");q("<</Size 7 /Root 6 0 R >>");q("startxref");q(v);q("%%EOF");return A.join("\n")};this.getDataUrl=
function(){return"data:application/pdf;base64,"+v(M())}}}]);Q.register("module",["private","modules.exporter.batch-export",function(){var b=this.window,v=this.hcLib,J=Math.max,C=b.Image,H=v.drawSvgOnCanvas,A=v.downloadCharts,u=v.browserDetails,a=v.pluckNumber,O=v.pluck,q=v.JpegToPdf,M=b.navigator.userAgent.match(/ (iPad|iPhone|iPod)/g),U=v.createExportActionOldString,N=v.createVersionNumberString,E=v.cacheAllImages,r=v.replaceImagesWithNonDataUrl,k=v.logCharts,m=v.DEFAULT_EXPORT_URL,n=v.DEFAULT_LOG_URL,
L=v.EXPORTACTION,g=v.EXPORTFORMAT,l=v.EXPORTMODE,B=v.LOGMODE;Q.batchExport=function(e){var v=e||{},p,T,K,t,Z,P=0,S=!1,z,R,w,F={exportTargetWindow:O(v.exportTargetWindow,M?"_blank":"_self"),exportAction:function(){var a;return v.exportAction&&"string"===typeof v.exportAction?(a=v.exportAction.toLowerCase(),0<=[L.DOWNLOAD,L.SAVE,L.DOWNLOADSAVE].indexOf(a)?a:L.DOWNLOAD):L.DOWNLOAD}(),exportFileName:O(v.exportFileName,"FusionCharts"),exportHandler:O(v.exportHandler,m),exportParameters:O(v.exportParameters,
""),exportFormat:O(v.exportFormat,g.PNG),exportCallback:O(v.exportCallback,""),exportAtClientSide:a(v.exportAtClientSide,1),exportMode:function(){var a;"undefined"!==typeof v.exportAtClientSide&&(a={1:l.AUTO,0:l.SERVER}[v.exportAtClientSide]);a=v.exportMode||a||l.AUTO;return a=a.toLowerCase()}(),logEnabled:a(v.logEnabled,0),logMode:function(){var a=v.logMode;return"undefined"!==typeof a&&"string"===typeof a&&a.toUpperCase()in B?B[a.toUpperCase()]:B.AUTO}(),logHandler:O(v.logHandler,n)};(function(){var a,
c;a=F.exportMode;c={};c[l.CLIENT]=1;c[l.AUTO]=0;c[l.SERVER]=0;F.exportatclientside=c[a]})();var X=F.exportFormat.toLowerCase(),h=0,d=0,f,c=b.document,D=Q.items,G=function(a){return a.match(/http:\/\/|https:\/\//)&&/(http:\/\/|https:\/\/)([^\/\:]*)/.exec(a)[2]&&b.location.hostname!==/(http:\/\/|https:\/\/)([^\/\:]*)/.exec(a)[2]?!1:!0},aa=function(c,d,b,h){var e=c,f=d;isNaN(e)&&(e=a(d,h)*(b/h));isNaN(f)&&(f=a(c,b)*(h/b));return{width:e,height:f}},Ra=function(a,c,d){var b,h;d=d||F.exportAction;b=F.exportAction;
h=U(F.exportAction);d=["exportfilename="+F.exportFileName,"exportformat="+F.exportFormat,"exportaction="+h,"exportactionnew="+b,"configuredexportaction="+d,"exportparameters="+F].join("|");b=!!F.logEnabled;F.logMode===B.CLIENT&&(b=!1);return{charttype:"combined",stream_type:a||"",stream:c||"",is_single_export:!1,is_full_version:!1,version:N(),user_time_zone:-(new Date).getTimezoneOffset(),log_enabled:b,parameters:d}},Ia=function(){return{chartType:"combined",isSingleExport:!1,isFullVersion:!1,exportAction:F.exportAction,
userTimeZone:-(new Date).getTimezoneOffset(),exportFileName:[F.exportFileName,F.exportFormat].join("."),exportFormat:F.exportFormat,version:N()}},sa=function(a){var c;c="undefined"!==typeof b.btoa&&("Chrome"===u.name||"Firefox"===u.name||"Edge"===u.name||"ie"===u.name);if(F.exportMode===l.CLIENT||F.exportMode===l.AUTO&&c){if(F.exportAction===L.DOWNLOAD||F.exportAction===L.DOWNLOADSAVE)c=F.exportMode===l.AUTO?Ra("IMAGE-DATA",a):null,A("url",a,F.exportFileName+"."+X,c,F);F.exportAction===L.SAVE||F.exportAction===
L.DOWNLOADSAVE?(c=F.exportAction,F.exportAction===L.DOWNLOADSAVE&&(F.exportAction=L.SAVE),c=Ra("IMAGE-DATA",a,c),F.paper={width:void 0,height:void 0},F.fusionCharts={},A(null,null,null,c,F),delete F.paper,delete F.fusioncharts,F.logMode===B.CLIENT&&k(Ia(),F)):F.logMode!==B.SERVER&&k(Ia(),F)}else c=Ra("IMAGE-DATA",a),F.paper={width:void 0,height:void 0},F.fusionCharts={},A(null,null,null,c,F),delete F.paper,delete F.fusioncharts,F.logMode===B.CLIENT&&k(Ia(),F)},wa=function(a){var c;H(a,K,this.x,this.y,
this.width,this.height,function(){--P;if(0===P&&S)switch(X){case "png":sa(K.toDataURL("image/png"));break;case "jpeg":sa(K.toDataURL("image/jpeg"));break;case "pdf":c=new q(h,d);c.addImage(K.toDataURL("image/jpeg"));sa(c.getDataUrl());break;default:sa(K.toDataURL("image/png"))}})};e=function(b){var e=v.background;K=c.createElement("canvas");K.id="newCanvas";K.width=d;K.height=h;K.style.border="1px solid black";t=K.getContext("2d");t.fillStyle=e&&e.bgColor||"#ffffff";t.fillRect(0,0,d,h);e&&e.bgImage&&
G(e.bgImage)?(R=new C,R.src=e.bgImage,R._userData=e,t.globalAlpha=a(e.bgImageAlpha,100)/100,R.onload=function(){var c=this._userData,d=a(c.bgImageX,0),h=a(c.bgImageY,0),e=aa(Number(c.bgImageWidth),Number(c.bgImageHeight),this.width,this.height),c=e.width,e=e.height;try{t.drawImage(this,d,h,c,e)}finally{t.globalAlpha=1,b()}},R.onerror=function(){b()}):b()};var ca=function(a,c){p=Q.items[a];Z=p.jsVars.instanceAPI.components.paper.toSVG(!0);Z=Z.replace(/NS\d+:/gi,"xlink:");Z=Z.replace(/(\sd\s*=\s*["'])[M\s\d\.]*(["'])/ig,
"$1M 0 0 L 0 0$2");Z=Z.replace(/(xlink:title\s*=\s*)['"].*["']/ig,"");P+=1;(function(){var a=Z;E(a,!1,function(){a=r(a);wa.call(c?c:p,a)})})()};if(u.hasCanvas){(function(){var a=v.charts,c,d,b,h;T=[];if(a)for(b in a)a.hasOwnProperty(b)&&(c=D[a[b].id])&&(d=a[b],h=aa(Number(d.width),Number(d.height),c.width,c.height),T.push({id:c.id,width:h.width,height:h.height,x:d.x,y:d.y}));else for(b in D)D.hasOwnProperty(b)&&(c=D[b],T.push({id:c.id,width:c.width,height:c.height}))})();f=0;for(z=T.length;f<z;f+=
1)w=T[f],w.x=a(w.x,5),w.y=a(w.y,h+5),w.height=a(w.height),w.width=a(w.width),h=J(h,w.y+w.height),d=J(d,w.x+w.width);h=v.imageHeight||h+5;d=v.imageWidth||d+5;e(function(){return function(){f=0;for(z=T.length;f<z;f+=1)w=T[f],f===z-1&&(S=!0),ca(w.id,w)}}())}}}]);Q.register("module",["private","modules.exporter.main",function(){var b=this,v=b.window,J=b.hcLib,C=J.extend2,H=J.EXPORTACTION,A=J.EXPORTMODE,u=J.EXPORTFORMAT,a=J.LOGMODE,O=J.BLANKSTRING,q=J.graphics.RGBtoHex,M=/\s\bx\b=['"][^'"]+?['"]/ig,U=
/\s\by\b=['"][^'"]+?['"]/ig,N=v.document,E=J.JpegToPdf,r=J.browserDetails;J.exportChart=function(k){var m=this,n=m.config,L=m.components,g=m.chartInstance,l=J.svgStrToDataUrl,B=J.createExportActionOldString,e=J.cacheAllImages,V=J.makeImageUrlsAbsolute,p=J.embedImagesWithNonDataURL,T=J.replaceImagesWithNonDataUrl,K=J.hasUndownloadableImage,t=J.downloadCharts,Z=J.logCharts,P=n.exportOption;k="object"===typeof k&&function(a){var c={},d;for(d in a)c[d.toLowerCase()]=a[d];return c}(k)||{};var S=C(C({},
P),k),z=(S.exportformat||u.PNG).toLowerCase(),R=S.exporthandler,w=S.exportaction,F=S.exporttargetwindow||O,X=S.exportfilename,h=S.exportparameters,d=S.exportcallback,f=S.exportwithimages,c=S.exportmode,D=S.logenabled,G=S.loghandler,aa=S.logmode,Ra,Ia,sa;if(!P||!P.enabled||!R)return!1;b.raiseEvent("beforeExport",S,g,void 0,function(){var k=g.id,P=n.caption,C=n.subcaption,qa=L.paper,va,ha,ra,ka=J.isCanvasElemSupported(),na={DOMId:k,height:qa.height,width:qa.width,fileName:X+"."+z,statusCode:void 0,
statusMessage:void 0,notice:void 0},da={exportAction:w,exportTargetWindow:F,exportCallback:d,fusionCharts:m,paper:qa,chartId:k,exportHandler:R,logEnabled:D,logMode:aa,logHandler:G},oa=J.createVersionNumberString,Y=function(c,d,b){var e,f;b=b||w;e=w;f=B(w);b=["exportfilename="+X,"exportformat="+z,"exportaction="+f,"exportactionnew="+e,"configuredexportaction="+b,"exportparameters="+h].join("|");e=!!D;aa===a.CLIENT&&(e=!1);return{charttype:g.chartType(),stream_type:c||"",stream:d||"",meta_bgColor:S.bgcolor||
"",meta_bgAlpha:S.bgalpha||"1",meta_DOMId:g.id,meta_width:qa.width||n.width,meta_height:qa.height||n.height,chart_caption:P,chart_sub_caption:C,is_single_export:!0,is_full_version:!1,version:oa(),user_time_zone:-(new Date).getTimezoneOffset(),log_enabled:e,parameters:b}},za=function(){var a=w;return{chartType:g.chartType(),chartCaption:P,chartSubCaption:C,isSingleExport:!0,isFullVersion:!1,exportAction:a,userTimeZone:-(new Date).getTimezoneOffset(),exportFileName:[X,z].join("."),exportFormat:z,version:oa()}},
fa=function(a){a=Y(u.SVG,a);t(null,null,null,a,da)},Aa=function(a){var c,d,b,h=K(a);r.hasCanvas&&"undefined"!==typeof v.btoa?(c=N.createElement("canvas"),c.width=qa.width,c.height=qa.height,a=p(a),ra=T(ra),h||z===u.SVG?(b=Y(u.SVG,a),t(null,null,null,b,da)):J.drawSvgOnCanvas(ra,c,0,0,qa.width,qa.height,function(){var a;switch(z){case u.PNG:a=c.toDataURL("image/png");break;case u.JPEG:a=c.toDataURL("image/jpeg");break;case u.PDF:d=new E(qa.height,qa.width);d.addImage(c.toDataURL("image/jpeg"));a=d.getDataUrl();
break;default:a=c.toDataURL("image/jpeg")}b=Y("IMAGE-DATA",a);t(null,null,null,b,da)})):fa(a)},ua=function(a,c,d){var b;b=N.createElement("canvas");b.width=qa.width;b.height=qa.height;J.drawSvgOnCanvas(ra,b,0,0,qa.width,qa.height,function(){switch(a){case u.PNG:c(a,b.toDataURL("image/png"),X,d);break;case u.JPEG:c(a,b.toDataURL("image/jpeg"),X,d);break;case u.PDF:c(a,b.toDataURL("image/jpeg"),X,d);break;default:c(a,b.toDataURL("image/jpeg"),X,d)}})},ia=function(a,c,d){z===u.SVG?(a=l(a),d(a,c)):(a=
function(a,b){d(b,c)},ua(z,a,c))},xa=function(a,c,d){var b;b=X+"."+z;z===u.SVG?(a=l(a),va=d===A.AUTO?Y("IMAGE-DATA",a):null,t("url",a,b,va,c)):(b=function(a,c,b,h){b=b+"."+a;a===u.PDF&&(a=new J.JpegToPdf(qa.height,qa.width),a.addImage(c),c=a.getDataUrl());va=d===A.AUTO?Y("IMAGE-DATA",c):null;t("url",c,b,va,h)},ua(z,b,c))},k=function(){var a=0;Ra=[];Ia.replace(/[^\r\n]+/g,function(c){Ra[a]=[];Ra[a]=c.split(",").map(function(a){return a.replace(/"/g,"")});a+=1})},ja=function(){return"data:application/vnd.ms-excel;base64,"+
function(a){return v.btoa(v.unescape(encodeURIComponent(a)))}("<html xmlns:o='urn:schemas-microsoft-com:office:office'xmlns:x='urn:schemas-microsoft-com:office:excel'xmlns='http://www.w3.org/TR/REC-html40'><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e</head><body>"+function(){var a,c,d,b,h,
e;if(!Ra.length)return"";d=0;for(e=Ra.length;d<e;d+=1)if(0===d){a="<thead valign='top'><tr>";b=0;for(h=Ra[d].length;b<h;b+=1)a+="<th>"+Ra[d][b]+"</th>";a+="</tr></thead>";c="<tbody>"}else{c+="<tr>";b=0;for(h=Ra[d].length;b<h;b+=1)c+="<td>"+Ra[d][b]+"</td>";c+="</tr>"}return"<table align='center' >"+a+(c+"</tbody>")+"</table>"}()+"</body></html>")},ya=function(a){b.raiseEvent("exportDataReady",a,g)},W=function(c){c===a.CLIENT&&Z(za(),da)};if("xls"===z){if("undefined"!==typeof v.btoa)Ia=g.getCSVData();
else return b.raiseEvent("exportCancelled",S,g),!1;ya();k();sa=ja();if(ka="undefined"!==typeof v.btoa&&("Chrome"===r.name||"Firefox"===r.name||"Edge"===r.name||"ie"===r.name)){if(w===H.DOWNLOAD||w===H.DOWNLOADSAVE)t("url",sa,X+"."+z,null,da),b.raiseEvent("exported",na,g);w===H.SAVE||w===H.DOWNLOADSAVE?(ka=w,w===H.DOWNLOADSAVE&&(w=H.SAVE),va=Y("IMAGE-DATA",sa,ka),t(null,null,null,va,da),W(aa)):aa!==a.SERVER&&Z(za(),da)}else va=Y("IMAGE-DATA",sa),t(null,null,null,va,da),W(aa)}else L.chartMenuBar&&L.chartMenuBar.group.attr("visibility",
"hidden"),ha=qa.toSVG(f),ra=qa.toSVG(f&&ka),L.chartMenuBar&&L.chartMenuBar.group.attr("visibility","visible"),ha=ha.replace(/(\sd\s*=\s*["'])[M\s\d\.]*(["'])/ig,"$1M 0 0 L 0 0$2"),ha=ha.replace(/NS\d+:/gi,"xlink:"),ra=ra.replace(/NS\d+:/gi,"xlink:"),ra=ra.replace(/(\sd\s*=\s*["'])[M\s\d\.]*(["'])/ig,"$1M 0 0 L 0 0$2"),ra=ra.replace(/(xlink:title\s*=\s*)['"].*["']/ig,""),ha=ha.replace(/[\w\-]+\=\"undefined\"/ig,""),ha=ha.replace(/(xlink:title\s*=\s*)['"].*["']/ig,""),ha=ha.replace(/rgba\(([^\)]+)\)/ig,
function(a,c){return"#"+new q(c.split(","))}),ha=ha.replace(/<svg[^>]+/i,function(a){a.match(/height/i)||!qa.height&&!n.height||(a+=' height="'+(qa.height||n.height)+'"');a.match(/width/i)||!qa.width&&!n.width||(a+=' width="'+(qa.width||n.width)+'"');return a}),ha=ha.replace(/(([\w]+\-)?opacity\s*=\s*)['"][\d\.]+e[\-\+][\d]+["']/ig,'$1"0.001"'),ha=ha.replace(/(([\w]+\-)?opacity\s*:\s*)[\d\.]+e[\-\+][\d]+/ig,"$10.001"),ha=ha.replace(/<text[^\>]+/ig,function(a){a=a.replace(/stroke\=[\"\']([a-z0-9\#]+)?[\"\']/ig,
"");a=a.replace(/stroke\s*\:\s*([a-z0-9\#]+)?;?/ig,"");a=a.replace(/stroke-width\=[\"\']([a-z0-9\#]+)?[\"\']/ig,"");a=a.replace(/stroke-width\s*\:\s*([a-z0-9\#]+)?;?/ig,"");a=a.replace(/stroke-opacity\=[\"\']([a-z0-9\#]+)?[\"\']/ig,"");a=a.replace(/stroke-opacity\s*\:\s*([a-z0-9\#]+)?;?/ig,"");a=a.replace(/(<text[^\>]+fill\=)([\"\'][^\"\']+[\"\'])([^\>]+)/ig,'$1$2 stroke=$2 stroke-width="0.2"$3');return a=a.replace(/(<text[^\>]+fill-opacity\=)([\"\'][^\"\']+[\"\'])([^\>]+)/ig,"$1$2 stroke-opacity=$2 $3")}),
ha=ha.replace(/<(\b[^<>s\s]+\b)[^\>]+?opacity\s*=\s*['"][^1][^\>]+?(\/>|>[\s\r\n]*?<\/\1>)/ig,function(a,c){var d=M.exec(a)||O,b=U.exec(a)||O;return a+"<"+c+d+b+' opacity="1" stroke-opacity="1" fill="#cccccc" stroke-width="0" r="0" height="0.5" width="0.5" d="M 0 0 L 1 1" />'}),ha=V(ha),ra=V(ra),ka=c===A.SERVER,e(ha,ka,function(){va=Y(u.SVG,ha);ya(va);va=null;var d,h="undefined"!==typeof v.btoa&&("Chrome"===r.name||"Firefox"===r.name||"Edge"===r.name||"ie"===r.name),e=K(ha);if((c===A.CLIENT||c===
A.AUTO&&!e)&&h){ra=T(ra);if(w===H.DOWNLOAD||w===H.DOWNLOADSAVE)xa(ra,da,c),b.raiseEvent("exported",na,g);w===H.SAVE||w===H.DOWNLOADSAVE?(d=w,w===H.DOWNLOADSAVE&&(w=H.SAVE),ia(ra,da,function(a,c){va=Y("IMAGE-DATA",a,d);t(null,null,null,va,c);W(aa)}),b.raiseEvent("exported",na,g)):aa!==a.SERVER&&Z(za(),da)}else c===A.AUTO?(Aa(ha),W(aa)):c===A.SERVER&&(fa(ha),W(aa))})},function(){b.raiseEvent("exportCancelled",S,g)})}}]);Q.register("module",["private","modules.renderer.js-component-toolbox",function(){function b(a){"number"===
typeof a&&(a="'"+a+"'");return a.split("").reduce(function(a,b){a=(a<<5)-a+b.charCodeAt(0);return a&a},0)}function v(a,b){var e;if(a.getBBox)return a;e=a.getBoundingClientRect();a.getBBox=function(){return{x:b.x,y:b.y,width:e.right-e.left,height:e.bottom-e.top,isArtificial:!0}};return a}function J(a,b,e){var g,l;for(g in a)l=a[g],void 0!==l&&null!==l&&(e?b[g]||(b[g]=l):b[g]=l)}function C(){this.pool={}}function H(a,b){var e,g,l;g=this.elemTypes={KEY_RECT:"rect",KEY_TEXT:"text",KEY_GROUP:"group",KEY_SCROLLER:"scoller",
KEY_BUTTON:"button",KEY_PATH:"path",KEY_DIV:"div"};l=this.cachedState={};e=this.actions={};e[g.KEY_DIV]=function(){return O.createElement("div")};e[g.KEY_RECT]=function(b){return a.paper.rect(b)};e[g.KEY_TEXT]=function(b){return a.paper.text(b)};e[g.KEY_GROUP]=function(b,e){return a.paper.group(b,e)};e[g.KEY_SCROLLER]=function(b,e,g,l,h,d,f){return a.paper.scroller(b,e,g,l,h,d,f)};e[g.KEY_BUTTON]=function(b,e,g,l,h,d){return a.paper.button(b,e,g,l,h,d)};e[g.KEY_PATH]=function(b,e){return a.paper.path(b,
e)};g=this.cache=l[b]||(l[b]={});this._hideRecursive(g.pool);g.initialized||(e=g.pool=(new C).pool,e._tmp=b,g.initialized=!0)}var A=this.hcLib,u=A.hasTouch,a=A.Raphael,O=this.window.document,q=A.graphics,M=q.convertColor,U=q.getLightColor,N=q.rawRGBtoHEX,E=A.pluckNumber,r=A.pluck,k={},m={},n={},L=A.extend2,g,l,B,e,V=function(){},p=A.BLANKSTRING,T=M("FFFFFF",0),K=0;g=function(a,b,e){return["M",a-e,b-e]};l=function(a,b,e){var g=e/4;return["M",a-3*g,b,"L",a-g,b+e,a+e,b-e]};B=function(){a.addSymbol("Internal_CB",
g);return{register:function(){var b,e,g;if(1===arguments.length){e=arguments[0];if(null==e||"object"!==typeof e)return;g=e}else if(1<arguments.length){b=arguments[0];e=arguments[1];if("string"!==typeof b||"function"!==typeof e)return;g={};g[b]=e}else return;for(b in g)e=g[b],{}.hasOwnProperty.call(g,b)&&a.addSymbol(b,e)}}}();H.prototype._hideRecursive=function(a){var b,e,g,l,k,p;if(a)for(b in a)for(e in g=a[b],g)if(l=g[e],l instanceof Array)for(k=0,p=l.length;k<p;k++)l[k].hide&&l[k].hide();else l.hide&&
l.hide()};H.prototype.isInitialized=function(){return this.initialized};H.prototype.getCreationStatus=function(){return this.newCreationDataFlag};H.prototype.emptyPool=function(a){a=this.cachedState[a]||{};a.pool&&(a.pool={})};H.prototype.hideRecursive=function(a){this._hideRecursive((this.cachedState[a]||{}).pool)};H.prototype.getKeys=function(){return this.elemTypes};H.prototype.getComponent=function(a,b,e,g){var l=this.cachedState[b||0]||{};b=l.pool;var k=b[a],p,m,n,h=this.actions,d=0;k||(k=b[a]=
{});return(m=k[e])&&!(m instanceof Array)||m instanceof Array&&0<m.length?function(){l.newCreationDataFlag=!1;return g?(n=m[d++])?n.show():m[d]=h[e].apply(l,arguments):m.show&&"function"===typeof m.show&&m.show()||m}:function(){l.newCreationDataFlag=!0;return g?(p=k[e]||(k[e]=[]),m=h[e].apply(l,arguments),p.push(m),m.show&&"function"===typeof m.show&&m.show()||m):k[e]=h[e].apply(l,arguments)}};e=function(a,e){function p(a,c){switch(a){case "click":return function(a){wa.push(A.dem.listen(c,"click",
function(c){c.target&&c.target.parentNode&&a.call(c.target)}))};case "hover":return function(a,d){wa.push(A.dem.listen(c,"pointerhover",function(c){c.target&&c.target.parentNode&&("start"===c.state?a:d).call(c.target)}))}}}function r(a){a=a||{};this.name=a.name;this.handler=a.handler||V;this.action=a.action&&a.action.toLowerCase()||"click";this.eventMap={};this.style={padding:"3px 8px",margin:"2px 0px",fontFamily:n.baseFontFamily,fontSize:n.baseFontSize+"px"};this.hoverOverStyle=a.hoverOverStyle||
{};this.hoverOutStyle=a.hoverOutStyle||{};J(a.style||{},this.style);this.node=this.subConRef=void 0}function z(a,c){var d=this,b,h;b=c&&c.top||0;var e=c&&c.left,f=c&&c.right;this.container=a;this.position=z.POSITION_BOTTOM;this.atomicLists=[];this.refContainers=[];this.parentListCon=void 0;this.hideFnIds=[];this.target=void 0;e&&f||(this.positionCalculation=!0);this.hoverOverStyle={background:"#333333",color:"#FFFFFF",cursor:"pointer"};this.hoverOutStyle={background:"#FFFFFF",color:"#000000"};this._defaultStyle=
{position:"absolute","z-index":50,top:void 0===b?"auto":b+"px",right:void 0===f?"auto":f+"px",left:void 0===e?"auto":e+"px",overflow:"hidden",background:"#ffffff",border:"1px solid #646464","box-shadow":"#999999 2px 2px 5px",padding:"5px 3px",display:"none"};b=this.container.style;for(h in this._defaultStyle)b[h]=this._defaultStyle[h];sa.linkedItems&&(sa.linkedItems.container.appendChild(this.container),h=p("hover",this.container),h(function(){d.show(this)},function(){d.hide(300,this)}))}function K(a){this.listContainer=
this.container=void 0;this.measurement=a}function w(a,c,d,b){this.symbol=a;this._id="TB_SYMBOL"+(d||0);this.node=void 0;this.pId=b;this.isPlaintext=c;this.conf={btnTextStyle:{"stroke-width":"1px",stroke:"none"}};this.evt={tooltext:void 0,click:V,hover:[V,V]}}function F(a,c,d,b){w.call(this,"Internal_CB");this._id="TB_CBSYMBOL"+(d||0);this.symbol="Internal_CB";this.text={plaintext:a,node:void 0,style:u};this.pId=b;this.checked=!!c;this.textNode=void 0;this.interPadding=3;this.pos={};this.regSymbolCmd=
void 0;this.checked?this.check():this.uncheck()}function q(a,c,d){w.call(this);this._id="TB_SCROLLER"+(c||0);this.pId=d;this.conf={};this.userConf=m;this.setConfiguaration(a);this.evt.scroll=V;return this}function h(a,c,d){var b;w.call(this,a,void 0,c,d);this.rawContextDefinitation=void 0;this.listContainerManager=(new K(this.position)).init(d);b=this.listContainerManager.getFirstContainer();this.evt.hover=[function(a){b.show(v(a.target||a.fromElement,a))},function(a){b.hide(300,a.target)}]}function d(a,
c){this.preId=a||0;this.id=void 0;this.symbolList=[];this.groupRect=void 0;this.pId=c;L(this.btnConfig={},k);L(this.groupConfig={},D)}function f(a,d){c[this.id="TB_MASTER"+a||b((new Date).getTime())]=this;this.toolbarRect=void 0;this.componentGroups=[];this.toolbarConfig=G;this.group=void 0;this.pId=d}var c={},D={hPadding:3,vPadding:3,borderRadius:2,fill:M("DBDBDB",100),borderColor:M("B2B1B1",100),borderThickness:1,offsetAdjustment:1,radius:1,spacing:6},G={hPadding:3,vPadding:3,borderRadius:0,fill:M("EBEBEB",
100),borderColor:M("D1D0D0",100),borderThickness:1,offsetAdjustment:1,radius:0},u={fontFamily:"Verdana,sans",fontSize:"12px",fill:void 0,fontStyle:"normal",fontWeight:"normal"},C,H,sa=e.chart,wa=sa.linkedItems.eventListeners||(sa.linkedItems.eventListeners=[]);H=e.graphics;C=e.components;r.prototype.updateName=function(a){this.name=a;this.node&&(this.node.innerHTML=a)};r.prototype.assignSubContainer=function(a){a instanceof z&&(this.subConRef=a)};r.prototype.stickIntoContainer=function(a,c){var d=
this.node=O.createElement("div"),b=this.style,h,e,f,g=this;d&&(d.ishot=!0);this.handler&&(this.eventMap[this.action]=this.handler);a.appendChild(d);d.innerHTML=this.name;e=d.style;for(h in b)e[h]=b[h];b=p("hover",d);p("click",d)(function(){g.handler&&((f=g.eventMap.click)&&f.apply(g,[sa]),c.hide())});b(function(){var a,c=d.style,b=g.hoverOverStyle;for(a in b)c[a]=b[a];g.subConRef&&g.subConRef.show(this)},function(){var a,c=d.style,b=g.hoverOutStyle;for(a in b)c[a]=b[a];g.subConRef&&g.subConRef.hide(300,
this)})};r.prototype.setStyle=function(a){J(a||{},this.style)};r.prototype.dispose=function(){var a=this.node;a&&a.remove&&a.remove();this.node=void 0};z.POSITION_TOP="top";z.POSITION_BOTTOM="bottom";z.prototype.addAtomicListItem=function(a){a instanceof r&&(this.atomicLists.push(a),a.stickIntoContainer(this.container,this))};z.prototype.show=function(a){var c=this.hideFnIds,d=sa.config.width,b=this.positionCalculation,e=0,f;this.target=this.target||a;for(f=c.length;e<f;e++)clearTimeout(c[e]);c.length=
0;(c=this.parentListCon)?(c.show(this.target),this.container.style.left=c.container.offsetLeft+c.container.offsetWidth+"px",this.container.style.top=c.container.offsetTop+this.target.offsetTop+"px"):(c=a&&a.nodeName&&"DIV"===a.nodeName.toUpperCase()?!0:!1,c||(a=a.getBBox(),b&&(this.container.style.display="block",b=this.container.offsetWidth,b+a.x>d?(this.container.style.left="auto",this.container.style.right=d-a.x-a.width+"px"):(this.container.style.left=a.x+"px",this.container.style.right="auto"),
this.container.style.display="none"),this.position===h.POSITION_BOTTOM?(d=a.isArtificial?.5:1.5,this.container.style.top=a.y+a.height*d+"px",this.container.style.bottom="auto"):(this.container.style.bottom=sa.config.height-a.y+"px",this.container.style.top="auto")));this.container.style.display="block"};z.prototype.hide=function(a){var c=this.container,d;(d=this.parentListCon)&&d.hide(300);this.hideFnIds.push(setTimeout(function(){c.style.display="none"},a))};z.prototype.dispose=function(){var a=
this.atomicLists,c=this.refContainers,d,b;d=this.hideFnIds.length=0;for(b=a.length;d<b;d++)a[d].dispose();d=a.length=0;for(b=c.length;d<b;d++)c[d].dispose();c.length=0};K.prototype.init=function(c){var d=a.getKeys();this.container||(c=a.getComponent("div0",c,d.KEY_DIV),(c=c())&&(c.innerHTML=""),this.container=new z(c,this.measurement));return this};K.prototype.getFirstContainer=function(){return this.container};K.prototype.appendAsList=function(a,c){var d=this,b,h=this.container.hoverOverStyle,e=
this.container.hoverOutStyle;(function na(a,c){var f,g=0,l,k,t,p,m,D,w,G;w=c?c:d.container;f=a instanceof Array?a:[a];for(l=f.length;g<l;g++){k=f[g];t=new r({hoverOverStyle:h,hoverOutStyle:e});for(p in k)t.name=p,m=k[p],t.action=m.action,t.setStyle(m.style),-1!==p.search(/^<[^<]+>$/)&&(t.hoverOverStyle={},t.hoverOutStyle={},m.handler=V),D=m.handler,"function"!==typeof D?G=na(D,new z(O.createElement("div"))):t.handler=m.handler;w.addAtomicListItem(t);G&&(G.parentListCon=w,w.refContainers.push(G),t.assignSubContainer(G));
G=void 0}return b=w})(a,c);return b};K.prototype.dispose=function(){this.container.dispose();this.container=void 0};w.prototype.registerSymbol=function(a){B.register(this.symbol,a)};w.prototype._setConfiguaration=function(a){this.conf?J(a,this.conf,!0):this.conf=a};w.prototype.attachEventHandlers=function(a,c){var d=this.evt,b=a.tooltext,h=a.click||V,e=a.hover,f=c&&c.click||V,g=this;b&&(d.tooltext=b);d.click="function"===typeof h?function(){f();h.apply(g,arguments)}:function(){var a=h.fn,c=h.context,
d=(h.args||[]).slice(0);h.hasOwnProperty("context")?d.push(g):c=g;[].push.apply(d,arguments);f();a.apply(c,d)};e&&e instanceof Array&&(d.hover=e);this.node&&this.node.tooltip(this.evt.tooltext).buttonclick(this.evt.click).hover(this.evt.hover[0],this.evt.hover[1]);return g};w.prototype.getLogicalSpace=function(){return{width:this.conf.width*(this.conf.scale||1),height:this.conf.height*(this.conf.scale||1)}};w.prototype.show=function(){var a=this.node;a&&a.css({display:"block"})};w.prototype.hide=
function(){var a=this.node;a&&a.css({display:"none"})};w.prototype.draw=function(c,d,b){var h=this.conf||{},e,f,g=a.getKeys(),l=sa.get("config","animationObj"),k=l.animObj,p=l.dummyObj,m=l.duration;this.isPlaintext?f=this.symbol:e=this.symbol;void 0!==b.idCount&&(this._id+=b.idCount);h.hoverFill=h.hoverFill?M(h.hoverFill):M(U(N(h.fill),80));b=this.node=a.getComponent(this._id,this.pId,g.KEY_BUTTON,!0)(c,d,f,e,{width:h.width*h.scale,height:h.height*h.scale,r:h.radius*h.scale,verticalPadding:h.symbolVPadding*
h.scale,horizontalPadding:h.symbolHPadding},b.parentLayer).labelcss(this.conf.btnTextStyle);b.attr({ishot:!0,fill:[h.fill,h.labelFill,h.symbolFill,h.hoverFill,!0],stroke:[h.stroke,h.symbolStroke],"stroke-width":[h.strokeWidth,h.symbolStrokeWidth]}).tooltip(this.evt.tooltext).buttonclick(this.evt.click).hover(this.evt.hover[0],this.evt.hover[1]);a.getCreationStatus()||(this.node.unclick(),this.node.animateWith(p,k,{"button-repaint":[c,d,h.width*h.scale,h.height*h.scale,h.radius*h.scale]},m,l.animType),
this.node.attr({"button-label":f,"button-padding":[h.symbolHPadding,h.symbolVPadding*h.scale]}),this.node.buttonclick(this.evt.click));b.getBBox=function(){return{x:c,y:d,width:h.width*h.scale,height:h.height*h.scale}};return b};w.prototype.dispose=function(){var a=this.node;a&&a.remove();this.node=void 0};F.prototype=Object.create(w.prototype);F.prototype.constructor=F;F.prototype.check=function(){var a=this.pos;this.checked=!0;this.regSymbolCmd=l;this.node&&(this.registerSymbol(this.regSymbolCmd),
this.node.attr({"button-repaint":[a.x,a.y,a.width,a.height,a.r]}))};F.prototype.uncheck=function(){var a=this.pos;this.checked=!1;this.regSymbolCmd=g;this.node&&(this.registerSymbol(this.regSymbolCmd),this.node.attr({"button-repaint":[a.x,a.y,a.width,a.height,a.r]}))};F.prototype.click=function(){this.checked?this.uncheck():this.check()};F.prototype.attachEventHandlers=function(a){var c=this;w.prototype.attachEventHandlers.apply(this,[a,{click:function(){c.click()}}])};F.prototype.getLogicalSpace=
function(){var a=sa.linkedItems.smartLabel,c=this.text.style,d;d=w.prototype.getLogicalSpace.apply(this,arguments);a.useEllipsesOnOverflow(sa.config.useEllipsesWhenOverflow);a.setStyle(c);a=a.getSmartText(this.text.plaintext);return{width:a.width+this.interPadding+d.width,height:Math.max(d.height,a.height)}};F.prototype.draw=function(c,d,b){var h,e=this.conf,f;f=sa.linkedItems.smartLabel;var g=C.colorManager,l=this.text.plaintext,k,p=a.getKeys();this.registerSymbol(this.regSymbolCmd);h=this.node=
w.prototype.draw.apply(this,arguments);this.pos={x:c,y:d,width:e.width,height:e.height,r:e.radius};k=this.text.style;k.fill=k.fill||"#"+g.getColor("baseFontColor");f.useEllipsesOnOverflow(sa.config.useEllipsesWhenOverflow);f.setStyle(k);f=f.getSmartText(l);h=h.getBBox();g=a.getComponent(this._id,this.pId,p.KEY_TEXT);this.textNode=g(b.parentLayer).attr({text:l,x:h.x+h.width+f.width/2+this.interPadding,y:h.y+h.height/2}).css(k);e=e.height>f.height?e.height:f.height;g=a.getComponent(this._id,this.pId,
p.KEY_RECT);return g(b.parentLayer).attr({height:e,width:h.width+f.width+this.interPadding,x:c,y:d,stroke:T})};F.prototype.dispose=function(){this.textNode&&this.textNode.remove();this.textNode=void 0;w.prototype.dispose.call(this)};q.prototype=Object.create(w.prototype);q.prototype.constructor=F;q.prototype.setConfiguaration=function(a){var c=C.colorManager;m.color||(m.color="#"+c.getColor("altHGridColor"));J(m,this.conf);J(a,this.conf)};q.prototype.getLogicalSpace=function(){var a=this.conf,c={};
J(m,c);J(c,a);return w.prototype.getLogicalSpace.call(this)};q.prototype.getDefaultLayer=function(){var c=a.getKeys();return a.getComponent(this._id,this.pId,c.KEY_GROUP)("scroll")};q.prototype.registerSymbol=void 0;q.prototype._setConfiguaration=function(){};q.prototype.attachEventHandlers=function(a){a&&a.scroll&&"function"===typeof a.scroll&&(this.evt.scroll=a.scroll);w.prototype.attachEventHandlers.apply(this,arguments);return this};q.prototype.draw=function(){var c,d,b,h,e,f,g,l,k,p,D,w,z,G,
n,F;n=this.conf;var r,K=a.getKeys(),B={},q=sa.get("config","animationObj"),u=q.animObj,R=q.dummyObj;b={};var P=q.duration;1===arguments.length?(n=arguments[0],c=n.x,d=n.y,g=n.parentLayer,e=!!n.sepLayer):(c=arguments[0],d=arguments[1],e=arguments[2],n&&e?J(e,n):e={},g=e.parentLayer,e=!!e.sepLayer);J(m,b);n.isHorizontal?delete b.width:delete b.height;J(b,n);d+=n.padding;b=n.height;h=n.width;f=n.isHorizontal;F=n.startPercent;l=n.scrollRatio;k=n.showButtons;p=n.displayFlat;D=n.fullCanvasWidth;w=n.windowedCanvasWidth;
z=n.color;G=n.roundEdges;B["scroll-repaint"]=[c,d,h,b];g=g?g:this.getDefaultLayer();r=a.getComponent(this._id,this.pId,K.KEY_RECT);g=e?r("scroll-child"):g;r=a.getComponent(this._id,this.pId,K.KEY_SCROLLER);this.node=r(c,d,h,b,f,{scrollPosition:n.scrollPosition||E(F,0),displayStyleFlat:p,showButtons:k},g).data("fullCanvasWidth",D).data("windowedCanvasWidth",w).attr({"scroll-ratio":l,fill:z,r:G&&2||0}).scroll(this.evt.scroll);a.getCreationStatus()||(this.node.undrag(),this.node.animateWith(R,u,B,P,
q.animType),this.node.attr({"scroll-display-style":p?"flat":"3d","scroll-position":n.scrollPosition||E(F,0)}).scroll(this.evt.scroll));return this.node};h.POSITION_TOP="top";h.POSITION_BOTTOM="bottom";h.prototype=Object.create(w.prototype);h.prototype.constructor=h;h.allNodes=[];h.prototype.getListRefernce=function(){return this.listContainerManager};h.prototype.attachEventHandler=function(a){var c=this.evt;if(a=a.tooltext)c.tooltext=a};h.prototype.getLogicalSpace=function(){var a=this.listContainerManager.getFirstContainer().atomicLists;
return a&&0===a.length?{width:0,height:0}:w.prototype.getLogicalSpace.call(this)};h.prototype.draw=function(){var a=this.listContainerManager.getFirstContainer().atomicLists;if(a&&0===a.length)return this.hide(),{getBBox:function(){return{width:0,height:0}}};a=w.prototype.draw.apply(this,arguments);h.allNodes.push(this.node);return a};h.prototype.dispose=function(){this.listContainerManager&&this.listContainerManager.dispose();this.listContainerManager=void 0;w.prototype.dispose.call(this)};d.prototype.addSymbol=
function(a,c){var d=this.symbolList;c?d.unshift(a):d.push(a)};d.prototype.setConfiguaration=function(a){var c=a.buttons;a=a.group;c&&J(c,this.btnConfig);a&&J(a,this.groupConfig)};d.prototype.draw=function(c,d,b){var h=this.preId,e=this.symbolList,f,g,l=this.groupConfig,k=this.btnConfig;f=k.reverseToolbarIcons;var p=d.x,m=d.y,D,w=0,z=0,G=Number.NEGATIVE_INFINITY;D=a.getKeys();h=this.id=h.toString()+b;H.toolbarGroup=H.toolbar||{};b=a.getComponent(this.id,this.pId,D.KEY_GROUP);c=b("toolbar-group"+h,
c).trackTooltip(!0);b=a.getComponent(this.id,this.pId,D.KEY_RECT);D=this.groupRect=b(c).attr({height:0,width:0,x:p,y:m});p+=l.hPadding;m+=l.vPadding;z+=l.hPadding;w+=l.vPadding;if(f)for(f=e.length-1;-1<f;f--)g=e[f],g._setConfiguaration(k),g=g.draw(p,m,{parentLayer:c}),g=g.getBBox(),G<g.height&&(G=g.height),p+=g.width+(g=k.spacing);else for(f=0,b=e.length;f<b;f++)g=e[f],g._setConfiguaration(k),g=g.draw(p,m,{parentLayer:c}),g=g.getBBox(),G<g.height&&(G=g.height),p+=g.width+(g=k.spacing);z+=p+l.hPadding-
d.x-g-l.offsetAdjustment;w+=G+l.vPadding+l.offsetAdjustment;isFinite(w)||(w=0);isFinite(z)||(z=0);D.attr({height:w,width:z}).attr({fill:l.fill,r:l.radius,stroke:l.borderColor,"stroke-width":l.borderThickness});g=D.getBBox();return{height:g.height,width:g.width}};d.prototype.getLogicalSpace=function(){var a=this.symbolList,c,d,b,h=0,e=0,f=Number.NEGATIVE_INFINITY,g=0;d=0;for(b=a.length;d<b;d++)c=a[d],c._setConfiguaration(this.btnConfig),c=c.getLogicalSpace(),e+=c.width+this.btnConfig.spacing,g+=c.width,
f=f<c.height?c.height:f;if(!g)return{width:0,height:0};f!==Number.NEGATIVE_INFINITY&&e&&(e-=this.btnConfig.spacing-2*this.groupConfig.hPadding-this.groupConfig.offsetAdjustment,h=f+2*this.groupConfig.vPadding+this.groupConfig.offsetAdjustment);return{width:e,height:h}};d.prototype.dispose=function(){for(var a=this.symbolList,c=0,d=a.length;c<d;c++)a[c].dispose();a.length=0;this.groupRect.remove()};f.prototype.getId=function(){return this.id};f.prototype.addComponent=function(a){this.componentGroups.push(a)};
f.prototype.draw=function(c,d,b,h){var e=this.componentGroups,f,g,l,k=this.toolbarConfig;l=this.id;var p=c,m,D,w=Number.NEGATIVE_INFINITY;m=a.getKeys();b=b||{};g=H.toolbar=b.parentGroup||H.toolbar||{};b=a.getComponent(this.id,this.pId,m.KEY_GROUP,!0);this.group=l=b(l,g);b=a.getComponent(this.id,this.pId,m.KEY_RECT,!0);m=this.toolbarRect=b(l).attr({height:0,width:0,x:p,y:d});p+=k.hPadding;d+=k.vPadding;b=0;for(g=e.length;b<g;b++)f=e[b],f.btnConfig.reverseToolbarIcons=E(h,f.btnConfig.reverseToolbarIcons),
D=f.groupConfig.spacing||1,f=f.draw(l,{x:p,y:d},b),p+=f.width+D,w=w>f.height?w:f.height;h=w;c=p-D-k.hPadding-c;isFinite(h)||(h=0);isFinite(c)||(c=0);m.attr({height:h+=2*k.vPadding,width:c+=2*k.hPadding}).attr({fill:k.fill,r:k.radius,stroke:k.borderColor,"stroke-width":k.borderThickness});return{height:h,width:c}};f.prototype.reverseDraw=function(a,c,d){this.draw(a,c,d,!0)};f.prototype.getLogicalSpace=function(){var a=this.componentGroups,c,d,b,h=c=0,e=Number.NEGATIVE_INFINITY,f,g=0;c=0;for(d=a.length;c<
d;c++)b=a[c],f=b.getLogicalSpace(),b=b.groupConfig.spacing||1,h+=f.width+b,g+=f.width,e=e<f.height?f.height:e;if(!g)return{width:0,height:0};h-=b-2*this.toolbarConfig.hPadding;c=e+2*this.toolbarConfig.vPadding;return{width:h,height:c}};f.prototype.dispose=function(){for(var c=this.componentGroups,d=0,b=c.length;d<b;d++)c[d].dispose();c.length=0;this.toolbarRect.remove();a.emptyPool(this.pId)};return{HorizontalToolbar:f,ComponentGroup:d,Symbol:w,CheckboxSymbol:F,Scroller:q,SymbolWithContext:h,getInstanceById:function(a){return c[a]}}};
Q.register("component",["toolbox","toolbox",{onceInitialized:!1,ALIGNMENT_HORIZONTAL:0,ALIGNMENT_VERTICAL:1,POSITION_TOP:0,POSITION_RIGHT:1,POSITION_BOTTOM:2,POSITION_LEFT:3,init:function(a){if(this.onceInitialized)return this.configure(),this._iCount;this._options=a;this._chart=a.chart;this._iCount=++K;this.configure();this.onceInitialized=!0;return this._iCount},configure:function(){var a,b,e=this._chart.jsonData.chart;k.scale=E(e.toolbarbuttonscale)||1.15;k.width=E(e.toolbarbuttonwidth,u?20:15);
k.height=E(e.toolbarbuttonheight,u?20:15);k.radius=E(e.toolbarbuttonradius,u?4:2);k.spacing=E(e.toolbarbuttonspacing,5);k.fill=M(r(e.toolbarbuttoncolor,"ffffff"));k.labelFill=M(r(e.toolbarlabelcolor,"cccccc"));k.symbolFill=M(r(e.toolbarsymbolcolor,"ffffff"));k.hoverFill=r(e.toolbarbuttonhovercolor);k.stroke=M(r(e.toolbarbuttonbordercolor,"bbbbbb"));k.symbolStroke=M(r(e.toolbarsymbolbordercolor,"9a9a9a"));k.strokeWidth=E(e.toolbarbuttonborderthickness,1);k.symbolStrokeWidth=E(e.toolbarsymbolborderthickness,
1);b=k.symbolPadding=E(e.toolbarsymbolpadding,5);k.symbolHPadding=E(e.toolbarsymbolhpadding,b);k.symbolVPadding=E(e.toolbarsymbolvpadding,b);k.reverseToolbarIcons=E(e.reversetoolbaricons,0);a=k.position=r(e.toolbarposition,"tr").toLowerCase();switch(a){case "tr":case "rt":case "top right":case "right top":a="tr";break;case "br":case "rb":case "bottom right":case "right bottom":a="br";break;case "tl":case "lt":case "top left":case "left top":a="tl";break;case "bl":case "lb":case "bottom left":case "left bottom":a=
"bl";break;default:a="tr"}b=k.hAlign="left"===(p+e.toolbarhalign).toLowerCase()?"l":a.charAt(1);a=k.vAlign="bottom"===(p+e.toolbarvalign).toLowerCase()?"b":a.charAt(0);k.hDirection=E(e.toolbarhdirection,"r"===b?-1:1);k.vDirection=E(e.toolbarvdirection,"b"===a?-1:1);k.vMargin=E(e.toolbarvmargin,6);k.hMargin=E(e.toolbarhmargin,10);e.toolbary&&e.toolbarx?(k.x=E(e.toolbarx),k.y=E(e.toolbary),delete k.spaceNotHardCoded):k.spaceNotHardCoded=!0;m.color=e.scrollcolor&&M(e.scrollcolor);m.padding=E(e.scrollpadding,
0);m.height=E(e.scrollheight,12);m.width=E(e.scrollwidth,12);m.displayFlat=E(e.flatscrollbars,0);m.scrollBar3DLighting=E(e.scrollbar3dlighting,1);m.startPercent=Math.min(1,Math.max(0,parseFloat(e.scrolltoend)||0));m.showButtons=!!E(e.scrollshowbuttons,1);m.buttonPadding=E(e.scrollbtnpadding,0);n.baseFontFamily=r(e.basefont,"Verdana,sans");n.baseFontSize=E(e.basefontsize,10);n.baseFontColor=r(e.basefontcolor,"595959")},getAPIInstances:function(a){var b={},g;g=this.componentPool=new H(this._chart.components,
this._iCount);g=e(g,this._options);switch(a){case this.ALIGNMENT_HORIZONTAL:b.Toolbar=g.HorizontalToolbar}b.ComponentGroup=g.ComponentGroup;b.Symbol=g.Symbol;b.Scroller=g.Scroller;b.SymbolWithContext=g.SymbolWithContext;b.SymbolStore=B;b.CheckboxSymbol=g.CheckboxSymbol;return b},getDefaultConfiguration:function(){return k},clean:function(){this.componentPool.hideRecursive(this._iCount)}}])}]);Q.register("module",["private","modules.renderer.js-base",function(){var b=this,v=b.hcLib,J=v.Raphael,C=J._availableAnimAttrs,
H="VML"===J.type,A=b.window,u=A.document,a=v.BLANKSTRING,O=v.HUNDREDSTRING,q=v.preDefStr,M=q.configStr,U=q.animationObjStr,N=q.NORMAL,E=q.BOLD,r=q.hiddenStr,k=q.visibleStr,m=q.ROUND,n=q.miterStr,L=v.EXPORTACTION,g=v.EXPORTFORMAT,l=v.EXPORTMODE,B=v.LOGMODE,e=q.POSITION_START,V=q.POSITION_TOP,p=q.POSITION_END,T=q.POSITION_BOTTOM,K=q.POSITION_MIDDLE,t=q.POINTER,Z=q.noneStr,P=q.SEVENTYSTRING,S=q.blackStr="AAAAAA",z=q.AUTOSTRING,R=v.parseConfiguration,w=v.componentConfigurer,F=v.BLANKSTRING,X=v.DEFAULT_EXPORT_URL,
h=v.DEFAULT_LOG_URL,d=v.pluck,f=v.getValidValue,c=v.pluckNumber,D=v.getFirstValue,G=v.parseUnsafeString,aa=v.extend2,Ra=v.getDashStyle,Ia=v.graphics.mapSymbolName,sa=v.regex.dropHash,wa=v.HASHSTRING,ca=A.Image,ma=v.setImageDisplayMode,qa=v.removeEvent,va=v.getPosition,ha=v.getMouseCoordinate,ra=v.addEvent,ka=8===A.document.documentMode?k:F,na=v.toRaphaelColor,da=Math,oa=da.min,Y=da.max,za=da.abs,fa=da.ceil,Aa=da.floor,ua=da.round,ia=da.sin,xa=da.cos,ja=Math.PI,ya=ja/2,W=2*ja,Ma=ja+ya,ea=v.getFirstColor,
ga=v.setLineHeight,la=v.pluckFontSize,Ca=v.graphics.getDarkColor,Ha=v.graphics.getLightColor,pa=v.graphics.convertColor,La=v.POSITION_CENTER,Ja=v.POSITION_RIGHT,Fa=v.POSITION_LEFT,ta=v.chartAPI,Ka=v.COMMASTRING,Ea=v.PXSTRING,Da=v.componentDispose,Ga,Na=A.navigator.userAgent.match(/ (iPad|iPhone|iPod)/g),Ua={left:e,right:p,center:K},Pa=v.each,Sa="rgba(255,0,0,"+(v.isIE?.002:1E-6)+")",ab=v.BGRATIOSTRING,Xa=v.graphics.getAngle,Za=v.NumberFormatter,bb=v.getLinkAction,eb=v.hasTouch=void 0!==u.documentElement.ontouchstart,
Va={1:E,0:N},Ya=function(a){a=a.replace("rgba(",F).split(",");return"#"+("000000"+(a[0]<<16|a[1]<<8|a[2]).toString(16)).slice(-6)},$a=!v.CREDIT_REGEX.test(A.location.hostname),Ta=v.chartPaletteStr={chart2D:{bgColor:"bgColor",bgAlpha:"bgAlpha",bgAngle:"bgAngle",bgRatio:"bgRatio",canvasBgColor:"canvasBgColor",canvasBaseColor:"canvasBaseColor",divLineColor:"divLineColor",legendBgColor:"legendBgColor",legendBorderColor:"legendBorderColor",toolTipbgColor:"toolTipbgColor",toolTipBorderColor:"toolTipBorderColor",
baseFontColor:"baseFontColor",anchorBgColor:"anchorBgColor"},chart3D:{bgColor:"bgColor3D",bgAlpha:"bgAlpha3D",bgAngle:"bgAngle3D",bgRatio:"bgRatio3D",canvasBgColor:"canvasBgColor3D",canvasBaseColor:"canvasBaseColor3D",divLineColor:"divLineColor3D",divLineAlpha:"divLineAlpha3D",legendBgColor:"legendBgColor3D",legendBorderColor:"legendBorderColor3D",toolTipbgColor:"toolTipbgColor3D",toolTipBorderColor:"toolTipBorderColor3D",baseFontColor:"baseFontColor3D",anchorBgColor:"anchorBgColor3D"}},kb=function(){var a=
{},c,d=function(){var h,e,f,g,l=0,k,p,t=parseInt(b.core.options.resizeTrackingInterval,10)||300,m={},D=function(){m.itemVar._containerOffsetW=m.parentEle.offsetWidth;m.itemVar._containerOffsetH=m.parentEle.offsetHeight},w;for(h in a)l+=1,e=a[h],f=e.jsVars,k=e.ref,!e.disposed&&(g=k&&k.parentNode)&&(p=k.style)&&(/\%/g.test(p.width)||/\%/g.test(p.height))?(k=g.offsetWidth,w=g.offsetHeight,!f.resizeLocked&&(k&&f._containerOffsetW!==k||w&&f._containerOffsetH!==w)&&(e.resizeTo&&e.resizeTo(),m.itemVar=f,
m.parentEle=g,setTimeout(D,1))):(delete a[h],--l);c=l?setTimeout(d,t):clearTimeout(c)};return function(h,e){var f=h.jsVars,g=e||h.ref&&h.ref.parentNode||{};f._containerOffsetW=g.parentNode.offsetWidth;f._containerOffsetH=g.parentNode.offsetHeight;a[h.id]=h;c||(c=setTimeout(d,parseInt(b.core.options.resizeTrackingInterval,10)||300))}}(),hb=v.schedular,ib=v.priorityList,ob={getExternalInterfaceMethods:function(){var a=ta[this.jsVars.type],a=a&&a.eiMethods,c="saveAsImage,print,exportChart,getXML,hasRendered,signature,cancelExport,getSVGString,lockResize,showChartMessage,drawCrossLine,",
d;if("string"===typeof a)c+=a+Ka;else if(void 0!==a||null!==a)for(d in a)c+=d+Ka;return c.substr(0,c.length-1)},drawOverlayButton:function(a){var c=this.jsVars,d=c.overlayButton,h,e;if(a&&a.show){d||(d=c.overlayButton=u.createElement("span"),v.dem.listen(d,"click",function(){b.raiseEvent("OverlayButtonClick",a,c.fcObj)}));for(h=a.message?a.message:"Back";d.firstChild;)d.removeChild(d.firstChild);d.appendChild(u.createTextNode(h));c.overlayButtonMessage=h;h={border:"1px solid "+(a.borderColor?a.borderColor.replace(sa,
wa):"#7f8975"),backgroundColor:a.bgColor?a.bgColor.replace(sa,wa):"#edefec",fontFamily:a.font?a.font:"Verdana,sans",color: true?a.fontColor:"49563a",fontSize:(a.fontSize?a.fontSize:"10")+Ea,padding:(a.padding?a.padding:"3")+Ea,fontWeight:0===parseInt(a.bold,10)?N:E,position:"absolute",top:"0",right:"0",_cursor:"hand",cursor:t};for(e in h)d.style[e]=h[e];c.hcObj.container.appendChild(d);c.overlayButtonActive=!0}else d&&(c.overlayButton=d.parentNode.removeChild(d),c.overlayButtonActive=!1,
delete c.overlayButtonMessage)},print:function(a){var c=this.apiInstance,d=aa({},a);if(c.config.isPrinting||!c.config.hasRendered)return!1;b.raiseEvent("BeforePrint",d,c.chartInstance,void 0,function(){var a=c.linkedItems.container,h=[],e=a.parentNode,f=u.body||u.getElementsByTagName("body")[0],g=f.childNodes,l,p,ba,t;c.config.isPrinting=!0;Pa(g,function(a,c){1==a.nodeType&&(h[c]=a.style.display,a.style.display="none")});if(!1!==d.hideButtons){p=c.components.chartMenuBar.componentGroups[0].symbolList;
t=0;for(l=p.length;t<l;t++)if((ba=p[t])instanceof c.components.toolBoxAPI.SymbolWithContext){ba=ba.getListRefernce().getFirstContainer();break}ba.container.style.display=Z}f.appendChild(c.linkedItems.container);A.print();setTimeout(function(){ba.container.style.display=k;e.appendChild(a);Pa(g,function(a,c){1==a.nodeType&&(a.style.display=h[c])});!1!==d.hideButtons&&(ba.container.style.display=k);c.config.isPrinting=!1;b.raiseEvent("PrintComplete",d,c.chartInstance)},1E3)},function(){b.raiseEvent("PrintCancelled",
d,c.chartInstance)})},exportChart:function(a){return v.exportChart.call(this.apiInstance,a)},getSVGString:function(a){var c=this,d=c.apiInstance,b=d.chartInstance.args.asyncRender,d=d.getJobList();if("function"===typeof a)d.eiMethods.push(hb.addJob(function(){a(c.jsVars&&c.jsVars.instanceAPI&&c.jsVars.instanceAPI.components&&c.jsVars.instanceAPI.components.paper&&c.jsVars.instanceAPI.components.paper.toSVG())},ib.postRender));else return b?"<svg></svg>":c.jsVars&&c.jsVars.instanceAPI&&c.jsVars.instanceAPI.components&&
c.jsVars.instanceAPI.components.paper&&c.jsVars.instanceAPI.components.paper.toSVG()},resize:function(){var a=this.jsVars,c=a.container;a.instanceAPI.config.elScroll=!1;a.instanceAPI&&a.instanceAPI.redraw?a.instanceAPI.redraw():v.createChart(a.fcObj,c,a.type,void 0,void 0,!1,!0);delete a.isResizing},lockResize:function(a){return"boolean"!==typeof a?!!this.jsVars.resizeLocked:this.jsVars.resizeLocked=a},showChartMessage:function(a,b,h,e){var f=this,g=f.jsVars,l=f.apiInstance,k=l.chartInstance,p=k.args.asyncRender,
k=k.options,t=l.getJobList(),m,D=function(){b&&l&&l.config.hasRendered?(l._show(),f.showMessage(a,m,h)):(l._hide(),l.setChartMessage(a,{_chartMessageStyle:m}),l.drawChartMessage())};!e&&(e={});m={fontFamily:d(e.font,k.baseChartMessageFont,"Verdana,sans"),fontSize:c(e.fontSize,k.baseChartMessageFontSize,10),color:d(e.color&&pa(e.color,e.alpha),k.baseChartMessageColor)};g.msgStore[a]&&(a=g.msgStore[a]);p?t.eiMethods.push(hb.addJob(D,ib.postRender)):D();return a},showMessage:function(a,c,d){var b=this.apiInstance,
h=b.config,e=b.components,f=b.graphics.messageGroup,g=e.chartMessage||(e.chartMessage={}),g=g.graphics||(g.graphics={}),l=e.paper,k=b.linkedItems.smartLabel,e=g.messageText,p=g.messageVeil,m=g.message,D=l.width,w=l.height;f?f.toFront():b.graphics.messageGroup=f=l.group("messageGroup");p||(p=g.messageVeil=l.rect(0,0,D,w,f).attr({fill:"rgba(0,0,0,0.2)",stroke:Z}));p.show().toFront().attr("cursor",d?t:"default")[d?"click":"unclick"](b._hideChartMessage,b);e||(e=g.messageText=l.text(D/2,w/2,F,f));m&&
m.hide();a=a||F;k.setStyle(c);a=k.getSmartText(a,D-(h.marginRight||0)-(h.marginLeft||0),w-(h.marginTop||0)-(h.marginBotton||0));e.attr({"font-size":c.fontSize,"font-family":c.fontFamily,fill:c.color,text:a.text,ishot:!0,cursor:d?t:"default","line-height":14})[d?"click":"unclick"](b._hideChartMessage,b).show().toFront()},signature:function(){return"FusionCharts/3.4.0 (XT)"},drawCrossLine:function(a){var c=this.apiInstance.components,c=c["datasetGroup_"+c.dataset[0].type];c.config.customHighlightFlag=
!0;c.drawTrendRegion&&c.drawTrendRegion();c._moveTrendRegion&&c._moveTrendRegion(a,void 0,!1)}};delete C.fill;delete C.stroke;b.core.options.resizeTrackingInterval=300;b.core.options.preventTrackResize=!1;b.core.options.SVGDefinitionURL="relative";v.createChart=function(h,e,f,g,I,l,k){var p=h.jsVars,t,m=ta[f||(f=h.chartType())],D=h.apiInstance,z=p.hasNativeMessage;l=h.options;var G=h.args,n=p.secondTimeRender,r;if(e.offsetWidth&&e.offsetHeight){e.FusionCharts=b.core.items[h.id];G.asyncRender=c(G.asyncRender,
1);/^\s*absolute\s*$/i.test(b.core.options.SVGDefinitionURL)&&(J._url=(J._g&&J._g.win||A).location.href.replace(/#.*?$/,a));r=function(a){var c={renderer:"javascript"},d=p.fcObj,f=d.width,I=d.height,l=p.overlayButton;z=p.hasNativeMessage;p.container=e;p.hcObj=a;p.width=e.offsetWidth;p.height=e.offsetHeight;p.instanceAPI=D;a.hasRendered&&p.overlayButtonActive&&l&&(l.innerHTML=F,l.appendChild(u.createTextNode(p.overlayButtonMessage)),a.container.appendChild(l));(/\%/g.test(f)||/\%/g.test(I))&&e&&e.parentNode&&
!b.core.options.preventTrackResize&&kb(d,e);if(g&&(g({success:a.hasRendered,ref:e,id:h.id}),a.hasRendered)){D.config.hasRendered=!0;if(!0===h.disposed)return;z||(d.__state.firstRenderNotified=!0,D.getJobList().postRender.push(hb.addJob(function(){v.raiseEvent("rendered",{renderer:"javascript"},d,[d.id])},ib.postRender)))}a.hasRendered&&p.previousDrawCount<p.drawCount&&(c.width=p.width,c.height=p.height,c.drawCount=p.drawCount,c.displayingMessage=z,c.renderer=d.options.renderer,v.raiseEvent("drawcomplete",
c,d,[d.id]),z||k||D.getJobList().postRender.push(hb.addJob(function(){d.__state&&!d.__state.firstRenderNotified&&v.raiseEvent("rendered",{renderer:"javascript"},d,[d.id]);b.raiseEvent("renderComplete",c,d)},ib.postRender)))};if(D&&D.inited)b.raiseEvent("internal.drawStart",{chartType:f,logicName:D.name,logicBase:D.base&&D.base.name,defaultSeriesType:D.defaultSeriesType},h),I=h.jsVars&&h.jsVars.themeObject&&h.jsVars.themeObject.getThemedJSONData()||h.getChartData(b.dataFormats.JSON,!0),t=I.data,D.config&&
D.config.hasChartMessage&&D._hideChartMessage(),D.jsonData=t,k||v.raiseEvent("dataloaded",{},h,[h.id]),D._removeWaitingJobs(),D.configure(),D._feedAxesRawData(),D._setCategories(),w(D),D.draw(),h.hasRendered()||D.setChartEvents(),r({hasRendered:!0,container:e});else if(D&&"base"===f)D.setChartMessage(I,h,e),D.drawChartMessage(),e.signature=function(){return"FusionCharts/3.4.0 (XT)"},b.renderer.notifyRender({success:!0,ref:e,id:h.id});else{D&&"base"===D.name&&"base"!==f&&(D.dispose(),D=void 0);D?D.config&&
D.config.hasChartMessage&&D._hideChartMessage():D=h.apiInstance=m?new ta(f):new ta("base");D.chartInstance=h;D.origRenderWidth=h.__state.renderedWidth;D.origRenderHeight=h.__state.renderedHeight;if("base"!==f){e.jsVars=h.jsVars;m=D.eiMethods;h.ref=e;p.type=f;b.extend(e,ob);if(m&&"string"!==typeof m)for(t in m)e[t]=m[t];v.raiseEvent("loaded",{type:f,renderer:"javascript"},h,[h.id])}if("base"===f)D.setChartMessage(I,h,e),D.drawChartMessage();else if(void 0!==I)"string"===typeof I&&(D.setChartMessage(I,
h,e),D.drawChartMessage(),z=p.hasNativeMessage=!0);else if(!D||!D.init||D&&"base"===D.name)h._chartMessageImageStyle={imageHAlign:d(G.typeNotSupportedMessageImageHAlign,l.baseChartMessageImageHAlign).toLowerCase(),imageVAlign:d(G.typeNotSupportedMessageImageVAlign,l.baseChartMessageImageVAlign).toLowerCase(),imageAlpha:c(G.typeNotSupportedMessageImageAlpha,l.baseChartMessageImageAlpha),imageScale:c(G.typeNotSupportedMessageImageScale,l.baseChartMessageImageScale)},h._chartMessageStyle={color:G.typeNotSupportedMessageColor||
l.baseChartMessageColor,fontFamily:G.typeNotSupportedMessageFont||l.baseChartMessageFont,fontSize:G.typeNotSupportedMessageFontSize||l.baseChartMessageFontSize},D.setChartMessage(l.typeNotSupportedMessage,h,e),D.drawChartMessage(),z=p.hasNativeMessage=!0;else if(p.message)D.setChartMessage(p.message,h,e),D.drawChartMessage(),z=p.hasNativeMessage=!0;else if(p.loadError)h._chartMessageImageStyle={imageHAlign:d(G.dataLoadErrorMessageImageHAlign,l.baseChartMessageImageHAlign).toLowerCase(),imageVAlign:d(G.dataLoadErrorMessageImageVAlign,
l.baseChartMessageImageVAlign).toLowerCase(),imageAlpha:c(G.dataLoadErrorMessageImageAlpha,l.baseChartMessageImageAlpha),imageScale:c(G.dataLoadErrorMessageImageScale,l.baseChartMessageImageScale)},h._chartMessageStyle={color:G.dataLoadErrorMessageColor||l.baseChartMessageColor,fontFamily:G.dataLoadErrorMessageFont||l.baseChartMessageFont,fontSize:G.dataLoadErrorMessageFontSize||l.baseChartMessageFontSize},D.setChartMessage(l.dataLoadErrorMessage,h,e),D.drawChartMessage(),z=p.hasNativeMessage=!0;
else if(p.stallLoad)h._chartMessageImageStyle={imageHAlign:d(G.dataLoadStartMessageImageHAlign,l.baseChartMessageImageHAlign).toLowerCase(),imageVAlign:d(G.dataLoadStartMessageImageVAlign,l.baseChartMessageImageVAlign).toLowerCase(),imageAlpha:c(G.dataLoadStartMessageImageAlpha,l.baseChartMessageImageAlpha),imageScale:c(G.dataLoadStartMessageImageScale,l.baseChartMessageImageScale)},h._chartMessageStyle={fontFamily:G.dataLoadStartMessageFont||l.baseChartMessageFont,fontSize:G.dataLoadStartMessageFontSize||
l.baseChartMessageFontSize,color:G.dataLoadStartMessageColor||l.baseChartMessageColor},D.setChartMessage(l.dataLoadStartMessage,h,e),D.drawChartMessage(),z=p.hasNativeMessage=!0,r({hasRendered:!0,container:e});else if("zoomscatter"!==f||u.createElement("canvas").getContext)if(b.raiseEvent("internal.drawStart",{chartType:f,logicName:D.name,logicBase:D.base&&D.base.name,defaultSeriesType:D.defaultSeriesType},h),I=h.jsVars&&h.jsVars.themeObject&&h.jsVars.themeObject.getThemedJSONData()||h.getChartData(b.dataFormats.JSON,
!0),t=I.data,I.error instanceof Error)h._chartMessageImageStyle={imageHAlign:d(G.dataInvalidMessageImageHAlign,l.baseChartMessageImageHAlign).toLowerCase(),imageVAlign:d(G.dataInvalidMessageImageVAlign,l.baseChartMessageImageVAlign).toLowerCase(),imageAlpha:c(G.dataInvalidMessageImageAlpha,l.baseChartMessageImageAlpha),imageScale:c(G.dataInvalidMessageImageScale,l.baseChartMessageImageScale)},h._chartMessageStyle={fontFamily:G.dataInvalidMessageFont||l.baseChartMessageFont,fontSize:G.dataInvalidMessageFontSize||
l.baseChartMessageFontSize,color:G.dataInvalidMessageColor||l.baseChartMessageColor},D.setChartMessage(l.dataInvalidMessage,h,e),D.drawChartMessage(),z=p.hasNativeMessage=!0,h.__state.dataReady=!1,k||b.raiseEvent("dataInvalid",{error:I.error},p.fcObj,void 0,function(){v.raiseEvent("dataxmlinvalid",{},h,[h.id])});else{k||v.raiseEvent("dataloaded",{},h,[h.id]);if(!0===D.chartInstance.disposed)return;G.asyncRender&&!n&&"base"!==f&&(D.setChartMessage(D.chartInstance.options.loadMessage,void 0,e),D.drawChartMessage(),
D.config.hasChartMessage=!1);D.init(e,t,h,r)}else h._chartMessageImageStyle={imageHAlign:d(G.browserNotSupportedMessageImageHAlign,l.baseChartMessageImageHAlign).toLowerCase(),imageVAlign:d(G.browserNotSupportedMessageImageVAlign,l.baseChartMessageImageVAlign).toLowerCase(),imageAlpha:c(G.browserNotSupportedMessageImageAlpha,l.baseChartMessageImageAlpha),imageScale:c(G.browserNotSupportedMessageImageScale,l.baseChartMessageImageScale)},h._chartMessageStyle={color:G.browserNotSupportedMessageColor||
l.baseChartMessageColor,fontFamily:G.browserNotSupportedMessageFont||l.baseChartMessageFont,fontSize:G.browserNotSupportedMessageFontSize||l.baseChartMessageFontSize},D.setChartMessage(d(G.browserNotSupportedMessage,l.browserNotSupportedMessage),h,e),D.drawChartMessage(),z=p.hasNativeMessage=!0}p.secondTimeRender=!0}};Q.register("component",["legend","legend",{customConfigFn:null,init:function(){this.graphics||(this.graphics={});this.item||(this.items=[]);this.components||(this.components={})},drawLegend:function(a,
d){var b,h,f,g=this.chart,l=g.config;b=g.components;var k=b.paper,t=this.config,m=this.graphics||(this.graphics={}),D=g.graphics.legendGroup,w;h=m.box;var z=m.caption,G,n=l.height-l.canvasBottom,r=l.canvasLeft,B=l.canvasWidth,q=t.chartMarginLeft||0,u=t.chartMarginRight||0,R=t.chartMarginBottom||0,aa=l.actionBarHeight||0,L=t.actualCanvasMarginLeft||0,P=l.actualCanvasMarginBottom||0,v=l.actualCanvasMarginRight||0,Z=t.alignLegendWithCanvas,E=l.height,T=l.canvasTop,S=t.width,X=t.height,A=l.borderWidth;
f=t.borderRadius;var C=t.backgroundColor,H=t.borderColor,z=t.borderWidth||0,Ra=t.legendPos,N=.5*z,ca=.5*z+2,Ia=c(t.padding,4),sa=.5*Ia,wa=t.scroll.enabled,ma=t.drawn,g=g.get(M,U),va=g.dummyObj,ra=g.animObj,ha=g.transposeAnimDuration,qa=g.animType,na,W,da,fa,ka,g=b.legendScrollBar,O=0,za=0,O=l.oriCanvasLeft,ia=l.oriTopSpace,za=l.oriBottomSpace,ja=b.tb,ua=b.toolBoxAPI.Scroller;Ra===Ja&&(t.align=Ja,t.verticalAlign=K,G=t.layout="vertical");G?(void 0===a&&(a=l.width-u-v-S-A),void 0===d&&(O=c(ia,T),za=
c(za,n),d=O+.5*(E-za-O-X)+(t.y||0))):(void 0===a&&(G=l.width-(q+L+(u+v)),G=Z?B-S:G-S,r=Z?c(O,r):q+L,a=r+G/2),void 0===d&&(d=E-X-P-R-aa));X=J.crispBound(a,d,S,X,z);a=X.x;d=X.y;S=X.width;X=X.height;ma?(t.xL&&(t.xL=oa(Y(t.xL,ca),l.width-t.width-ca)),t.yL&&(t.yL=oa(Y(t.yL,ca),l.height-t.height-ca)),D.show().animateWith(va,ra,{transform:["T",t.xL||a,t.yL||d]},ha,qa)):D.show().transform(["T",a,d]);t.xPos=a;t.yPos=d;D.attr({cursor:t.legendAllowDrag?"move":F});t.legendAllowDrag&&!t._dragEvtListenerBinded&&
(D.drag(function(a,c){var d=c[0],b=c[1];t.legendAllowDrag&&(fa=W+d,ka=da+b,fa=oa(Y(fa,ca),l.width-t.width-ca),ka=oa(Y(ka,ca),l.height-t.height-ca),D.transform("t"+fa+","+ka),t.xPos=t.xL=fa,t.yPos=t.yL=ka)},function(){t.legendAllowDrag&&(W=t.xL||t.xPos,da=t.yL||t.yPos)}),t._dragEvtListenerBinded=!0);ma={x:0,y:0,width:S,height:X,r:f,stroke:H,"stroke-width":z,fill:C||"none",ishot:t.legendAllowDrag};h?(h.animateWith(va,ra,{x:0,y:0,width:S,height:X,r:f},ha,qa),h.attr({stroke:H,"stroke-width":z,fill:C||
"none"})):h=m.box=k.rect(ma,D);ma=t.drawn=!0;h.shadow(t&&t.shadow);w=m.itemGroup||(m.itemGroup=k.group("item",D));wa?(h={isHorizontal:!1},f={scroll:function(a){w.transform(["T",0,(na-t.totalHeight)*a])},mousedown:function(a){a.preventDefault();a.stopPropagation()}},g=b.legendScrollBar,g||(b.legendScrollBar=g=(new ua(h,(ja.idCount||0)+1,ja.pId)).attachEventHandlers(f)),na=X-Ia,w.attr({"clip-rect":"0,"+sa+(","+S+","+na)}),b=(na+Ia)/t.totalHeight,g.draw(S-10+sa-z,N,{height:X-z,scrollRatio:b,startPercent:0,
color:t.legendScrollBgColor}),D.appendChild(g.node)):(g&&g.node&&g.node.hide(),w.attr({"clip-rect":null}),w.node&&w.node.removeAttribute("clip-path"));z=m.caption;if(t.title&&t.title.text!==F&&t.validLegendItem){switch(t.title.align){case e:wa=Ia;break;case p:wa=S-Ia-(wa?10:0);break;default:wa=.5*S}D.trackTooltip(!0);S=t.title.style;ma={text:t.title.text,title:t.title.originalText||F,x:wa,y:Ia,fill:t.title.style.color,direction:t.textDirection,"line-height":S.lineHeight,"vertical-align":V,"text-anchor":t.title.align};
Ia={"font-weight":S.fontWeight,"font-style":S.fontStyle,"font-family":S.fontFamily,"font-size":S.fontSize};z?(z.show().attr(ma),z.css(Ia)):z=m.caption=k.text(ma,Ia,w);z.tooltip(t.title.originalText)}else z&&z.hide();t.showLegend&&!1!==t.enabled?this._drawPointLegendItem():D.hide()},reverseLegendFn:function(){var a=this.components.items||[],c,d=[],b,h=0,e=this.config;for(c=a.length-1;0<=c;c--)a[c].configuration.mainDS?(b=c,d=d.concat(a.splice(b,h+1)),h=0):h++;d.length&&(e.orderReversed=!0,this.components.items=
d.slice(0))},_manageLegendPosition:function(a){var c=this.config,d=this.chart.hasSubDataset,b=c.legendPos,h=this.components.items;c.reversed?d?!c.orderReversed&&this.reverseLegendFn():h&&h.reverse():d&&c.orderReversed&&this.reverseLegendFn();return b===Ja?this._placeLegendBlockRight(a):this._placeLegendBlockBottom(a)},_placeLegendBlockBottom:function(d){var b=this.chart,h=this.components,e=b.config,f=v.TESTSTR,g=e.width,l=e.height,k=e.canvasLeft,t=e.width-(e.canvasRight||0),p=b.linkedItems.smartLabel,
m=this.config,D=m.chartMarginLeft,z=m.chartMarginRight,w=m.chartMarginTop,n=m.alignLegendWithCanvas,r=m.minimiseWrappingInLegend,B=m.legendScale,K=m.numColumns,q=m.padding,u=2*d,R=2*q,aa=R,L=m.title,P=L.padding,Z=parseInt(m.itemStyle.fontSize,10)||10,E=h.items||[],V=E.length,h=m.oriSymbolPadding,S=m.textPadding,T=m.legendPadding,X=e.canvasMarginRight,A=e.canvasMarginLeft,C=b.components.yAxis||[],b=C[0],C=C[1],b=b&&b.config||{},C=C&&C.config||{},H=b.nameMaxW,Ra=C.nameMaxW,N=b.name&&b.name.style||{},
J=C.name&&C.name.style||{},ca=b.axisName||F,Ia=C.axisName||F,sa=0,wa=0,M=0,ma=0,va=C=0,ra=0,ha=0,qa=[],na=!1,W=0,da=0,ka,O,za=b=e.canvasWidth-e.canvasMarginLeft-e.canvasMarginRight,ia;m.paddingBottom=e.height-e.canvasBottom;p.useEllipsesOnOverflow(e.useEllipsesWhenOverflow);p.setStyle(N);ma=p.getOriSize(ca);p.setStyle(J);J=p.getOriSize(Ia);Z+=1;0>=Z&&(Z=1);b-=R;h*=B;Z=oa(Z*B,b);0>=Z&&(h=Z=0);m.symbolWidth=Z;m.textPadding=4;m.legendHeight=e=Z+2*h;m.rowHeight=B=Y(parseInt(m.itemStyle.lineHeight,10)||
12,e);q=S+h+q;p.setStyle(m.itemStyle);N=p.getOriSize(f).height;f=T+m.borderWidth/2+1;f=oa(f,d-N-8);T=.05*B;if(ma||J)ka=c(ma.height,0)>c(J.height,0)?(ia=H)&&ma.width:(ia=Ra)&&J.width;b=n?b:g-(ka+w>l-d?2*ia+z+D+X+A:z+D+A+X);m.initialItemY=0;m.initialItemX=0;if(m.showLegend&&0!==V){for(g=0;g<V;g+=1)ka=E[g],l=ka.config||(ka.config={}),w=ka.configuration,ka=l.name=G(w.label),ka===a||0===w.enabled||!1===w.enabled?l.enabled=0:(l.enabled=1,M+=1,O=!0,ka=p.getOriSize(ka),sa=Y(sa,ka.width),va=Y(va,oa(ka.height,
u)),wa+=ka.width);m.validLegendItem=O;ma=wa/M;w=e+T+S+h+R;wa+=w*M;m.x=(k-D-t+z)/2;m.x=!n&&wa>za?0:m.x;if(O){ma+=w;sa+=w;0<K&&M<K&&(K=M);wa<=b&&(0>=K||K===M)?(K=M,C=wa/M,na=!0,va>B&&(ha=(va-B)/2,B=va)):0<K&&(C=b/K)>ma?C>sa&&(C=sa):b>sa&&(r||1.5*ma>sa)?(K=Aa(b/sa),M<K&&(K=M),C=sa):b>=2*ma?(K=Aa(b/ma),M<K&&(K=M),C=Aa(b/K),C>sa&&(C=sa)):(K=1,C=b);m.itemWidth=C;k=fa(C-w);0>k&&(h=k=S=0);m.symbolPadding=h;m.textPadding=S;m.width=C*K-T;L.oriText!==a&&(p.setStyle(L.style),ka=p.getSmartText(L.oriText,b,u),
L.text=ka.text,ka.tooltext&&(L.originalText=ka.tooltext),L=ka.width+R,m.width<L&&(m.initialItemX=(L-m.width)/2,m.width=L),m.initialItemY=ra=ka.height+P);p.setStyle(m.itemStyle);for(g=0;g<V;g+=1)if(ka=E[g],l=ka.config,0!==l.enabled){0===k&&(qa[da]=!0,l.name=a,P=1,L=parseInt(da/K,10),t=da%K,l._legendX=t*C,l._legendY=L*B+R,l._legendH=P*B,l._totalWidth=Z+h);if(na)ka=p.getOriSize(l.name),ka.height<B&&(l._legendTestY=(B-ka.height)/2),l._markerYGutter=ha,l._legendX=W,l._legendY=R,l._legendH=B,l._totalWidth=
Z+q+ka.width,W+=ka.width+w;else{ka=p.getSmartText(l.name,k,u);l.name=ka.text;for(ka.tooltext&&(l.originalText=ka.tooltext);!0===qa[da];)da+=1;L=ka.height/B;t=da;for(P=0;P<L;P+=1,t+=K)qa[t]=!0;ka.height<B&&(l._legendTestY=(B-ka.height)/2);L=parseInt(da/K,10);t=da%K;l._legendX=t*C;l._legendY=L*B+R;l._legendH=P*B;l._totalWidth=Z+q+ka.width}da++}p=na?1:fa(qa.length/K);m.height=m.totalHeight=aa+(p*B+ra);m.rowHeight=B;m.legendNumColumns=K;m.height-2*h>d?(m.height=d,d=m.scroll||(m.scroll={}),d.enabled=!0,
d.flatScrollBars=m.flatScrollBars,d.scrollBar3DLighting=m.scrollBar3DLighting,m.width=m.width+12>b?m.width:m.width+12):m.scroll.enabled=!1;f+=m.height;m.isActive=!0;m.enabled=!0}else m.enabled=!1,f=m.width=0}else f=0,m.height=0,m.width=0;return{bottom:f,right:0}},_placeLegendBlockRight:function(c){var d=this.config,b=this.components,h=this.chart,e=h.config,f=h.linkedItems.smartLabel,g=h.components.canvas.config.canvasBorderThickness||0,l=d.textPadding,h=d.title.padding,k=d.oriSymbolPadding,t=d.legendPadding,
p=d.legendScale,m=parseInt(d.itemStyle.fontSize,10),D=2*e.canvasHeight,w=0,z=2*d.padding,n=z,F={},r=!1,b=b.items||[],K=b.length,B,q,u,R=0;c-=z+t;m+=1;0>=m&&(m=1);k*=p;m=oa(m*p,c);0>=m&&(k=m=0);d.symbolPadding=k;d.symbolWidth=m;d.legendHeight=p=m+2*k;d.rowHeight=Y(parseInt(d.itemStyle.lineHeight,10)||12,p);g=t+d.borderWidth/2+g;q=c-p-t-l;0>q&&(q=0);f.useEllipsesOnOverflow(e.useEllipsesWhenOverflow);f.setStyle(d.itemStyle);if(d.showLegend&&0!==K){for(R=0;R<K;R+=1)B=b[R],e=B.config||(B.config={}),u=
B.configuration,B=e.name=G(u.label),e._legendX=0,e._legendY=n,0===u.enabled||!1===u.enabled||B===a?e.enabled=0:(e.enabled=1,r=!0,0===q?(n+=e._legendH=p,e.name=a,e._totalWidth=m+k):(B=f.getSmartText(B,q,D),e.name=B.text,B.tooltext&&(e.originalText=B.tooltext),B.height<p&&(e._legendTestY=(p-B.height)/2),e._totalWidth=m+k+l+B.width+t,n+=e._legendH=Y(B.height,p),w=Y(B.width,w)));(d.validLegendItem=r)?(d.itemWidth=w+p+t+l,d.width=d.itemWidth+z,d.title.oriText!==a&&(f.setStyle(d.title.style),B=f.getSmartText(d.title.oriText,
c,D),d.title.text=B.text,B.tooltext&&(d.title.originalText=B.tooltext),f=B.width+z,d.width<f&&(d.initialItemX=(f-d.width)/2,d.width=f),d.initialItemY=B.height+h,n+=d.initialItemY),d.height=d.totalHeight=n,g=oa(d.width+g,c),F.right=g+t,d.isActive=!0,d.enabled=!0):(d.enabled=!1,d.width=0,F.right=0)}else F.right=0,d.height=0,d.width=0;return F},postSpaceManager:function(){var a=this.config,c=this.chart.config.canvasHeight;a.legendPos===Ja&&(a.height>c?(a.height=c,a.scroll.enabled=!0,a.scroll.flatScrollBars=
a.flatScrollBars,a.scroll.scrollBar3DLighting=a.scrollBar3DLighting,a.width+=(a.scroll.scrollBarWidth=10)+(a.scroll.scrollBarPadding=2)):a.scroll.enabled=!1)},configure:function(){var b=this.chart,h=this.config,e=b.config,f=e.style,g=b.jsonData.chart||b.jsonData.map,l=b.components.colorManager,k=b.is3D?Ta.chart3D:Ta.chart2D,p,m,z=c(g.useroundedges,0);p=f.outCancolor;m=c(g.legendpadding,7);var w=d(g.legenditemfont,f.outCanfontFamily),n=c(g.legendiconscale,1),r=la(g.legenditemfontsize,f.fontSize),B=
d(g.legenditemfontcolor,p).replace(/^#?([a-f0-9]+)/ig,"#$1"),K=d(g.legendiconbgcolor),q=d(g.legendiconbordercolor),u=d(g.legendiconbgalpha,g.legendiconalpha,100),R=d(g.legendiconborderalpha,g.legendiconalpha,100),L=c(g.legendiconsides,4),aa=c(g.legendiconborderthickness),P=c(g.legendiconstartangle,45),v=ea(d(g.legenditemhoverfontcolor,B)),Z=Va[c(g.legenditemfontbold,0)]||F,f=la(g.legendcaptionfontsize,f.fontSize)+"px";h.isActive=!1;h.chartMarginTop=e.origMarginTop;h.chartMarginRight=e.origMarginRight;
h.chartMarginBottom=e.origMarginBottom;h.chartMarginLeft=e.origMarginLeft;h.showLegend=c(g.showlegend,!b.dontShowLegendByDefault,1);r+="px";h.legendPos=d(g.legendposition,b.legendposition,T).toLowerCase();h.numColumns=c(g.legendnumcolumns,0);h.xL=h.yL=0;if(0>=n||5<n)n=1;h.drawCustomLegendIcon=c(g.drawcustomlegendicon,0);h.customLegendConfig={bgColor:K,borderColor:q,bgAlpha:u,borderAlpha:R,borderThickness:aa,startAngle:P,sides:L};h.legendScale=n;h.legendPadding=m;h.oriSymbolPadding=3;h.textPadding=
4;h.alignLegendWithCanvas=c(g.alignlegendwithcanvas,1);h.itemStyle={color:pa(B),fontFamily:w,fontSize:r,fontWeight:Z};ga(h.itemStyle);h.itemHiddenStyle={fontFamily:w,fontSize:r,color:pa(d(g.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/ig,"#$1")),fontWeight:Z};ga(h.itemHiddenStyle);h.title.style={fontFamily:d(g.legendcaptionfont,w),fontSize:f,color:d(g.legendcaptionfontcolor,p).replace(/^#?([a-f0-9]+)/ig,"#$1"),fontWeight:Va[c(g.legendcaptionfontbold,1)]||F};h.title.align=Ua[g.legendcaptionalignment&&
g.legendcaptionalignment.toLowerCase()||Ua.center]||Ua.center;h.itemHoverStyle={color:pa(v.replace(/^#?([a-f0-9]+)/ig,"#$1"))};h.title.style["text-anchor"]=h.title.align;h.padding=4;e=d(g.legendbordercolor,l.getColor(k.legendBorderColor));p=c(g.legendborderalpha,100);m=c(g.legendbgalpha,100);h.backgroundColor=pa(d(g.legendbgcolor,l.getColor(k.legendBgColor)),m);h.borderColor=pa(e,p);h.borderWidth=c(g.legendborderthickness,!z||g.legendbordercolor?1:0);h.borderRadius=c(z,0);h.shadow=!!c(g.legendshadow,
1);h.symbol3DLighting=!!c(g.use3dlighting,g.useplotgradientcolor,1);h.shadow&&(h.shadow={enabled:h.shadow,opacity:Y(p,m)/100});h.reversed=!!c(g.reverselegend,0);h.style={padding:4};h.lineWidth=c(g.linethickness,2);(h.interactiveLegend=!1!==b.hasInteractiveLegend&&!!c(g.interactivelegend,1))?(h.interactiveLegend=!0,h.symbolStyle={_cursor:"hand",cursor:t}):(h.interactiveLegend=!1,h.itemStyle.cursor="default",h.itemHoverStyle.cursor="inherit");h.borderRadius=c(g.legendborderradius,z?3:0);h.legendAllowDrag=
!!c(g.legendallowdrag,0);h.title.text=h.title.oriText=G(D(g.legendcaption,a));h.legendScrollBgColor=ea(d(g.legendscrollbgcolor,g.scrollcolor,l.getColor("altHGridColor")));h.legendScrollBarColor=d(g.legendscrollbarcolor,e);h.legendScrollBtnColor=d(g.legendscrollbtncolor,e);h.minimiseWrappingInLegend=c(g.minimisewrappinginlegend,0);h.flatScrollBars=c(g.flatscrollbars,0);h.scrollBar3DLighting=c(g.scrollbar3dlighting,1);h.orderReversed=!1},_drawPointLegendItem:function(){var a=this,h=a.chart,f=h.hasSubDataset,
g=h.config,l=h.get(M,U),k=l.transposeAnimDuration,p=l.animType,m=l.dummyObj,l=l.animObj,D=h.components.dataset,z=h.components.paper,w=a.config,G=w.reversed,n=a.components.items||[],F=w.legendHeight,r=w.symbolPadding,B=w.symbolWidth,K=w.interactiveLegend,q=w.textPadding||2,u=c(w.padding,4),g=g.textDirection,R=w.itemHiddenStyle,L=w.itemStyle,aa=w.itemHoverStyle,P=w.lineWidth,Z=L.color,E=R&&R.color||"#CCCCCC",R=a.graphics,S=R.itemGroup,T=w.drawCustomLegendIcon,X=w.customLegendConfig,C,A,H,Ra,N,J,ca,
ma,Y,va,ra,qa,ka,W,da,fa,O,oa,za,ia,ja,ua,xa,ea,ya,Aa,ga,la,ta,Q=v.hashify,Ca=function(a){var c=this.data("legendItem"),d=c.configuration.datasetObj||c.dataset,d=d.getEventArgs?d.getEventArgs(c):{};a=ha(h.linkedItems.container,a);d.chartX=a.chartX;d.chartY=a.chartY;d.pageX=a.pageX;d.pageY=a.pageY;d.legendItemIndex=c.index;d.legendItemId=c.legendItemId;d.preventDefaults=function(){};b.raiseEvent("LegendItemClicked",d,h.chartInstance)},Da=function(a){var c=this.data("legendItem")||{},d=c.configuration.datasetObj||
c.dataset,e=this.data("interactive"),d=d.getEventArgs?d.getEventArgs(c):{};a=ha(h.chartInstance,a,h);var f=this.data("itemHoverStyle"),g=c.graphics&&c.graphics.legendItemText;!1!==c.dataset.visible&&e&&g&&g.attr({fill:f.color});d.chartX=a.chartX;d.chartY=a.chartY;d.pageX=a.pageX;d.pageY=a.pageY;d.legendItemIndex=c.index;d.legendItemId=c.legendItemId;b.raiseEvent("LegendItemRollover",d,h.chartInstance)},Ea=function(a){var c=this.data("legendItem")||{},d=c.configuration.datasetObj||c.dataset,e=this.data("interactive"),
d=d.getEventArgs?d.getEventArgs(c):{};a=ha(h.chartInstance,a,h);var f=!1!==c.dataset.visible,g=this.data("itemStyle"),l=c.graphics&&c.graphics.legendItemText;f&&e&&l&&l.attr({fill:g.color});d.chartX=a.chartX;d.chartY=a.chartY;d.pageX=a.pageX;d.pageY=a.pageY;d.legendItemIndex=c.index;d.legendItemId=c.legendItemId;b.raiseEvent("LegendItemRollout",d,h.chartInstance)},Ga=function(c){var d=this.data("legendItem"),b=d.dataset;this.data("interactive")&&d.legendClickFN.call(a,b,d,D);Ca.call(this,c)},Fa=function(){oa=
.5*B;O=ma+r+oa;Ra=Y+(da._markerYGutter||0)+r+oa;Ja&&(oa*=.6);la=Ia(ua.anchorSide);ia=ua.symbol=la&&la.split("_")||[];za="spoke"===ia[0]?1:0;Ka={polypath:[ia[1]||2,O,Ra,oa,ua.startAngle,ua.spoke||za]};Ta={cursor:L.cursor||t,stroke:H?xa:E,fill:H?ea:E,"stroke-width":ja,ishot:K}},Ma,Ta,La={},Ja,Ka,Na;C=w.initialItemX||0;A=w.initialItemY||0;if(!1!==w.enabled&&w.showLegend){S.css(L);ra=0;for(qa=n.length;ra<qa;ra+=1)w=n[ra],w.index=ra,ua=w.configuration,J=ua.type,da=w.config=w.config||(w.config={}),R=w.graphics||
(w.graphics={}),ka=w.dataset,ka.graphics&&(ka.graphics.legendGraphics=R),xa=da.strokeColor=ua.strokeColor||"000000",ea=da.fillColor=ua.fillColor||"000000",da.interactiveLegend=ua.interactiveLegend,da.legendBackgroundColor=ua.legendBackgroundColor?na({color:ua.legendBackgroundColor,alpha:20}):na(Sa),ya=ua.anchorSide,Aa=da.drawLine=ua.drawLine,P=ua.lineWidth||P,ga=ua.lineColor||xa,ma=C+da._legendX+u,Y=A+da._legendY-u,ja=da.strokeWidth=ua.strokeWidth||.5,va=da._legendH,H=!1!==ka.visible,ka=R.legendItemBackground,
N=R.legendItemText,W=R.legendItemLine,fa=R.legendItemSymbol,K=d(da.interactiveLegend,K),!K&&(L.cursor="default"),0!==da.enabled?(ta=ma+F+q-2,Na=Y+(da._legendTestY||0),ca={text:da.name,fill:H?Z:E,"text-anchor":e,"vertical-align":V,cursor:L.cursor||t,direction:g,"line-height":L.lineHeight},Ma=Ka=null,da.textAttr=ca,N?(N.show().animateWith(m,l,{x:ta,y:Na},k,p),N.attr(ca)):(ca.x=ta,ca.y=Na,N=R.legendItemText=z.text(ca,S).data("legendItem",da)),Ja=!1,T&&!1!==ua.customLegendIcon?(ta=X.borderColor,N=d(X.borderAlpha),
ga=X.bgColor,ca=d(X.bgAlpha,"100"),ya||"line"===J||Aa||"spline"===J?(J=Q(ua.rawStrokeColor),ua.rawFillColor=Q(ua.rawFillColor),ea=d(ga,ua.rawFillColor,da.color),/^#/.test(ea)&&(ea=pa(ea,ca)),ga=d(ta,J,da.strokeColor),ga=pa(ga,N),da.anchorSide=X.sides):(J=d(ua.rawFillColor,da.fillColor),ea=d(ga,J),ea=pa(ea,ca),X.borderColor?ga=pa(X.borderColor,N):(/rgb/.test(J)&&(J=Ya(J)),ga=Ha(J,60).replace(sa,wa),ga=pa(ga,N))),da.fillColor=ea,da.strokeColor=ga,oa=.5*B,O=ma+r+oa,Ra=Y+(da._markerYGutter||0)+r+oa,ia=
(la=Ia(X.sides))&&Ia(X.sides).split("_")||[],za="spoke"===ia[0]?1:0,Ka={polypath:[ia[1]||2,O,Ra,oa,X.startAngle,za]},Ta={cursor:L.cursor||t,stroke:H?ga:E,fill:H?ea:E,"stroke-width":c(X.borderThickness,1),ishot:K}):"line"===J||Aa?(Ra=Y+(da._markerYGutter||0)+r+.5*B,Ma={path:["M",ma+r,Ra,"L",ma+r+B,Ra]},Ja=!0,La={"stroke-width":P,stroke:H?ga:E,cursor:L.cursor||t,ishot:K},ya&&Fa()):ya?Fa():"line"!==J&&(fa=R.legendItemSymbol,J=a._getSymbolPath(ma+r,Y+(da._markerYGutter||0)+r,B,B,J),Ka={path:J.path},Ta=
{"stroke-width":.5,stroke:H?xa:E,fill:H?ea:E,cursor:L.cursor||t,ishot:K}),Ma&&Ja?(da.lineAttr=La,W||(W=R.legendItemLine=z.path(S),W.attr(Ma)),W.show().animateWith(m,l,Ma,k,p),W.attr(La).data("legendItem",da)):W&&W.hide(),Ka?(da.symbolAttr=Ta,fa||(fa=R.legendItemSymbol=z.polypath(S),fa.attr(Ka)),fa.show().animateWith(m,l,Ka,k,p),fa.attr(Ta),fa.data("legendItem",da)):fa&&fa.hide(),va={x:ma,y:Y,width:da._totalWidth,height:va},W={r:0,fill:da.legendBackgroundColor,"stroke-width":1,stroke:"none",cursor:L.cursor||
t,ishot:K},ka||(ka=R.legendItemBackground=z.rect(S),ka.attr(va).mouseover(Da).mouseout(Ea).click(Ga)),ka.show().animateWith(m,l,va,k,p),ka.attr(W),ka.data("legendItem",w).data("interactive",K).data("itemHoverStyle",aa).data("itemStyle",L)):(N&&N.hide(),ka&&ka.hide(),fa&&fa.hide(),W&&W.hide());!f&&G&&n.reverse()}},_getSymbolPath:function(a,c,d,b,h){var e=["M"],f,g,l;switch(h){case "column":case "dragcolumn":case "column3d":f=.25*d;h=.5*f;g=.7*b;l=.4*b;e=e.concat([a,c+b,"l",0,-g,f,0,0,g,"z","m",f+h,
0,"l",0,-b,f,0,0,b,"z","m",f+h,0,"l",0,-l,f,0,0,l,"z"]);break;case "bar2d":case "bar3d":f=.3*d;h=.6*d;g=b/4;l=g/2;e=e.concat([a,c,"L",a+h,c,a+h,c+g,a,c+g,"Z","M",a,c+g+l,"L",a+d,c+g+l,a+d,c+g+l+g,a,c+2*g+l,"Z","M",a,c+2*(g+l),"L",a+f,c+2*(g+l),a+f,c+b,a,c+b,"Z"]);break;case "area":case "area3d":case "areaspline":case "dragarea":g=.6*b;l=.2*b;h=.8*b;e=e.concat([a,c+h,"L",a,c+g,a+.3*d,c+l,a+.6*d,c+g,a+d,c+l,a+d,c+h,"Z"]);break;case "pie2d":case "pie3d":case "doughnut2d":case "doughnut3d":f=.5*d;h=.9*
f;d=a+f+1;b=c+f-1;a=a+f-1;c=c+f+1;e=e.concat(["M",d,b,"L",d,b-h+1,"A",h-1,h-1,0,0,1,d+h-1,b,"Z","M",a,c,"L",a,c-h,"A",h,h,0,1,0,a+h,c,"Z"]);break;case "boxandwhisker2d":e=e.concat([a,c,"L",a+d,c,a+d,c+b,a,c+b,"Z"]);break;default:e=e.concat([a,c,"L",a+d,c,a+d,c+b,a,c+b,"Z"])}return{path:e}},emptyItems:function(a,c){var d=this.components,b=d.items||(d.items=[]),h,e,d=void 0!==c?c:b.length,f=b.splice(a,d);a=0;for(d=f.length;a<d;a+=1)for(h in b=(f[a]||(f[a]={})).graphics,b)(e=b[h])&&e.remove&&"function"===
typeof e.remove&&e.remove()},removeItem:function(a){var c=this.getItems()||[],d,b,h,e=c.length;for(d=0;d<e;d++)if(b=c[d],h=b.legendItemId,a===h){Da.call(b);c.splice(d,1);break}},addItems:function(a,c,b){var h,e=this.components;h=this.lastItemId;var f=d(a.legendItemId,b.legendItemId),e=e.items||(e.items=[]);void 0!==f?(this.configureItems(f,{legendClickFN:c,configuration:b,dataset:a}),h=f):(void 0===h?this.lastItemId=h="FCLEGEND_0":(h=(h=h.split("_"))&&h[1],this.lastItemId=h="FCLEGEND_"+ ++h),e.push({legendItemId:h,
dataset:a,legendClickFN:c,configuration:b||{}}));return h},configureItems:function(a,c){var b=this.components.items,h,e,f=b.length,g,l;for(e=0;e<f&&(l=b[e],!l.dataset||(g=d(l.dataset.legendItemId,l.legendItemId),g!==a));e++);for(h in l)if(h in c)switch(h){case "configuration":this.mergeConf(c[h],l[h]);break;default:l[h]=c[h]}},mergeConf:function(a,c){var d,b;for(d in a)b=a[d],void 0!==b&&null!==b&&(c[d]=b)},getItems:function(){return this.components.items},hide:function(){this.chart.graphics.legendGroup.hide()}},
void 0,{enabled:!0,symbolWidth:12,borderRadius:1,backgroundColor:"#FFFFFF",initialItemX:0,title:{text:F,x:0,y:0,padding:2},scroll:{},itemStyle:{}}]);Q.register("component",["toolbox","horizontaltoolbox",{init:function(a){this.config={type:a};this.components={};this.graphics={};this._configure()},_getPosition:function(){var a=this.config.type,c=a.frame,d=a.orientation,b=a.placement,h={chart:{outer:{left:0,right:0,top:0,bottom:0},inner:{left:0,right:0,top:0,bottom:0}},canvas:{outer:{left:0,right:0,
top:0,bottom:0},inner:{left:0,right:0,top:0,bottom:0}}};!a&&(a={});return c&&b&&d?h[c][b][d]:a},_configure:function(){var b,h,e=this.config,f=this.chart,g=f.jsonData.chart,l=f.config,f=l.width,l=l.height;e.scale=c(g.toolbarbuttonscale,1.15);e.width=c(g.toolbarbuttonwidth,15);e.height=c(g.toolbarbuttonheight,15);e.radius=c(g.toolbarbuttonradius,2);e.spacing=c(g.toolbarbuttonspacing,5);e.fill=pa(d(g.toolbarbuttoncolor,"ffffff"));e.labelFill=pa(d(g.toolbarlabelcolor,"cccccc"));e.symbolFill=pa(d(g.toolbarsymbolcolor,
"ffffff"));e.hoverFill=pa(d(g.toolbarbuttonhovercolor,"ffffff"));e.stroke=pa(d(g.toolbarbuttonbordercolor,"bbbbbb"));e.symbolStroke=pa(d(g.toolbarsymbolbordercolor,"9a9a9a"));e.strokeWidth=c(g.toolbarbuttonborderthickness,1);e.symbolStrokeWidth=c(g.toolbarsymbolborderthickness,1);b=e.symbolPadding=c(g.toolbarsymbolpadding,5);e.symbolHPadding=c(g.toolbarsymbolhpadding,b);e.symbolVPadding=c(g.toolbarsymbolvpadding,b);h=e.position=d(g.toolbarposition,"tr").toLowerCase();switch(h){case "tr":case "rt":case "top right":case "right top":h=
"tr";break;case "br":case "rb":case "bottom right":case "right bottom":h="br";break;case "tl":case "lt":case "top left":case "left top":h="tl";break;case "bl":case "lb":case "bottom left":case "left bottom":h="bl";break;default:h="tr"}b=e.hAlign=(a+g.toolbarhalign).toLowerCase()===Fa?"l":h.charAt(1);h=e.vAlign=(a+g.toolbarvalign).toLowerCase()===T?"b":h.charAt(0);e.hDirection=c(g.toolbarhdirection,"r"===b?-1:1);e.vDirection=c(g.toolbarvdirection,"b"===h?-1:1);e.vMargin=c(g.toolbarvmargin,6);e.hMargin=
c(g.toolbarhmargin,10);e.x=c(g.toolbarx,"l"===b?0:f);e.y=c(g.toolbary,"t"===h?0:l)},_manageToolBoxPosition:function(a,c){var d,b,h=0,e=this.components;for(d in e)e.hasOwnProperty(d)&&(b=e[d],b=b._spaceOccupied(),h=Y(h,b.height));h>c&&this._postSpaceManager();return{top:0,bottom:h,left:0,right:0}},addItem:function(a){var c,d,b,h=this.components;for(c=0;c<a.length;c+=1)b=a[c],d=h[b.name]=new (Q.register("component",["toolButton","button"])),d.init(this,b),d.chart=this.chart},draw:function(){var a,c,
d=this.components,b=this.x,h=this.y;for(a in d)d.hasOwnProperty(a)&&(c=d[a],c.draw(b,h))},_postSpaceManager:function(){}}]);Q.register("component",["toolBox","verticalToolBox",{},"horizontaltoolbox"]);Q.register("component",["toolButton","button",{init:function(){this.config={};this.components={};this.graphics={};this._configure.apply(this,arguments)},_configure:function(a,b){var h=a.config,e=this.config;e.type=b.type;e.scale=c(b.scale,h.scale);e.width=c(b.width,h.width);e.height=c(b.height,h.height);
e.radius=c(b.radius,h.radius);e.spacing=c(b.spacing,h.spacing);e.fill=pa(d(b.fill,h.fill));h.x=c(b.x,h.x);h.y=c(b.y,h.y)},draw:function(){this["_draw"+this.config.type]()},_drawScroller:function(){var a=this.chart,d=a.components,h=a.config,e=a.jsonData.chart,f=d.paper,g=a.graphics,l=d.xAxis["0"]||{},k=l.config||{},t=k.rawAttr.axisLineThickness,d=h.scrollOptions||{},p=h.canvasTop,m=h.canvasLeft,D=h.canvasWidth,w=h.canvasHeight,z=h.canvasBorderWidth,k=z||(k.showLine?t:0),G=z||t,t=z||t,e=h.useRoundEdges||
(h.useRoundEdges=c(e.useroundedges,0)),n,r,F,B,K,q,u,R,L,aa,P,Z=g.scroller,z=g.datasetGroup,E;d.enabled&&(E=g.scroll=g.scroll||f.group("scroll").insertAfter(z),z=d.scrollRatio,B=c(d.startPercent),K=d.viewPortMax,q=d.viewPortMin,r=d.vxLength,fa(r),u=d.showButtons,R=d.height,L=d.padding,aa=d.color,P=d.flatScrollBars,r=d.windowedCanvasWidth=l.getAxisPosition(r),n=d.fullCanvasWidth=l.getAxisPosition(K-q)-r,F=ua(B*n),Z||(Z=g.scroller=f.scroller(m-G,p+w+k+L-!!k,D+G+t,R,!0,{showButtons:u,displayStyleFlat:P,
scrollRatio:z,scrollPosition:B},E).data("fullCanvasWidth",n).data("windowedCanvasWidth",r).attr({"scroll-display-style":P,fill:aa,r:e&&2||0}).scroll(function(c){var d=h.viewPortConfig;F=-ua(c*n);d.x=-F/d.scaleX;v.chartAPI.mscolumn2d._drawDataset.call(a);l.draw()})),function(){var c;J.eve.on("raphael.scroll.start."+Z.node.id,function(d){c=d;b.raiseEvent("scrollstart",{scrollPosition:d},a.chartInstance)});J.eve.on("raphael.scroll.end."+Z.node.id,function(d){b.raiseEvent("scrollend",{prevScrollPosition:c,
scrollPosition:d},a.chartInstance)})}());this._finalizeScrollPlots();return d.enabled},_finalizeScrollPlots:function(){var a=this.chart,d=a.config,h=a.container,f=a.graphics,g=f.scroller,l=f.datasetGroup,k=f.datalabelsGroup,t=f.trackerGroup,m,D={},w,z,G=a.components.xAxis["0"]||{};w=d.scrollOptions||{};var n=c(w.startPercent),r=w.fullCanvasWidth,F,B=d.animation,K=w.startPercent,d=[Y(0,d.canvasLeft),Y(0,d.canvasTop),Y(1,d.canvasWidth),Y(1,d.canvasHeight)];w.enabled&&(l.attr({"clip-rect":d}),k.attr({"clip-rect":d}),
t.attr({"clip-rect":d}),w=function(c){var d=f.canvas,h=m.left,l=m.top,k={pageX:0,pageY:0},t=c.state,k=eb&&v.getTouchEvent(c)||k;c=c.originalEvent;h=(c.clientX||c.pageX||k.pageX)-h;l=(c.clientY||c.pageY||k.pageY)-l;switch(t){case e:z=d.isPointInside(h,l);D.ox=z&&h||null;if(!z)return!1;D.prevScrollPosition=g.attrs["scroll-position"];b.raiseEvent("scrollstart",{scrollPosition:D.prevScrollPosition},a.logic.chartInstance);break;case p:b.raiseEvent("scrollend",{prevScrollPosition:D.prevScrollPosition,scrollPosition:D.scrollPosition},
a.logic.chartInstance);z=!1;D={};break;default:z&&(d=h-D.ox,D.ox=h,D.scrollPosition=g.attrs["scroll-position"]-d/r,g.attr({"scroll-position":D.scrollPosition}))}},eb&&(m=va(h),h&&(qa(h,"pointerdrag",w),ra(h,"pointerdrag",w))),0<n&&(F=-ua(n*r),l&&l.transform(["T",F,0]),t&&t.transform(["T",F,0]),G.setOffset&&G.setOffset(F),B&&K?a.animationCompleteQueue.push({fn:function(){k&&k.transform(["T",F,0])},scope:a}):k&&k.transform(["T",F,0])))},_spaceOccupied:function(){var a=this.config;return{x:a.x,y:a.y,
width:a.width,height:a.height}}}]);ta("base",{creditLabel:$a,setChartMessage:function(a,b,h){var e=this.components||(this.components={}),f=this.chartInstance,g=f.options,l=f.args,k=this.config||(this.config={}),t=this.linkedItems&&this.linkedItems.smartLabel||f.jsVars.smartLabel,p=v.getImageURL(void 0!==a?a:g.dataEmptyMessage),D,w;h&&!this.linkedItems?this.linkedItems={container:h}:h=this.linkedItems.container;D=k.prevWidth=h.offsetWidth;w=k.prevHeight=h.offsetHeight;a=k.height=Number(w);f=k.width=
Number(D);k.hasChartMessage=!0;e.paper?e.paper.setSize(D,w):(h=e.paper=new J(h,D,w),h.setConfig("stroke-linecap",m));J.svg&&this._createDummyText();p.image?(a=p.string,b=b?{imageHAlign:d(b._chartMessageImageStyle.imageHAlign,g.baseChartMessageImageHAlign).toLowerCase(),imageVAlign:d(b._chartMessageImageStyle.imageVAlign,g.baseChartMessageImageVAlign).toLowerCase(),imageAlpha:c(b._chartMessageImageStyle.imageAlpha,g.baseChartMessageImageAlpha),imageScale:c(b._chartMessageImageStyle.imageScale,g.baseChartMessageImageScale)}:
{imageHAlign:d(l.dataEmptyMessageImageHAlign,g.baseChartMessageImageHAlign).toLowerCase(),imageVAlign:d(l.dataEmptyMessageImageVAlign,g.baseChartMessageImageVAlign).toLowerCase(),imageAlpha:c(l.dataEmptyMessageImageAlpha,g.baseChartMessageImageAlpha),imageScale:c(l.dataEmptyMessageImageScale,g.baseChartMessageImageScale)},k.chartMessageType="image"):(b=b?{"font-family":b._chartMessageStyle.fontFamily||g.baseChartMessageFont,"font-size":b._chartMessageStyle.fontSize||g.baseChartMessageFontSize,fill:b._chartMessageStyle.color||
g.baseChartMessageColor}:{"font-family":l.dataEmptyMessageFont||g.baseChartMessageFont,"font-size":l.dataEmptyMessageFontSize||g.baseChartMessageFontSize,fill:l.dataEmptyMessageColor||g.baseChartMessageColor},t.setStyle(b),g=t.getSmartText(G(p.string),f,a),a={text:g.text,x:f/2,y:a/2},k.chartMessageType="text");k.chartMessageAttr=a;k.chartMessageStyle=b},_hideChartMessage:function(){var a=this.config,c=this.components.chartMessage,d=c&&c.graphics,b;if(c)for(b in"image"===a.chartMessageType&&!d.backgroundImage&&
d.backgroundElement&&(a.stopImageDraw=!0),a&&(a.hasChartMessage=!1),d)d[b].hide?d[b].hide():d[b][0]&&d[b][0].hide()},drawChartMessage:function(){var a=this.config,c=this.components,d=c.paper,b,c=c.chartMessage||(c.chartMessage={}),c=c.graphics||(c.graphics={});b=this.graphics||(this.graphics={});var h=aa(a.chartMessageAttr,a.chartMessageStyle);b=b.messageGroup||(b.messageGroup=d.group("messageGroup"));this._hideChartMessage();a.hasChartMessage=!0;"image"===a.chartMessageType?this._drawBackground(a.chartMessageAttr,
a.chartMessageStyle):c.message||"text"!==a.chartMessageType?(c.message=c.message.attr(h),c.message.show()):c.message=d.text(h,b);this._drawCreditLabel()},_createDummyText:function(){var a=this.components.paper,c=this.linkedItems,d=c.txtElem,b;d||(d=A.document.createElementNS("http://www.w3.org/2000/svg","text"),d.setAttribute("x",-100),d.setAttribute("y",-100),b=A.document.createTextNode("abcdefhiklmnopqrstuvwxyz"),d.appendChild(b),a.canvas.appendChild(d),J.cachedFontHeight&&(J.cachedFontHeight.txtElem=
c.txtElem=d))},dispose:function(){var a=this.components,a=a&&a.paper,c=this.linkedItems&&this.linkedItems.eventListeners,d=c&&c.length;for(this._clearTimers&&this._clearTimers();d--;)c[d].unlisten();this._removeWaitingJobs();a&&(a.clear(),a.remove());this.chartInstance&&delete this.chartInstance.apiInstance;Da.call(this)},_removeWaitingJobs:function(){var a=this.jobList,c,d,b,h;for(h in a)for(b=a[h],d=b.length,c=0;c<d;c++)hb.removeJob(b[c])},_drawBackground:function(h,e){var g=this,l=g.components,
I=g.graphics,k=g.jsonData&&g.jsonData.chart||{},t=l.paper,p=h?l.chartMessage:l.background,m=p.graphics,l=m.backgroundElement,D=m.borderElement,p=p.config||{},w=g.config,z=w.width,G=w.height,n,r,F,B,q,u,R,L=g.get&&g.get(M,U)||{},aa=L.animType,P=L.animObj,E=L.dummyObj,S=L.duration,X,C,A=h?I.messageGroup:I.backgroundGroup,H=p.borderWidth||0,I=p.borderRadius,L=p.borderDashStyle,Ra=p.borderColor,N=p.bgSWF=d(h,k.bgimage,k.bgswf),J=p.bgSWFAlpha=c(e&&e.imageAlpha,k.bgimagealpha,k.bgswfalpha,100),sa=p.imgClipRect=
H+","+H+","+(z-2*H)+","+(G-2*H),Ia=d(k.bgimagedisplaymode,Z).toLowerCase(),wa=(e&&f(e.imageVAlign)||f(k.bgimagevalign,a)).toLowerCase(),Y=(e&&e.imageHAlign||k.bgimagehalign||a).toLowerCase(),va=p.bgImageScale=c(e&&e.imageScale,k.bgimagescale,100),k=p.containerBackgroundColor=v.getContainerBackgroundColor(g);t.canvas.style.backgroundColor=k;"tile"==Ia||"fill"==Ia||"fit"==Ia?(wa!=V&&wa!=K&&wa!=T&&(wa=K),Y!=Fa&&Y!=K&&Y!=Ja&&(Y=K)):(wa!=V&&wa!=K&&wa!=T&&(wa=V),Y!=Fa&&Y!=K&&Y!=Ja&&(Y=Fa));p.bgSWFAlpha=
J;p.bgImageVAlign=wa;p.bgImageHAlign=Y;p.backgroundColor=p=!h&&g._getBackgroundCosmetics();k={x:H,y:H,width:z-2*H,height:G-2*H,stroke:"none",fill:na(p)};l?(l.animateWith(E,P,{x:H,y:H,width:z-2*H,height:G-2*H},S,aa),l.attr({stroke:"none",fill:na(p)})):m.backgroundElement=t.rect(k,A);k={x:H/2,y:H/2,width:z-H,height:G-H,stroke:Ra,"stroke-width":H,"stroke-dasharray":L,fill:"none",r:I||0};D||h?h||(D.animateWith(E,P,{x:H/2,y:H/2,width:z-H,height:G-H,r:I||0},S,aa),D.attr({stroke:Ra,"stroke-width":H,"stroke-dasharray":L,
fill:"none"})):m.borderElement=t.rect(k,A);if(N)n=new ca,F=r=1,n.onload=function(){if(w.stopImageDraw)w.stopImageDraw=!1;else{!m.backgroundImage&&(m.backgroundImage=[]);if(m.backgroundImage)for(C=0,X=m.backgroundImage.length;C<X;C++)m.backgroundImage[C].hide();B=ma(Ia,wa,Y,va,H,z,G,n);B["clip-rect"]=sa;if(B.tileInfo)for(r=B.tileInfo.xCount,F=u=B.tileInfo.yCount,q=B.y,delete B.tileInfo,R=0;r&&B.width&&B.height;)--u,m.backgroundImage[R]||(m.backgroundImage[R]=t.image(N,A)),m.backgroundImage[R].show(),
m.backgroundImage[R].animateWith(E,P,B,S,aa),m.backgroundImage[R].attr({src:N}).css({opacity:.01*J}),B.y+=B.height,0===u&&(u=F,--r,B.x+=B.width,B.y=q),R++;else m.backgroundImage[0]||(m.backgroundImage[0]=t.image(N,A),m.backgroundImage[0].attr(B)),m.backgroundImage[0].show(),m.backgroundImage[0].animateWith(E,P,B,S,aa),m.backgroundImage[0].css({opacity:.01*J}).attr({src:N,visibility:ka,"clip-rect":sa});b.raiseEvent("BackgroundLoaded",{url:N,bgImageAlpha:100*J,bgImageDisplayMode:Ia,bgImageVAlign:wa,
bgImageHAlign:Y,bgImageScale:va,imageWidth:n.width,imageHeight:n.height},g.chartInstance)}},n.onerror=function(a){b.raiseEvent("BackgroundLoadError",{url:N,bgImageAlpha:100*J,error:a,bgImageDisplayMode:Ia,bgImageVAlign:wa,bgImageHAlign:Y,bgImageScale:va},g.chartInstance)},n.src=N;else if(m.backgroundImage)for(C=0,X=m.backgroundImage.length;C<X;C++)m.backgroundImage[C].hide()},redraw:function(){var a=this.graphics.dummyObj;a&&a.stop(void 0,!0,!0);this.draw&&this.draw()},_drawCreditLabel:function(){var a=
b.core.options.creditLabel,c=this.chartInstance.args.creditLabel,d=this.config.height,h=this.graphics,f=h.creditLabel,g=h.creditGroup,l=h.parentGroup||h.messageGroup,k=this.components.paper,p={href:v.CREDIT_HREF,text:v.CREDIT_STRING},a=this.creditLabel&&(void 0===c?!1!==a:!1!==c);g||(g=h.creditGroup=k.group("creditgroup"));l&&g.insertAfter(l);d={text:p.text,x:6,y:d-4,"vertical-align":T,"text-anchor":e,fill:"rgba(0,0,0,0.5)",title:p.title||F};h={fontSize:9,fontFamily:"Verdana,sans",cursor:t,_cursor:"hand"};
a&&(f?f.attr(d).css(h):f=this.graphics.creditLabel=k.text(d,h,g).click(function(){try{A.open(p.href)}catch(a){(A.top||A).location.href=p.href}}))},_mouseEvtHandler:function(a){var c=a.data.mouseTracker,d=this.config,b=d.scrollEnabled,h=d.canvasLeft-(d.toleranceLeft||0),e=d.canvasRight+(d.toleranceRight||0),f=d.canvasBottom+(d.toleranceBottom||0),g=d.canvasTop-(d.toleranceTop||0),l=d.datasetOrder||this.components.dataset,k=v.getMouseCoordinate(this.linkedItems.container,a.originalEvent,this),p=k.chartX,
k=k.chartY,t,m=this.components,D="datasetGroup_"+l[0].type,w,z=!1,G=l.length,n,e=p>h&&p<e&&k>g&&k<f,f=c._lastDatasetIndex,h=c._lastPointIndex;b&&e&&this._swipeX(a,p);if(e)for(;G--&&!z;)(t=l[G])&&t.visible&&(w=t._getHoveredPlot&&t._getHoveredPlot(p,k))&&w.hovered&&(z=!0,w.datasetIndex=G,n=c._getMouseEvents(a,w.datasetIndex,w.pointIndex));(!z||n&&n.fireOut)&&void 0!==f&&(delete c._lastDatasetIndex,delete c._lastPointIndex,l[f]&&l[f]._firePlotEvent&&l[f]._firePlotEvent("mouseout",h,a));if(z)for(b=n.events&&
n.events.length,c._lastDatasetIndex=w.datasetIndex,h=c._lastPointIndex=w.pointIndex,d.drawTrendRegion&&m[D]._notifyGroup(!0,a),c=0;c<b;c+=1)t&&t._firePlotEvent&&t._firePlotEvent(n.events[c],h,a,w.datasetIndex);else d.drawTrendRegion&&m[D]._notifyGroup(!1,a);d.drawTrendRegion&&m[D]._getHoveredRegion(p,k,a)},eiMethods:{hideChartMessage:function(){var a=this.apiInstance;a._show.apply(a);a._hideChartMessage(a)}}});ta("mscartesian",{standaloneInit:!1,tooltipConstraint:"chart",annotationInteractionEvents:!0,
useScaleRecursively:!0,init:function(a,c,d,b){var h=this;d=h.chartInstance||d;var e=d.jsVars,f=c.colorrange,g,l=h.getJobList(),k=function(){h.draw();h.setChartEvents();b({hasRendered:!0,container:a})};c.chart=c.chart||c.graph||c.map||{};h.jsonData=c;c=h.components||(h.components={});c.background||(c.background={graphics:{},config:{}});c.canvas||(c.canvas={graphics:{},config:{}});g=Q.register("component",["caption","caption"]);c.caption||(c.caption=new g);c.caption.init();c.caption.chart=h;g=Q.register("component",
["caption","subCaption"]);c.subCaption||(c.subCaption=new g);c.subCaption.init();c.dataset||(c.dataset=[]);h.linkedItems={container:a,smartLabel:e.smartLabel};c.colorManager=new v.colorManager(h);c.numberFormatter=new Za(h);f&&(c.colorRange=new v.ColorRange(h));h._checkInvalidData()?(v.raiseEvent("nodatatodisplay",{},d,[d.id]),b({hasRendered:!0,container:a})):(h._createLegend(),h._createGradientLegend(),h.configure(),h.disposeChartStyleSheet(),h._createAxes(),h._feedAxesRawData(),h.config.realtimeEnabled&&
(e=Q.get("component",["manager","alert"]))&&(c.alertManager=new e,c.alertManager.init(h),c.alertManager.configure()),h.config.enablemousetracking&&(e=Q.get("component",["tracker","mouse"]))&&(c.mouseTracker=new e,c.mouseTracker.init(h),c.mouseTracker.configure(),v.toolTip.setup()),h._createDatasets(),h._createQuadrant&&h._createQuadrant(),d.args.asyncRender?l.draw.push(hb.addJob(k,ib.render)):k(),h.inited=!0,h.chartInstance.__state.dataReady=!0)},_scrollTo:function(a){var c=this.apiInstance,d=c.components.scrollBar,
h=d.node,e=d.conf,d=h.attr("scroll-position");e.scrollTo=!0;void 0!==a&&(a=oa(Y(a,0),1),1>h.attr("scroll-ratio")&&(b.raiseEvent("scrollStart",{scrollPosition:h.attr("scroll-position")},c.chartInstance),c.updateManager(a),b.raiseEvent("scrollEnd",{prevScrollPosition:d,scrollPosition:a},c.chartInstance)))},_checkInvalidData:function(){var a=this.jsonData,c=this.chartInstance;if(!(this.isWidget||this.isMap||a.data&&0!==a.data.length||a.dataset||a.value||a.lineset||a.annotations||a.category||a.tasks||
a.process||a.axis))return this.setChartMessage(),this.drawChartMessage(),c.__state.dataReady=!1,c.jsVars.hasNativeMessage=!0,c.jsVars.drawCount+=1,!0},_createToolBox:function(){var a,d,b,h,e,f,l,k;e=!!A.btoa;var p=this,t=p.jsonData.chart,m=c(t.exportshowmenuitem),D=t.exportformats,w=p.chartMenuTools,t=w.get,z=w.set,w=this.components,G=p.config,n=G.exportOption.enabled;a=w.chartMenuBar;b=w.actionBar;var G=G.printOption.enabled,r={PNG:"Export As "+g.PNG.toUpperCase(),JPG:"Export As "+g.JPG.toUpperCase(),
PDF:"Export As "+g.PDF.toUpperCase(),SVG:"Export As "+g.SVG.toUpperCase(),XLS:"Export As "+g.XLS.toUpperCase()},F,B={},K=[],q;if(!(a&&a.drawn||b&&b.drawn)){a=w.tb||(w.tb=new (Q.register("component",["toolbox","toolbox"])));k=a.init({graphics:p.graphics||(p.graphics={}),chart:p,components:w});w.toolBoxAPI=b=w.toolBoxAPI||(w.toolBoxAPI=a.getAPIInstances(a.ALIGNMENT_HORIZONTAL));h=b.SymbolWithContext;d=b.SymbolStore;f=b.ComponentGroup;l=b.Toolbar;a.idCount=a.idCount||0;a.pId=k;b=a.getDefaultConfiguration();
d.register("ContextIcon",function(a,c,d){var b=2*d;d=ua(b/4);var h=.7*ua(b/2),b=a-h;a+=h;h=c+d;d=c-d;return["M",b,c,"L",a,c,"M",b,h,"L",a,h,"M",b,d,"L",a,d]});d=new h("ContextIcon",a.idCount++,k);h=d.getListRefernce();if(n&&0!==m){if(D)for(m=D.split("|"),B=0,n=m.length;B<n;B++)D=m[B].split("="),q=D[0].toUpperCase(),r[q]&&(r[q]=D[1]||r[q]),r[q]&&(F||(F={}))&&(F[q]=!0);m=function(a){return function(){v.exportChart.call(p,a)}};for(q in r)"XLS"===q&&!e||F&&!F[q]||(B={},B[r[q]]={handler:m({exportformat:q}),
action:"click"},K.push(B));z(K)}G&&z([{Print:{handler:function(a){p.chartInstance.print.call(p.chartInstance,a)},action:"click"}}]);h.appendAsList(t());e=new f(a.idCount++,k);e.setConfiguaration({buttons:b,group:{fill:Sa,borderColor:Sa}});e.addSymbol(d);delete w.chartMenuBar;delete w.actionBar;a="t"===e.btnConfig.vAlign?w.chartMenuBar=new l(a.idCount++,a.pId):w.actionBar=new l(a.idCount++,a.pId);a.addComponent(e)}},chartMenuTools:function(){var a=[];return{get:function(){return a},set:function(c){var d,
b=c.length||0;for(d=0;d<b;d+=1)a.push(c[d])},reset:function(c,d){var b=d.components,h=b.actionBar;(b=b.chartMenuBar)&&(b.drawn=!1);h&&(h.drawn=!1);a.length=0;c&&(c.idCount=0,c.clean())},update:function(a,c,d){var b=d.components;d=d.components.toolBoxAPI.SymbolWithContext;var h=(b.chartMenuBar||b.actionBar).componentGroups,e,f,g,l,k,b=0;for(g=h.length;b<g;b++)for(f=h[b],f=f.symbolList||[],l=0,k=f.length;l<k;l++)f[l]instanceof d&&(e=f[l],e=e.getListRefernce().getFirstContainer().atomicLists);e=e||[];
b=0;for(g=e.length;b<g;b++)if(d=e[b],d.name===a){d.updateName(c);break}}}}(),getConfig:function(a){return a?this.config[a]:this.config},get:function(a,c){var d=this[a];return c?d&&d[c]:d},disposeChartStyleSheet:function(){var a=this.components.paper;a&&a.cssClear()},createChartStyleSheet:function(){this.components.paper.cssRender()},configure:function(){var b,e,k,p=this.components,I=this.jsonData,t,m=this.chartInstance,w=p.colorManager,z=this.is3D,n=z?Ta.chart3D:Ta.chart2D,r,K=this.isBar,u,P;u=!1;
var Z=p.legend,V={linear:"linear",easein:"easeIn",easeout:"easeOut",easeinout:"easeInOut",backin:"backIn",backout:"backOut",elastic:"elastic",bounce:"bounce"};I.chart=I.chart||I.graph||I.map||{};delete I.map;delete I.graph;t=I.chart;!t&&(t=I.chart={});p.colorRange||(p.colorRange=new v.ColorRange(this));r=this.config||(this.config={});this.__setDefaultConfig();R(t,r);r.snapLiterals={};r.viewPortConfig={scaleY:1,scaleX:1,x:0,y:0};z&&(K?(r.xDepth=5,r.yDepth=5):(r.xDepth=10,r.yDepth=10),r.showCanvasBase=
I=!!c(t.showcanvasbase,1),r.canvasBasePadding=c(t.canvasbasepadding,2),r.canvasBaseDepth=I?c(t.canvasbasedepth,10):0,r.canvasBgDepth=c(t.canvasbgdepth,3));p.colorManager&&p.colorManager.configure();r.placeAxisLabelsOnTop=c(t.placexaxislabelsontop,0);r.enableAnimation=I=c(t.animation,t.defaultanimation,1);p=c(t.transposeanimation,0);I=I?1E3*c(t.animationduration,1):0;p=p?1E3*c(t.transposeanimduration,.2):0;r.animationObj&&(u=!0);r.animationObj=p={initAnimDuration:I,transposeAnimDuration:p};p.duration=
u||void 0!==p.duration?p.transposeAnimDuration:p.initAnimDuration;for(P in V)P===d(t.animationeffect)&&(r.animationeffect=V[P]);r.showToolTip=c(t.showtooltip,1);r.exportOption={enabled:c(t.exportenabled,0),bgcolor:m.jsVars.transparent||0===c(m.options.containerBackgroundOpacity,1)?a:m.options.containerBackgroundColor||"#ffffff",bgalpha:(m.jsVars.transparent?0:c(m.options.containerBackgroundOpacity,1))+a,exporttargetwindow:d(t.exporttargetwindow,Na?"_blank":"_self"),exportaction:function(){var a;return t.exportaction&&
"string"===typeof t.exportaction?(a=t.exportaction.toLowerCase(),0<=[L.DOWNLOAD,L.SAVE,L.DOWNLOADSAVE].indexOf(a)?a:L.DOWNLOAD):L.DOWNLOAD}(),exportfilename:d(t.exportfilename,"FusionCharts"),exporthandler:d(t.html5exporthandler,t.exporthandler,X),exportparameters:d(t.exportparameters,a),exportformat:d(t.exportformat,g.PNG),exportcallback:d(t.exportcallback,a),logenabled:c(t.logenabled,0),logmode:function(){var a=t.logmode;return"undefined"!==typeof a&&"string"===typeof a&&a.toUpperCase()in B?B[a.toUpperCase()]:
B.AUTO}(),loghandler:d(t.html5loghandler,t.loghandler,h),exportwithimages:c(t.exportwithimages,1),exportatclientside:c(t.exportatclientside,1),exportmode:function(){var a;"undefined"!==typeof t.exportatclientside&&(a={1:l.AUTO,0:l.AUTO}[t.exportatclientside]);a=t.exportmode||a||l.AUTO;return a=a.toLowerCase()}()};(function(){var a=r.exportOption.exportmode,c={};c[l.CLIENT]=1;c[l.AUTO]=0;c[l.SERVER]=0;r.exportOption.exportatclientside=c[a]})();r.printOption={enabled:c(t.printshowbutton,t.showprintmenuitem,
0)};r.chartMenuOptions={position:b=d(t.toolbarposition,"tr").toLowerCase(),hAlign:e=(a+t.toolbarhalign).toLowerCase()===Fa?"l":b.charAt(1),vAlign:k=(a+t.toolbarvalign).toLowerCase()===T?"b":b.charAt(0),hDirection:c(t.toolbarhdirection,"r"===e?-1:1),vDirection:c(t.toolbarvdirection,"b"===k?-1:1),vMargin:c(t.toolbarvmargin,6),hMargin:c(t.toolbarhmargin,10),x:c(t.toolbarx,"l"===e?0:r.width),y:c(t.toolbary,"t"===k?0:r.height)};b=r.style={};r.textDirection="1"===t.hasrtltext?"rtl":F;b.inCanfontFamily=
e=d(t.basefont,"Verdana,sans");b.inCanfontSize=k=la(t.basefontsize,10);b.inCancolor=m=d(t.basefontcolor,w.getColor(n.baseFontColor));b.outCanfontFamily=d(t.outcnvbasefont,e);b.fontSize=u=la(t.outcnvbasefontsize,k);b.outCanfontSize=u+Ea;b.outCancolor=d(t.outcnvbasefontcolor,m).replace(/^#? ([a-f0-9]+)/ig,"#$1");b.baseFontSize=k;b.inCanfontSize=k+Ea;b.inCancolor=m.replace(/^#? ([a-f0-9]+)/ig,"#$1");b.inCanvasStyle=u={fontFamily:e,fontSize:k,color:m};b.inCanLineHeight=u=ga(u);P=(P=D(t.valuebordercolor,
a))?pa(P,c(t.valueborderalpha,t.valuealpha,100)):a;r.reverseXAxis=this.config.allowreversexaxis&&c(t.reversexaxis,0);r.showBorder=c(t.showborder,z?0:1);r.borderWidth=Y(r.showBorder?c(t.borderthickness,1):0,0);r.useplotgradientcolor=""===t.plotgradientcolor?0:r.useplotgradientcolor;r.valuefontbold=c(t.valuefontbold,r.valuefontbold);r.dataLabelStyle=z={fontFamily:d(t.valuefont,e),fontSize:d(t.valuefontsize,parseInt(k,10))+Ea,lineHeight:u,color:pa(d(t.valuefontcolor,m),c(t.valuefontalpha,t.valuealpha,
100)),fontWeight:r.valuefontbold?E:N,fontStyle:c(t.valuefontitalic)?"italic":N,border:P||t.valuebgcolor?c(t.valueborderthickness,1)+"px solid":F,borderColor:P,borderThickness:c(t.valueborderthickness,1),borderPadding:c(t.valueborderpadding,2),borderRadius:c(t.valueborderradius,0),backgroundColor:t.valuebgcolor?pa(t.valuebgcolor,c(t.valuebgalpha,t.valuealpha,100)):a,borderDash:c(t.valueborderdashed,0)?Ra(c(t.valueborderdashlen,4),c(t.valueborderdashgap,2),c(t.valueborderthickness,1)):"none"};ga(z);
r.orphanStyles={defaultStyle:{style:aa({},b.inCanvasStyle)},connectorlabels:{style:aa({},r.dataLabelStyle)},vyaxisname:{style:aa({},b.inCanvasStyle)}};r.legendPosition=d(t.legendposition,T);r.logoURL=f(t.logourl);r.logoPosition=d(t.logoposition,"tl").toLowerCase();r.logoAlpha=c(t.logoalpha,100);r.logoLink=f(t.logolink);r.logoScale=c(t.logoscale,100);r.logoLeftMargin=c(t.logoleftmargin,0);r.logoTopMargin=c(t.logotopmargin,0);r.minChartWidthPercent=c(t.minchartwidth,this.minChartWidth,50)/100;r.minChartHeightPercent=
c(t.minchartheight,this.minChartHeight,50)/100;r.minCanvasWidthPercent=c(t.mincanvaswidth,this.minCanvasWidth,60)/100;r.minCanvasHeightPercent=c(t.mincanvasheight,this.minCanvasHeight,30)/100;this._parseBackgroundCosmetics();this.components.caption.configure();this._parseCanvasCosmetics();r.origMarginTop=c(t.charttopmargin,this.chartTopMargin,15);r.origMarginLeft=c(t.chartleftmargin,this.chartLeftMargin,15);r.origMarginBottom=c(t.chartbottommargin,this.chartBottomMargin,15);r.origMarginRight=c(t.chartrightmargin,
this.chartRightMargin,15);n=d(t.zeroplanecolor,t.divlinecolor,w.getColor(n.divLineColor));z=d(t.zeroplanealpha,t.divlinealpha,w.getColor("divLineAlpha"));r.zeroPlaneColor=pa(n,z);r.zeroPlaneBorderColor=pa(d(t.zeroplanebordercolor,n),c(t.zeroplaneshowborder,1)?z:0);r.zeroPlaneShowBorder=c(t.zeroplaneshowborder,1);r.dataStreamURL=G(t.datastreamurl);r.realtimeEnabled=n=c(t.realtimeenabled,this.isRealTime);r.showLegend=c(t.showlegend,this.showLegend,1);r.link=t.clickurl;r.annRenderDelay=1E3*c(t.annrenderdelay,
0);r.transposeAxis=c(this.transposeAxis,t.transposeaxis,0);r.useEllipsesWhenOverflow=c(t.useellipseswhenoverflow,t.useellipsewhenoverflow,1);r.gLegendPadding=c(t.legendpadding,10);r.skipZeroPlots=c(t.skipzeroplots,1);r.drawTrendRegion=v.toolTip.drawTrendRegion=c(t.drawcrossline,0);r.drawCrossLineOnTop=c(t.drawcrosslineontop,0);r.rolloverbandanimation=c(t.crosslineanimation,0);r.rolloverbandanimationduration=1E3*c(t.crosslineanimationduration,.09);r.plotcolorintooltip=c(t.plotcolorintooltip,this.singleseries?
0:1);r.trendRegionColor=r.trendRegionStroke=pa(d(t.crosslinecolor,w.getColor(q.altHGridColorStr)),d(t.crosslinealpha,w.getColor(q.altHGridAlphaStr)));r.showsum=c(t.showsum,this.showsum,0);r.binSize=oa(c(t.plotbinsize,this.binSize,.5),1);r.labelBinSize=oa(c(t.labelbinsize,1),1);r.enableMouseOutEvent=c(t.enablemouseoutevent,this.enableMouseOutEvent,0);r.tooltipgrayoutcolor=d(t.tooltipgrayoutcolor,S);n&&this._realTimeConfigure();this._setToolTipOptions();Z.configure();this.linkedItems.linkClickFN=bb(this.jsonData,
this.chartInstance);this._createConfigurableComponents()},_createConfigurableComponents:function(){var a=this.config,c=this.components,d;a.realtimeEnabled&&a.usemessagelog&&(a=Q.get("component",["logger","message"]))&&(d=c.messageLogger,d||(c.messageLogger=new a,c.messageLogger.init(this)),c.messageLogger.configure())},_parseBackgroundCosmetics:function(){var a=this.is3D,b=this.components.background.config,h=this.components.colorManager,e=this.jsonData.chart,f;f=b.showBorder=c(e.showborder,this.showBorder,
a?0:1);b.borderWidth=f=Y(f?c(e.borderthickness,1):0,0);b.borderRadius=b.borderRadius=c(e.borderradius,0);b.borderDashStyle=b.borderDashStyle=c(e.borderdashed,0)?Ra(c(e.borderdashlen,4),c(e.borderdashgap,2),f):"none";b.borderAlpha=d(e.borderalpha,a?"100":h&&h.getColor("borderAlpha"));b.borderColor=b.borderColor=pa(d(e.bordercolor,a?"#666666":h&&h.getColor("borderColor")),b.borderAlpha)},_parseCanvasCosmetics:function(){var a,b,h=this.config;b=this.components;var e=b.canvas.config,f=this.jsonData.chart;
b=b.colorManager;var g,l=this.is3D?Ta.chart3D:Ta.chart2D,k=e.isRoundEdges=c(f.useroundedges,0);a=c(f.showxaxisline,f.showyaxisline,f.showaxislines,0)?0:1;e.canvasBorderRadius=c(f.plotborderradius,k?2:0);a=e.showCanvasBorder=!!c(f.showcanvasborder,a,void 0,k?0:1);g=e.oriCanvasBorderThickness=Y(c(f.canvasborderthickness,k?0:c(this.canvasborderthickness,2),0));e.canvasBorderWidth=this.is3D?0:a?g:0;e.canvasBorderColor=pa(d(f.canvasbordercolor,b.getColor("canvasBorderColor")),d(f.canvasborderalpha,b.getColor("canvasBorderAlpha")));
a=e.canBGAlpha=d(f.canvasbgalpha,b.getColor("canvasBgAlpha"));e.canBGColor={FCcolor:{color:d(f.canvasbgcolor,b.getColor(l.canvasBgColor)),alpha:d(f.canvasbgalpha,100),angle:d(f.canvasbgangle,0),ratio:d(f.canvasbgratio)}};b=e.shadow=c(f.showshadow,k,0)&&k?{enabled:!0,opacity:a/100}:0;e.shadowOnCanvasFill=b&&b.enabled;h.origMarginTop=c(f.charttopmargin,15);h.origMarginLeft=c(f.chartleftmargin,15);h.origMarginBottom=c(f.chartbottommargin,15);h.origMarginRight=c(f.chartrightmargin,15);h.origCanvasLeftMargin=
c(f.canvasleftmargin,0);h.origCanvasRightMargin=c(f.canvasrightmargin,0);h.origCanvasTopMargin=c(f.canvastopmargin,0);h.origCanvasBottomMargin=c(f.canvasbottommargin,0);e.canvasPadding=c(f.canvaspadding,0);e.origCanvasTopPad=c(f.canvastoppadding,0);e.origCanvasBottomPad=c(f.canvasbottompadding,0);e.origCanvasLeftPad=c(f.canvasleftpadding,0);e.origCanvasRightPad=c(f.canvasrightpadding,0)},_preDraw:function(){var a=this.config.realTimeConfig,a=a&&a.showRTmenuItem;this.config.realtimeEnabled&&this._setRealTimeCategories&&
this._setRealTimeCategories();this._setAxisValuePadding();this._setAxisLimits();this.chartMenuTools.reset(this.components.tb,this);a&&this._setRTmenu();this.config.useShowLogMenu&&this._setUseLog()},_setUseLog:function(){var a=this.components.messageLogger,c=this.chartMenuTools;c&&c.set([{"Show Log":{handler:function(){a.show()},action:"click"}}])},_manageSpace:function(){var a=this.components.canvas.config,c=this.linkedItems.container,d=this.config,b,h,e,f,g,l,k,t,p,m,D;d.width=b=c.offsetWidth;d.height=
D=c.offsetHeight;d.minChartHeight=p=d.minChartHeightPercent*D;d.minChartWidth=m=d.minChartWidthPercent*b;d.minCanvasWidth=c=d.minCanvasWidthPercent*m;d.minCanvasHeight=h=d.minCanvasHeightPercent*p;d.marginTop=e=d.origMarginTop;d.marginLeft=f=d.origMarginLeft;d.marginBottom=g=d.origMarginBottom;d.marginRight=l=d.origMarginRight;d.canvasMarginTop=d.origCanvasTopMargin;d.canvasMarginLeft=d.origCanvasLeftMargin;d.canvasMarginBottom=d.origCanvasBottomMargin;d.canvasMarginRight=d.origCanvasRightMargin;
d.canvasHeight=k=d.height-d.marginTop-d.marginBottom;d.canvasWidth=t=d.width-d.marginLeft-d.marginRight;d.availableHeight=k-h;d.availableWidth=t-c;k<p&&(k=D-p,d.canvasHeight=p,D=e+g,d.marginTop=k*e/D,d.marginBottom=k*g/D,d.availableHeight=p-h);t<m&&(k=b-m,D=l+f,d.canvasWidth=m,d.marginLeft=k*f/D,d.marginRight=k*l/D,d.availableWidth=m-c);d.canvasLeft=d.marginLeft;d.canvasTop=d.marginTop;a.canvasPaddingLeft=oa(a.origCanvasLeftPad,ua(.1*d.height));a.canvasPaddingRight=oa(a.origCanvasRightPad,ua(.1*d.height));
a.canvasPaddingTop=oa(a.origCanvasTopPad,ua(.1*d.height));a.canvasPaddingBottom=oa(a.origCanvasBottomPad,ua(.1*d.height));this._spaceManager()},_postSpaceManagement:function(){var a=this.config,c=this.components,d=c.xAxis&&c.xAxis[0],b=c.yAxis&&c.yAxis[0],h=c.legend,e=a.xDepth,f=c.canvas.config,c=f.canvasBorderWidth,g=f.canvasPadding||0,l=f.canvasPaddingLeft,k=f.canvasPaddingRight,t=f.canvasPaddingTop,f=f.canvasPaddingBottom;d&&d.setAxisDimention({x:a.canvasLeft+(e||0)+Y(l,g),y:a.canvasBottom+(a.shift||
0)+c,opposite:a.canvasTop-c,axisLength:a.canvasWidth-(e||0)-Y(l,g)-Y(k,g)});d&&this._allocateXAxisLabelSpace(d);b&&b.setAxisDimention({x:a.canvasLeft-c,y:a.canvasTop+t,opposite:a.canvasRight+c,axisLength:a.canvasHeight-t-f});d&&d.shiftLabels(-e,0);h.postSpaceManager();this._adjustCanvasPadding()},_allocateXAxisLabelSpace:function(a){var c=this.config,d=a.getAxisEndLabelDisplaySpace();a=d.left;var b=d.right,h=d.top,d=d.bottom,e=c.availableWidth,f=c.availableHeight,g=c.canvasLeft,l=c.canvasRight,k=
c.canvasTop,t=c.canvasBottom,p=c.width,m=c.height,D=function(a,c){return a<c&&0<c?c-a:0};h+d>f&&(c=h+d,h=f*h/c,d=f*d/c);a+b>e&&(c=a+b,a=e*a/c,b=e*b/c);a=D(g,a);b=D(p-l,b);h=D(k,h);d=D(m-t,d);this._allocateSpace({left:a,right:b,top:h,bottom:d})},_animCallBack:function(){var a=this.config;a.animationStarted&&(b.raiseEvent("internal.animationComplete",{},this.chartInstance),a.animationStarted=!1)},_setAnimDuration:function(){var a=this.config.animationObj;a&&(a.duration=a.transposeAnimDuration)},_setDataLabelStyle:function(){var a=
this.config.dataLabelStyle;this.graphics.datalabelsGroup.css({fontFamily:a.fontFamily,fontSize:a.fontSize,fontWeight:a.fontWeight,fontStyle:a.fontStyle})},_updateVisuals:function(){var a=this.linkedItems.container,c=this.components,d=c.paper,b=c.tooltip,h=this.chartInstance,e=this.get(M,U),f=e.animType,g=e.dummyObj,l=e.animObj,e=e.duration,k=this.config,t,p=k.prevWidth,D=k.prevHeight;k.animationStarted=!0;d?((p||D)&&d.setSize(p,D),p={width:a.offsetWidth,height:a.offsetHeight},t=!0,this._chartAnimation(!0),
d.animateWith(g,l,p,e,f)):(d=c.paper=new J(a,a.offsetWidth,a.offsetHeight),d.setConfig("stroke-linecap",m));J.svg&&this._createDummyText();k.prevWidth=a.offsetWidth;k.prevHeight=a.offsetHeight;d.tooltip(b.style,b.config.shadow,b.config.constrain);this.setChartCursor();this._createLayers();this._setDataLabelStyle();!t&&this._chartAnimation(!0);this._drawBackground();!1!==this.hasCanvas&&this._drawCanvas();c.chartMenuBar&&this._drawChartMenuBar();this._manageCaptionPosition();c.caption&&c.caption.draw();
this.drawLegend();c.actionBar&&this.drawActionBar();this._drawAxis&&this._drawAxis();this._drawDataset();this._drawQuadrant&&this._drawQuadrant();this._drawCreditLabel();this._drawLogo();h.annotations&&this._drawAnnotations();this.drawAxisUpdateUI&&this.drawAxisUpdateUI();c.messageLogger&&c.messageLogger.isDrawn()&&c.messageLogger.draw();this.drawScrollBar&&this.drawScrollBar();this.showRTvalue&&k.realTimeConfig.showRTValue&&this._drawRealTimeValue()},_chartAnimation:function(a){var c=this,d=c.graphics,
b=c.components.paper,h=c.config.animationObj,e,f=h.duration||h.transposeAnimDuration,g=c.getJobList(),l=c.config,k=l.animationeffect,t=function(){c._animCallBack()};!f||l.parentElementPause?hb.addJob(function(){c._animCallBack()},ib.animation):(h.animObj=f=J.animation({x:0},f,k,t,!1),h.animType=k,(e=d.dummyObj)?e.attr({x:100}):(d.dummyObj=e=b.rect({x:100,y:0,width:10,height:30}),e.hide()),h.dummyObj=d.dummyObj,e.stop(void 0,!0,!0),a?(e.animate(f),e.pause(void 0,!0),l.parentElementPause=!0,g.postRender.push(hb.addJob(function(){l.parentElementPause=
!1;c._setAnimDuration();e.resume(void 0,!0)},ib.animation))):(setTimeout(function(){c._setAnimDuration()},0),e.animate(f)))},draw:function(){var a=this.chartInstance;this.config.hasChartMessage?(this._hide(),this.drawChartMessage(),v.raiseEvent("nodatatodisplay",{},a,[a.id]),this.chartInstance.jsVars.drawCount+=1,this.chartInstance.__state.dataReady=!1,this.chartInstance.jsVars.hasNativeMessage=!0):(this._hideChartMessage(),this._clearTimers&&this._clearTimers(),this.config.plotOverFlow=!1,this._show(),
this._preDraw(),this._createToolBox(),this._manageSpace(),this._postSpaceManagement(),this._setInitialDrawingIndex&&this._setInitialDrawingIndex(),this._updateVisuals(),this.chartInstance.jsVars.drawCount+=1,this.chartInstance.jsVars.hasNativeMessage=!1)},drawLegend:function(){var a=this.components,c=a.legend,a=a.gradientLegend,d=this.hasLegend;this.config.gLegendEnabled?(c&&c.hide(),this.drawGradientLegend&&this.drawGradientLegend()):(a&&a.elem&&a.elem.gl.carpet&&a.elem.gl.carpet.node&&a.elem.gl.carpet.group.hide(),
!1!==d&&c.drawLegend())},manageGradientLegendSpace:function(a){var c=this.components.gradientLegend,d=c&&c.conf,b;b=oa(this.config.gLegendPadding,.5*a);d?(d=d.legendPosition,a=c.getLogicalSpace(a),b=d===T?{bottom:(a.height||0)+b}:{right:(a.width||0)+b}):b={bottom:0,right:0};return b},drawGradientLegend:function(){var a=this.components,c=this.config,d=this.jsonData.colorrange,b=a.gradientLegend||{},h=(b.conf||{}).legendPosition,e=c.canvasLeft,f=c.canvasTop,g=c.canvasWidth,l=c.canvasHeight,k=c.marginBottom,
t=c.marginRight,p=this.hasGradientLegend,m,D,w;m=b.getLogicalSpace();D=m.width;w=m.height;h===T?(h=g-D,t=e+(0>h?0:h/2),k=c.height-m.height-k-(c.actionBarHeight||0)):(h=l-w,k=f+(0>h?0:h/2),t=c.width-m.width-t);d&&p&&b.draw(t,k,{paper:a.paper,parentGroup:this.graphics.parentGroup})},_drawAxis:function(){var a=this.components,c=a.yAxis||[],d=a.xAxis||[],a=a.scale,b,h;b=0;for(h=d.length;b<h;b++)d[b].draw();b=0;for(h=c.length;b<h;b++)c[b].draw();a&&a.draw()},_drawAnnotations:function(){var a=this.jsonData,
b=a.chart,h=this.config,e=h.width,f=h.height,h=a&&a.annotations||{},g=this.chartInstance.annotations;if(a&&b&&c(b.showannotations,1)){var a=c(h.scaleonresize,b.scaleonresize,1),b={interactionevents:d(this.annotationInteractionEvents,!0),showbelow:d(h.showbelow,h.showbelowchart),autoscale:h.autoscale,scaletext:h.scaletext,scaleimages:h.scaleimages,constrainedscale:h.constrainedscale,scaleonresize:a,origw:d(h.origw,b.origw,this.origRenderWidth,e),origh:d(h.origh,b.origh,this.origRenderHeight,f),xshift:h.xshift,
yshift:h.yshift,grpxshift:h.grpxshift,grpyshift:h.grpyshift,xscale:h.xscale,yscale:h.yscale,rootxscale:c(h.xscale,100)/100,rootyscale:c(h.yscale,100)/100},l;b||(b={});for(l in void 0)b[l]=(void 0)[l];g.reset(h,b,this)}else g.clear();g.draw(this)},_clearTimers:function(){var a=this.config&&this.config.realTimeConfig,c=this.linkedItems.timers,d=c&&c.setTimeout,c=c&&c.setInterval,b;a&&(a.refreshIntervalFlag=!1);for(b in d)clearTimeout(d[b]);for(b in c)clearInterval(c[b])},_createLayers:function(){var a=
this.graphics||(this.graphics={}),c,d,b=this.components.paper,a=this.graphics;a.parentGroup=c=a.parentGroup||b.group("parentgroup");a.backgroundGroup=a.backgroundGroup||b.group("background",c);a.canvasGroup=a.canvasGroup||b.group("canvas",c);a.axisBottomGroup=a.axisBottomGroup||b.group("axisbottom",c);a.datasetGroup=d=a.datasetGroup||b.group("dataset",c);a.axisTopGroup=a.axisTopGroup||b.group("axistop",c);a.sumLabelsLayer=a.sumLabelsLayer||b.group("sumlabels",c);a.datalabelsGroup=a.datalabelsGroup||
b.group("datalabel",c);a.legendGroup=a.legendGroup||b.group("legend",c);a.captionGroup=a.captionGroup||b.group("caption",c);a.captionGroup.trackTooltip(!0);a.columnTrendGroup=a.columnTrendRegion||b.group("columnTrendGroup",d);a.columnGroup=a.columnGroup||b.group("column",d);a.areaGroup=a.areaGroup||b.group("area",d);a.lineGroup=a.lineGroup||b.group("line",d);a.trackerGroup||(a.trackerGroup=b.group("tracker",c),a.trackerGroup.trackTooltip(!0));a.buttonGroup=a.buttonGroup||b.group("buttons")},_spaceManager:function(){var a,
c,d=this.config,b=this.components,h=b.xAxis&&b.xAxis[0];c=b.yAxis&&b.yAxis||[];var e,f,g=b.legend.config.legendPos,l=d.xDepth,k=d.yDepth,t=d.canvasBgDepth,p=d.canvasBaseDepth,m=d.canvasBasePadding,D=b.canvas.config.canvasBorderWidth,w=d.realTimeConfig&&d.realTimeConfig.showRTValue,z=d.borderWidth,G=d.canvasMarginTop,r=d.canvasMarginBottom,n=d.canvasMarginLeft,B=d.canvasMarginRight,b=d.minCanvasHeight,F=d.minCanvasWidth;a=d.minChartWidth;var K=d.minChartHeight,q=d.height,u=d.width,R=!1,L=!1,P,aa=d.origCanvasTopMargin,
v=d.origCanvasBottomMargin,Z=d.origCanvasLeftMargin,E=d.origCanvasRightMargin,S,V,X=[];d.canvasWidth-2*z<a&&(f=(d.canvasWidth-a)/2);d.canvasHeight-2*z<K&&(e=(d.canvasHeight-K)/2);this._allocateSpace({top:e||z,bottom:e||z,left:f||z,right:f||z});z=0;for(f=c.length;z<f;z++)e=c[z],a=.7*d.availableWidth,a=e&&e.placeAxis(a)||{},X.push({axisIndex:z,spaceTaken:a}),e&&this._allocateSpace(a);d.yAxisSpaceAllocation=X;this._allocateSpace(this._manageActionBarSpace&&this._manageActionBarSpace(.225*d.availableHeight)||
{});this._manageLegendSpace(void 0);c=g===T?.6*d.availableHeight:.6*d.availableWidth;k&&(this._allocateSpace({bottom:k}),d.shift=l+m+p);t&&this._allocateSpace({right:t});d.canvasWidth-2*D<F&&(V=(d.canvasWidth-F)/2);this._allocateSpace({left:V||D,right:V||D});F>u-n-B&&(L=!0,k=d.canvasWidth-F,l=n+B,n=d.canvasMarginLeft=k*n/l,B=d.canvasMarginRight=k*B/l);n=n>d.canvasLeft?n-d.canvasLeft:0;B=B>u-d.canvasRight?B+d.canvasRight-u:0;this._allocateSpace({left:n,right:B});L&&(l=Z+E,L=d.canvasWidth,L>F&&(k=L-
F,n=k*Z/l,B=k*E/l),this._allocateSpace({left:n,right:B}));d.actualCanvasMarginRight=B;d.actualCanvasMarginBottom=P;this._manageChartMenuBar(c);c=.2*d.availableHeight;this._allocateSpace(this._getSumValueSpace(c));c=.3*d.availableHeight;d.realtimeEnabled&&(w?this._allocateSpace(this._realTimeValuePositioning(c)):this._hideRealTimeValue());this._resetViewPortConfig&&this._resetViewPortConfig();this._setAxisScale&&this._setAxisScale();c=.6*d.availableHeight;d.xAxisSpaceAllocation=P=h&&h.placeAxis(c);
h&&this._allocateSpace(P);c=.3*d.availableHeight;this._manageScrollerPosition&&this._manageScrollerPosition(c);d.canvasHeight-2*D<b&&(S=(d.canvasHeight-b)/2);this._allocateSpace({top:S||D,bottom:S||D});this._allocateSpace({bottom:p});b>q-G-r&&(R=!0,k=d.canvasHeight-b,l=G+r,G=d.canvasMarginTop=k*G/l,r=d.canvasMarginBottom=k*r/l);h=G>d.canvasTop?G-d.canvasTop:0;P=r>q-d.canvasBottom?r+d.canvasBottom-q:0;this._allocateSpace({top:h,bottom:P});R&&(l=aa+v,p=d.canvasHeight,p>b&&(k=p-b,h=k*aa/l,P=k*v/l),this._allocateSpace({top:h,
bottom:P}));d.actualCanvasMarginTop=h;d.actualCanvasMarginLeft=n},_manageLegendSpace:function(){var a=this.config,d=this.components,b=d.legend,h=d.gradientLegend,e;e=this.jsonData.colorrange;var d=this.hasLegend,f={},g=this.hasGradientLegend,l=c(this.jsonData.chart.mapbycategory,0);g&&e&&c(e.gradient)&&!l?(e=h.conf,g=!0,a.gLegendEnabled=!0,h=.5,e=e.legendPosition):(e=b.config,g=!1,a.gLegendEnabled=!1,e=e.legendPos,h=e===Ja?.8:.4);a=e===Ja?a.availableWidth*h:a.availableHeight*h;g?f=this.manageGradientLegendSpace(a):
!1!==d&&(f=b._manageLegendPosition(a));this._allocateSpace({bottom:f.bottom||0,right:f.right||0})},_getSumValueSpace:function(a){var d={},b=this.isBar,h=this.jsonData.chart,d=0!==this.showsum?c(h.showsum,this.showsum,0):0,e=this.config.stack100percent,f=this.config.isstacked,h=0,g=this.components["datasetGroup_"+this.defaultDatasetType],l=0;d&&e&&f&&g&&(d=g.getMaxSumValueSpace(),b?h=d.maxWidth:l=d.maxHeight,l>a&&(l=a),h>a&&(h=a));return{top:l,right:h}},_setAxisValuePadding:function(){var a=this.components.dataset,
c=a.length,d,b,h=-Infinity,e=-Infinity,f=this.components.xAxis;for(d=0;d<c;d++)b=a[d],b=b.getAxisValuePadding&&b.getAxisValuePadding()||{},h=Y(h,b.left||-Infinity),e=Y(e,b.right||-Infinity);-Infinity===h&&(h=0);-Infinity===e&&(e=0);f&&f[0].setAxisPadding(h,e)},_fetchCaptionPos:function(a){var c=this.config,d=this.components,b=c.width,h=d.chartMenuBar,f=h.componentGroups[0].btnConfig,h=h.getLogicalSpace().width,d=d.caption.config,g=d.width,f="l"===f.hAlign,l=c.width-a,k=c.origMarginRight,t=c.origMarginLeft,
p=f?t:k;return d.align===K?(f?a:l)-g/2-p-h:d.align===e?f?-1:b-c.canvasLeft-p-g-h+d.horizontalPadding:f?b-(k+t+h+g):-1},_manageChartMenuBar:function(a){var d=this.config,b=this.components,h=b.chartMenuBar,e=h&&h.getLogicalSpace(),b=b.caption.config,f=b.isOnTop,g=d.width/2,l=d.canvasRight,k=l?(d.canvasLeft+l)/2:g,l=0,g=b.alignWithCanvas?k:g,l=h&&h.componentGroups[0].btnConfig,h=e&&l.spaceNotHardCoded;l&&l.spaceNotHardCoded&&(l.x=c("l"===l.hAlign?0:d.width),l.y=c("t"===l.vAlign?0:d.height));delete b._offsetHeight;
f?(a=this._manageCaptionSpacing(a),h&&(l=this._fetchCaptionPos(g),b._offsetHeight=0>l?e.height:0,a.top=0>l?c(a.top,0)+e.height:Y(a.top,e.height))):(this._allocateSpace({top:h?e.height:0}),a=this._manageCaptionSpacing(a));this._allocateSpace(a);return{top:e?Y(e.height,a.top):a.top,bottom:a.bottom}},_manageActionBarSpace:function(){var a=this.config,c=this.components.actionBar,c=(c&&c.getLogicalSpace()||{}).height||0;a.actionBarHeight=c;return{bottom:c}},_getDSspace:function(a){var c=this.components.dataset,
d,b=c.length,h,e,f={},g={left:0,right:0,top:0,bottom:0,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0},l;for(h=0;h<b;h++)if(d=c[h],e=d.groupManager)f[d.type]=e;else if(d.manageSpace)for(l in d=d.manageSpace&&d.manageSpace(),d)g[l]=Y(d[l],g[l]);for(l in f)if(e=f[l],e.manageSpace)for(l in d=e.manageSpace&&e.manageSpace(a),d)g[l]=Y(d[l],g[l]);c=g.paddingLeft;b=g.paddingRight;h=c+b;a<h&&(g.paddingLeft=a*c/h,g.paddingRight=a*b/h);return g},_adjustCanvasPadding:function(){var a=this.config,c=
this.components,d=c.dataset,b=d.length,h=c.xAxis&&c.xAxis[0],e=c.yAxis&&c.yAxis[0],f=a.xDepth,g={},l,k,t,p,c=c.canvas.config,m=c.canvasBorderWidth,D=c.canvasPadding;for(l=0;l<b;l++)k=d[l],(t=k.groupManager)&&(g[k.type]=t);for(p in g)t=g[p],t.preDrawCalculate&&t.preDrawCalculate();this._getDSspace&&(this._allocateSpace(this._getDSspace(.4*a.canvasWidth)),d=a.canvasLeft,b=c.canvasPaddingLeft,g=a.canvasTop,p=c.canvasPaddingTop,h&&h.setAxisDimention({x:d+(f||0)+Y(b,D),y:a.canvasBottom+(a.shift||0)+m,
opposite:g-m,axisLength:a.canvasWidth-(f||0)-Y(b,D)-Y(c.canvasPaddingRight,D)}),e&&e.setAxisDimention({x:d-m,y:g+p,opposite:a.canvasRight+m,axisLength:a.canvasHeight-p-c.canvasPaddingBottom}))},_setAxisLimits:function(){var a=this.components,c=a.dataset,b=a.yAxis,a=a.xAxis,h,e=c.length,f,g=-Infinity,l=Infinity,k=Infinity,t=-Infinity,p,m,D,w={},z=[],G=function(a){m=d(a.xMax,-Infinity);D=d(a.xMin,Infinity);g=Y(g,a.max);l=oa(l,a.min);t=Y(t,m);k=oa(k,D)};for(f=0;f<e;f++)h=c[f],(p=h.groupManager)?w[h.type]=
p:z.push(h);for(p in w)c=w[p].getDataLimits(),G(c);e=z.length;for(f=0;f<e;f++)c=z[f].getDataLimits(),G(c);G(this._getTrendLineMinMax("h"));-Infinity===g&&(g=0);Infinity===l&&(l=0);this.config.yMax=g;this.config.yMin=l;b[0].setAxisConfig({isPercent:this.config.isstacked?this.config.stack100percent:0});b[0].setDataLimit(g,l);if(-Infinity!==t||Infinity!==k)a[0].config.xaxisrange={max:t,min:k},a[0].setDataLimit(t,k)},_getTrendLineMinMax:function(a,c){var d="v"===a?this.jsonData.vtrendlines:this.jsonData.trendlines,
b={max:-Infinity,min:Infinity},h,e,f,g,l;c=c||"p";if(d)for(e=0,g=d.length;e<g;e+=1)for(f=0,l=d[e].line?d[e].line.length:0;f<l;f+=1)h=d[e].line[f],"s"===c&&"s"!==h.parentyaxis||"s"!==c&&"s"===h.parentyaxis||(b.max=Y(h.startvalue||-Infinity,h.endvalue||-Infinity,b.max),b.min=oa(h.startvalue||Infinity,h.endvalue||Infinity,b.min));return b},_setToolTipOptions:function(){var a=this.components,b=this.components.colorManager,h=this.jsonData.chart,e=a.tooltip||(e=a.tooltip={}),a=e.config||(a=e.config={}),
f=this.config,g=f.style,f=f.style.inCanvasStyle,l,k,t;l=pa(d(h.tooltipbgcolor,b.getColor("toolTipBgColor")),d(h.tooltipbgalpha,100));b=pa(d(h.tooltipbordercolor,b.getColor("toolTipBorderColor")),d(h.tooltipborderalpha,100));k=c(h.tooltipborderthickness,1)+"px";t=c(h.tooltippadding,3)+"px";e=e.style={fontFamily:g.inCanfontFamily,fontSize:g.inCanfontSize,lineHeight:f.lineHeight,color:pa(g.inCancolor),backgroundColor:l,borderColor:b,borderWidth:k,padding:t};h.tooltipcolor&&(e.color=ea(h.tooltipcolor));
if(h.tooltipborderradius||h.useroundedges)e.borderRadius=c(h.tooltipborderradius,2)+"px";a.shadow=c(h.showtooltipshadow,h.showshadow,1)?{enabled:!0,opacity:Y(c(h.tooltipbgalpha,100),c(h.tooltipborderalpha,100))/100}:!1;a.constrain=c(h.constraintooltip,1)},_createAxes:function(){var a=this.components,c=Q.register("component",["axis","cartesian"]),d;a.yAxis=[];a.xAxis=[];a.yAxis[0]=d=new c;a.xAxis[0]=a=new c;d.chart=this;a.chart=this;d.init();a.init();this._setCategories()},_feedAxesRawData:function(){var a=
this.config,b=this.components,h=b.colorManager,e=this.jsonData,f=e.chart,g,l=this.is3d,k=l?Ta.chart3D:Ta.chart2D;g={outCanfontFamily:d(f.outcnvbasefont,f.basefont,"Verdana,sans"),outCanfontSize:la(f.outcnvbasefontsize,f.basefontsize,10),outCancolor:d(f.outcnvbasefontcolor,f.basefontcolor,h.getColor(k.baseFontColor)).replace(/^#? ([a-f0-9]+)/ig,"#$1"),axisBreaks:f.xaxisbreaks,axisNamePadding:f.xaxisnamepadding,axisValuePadding:f.labelpadding,axisNameFont:f.xaxisnamefont,axisNameFontSize:f.xaxisnamefontsize,
axisNameFontColor:f.xaxisnamefontcolor,axisNameFontBold:f.xaxisnamefontbold,axisNameFontItalic:f.xaxisnamefontitalic,axisNameBgColor:f.xaxisnamebgcolor,axisNameBorderColor:f.xaxisnamebordercolor,axisNameAlpha:f.xaxisnamealpha,axisNameFontAlpha:f.xaxisnamefontalpha,axisNameBgAlpha:f.xaxisnamebgalpha,axisNameBorderAlpha:f.xaxisnameborderalpha,axisNameBorderPadding:f.xaxisnameborderpadding,axisNameBorderRadius:f.xaxisnameborderradius,axisNameBorderThickness:f.xaxisnameborderthickness,axisNameBorderDashed:f.xaxisnameborderdashed,
axisNameBorderDashLen:f.xaxisnameborderdashlen,axisNameBorderDashGap:f.xaxisnameborderdashgap,useEllipsesWhenOverflow:f.useellipseswhenoverflow,divLineColor:d(f.vdivlinecolor,f.divlinecolor,h.getColor(k.divLineColor)),divLineAlpha:d(f.vdivlinealpha,f.divlinealpha,l?h.getColor("divLineAlpha3D"):h.getColor("divLineAlpha")),divLineThickness:c(f.vdivlinethickness,f.divlinethickness,1),divLineIsDashed:!!c(f.vdivlinedashed,f.vdivlineisdashed,f.divlinedashed,f.divlineisdashed,0),divLineDashLen:c(f.vdivlinedashlen,
f.divlinedashlen,4),divLineDashGap:c(f.vdivlinedashgap,f.divlinedashgap,2),showAlternateGridColor:c(f.showalternatevgridcolor,0),alternateGridColor:d(f.alternatevgridcolor,h.getColor("altVGridColor")),alternateGridAlpha:d(f.alternatevgridalpha,h.getColor("altVGridAlpha")),numDivLines:c(f.numvdivlines,this.numVDivLines),labelFont:f.labelfont,labelFontSize:f.labelfontsize,labelFontColor:f.labelfontcolor,labelFontAlpha:f.labelalpha,labelFontBold:f.labelfontbold,labelFontItalic:f.labelfontitalic,maxLabelHeight:f.maxlabelheight,
axisName:f.xaxisname,axisMinValue:f.xaxisminvalue,axisMaxValue:f.xaxismaxvalue,setAdaptiveMin:c(f.setadaptivexmin,this.setadaptivexmin,a.setadaptivexmin),adjustDiv:f.adjustvdiv,labelDisplay:f.labeldisplay,showLabels:f.showlabels,rotateLabels:f.rotatelabels,slantLabel:c(f.slantlabels,f.slantlabel),labelStep:c(f.labelstep,f.xaxisvaluesstep),showAxisValues:c(f.showxaxisvalues,f.showxaxisvalue),showLimits:c(f.showvlimits,this.showvlimits),showDivLineValues:c(f.showvdivlinevalues,f.showvdivlinevalues,
this.showvdivlinevalues),showZeroPlane:c(f.showvzeroplane,this.showzeroplane),zeroPlaneColor:f.vzeroplanecolor,zeroPlaneThickness:c(f.vzeroplanethickness,f.vdivlinethickness,a.zeroplanethickness,2),zeroPlaneAlpha:c(f.vzeroplanealpha,f.vdivlinealpha,a.zeroplanealpha),showZeroPlaneValue:c(f.showvzeroplanevalue,this.showzeroplanevalue),trendlineColor:f.trendlinecolor,trendlineToolText:f.trendlinetooltext,trendlineThickness:f.trendlinethickness,trendlineAlpha:f.trendlinealpha,showTrendlinesOnTop:f.showtrendlinesontop,
showAxisLine:l?0:c(f.showxaxisline,f.showaxislines,f.drawAxisLines,this.showxaxisline,0),axisLineThickness:c(f.xaxislinethickness,f.axislinethickness,1),axisLineAlpha:c(f.xaxislinealpha,f.axislinealpha,100),axisLineColor:d(f.xaxislinecolor,f.axislinecolor,"#000000")};h={outCanfontFamily:d(f.outcnvbasefont,f.basefont,"Verdana,sans"),outCanfontSize:la(f.outcnvbasefontsize,f.basefontsize,10),outCancolor:d(f.outcnvbasefontcolor,f.basefontcolor,h.getColor(k.baseFontColor)).replace(/^#? ([a-f0-9]+)/ig,
"#$1"),axisBreaks:f.yaxisbreaks,axisNamePadding:f.yaxisnamepadding,axisValuePadding:f.yaxisvaluespadding,axisNameFont:f.yaxisnamefont,axisNameFontSize:f.yaxisnamefontsize,axisNameFontColor:f.yaxisnamefontcolor,axisNameFontBold:f.yaxisnamefontbold,axisNameFontItalic:f.yaxisnamefontitalic,axisNameBgColor:f.yaxisnamebgcolor,axisNameBorderColor:f.yaxisnamebordercolor,axisNameAlpha:f.yaxisnamealpha,axisNameFontAlpha:f.yaxisnamefontalpha,axisNameBgAlpha:f.yaxisnamebgalpha,axisNameBorderAlpha:f.yaxisnameborderalpha,
axisNameBorderPadding:f.yaxisnameborderpadding,axisNameBorderRadius:f.yaxisnameborderradius,axisNameBorderThickness:f.yaxisnameborderthickness,axisNameBorderDashed:f.yaxisnameborderdashed,axisNameBorderDashLen:f.yaxisnameborderdashlen,axisNameBorderDashGap:f.yaxisnameborderdashgap,axisNameWidth:f.yaxisnamewidth,useEllipsesWhenOverflow:f.useellipseswhenoverflow,rotateAxisName:c(f.rotateyaxisname,1),axisName:f.yaxisname,divLineColor:d(f.divlinecolor,h.getColor(k.divLineColor)),divLineAlpha:d(f.divlinealpha,
l?h.getColor("divLineAlpha3D"):h.getColor("divLineAlpha")),divLineThickness:c(f.divlinethickness,1),divLineIsDashed:!!c(f.divlinedashed,f.divlineisdashed,0),divLineDashLen:c(f.divlinedashlen,4),divLineDashGap:c(f.divlinedashgap,2),showAlternateGridColor:c(f.showalternatehgridcolor,1),alternateGridColor:d(f.alternatehgridcolor,h.getColor("altHGridColor")),alternateGridAlpha:d(f.alternatehgridalpha,h.getColor("altHGridAlpha")),numDivLines:c(f.numdivlines,this.numDivLines),axisMinValue:f.yaxisminvalue,
axisMaxValue:f.yaxismaxvalue,setAdaptiveMin:c(f.setadaptivesymin,f.setadaptiveymin),adjustDiv:f.adjustdiv,labelStep:f.yaxisvaluesstep,showAxisValues:c(f.showyaxisvalues,f.showyaxisvalue,this.showyaxisvalues),showLimits:c(f.showyaxislimits,f.showlimits,this.showLimits),showDivLineValues:c(f.showdivlinevalues,f.showdivlinevalue,this.showdivlinevalues),showZeroPlane:c(f.showzeroplane,this.showzeroplane),zeroPlaneColor:f.zeroplanecolor,zeroPlaneThickness:c(f.zeroplanethickness,f.divlinethickness,a.zeroplanethickness,
2),zeroPlaneAlpha:c(f.zeroplanealpha,f.divlinealpha,a.zeroplanealpha),showZeroPlaneValue:c(f.showzeroplanevalue,this.showzeroplanevalue),showZeroPlaneOnTop:a.showzeroplaneontop,trendlineColor:f.trendlinecolor,trendlineToolText:f.trendlinetooltext,trendlineThickness:f.trendlinethickness,trendlineAlpha:f.trendlinealpha,showTrendlinesOnTop:f.showtrendlinesontop,showAxisLine:l?0:c(f.showyaxisline,f.showaxislines,f.drawAxisLines,this.showyaxisline,0),axisLineThickness:c(f.yaxislinethickness,f.axislinethickness,
1),axisLineAlpha:c(f.yaxislinealpha,f.axislinealpha,100),axisLineColor:d(f.yaxislinecolor,f.axislinecolor,"#000000")};g.vtrendlines=e.vtrendlines;h.trendlines=e.trendlines;e=b.yAxis&&b.yAxis[0];b=b.xAxis&&b.xAxis[0];e&&(e.setCommonConfigArr(h,!0,!1,!1),e.configure());b&&(b.setCommonConfigArr(g,!1,a.reverseXAxis,!1),b.configure())},_createLegend:function(){var a=this.components,c=Q.register("component",["legend","legend"]);Ga=a.legend=new c;Ga.chart=this;Ga.init()},_createGradientLegend:function(){var a=
this.components,c;this.hasGradientLegend&&(c=a.gradientLegend=a.gradientLegend||new (Q.register("component",["gradientLegend","gradientLegend"])),a.postLegendInitFn=c.init({chart:this}))},_setCategories:function(){var a=this.jsonData,c=this.components.xAxis,a=a.categories&&a.categories[0].category;c&&c[0].setCategory(a)},_getDiff:function(a,c,d,b){d>a&&(a=d,c=b);return{diff:a,startIndex:c}},_createDatasets:function(){var a,c=this.components,b=c.xAxis[0],h=this.jsonData,e=h.dataset,f=e&&e.length,g,
l,k,t=this.defaultDatasetType,p=this.applicableDSList,m=this.components.legend.components.items||[],D,w,z,r=this.config.isstacked,n,B,K=[],q=this.isRealTime,u=this.config.catLen,R={};e&&0!==e.length||this.setChartMessage();this.config.categories=h.categories&&h.categories[0].category;g=c.dataset||(c.dataset=[]);l=g.length;for(h=0;h<f;h++)if(z=e[h],z.seriesname&&(z.seriesname=G(z.seriesname)),k=z.parentyaxis||F,w=(w=this.isDual&&"s"===k.toLowerCase()?d(z.renderas,this.sDefaultDatasetType):d(z.renderas,
t))&&w.toLowerCase(),p[w]||(w=t),a=Q.get("component",["dataset",w]))void 0===R[w]?R[w]=0:R[w]++,n="datasetGroup_"+w,k=Q.register("component",["datasetGroup",w]),(D=c[n])&&K.push(D),k&&!D&&(D=c[n]=new k,D.chart=this,D.init()),(k=g[h])?(w=b.getCategoryLen(),a=u-w,n=q?k.components:k.JSONData,B=n.data&&n.data.length,n=q?0:z.data&&z.data.length||0,B-=n,a=this._getDiff(B,n,a,w),w=a.diff,a=a.startIndex,this.config._dataUpdated=!0,0<w&&k.removeData(a,w,!1),this.config._dataUpdated=!1,g[h].JSONData=z,g[h].configure(),
g[h]._deleteGridImages&&g[h]._deleteGridImages()):(k=new a,g.push(k),k.chart=this,k.index=h,D&&(r?D.addDataSet(k,0,R[w]):D.addDataSet(k,R[w],0)),k.init(z));if(l>f){w=l-f;D&&r&&D.removeDataSet(0,h,w);c=h;for(f=w+h;c<f;c++)D&&!r&&D.removeDataSet(h,0,1),Da.call(g[c]);g.splice(h,w);m.splice(h,w)}this.config.catLen=b.getCategoryLen()},_drawDataset:function(){var a=this.components.dataset,c,d=a.length,b,h,e={},f=[];for(b=0;b<d;b++)c=a[b],(h=c.groupManager)?e[c.type]=h:f.push(c);for(h in e)e[h].skipOverlapPlot(),
e[h].draw();d=f.length;for(b=0;b<d;b++)f[b].draw();this._setRTdata&&this._setRTdata()},_drawCanvas:function(){var a=this.jsonData.chart,d=this.components,b=this.config,h=this.graphics,e=d.paper,f=d.canvas,d=f.graphics,g=f.config,f=g.clip={},l=d.canvasBorderElement,k=this.get(M,U),t=k.animType,p=k.animObj,D=k.dummyObj,k=k.duration,w=d.canvasElement,z=b.canvasLeft,G=b.canvasTop,r=b.canvasWidth,B=b.canvasHeight,F=g.xDepth=b.xDepth||0,b=g.yDepth=b.yDepth||0,h=h.canvasGroup,K=g.canvasBorderRadius,q=g.canvasBorderWidth,
u=.5*q,R=g.canvasBorderColor,L=g.canBGColor,P=g.canBGAlpha,aa=g.shadow,a=g.showCanvasBG=!!c(a.showcanvasbg,1),v=g.shadowOnCanvasFill,Z=g.showCanvasBorder,g={x:z-u,y:G-u,width:r+q,height:B+q,r:K,"stroke-width":q,stroke:R,"stroke-linejoin":2<q?m:n};Z?l?(l.show(),l.animateWith(D,p,{x:z-u,y:G-u,width:r+q,height:B+q,r:K},k,t),l.attr({"stroke-width":q,stroke:R,"stroke-linejoin":2<q?m:n}),l.shadow(aa)):d.canvasBorderElement=e.rect(g,h).shadow(aa):l&&l.hide();f["clip-canvas"]=[Y(0,z-F),Y(0,G-b),Y(1,r+2*F),
Y(1,B+b)];f["clip-canvas-init"]=[Y(0,z-F),Y(0,G-b),1,Y(1,B+2*b)];a?(g={x:z,y:G,width:r,height:B,r:K,"stroke-width":0,stroke:"none",fill:na(L)},w?(w.show(),w.animateWith(D,p,{x:z,y:G,width:r,height:B,r:K},k,t),w.attr({"stroke-width":0,stroke:"none",fill:na(L)})):w=d.canvasElement=e.rect(g,h),v?w.shadow({opacity:P/100}):w.shadow(!1)):w&&w.hide()},_getBackgroundCosmetics:function(){var a=this.jsonData.chart,c=this.components.colorManager,b=this.is3D?Ta.chart3D:Ta.chart2D;return{FCcolor:{color:d(a.bgcolor,
this.bgColor,c.getColor(b.bgColor)),alpha:d(a.bgalpha,this.bgAlpha,c.getColor(b.bgAlpha)),angle:d(a.bgangle,c.getColor(b.bgAngle)),ratio:d(a.bgratio,c.getColor(b.bgRatio))}}},_manageCaptionSpacing:function(a,c){return this.components.caption.manageSpace(a,c)},_manageCaptionPosition:function(){this.components.caption.managePosition()},drawActionBar:function(){var a=this.config,c=this.components,d=c.actionBar||{},b=this.graphics,h=b.toolbarWrapperGroup,e=c.paper,f=d.componentGroups[0].btnConfig,c=d&&
d.getLogicalSpace();d.toolbarConfig.fill=Sa;d.toolbarConfig.vPadding=0;d.toolbarConfig.borderColor=Sa;h||(h=b.toolbarWrapperGroup=e.group("toolbarWrapper",b.parentGroup).insertBefore(b.datalabelsGroup));f.spaceNotHardCoded?d.draw("b"===f.vAlign&&"r"===f.hAlign?a.width-a.marginRight-c.width:a.marginLeft,a.height-a.marginBottom-c.height,{parentGroup:h}):d.draw(f.x,f.y);d.drawn=!0},_drawChartMenuBar:function(){var a=this.components.chartMenuBar,c=a.getLogicalSpace(),d=a.toolbarConfig,b=a.componentGroups[0].btnConfig,
h=b.vDirection,e=b.hDirection,f=b.y,g=b.x;d.fill=Sa;d.borderColor=Sa;b.spaceNotHardCoded?(f+=b.vMargin*h+oa(0,c.height*h),g+=b.hMargin*e-Y(0,c.width*e),a.draw("l"===b.hAlign?g+c.width:g-c.width,f)):a.draw(g,f);a.drawn=!0},_drawLogo:function(){var a=this,c=a.components.paper,d=a.config,h=d.borderWidth||0,e=d.height,f=d.width,g=a.graphics.logoImage,l=d.logoURL,k=d.logoAlpha/100,p=d.logoPosition,m=d.logoLink,D=d.logoScale,w=d.logoLeftMargin,z=d.logoTopMargin,G,r,d=a.get(M,U),n=d.animType,B=d.animObj,
F=d.dummyObj,q=d.duration,d={tr:{vAlign:V,hAlign:Ja},bl:{vAlign:T,hAlign:Fa},br:{vAlign:T,hAlign:Ja},cc:{vAlign:K,hAlign:K}},u,R,L;l?(u=new ca,(L=d[p])||(L={vAlign:V,hAlign:Fa}),u.onload=function(){R=ma("none",L.vAlign,L.hAlign,D,h,f,e,u);H&&(R.w=R.width||0,R.h=R.height||0);R.src=l;g?g.animateWith(F,B,R,q,n):g=a.graphics.logoImage=c.image(R);g.show();g.translate(w,z).css("opacity",k);m?g.css({cursor:t,_cursor:"hand"}):g.css({cursor:"default",_cursor:N});if(g.events&&g.events.length)for(r=0,G=g.events.length;r<
G;r++)g.events[r].unbind(),g.events.splice(r,1),--G,--r;g.mouseover(function(c){c=ha(a.chartInstance.ref,c);b.raiseEvent("LogoRollover",{logoURL:l,logoAlpha:100*k,logoPosition:p||"tl",logoScale:D,logoLink:m,chartX:c.chartX,chartY:c.chartY,pageX:c.pageX,pageY:c.pageY},a.chartInstance)});g.mouseout(function(c){c=ha(a.chartInstance.ref,c);b.raiseEvent("LogoRollout",{logoURL:l,logoAlpha:100*k,logoPosition:p||"tl",logoScale:D,logoLink:m,chartX:c.chartX,chartY:c.chartY,pageX:c.pageX,pageY:c.pageY},a.chartInstance)});
g.click(function(c){c=ha(a.chartInstance.ref,c);b.raiseEvent("LogoClick",{logoURL:l,logoAlpha:100*k,logoPosition:p||"tl",logoScale:D,logoLink:m,chartX:c.chartX,chartY:c.chartY,pageX:c.pageX,pageY:c.pageY},a.chartInstance,void 0,function(){m&&a.linkedItems.linkClickFN.call({link:m},a)})});b.raiseEvent("LogoLoaded",{logoURL:l,logoAlpha:100*k,logoPosition:p||"tl",logoScale:D,logoLink:m},a.chartInstance)},u.onerror=function(c){b.raiseEvent("LogoLoadError",{logoURL:l,logoAlpha:100*k,logoPosition:p||"tl",
logoScale:D,logoLink:m,error:c},a.chartInstance)},u.src=l):g&&g.hide()},_addCSSDefinition:function(a,c){var d=this.components.paper;c.color&&(c.fill=c.color);d.cssAddRule(a,c)},_allocateSpace:function(a){var c=this.components.canvas.config,d=this.config,b=d.canvasHeight,h=d.canvasWidth,e=d.availableHeight,f=d.availableWidth;d.canvasLeft+=a.left||0;d.canvasTop+=a.top||0;h=d.canvasWidth=Y(h-((a.left||0)+(a.right||0)),0);b=d.canvasHeight=Y(b-((a.top||0)+(a.bottom||0)),0);d.availableHeight=Y(e-((a.top||
0)+(a.bottom||0)),0);d.availableWidth=Y(f-((a.left||0)+(a.right||0)),0);d.canvasRight=d.canvasLeft+h;d.canvasBottom=d.canvasTop+b;c.canvasPaddingLeft=Y(c.canvasPaddingLeft,a.paddingLeft||0);c.canvasPaddingRight=Y(c.canvasPaddingRight,a.paddingRight||0);c.canvasPaddingTop=Y(c.canvasPaddingTop,a.paddingTop||0);c.canvasPaddingBottom=Y(c.canvasPaddingBottom,a.paddingBottom||0)},_updateCategory:function(a){var c=this.jsonData,c=c.categories&&c.categories[0].category,d=a.category,b=d.length,h=a.index,e=
a.prepend;a=a.add;var f;for(f=0;f<b;f++)h?(a&&c.splice(h-1+f,0,d[f]),!a&&(c[h-1+f]=d[f])):e?(a&&c.splice(f,0,d[f]),!a&&(c[f]=d[f])):(a&&c.push(d),!a&&(c[c.length-1]=d))},realTimeUpdate:function(a){var c=this.components,d=c.xAxis&&c.xAxis[0],c=c.dataset,b=a.dataset;a=a.categories&&a.categories.category||[];var h=d&&d.getCategoryLen(),e=this.config.realTimeConfig=this.config.realTimeConfig||(this.config.realTimeConfig={}),f=0,g;if(c){if(d){d.categoryInsert(h,a,!0);h=0;for(g=a.length;h<g;h++)a[h].vline||
(f+=1);d.categoryDelete(0,f,!0)}this.config._sumValuesUpdated=!1;h=0;for(g=c.length;h<g;h++)f=b[h],c[h].addData(f),c[h].removeData(0,f.data.length),c[h].maxminFlag&&(e.maxminFlag=c[h].maxminFlag)}},_RTmanageSpace:function(){var a=this.config,c=this.components,d=c.xAxis[0],b=c.yAxis[0],h=c.yAxis[1],e,f=c.canvas.config,c=f.canvasBorderWidth,g=f.canvasPaddingTop,l=f.canvasPaddingBottom,k=f.canvasPadding||0,t=f.canvasPaddingLeft,f=f.canvasPaddingRight,p;e=a.xAxisSpaceAllocation;p=a.yAxisSpaceAllocation||
[];var m=p[0]&&p[0].spaceTaken||{},D=p[1]&&p[1].spaceTaken||{},w=a.primaryAxisOnleft,z,G,r;e=(a.xAxisSpaceAllocation=d.placeAxis(a.availableHeight+e.bottom)).bottom-e.bottom;0!==e&&(this._allocateSpace({bottom:e}),e=a.availableWidth,p[0].spaceTaken=e=b.placeAxis(e+m.left),this._allocateSpace({left:e.left-m.left}),e=a.availableWidth,m=a.canvasLeft-c,G=a.canvasRight+c,h&&(z=G,r=m,0===w&&(w=m,m=z,z=w,w=G,G=r,r=w),p[1].spaceTaken=p=h.placeAxis(e+(D.right||0)),this._allocateSpace({right:(p.right||0)-(D.right||
0)}),h.setAxisDimention({x:z,y:a.canvasTop+g,opposite:r,axisLength:a.canvasHeight-g-l})),d&&d.setAxisDimention({x:a.canvasLeft+Y(t,k),y:a.canvasBottom+(a.shift||0)+c,opposite:a.canvasTop-c,axisLength:a.canvasWidth-Y(t,k)-Y(f,k)}),b&&b.setAxisDimention({x:m,y:a.canvasTop+g,opposite:G,axisLength:a.canvasHeight-g-l}),b.draw(),this._drawCanvas())},realTimeDraw:function(a,c,d,h,e){var f=this.components,g=f.xAxis&&f.xAxis[0],l=f.yAxis&&f.yAxis[0],k=f.yAxis&&f.yAxis[1],t=f.scale,f=f.dataset,p=this.config.realTimeConfig,
m=p.sync,D=p.showRTValue,w=p.maxminFlag,z,G,r=f.length;G=(new Date).getTime();this._chartAnimation(m);this.rtManageSpace&&this._RTmanageSpace();if(f){g&&g.draw();this._setAxisLimits();w&&l&&l.draw();k&&k.draw();w&&t&&t.draw();for(g=0;g<r;g++)z=f[g].groupManager,!z&&f[g].draw();D&&this._drawRealTimeValue&&this._drawRealTimeValue();z&&z.draw()}this._setRTdata&&this._setRTdata();G=(new Date).getTime()-G;c={data:c,updateObject:p.legacyUpdateObj,prevData:d,source:a?"XmlHttpRequest":"feedData",latency:G};
a&&(c.networkLatency=e,c.url=h);b.raiseEvent("realTimeUpdateComplete",c,this.chartInstance)},_getPrevData:function(){return this.config.realTimeConfig&&this.config.realTimeConfig.prevData},feedData:function(a,c,d,b){var h=this,e=h.config.realtimeEnabled,f=h.config.realTimeConfig||(h.config.realTimeConfig={}),g,l=h.components,k=l.xAxis,t=h.components.dataset,p,m,D=f.clearInterval,w=f.refreshInterval,z=f.updateInterval,G=h.linkedItems.timers||(h.linkedItems.timers={setTimeout:{},setInterval:{}}),r=
t.length,n=f.prevData;g=h._linearDataParser(a);if(e&&h.chartInstance.isActive()){if(f.clear){for(e=0;e<r;e++)t[e]._realTimeConfigure(!0);f.clear=!1}w<z&&(w=f.refreshInterval=f.updateInterval);l.messageLogger&&l.messageLogger.addLog(g);l.alertManager&&l.alertManager.processRTData(g);h.realTimeUpdate(g);h.canvasPadding&&h._adjustCanvasPadding();w&&!1===f.clearIntervalFlag?(h.realTimeDraw(c,a,n,d,b),f.refreshIntervalFlag=!1):w&&!f.refreshIntervalFlag?(f.refreshIntervalFlag=!0,G.setTimeout.loadData=setTimeout(function(){p=
(new Date).getTime();h.realTimeDraw(c,a,n,d,b);m=(new Date).getTime();f.refreshIntervalFlag=!1;f.refreshIntervalTimeDifference=m-p},1E3*w-(f.refreshIntervalTimeDifference||0)-(b||0))):w||h.realTimeDraw(c,a,n,d,b);D&&!f.clearIntervalFlag&&k&&(f.clearIntervalFlag=!0,G.setTimeout.clearData=setTimeout(function(a){p=(new Date).getTime();try{clearTimeout(a.setTimeout.loadData)}catch(c){clearTimeout(G.setTimeout.loadData)}h._clearChart();m=(new Date).getTime();f.clearIntervalTimeDifference=m-p;f.clearIntervalFlag=
!1},1E3*D-(f.clearIntervalTimeDifference||0)-(b||0),G));return!0}return!1},_clearChart:function(a){var c=this.components,d=c.xAxis&&c.xAxis[0],c=c.dataset,b=d.getCategoryLen(),h=this.config.realTimeConfig||(this.config.realTimeConfig={}),e=c.length;h.clear=!0;if(c){d&&d.categoryDelete(0,b,!0);this.config._sumValuesUpdated=!1;for(b=0;b<e;b++)d=c[b],c[b].removeData(0,d.components.data.length),c[b].maxminFlag&&(h.maxminFlag=c[b].maxminFlag);this.realTimeDraw()}this._setRealTimeCategories();v.raiseEvent("ChartCleared",
{source:a},this.chartInstance,[this.id,a])},_linearDataParser:function(c,d){var b,h,e,f,g,l,k,t,p,m,D,w,z,G,r,n,B,K,q,u,R,L,P=this.components.dataset,P=P&&P.length;G=this.config.realTimeConfig;var aa=G.prevData=[],v=G.legacyUpdateObj={},Z=v.values=[],E=v.target=[],S=v.valueVisibility=[],V=v.toolTexts=[],T=v.toolTextsTarget=[],X=v.colors=[],C=v.links=[],A=0,H={categories:{category:[]},dataset:[]},Ra=H.categories.category,N=H.dataset,J,ca=c,Ia;c=c&&c.toString&&c.toString()||F;this.rtParserModify&&(ca=
ca.replace(/([^\\])(\|)/g,"$1,"),c=c.replace(/\|/g,","));b=c.split("&");G=0;for(r=b.length;G<r;G+=1)if(h=b[G].split("="),e=h[1],h=h[0],h!==a&&void 0!==h&&void 0!==e&&(e!==a||d))switch(J=h.toLowerCase(),J){case "label":v.labels=n=e.split(",");break;case "vline":v.vlines=B=e.split(",");break;case "vlinelabel":v.vlineLabels=p=e.split(",");break;case "vlinecolor":v.vlineColors=m=e.split(",");break;case "vlinethickness":v.vlineThickness=D=e.split(",");break;case "vlinedashed":v.vlineDashed=w=e.split(",");
break;case "value":K=e.split("|");break;case "target":q=e.split("|");break;case "showlabel":v.showLabels=z=e.split(",");break;case "showvalue":f=e.split("|");break;case "tooltext":g=(g=(g=ca.match(/tooltext=(.*?\\&)*.*?[^\\]&/i))?g[0].substr(9,g[0].length-10):ca.match(/(tooltext=)(.*)/i)[2])&&g.replace(/([^\\])(\|)/g,"$1_FC@@**");g=g.split("_FC@@**");break;case "targettooltext":l=e.split("|");break;case "link":t=e.split("|");break;case "color":k=e.split("|");break;case "datastamp":v.dataStamp=u=e;
break;case "stopupdate":v.pause=R="1"==e;break;case "clear":v.clear=L="1"==e;break;default:v[h]=H[h]=e}b=K&&K.length;for(G=0;G<b;G++)Z[G]=K[G].split(","),E[G]=q&&q[G]&&q[G].split(","),S[G]=f&&f[G]&&f[G].split(","),T[G]=l&&l[G]&&l[G].split(","),X[G]=k&&k[G]&&k[G].split(","),C[G]=t&&t[G]&&t[G].split(","),g&&(Ia=g[G])&&(Ia=Ia.replace(/([^\\])(\,)/g,"$1_FC@@**"),V[G]=Ia.split("_FC@@**")),A=Y(A,Z[G].length);f=Y(n&&n.length||0,A||0);for(G=0;G<f;G++)Ra.push({label:n&&n[G],color:m&&m[G],showlabel:z&&z[G]});
B&&Ra.push({label:p&&p[0],vline:B&&B[0],color:m&&m[0],thickness:D&&D[0],dashed:w&&w[0],showlabel:z&&z[0]});for(G=0;G<P;G++){D={};p=D.data=[];w=aa[G]=[];for(m=0;m<f;m++)p.push({value:Z[G]&&Z[G][m],target:E[G]&&E[G][m],showvalue:S[G]&&S[G][m],tooltext:V[G]&&V[G][m]&&V[G][m].replace(/\\/g,""),tooltexttarget:T[G]&&T[G][m],color:X[G]&&X[G][m],link:C[G]&&C[G][m]}),w.push(Z[G]&&Z[G][m]);N.push(D)}R&&this._stopUpdate();L&&this._clearChart();u&&(this.config.dataStamp=u);return H},exportChart:function(a){return v.exportChart.call(this,
a)},chartHoverManager:function(){return function(a){var c=a.type,d=a.data,b=d.linkedItems.eventListeners||(d.linkedItems.eventListeners=[]);"mouseover"!==c&&"touchstart"!==c||!1!==d.mouseStateIn||(d.mouseStateIn=!0,d.onContainerRollOver(a),b.push(ra(H?u:A,"mouseover",d.winMouseHover,d)))}}(),setChartEvents:function(){var a=this.linkedItems.eventListeners||(this.linkedItems.eventListeners=[]),d=this.components.paper.canvas,b=this.linkedItems.container,h=c(this.jsonData.chart.enablechartmousemoveevent,
0);qa(b,"click",this.onContainerClick);a.push(ra(b,"click",this.onContainerClick,this));qa(d,"mouseover",this.chartHoverManager,this);qa(d,"touchstart",this.chartHoverManager,this);qa(d,"mouseout",this.chartHoverManager,this);qa(d,"touchend",this.chartHoverManager,this);a.push(ra(d,"mouseover touchstart mouseout touchend",this.chartHoverManager,this));qa(b,"mousemove",this.onContainerMouseMove,this);qa(b,"touchmove",this.onContainerMouseMove,this);h&&a.push(ra(b,"mousemove touchmove",this.onContainerMouseMove,
this))},setChartCursor:function(){var a=this.config.link,c=this.components.paper.canvas.style;J.svg?c.cursor=a?t:"default":this.components.paper.canvas.style.cursor=a?"hand":"default"},onContainerClick:function(a){var c=a.target||a.originalTarget||a.srcElement||a.relatedTarget||a.fromElement,d=c&&c.parentElement,h=c&&c.nodeName.toLowerCase(),e=a.data,f=e.chartInstance;a=v.getMouseCoordinate(e.linkedItems.container,a.originalEvent,e);var g;f.ref&&(g=aa({height:f.args.height,width:f.args.width,pixelHeight:f.ref.offsetHeight,
pixelWidth:f.ref.offsetWidth,id:f.args.id,renderer:f.args.renderer,container:f.options.containerElement},a),hb.addJob(function(){b.raiseEvent("chartclick",g,e.chartInstance)},ib.chartClick),c&&c.ishot&&e||"tspan"===h&&d&&d.ishot&&e||e.config.link&&e.linkedItems.linkClickFN.call(e,e))},onContainerMouseMove:function(a){var c=a.data,d=c.chartInstance;a=v.getMouseCoordinate(c.linkedItems.container,a.originalEvent,c);d.ref&&(d=aa({height:d.args.height,width:d.args.width,pixelHeight:d.ref.offsetHeight,
pixelWidth:d.ref.offsetWidth,id:d.args.id,renderer:d.args.renderer,container:d.options.containerElement},a),b.raiseEvent("chartMouseMove",d,c.chartInstance))},onContainerRollOver:function(a){var c=a.data,d=c.chartInstance;a=v.getMouseCoordinate(c.linkedItems.container,a.originalEvent,c);d.ref&&(d=aa({height:d.args.height,width:d.args.width,pixelHeight:d.ref.offsetHeight,pixelWidth:d.ref.offsetWidth,id:d.args.id,renderer:d.args.renderer,container:d.options.containerElement},a),b.raiseEvent("chartRollOver",
d,c.chartInstance))},onContainerRollOut:function(a){var c=a.chart,d=c.chartInstance;a=v.getMouseCoordinate(c.linkedItems.container,a.event,c);d.ref&&(d=aa({height:d.args.height,width:d.args.width,pixelHeight:d.ref.offsetHeight,pixelWidth:d.ref.offsetWidth,id:d.args.id,renderer:d.args.renderer,container:d.options.containerElement},a),b.raiseEvent("chartRollOut",d,c.chartInstance))},mouseStateIn:!1,winMouseHover:function(a){var c=a.originalEvent,c=c.target||c.originalTarget||c.srcElement||c.relatedTarget||
c.fromElement,d=a.data,b=d.components.paper;a={chart:d,event:a.originalEvent};H?b.getById(c.parentNode.raphaelid)||(d.onContainerRollOut(a),d.mouseStateIn=!1,qa(u,"mouseover",d.winMouseHover)):c.viewportElement||(d.mouseStateIn=!1,d.onContainerRollOut(a),qa(A,"mouseover",d.winMouseHover))},_show:function(){this.graphics&&this.graphics.parentGroup&&this.graphics.parentGroup.show()},_hide:function(){this.graphics&&this.graphics.parentGroup&&this.graphics.parentGroup.hide()},getJobList:function(){this.jobList||
(this.jobList={trackerDrawID:[],labelDrawID:[],entityDrawID:[],kdTreeID:[],draw:[],eiMethods:[],postRender:[]});return this.jobList},_setDatasetOrder:function(){var a=this.config,d=this.components.dataset,b=c(this.jsonData.chart.areaovercolumns,1),h={line:[],area:[],column:[]},e=d.length,f,g;for(f=0;f<e;f++)g=d[f],(h[g.type]||h.line).push(g);a.datasetOrder=b?h.column.concat(h.area).concat(h.line):h.area.concat(h.column).concat(h.line)}},ta.base,{valuefontbold:0,stickytracking:1,usemessagelog:0,zeroplanethickness:void 0,
animationeffect:"easeIn",showshadow:1,showhovereffect:void 0,plothovereffect:void 0,anchorhovereffect:void 0,plotborderdashed:void 0,stack100percent:void 0,showpercentvalues:void 0,showpercentintooltip:void 0,plotbordercolor:void 0,showtooltip:1,seriesnameintooltip:1,rotatevalues:0,minimizetendency:0,plotfillangle:270,valuepadding:2,useplotgradientcolor:1,plotborderthickness:1,plotfillalpha:P,showvalues:1,valueposition:z,tooltipsepchar:", ",usedataplotcolorforlabels:0,placevaluesinside:0,showplotborder:1,
use3dlighting:1,useroundedges:0,plotspacepercent:20,plotpaddingpercent:void 0,plotfillratio:void 0,maxcolwidth:50,plotborderdashlen:5,plotborderdashgap:4});Q.register("component",["caption","caption",{pIndex:2,customConfigFn:null,init:function(){var a=this.graphics;!this.components&&(this.components={});!a&&(this.graphics={})},configure:function(){var a=this.chart,b=a.jsonData.chart,h=a.components,g=h.caption,l=g.config,k=a.config.style,t=k.outCanfontFamily,m=k.outCancolor,k=k.fontSize,h=h.subCaption,
D=h.config;g.components.text=G(b.caption);h.components.text=G(b.subcaption);l.style={fontFamily:d(b.captionfont,t),color:pa(d(b.captionfontcolor,m).replace(/^#? ([a-f0-9]+)/ig,"#$1")),fontSize:c(b.captionfontsize,k+3)+Ea,fontWeight:0===c(b.captionfontbold)?N:E};l.align=D.align=d(b.captionalignment,La);switch(l.align){case Ja:l.align=p;break;case Fa:l.align=e;break;default:l.align=K}l.isOnTop=D.isOnTop=c(b.captionontop,1);l.isOnLeft=!c(b.captiononright,0);l.captionPosition=f(b.captionposition,V).toLowerCase();
l.alignWithCanvas=D.alignWithCanvas=c(a.aligncaptionwithcanvas,b.aligncaptionwithcanvas,1);l.horizontalPadding=D.horizontalPadding=c(b.captionhorizontalpadding,l.alignWithCanvas?0:15);l.drawCaption=!0;ga(l.style);D.style={fontFamily:d(b.subcaptionfont,b.captionfont,t),color:pa(d(b.subcaptionfontcolor,b.captionfontcolor,m).replace(/^#? ([a-f0-9]+)/ig,"#$1")),fontSize:c(b.subcaptionfontsize,c(Y(c(b.captionfontsize)-3,-1),k)+c(a.subTitleFontSizeExtender,1))+Ea,fontWeight:0===c(b.subcaptionfontbold,a.subTitleFontWeight,
b.captionfontbold)?N:E};ga(D.style)},draw:function(){var a=this.chart,c=a.config,d=a.components,b=a.config.textDirection,h=a.graphics,e=h.captionGroup,f=d.paper,g=a.linkedItems.smartLabel,l=d.caption,t=l.graphics,p=t.captionElement,m=d.subCaption,d=m.graphics,D=d.subCaptionElement,w=l.components,l=l.config,z=m.config,G=l.style,n=z.style,m=m.components,B=w.text,F=m.text,q=l.x,u=l.align,R,L=c.showToolTip;R=a.get(M,U);var a=R.animType,P=R.animObj,aa=R.dummyObj,v=R.duration;!B&&!F||e||(e=h.captionGroup=
f.group("caption"),e.trackTooltip(!0),h.tracker?e.insertBefore(h.trackerGroup):e.insertAfter(h.datasetGroup));B?(R={text:w.text,fill:G.color,x:q,y:l.y,"text-anchor":u||K,"vertical-align":l.verticalAlign||V,visibility:l.drawCaption?k:r,direction:b},p?(p.animateWith(aa,P,{x:q,y:l.y,"text-anchor":u||K,"vertical-align":l.verticalAlign||V,direction:b},v,a),p.attr({"text-anchor":u||K,text:w.text,fill:G.color,visibility:l.drawCaption?k:r}),p.css(G)):p=t.captionElement=f.text(R,G,e),p.tooltip(w.originalText),
g&&(g.useEllipsesOnOverflow(c.useEllipsesWhenOverflow),g.setStyle(G),g.getOriSize(w.text))):p&&(t.captionElement=p.remove());F?(R={text:m.text,fill:n.color,x:q,y:z.y,"text-anchor":u||K,"vertical-align":V,direction:b,visibility:l.drawCaption?k:r},D?(D.animateWith(aa,P,{x:q,y:z.y,"text-anchor":u||K,"vertical-align":V,direction:b},v,a),D.attr({"text-anchor":u||K,text:m.text,fill:n.color,visibility:l.drawCaption?k:r}),D.css(n)):D=d.subCaptionElement=f.text(R,n,e),D.tooltip(m.originalText)):D&&(d.subCaptionElement=
D.remove());e&&e.trackTooltip(L?!0:!1);B||F||!e||(h.captionGroup=e.remove())},manageSpace:function(d,b){var h=this.chart,e=h.config,f=h.components,g=f.caption,l=f.subCaption,k=g.config,t=l.config,g=g.components,l=l.components,p=h.jsonData.chart,h=h.linkedItems.smartLabel,m=d,D=G(p.caption),w=G(p.subcaption),z=p=c(p.captionpadding,10),r=e.canvasWidth,n=!1,B,K,q=0,u=0,R=0,L=0,P=0,u=Y(f.canvas.config.canvasBorderThickness,0),aa=f=0;!b&&(b=r);if(3<m){p<u&&(p=u+2);D!==a&&(B=k.style,L=fa(c(parseFloat(B.fontHeight,
10),parseFloat(B.lineHeight,10),12)));w!==a&&(K=t.style,P=c(parseInt(K.fontHeight,10),parseInt(K.lineHeight,10),12));if(0<L||0<P)m=Y(m,0),q=L+P+p,q>m?(u=m-q,n=!0,u<p?p=Y(u,5):(u-=p,p=0,P>u?(R=P-u+10,P=0,l._originalText=l.text,l.text=F):(u-=P,P=0,L>u&&(R=L-u)))):R=m-q,h.useEllipsesOnOverflow(e.useEllipsesWhenOverflow),0<L&&(h.setStyle(B),L+=R,B=h.getSmartText(D,b,L),R=L-B.height,k.height=L=B.height,g.text=B.text,g.originalText=B.tooltext?B.tooltext:!1,f=B.width),0<P&&(h.setStyle(K),P+=R,K=h.getSmartText(w,
b,P),R=P-K.height,P=K.height,l.text=K.text,t.height=K.height,l.originalText=K.tooltext?K.tooltext:!1,aa=K.width),n&&0<R&&(p+=oa(z-p,R)),k.captionPadding=p,k.height=L,k.width=f,t.width=aa,t.height=P,q=L+P+p;q>e.canvasHeight?(q=0,k.drawCaption=!1):k.drawCaption=!0;e=k.isOnTop?{top:q}:{bottom:q,top:5}}else e={bottom:0,top:0},k.drawCaption=!1;return e},managePosition:function(){var a=this.chart,d=a.config,b=a.components,h=b.caption,f=h.config,g=f.widgetValueHeight||0,l=b.subCaption.config,k=f.x,t=d.canvasWidth,
k=f.align,h=h.components.text,m=f.alignWithCanvas,D=f.horizontalPadding,w=d.width,z=d.canvasLeft,G=d.canvasRight,r=d.marginRight,n=d.marginLeft,d=d.marginTop,B=(ua(z)||0)+c(t,w)/2,t=f.height,F=l.height,K=b.legend.config,q=K.height,u=K.legendPadding,R=K.legendPos,L=b.gradientLegend||{},P=0,aa=!!(L.conf||{}).showLegend,v=a.config.borderWidth,b=b.actionBar,Z=0;K.isActive||(q=0);aa&&a.config.gLegendEnabled&&(P=L.getLogicalSpace().height);switch(k){case p:k=m?G-D:w-D;break;case e:k=m?z+D:D;break;default:k=
m?B:n+.5*(w-n-r)||w/2}f.x=k;f.isOnTop?f.y=(v||0)+(d||0):(R===Ja&&(P=q=u=0),b&&(k=b.getLogicalSpace()||{},Z=k.height,void 0===Z||Infinity===Z||0>Z)&&(Z=0),f.y=a.config.height-a.config.marginBottom-t-(F||0)-(v||0)-(u||0)-(q||0)-P-g-Z);f.y+=f._offsetHeight||0;l.y=h?f.y+t+2:f.y||d||0}}]);Q.register("component",["caption","subcaption",{pIndex:2,init:function(){var a=this.graphics;!this.components&&(this.components={});!a&&(this.graphics={})}}]);ta("scrollbase",{standaloneInit:!1,_scrollBar:function(){var a=
[];return{get:function(){return a},clear:function(){a.length=0},add:function(c,d){a.push({conf:c,handler:d})}}}()},ta.mscartesian,{enablemousetracking:!0});ta("msinversecartesian",{standaloneInit:!1,_createAxes:function(){var a=this.components,c=Q.register("component",["axis","cartesian"]),d;a.yAxis=[];a.xAxis=[];a.yAxis[0]=d=new c;a.xAxis[0]=a=new c;d.chart=this;a.chart=this;d.init();a.init();this._setCategories()},_feedAxesRawData:function(){var a=this.components,b=this.config,h=a.colorManager,
e=this.jsonData,f=e.chart,g,l=(g=this.is3d)?Ta.chart3D:Ta.chart2D;g={outCanfontFamily:d(f.outcnvbasefont,f.basefont,"Verdana,sans"),outCanfontSize:la(f.outcnvbasefontsize,f.basefontsize,10),outCancolor:d(f.outcnvbasefontcolor,f.basefontcolor,h.getColor(l.baseFontColor)).replace(/^#? ([a-f0-9]+)/ig,"#$1"),axisNamePadding:f.xaxisnamepadding,axisValuePadding:f.labelpadding,axisNameFont:f.xaxisnamefont,axisNameFontSize:f.xaxisnamefontsize,axisNameFontColor:f.xaxisnamefontcolor,axisNameFontBold:f.xaxisnamefontbold,
axisNameFontItalic:f.xaxisnamefontitalic,axisNameBgColor:f.xaxisnamebgcolor,axisNameBorderColor:f.xaxisnamebordercolor,axisNameAlpha:f.xaxisnamealpha,axisNameFontAlpha:f.xaxisnamefontalpha,axisNameBgAlpha:f.xaxisnamebgalpha,axisNameBorderAlpha:f.xaxisnameborderalpha,axisNameBorderPadding:f.xaxisnameborderpadding,axisNameBorderRadius:f.xaxisnameborderradius,axisNameBorderThickness:f.xaxisnameborderthickness,axisNameBorderDashed:f.xaxisnameborderdashed,axisNameBorderDashLen:f.xaxisnameborderdashlen,
axisNameBorderDashGap:f.xaxisnameborderdashgap,useEllipsesWhenOverflow:f.useellipseswhenoverflow,divLineColor:d(f.vdivlinecolor,f.divlinecolor,h.getColor(l.divLineColor)),divLineAlpha:d(f.vdivlinealpha,f.divlinealpha,g?h.getColor("divLineAlpha3D"):h.getColor("divLineAlpha")),divLineThickness:c(f.vdivlinethickness,f.divlinethickness,1),divLineIsDashed:!!c(f.vdivlinedashed,f.vdivlineisdashed,f.divlinedashed,f.divlineisdashed,0),divLineDashLen:c(f.vdivlinedashlen,f.divlinedashlen,4),divLineDashGap:c(f.vdivlinedashgap,
f.divlinedashgap,2),showAlternateGridColor:c(f.showalternatevgridcolor,0),alternateGridColor:d(f.alternatevgridcolor,h.getColor("altVGridColor")),alternateGridAlpha:d(f.alternatevgridalpha,h.getColor("altVGridAlpha")),numDivLines:f.numvdivlines,maxLabelHeight:f.maxlabelheight,labelFont:f.labelfont,labelFontSize:f.labelfontsize,labelFontColor:f.labelfontcolor,labelFontAlpha:f.labelalpha,labelFontBold:f.labelfontbold,labelFontItalic:f.labelfontitalic,axisName:f.xaxisname,axisMinValue:f.xaxisminvalue,
axisMaxValue:f.xaxismaxvalue,setAdaptiveMin:f.setadaptivexmin,adjustDiv:f.adjustvdiv,labelDisplay:f.labeldisplay,showLabels:f.showlabels,rotateLabels:f.rotatelabels,slantLabel:c(f.slantlabels,f.slantlabel),labelStep:c(f.labelstep,f.xaxisvaluesstep),showAxisValues:c(f.showxaxisvalues,f.showxaxisvalue),showLimits:f.showvlimits,showDivLineValues:c(f.showvdivlinevalues,f.showvdivlinevalues),showZeroPlane:f.showvzeroplane,zeroPlaneColor:f.vzeroplanecolor,zeroPlaneThickness:f.vzeroplanethickness,zeroPlaneAlpha:f.vzeroplanealpha,
showZeroPlaneValue:f.showvzeroplanevalue,trendlineColor:f.trendlinecolor,trendlineToolText:f.trendlinetooltext,trendlineThickness:f.trendlinethickness,trendlineAlpha:f.trendlinealpha,showTrendlinesOnTop:f.showtrendlinesontop,showAxisLine:c(f.showxaxisline,f.showaxislines,f.drawAxisLines,0),axisLineThickness:c(f.xaxislinethickness,f.axislinethickness,1),axisLineAlpha:c(f.xaxislinealpha,f.axislinealpha,100),axisLineColor:d(f.xaxislinecolor,f.axislinecolor,"#000000")};b={outCanfontFamily:d(f.outcnvbasefont,
f.basefont,"Verdana,sans"),outCanfontSize:la(f.outcnvbasefontsize,f.basefontsize,10),outCancolor:d(f.outcnvbasefontcolor,f.basefontcolor,h.getColor(l.baseFontColor)).replace(/^#? ([a-f0-9]+)/ig,"#$1"),axisNamePadding:f.yaxisnamepadding,axisValuePadding:f.yaxisvaluespadding,axisNameFont:f.yaxisnamefont,axisNameFontSize:f.yaxisnamefontsize,axisNameFontColor:f.yaxisnamefontcolor,axisNameFontBold:f.yaxisnamefontbold,axisNameFontItalic:f.yaxisnamefontitalic,axisNameBgColor:f.yaxisnamebgcolor,axisNameBorderColor:f.yaxisnamebordercolor,
axisNameAlpha:f.yaxisnamealpha,axisNameFontAlpha:f.yaxisnamefontalpha,axisNameBgAlpha:f.yaxisnamebgalpha,axisNameBorderAlpha:f.yaxisnameborderalpha,axisNameBorderPadding:f.yaxisnameborderpadding,axisNameBorderRadius:f.yaxisnameborderradius,axisNameBorderThickness:f.yaxisnameborderthickness,axisNameBorderDashed:f.yaxisnameborderdashed,axisNameBorderDashLen:f.yaxisnameborderdashlen,axisNameBorderDashGap:f.yaxisnameborderdashgap,axisNameWidth:f.yaxisnamewidth,useEllipsesWhenOverflow:f.useellipseswhenoverflow,
rotateAxisName:c(f.rotateyaxisname,1),axisName:f.yaxisname,divLineColor:d(f.divlinecolor,h.getColor(l.divLineColor)),divLineAlpha:d(f.divlinealpha,h.getColor("divLineAlpha")),divLineThickness:c(f.divlinethickness,1),divLineIsDashed:!!c(f.divlinedashed,f.divlineisdashed,0),divLineDashLen:c(f.divlinedashlen,4),divLineDashGap:c(f.divlinedashgap,2),showAlternateGridColor:c(f.showalternatehgridcolor,1),alternateGridColor:d(f.alternatehgridcolor,h.getColor("altHGridColor")),alternateGridAlpha:d(f.alternatehgridalpha,
h.getColor("altHGridAlpha")),numDivLines:f.numdivlines,axisMinValue:f.yaxisminvalue,axisMaxValue:f.yaxismaxvalue,setAdaptiveMin:f.setadaptiveymin,adjustDiv:f.adjustdiv,labelStep:f.yaxisvaluesstep,showAxisValues:c(f.showyaxisvalues,f.showyaxisvalue),showLimits:c(f.showyaxislimits,f.showlimits,this.showLimits),showDivLineValues:c(f.showdivlinevalues,f.showdivlinevalue),showZeroPlane:f.showzeroplane,zeroPlaneColor:f.zeroplanecolor,zeroPlaneThickness:c(f.zeroplanethickness,f.divlinethickness,b.zeroplanethickness,
2),zeroPlaneAlpha:c(f.zeroplanealpha,f.zeroplanealpha,b.zeroplanealpha,80),showZeroPlaneValue:f.showzeroplanevalue,showZeroPlaneOnTop:b.showzeroplaneontop,trendlineColor:f.trendlinecolor,trendlineToolText:f.trendlinetooltext,trendlineThickness:f.trendlinethickness,trendlineAlpha:f.trendlinealpha,showTrendlinesOnTop:f.showtrendlinesontop,showAxisLine:c(f.showyaxisline,f.showaxislines,f.drawAxisLines,0),axisLineThickness:c(f.yaxislinethickness,f.axislinethickness,1),axisLineAlpha:c(f.yaxislinealpha,
f.axislinealpha,100),axisLineColor:d(f.yaxislinecolor,f.axislinecolor,"#000000")};g.vtrendlines=e.vtrendlines;b.trendlines=e.trendlines;e=a.yAxis&&a.yAxis[0];a=a.xAxis&&a.xAxis[0];e&&(e.setCommonConfigArr(b,!0,!0,!1),e.configure());a&&(a.setCommonConfigArr(g,!1,!1,!1),a.configure(),a.setAxisConfig({isRelativeAxisInverse:!0}))}},ta.mscartesian);ta("sscartesian",{standaloneInit:!1,hasLegend:!1,_createDatasets:function(){var a=this.components,c=a.legend,d=this.jsonData,b=d.dataset,h=d.data||b&&b[0].data,
f=this.defaultDatasetType,e,g,d=this._dataSegregator(h);this.config.categories=d.data;b=a.dataset||(a.dataset=[]);if(!h||0===h.length)this.setChartMessage();else if(f&&(g=Q.get("component",["dataset",f])))if(h="datasetGroup_"+f,e=Q.register("component",["datasetGroup",f]),f=a[h],e&&!f&&(f=a[h]=new e,f.chart=this,f.init()),b[0]){a=b[0];f=a.JSONData;b=a.components.data||[];h=f.data.length-(a.config.showSum||0);g=d.data&&d.data.length||0;if(h>g){if(c)for(f=g;f<h;f++)b[f]&&b[f].legendItemId&&c.removeItem(b[f].legendItemId);
a.removeData(g,h-g,!1)}a.JSONData=d;a.configure()}else a=new g,b.push(a),a.chart=this,f&&f.addDataSet(a,0,0),a.index=0,a.init(d)},_dataSegregator:function(a){var c=[];Pa(a,function(a){"true"!==a.vline&&!0!==a.vline&&1!==a.vline&&"1"!==a.vline&&c.push(a)});return{data:c}},_setCategories:function(){var a=this.jsonData,c=a.dataset;this.components.xAxis[0].setCategory(a.data||c&&c[0].data)}},ta.mscartesian,{linethickness:4});ta("msdybasecartesian",{standaloneInit:!1,_createAxes:function(){var a=this.components,
c,d=Q.register("component",["axis","cartesian"]),b;a.yAxis=[];a.xAxis=[];a.yAxis[0]=b=new d;a.yAxis[1]=c=new d;a.xAxis[0]=a=new d;b.chart=this;c.chart=this;a.chart=this;b.init();c.init();a.init();this._setCategories()},_feedAxesRawData:function(){var a=this.config,b=this.components,h=b.colorManager,f=this.jsonData,e=f.chart,g,l,k=this.is3d,t=k?Ta.chart3D:Ta.chart2D,p,m=a.primaryAxisOnleft=c(e.primaryaxisonleft,1),D=c(e.syncaxislimits,0);l=[{line:[]}];p=[{line:[]}];var w,z=f.trendlines||[];g={outCanfontFamily:d(e.outcnvbasefont,
e.basefont,"Verdana,sans"),outCanfontSize:la(e.outcnvbasefontsize,e.basefontsize,10),outCancolor:d(e.outcnvbasefontcolor,e.basefontcolor,h.getColor(t.baseFontColor)).replace(/^#? ([a-f0-9]+)/ig,"#$1"),axisNamePadding:e.xaxisnamepadding,axisValuePadding:e.labelpadding,axisNameFont:e.xaxisnamefont,axisNameFontSize:e.xaxisnamefontsize,axisNameFontColor:e.xaxisnamefontcolor,axisNameFontBold:e.xaxisnamefontbold,axisNameFontItalic:e.xaxisnamefontitalic,axisNameBgColor:e.xaxisnamebgcolor,axisNameBorderColor:e.xaxisnamebordercolor,
axisNameAlpha:e.xaxisnamealpha,axisNameFontAlpha:e.xaxisnamefontalpha,axisNameBgAlpha:e.xaxisnamebgalpha,axisNameBorderAlpha:e.xaxisnameborderalpha,axisNameBorderPadding:e.xaxisnameborderpadding,axisNameBorderRadius:e.xaxisnameborderradius,axisNameBorderThickness:e.xaxisnameborderthickness,axisNameBorderDashed:e.xaxisnameborderdashed,axisNameBorderDashLen:e.xaxisnameborderdashlen,axisNameBorderDashGap:e.xaxisnameborderdashgap,useEllipsesWhenOverflow:e.useellipseswhenoverflow,divLineColor:d(e.vdivlinecolor,
e.divlinecolor,h.getColor(t.divLineColor)),divLineAlpha:d(e.vdivlinealpha,e.divlinealpha,k?h.getColor("divLineAlpha3D"):h.getColor("divLineAlpha")),divLineThickness:c(e.vdivlinethickness,e.divlinethickness,1),divLineIsDashed:!!c(e.vdivlinedashed,e.vdivlineisdashed,e.divlinedashed,e.divlineisdashed,0),divLineDashLen:c(e.vdivlinedashlen,e.divlinedashlen,4),divLineDashGap:c(e.vdivlinedashgap,e.divlinedashgap,2),showAlternateGridColor:c(e.showalternatevgridcolor,0),alternateGridColor:d(e.alternatevgridcolor,
h.getColor("altVGridColor")),alternateGridAlpha:d(e.alternatevgridalpha,h.getColor("altVGridAlpha")),numDivLines:e.numvdivlines,maxLabelHeight:e.maxlabelheight,labelFont:e.labelfont,labelFontSize:e.labelfontsize,labelFontColor:e.labelfontcolor,labelFontAlpha:e.labelalpha,labelFontBold:e.labelfontbold,labelFontItalic:e.labelfontitalic,axisName:e.xaxisname,axisMinValue:e.xaxisminvalue,axisMaxValue:e.xaxismaxvalue,setAdaptiveMin:e.setadaptivexmin,adjustDiv:e.adjustvdiv,labelDisplay:e.labeldisplay,showLabels:e.showlabels,
rotateLabels:e.rotatelabels,slantLabel:c(e.slantlabels,e.slantlabel),labelStep:c(e.labelstep,e.xaxisvaluesstep),showAxisValues:c(e.showxaxisvalues,e.showxaxisvalue),showLimits:e.showvlimits,showDivLineValues:c(e.showvdivlinevalues,e.showvdivlinevalues),zeroPlaneColor:e.vzeroplanecolor,zeroPlaneThickness:c(e.vzeroplanethickness,e.vdivlinethickness,2),zeroPlaneAlpha:c(e.vzeroplanealpha,e.vdivlinealpha,a.zeroplanealpha),showZeroPlaneValue:e.showvzeroplanevalue,trendlineColor:e.trendlinecolor,trendlineToolText:e.trendlinetooltext,
trendlineThickness:e.trendlinethickness,trendlineAlpha:e.trendlinealpha,showTrendlinesOnTop:e.showtrendlinesontop,showAxisLine:k?0:c(e.showxaxisline,e.showaxislines,e.drawAxisLines,0),axisLineThickness:c(e.xaxislinethickness,e.axislinethickness,1),axisLineAlpha:c(e.xaxislinealpha,e.axislinealpha,100),axisLineColor:d(e.xaxislinecolor,e.axislinecolor,"#000000")};a={outCanfontFamily:d(e.outcnvbasefont,e.basefont,"Verdana,sans"),outCanfontSize:la(e.outcnvbasefontsize,e.basefontsize,10),outCancolor:d(e.outcnvbasefontcolor,
e.basefontcolor,h.getColor(t.baseFontColor)).replace(/^#? ([a-f0-9]+)/ig,"#$1"),axisNamePadding:c(e.pyaxisnamepadding,e.yaxisnamepadding),axisValuePadding:c(e.pyaxisvaluespadding,e.yaxisvaluespadding),axisNameFont:d(e.pyaxisnamefont,e.yaxisnamefont),axisNameFontSize:c(e.pyaxisnamefontsize,e.yaxisnamefontsize),axisNameFontColor:d(e.pyaxisnamefontcolor,e.yaxisnamefontcolor),axisNameFontBold:c(e.pyaxisnamefontbold,e.yaxisnamefontbold),axisNameFontItalic:c(e.pyaxisnamefontitalic,e.yaxisnamefontitalic),
axisNameBgColor:d(e.pyaxisnamebgcolor,e.yaxisnamebgcolor),axisNameBorderColor:d(e.pyaxisnamebordercolor,e.yaxisnamebordercolor),axisNameAlpha:c(e.pyaxisnamealpha,e.yaxisnamealpha),axisNameFontAlpha:c(e.pyaxisnamefontalpha,e.yaxisnamefontalpha),axisNameBgAlpha:c(e.pyaxisnamebgalpha,e.yaxisnamebgalpha),axisNameBorderAlpha:c(e.pyaxisnameborderalpha,e.yaxisnameborderalpha),axisNameBorderPadding:c(e.pyaxisnameborderpadding,e.yaxisnameborderpadding),axisNameBorderRadius:c(e.pyaxisnameborderradius,e.yaxisnameborderradius),
axisNameBorderThickness:c(e.pyaxisnameborderthickness,e.yaxisnameborderthickness),axisNameBorderDashed:c(e.pyaxisnameborderdashed,e.yaxisnameborderdashed),axisNameBorderDashLen:c(e.pyaxisnameborderdashlen,e.yaxisnameborderdashlen),axisNameBorderDashGap:c(e.pyaxisnameborderdashgap,e.yaxisnameborderdashgap),axisNameWidth:c(e.pyaxisnamewidth,e.yaxisnamewidth),useEllipsesWhenOverflow:e.useellipseswhenoverflow,rotateAxisName:c(e.rotateyaxisname,1),axisName:d(e.pyaxisname,e.yaxisname),divLineColor:d(e.divlinecolor,
h.getColor(t.divLineColor)),divLineAlpha:d(e.divlinealpha,h.getColor("divLineAlpha")),divLineThickness:c(e.divlinethickness,1),divLineIsDashed:!!c(e.divlinedashed,e.divlineisdashed,0),divLineDashLen:c(e.divlinedashlen,4),divLineDashGap:c(e.divlinedashgap,2),showAlternateGridColor:c(e.showalternatehgridcolor,1),alternateGridColor:d(e.alternatehgridcolor,h.getColor("altHGridColor")),alternateGridAlpha:d(e.alternatehgridalpha,h.getColor("altHGridAlpha")),numDivLines:e.numdivlines,axisMinValue:D?c(e.syaxisminvalue,
e.pyaxisminvalue,e.yaxisminvalue):c(e.pyaxisminvalue,e.yaxisminvalue),axisMaxValue:D?c(e.syaxismaxvalue,e.pyaxismaxvalue,e.yaxismaxvalue):c(e.pyaxismaxvalue,e.yaxismaxvalue),setAdaptiveMin:e.setadaptiveymin,adjustDiv:e.adjustdiv,labelStep:e.yaxisvaluesstep,showAxisValues:c(e.showyaxisvalues,e.showyaxisvalue),showLimits:c(e.showyaxislimits,e.showlimits,this.showLimits),showDivLineValues:c(e.showdivlinevalues,e.showdivlinevalue),zeroPlaneColor:e.zeroplanecolor,zeroPlaneThickness:c(e.zeroplanethickness,
e.divlinethickness,a.zeroplanethickness,2),zeroPlaneAlpha:c(e.zeroplanealpha,e.divlinealpha,a.zeroplanealpha),showZeroPlaneValue:e.showzeroplanevalue,showZeroPlaneOnTop:a.showzeroplaneontop,trendlineColor:e.trendlinecolor,trendlineToolText:e.trendlinetooltext,trendlineThickness:e.trendlinethickness,trendlineAlpha:e.trendlinealpha,showTrendlinesOnTop:e.showtrendlinesontop,showAxisLine:k?0:c(e.showyaxisline,e.showaxislines,e.drawAxisLines,0),axisLineThickness:c(e.yaxislinethickness,e.axislinethickness,
1),axisLineAlpha:c(e.yaxislinealpha,e.axislinealpha,100),axisLineColor:d(e.yaxislinecolor,e.axislinecolor,"#000000")};h={outCanfontFamily:d(e.outcnvbasefont,e.basefont,"Verdana,sans"),outCanfontSize:la(e.outcnvbasefontsize,e.basefontsize,10),outCancolor:d(e.outcnvbasefontcolor,e.basefontcolor,h.getColor(t.baseFontColor)).replace(/^#? ([a-f0-9]+)/ig,"#$1"),axisNamePadding:e.yaxisnamepadding,axisValuePadding:e.yaxisvaluespadding,axisNameFont:e.syaxisnamefont,axisNameFontSize:e.syaxisnamefontsize,axisNameFontColor:e.syaxisnamefontcolor,
axisNameFontBold:e.syaxisnamefontbold,axisNameFontItalic:e.syaxisnamefontitalic,axisNameBgColor:e.syaxisnamebgcolor,axisNameBorderColor:e.syaxisnamebordercolor,axisNameAlpha:e.syaxisnamealpha,axisNameFontAlpha:e.syaxisnamefontalpha,axisNameBgAlpha:e.syaxisnamebgalpha,axisNameBorderAlpha:e.syaxisnameborderalpha,axisNameBorderPadding:e.syaxisnameborderpadding,axisNameBorderRadius:e.syaxisnameborderradius,axisNameBorderThickness:e.syaxisnameborderthickness,axisNameBorderDashed:e.syaxisnameborderdashed,
axisNameBorderDashLen:e.syaxisnameborderdashlen,axisNameBorderDashGap:e.syaxisnameborderdashgap,axisNameWidth:e.syaxisnamewidth,useEllipsesWhenOverflow:e.useellipseswhenoverflow,rotateAxisName:c(e.rotateyaxisname,1),axisName:e.syaxisname,divLineColor:d(e.divlinecolor,h.getColor(t.divLineColor)),divLineAlpha:d(e.divlinealpha,h.getColor("divLineAlpha")),divLineThickness:c(e.divlinethickness,1),divLineIsDashed:!!c(e.divlinedashed,e.divlineisdashed,0),divLineDashLen:c(e.divlinedashlen,4),divLineDashGap:c(e.divlinedashgap,
2),showAlternateGridColor:c(e.showalternatehgridcolor,1),alternateGridColor:d(e.alternatehgridcolor,h.getColor("altHGridColor")),alternateGridAlpha:d(e.alternatehgridalpha,h.getColor("altHGridAlpha")),numDivLines:e.numdivlines,axisMinValue:D?c(e.syaxisminvalue,e.pyaxisminvalue,e.yaxisminvalue):e.syaxisminvalue,axisMaxValue:D?c(e.syaxismaxvalue,e.pyaxismaxvalue,e.yaxismaxvalue):e.syaxismaxvalue,setAdaptiveMin:e.setadaptivesymin||e.setadaptiveymin,adjustDiv:e.adjustdiv,labelStep:e.yaxisvaluesstep,showAxisValues:c(e.showsyaxisvalues,
e.showsyaxisvalue,e.showyaxisvalues,e.showyaxisvalue),showLimits:c(e.showsecondarylimits,e.showyaxislimits,e.showlimits),showDivLineValues:c(e.showdivlinesecondaryvalue,e.showyaxisvalues,e.showyaxisvalue,1),zeroPlaneColor:e.zeroplanecolor,zeroPlaneThickness:c(e.zeroplanethickness,e.divlinethickness,2),zeroPlaneAlpha:e.zeroplanealpha,showZeroPlaneValue:e.showzeroplanevalue,trendlineColor:e.trendlinecolor,trendlineToolText:e.trendlinetooltext,trendlineThickness:e.trendlinethickness,trendlineAlpha:e.trendlinealpha,
showTrendlinesOnTop:e.showtrendlinesontop,showAxisLine:k?0:c(e.showsyaxisline,e.showaxislines,e.drawAxisLines,0),axisLineThickness:c(e.syaxislinethickness,e.axislinethickness,1),axisLineAlpha:c(e.syaxislinealpha,e.axislinealpha,100),axisLineColor:d(e.syaxislinecolor,e.axislinecolor,"#000000")};g.vtrendlines=f.vtrendlines;D=0;for(t=z.length;D<t;D++)for(f=z[D]&&z[D].line||[],k=f.length,w=0;w<k;w++)e=f[w]||{},e.parentyaxis&&e.parentyaxis.toLowerCase(),"s"===e.parentyaxis?l[0].line.push(e):p[0].line.push(e);
a.trendlines=p;h.trendlines=l;p=b.yAxis[0];l=b.yAxis[1];b=b.xAxis[0];1===m?(p.setCommonConfigArr(a,!0,!1,!1),l.setCommonConfigArr(h,!0,!1,!0)):(p.setCommonConfigArr(a,!0,!1,!0),l.setCommonConfigArr(h,!0,!1,!1));b.setCommonConfigArr(g,!1,!1,!1);p.configure();l.configure();b.configure();l.setAxisConfig({isActive:!1,isPercent:this.isPercentage,axisIndex:1,uniqueClassName:1})},_setAxisLimits:function(){var a=this.components,d=a.dataset,b=a.yAxis,a=a.xAxis,h,e=d.length,f,g=-Infinity,l=Infinity,k=-Infinity,
t=Infinity,p=Infinity,m=-Infinity,D,w,z;D=c(this.jsonData.chart.syncaxislimits,0);var G={};w=function(a){return-Infinity===a||Infinity===a?null:a};var r=function(a){n?(k=Y(k,a.sYMax||a.max),t=oa(t,a.sYMin||a.min)):(g=Y(g,a.max),l=oa(l,a.min));m=Y(m,a.xMax||-Infinity);p=oa(p,a.xMin||Infinity)},n=0;for(f=0;f<e;f++)h=d[f],z=h.groupManager,n=h.config.parentYAxis,z?(G[h.type]=z,G[h.type].yAxisIndex=n):(h=h.getDataLimits(),r(h));for(z in G)n=G[z].yAxisIndex,h=G[z].getDataLimits(),g=Y(g,h.max),l=oa(l,h.min),
k=Y(k,h.sYMax),t=oa(t,h.sYMin);d=this._getTrendLineMinMax("h");z=this._getTrendLineMinMax("h","s");g=Y(g,d.max);l=oa(l,d.min);k=Y(k,z.max);t=oa(t,z.min);D?(D=Y(g,k),w=oa(l,t),b[0].setDataLimit(D,w),b[1].setDataLimit(D,w)):(g=w(g),l=w(l),k=w(k),t=w(t),b[0].setDataLimit(g,l),b[1].setDataLimit(k,t));b[0].getDivLineCount();if(-Infinity!==m||Infinity!==p)a[0].config.xaxisrange={max:m,min:p},a[0].setDataLimit(m,p)},_postSpaceManagement:function(){var a=this.config,c=this.components,d=c.yAxis,b=c.xAxis&&
c.xAxis[0],h=d[0],d=d[1],e=c.legend,f=a.xDepth,g=c.canvas.config,l=g.canvasBorderWidth,k=g.canvasPadding,t=g.canvasPaddingLeft,p=g.canvasPaddingRight,c=g.canvasPaddingTop,m=a.primaryAxisOnleft,g=g.canvasPaddingBottom;b&&b.setAxisDimention({x:a.canvasLeft+(f||0)+Y(t,k),y:a.canvasBottom+(a.shift||0)+l,opposite:a.canvasTop-l,axisLength:a.canvasWidth-(f||0)-Y(t,k)-Y(p,k)});m?(a.yAxisStartXPos=a.canvasLeft-l,a.sYAxisStartXPos=a.canvasRight+l):(a.yAxisStartXPos=a.canvasRight+l,a.sYAxisStartXPos=a.canvasLeft-
l);l=a.yAxisStartXPos;k=a.sYAxisStartXPos;h&&h.setAxisDimention({x:l,y:a.canvasTop+c,opposite:k,axisLength:a.canvasHeight-c-g});d&&d.setAxisDimention({x:k,y:a.canvasTop+c,opposite:l,axisLength:a.canvasHeight-c-g});b&&b.shiftLabels(-f,0);e.postSpaceManager();this.config.realtimeEnabled&&this._setRealTimeCategories&&this._setRealTimeCategories();this._adjustCanvasPadding()}},ta.mscartesian);ta("mscartesian3d",{standaloneInit:!1,is3d:!0,_createDatasets:function(){var a=this.components,c=a.xAxis[0],b=
this.jsonData,h=b.dataset,e=h&&h.length,f,g,l,k=this.defaultDatasetType,t=this.applicableDSList,p=this.components.legend,m,D,w,z,n=this.config.isstacked,r,B,K=[],q=this.isRealTime,u=this.config.catLen,R={};h||this.setChartMessage();this.config.categories=b.categories&&b.categories[0].category;f=a.dataset||(a.dataset=[]);g=f.length;for(b=0;b<e;b++)if(z=h[b],z.seriesname&&(z.seriesname=G(z.seriesname)),l=z.parentyaxis||F,D=(D=this.isDual&&"s"===l.toLowerCase()?d(z.renderas,this.sDefaultDatasetType):
d(z.renderas,k))&&D.toLowerCase(),t[D]||(D=k),w=Q.get("component",["dataset",D]))void 0===R[D]?R[D]=0:R[D]++,r="datasetGroup_"+D,l=Q.register("component",["datasetGroup",D]),(m=a[r])&&K.push(m),l&&!m&&(m=a[r]=new l,m.chart=this,m.init()),(l=f[b])?(D=c.getCategoryLen(),r=u-D,w=q?l.components:l.JSONData,B=w.data&&w.data.length||0,w=z.data&&z.data.length||0,B-=w,r>B||(r=B,D=w),0<r&&l.removeData(D,r,!1),f[b].JSONData=z,f[b].configure(),f[b]._deleteGridImages&&f[b]._deleteGridImages()):(l=new w,f.push(l),
l.chart=this,l.index=b,m&&(n?m.addDataSet(l,0,R[D]):m.addDataSet(l,R[D],0)),l.init(z));if(g>e){r=g-e;m&&n&&m.removeDataSet(0,b,r);a=b;for(e=r+b;a<e;a++)m&&!n&&m.removeDataSet(b,0,1),f[a].visible=!1,f[a].draw(),p.removeItem(f[a].legendItemId);f.splice(b,r)}this.config.catLen=c.getCategoryLen()},_drawCanvas:function(){var a=this.config,b=a.canvasLeft,h=a.canvasTop,e=a.canvasWidth,f=a.canvasHeight,g=this.jsonData.chart,l=this.components,k=l.canvas,t=l.colorManager,l=l.paper,p=k.graphics,m=p.canvasBorderElement,
D=p.canvasElement,w=k.config,z=w.clip={},k=this.graphics.canvasGroup,G=p.canvasBg,r=p.canvas3DBase,B=this.get(M,U),F=B.animType,K=B.animObj,q=B.dummyObj,B=B.duration,u=p.canvas3dbaseline,R=w.canvasBgColor,L=w.showCanvasBG=!!c(g.showcanvasbg,1),P=a.canvasBgDepth,aa=a.showCanvasBase,v=a.canvasBaseDepth,Z=w.canvasBaseColor3D=d(g.canvasbasecolor,t.getColor("canvasBaseColor3D")),E=w.use3DLighting=c(g.use3dlighting,1),R=Ta.chart3D,S=w.canvasBorderRadius=c(g.plotborderradius,0),V=w.canvasBorderColor=pa(d(g.canvasbordercolor,
t.getColor("canvasBorderColor"))),T=w.canBGAlpha=d(g.canvasbgalpha,t.getColor("canvasBgAlpha")),X=w.canBGColor=d(g.canvasbgcolor,t.getColor(R.canvasBgColor)),C=a.xDepth,g=a.yDepth,t=a.canvasBasePadding||2,R=E?w.canvasBgColor={FCcolor:{color:Ca(X,85)+Ka+Ha(X,55),alpha:T+Ka+T,ratio:ab,angle:Xa(a.width-(a.marginLeft+a.marginRight),a.height-(a.marginTop+a.marginBottom),1)}}:w.canvasBgColor=pa(X,T);X.split(Ka);T.split(Ka);C=w.xDepth=10;g=w.yDepth=10;a={x:b-0,y:h-0,width:e+0,height:f+0,r:S,"stroke-width":0,
stroke:V,"stroke-linejoin":n};m?(m.animateWith(q,K,{x:b-0,y:h-0,width:e+0,height:f+0,r:S},B,F),m.attr({"stroke-width":0,stroke:V,"stroke-linejoin":n})):p.canvasBorderElement=l.rect(a,k);z["clip-canvas"]=[Y(0,b-C),Y(0,h),Y(1,e+C),Y(1,f+g)];z["clip-canvas-init"]=[Y(0,b-C),Y(0,h-g),1,Y(1,f+2*g)];a={x:b,y:h,width:e,height:f,r:S,"stroke-width":0,stroke:"none",fill:na(R)};L?(D?(D.show(),D.animateWith(q,K,{x:b,y:h,width:e,height:f,r:S},B,F),D.attr({"stroke-width":0,stroke:"none",fill:na(R)})):p.canvasElement=
l.rect(a,k),a=["M",b+e,",",h,"L",b+e+P,",",h+1.2*P,",",b+e+P,",",h+f-P,",",b+e,",",h+f,"Z"],G?(G.show(),G.animateWith(q,K,{path:a},B,F),G.attr({path:a})):G=p.canvasBg=l.path(a,k),G.attr({"stroke-width":0,stroke:"none",fill:na(R)})):(D&&D.hide(),G&&G.hide());aa?(a=b-C-t,m=h+f+g+t,D=C+t,G=g+t,r?(r.show(),r._.cubeside.show(),r._.cubetop.show(),r.animateWith(q,K,{cubepath:[a,m,e,v,D,G]},B,F),r.attr({cubepath:[a,m,e,v,D,G]})):r=p.canvas3DBase=l.cubepath(a,m,e,v,D,G,k),r.attr({stroke:"none","stroke-width":0,
fill:[Z.replace(sa,wa),!E]}),u?(u.show(),u.animateWith(q,K,{path:["M",b,h+f,"H",e+b]},B,F)):u=p.canvas3dbaseline=l.path(void 0,k),u.attr({path:["M",b,h+f,"H",e+b],stroke:J.tintshade(Z.replace(sa,wa),.05).rgba})):(r&&(r.hide(),r._.cubeside.hide(),r._.cubetop.hide()),u&&u.hide())}},ta.mscartesian,{showplotborder:0});ta("msdybasecartesian3d",{standaloneInit:!1,is3d:!0,_drawCanvas:ta.mscartesian3d},ta.msdybasecartesian);ta("sscartesian3d",{standaloneInit:!1,hasLegend:!1,is3d:!0,_drawCanvas:ta.mscartesian3d},
ta.sscartesian,{showplotborder:0});ta("msbarcartesian",{standaloneInit:!1,_createAxes:function(){var a=this.components,c=Q.get("component",["axis","cartesian"]),d;a.yAxis=[];a.xAxis=[];a.yAxis[0]=d=new c;a.xAxis[0]=a=new c;d.chart=this;a.chart=this;d.init();a.init();this._setCategories()},_feedAxesRawData:function(){var a=this.config,b=this.components,h=b.colorManager,e=this.jsonData,f=e.chart,g,l=this.is3d,k=l?Ta.chart3D:Ta.chart2D;g={outCanfontFamily:d(f.outcnvbasefont,f.basefont,"Verdana,sans"),
outCanfontSize:la(f.outcnvbasefontsize,f.basefontsize,10),outCancolor:d(f.outcnvbasefontcolor,f.basefontcolor,h.getColor(k.baseFontColor)).replace(/^#? ([a-f0-9]+)/ig,"#$1"),axisNamePadding:f.xaxisnamepadding,maxLabelWidthPercent:f.maxlabelwidthpercent,minLabelWidthPercent:f.minlabelwidthpercent,axisValuePadding:f.labelpadding,axisNameFont:f.xaxisnamefont,axisNameFontSize:f.xaxisnamefontsize,axisNameFontColor:f.xaxisnamefontcolor,axisNameFontBold:f.xaxisnamefontbold,axisNameFontItalic:f.xaxisnamefontitalic,
axisNameBgColor:f.xaxisnamebgcolor,axisNameBorderColor:f.xaxisnamebordercolor,axisNameAlpha:f.xaxisnamealpha,axisNameFontAlpha:f.xaxisnamefontalpha,axisNameBgAlpha:f.xaxisnamebgalpha,axisNameBorderAlpha:f.xaxisnameborderalpha,axisNameBorderPadding:f.xaxisnameborderpadding,axisNameBorderRadius:f.xaxisnameborderradius,axisNameBorderThickness:f.xaxisnameborderthickness,axisNameBorderDashed:f.xaxisnameborderdashed,axisNameBorderDashLen:f.xaxisnameborderdashlen,axisNameBorderDashGap:f.xaxisnameborderdashgap,
axisNameWidth:f.xaxisnamewidth,useEllipsesWhenOverflow:f.useellipseswhenoverflow,divLineColor:d(f.vdivlinecolor,f.divlinecolor,h.getColor(k.divLineColor)),divLineAlpha:d(f.vdivlinealpha,f.divlinealpha,l?h.getColor("divLineAlpha3D"):h.getColor("divLineAlpha")),divLineThickness:c(f.vdivlinethickness,f.divlinethickness,1),divLineIsDashed:!!c(f.vdivlinedashed,f.vdivlineisdashed,f.divlinedashed,f.divlineisdashed,0),divLineDashLen:c(f.vdivlinedashlen,f.divlinedashlen,4),divLineDashGap:c(f.vdivlinedashgap,
f.divlinedashgap,2),showAlternateGridColor:c(f.showalternatehgridcolor,1),alternateGridColor:d(f.alternatehgridcolor,h.getColor("altHGridColor")),alternateGridAlpha:d(f.alternatehgridalpha,h.getColor("altHGridAlpha")),numDivLines:f.numvdivlines,labelFont:f.labelfont,labelFontSize:f.labelfontsize,labelFontColor:f.labelfontcolor,labelFontAlpha:f.labelalpha,labelFontBold:f.labelfontbold,labelFontItalic:f.labelfontitalic,axisName:f.xaxisname,axisMinValue:f.xaxisminvalue,axisMaxValue:f.xaxismaxvalue,setAdaptiveMin:f.setadaptivexmin,
adjustDiv:f.adjustvdiv,labelDisplay:f.labeldisplay,showLabels:f.showlabels,rotateLabels:f.rotatelabels,slantLabel:c(f.slantlabels,f.slantlabel),labelStep:c(f.labelstep,f.xaxisvaluesstep),showAxisValues:c(f.showxaxisvalues,f.showxaxisvalue),showLimits:f.showvlimits,showDivLineValues:c(f.showvdivlinevalues,f.showvdivlinevalues),zeroPlaneColor:f.vzeroplanecolor,zeroPlaneThickness:c(f.vzeroplanethickness,f.vdivlinethickness,2),zeroPlaneAlpha:c(f.vzeroplanealpha,f.vdivlinealpha,a.zeroplanealpha),showZeroPlaneValue:f.showvzeroplanevalue,
trendlineColor:f.trendlinecolor,trendlineToolText:f.trendlinetooltext,trendlineThickness:f.trendlinethickness,rotateAxisName:c(f.rotatexaxisname,1),trendlineAlpha:f.trendlinealpha,showTrendlinesOnTop:f.showtrendlinesontop,showAxisLine:l?0:c(f.showxaxisline,f.showaxislines,f.drawAxisLines,0),axisLineThickness:c(f.xaxislinethickness,f.axislinethickness,1),axisLineAlpha:c(f.xaxislinealpha,f.axislinealpha,100),axisLineColor:d(f.xaxislinecolor,f.axislinecolor,"#000000")};a={outCanfontFamily:d(f.outcnvbasefont,
f.basefont,"Verdana,sans"),outCanfontSize:la(f.outcnvbasefontsize,f.basefontsize,10),outCancolor:d(f.outcnvbasefontcolor,f.basefontcolor,h.getColor(k.baseFontColor)).replace(/^#? ([a-f0-9]+)/ig,"#$1"),axisNamePadding:f.yaxisnamepadding,axisValuePadding:f.yaxisvaluespadding,axisNameFont:f.yaxisnamefont,axisNameFontSize:f.yaxisnamefontsize,axisNameFontColor:f.yaxisnamefontcolor,axisNameFontBold:f.yaxisnamefontbold,axisNameFontItalic:f.yaxisnamefontitalic,axisNameBgColor:f.yaxisnamebgcolor,axisNameBorderColor:f.yaxisnamebordercolor,
axisNameAlpha:f.yaxisnamealpha,axisNameFontAlpha:f.yaxisnamefontalpha,axisNameBgAlpha:f.yaxisnamebgalpha,axisNameBorderAlpha:f.yaxisnameborderalpha,axisNameBorderPadding:f.yaxisnameborderpadding,axisNameBorderRadius:f.yaxisnameborderradius,axisNameBorderThickness:f.yaxisnameborderthickness,axisNameBorderDashed:f.yaxisnameborderdashed,axisNameBorderDashLen:f.yaxisnameborderdashlen,axisNameBorderDashGap:f.yaxisnameborderdashgap,axisNameWidth:f.yaxisnamewidth,useEllipsesWhenOverflow:f.useellipseswhenoverflow,
axisName:f.yaxisname,divLineColor:d(f.divlinecolor,h.getColor(k.divLineColor)),divLineAlpha:d(f.divlinealpha,l?h.getColor("divLineAlpha3D"):h.getColor("divLineAlpha")),divLineThickness:c(f.divlinethickness,1),divLineIsDashed:!!c(f.divlinedashed,f.divlineisdashed,0),divLineDashLen:c(f.divlinedashlen,4),divLineDashGap:c(f.divlinedashgap,2),showAlternateGridColor:c(f.showalternatevgridcolor,1),alternateGridColor:d(f.alternatevgridcolor,h.getColor("altVGridColor")),alternateGridAlpha:d(f.alternatevgridalpha,
h.getColor("altVGridAlpha")),numDivLines:f.numdivlines,axisMinValue:f.yaxisminvalue,axisMaxValue:f.yaxismaxvalue,setAdaptiveMin:f.setadaptiveymin,adjustDiv:f.adjustdiv,labelStep:f.yaxisvaluesstep,showAxisValues:c(f.showyaxisvalues,f.showyaxisvalue),showLimits:c(f.showyaxislimits,f.showlimits,this.showLimits),showDivLineValues:c(f.showdivlinevalues,f.showdivlinevalue),zeroPlaneColor:f.zeroplanecolor,zeroPlaneThickness:c(f.zeroplanethickness,f.divlinethickness,2),zeroPlaneAlpha:c(f.zeroplanealpha,f.divlinealpha,
a.zeroplanealpha),showZeroPlaneValue:f.showzeroplanevalue,trendlineColor:f.trendlinecolor,trendlineToolText:f.trendlinetooltext,trendlineThickness:f.trendlinethickness,trendlineAlpha:f.trendlinealpha,isTrendZone:0,showTrendlinesOnTop:f.showtrendlinesontop,showAxisLine:l?0:c(f.showyaxisline,f.showaxislines,f.drawAxisLines,0),axisLineThickness:c(f.yaxislinethickness,f.axislinethickness,1),axisLineAlpha:c(f.yaxislinealpha,f.axislinealpha,100),axisLineColor:d(f.yaxislinecolor,f.axislinecolor,"#000000"),
numberFormatterFn:"yAxis"};a.vtrendlines=e.trendlines;g.trendlines=e.vtrendlines;e=b.yAxis[0];b=b.xAxis[0];e.setCommonConfigArr(a,!1,!1,!1);b.setCommonConfigArr(g,!0,!0,!1);e.configure();b.configure()},_spaceManager:function(){var a,c,d=this.config,b=this.components,h=b.yAxis&&b.yAxis[0],f=b.xAxis&&b.xAxis||[];c=b.legend.config.legendPos;var e=d.xDepth,g=d.yDepth,l=d.canvasBgDepth,k=d.canvasBaseDepth,t=d.canvasBasePadding,p=b.canvas.config.canvasBorderWidth,m=d.realTimeConfig&&d.realTimeConfig.showRTValue,
D=d.borderWidth,w=d.canvasMarginTop,z=d.canvasMarginBottom,G=d.canvasMarginLeft,r=d.canvasMarginRight,b=d.minCanvasHeight,n=d.minCanvasWidth,B=d.minChartWidth,F=d.minChartHeight,K=d.height,q=d.width,u=!1,R=!1,L,P=d.origCanvasTopMargin,aa=d.origCanvasBottomMargin,v=d.origCanvasLeftMargin,Z=d.origCanvasRightMargin,E,S,V;d.canvasWidth-2*D<B&&(E=(d.canvasWidth-B)/2);d.canvasHeight-2*D<F&&(a=(d.canvasHeight-F)/2);this._allocateSpace({top:a||D,bottom:a||D,left:E||D,right:E||D});f=f[0];a=.7*d.availableWidth;
d.yAxisSpaceAllocation=a=f&&f.placeAxis(a);f&&this._allocateSpace(a);f=.225*d.availableHeight;f=this._manageActionBarSpace&&this._manageActionBarSpace(f)||{};this._allocateSpace(f);this._manageLegendSpace();c=c===T?.6*d.availableHeight:.6*d.availableWidth;g&&(this._allocateSpace({left:g}),d.shift=e+t+k);l&&this._allocateSpace({top:l});d.canvasWidth-2*p<n&&(V=(d.canvasWidth-n)/2);this._allocateSpace({left:V||p,right:V||p});n>q-G-r&&(R=!0,g=d.canvasWidth-n,e=G+r,G=d.canvasMarginLeft=g*G/e,r=d.canvasMarginRight=
g*r/e);G=G>d.canvasLeft?G-d.canvasLeft:0;r=r>q-d.canvasRight?r+d.canvasRight-q:0;this._allocateSpace({left:G,right:r});this._allocateSpace({left:k});R&&(e=v+Z,k=d.canvasWidth,k>n&&(g=k-n,G=g*v/e,r=g*Z/e),this._allocateSpace({left:G,right:r}));d.actualCanvasMarginRight=r;d.actualCanvasMarginBottom=L;this._manageChartMenuBar(c);c=.2*d.availableHeight;this._allocateSpace(this._getSumValueSpace(c));c=.3*d.availableHeight;d.realtimeEnabled&&(m?this._allocateSpace(this._realTimeValuePositioning(c)):this._hideRealTimeValue());
c=.6*d.availableHeight;d.xAxisSpaceAllocation=L=h&&h.placeAxis(c);h&&this._allocateSpace(L);c=.3*d.availableHeight;this._manageScrollerPosition&&this._manageScrollerPosition(c);d.canvasHeight-2*p<b&&(S=(d.canvasHeight-b)/2);this._allocateSpace({top:S||p,bottom:S||p});b>K-w-z&&(u=!0,g=d.canvasHeight-b,e=w+z,w=d.canvasMarginTop=g*w/e,z=d.canvasMarginBottom=g*z/e);h=w>d.canvasTop?w-d.canvasTop:0;L=z>K-d.canvasBottom?z+d.canvasBottom-K:0;this._allocateSpace({top:h,bottom:L});u&&(e=P+aa,z=d.canvasHeight,
z>b&&(g=z-b,h=g*P/e,L=g*aa/e),this._allocateSpace({top:h,bottom:L}));d.actualCanvasMarginTop=h;d.actualCanvasMarginLeft=G},_postSpaceManagement:function(){var a=this.config,c=this.components,d=c.xAxis&&c.xAxis[0],b=c.yAxis&&c.yAxis[0],h=c.legend,f=a.xDepth,e=c.canvas.config,c=e.canvasBorderWidth,g=e.canvasPadding,l,k,t;b&&this._allocateXAxisLabelSpace(b);l=e.canvasPaddingLeft;k=e.canvasPaddingRight;t=e.canvasPaddingTop;e=e.canvasPaddingBottom;b&&b.setAxisDimention({x:a.canvasLeft+l,y:a.canvasBottom+
c,opposite:a.canvasTop-c,axisLength:a.canvasWidth-l-k});d&&d.setAxisDimention({x:a.canvasLeft-(a.shift||0)-c,y:a.canvasTop+(f||0)+Y(t,g),opposite:a.canvasRight+c,axisLength:a.canvasHeight-(f||0)-Y(t,g)-Y(e,g)});h.postSpaceManager()}},ta.mscartesian,{maxbarheight:50});ta("ssbarcartesian",{standaloneInit:!1,_createAxes:ta.msbarcartesian,_feedAxesRawData:ta.msbarcartesian,_spaceManager:ta.msbarcartesian,_postSpaceManagement:ta.msbarcartesian,_allocateXAxisLabelSpace:ta.msbarcartesian},ta.sscartesian);
ta("msbarcartesian3d",{standaloneInit:!1,_createDatasets:ta.mscartesian3d,is3d:!0,_drawCanvas:function(){var a=this.config,b=a.canvasLeft,h=a.canvasTop,f=a.canvasWidth,e=a.canvasHeight,g=this.jsonData.chart,l=this.components,k=l.canvas,t=l.colorManager,l=l.paper,p=k.graphics,D=p.canvasBorderElement,w=p.canvasElement,z=k.config,G=z.clip={},k=this.graphics.canvasGroup,r=p.canvasBg,B=p.canvas3DBase,F=this.get(M,U),K=F.animType,q=F.animObj,u=F.dummyObj,F=F.duration,R=p.canvas3dbaseline,L=z.canvasBgColor,
P=z.showCanvasBG=!!c(g.showcanvasbg,1),aa=a.canvasBgDepth,v=a.showCanvasBase,Z=a.canvasBaseDepth,E=z.canvasBaseColor3D=d(g.canvasbasecolor,t.getColor("canvasBaseColor3D")),S=z.use3DLighting=c(g.use3dlighting,1),L=Ta.chart3D,V=z.canvasBorderRadius=c(g.plotborderradius,0),T=z.canvasBorderWidth=0,X=.5*T,C=z.canvasBorderColor=pa(d(g.canvasbordercolor,t.getColor("canvasBorderColor"))),A=z.canBGAlpha=d(g.canvasbgalpha,t.getColor("canvasBgAlpha")),H=z.canBGColor=d(g.canvasbgcolor,t.getColor(L.canvasBgColor)),
t=z.xDepth,g=z.yDepth,L=S?z.canvasBgColor={FCcolor:{color:Ca(H,85)+Ka+Ha(H,55),alpha:A+Ka+A,ratio:ab,angle:Xa(a.width-(a.marginLeft+a.marginRight),a.height-(a.marginTop+a.marginBottom),1)}}:z.canvasBgColor=pa(H,A);H.split(Ka);A.split(Ka);t=z.xDepth=5;g=z.yDepth=5;a={x:b-X,y:h-X,width:f+T,height:e+T,r:V,"stroke-width":T,stroke:C,"stroke-linejoin":2<T?m:n};D?(D.animateWith(u,q,{x:b-X,y:h-X,width:f+T,height:e+T,r:V},F,K),D.attr({"stroke-width":T,stroke:C,"stroke-linejoin":2<T?m:n})):p.canvasBorderElement=
l.rect(a,k);G["clip-canvas"]=[Y(0,b-t),Y(0,h),Y(1,f+t),Y(1,e+g)];G["clip-canvas-init"]=[Y(0,b-t),Y(0,h-g),1,Y(1,e+2*g)];a={x:b,y:h,width:f,height:e,r:V,"stroke-width":0,stroke:"none",fill:na(L)};P?(w?(w.show(),w.animateWith(u,q,{x:b,y:h,width:f,height:e,r:V},F,K),w.attr({"stroke-width":0,stroke:"none",fill:na(L)})):p.canvasElement=l.rect(a,k),f=["M",b,",",h,"L",b+1.2*aa,",",h-aa,",",b+f-aa,",",h-aa,",",b+f,",",h,"Z"],r?(r.show(),r.animateWith(u,q,{path:f},F,K),r.attr({path:f})):r=p.canvasBg=l.path(f,
k),r.attr({"stroke-width":0,stroke:"none",fill:na(L)})):(w&&w.hide(),r&&r.hide());v?(f=b-t-Z-1,a=h+g+1,D=t+1,w=g+1,B?(B.show(),B._.cubeside.show(),B._.cubetop.show(),B.animateWith(u,q,{cubepath:[f,a,Z,e,D,w]},F,K),B.attr({cubepath:[f,a,Z,e,D,w]})):B=p.canvas3DBase=l.cubepath(f,a,Z,e,D,w,k),B.attr({stroke:"none","stroke-width":0,fill:[E.replace(sa,wa),!S]}),R?(R.show(),R.animateWith(u,q,{path:["M",b,h,"V",e+h]},F,K)):R=p.canvas3dbaseline=l.path(void 0,k),R.attr({path:["M",b,h,"V",e+h],stroke:J.tintshade(E.replace(sa,
wa),.05).rgba})):(B&&(B.hide(),B._.cubeside.hide(),B._.cubetop.hide()),R&&R.hide())}},ta.msbarcartesian,{showplotborder:0});ta("ssbarcartesian3d",{standaloneInit:!1,_createAxes:ta.msbarcartesian,_feedAxesRawData:ta.msbarcartesian,_drawCanvas:ta.msbarcartesian3d,_spaceManager:ta.msbarcartesian,_postSpaceManagement:ta.msbarcartesian,_allocateXAxisLabelSpace:ta.msbarcartesian},ta.sscartesian3d);ta("mspolar",{standaloneInit:!1,hasCanvas:!1,_createAxes:function(){var a=this.components,c=Q.register("component",
["axis","polarcartesan"]),d=Q.register("component",["axis","polar"]);a.yAxis=[];a.xAxis=[];a.yAxis[0]=c=new c;a.xAxis[0]=a=new d;c.chart=this;a.chart=this;c.init();a.init();c.setAxisConfig({polarAxis:a});this._setCategories()},_feedAxesRawData:function(){var a=this.components,b=a.colorManager,h=this.jsonData,f=h.chart,e,g=(e=this.is3d)?Ta.chart3D:Ta.chart2D;e={outCanfontFamily:d(f.outcnvbasefont,f.basefont,"Verdana,sans"),outCanfontSize:la(f.outcnvbasefontsize,f.basefontsize,10),outCancolor:d(f.outcnvbasefontcolor,
f.basefontcolor,b.getColor(g.baseFontColor)).replace(/^#? ([a-f0-9]+)/ig,"#$1"),axisNamePadding:f.xaxisnamepadding,axisValuePadding:f.labelpadding,axisNameFont:f.xaxisnamefont,axisNameFontSize:f.xaxisnamefontsize,axisNameFontColor:f.xaxisnamefontcolor,axisNameFontBold:f.xaxisnamefontbold,axisNameFontItalic:f.xaxisnamefontitalic,axisNameBgColor:f.xaxisnamebgcolor,axisNameBorderColor:f.xaxisnamebordercolor,axisNameAlpha:f.xaxisnamealpha,axisNameFontAlpha:f.xaxisnamefontalpha,axisNameBgAlpha:f.xaxisnamebgalpha,
axisNameBorderAlpha:f.xaxisnameborderalpha,axisNameBorderPadding:f.xaxisnameborderpadding,axisNameBorderRadius:f.xaxisnameborderradius,axisNameBorderThickness:f.xaxisnameborderthickness,axisNameBorderDashed:f.xaxisnameborderdashed,axisNameBorderDashLen:f.xaxisnameborderdashlen,axisNameBorderDashGap:f.xaxisnameborderdashgap,useEllipsesWhenOverflow:f.useellipseswhenoverflow,divLineColor:d(f.vdivlinecolor,f.divlinecolor,b.getColor(g.divLineColor)),divLineAlpha:d(f.vdivlinealpha,f.divlinealpha,e?b.getColor("divLineAlpha3D"):
b.getColor("divLineAlpha")),divLineThickness:c(f.vdivlinethickness,f.divlinethickness,1),divLineIsDashed:!!c(f.vdivlinedashed,f.vdivlineisdashed,f.divlinedashed,f.divlineisdashed,0),divLineDashLen:c(f.vdivlinedashlen,f.divlinedashlen,4),divLineDashGap:c(f.vdivlinedashgap,f.divlinedashgap,2),showAlternateGridColor:c(f.showalternatevgridcolor,1),alternateGridColor:d(f.alternatevgridcolor,b.getColor("altVGridColor")),alternateGridAlpha:d(f.alternatevgridalpha,b.getColor("altVGridAlpha")),numDivLines:f.numvdivlines,
labelFont:f.labelfont,labelFontSize:f.labelfontsize,labelFontColor:f.labelfontcolor,labelFontAlpha:f.labelalpha,labelFontBold:f.labelfontbold,labelFontItalic:f.labelfontitalic,axisName:f.yaxisname,axisMinValue:f.xaxisminvalue,axisMaxValue:f.xaxismaxvalue,setAdaptiveMin:f.setadaptivexmin,adjustDiv:f.adjustvdiv,labelDisplay:f.labeldisplay,showLabels:f.showlabels,rotateLabels:f.rotatelabels,slantLabel:c(f.slantlabels,f.slantlabel),labelStep:c(f.labelstep,f.xaxisvaluesstep),showAxisValues:c(f.showxaxisvalues,
f.showxaxisvalue),showLimits:f.showvlimits,showDivLineValues:c(f.showvdivlinevalues,f.showvdivlinevalues),zeroPlaneColor:f.vzeroplanecolor,zeroPlaneThickness:f.vzeroplanethickness,zeroPlaneAlpha:f.vzeroplanealpha,showZeroPlaneValue:f.showvzeroplanevalue,trendlineColor:f.trendlinecolor,trendlineToolText:f.trendlinetooltext,trendlineThickness:f.trendlinethickness,trendlineAlpha:f.trendlinealpha,showTrendlinesOnTop:f.showtrendlinesontop,showAxisLine:c(f.showxaxisline,f.showaxislines,f.drawAxisLines,
0),axisLineThickness:c(f.xaxislinethickness,f.axislinethickness,1),axisLineAlpha:c(f.xaxislinealpha,f.axislinealpha,100),axisLineColor:d(f.xaxislinecolor,f.axislinecolor,"#000000"),showRadarBorder:f.showradarborder,radarBorderColor:f.radarbordercolor,radarBorderThickness:f.radarborderthickness,radarBorderAlpha:f.radarborderalpha,radarFillColor:f.radarfillcolor,radarFillAlpha:f.radarfillalpha,radarSpikeColor:f.radarspikecolor,radarSpikeThickness:f.radarspikethickness,radarSpikeAlpha:f.radarspikealpha,
radarInLineAlpha:f.radarinlinealpha};b={outCanfontFamily:d(f.outcnvbasefont,f.basefont,"Verdana,sans"),outCanfontSize:la(f.outcnvbasefontsize,f.basefontsize,10),outCancolor:d(f.outcnvbasefontcolor,f.basefontcolor,b.getColor(g.baseFontColor)).replace(/^#? ([a-f0-9]+)/ig,"#$1"),axisNamePadding:f.yaxisnamepadding,axisValuePadding:f.yaxisvaluespadding,axisNameFont:f.yaxisnamefont,axisNameFontSize:f.yaxisnamefontsize,axisNameFontColor:f.yaxisnamefontcolor,axisNameFontBold:f.yaxisnamefontbold,axisNameFontItalic:f.yaxisnamefontitalic,
axisNameBgColor:f.yaxisnamebgcolor,axisNameBorderColor:f.yaxisnamebordercolor,axisNameAlpha:f.yaxisnamealpha,axisNameFontAlpha:f.yaxisnamefontalpha,axisNameBgAlpha:f.yaxisnamebgalpha,axisNameBorderAlpha:f.yaxisnameborderalpha,axisNameBorderPadding:f.yaxisnameborderpadding,axisNameBorderRadius:f.yaxisnameborderradius,axisNameBorderThickness:f.yaxisnameborderthickness,axisNameBorderDashed:f.yaxisnameborderdashed,axisNameBorderDashLen:f.yaxisnameborderdashlen,axisNameBorderDashGap:f.yaxisnameborderdashgap,
axisNameWidth:f.yaxisnamewidth,useEllipsesWhenOverflow:f.useellipseswhenoverflow,rotateAxisName:c(f.rotateyaxisname,1),axisName:f.xaxisname,divLineColor:d(f.divlinecolor,b.getColor(g.divLineColor)),divLineAlpha:d(f.divlinealpha,b.getColor("divLineAlpha")),divLineThickness:c(f.divlinethickness,1),divLineIsDashed:!!c(f.divlinedashed,f.divlineisdashed,0),divLineDashLen:c(f.divlinedashlen,4),divLineDashGap:c(f.divlinedashgap,2),showAlternateGridColor:c(f.showalternatehgridcolor,1),alternateGridColor:d(f.alternatehgridcolor,
b.getColor("altHGridColor")),alternateGridAlpha:d(f.alternatehgridalpha,b.getColor("altHGridAlpha")),numDivLines:f.numdivlines,axisMinValue:f.yaxisminvalue,axisMaxValue:f.yaxismaxvalue,setAdaptiveMin:f.setadaptiveymin,adjustDiv:f.adjustdiv,labelStep:f.yaxisvaluesstep,showAxisValues:c(f.showyaxisvalues,f.showyaxisvalue),showLimits:c(f.showyaxislimits,f.showlimits,this.showLimits),showDivLineValues:c(f.showdivlinevalues,f.showdivlinevalue),zeroPlaneColor:f.zeroplanecolor,zeroPlaneThickness:c(f.zeroplanethickness,
f.divlinethickness,2),zeroPlaneAlpha:f.zeroplanealpha,showZeroPlaneValue:f.showzeroplanevalue,trendlineColor:f.trendlinecolor,trendlineToolText:f.trendlinetooltext,trendlineThickness:f.trendlinethickness,trendlineAlpha:f.trendlinealpha,showTrendlinesOnTop:f.showtrendlinesontop,showAxisLine:c(f.showyaxisline,f.showaxislines,f.drawAxisLines,0),axisLineThickness:c(f.yaxislinethickness,f.axislinethickness,1),axisLineAlpha:c(f.yaxislinealpha,f.axislinealpha,100),axisLineColor:d(f.yaxislinecolor,f.axislinecolor,
"#000000")};e.vtrendlines=h.trendlines;b.trendlines=h.vtrendlines;h=a.yAxis[0];a=a.xAxis[0];h.setCommonConfigArr(b,!0,!1,!1);a.setCommonConfigArr(e,!1,!1,!1);h.configure();a.configure()},_spaceManager:function(){var a,c,d=this.config;c=this.components;var b=d.radarborderthickness,h=d.legendPosition,f=c.xAxis&&c.xAxis[0],e=c.yAxis&&c.yAxis[0];a=this.hasLegend;c=c.legend;var g;g=h===T?.3*d.canvasHeight:.3*d.canvasWidth;!1!==a&&f&&this._allocateSpace(c._manageLegendPosition(g));c=.7*d.canvasHeight;a=
.7*d.canvasWidth;f&&this._allocateSpace(f.placeAxis(a,c));a=.7*d.canvasWidth;e&&e.placeAxis(a);a=.225*d.availableHeight;a=this._manageActionBarSpace&&this._manageActionBarSpace(a)||{};this._allocateSpace(a);a=0<d.radarradius?2*d.radarradius:oa(d.canvasHeight,d.canvasWidth);d.canvasHeight>a&&(c=za((d.canvasHeight-a)/2),this._allocateSpace({top:c,bottom:c}));d.canvasWidth>a&&(c=za((d.canvasWidth-a)/2),this._allocateSpace({left:c,right:c}));c=h===T?.6*d.availableHeight:.6*d.availableWidth;this._manageChartMenuBar(c);
e.setAxisDimention({x:d.canvasLeft+d.canvasWidth/2-b/2,y:d.canvasTop,axisLength:d.canvasHeight/2});f.setAxisConfig({centerX:d.canvasLeft+d.canvasWidth/2,centerY:d.canvasTop+d.canvasHeight/2,radius:oa(d.canvasWidth/2,d.canvasHeight/2)-b/2})}},ta.mscartesian);ta("mslog",{standaloneInit:!1,_createAxes:function(){var a=this.components,c=Q.register("component",["axis","cartesian"]),d=Q.register("component",["axis","log"]);a.yAxis=[];a.xAxis=[];a.yAxis[0]=d=new d;a.xAxis[0]=a=new c;d.chart=this;a.chart=
this;d.init();a.init();this._setCategories()},_feedAxesRawData:function(){var a=this.components,b=a.colorManager,h=this.jsonData,f=h.chart,e,g=(e=this.is3d)?Ta.chart3D:Ta.chart2D,l=1===c(f.invertyaxis,0)?!0:!1;e={outCanfontFamily:d(f.outcnvbasefont,f.basefont,"Verdana,sans"),outCanfontSize:la(f.outcnvbasefontsize,f.basefontsize,10),outCancolor:d(f.outcnvbasefontcolor,f.basefontcolor,b.getColor(g.baseFontColor)).replace(/^#? ([a-f0-9]+)/ig,"#$1"),axisNamePadding:f.xaxisnamepadding,axisValuePadding:f.labelpadding,
axisNameFont:f.xaxisnamefont,axisNameFontSize:f.xaxisnamefontsize,axisNameFontColor:f.xaxisnamefontcolor,axisNameFontBold:f.xaxisnamefontbold,axisNameFontItalic:f.xaxisnamefontitalic,axisNameBgColor:f.xaxisnamebgcolor,axisNameBorderColor:f.xaxisnamebordercolor,axisNameAlpha:f.xaxisnamealpha,axisNameFontAlpha:f.xaxisnamefontalpha,axisNameBgAlpha:f.xaxisnamebgalpha,axisNameBorderAlpha:f.xaxisnameborderalpha,axisNameBorderPadding:f.xaxisnameborderpadding,axisNameBorderRadius:f.xaxisnameborderradius,
axisNameBorderThickness:f.xaxisnameborderthickness,axisNameBorderDashed:f.xaxisnameborderdashed,axisNameBorderDashLen:f.xaxisnameborderdashlen,axisNameBorderDashGap:f.xaxisnameborderdashgap,useEllipsesWhenOverflow:f.useellipseswhenoverflow,divLineColor:d(f.vdivlinecolor,f.divlinecolor,b.getColor(g.divLineColor)),divLineAlpha:d(f.vdivlinealpha,f.divlinealpha,e?b.getColor("divLineAlpha3D"):b.getColor("divLineAlpha")),divLineThickness:c(f.vdivlinethickness,f.divlinethickness,1),divLineIsDashed:!!c(f.vdivlinedashed,
f.vdivlineisdashed,f.divlinedashed,f.divlineisdashed,0),divLineDashLen:c(f.vdivlinedashlen,f.divlinedashlen,4),divLineDashGap:c(f.vdivlinedashgap,f.divlinedashgap,2),showAlternateGridColor:c(f.showalternatevgridcolor,0),alternateGridColor:d(f.alternatevgridcolor,b.getColor("altVGridColor")),alternateGridAlpha:d(f.alternatevgridalpha,b.getColor("altVGridAlpha")),numDivLines:f.numvdivlines,maxLabelHeight:f.maxlabelheight,labelFont:f.labelfont,labelFontSize:f.labelfontsize,labelFontColor:f.labelfontcolor,
labelFontAlpha:f.labelalpha,labelFontBold:f.labelfontbold,labelFontItalic:f.labelfontitalic,axisName:f.xaxisname,axisMinValue:f.xaxisminvalue,axisMaxValue:f.xaxismaxvalue,setAdaptiveMin:f.setadaptivexmin,adjustDiv:f.adjustvdiv,labelDisplay:f.labeldisplay,showLabels:f.showlabels,rotateLabels:f.rotatelabels,slantLabel:c(f.slantlabels,f.slantlabel),labelStep:c(f.labelstep,f.xaxisvaluesstep),showAxisValues:c(f.showxaxisvalues,f.showxaxisvalue),showLimits:f.showvlimits,showDivLineValues:c(f.showvdivlinevalues,
f.showvdivlinevalues),showZeroPlane:f.showvzeroplane,zeroPlaneColor:f.vzeroplanecolor,zeroPlaneThickness:f.vzeroplanethickness,zeroPlaneAlpha:f.vzeroplanealpha,showZeroPlaneValue:f.showvzeroplanevalue,trendlineColor:f.trendlinecolor,trendlineToolText:f.trendlinetooltext,trendlineThickness:f.trendlinethickness,trendlineAlpha:f.trendlinealpha,showTrendlinesOnTop:f.showtrendlinesontop,showAxisLine:c(f.showxaxisline,f.showaxislines,f.drawAxisLines,0),axisLineThickness:c(f.xaxislinethickness,f.axislinethickness,
1),axisLineAlpha:c(f.xaxislinealpha,f.axislinealpha,100),axisLineColor:d(f.xaxislinecolor,f.axislinecolor,"#000000")};b={outCanfontFamily:d(f.outcnvbasefont,f.basefont,"Verdana,sans"),outCanfontSize:la(f.outcnvbasefontsize,f.basefontsize,10),outCancolor:d(f.outcnvbasefontcolor,f.basefontcolor,b.getColor(g.baseFontColor)).replace(/^#? ([a-f0-9]+)/ig,"#$1"),axisNamePadding:f.yaxisnamepadding,axisValuePadding:f.yaxisvaluespadding,axisNameFont:f.yaxisnamefont,axisNameFontSize:f.yaxisnamefontsize,axisNameFontColor:f.yaxisnamefontcolor,
axisNameFontBold:f.yaxisnamefontbold,axisNameFontItalic:f.yaxisnamefontitalic,axisNameBgColor:f.yaxisnamebgcolor,axisNameBorderColor:f.yaxisnamebordercolor,axisNameAlpha:f.yaxisnamealpha,axisNameFontAlpha:f.yaxisnamefontalpha,axisNameBgAlpha:f.yaxisnamebgalpha,axisNameBorderAlpha:f.yaxisnameborderalpha,axisNameBorderPadding:f.yaxisnameborderpadding,axisNameBorderRadius:f.yaxisnameborderradius,axisNameBorderThickness:f.yaxisnameborderthickness,axisNameBorderDashed:f.yaxisnameborderdashed,axisNameBorderDashLen:f.yaxisnameborderdashlen,
axisNameBorderDashGap:f.yaxisnameborderdashgap,axisNameWidth:f.yaxisnamewidth,useEllipsesWhenOverflow:f.useellipseswhenoverflow,rotateAxisName:c(f.rotateyaxisname,1),axisName:f.yaxisname,divLineColor:d(f.divlinecolor,b.getColor(g.divLineColor)),divLineAlpha:d(f.divlinealpha,b.getColor("divLineAlpha")),divLineThickness:c(f.divlinethickness,2),divLineIsDashed:!!c(f.divlinedashed,f.divlineisdashed,0),divLineDashLen:c(f.divlinedashlen,4),divLineDashGap:c(f.divlinedashgap,2),showAlternateGridColor:c(f.showalternatehgridcolor,
1),alternateGridColor:d(f.alternatehgridcolor,b.getColor("altHGridColor")),alternateGridAlpha:d(f.alternatehgridalpha,b.getColor("altHGridAlpha")),numDivLines:f.numdivlines,axisMinValue:f.yaxisminvalue,axisMaxValue:f.yaxismaxvalue,setAdaptiveMin:f.setadaptiveymin,adjustDiv:f.adjustdiv,labelStep:f.yaxisvaluesstep,showAxisValues:c(f.showyaxisvalues,f.showyaxisvalue),showLimits:c(f.showyaxislimits,f.showlimits,this.showLimits),showDivLineValues:c(f.showdivlinevalues,f.showdivlinevalue),showZeroPlane:f.showzeroplane,
zeroPlaneColor:f.zeroplanecolor,zeroPlaneThickness:f.zeroplanethickness,zeroPlaneAlpha:f.zeroplanealpha,showZeroPlaneValue:f.showzeroplanevalue,trendlineColor:f.trendlinecolor,trendlineToolText:f.trendlinetooltext,trendlineThickness:f.trendlinethickness,trendlineAlpha:f.trendlinealpha,showTrendlinesOnTop:f.showtrendlinesontop,showAxisLine:c(f.showyaxisline,f.showaxislines,f.drawAxisLines,0),axisLineThickness:c(f.yaxislinethickness,f.axislinethickness,1),axisLineAlpha:c(f.yaxislinealpha,f.axislinealpha,
100),base:f.base,logBase:f.logbase,axisLineColor:d(f.yaxislinecolor,f.axislinecolor,"#000000"),showMinorDivLineValues:c(f.showminordivlinevalues,0),numMinorDivLines:f.numminordivlines};"1"===b.base&&(b.base=10,b.logBase=10);b.minorDivlinecolor=d(f.minordivlinecolor,b.divLineColor);b.minorDivLineThickness=d(f.minordivlinethickness,1);b.minorDivLineAlpha=d(f.minordivlinealpha,b.divLineAlpha/2);e.vtrendlines=h.vtrendlines;b.trendlines=h.trendlines;h=a.yAxis[0];a=a.xAxis[0];h.setCommonConfigArr(b,!0,
l,!1);a.setCommonConfigArr(e,!1,!1,!1);h.configure();a.configure()},_setAxisLimits:function(){var a=this.components,c=a.dataset,d=a.yAxis,a=a.xAxis,b,h=c.length,f,e=-Infinity,g=Infinity,l=Infinity,k=-Infinity,t,p={},m=[],D=function(a){e=Y(e,a.max);g=oa(g,a.min);k=Y(k,a.xMax||-Infinity);l=oa(l,a.xMin||Infinity)};for(f=0;f<h;f++)b=c[f],(t=b.groupManager)?p[b.type]=t:m.push(b);for(t in p)c=p[t].getDataLimits(),D(c);h=m.length;for(f=0;f<h;f++)c=m[f].getDataLimits(),D(c);D(this._getTrendLineMinMax("h"));
-Infinity===e&&(e=1);Infinity===g&&(g=1);d[0].setDataLimit(e,g);if(-Infinity!==k||Infinity!==l)a[0].config.xaxisrange={max:k,min:l},a[0].setDataLimit(k,l)}},ta.mscartesian);ta("guageBase",{standaloneInit:!1,hasCanvas:!1,_createAxes:function(){},_feedAxesRawData:function(){},_setCategories:function(){},_setAxisLimits:function(){},_adjustCanvasPadding:function(){},placeDataLabels:function(){var a=function(a,c){return a.point.value-c.point.value},d=function(a,c){return a.angle-c.angle},b=[e,e,p,p],h=
[-1,1,1,-1],f=[1,1,-1,-1];return function(e,g,l,k){var t=this.config,p=this.components.dataset[0].conf,m=t.canvasLeft,w=t.canvasTop,z=t.canvasWidth,G=m+.5*t.canvasWidth,n=w+.5*t.canvasHeight,B=this.linkedItems.smartLabel,F=p.dataLabelOptions,q=F.style,u=c(fa(parseFloat(q.lineHeight)),12),R=D(F.placeLabelsInside,1===g.length?!0:!1),L=F.skipOverlapLabels,P=F.manageLabelOverflow,aa=F.connectorPadding,v;v=k&&k.metrics||[G,n,2*p.pieMinRadius,p.innerSize||0];var Z=v[1],E=v[0];k=.5*v[2];var S=[[],[],[],
[]],p=l.labelsRadius=k+F.distance,n=G=parseInt(q.fontSize,10),V=n/2,aa=[aa,aa,-aa,-aa];l=l.labelsMaxInQuadrant||(l.labelsMaxInQuadrant=Aa(p/n));var F=F.isSmartLineSlanted,T=v[3]/2,X,C,A,H,Ra,N,J,ca,Ia,sa,wa,M,ma,va,ra,ha;v=Number.POSITIVE_INFINITY;var qa,na;A=[];C=[];B.useEllipsesOnOverflow(t.useEllipsesWhenOverflow);e||B.setStyle(q);if(1==g.length&&!T&&R)A=g[0],(wa=A.dataLabel)&&wa.show(),A.slicedTranslation=[m,w],wa&&(wa.attr({visibility:ka,align:K,transform:["t",E,Z]}),wa.x=E);else if(R)ha=T+(k-
T)/2,Pa(g,function(a){qa=a.config;na=a.graphics;(wa=na.label)&&wa.show();wa&&(sa=qa.angle,Ia=Z+ha*ia(sa),Ra=E+ha*xa(sa),wa.x=Ra,wa._x=Ra,wa.y=Ia,a.sliced&&(ra=a.slicedTranslation,ma=ra[0]-m,va=ra[1]-w,Ra+=ma,Ia+=va),wa.attr({visibility:ka,align:K,transform:["t",Ra,Ia]}))});else{Pa(g,function(a){qa=a.config;na=a.graphics;(wa=na.label)&&wa.show();wa&&(sa=qa.angle%W,0>sa&&(sa=W+sa),M=0<=sa&&sa<ya?1:sa<ja?2:sa<Ma?3:0,S[M].push({point:a,angle:sa}))});for(g=e=4;g--;){if(L&&(t=S[g].length-l,0<t))for(S[g].sort(a),
q=S[g].splice(0,t),t=0,C=q.length;t<C;t+=1)A=q[t].point,A.dataLabel.attr({visibility:r}),A.connector&&A.connector.attr({visibility:r});S[g].sort(d)}g=Y(S[0].length,S[1].length,S[2].length,S[3].length);t=Y(oa(g,l)*n,p+n);C=S[0].concat(S[1]);A=S[2].concat(S[3]);for(g=C.length-1;0<=g;g--)q=C[g].point.config,delete q.clearance,delete q.clearanceShift,T=za(t*ia(q.angle)),Math.abs(v-T)<2*u&&(q.clearance=0,C[g+1].point.clearanceShift=u/2),v=T;v=Number.POSITIVE_INFINITY;g=0;for(C=A.length;g<C;g++)q=A[g].point.config,
delete q.clearance,delete q.clearanceShift,T=za(t*ia(q.angle)),Math.abs(v-T)<2*u&&(q.clearance=0,A[g-1].point.clearanceShift=u/2),v=T;S[1].reverse();for(S[3].reverse();e--;){q=S[e];C=q.length;L||(n=C>l?t/C:G,V=n/2);u=C*n;v=t;for(g=0;g<C;g+=1,u-=n)T=za(t*ia(q[g].angle)),v<T?T=v:T<u&&(T=u),v=(q[g].oriY=T)-n;R=b[e];C=t-(C-1)*n;v=0;for(g=q.length-1;0<=g;--g,C+=n)if(A=q[g].point,sa=q[g].angle,qa=A.config,na=A.graphics,A=qa.sliced,wa=na.label,T=za(t*ia(sa)),T<v?T=v:T>C&&(T=C),v=T+n,u=void 0===qa.clearance?
2*fa(c(parseFloat(qa.style.border),12),12):2*fa(c(parseFloat(qa.style.border),qa.clearance)),J=(T+q[g].oriY)/2,T=E+f[e]*p*xa(da.asin(J/t)),J*=h[e],J+=Z,ca=Z+k*ia(sa),H=E+k*xa(sa),(2>e&&T<H||1<e&&T>H)&&(T=H),Ra=T+aa[e],Ia=J-V-2,N=Ra+aa[e],wa.x=N,wa._x=N,P&&(X=1<e?N-this.canvasLeft:this.canvasLeft+z-N,B.setStyle(qa.style),u=c(fa(parseFloat(qa.style.lineHeight)),12)+u,u=B.getSmartText(qa.labelText,X,u),void 0===qa.clearance&&u.height>n&&(J+=n),wa.attr({text:u.text}).tooltip(u.tooltext)),wa.y=Ia,A&&(ma=
qa.transX,va=qa.transY,Ra+=ma,T+=ma,H+=ma,ca+=va,N+=ma),wa.attr({visibility:ka,"text-anchor":R,vAlign:K,x:N,y:J}),u=na.connector)na.connectorPath=A=["M",H,ca,"L",F?T:H,J,Ra,J],u.attr({path:A,visibility:ka})}}}}()},ta.sscartesian);ta("scatterBase",{standaloneInit:!1,usesXYinCategory:!0,_setCategories:function(){var a=this.jsonData,c=this.components.xAxis,b=d(a.chart.xaxislabelmode,"categories"),a=a.categories&&a.categories[0].category;c[0].setAxisConfig({xAxisLabelMode:"categories"});"auto"!==b&&"mixed"!==
b&&a&&0<a.length?c[0].setCategory(a):"auto"!==b?(c[0].setCategory(a,!1),c[0].setAxisConfig({xAxisLabelMode:"mixed"})):c[0].setAxisConfig({xAxisLabelMode:"auto"})},_setAxisLimits:function(){var a=this.components,c=this.jsonData,b=a.xAxis,h=d(c.chart.xaxislabelmode,"categories"),c=c.categories&&c.categories[0],c=(c&&c.category||[]).slice(),f,e,g,l,k;f=Infinity;g=-Infinity;var t,p;ta("mscartesian")._setAxisLimits.call(this);e=b[0].getLimit();l=e.tickInterval;for(k=0;k<c.length;k+=1)if(t=c[k].x)t<f&&
(f=t),t>g&&(g=t);k=this._getTrendLineMinMax("v");g=Y(g,k.max);f=oa(f,k.min);if(g>e.max||f<e.min)g=Y(g,e.max),f=oa(f,e.min),b[0].setDataLimit(g,f);if("mixed"===h||"auto"===h||!(c&&0<c.length)){g=[];f=a.numberFormatter.xAxis;if("mixed"===h)for(k=0,h=c.length;k<h;k+=1)g[c[k].x||c[k].y||k]=!0;else c=[];t=b[0].getAxisConfig();p=k=e.min;for(h=e.max;k<=h;)g[k]||c.push({label:F+f.call(a.numberFormatter,k),x:k,showverticalline:0===k?t.showZeroPlane:1,isNumeric:!0,linecolor:0===k?t.zeroPlaneColor:t.divLineColor,
linealpha:0===k?t.zeroPlaneAlpha:t.divLineAlpha,linethickness:0===k?t.zeroPlaneThickness:t.divLineThickness,linedashed:t.divLineIsDashed,linedashLen:t.divLineDashLen,linedashgap:t.divLineDashGap}),0>k&&0<k+l?(k=0,p+=l):k<p?k=p:(k+=l,p+=l);b[0].setCategory(c,!1)}},_createQuadrant:function(){var a;a=this.components;var c=Q.register("component",["quadrant","cartesian"]);a.quadrant=a=new c;a.chart=this;a.init()},_drawQuadrant:function(){this.components.quadrant.draw()},_getDiff:function(a,c){return{diff:a,
startIndex:c}}},ta.mscartesian,{zeroplanethickness:1,zeroplanealpha:40,showzeroplaneontop:0,setadaptivexmin:1});ta("areabase",{standaloneInit:!1,enableMouseTracker:!0},ta.mscartesian,{anchorborderthickness:1,anchorimageurl:void 0,anchorimagepadding:1,anchorsides:1,anchoralpha:void 0,anchorbgalpha:O,anchorimagealpha:O,anchorimagescale:100,anchorstartangle:90,anchorshadow:0,anchorbgcolor:void 0,anchorbordercolor:void 0,anchorradius:3,showvalues:1,plotfillalpha:P,linedashlen:5,linedashgap:4,linedashed:void 0,
linealpha:O,linethickness:2,drawfullareaborder:1,connectnulldata:0})}]);Q.register("module",["private","modules.renderer.js-renderer",function(){var b=this.hcLib.Raphael,v=Math.round;b.ca.ishot=function(v){if(this.removed)return!1;var C=this.node;v=v||"";C.ishot=v;switch(this.type){case "group":for(C=this.bottom;C;)C.attr("ishot",v),C=C.next;break;case "text":if(b.svg)for(C=C.getElementsByTagName("tspan")[0];C;)C.ishot=v,C=C.nextSibling}return!1};b.addSymbol({printIcon:function(b,C,H){var A=.75*H,
u=.5*H,a=.33*H,O=v(b-H)+.5,q=v(C-H)+.5,M=v(b+H)+.5;H=v(C+H)+.5;var U=v(b-A)+.5,N=v(C-A)+.5,A=v(b+A)+.5,E=v(C+u)+.5,r=v(b+u)+.5,k=v(C+a)+.5;b=v(b-u)+.5;a=v(C+a+a)+.5;return["M",U,q,"L",A,q,A,N,U,N,"Z","M",O,N,"L",O,E,U,E,U,C,A,C,A,E,M,E,M,N,"Z","M",U,C,"L",U,H,A,H,A,C,"Z","M",r,k,"L",b,k,"M",r,a,"L",b,a]},exportIcon:function(b,C,H){var A=.66*H,u=.5*A,a=v(b-H)+.5,O=v(C-H)+.5,q=v(b+H)+.5;H=v(C+H)-.5;var M=v(b-u)+.5,U=C<H-3?H-3:v(C)+.5,u=v(b+u)-.5,N=v(b+A)-.5,A=v(b-A)+.5;return["M",a,U,"L",a,H,q,H,q,
U,q,H,a,H,"Z","M",b,H-1,"L",A,C,M,C,M,O,u,O,u,C,N,C,"Z"]}})}]);Q.register("module",["private","modules.renderer.js-axis-cartesian",function(){var b=this.hcLib,v=b.parseConfiguration,J=b.BLANKSTRING,C=b.extend2,H=b.pluck,A=b.toPrecision,u=b.pluckNumber,a=b.setLineHeight,O=b.pluckFontSize,q=b.toRaphaelColor,M=b.graphics.convertColor,U=b.parseUnsafeString,N=b.ONESTRING,E=b.getDashStyle,r=b.plotEventHandler,k=b.getValidValue,m=b.getFirstValue,n=b.parseTooltext,L=b.preDefStr,g=L.visibleStr,l=L.hiddenStr,
B=L.POSITION_MIDDLE,e=L.POSITION_START,V=L.POSITION_TOP,p=L.POSITION_BOTTOM,T=L.POSITION_END,K=8===this.window.document.documentMode?g:"",L=Math,t=L.round,Z=L.min,P=L.max,S=L.abs,z=L.ceil,R=L.floor,w=L.pow,F=L.log,X=function(a,d){var b=!1,c=d%2,e;a[1]===a[4]&&(b=a[1],e=t(b),a[1]=a[4]=c?e>b?e-.5:e+.5:e,b=!0);a[2]===a[5]&&(b=a[2],e=t(b),a[2]=a[5]=c?e>b?e-.5:e+.5:e,b=!0);return{path:a,isCrisped:b}};Q.register("component",["axis","cartesian",{pIndex:2,customConfigFn:"_feedAxesRawData",init:function(a,
d,b,c){var e;this.graphics={};this.components={};e=this.config;e.isVertical=d;e.isReverse=b;e.isOpposit=c;e.isActive=!0;e.drawLabels=!0;e.drawOnlyCategoryLine=!1;e.drawLabelsOpposit=!1;e.drawLabelOnBothSide=!1;e.drawPlotlines=!0;e.drawAxisLine=!0;e.drawPlotBands=!0;e.drawAxisName=!0;e.drawAxisNameOpposit=!1;e.axisNameAlignCanvas=!1;e.drawAxisNameFromBottom=!1;e.drawTrendLines=!0;e.drawTrendLabels=!0;e.drawTick=!0;e.drawTickMinor=!0;e.animateAxis=!0;e.drawAxisLineWRTCanvas=!0;e.isRelativeAxisInverse=
!1;e.axisIndex=0;e.uniqueClassName=0;e.viewPortRatio={};e.canvas={};e.rawAttr=a;e.axisRange={};e.isConfigured=!0;e.axisDimention={};e.extremeLabels={firstLabel:{},lastLabel:{}};e._setRangeAgain=!1;e._defaultForceDecimal=void 0;e._defaultDecimalPrecision=void 0},setCommonConfigArr:function(a,d,b,c){var e=this.config;e.rawAttr=a;e.isVertical=d;e.isReverse=b;e.isOpposit=c},configure:function(){var b=this.config,d=b.rawAttr,f=this.chart,c=f.components,e=this.chart.is3D,f=f.jsonData.chart,g=c.numberFormatter;
b.trendLines=d.trendlines;b.vTrendLines=d.vtrendlines;this.__setDefaultConfig();v(d,b);b.axisName=U(d.axisName);b.axisValuePadding=b.axisNamePadding||u(d.axisValuePadding,4);b.axisNamePadding=b.axisNamePadding||u(d.axisNamePadding,5);b.maxLabelWidthPercent=u(d.maxLabelWidthPercent);b.maxLabelWidthPercent=S(b.maxLabelWidthPercent);b.minLabelWidthPercent=S(u(d.minLabelWidthPercent));b.numDivLines=u(d.numDivLines,4);0>b.numDivLines&&(b.numDivLines=0);b.categoryNumDivLines=u(d.numDivLines,0);0>b.axisValuePadding&&
(b.axisValuePadding=0);b.categoryDivLinesFromZero=1;b.axisMinValue=g.getCleanValue(d.axisMinValue);b.axisMaxValue=g.getCleanValue(d.axisMaxValue);b.zeroPlaneColor=H(d.zeroPlaneColor,d.divLineColor);b.zeroPlaneThickness=H(d.zeroPlaneThickness,d.divLineThickness);b.axisLineColor=M(d.axisLineColor,d.axisLineAlpha);b.tickAlpha=u(d.tickAlpha,b.axisLineAlpha);b.tickColor=M(H(d.tickColor,d.axisLineColor),b.tickAlpha);b.tickWidth=u(d.tickWidth,b.axisLineThickness);b.showVLines=u(f.showvlines,1);b.showVLinesOnTop=
u(f.showvlinesontop,0);b.showVLineLabels=u(f.showvlinelabels,this.showVLineLabels,1);b.showVLineLabelBorder=u(f.showvlinelabelborder,1);b.rotateVLineLabels=u(f.rotatevlinelabels,0);b.vLineColor=H(f.vlinecolor,"333333");b.vLineLabelColor=H(f.vlinelabelcolor);b.vLineThickness=H(f.vlinethickness,1);b.vLineAlpha=u(f.vlinealpha,80);b.vLineLabelBgColor=H(f.vlinelabelbgcolor,"ffffff");b.vLineLabelBgAlpha=u(f.vlinelabelbgalpha,e?50:100);b.staggerLines=Math.max(u(f.staggerlines,2),2);1>b.staggerlines&&(b.staggerlines=
1);b.trendlineValuesOnOpp=H(d.trendlineValuesOnOpp,d.trendlineValuesOnOpp,0);b.labelDisplay=H(d.labelDisplay,"auto").toLowerCase();b.labelStep=u(d.labelStep,0);b.labelStep=t(b.labelStep);0>b.labelStep&&(b.labelStep=0);b._oriLabelStep=b.labelStep;b.showLimits=u(d.showLimits,b.showAxisValues);b.showUpperLimit=d.showLimits;b.showDivLineValues=u(d.showDivLineValues,b.showAxisValues);b.showCanvasBorder=c.canvas.config.showCanvasBorder?1:0;b.axisBreak=d.axisBreaks;b.isBreak=!!b.axisBreak;b.isBreak&&this._processAxisBreak();
c=(c=m(d.axisNameBorderColor,""))?M(c,u(d.axisNameBorderAlpha,d.axisNameAlpha,100)):"";b.name=b.name||{};b.name.style={fontFamily:H(d.axisNameFont,d.outCanfontFamily),fontSize:H(d.axisNameFontSize,parseInt(d.outCanfontSize,10))+"px",color:M(H(d.axisNameFontColor,d.outCancolor),u(d.axisNameFontAlpha,d.axisNameAlpha,100)),fontWeight:u(d.axisNameFontBold,1)?"bold":"normal",fontStyle:u(d.axisNameFontItalic)?"italic":"normal",border:c||d.axisNameBgColor?u(d.axisNameBorderThickness,1)+"px solid":void 0,
borderColor:c,borderThickness:u(d.axisNameBorderThickness,1),borderPadding:u(d.axisNameBorderPadding,2),borderRadius:u(d.axisNameBorderRadius,0),backgroundColor:d.axisNameBgColor?M(d.axisNameBgColor,u(d.axisNameBgAlpha,d.axisNameAlpha,100)):"",borderDash:u(d.axisNameBorderDashed,0)?E(u(d.axisNameBorderDashLen,4),u(d.axisNameBorderDashGap,2),u(d.axisNameBorderThickness,1)):"none"};b.name.style.lineHeight=a(b.name.style);c=(c=m(f.trendvaluebordercolor,""))?M(c,u(f.trendvalueborderalpha,f.trendvaluealpha,
100)):"";b.trend=b.trend||{};b.trend.trendStyle={fontFamily:H(f.trendvaluefont,d.outCanfontFamily),color:H(f.trendvaluefontcolor,d.trendlineColor,d.outCancolor,"333333"),fontSize:O(f.trendvaluefontsize,parseInt(d.outCanfontSize,10))+"px",fontWeight:u(f.trendvaluefontbold)?"bold":"normal",fontStyle:u(f.trendvaluefontitalic)?"italic":"normal",border:c||f.trendvaluebgcolor?u(f.trendvalueborderthickness,1)+"px solid":"",borderColor:c,borderThickness:u(f.trendvalueborderthickness,1),borderPadding:u(f.trendvalueborderpadding,
2),borderRadius:u(f.trendvalueborderradius,0),backgroundColor:f.trendvaluebgcolor?M(f.trendvaluebgcolor,u(f.trendvaluebgalpha,f.trendvaluealpha,100)):"",borderDash:u(f.trendvalueborderdashed,0)?E(u(f.trendvalueborderdashlen,4),u(f.trendvalueborderdashgap,2),u(f.trendvalueborderthickness,1)):"none"};b.trend.trendStyle.lineHeight=a(b.trend.trendStyle);b.labels=b.labels||{};b.lines=b.lines||{};b.band=b.band||{};c=(c=m(f.labelbordercolor,""))?M(c,u(f.labelborderalpha,f.labelalpha,100)):"";b.labels.style=
{fontFamily:H(d.labelFont,d.outCanfontFamily),fontSize:u(d.labelFontSize,parseInt(d.outCanfontSize,10))+"px",fontWeight:u(d.labelFontBold)?"bold":"normal",fontStyle:u(d.labelFontItalic)?"italic":"normal",color:M(H(d.labelFontColor,d.outCancolor),u(d.labelFontAlpha,100)),labelLink:f.labellink,border:c||f.labelbgcolor?u(f.labelborderthickness,1)+"px solid":"",borderColor:c,borderThickness:u(f.labelborderthickness,1),borderPadding:u(f.labelborderpadding,2),borderRadius:u(f.labelborderradius,0),backgroundColor:f.labelbgcolor?
M(f.labelbgcolor,u(f.labelbgalpha,f.labelalpha,100)):"",borderDash:u(f.labelborderdashed,0)?E(u(f.labelborderdashlen,4),u(f.labelborderdashgap,2),u(f.labelborderthickness,1)):"none"};b.labels.style.lineHeight=a(b.labels.style);b.numberFormatterFn=H(d.numberFormatterFn);b.axisEndLabelDisplaySpace={left:0,right:0,top:0,bottom:0};b.isConfigured=!0;b._defaultForceDecimal=void 0;b._defaultDecimalPrecision=void 0},_processAxisBreak:function(){var a=this.config,d,b,c,e;a.breakPoints=[];d=a.axisBreak.split("|");
c=0;e=d.length;for(b=0;c<e;c+=1)d[c]=d[c].split(","),isNaN(d[c][0])||isNaN(d[c][1])||(a.breakPoints[b]={start:u(d[c][0]),end:u(d[c][1]),length:u(d[c][2],0)},b+=1);a.breakPoints.sort(function(a,c){return a.start-c.start});a.hasBreakPoints=!0;this._validateBreakPoints()},_validateBreakPoints:function(){var a=this.config,d=a.breakPoints,b=0,c,e=d.length;for(c=0;c<e;c+=1)b+=d[c].end-d[c].start;a.totalBreakAmount=b},_getRelativeBreakValue:function(a){var d=this.config.breakPoints,b,c=d.length,e=0;for(b=
0;b<c;b+=1){if(a>=d[b].start&&a<=d[b].end)return d[b].start-e;if(a<d[b].start)break;e+=d[b].end-d[b].start}return a-e},_getRealBreakValue:function(a){var d=this.config.breakPoints,b,c=d.length;for(b=0;b<c;b+=1)if(a>=d[b].start)a+=d[b].end-d[b].start;else if(a<d[b].start)break;return a},getBreakPoints:function(){var a=this.config;return a.hasBreakPoints?a.breakPoints:!1},setCanvas:function(a){this.config.canvas=a},getAxisBase:function(){var a=this.config,d=a.axisRange.min,b=a.axisRange.max;return 0>
d&&0<b?0:a.isReverse?b:0>=b?b:d},getValue:function(a){var d=this.config,b=d.axisRange,c=d.canvas,e=d.axisDimention||{},g=this.chart.config,l=g.viewPortConfig,k=e.axisLength||c.canvasWidth||g.canvasWidth,e=e.axisLength||c.canvasHeight||g.canvasHeight,c=b.max,b=b.min,g=c-b;d.isVertical?(k=e*l.scaleY/g,a=d.isReverse?b+(l.y*l.scaleY+Number(a))/k:c-(l.y*l.scaleY+Number(a))/k):(k=k*l.scaleX/g,a=d.isReverse?c-(l.x*l.scaleX+Number(a))/k:b+(l.x*l.scaleX+Number(a))/k);return a},_getLabelElement:function(a){var d=
this.components;return this.config.hasCategory?d&&d.categoryLabel&&d.categoryLabel[a]&&d.categoryLabel[a].graphics&&d.categoryLabel[a].graphics.label:this.graphics&&this.graphics.labels&&this.graphics.labels[a]},_getVisibleConfig:function(){var a=this.config,d=a.axisRange,b=a.canvas,c=a.axisDimention||{},e=this.chart.config,g=e.viewPortConfig,l=c.axisLength||b.canvasWidth||e.canvasWidth,b=c.axisLength||b.canvasHeight||e.canvasHeight,c=d.max,d=d.min,e=c-d;a.isVertical?(e/=b,a=g.scaleY,l=c-e*g.y,b=
c-e*(g.y+b/a)):(e/=l,a=g.scaleX,b=d+e*g.x,l=d+e*(g.x+l/a));return{maxValue:l,minValue:b}},_adjustNumberFormatter:function(a){var d=this.config,b=d.axisIndex,c=this.chart.components,e=d._defaultDecimalPrecision,g=d._defaultForceDecimal,l=0,b=d.isVertical||"yAxis"===d.numberFormatterFn?(c.numberFormatter.Y[b]||c.numberFormatter.Y[0]).yAxisLabelConf:c.numberFormatter.paramX;void 0!==e?b.decimalprecision=e:d._defaultDecimalPrecision=b.decimalprecision;void 0!==g?b.forcedecimals=g:d._defaultForceDecimal=
b.forcedecimals;0<parseInt(a)||!(a=a.toString().split(".")[1])||(l=a.match(/^[0]*/)[0].length,l+1>b.decimalprecision&&(b.forcedecimals=1),b.decimalprecision=P(l+1,b.decimalprecision))},_setTickIntervalAfterZoom:function(){var a=this.config,d=this.chart.config.viewPortConfig,f=a.isVertical,c=a.axisRange,e=b.getAxisLimits,g=a.numDivLines,l=a.setAdaptiveMin,k=a.adjustDiv,k=a.rawAttr,t,p,m,w;a.hasCategory||(f=f?d.scaleY:d.scaleX,d=u(k.axisrange?k.axisrange.max:c.max),w=u(k.axisrange?k.axisrange.min:c.min),
p=c.max,m=c.min,l=t=!l,k=u(1===f?a.adjustDiv:0),a=e(d,w,p,m,t,l,g*f,k),c.min=Number(A(a.Min,10)),c.max=Number(A(a.Max,10)),c.tickInterval=Number(A(a.divGap,10)),this._adjustNumberFormatter(c.tickInterval),0===c.tickInterval&&(c.tickInterval=1))},_getAttribAsObj:function(a){var d,b={};for(d in a)a.hasOwnProperty(d)&&"string"===typeof a[d]&&a[d]&&(b[d]=a[d]);return b},_extractAttribToEnd:function(a,d){var b;a._attrib=C({},d);a._attrib=C(a._attrib,this._getAttribAsObj(a));for(b in a)a.hasOwnProperty(b)&&
a[b]&&"object"===typeof a[b]&&"_attrib"!==b&&this._extractAttribToEnd(a[b],a._attrib)},setCategory:function(a,d){var b;function c(a){var c={labelfont:["fontFamily"],labelfontcolor:["fontColor"],labelfontsize:["fontSize",function(a){return a?u(a)+"px":void 0}],labelfontbold:["fontWeight",function(a){return a?"bold":"normal"}],labelfontitalic:["fontStyle",function(a){return a?"italic":"normal"}],labelfontalpha:["fontAlpha"]},d=function(a){return a},b=!1,f,h,e,l={},k,t;for(f in g)"category"===f||f in
a||(h=g[f],a[f]=h);for(f in c){e=c[f];k=e[0];t=e[1]||d;h=a[f];e=a[k.toLowerCase()];if(void 0!==h||void 0!==e)if(void 0!==(h=t(h))||void 0!==(h=t(e)))l[k]=h,b=!0;b&&(a.style=l)}}var e=this.chart.jsonData.categories,g=e&&e[0]||{},e=this.config,l=e.axisRange;b=a&&a.length;var k=e.startPad||0,t=e.endPad||0,p=0,m=void 0!==d?d:!0,w,z,r,n,B,F;e.hasCategory=1;e.categories={};n=e.categories.category=[];B=e.categories.vline=[];z=e.categories.catIdMap={};e.isCategoryAnimate=!1;e.isCategoryVlineAnimate=!1;for(r=
0;r<b;r+=1)(w=a[r])||(w={}),F=Number(w.x),"true"!==w.vline&&!0!==w.vline&&1!==w.vline&&"1"!==w.vline?(w.id&&(z[w.id.toLowerCase()]={catObj:w,index:r}),c(w),F===F&&this.chart.usesXYinCategory&&(w.x=F,e.irregularCatAxis=!0),n.push(w),n[p].label=U(n[p].label),p+=1):(w.startIndex=n.length-1,B.push(w));e.oriCatLen=p-1;1===p&&(0===k&&(k=.5),0===t&&(t=.5));m&&(b=p-1+t,l.min=Number(A(-k,10)),l.max=Number(A(b,10)),l.tickInterval=Number(A(1,10)));e.isConfigured=!0},updateCategory:function(a,d){var b=this.config,
c,e;c=b.categories.category;if(c[a])for(e in d)d.hasOwnProperty(e)&&(c[a][e]=d[e]);b.isConfigured=!0},categoryInsert:function(a,d,b){var c=this.config,e=c.axisRange,g=d.length,l=c.endPad||0,k,t,p,m,w;k=c.categories.category;p=c.categories.catIdMap;t=c.categories.vline;for(m=0;m<g;m+=1)w=d[m],"true"!==w.vline&&!0!==w.vline&&1!==w.vline&&"1"!==w.vline?(w.id&&(p[w.id]={catObj:w,i:a}),k.splice(a,0,w),a+=1):(w.startIndex=a-2,t.push(w));b&&(e.max=Number(A(k.length-1+l,10)));c.isConfigured=!0},categoryDelete:function(a,
d,b){var c=this.config,e=c.axisRange,g,l,k;c.isCategoryAnimate=!0;g=c.animateCategories=c.categories.category.slice();l=0;for(k=g.length;l<k;l++)g[l].animate=!0,g[l].leftShift=d,g[l]["delete"]=l<d;c.isCategoryVlineAnimate=!0;g=c.animateCategoriesVline=c.categories.vline.slice();l=0;for(k=g.length;l<k;l++)g[l].animate=!0,g[l].leftShift=d;c.categories.category.splice(a,d);this._shiftVline(a,d,"left");b&&(e.max-=d);c.isConfigured=!0},categoryUpdate:function(a,d){var b=this.config,c;c=b.categories.category;
c[a]&&(c[a]=d);b.isConfigured=!0},_getRotateTextTransformString:function(a,d,b){var c,e="";a=a.matrix.toMatrixString();a.replace(/\(([^\)]*)/,function(a,h){c=h.split(",");c[4]=Number(c[4])+d;c[5]=Number(c[5])+b;e=c.join();return a});e="m"+e;""===a&&(e="t"+d+","+b);return e},_shiftVline:function(a,d,b){var c=this.config,e=c.categories.vline,c=c.categories.category.length,g=e.length,l,k;for(l=0;l<g;l+=1)if(k=e[l],k.startIndex>=a&&(k.startIndex="right"===b?k.startIndex+d:k.startIndex-d,0>k.startIndex-
d||k.startIndex-d>=c))e.splice(l,1),--g,--l},shiftLabels:function(a,d){var b=this.config.labels;b.shiftX=a;b.shiftY=d},setAxisPadding:function(a,d){var b=this.config;a=b.startPad=u(a,0);d=b.endPad=u(d,0);0===b.oriCatLen&&(0===a&&(a=.5),0===d&&(d=.5));b.hasCategory?0<=b.oriCatLen&&this.setAxisRange({max:b.oriCatLen+d,min:-a}):b.originalMax&&b.originalMin&&this.setDataLimit(b.originalMax,b.originalMin)},setAxisConfig:function(a){var d=this.config,b;for(b in a)a.hasOwnProperty(b)&&(d[b]=a[b])},getAxisConfig:function(a){var d=
this.config;return a?d[a]:d},setLabelConfig:function(a){var d=this.config.labels,b;for(b in a)a.hasOwnProperty(b)&&(d[b]=a[b])},setAxisRange:function(a){var d=this.config.axisRange,b;for(b in a)a.hasOwnProperty(b)&&void 0!==d[b]&&(d[b]=a[b])},getAxisEndLabelDisplaySpace:function(){return this.config.axisEndLabelDisplaySpace||{}},getDivLineCount:function(){var a=this.config.axisRange;return S((a.max-a.min)/a.tickInterval)-1},getLabel:function(a){var d=this.config;a=d.categories&&d.categories.category[a];
var d=[3],b={};a&&a.tooltext&&(b.label=a.label,a.tooltext=n(a.tooltext,d,b));return{label:a&&(a.oriLabel||a.label),tooltext:a&&a.tooltext}},getCategoryFromId:function(a){var d=this.config;return(a=d.categories&&d.categories.catIdMap[a])?a:{}},getCategoryPositionById:function(a){var d=this.config;return(a=d.categories&&d.categories.catIdMap[a])?a.catObj.x||a.index:!1},getClosestDiv:function(a,d){var b=this.config,c=b.axisRange,e=c.tickInterval,g=c.min,c=a;b.hasCategory&&(g=0,e=1);d=d||e/2;g=(a-g)%
e;e-=g;b.showZeroPlaneValue&&0>a-g&&0<a&&(g=a);b.showZeroPlaneValue&&0<a+e&&0>a&&(e=-a);g<=e?g<=d&&(c=a-g):e<=d&&(c=a+e);return c},setAxisDimention:function(a){var d=this.config,d=d.axisDimention||(d.axisDimention={});d.x=u(a.x,d.x);d.y=u(a.y,d.y);d.opposite=u(a.opposite,d.opposite);d.axisLength=u(a.axisLength,d.axisLength)},setDataLimit:function(a,d){var f=this.config,c=f.axisRange,e=b.getAxisLimits,g=f.isPercent?100:f.axisMaxValue,l=f.isPercent?0:f.axisMinValue,k=f.numDivLines,t=f.setAdaptiveMin,
p=f.adjustDiv,m=f.startPad||0,w=f.endPad||0;f.originalMax=a;f.originalMin=d;a=f.isPercent?100:a+w;d=f.isPercent?0:d-m;t=m=!t;f.hasBreakPoints&&(a-=f.totalBreakAmount);f=e(u(a,g),u(d,l),g,l,m,t,k,p);c.min=Number(A(f.Min,10));c.max=Number(A(f.Max,10));c.tickInterval=Number(A(f.divGap,10));this._adjustNumberFormatter(c.tickInterval);0===c.tickInterval&&(c.tickInterval=1)},getPixel:function(a){var d=this.config,b=d.canvas,c=this.chart.config,e=d.axisDimention||{},g=c.viewPortConfig,l=e.axisLength||b.canvasHeight||
c.canvasHeight,k=e.y||b.canvasTop||c.canvasTop,t=e.x||b.canvasLeft||c.canvasLeft,p=e.y+e.axisLength||b.canvasBottom||c.canvasBottom,b=e.x+e.axisLength||b.canvasRight||c.canvasRight,c=d.axisRange.min;d.hasBreakPoints&&(a=this._getRelativeBreakValue(a));g||(g={x:t,y:k,scaleX:1,scaleY:1});d.isVertical?(e=-this.getPVR(),a=d.isReverse?p-((a-c)*e+(l*g.scaleY-g.y*g.scaleY)):k+((a-c)*e+(l*g.scaleY-g.y*g.scaleY))):(e=this.getPVR(),a=d.isReverse?b-((a-c)*e-g.x*g.scaleX):t+((a-c)*e-g.x*g.scaleX));return a},
_getCustomPixel:function(a,b){var f=this.config,c=f.canvas,e=this.chart.config,g=f.axisRange,l=e.viewPortConfig,k=b||c.canvasHeight||e.canvasHeight,t=b||c.canvasWidth||e.canvasWidth,p=c.canvasTop||e.canvasTop,m=c.canvasLeft||e.canvasLeft,w=w||e.canvasBottom,c=c.canvasRight||e.canvasRight,e=g.min,g=g.max-e;f.hasBreakPoints&&(a=this._getRelativeBreakValue(a));l||(l={x:m,y:p,scaleX:1,scaleY:1});f.isVertical?(t=-(k*l.scaleY/g),f=f.isReverse?w-((a-e)*t+(k*l.scaleY-l.y*l.scaleY)):p+((a-e)*t+(k*l.scaleY-
l.y*l.scaleY))):(t=t*l.scaleX/g,f=f.isReverse?c-((a-e)*t-l.x*l.scaleX):m+((a-e)*t-l.x*l.scaleX));return f},getLimit:function(){var a=this.config.axisRange;return{min:a.min,max:a.max,tickInterval:a.tickInterval}},getAxisPosition:function(a){return this.getPixel(a)},getPVR:function(){var a=this.config,b=a.canvas,f=a.isVertical,c=a.axisRange,e=a.axisDimention||{},g=this.chart.config,a=g.viewPortConfig,l=e.axisLength||b.canvasHeight||g.canvasHeight,b=e.axisLength||b.canvasWidth||g.canvasWidth,c=c.max-
c.min,c=0<c?c:1;return f?l*a.scaleY/c:b*a.scaleX/c},_isZoomed:function(){var a=this.chart.config;if(this.config.isVertical){if(a.viewPortConfig&&1===a.viewPortConfig.scaleY)return!1}else if(a.viewPortConfig&&1===a.viewPortConfig.scaleX)return!1;return!0},draw:function(){var a=this.config,b=a.canvas,f=this.chart,c=f.config,e=a.isVertical,g=f.graphics,l=f.components.paper,k=c.viewPortConfig,t=a.viewPortRatio||{},p=b.canvasLeft||c.canvasLeft,m=b.canvasTop||c.canvasTop,w=b.canvasWidth||c.canvasWidth,
z=b.canvasHeight||c.canvasHeight,b=a.axisContainer,c=a.axisLabelContainerTop,r=a.axisPlotLineContainer,n=a.axisPlotLineContainerTop,B=a.vlineLabelContainer,F=a.axisBandContainer,q=a.axisNameContainer,K=a.axisTrendContainerTop,u=a.axisTrendContainerBottom,R=a.axisTrendLabelContainer,L=a.axisAxisLineContainer,P=a.axisAxisLineContainerBottom,v=a.divLineThickness||0,Z=g.axisBottomGroup,E=g.axisTopGroup,T=a.animateAxis,S,V,X,C,A,H,N,J,M,O,U,Q,Ja;M=k.y*k.scaleY;O=k.x*k.scaleX;f=f.get("config","animationObj");
U=f.animObj;Q=f.dummyObj;S=f.transposeAnimDuration;Ja=e?p+","+(m-v)+","+w+","+(z+2*v):p-v+","+m+","+(w+2*v)+","+z;v=g.axisBandGroup=g.axisBandGroup||l.group("dataset-Band-group",Z);V=g.axisPlotLineGroup=g.axisPlotLineGroup||l.group("dataset-Line-group",Z);J=g.axisTrendGroupBottom=g.axisTrendGroupBottom||l.group("dataset-Trend-group-bottom",Z);X=g.axisPlotLineGroupTop=g.axisPlotLineGroupTop||l.group("dataset-Line-group-top",E);A=g.axisNameGroup=g.axisNameGroup||l.group("dataset-Name-group",Z);C=g.axisLineGroup=
g.axisLineGroup||l.group("axis-Line-group",E);N=g.axisTrendGroupTop=g.axisTrendGroupTop||l.group("dataset-Trend-group-top",E);H=g.axisLabelGroup=g.axisLabelGroup||l.group("dataset-Label-group",Z);g=g.axisLabelGroupTop=g.axisLabelGroupTop||l.group("dataset-Label-group",E);b||(a.axisContainer=b=l.group("dataset-axis",H));c||(a.axisLabelContainerTop=c=l.group("dataset-top-label",g));L||(a.axisAxisLineContainer=l.group("axis-line-tick",C));B||(a.vlineLabelContainer=B=l.group("axis-vline-label",C));F?
S&&T?F.animateWith(Q,U,{"clip-rect":p+","+m+","+w+","+z},S,f.animType):F.attr({"clip-rect":p+","+m+","+w+","+z}):(a.axisBandContainer=F=l.group("dataset-axis-bands",v),F.attr({"clip-rect":p+","+m+","+w+","+z}));r?S&&T?r.animateWith(Q,U,{"clip-rect":Ja},S,f.animType):r.attr({"clip-rect":Ja}):(a.axisPlotLineContainer=r=l.group("dataset-axis-lines",V),r.attr({"clip-rect":Ja}));n?S&&T?n.animateWith(Q,U,{"clip-rect":Ja},S,f.animType):n.attr({"clip-rect":Ja}):(a.axisPlotLineContainerTop=n=l.group("dataset-axis-lines-top",
X),n.attr({"clip-rect":Ja}));K?S&&T?K.animateWith(Q,U,{"clip-rect":p+","+m+","+w+","+z},S,f.animType):K.attr({"clip-rect":p+","+m+","+w+","+z}):(a.axisTrendContainerTop=K=l.group("dataset-axis-trend-top",N),K.attr({"clip-rect":p+","+m+","+w+","+z}));u?S&&T?u.animateWith(Q,U,{"clip-rect":p+","+m+","+w+","+z},S,f.animType):u.attr({"clip-rect":p+","+m+","+w+","+z}):(a.axisTrendContainerBottom=u=l.group("dataset-axis-trend-bottom",J),u.attr({"clip-rect":p+","+m+","+w+","+z}));R||(a.axisTrendLabelContainer=
l.group("dataset-axis-trend-label",N));q||(a.axisNameContainer=l.group("dataset-axis-name",A));P||(a.axisAxisLineContainerBottom=l.group("axis-line-tick-bottom",Z));t.scaleX!==k.scaleX||t.scaleY!==k.scaleY?(t.scaleX=k.scaleX,t.scaleY=k.scaleY):e?(a=M-k.y*k.scaleY,B.transform("t0,"+a),b.transform("t0,"+a),c.transform("t0,"+a),r.transform("t0,"+a),n.transform("t0,"+a),F.transform("t0,"+a),K.transform("t0,"+a),u.transform("t0,"+a)):(a=O-k.x*k.scaleX,B.transform("t"+a+",0"),b.transform("t"+a+",0"),c.transform("t"+
a+",0"),r.transform("t"+a+",0"),n.transform("t"+a+",0"),F.transform("t"+a+",0"),K.transform("t"+a+",0"),u.transform("t"+a+",0"));this._drawComponents()},hide:function(){var a=this.config;a.axisContainer&&(a.axisLabelContainerTop.hide(),a.axisContainer.hide(),a.axisPlotLineContainer.hide(),a.axisPlotLineContainerTop.hide(),a.axisBandContainer.hide(),a.axisNameContainer.hide(),a.axisTrendContainerTop.hide(),a.axisTrendContainerBottom.hide(),a.axisTrendLabelContainer.hide(),a.axisAxisLineContainer.hide(),
a.axisAxisLineContainerBottom.hide())},show:function(){var a=this.config;a.axisContainer&&(a.axisLabelContainerTop.show(),a.axisContainer.show(),a.axisPlotLineContainer.show(),a.axisPlotLineContainerTop.show(),a.axisBandContainer.show(),a.axisNameContainer.show(),a.axisTrendContainerTop.show(),a.axisTrendContainerBottom.show(),a.axisTrendLabelContainer.show(),a.axisAxisLineContainer.show(),a.axisAxisLineContainerBottom.show())},_drawComponents:function(){var a=this.config,b=this.chart.is3D,f,c;a.drawAxisName&&
this._drawAxisName();a.drawAxisLine&&this._drawAxisLine();a.drawAxisLine&&a.hasBreakPoints&&this._drawBreakPoints();a.isActive||(f=a.lines.isDraw,c=a.band.isDraw,a.lines.isDraw=0,a.band.isDraw=0);a.hasCategory?(a.drawLabels&&this._drawCategory(),a.drawOnlyCategoryLine&&this._drawCategoryLine()):(a.drawLabels&&this._drawLabel(),a.drawPlotlines&&this._drawPlotLine());a.hasCategory&&"auto"!==a.xAxisLabelMode?(a.drawPlotlines&&this._drawCategoryVline(),a.drawPlotlines&&!b&&this._drawCategoryPlotLine(),
a.drawPlotBands&&!a.hasBreakPoints&&!b&&this._drawCategoryPlotBand(),"mixed"===a.xAxisLabelMode&&a.drawPlotBands&&!a.hasBreakPoints&&!b&&this._drawPlotBand()):a.drawPlotBands&&!a.hasBreakPoints&&!b&&this._drawPlotBand();a.isActive||(a.lines.isDraw=f,a.band.isDraw=c);a.drawTrendLines&&this._drawTrendLine();a.isConfigured=!1},_manageReuseableElement:function(a,b,f){var c=this.config.isConfigured,e=this.chart.components.paper,g,l,k,t;g=a._graphicElem||(a._graphicElem=[]);l=a._freeElem||(a._freeElem=
[]);k=a._usedElem||(a._usedElem={});t=a._drawnIds={};return{getElement:function(a,h){var p=h||{};t[a]=!0;if(k[a])return k[a]._applyAllAttr=c,k[a]._firstTimeDraw=!1,k[a];if(0<l.length)return k[a]=l.pop(),k[a]._applyAllAttr=!0,k[a]._firstTimeDraw=!1,k[a];g.push(e[b](p,f));k[a]=g[g.length-1];k[a]._firstTimeDraw=!0;k[a]._applyAllAttr=!1;return k[a]},freeUnusedElement:function(){for(var a in k)k.hasOwnProperty(a)&&!t[a]&&(k[a].attr({visibility:"hidden"}),l.push(k[a]),delete k[a])}}},_drawLabel:function(){var a=
this.config,b=a.canvas,f=a.axisDimention||{},c=this.chart,g=c.config,l=c.components,k=a.axisRange,t=a.isOpposit,m,w=a.labels,r=w.style,n,B,F=a.isVertical,q=a.animateAxis,K=k.max,u=k.min,L=b.canvasTop||g.canvasTop,P=b.canvasLeft||g.canvasLeft,v=b.canvasBottom||g.canvasBottom,b=b.canvasRight||g.canvasRight,g=a.axisNameContainer,Z=a.labelPadding,E=a.showUpperLimit,X=l.paper,C=a.labelMaxH,H=a.labelMaxW,N=a.extremeLabels,J=F?f.x:f.y,f=f.opposite,M=a.drawLabelOnBothSide,O=this.graphics.labels||[],U=0,W=
!0,Q=!1,ea,ga,la,Ca={fontFamily:r.fontFamily,fontSize:r.fontSize,fontWeight:r.fontWeight,fontStyle:r.fontStyle,lineHeight:r.lineHeight},Ha,pa,La,Ja,Fa,ta=function(){(E||!E&&1>=a.labels.step)&&!Q&&n<K&&n+m>K&&(B=n=K-m,Q=!0);a.showZeroPlane&&0>n&&0<n+m?(n=0,B+=m):n<B?n=B:(n+=m,B+=m)};r.lineHeight&&(ea=r.lineHeight,-1!==ea.indexOf("px")&&(ea=ea.replace("px",""),ea=parseFloat(ea)));if(a.labels.isDraw){!M&&a.drawLabelsOpposit&&(t=!t,J=f);W=c.get("config","animationObj");La=W.animObj;Ja=W.dummyObj;c=W.transposeAnimDuration;
Fa=W.animType;W=S(this.getPixel(u)-this.getPixel(u+k.tickInterval));F?(a.labelMaxH>W&&!a.hasCategory&&(ga=z(a.labelMaxH/W)),ga>a.labels.step&&(a.labels.step=ga)):(a.labelMaxW>W&&!a.hasCategory&&(ga=z(a.labelMaxW/W)),ga>a.labels.step&&(a.labels.step=ga,E=!0));a.labels.step?m=k.tickInterval*a.labels.step:m=k.tickInterval;la=a.labels.rotation;k=this._getVisibleConfig();W=this._isZoomed();U=u+m*R((k.minValue-3*m-u)/m);ga=u+m*R((k.maxValue+3*m-u)/m);U=U<u?u:U;ga=ga>K?K:ga;Ha={fill:r.color,"line-height":ea,
"font-size":r.fontSize};M&&(pa={fill:r.color,"line-height":ea,"font-size":r.fontSize});F||(la?(Ha["text-anchor"]=t?e:T,Ha["vertical-align"]="center",M&&(pa["text-anchor"]=t?T:e,pa["vertical-align"]="center")):(Ha["vertical-align"]=t?p:V,M&&(pa["vertical-align"]=t?V:p)));g.css(Ca);N.firstLabel={};N.lastLabel={};B=n=U;for(U=0;n<=ga;){if(!W||!(n<k.minValue||n>k.maxValue))if(a.labels.drawNormalVal||a.labels.drawLimitVal&&(n===u||n===K))if(a.labels.drawNormalVal||n===u||n===K)if(a.labels.drawLimitVal||
n!==u&&n!==K)if(0!==a.showZeroPlane&&0!==a.showZeroPlaneValue||0!==n){if(1===a.showZeroPlane&&1===a.showZeroPlaneValue&&(0>n&&0<n+m||0<n&&0>n-m)&&n!==u&&n!==K)if(F){if(this.getPixel(n)+C>=this.getPixel(0)&&this.getPixel(0)>=this.getPixel(n)-C){ta();continue}}else if(this.getPixel(n)+H>=this.getPixel(0)&&this.getPixel(0)>=this.getPixel(n)-H){ta();continue}r=a.hasBreakPoints?A(this._getRealBreakValue(n),10):A(n,10);if(F)ea=a.numberFormatterFn?l.numberFormatter[a.numberFormatterFn]:a.isPercent?l.numberFormatter.percentValue:
l.numberFormatter.yAxis,ea=""+ea.call(l.numberFormatter,r,a.axisIndex),Ha["text-anchor"]=t?e:T,Ha.text=ea,Ha.x=t?(J||b)+Z:(J||P)-Z,Ha.y=this.getPixel(r),M&&(pa["text-anchor"]=t?T:e,pa.text=ea,pa.x=t?(f||P)-Z:(f||b)+Z,pa.y=this.getPixel(r));else{ea=a.numberFormatterFn?l.numberFormatter[a.numberFormatterFn]:a.isPercent?l.numberFormatter.percentValue:l.numberFormatter.xAxis;ea=""+ea.call(l.numberFormatter,r);Ha.text=ea;Ha.x=this.getPixel(r);Ha.y=t?(J||L)-Z:(J||v)+Z;if(n!==K&&E&&Ha.x+a.labelMaxW>b){ta();
continue}M&&(pa.text=ea,pa.x=this.getPixel(r),pa.y=t?(f||v)+Z:(f||L)-Z)}w.shiftX&&(Ha.x+=w.shiftX);w.shiftY&&(Ha.y+=w.shiftY);Ha.transform=X.getSuggestiveRotation(la,Ha.x,Ha.y);O[U]?(r=O[U],c&&q?r.animateWith(Ja,La,Ha,c,Fa):r.attr(Ha)):O[U]=r=X.text(Ha,g);U+=1;M&&(pa.transform=X.getSuggestiveRotation(la,pa.x,pa.y),O[U]?(r=O[U],c&&q?r.animateWith(Ja,La,pa,c,Fa):r.attr(pa)):O[U]=r=X.text(pa,g),U+=1);n===K?N.lastLabel.graphic=r:n===u&&(N.firstLabel.graphic=r)}ta()}if(O[U])for(n=U;n<O.length;n++)O[n].attr({text:""});
this.graphics.labels=O}else if(O[U])for(n=U;n<O.length;n++)O[n].attr({text:""})},_drawAxisName:function(){var a=this.config,b=a.canvas,f=this.chart,c=f.config,e=f.components,k=a.axisDimention||{},t=a.name.style,p=a.name.value,m=a.isVertical,w=a.isOpposit,z=f.linkedItems.smartLabel,r=b.canvasBottom||c.canvasBottom,n=b.canvasLeft||c.canvasLeft,B=b.canvasRight||c.canvasRight,F=b.canvasTop||c.canvasTop,K=b.canvasHeight||c.canvasHeight,q=b.canvasWidth||c.canvasWidth,b=a.axisNameContainer,R=a.axisNamePadding,
L=a.nameMaxH,v=a.nameMaxW,Z=m?k.x:k.y,E=k.opposite,S=this.graphics.axisName||{},k=u(a.name.rotation,m?270:90),e=e.paper,T={fontFamily:t.fontFamily,fontSize:t.fontSize,lineHeight:t.lineHeight,fontWeight:t.fontWeight,fontStyle:t.fontStyle},V=a.animateAxis,X,C,A,H;a.name.isDraw?(X=f.get("config","animationObj"),C=X.animObj,A=X.dummyObj,f=X.transposeAnimDuration,H=X.animType,X={fontFamily:t.fontFamily,fill:t.color,"vertical-align":"center","font-size":t.fontSize,"line-height":t.lineHeight},z.useEllipsesOnOverflow(c.useEllipsesWhenOverflow),
z.setStyle({fontSize:t.fontSize,fontFamily:t.fontFamily,lineHeight:t.lineHeight,fontWeight:t.fontWeight}),!a.drawLabelOnBothSide&&a.drawAxisNameOpposit&&(w=!w,Z=E),m?(a.relativeAxis&&a.relativeAxis.config&&a.relativeAxis.config.axisNamePadding&&(R=P(a.relativeAxis.config.axisNamePadding,R)),w&&c.canvasMarginRight&&(R=P(R,c.canvasMarginRight-c.marginLeft-v)),!w&&c.canvasMarginLeft&&(R=P(R,c.canvasMarginLeft-c.marginRight-v)),q=a.axisNameAlignCanvas||c.captionalignment&&"left"==c.captionalignment?K:
P(K,a.oriCanvasHeight||0),k?(p=z.getSmartText(p,q,v),z=p.tooltext,q=p.width):(p=z.getSmartText(p,v,q),z=p.tooltext,q=p.height),c=a.drawAxisNameFromBottom?r-q/2:q>K?c.height/2:F+K/2,X.text=p.text,X.x=w?(Z||B)+R+v/2:(Z||n)-R-v/2,X.y=c):(p=z.getSmartText(p,q,L),z=p.tooltext,w&&c.canvasMarginTop&&(R=P(R,c.canvasMarginTop-c.marginTop-L)),!w&&c.canvasMarginBottom&&(R=P(R,c.canvasMarginBottom-c.marginBottom-L)),X.text=p.text,X.x=n+q/2,X.y=w?(Z||F)-R-L/2:(Z||r)+R+L/2),X.transform=e.getSuggestiveRotation(m?
k:0,X.x,X.y),this.graphics.axisName?(X.visibility=g,f&&V?S.animateWith(A,C,X,f,H):S.attr(X),a.showTooltip&&z&&S.trackTooltip(!0),S.css(T)):(S=e.text(X,T,b).tooltip(z),a.showTooltip&&z&&S.trackTooltip(!0)),""!==p.text?S.attr({"text-bound":[t.backgroundColor,t.borderColor,t.borderThickness,t.borderPadding,t.borderRadius,t.borderDash]}):S.attr({"text-bound":[]}),this.graphics.axisName=S):this.graphics.axisName&&this.graphics.axisName.attr({visibility:l})},_drawPlotLine:function(){var a=this.config,b=
a.axisRange,f=b.tickInterval,c=a.isVertical,e=a.canvas,g=this.chart,l=this.chart.is3D,k=g.config,t=e.canvasBottom||k.canvasBottom,p=e.canvasLeft||k.canvasLeft,m=e.canvasRight||k.canvasRight,e=e.canvasTop||k.canvasTop,k=b.max,b=b.min,w=a.axisPlotLineContainer,z=a.axisPlotLineContainerTop,r=a.showCanvasBorder,n=g.components.paper,B=this.graphics.line||[],F=0,q=M(a.divLineColor,a.divLineAlpha),K=a.divLineThickness,u=a.divLineIsDashed?E(a.divLineDashLen,a.divLineDashGap,K):"none",L=M(a.zeroPlaneColor,
a.zeroPlaneAlpha),P=a.zeroPlaneThickness,v=a.animateAxis,Z,T,V,C,A,H,N,J,u={stroke:q,"stroke-width":K,"stroke-dasharray":u};2>S(this.getPixel(b)-this.getPixel(b+f))&&(a.lines.isDraw=0);if(a.lines.isDraw){F=g.get("config","animationObj");H=F.animObj;N=F.dummyObj;g=F.transposeAnimDuration;J=F.animType;T=this._getVisibleConfig();F=b+f*R((T.minValue-3*f-b)/f);T=b+f*R((T.maxValue+3*f-b)/f);F=F<b?b:F;T=T>k?k:T;A=w;C=V=F;for(F=0;V<=T;)0===a.showZeroPlane&&0===V||r&&(V===k||V===b)||(0===V&&V!==b&&V!==k&&
(u.stroke=L,u["stroke-width"]=P,a.showZeroPlaneOnTop&&!l&&(A=z)),Z=a.hasBreakPoints?this._getRealBreakValue(V):V,Z=c?X(["M",p,this.getPixel(Z),"L",m,this.getPixel(Z)],K):X(["M",this.getPixel(Z),e,"L",this.getPixel(Z),t],K),u.path=Z.path,u["shape-rendering"]=Z.isCrisped?"crisp":void 0,B[F]?(Z=B[F],A.appendChild(Z),g&&v?Z.animateWith(N,H,u,g,J):Z.attr(u)):(Z=n.path(u,A),B[F]=Z),0===V&&V!==b&&V!==k&&(u.stroke=q,u["stroke-width"]=K,A=w),F+=1),a.showZeroPlane&&0>V&&0<V+f?(V=0,C+=f):V<C?V=C:(V+=f,C+=f);
if(B[F])for(V=F;V<B.length;V++)B[V].attr({path:[]});this.graphics.line=B}else if(B[F])for(V=F;V<B.length;V++)B[V].attr({path:[]})},_drawAxisLine:function(){var a=this.config,b=a.axisRange,f=a.isVertical,c=a.isOpposit,e=a.canvas,g=this.chart,l=g.config,k=a.breakPoints,t=e.canvasBottom||l.canvasBottom,p=e.canvasLeft||l.canvasLeft,m=e.canvasRight||l.canvasRight,w=e.canvasTop||l.canvasTop,e=a.axisDimention||{},z=f?e.x:e.y,r=a.drawAxisLineWRTCanvas,n=g.jsonData.chart,e=g.components.paper,l=this.graphics.axisLine||
[],B=!1,F=0,K=b.max,q=b.min,b=b.tickInterval,L=a.axisAxisLineContainerBottom,P={},v=a.animateAxis,Z,S,T,P=1===u(n.showyaxisline,n.showyaxisline)?u(n.yaxislinethickness,n.pyaxislinethickness,1):0;if(a.showAxisLine){Z=g.get("config","animationObj");n=Z.animObj;T=Z.dummyObj;g=Z.transposeAnimDuration;Z=Z.animType;if(f)if(c?z=(r?m:z||m)+a.axisLineThickness/2:(z=r?p:z||p,z-=a.axisLineThickness/2),a.hasBreakPoints){P=["M",z,t,"L"];t=0;for(r=k.length;t<r;t+=1)p=this.getPixel(k[t].start),P.push(z,p,"M",z,
p-4,"L");P.push(z,w)}else S=X(["M",z,t,"L",z,w],a.axisLineThickness),P=S.path;else if(c?(z=r?w:z||w,z-=a.axisLineThickness/2):(z=r?t:z||t,z+=a.axisLineThickness/2),a.hasBreakPoints){P=["M",p-P,z,"L"];t=0;for(r=k.length;t<r;t+=1)p=this.getPixel(k[t].start),P.push(p,z,"M",p-4,z,"L");P.push(m,z)}else S=X(["M",p-P,z,"L",m,z],a.axisLineThickness),P=S.path;l[F]?(k=l[F],g&&v?k.animateWith(T,n,{path:P,stroke:a.axisLineColor,"stroke-linecap":"butt","stroke-width":a.axisLineThickness,"shape-rendering":S.isCrisped?
"crisp":void 0},g,Z):k.attr({path:P,"stroke-linecap":"butt",stroke:a.axisLineColor,"stroke-width":a.axisLineThickness,"shape-rendering":S.isCrisped?"crisp":void 0})):(k=e.path({path:P,"stroke-linecap":"butt",stroke:a.axisLineColor,"stroke-width":a.axisLineThickness},L),l[F]=k);F+=1;if(a.drawTick&&a.tickLength)for(P={stroke:a.tickColor,"stroke-width":a.tickWidth},c=f?c?z+a.tickLength:z-a.tickLength:c?z-a.tickLength:z+a.tickLength,S=this._getVisibleConfig(),F=q+b*R((S.minValue-3*b-q)/b),S=q+b*R((S.maxValue+
3*b-q)/b),S=S>K?K:S,t=F<q?q:F,F=1;t<=S;t+=b)q=a.hasBreakPoints?this._getRealBreakValue(t):t,q=this.getPixel(q),P.path=f?"M"+z+" "+q+"L"+c+" "+q:"M"+q+" "+z+"L"+q+" "+c,l[F]?(q=l[F],g&&v?q.animateWith(T,n,P,g,Z):q.attr(P)):(q=e.path(P,L),l[F]=q),!B&&t<K&&t+b>K&&(t=K-b,B=!0),F+=1}if(l[F])for(t=F;t<l.length;t++)l[t].attr({path:[]});this.graphics.axisLine=l},_drawBreakPoints:function(){var a=this.config,b=a.isVertical,e=this.chart,c=e.config,g=a.breakPoints,c=a.canvas.canvasLeft||c.canvasLeft,l=e.components.paper,
k=this.graphics.brokeLine||[],t=e.graphics,p=a.animateAxis,m,w,z,r,n,B,F,q;if(a.showAxisLine)for(m=e.get("config","animationObj"),B=m.animObj,F=m.dummyObj,e=m.transposeAnimDuration,q=m.animType,m=0,r=g.length;m<r;m+=1)b?(w=c-a.axisLineThickness/2,z=this.getPixel(g[m].start),z=["M",w-4,z+4/3,"L",w+4,z-4/3,"M",w-4,z-8/3,"L",w+4,z-16/3]):z=["M",0,0],k[m]?(w=k[m],e&&p?w.animateWith(F,B,{path:z,stroke:a.axisLineColor,"stroke-width":a.axisLineThickness},e,q):w.attr({path:z,stroke:a.axisLineColor,"stroke-width":a.axisLineThickness})):
(w=l.path({path:z,stroke:a.axisLineColor,"stroke-width":a.axisLineThickness},t.axisLineGroup),k[m]=w),n+=1;if(k[n])for(m=n;m<k.length;m++)k[m].attr({path:[]});this.graphics.brokeLine=k},_drawPlotBand:function(){var a=this.config,b=a.axisRange,e=a.canvas,c=this.chart,g=c.config,l=e.canvasLeft||g.canvasLeft,k=e.canvasTop||g.canvasTop,p=e.canvasHeight||g.canvasHeight,e=e.canvasWidth||g.canvasWidth,g=b.tickInterval,m=a.isVertical,w=a.isReverse,z=b.max,r=b.min,b=a.axisBandContainer,n=c.components.paper,
B=this.graphics.band||[],F=0,K=a.showAlternateGridColor,u=a.alternateGridColor,L=a.alternateGridAlpha,P=a.animateAxis,v,Z,T,V,E;2>S(this.getPixel(r)-this.getPixel(r+g))&&(a.band.isDraw=0);if(K&&a.band.isDraw){F=c.get("config","animationObj");K=F.animObj;V=F.dummyObj;c=F.transposeAnimDuration;E=F.animType;v=this._getVisibleConfig();F=r+g*R((v.minValue-3*g-r)/g);v=r+g*R((v.maxValue+3*g-r)/g);F=F<r?r:F;v=v>z?z:v;z=t((F-r)/g)+1;u={fill:q(M(u,L)),"stroke-width":0};r=this.getPVR();Z=L=F;for(F=0;L<v;z+=
1)0===z%2&&(T=a.showZeroPlane&&0>L&&0<L+g?L:L!==Z?Z-L:g,m?(u.x=l,u.y=this.getPixel(w?L:L+S(T)),u.width=e,u.height=S(T*r)):(u.x=this.getPixel(L),u.y=k,u.width=S(T*r),u.height=p),B[F]?(T=B[F],c&&P?T.animateWith(V,K,u,c,E):T.attr(u)):(T=n.rect(u,b),B[F]=T),F+=1),a.showZeroPlane&&0>L&&0<L+g?(L=0,Z+=g):L<Z?L=Z:(L+=g,Z+=g);if(B[F])for(L=F;L<B.length;L++)B[L].attr({x:0,y:0,width:0,height:0,fill:null,"stroke-width":0});this.graphics.band=B}else if(B[F])for(L=F;L<B.length;L++)B[L].attr({x:0,y:0,width:0,height:0,
fill:null,"stroke-width":0})},_drawTrendLine:function(){var a=this.config,b=a.canvas,f=this.chart,c=f.config,g=f.components,l=a.isOpposit,t=a.isVertical,p=f.is3D,m=a.axisIndex,w=g.numberFormatter,z=b.canvasBottom||c.canvasBottom,r=b.canvasLeft||c.canvasLeft,B=b.canvasRight||c.canvasRight,F=b.canvasTop||c.canvasTop,q=b.canvasHeight||c.canvasHeight,b=b.canvasWidth||c.canvasWidth,K=a.axisRange,c=K.max,K=K.min,R,L,v=a.trend.trendStyle,S=a.labelPadding,C=a.axisTrendContainerTop,A=a.axisTrendContainerBottom,
J=a.axisTrendLabelContainer,O=g.paper,Aa=this.components.trendObj||[],ua={fontFamily:v.fontFamily,fontSize:v.fontSize,lineHeight:v.lineHeight,fontWeight:v.fontWeight,fontStyle:v.fontStyle},ia=a.vTrendLines,xa=a.trendLines,ja=!0,ya=a.drawTrendLabels,W=a.axisDimention||{},Q=a.animateAxis,ea,ga,la,Ca,Ha,pa,La=0,Ja,Fa,ta,Ka,Ea,Da,Ga,Na,Ua,Pa,Sa;Ea=this._getVisibleConfig();a.hasBreakPoints&&(Ea.minValue=this._getRealBreakValue(Ea.minValue),Ea.maxValue=this._getRealBreakValue(Ea.maxValue));(ja=this._isZoomed())?
(R=P(this.getPixel(Ea.minValue),this.getPixel(Ea.maxValue)),L=Z(this.getPixel(Ea.minValue),this.getPixel(Ea.maxValue))):(Ea.minValue=K,Ea.maxValue=c);ia?Ua=l?(W.opposite||z)-(a.trendBottomPadding||0):(W.y||z)+(a.trendBottomPadding||0):(Ua=l?(W.opposite||r)+(S||0):(W.x||r)-(S||0),Pa=l?(W.x||B)+(S||0):(W.opposite||B)+(S||0));t?g.trendlines=[]:g.vTrendlines=[];if(l=xa||ia){ea=f.get("config","animationObj");S=ea.animObj;W=ea.dummyObj;f=ea.transposeAnimDuration;Sa=ea.animType;la=0;for(Ca=l.length;la<Ca;la+=
1)for(ea=0,ga=l[la].line&&l[la].line.length;ea<ga;ea+=1)Da=l[la].line[ea],Ja=t?"yAxis":"xAxis",Fa=w.getCleanValue(H(Da.startvalue,Da.value,0)),pa=Number(Da.endvalue)||void 0,Ha=k(U(H(Da.tooltext,l[0].tooltext,a.trendlineToolText))),Ha=n(Ha,[7,15,16,17,18,19],{startValue:Fa,startDataValue:w[Ja](Fa,m),endValue:pa||Fa,endDataValue:w[Ja](pa||Fa,m),axisName:a.axisName},Da),Fa>c||Fa<K||pa>c||pa<K||!(ia&&Fa>=Ea.minValue&&Fa<=Ea.maxValue||pa&&pa>=Ea.minValue&&pa<=Ea.maxValue||pa&&Fa<=Ea.minValue&&pa>=Ea.maxValue||
xa&&Fa>Ea.minValue&&Fa<=Ea.maxValue||pa&&pa>=Ea.minValue&&pa<=Ea.maxValue||pa&&Fa>=Ea.minValue&&pa<=Ea.maxValue)||(ia?(Ka=U(Da.displayvalue||""),Ga=this.getPixel(a.hasBreakPoints?this._getRelativeBreakValue(Fa):Fa),ta=u(Da.istrendzone,a.isTrendZone,1),Na=pa?this.getPixel(a.hasBreakPoints?this._getRelativeBreakValue(pa):pa):0,void 0!==pa&&""!==pa&&pa!==Fa&&ta?(ta={fill:M(H(Da.color,a.trendlineColor),H(Da.alpha,a.trendlineAlpha,40)),"stroke-width":0,path:["M",Ga,F,"L",Ga,z,"L",Na,z,"L",Na,F,"Z"]},g.vTrendlines.push({isTrendZone:!0,
x1:Ga<Na?Ga:Na,y1:F,x2:Ga>Na?Ga:Na,y2:z,tooltext:Ha}),Ka={fill:M(H(Da.color,v.color),H(Da.alpha,a.trendlineAlpha,99)),"vertical-align":V,text:Ka,x:Ga+(Na-Ga)/2,y:Ua}):(ta=u(Da.thickness,a.trendlineThickness,1),ta=ta>b?1:ta,Fa=pa?X(["M",Ga,F,"L",Na,z],ta):X(["M",Ga,F,"L",Ga,z],ta),g.vTrendlines.push({isTrendZone:!1,x1:Ga,y1:F,x2:pa?Na:Ga,y2:z,tolerance:5>ta?2.5:ta/2,tooltext:Ha}),ta={stroke:M(H(Da.color,a.trendlineColor),H(Da.alpha,a.trendlineAlpha,99)),"stroke-width":ta,"stroke-dasharray":H(Da.dashed,
a.trendlinesAreDashed)===N?E(u(Da.dashlen,a.trendlinesDashLen),u(Da.dashgap,a.trendlinesDashGap),ta):"none","shape-rendering":Fa.isCrisped?"crisp":void 0,path:Fa.path},Ka={fill:M(H(Da.color,v.color),H(Da.alpha,a.trendlineAlpha,99)),"vertical-align":V,text:Ka,x:pa?Na:Ga,y:Ua}),ja&&(!ya||Ka.x>R||Ka.x<L)&&(Ka.text="")):xa&&(Ka=U(Da.displayvalue||""),Ja=u(Da.valueonright,0),ta=u(Da.istrendzone,a.isTrendZone,0),Ga=this.getPixel(Fa),Na=pa?this.getPixel(pa):0,void 0!==pa&&""!==pa&&pa!==Fa&&ta?(ta={fill:M(H(Da.color,
a.trendlineColor),H(Da.alpha,a.trendlineAlpha,40)),"stroke-width":0,path:["M",r,Ga,"L",B,Ga,"L",B,Na,"L",r,Na,"Z"]},g.trendlines.push({isTrendZone:!0,x1:r,y1:Ga<Na?Ga:Na,x2:B,y2:Ga>Na?Ga:Na,tooltext:Ha,showontop:u(Da.showontop)}),Ka={"text-anchor":Ja?e:T,fill:M(H(Da.color,v.color),H(Da.alpha,a.trendlineAlpha,99)),text:Ka,x:Ja?Pa:Ua,y:Ga+(Na-Ga)/2}):(ta=u(Da.thickness,a.trendlineThickness,1),ta=ta>q?1:ta,Fa=pa?X(["M",r,Ga,"L",B,Na],ta):X(["M",r,Ga,"L",B,Ga],ta),g.trendlines.push({isTrendZone:!1,x1:r,
y1:Ga,x2:B,y2:pa?Na:Ga,tolerance:5>ta?2.5:ta/2,tooltext:Ha,showontop:u(Da.showontop)}),ta={stroke:M(H(Da.color,a.trendlineColor),H(Da.alpha,a.trendlineAlpha,99)),"stroke-width":ta,"stroke-dasharray":H(Da.dashed,a.trendlinesAreDashed)===N?E(u(Da.dashlen,a.trendlinesDashLen),u(Da.dashgap,a.trendlinesDashGap),ta):"none","shape-rendering":Fa.isCrisped?"crisp":void 0,path:Fa.path},Ka={"text-anchor":Ja?e:T,fill:M(H(Da.color,v.color),H(Da.alpha,a.trendlineAlpha,99)),text:Ka,x:Ja?Pa:Ua,y:pa?Ja?Na:Ga:Ga}),
ja&&(!ya||Ka.y>R||Ka.y<L)&&(Ka.text="")),pa=u(Da.showontop),pa=p||1!==pa&&1!==a.showTrendlinesOnTop?A:C,Aa[La]?(Ja=Aa[La].graphics.drawing,Fa=Aa[La].graphics.label,pa.appendChild(Ja),Aa[La].graphics.config.text=Ka.text,f&&Q?(Ja.animateWith(W,S,ta,f,Sa),Fa.animateWith(W,S,Ka,f,Sa)):(Ja.attr(ta),Fa.attr(Ka)),Fa.css(ua),Fa.tooltip(Da.valueToolText)):(Ja=O.path(ta,pa),Fa=O.text(Ka,ua,J),Fa.tooltip(Da.valueToolText),Aa[La]={},Aa[La].graphics={},Aa[La].graphics.drawing=Ja,Aa[La].graphics.label=Fa,Aa[La].graphics.config=
{text:Ka.text}),a.showTooltip&&Da.valueToolText?Fa.trackTooltip(!0):Fa.trackTooltip(!1),a.showTooltip&&Ha?Ja.tooltip(Ha).trackTooltip(!0):Ja.trackTooltip(!1),La+=1);if(Aa[La])for(ea=La;ea<Aa.length;ea++)Aa[ea].graphics.drawing.attr({path:["M",0,0]}),Aa[ea].graphics.label.attr({text:"","text-bound":[]});this.components.trendObj=Aa;for(ea=0;ea<La;ea++)Aa[ea].graphics.label.attr({"text-bound":Aa[ea].graphics.config.text?[v.backgroundColor,v.borderColor,v.borderThickness,v.borderPadding,v.borderRadius,
v.borderDash]:[]})}if(Aa[La])for(ea=La;ea<Aa.length;ea++)Aa[ea].graphics.drawing.attr({path:["M",0,0]}),Aa[ea].graphics.label.attr({text:"","text-bound":[]})},_drawCategory:function(){var b,d,f,c,g,l,k=this.config,t=k.axisDimention||{},m=k.canvas,w=this.chart,n=w.config,F=w.linkedItems.smartLabel,q,R,L=n.realtimeEnabled,P=k.isOpposit,v=k.labels,Z=v.style,X=k.isVertical,C=m.canvasBottom||n.canvasBottom,A=m.canvasLeft||n.canvasLeft,N=m.canvasRight||n.canvasRight,m=m.canvasTop||n.canvasTop,J=k.axisContainer,
O=k.labelPadding,U=w.components.paper,ua=X?t.x:t.y,t=t.opposite,ia=k.drawLabelOnBothSide,xa=this.components.categoryLabel||(this.components.categoryLabel=[]),ja=w.jsonData.categories,ya,W,Q,ea=function(a){return function(c){r.call(this,w,c,a)}},ga=0;q=0;var la=k.animateAxis,Ca,n=n.scrollEnabled,Ha,pa,La,Ja;Ca=function(a){for(var c=0,b=a.length;c<b;c++)if(a[c].label)return c};var Fa,ta,Ka,Ea,Da,Ga,Na,Ua,Pa,Sa,ab;Ha=k.isCategoryAnimate&&k.animateCategories?k.animateCategories:k.categories.category;
Ja=L?Ca(Ha):0;La=Ha?Ha.length-1:0;this._drawCategoryLine(Ha,Ja,La);if(k.labels.isDraw){ga=w.get("config","animationObj");Pa=ga.animObj;Sa=ga.dummyObj;Ca=ga.transposeAnimDuration;ab=ga.animType;X&&(ga=S(this.getPixel(0)-this.getPixel(1)),k.labelMaxH>ga&&(q=z(k.labelMaxH/ga)),q>k.labels.step&&(k.labels.step=q));Na=0<k.labels.step?k.labels.step:1;L&&(Na=1);pa=this.getPVR();Ua=this._isZoomed();ta=this._getVisibleConfig();q=(Ka=k.labels.rotation)?k.labelMaxH:k.labelMaxW;R=Ka?k.labelMaxW:k.labelMaxH;!k.drawLabelOnBothSide&&
k.drawLabelsOpposit&&(P=!P,ua=t);ja&&ja[0]&&"auto"!==k.xAxisLabelMode&&(ya=ja[0].font,W=ja[0].fontsize,Q=ja[0].fontcolor);ya={fontFamily:H(ya,Z.fontFamily),fontSize:H(W,Z.fontSize),fontWeight:H(Z.fontWeight),fontStyle:H(Z.fontStyle)};ya.lineHeight=a(ya);J.css(ya);ja=this._manageReuseableElement(this.components.categoryLabel,"text",J);J=Ja;for(ga=0;J<=La;J+=Na)if(W=Ha[J],!(!W||L&&W.stepSkipped||(d=this._getCategoryValue(W,J),0===u(W.showlabel,k.showLabels,1)||Ua&&(d<ta.minValue||d>ta.maxValue)||!("auto"!==
k.xAxisLabelMode&&"mixed"!==k.xAxisLabelMode||0!==k.showZeroPlane&&0!==k.showZeroPlaneValue||0!==d)||!k.labels.drawNormalVal&&(!k.labels.drawLimitVal||J!==Ja&&J!==La)||!k.labels.drawNormalVal&&J!==Ja&&J!==La||!(k.labels.drawLimitVal||J!==Ja&&J!==La)))){c=H(W.font,W.labelfont);g=H(W.fontsize,W.labelfontsize);l=H(W.fontbold,W.labelfontbold)?u(W.fontbold,W.labelfontbold,0)?"bold":"normal":void 0;Da=H(W.fontitalic,W.labelfontitalic)?u(W.fontitalic,W.labelfontitalic,0)?"italic":"normal":void 0;f=M(H(W.fontcolor,
W.labelfontcolor,Q,Z.color),u(W.labelalpha,k.rawAttr.labelFontAlpha,w.singleseries?void 0:W.alpha,100));c||g||l||Da?(b={},c&&(b.fontFamily=c),g&&(b.fontSize=g),l&&(b.fontWeight=l),Da&&(b.fontStyle=Da),b.lineHeight=g?a(b):ya.lineHeight):b=void 0;if(b||ya)c=(b||ya).lineHeight,-1!==c.indexOf("px")&&(Ea=c.replace(/px/i,""),Ea=parseFloat(Ea));!1===W.appliedSmartLabel&&(F.setStyle(W._ovrStyle||ya),c=F.getSmartText(W.oriLabel||W.label,q,R),W.oriLabel=W.oriLabel||W.label,W.label=c.text,W.appliedSmartLabel=
!0);Da=this.getPixel(d);X?(g=W.label||"",l=Number(W.labelPadding)||0,c={fill:f,"line-height":Ea,opacity:1,"text-anchor":P?e:T,text:g,cursor:!w.singleseries&&W.link||W.labellink||Z.labelLink?"pointer":"",x:P?(ua||N)+O:(ua||A)-O,y:l?Da+l:Da},ia&&(Ga={fill:f,"line-height":Ea,opacity:1,"text-anchor":P?T:e,text:g,cursor:!w.singleseries&&W.link||W.labellink||Z.labelLink?"pointer":"",x:P?(t||A)-O:(t||N)+O,y:l?Da+l:Da})):(g=W.label||"",l=Number(W.labelPadding)||0,c={fill:f,"line-height":Ea,opacity:1,text:g,
cursor:!w.singleseries&&W.link||W.labellink||Z.labelLink?"pointer":"",x:Da,y:P?(ua||m)-O:(ua||C)+O},ia&&(Ga={fill:f,"line-height":Ea,opacity:1,text:g,cursor:!w.singleseries&&W.link||W.labellink||Z.labelLink?"pointer":"",y:P?(t||C)+O:(t||m)-O}),Ka?(c["text-anchor"]=P?e:T,c["vertical-align"]="center",ia&&(Ga["text-anchor"]=P?T:e,Ga["vertical-align"]="center")):(c["text-anchor"]=B,c["vertical-align"]=P?p:V,ia&&(Ga["vertical-align"]=P?V:p,Ga["text-anchor"]=B)),l&&(c.y=P?c.y-l:c.y+l,ia&&(Ga.y=P?Ga.y+l:
Ga.y-l)));v.shiftX&&(c.x+=v.shiftX,ia&&(Ga.x+=v.shiftX));v.shiftY&&(c.y+=v.shiftY,ia&&(Ga.y+=v.shiftY));c.transform=U.getSuggestiveRotation(Ka,c.x,c.y);ia&&(Ga.transform=U.getSuggestiveRotation(Ka,Ga.x,Ga.y));xa[ga]||(xa[ga]={},xa[ga].graphics={},xa[ga].config={});f=xa[ga].graphics.label=ja.getElement("p"+d,c);f._applyAllAttr&&f.attr(c);b&&f._firstTimeDraw?(f.css(b),f._appliedCss=!0):f._applyAllAttr&&!f._firstTimeDraw&&b?(f.css({fontFamily:b&&b.fontFamily?b.fontFamily:ya.fontFamily,fontSize:b&&b.fontSize?
b.fontSize:ya.fontSize,fontWeight:b&&b.fontWeight?b.fontWeight:ya.fontWeight,fontStyle:b&&b.fontStyle?b.fontStyle:ya.fontStyle}),f._appliedCss=!0):f._appliedCss&&!b&&(f.removeCSS(),delete f._appliedCss);f._firstTimeDraw||(f._applyAllAttr?(g=c,g.visibility=K):g={x:c.x,y:c.y,"text-anchor":c["text-anchor"],"vertical-align":c["vertical-align"],text:g,transform:c.transform,visibility:K},Ca&&la&&!W.animate?f.animateWith(Sa,Pa,g,Ca,ab):f.attr(g));k.showTooltip&&W.labelTooltext?(f.tooltip(W.labelTooltext),
f.trackTooltip(!0)):f.trackTooltip(!1);ia&&(Fa=xa[ga].graphics.secondLabel=ja.getElement("s"+d,Ga),Fa.css(b),Fa._firstTimeDraw||(Fa._applyAllAttr?(g=Ga,g.visibility=K):g={x:Ga.x,y:Ga.y,transform:c.transform,visibility:K},Ca&&la&&!W.animate?Fa.animateWith(Sa,Pa,g,Ca,ab):Fa.attr(g)),k.showTooltip&&W.labelTooltext?(Fa.tooltip(W.labelTooltext),Fa.trackTooltip(!0)):Fa.trackTooltip(!1));f._firstTimeDraw&&f.click(ea("dataLabelClick")).hover(ea("dataLabelRollOver"),ea("dataLabelRollOut"));b=n?J:ga;f.data("eventArgs",
{link:!w.singleseries&&W.link||W.labellink||Z.labelLink,text:c.text,index:b});ia&&(Fa._firstTimeDraw&&Fa.click(ea("dataLabelClick")).hover(ea("dataLabelRollOver"),ea("dataLabelRollOut")),xa[ga].graphics.secondLabel.data("eventArgs",{link:!w.singleseries&&W.link||W.labellink||Z.labelLink,text:c.text,index:ga}));W.animate&&!X&&(b={x:c.x-W.leftShift*pa},W["delete"]&&(b.opacity=0),b.transform=U.getSuggestiveRotation(Ka,b.x,c.y),xa[ga].graphics.label.animateWith(Sa,Pa,b,Ca,ab),ia&&(b={x:Ga.x-W.leftShift*
pa},W["delete"]&&(b.opacity=0),b.transform=U.getSuggestiveRotation(Ka,b.x,Ga.y),xa[ga].graphics.secondLabel.animateWith(Sa,Pa,b,Ca,ab)));if(f._applyAllAttr||f._firstTimeDraw)u(W.borderthickness,W.labelborderthickness)&&u(W.borderthickness,W.labelborderthickness,1),b=W.bordercolor||W.labelbordercolor?M(W.bordercolor||W.labelbordercolor,u(W.borderalpha,W.labelborderalpha,W.alpha,W.labelalpha,100)):"",d=u(W.borderthickness,W.labelborderthickness),f=u(W.borderpadding,W.labelborderpadding),c=u(W.borderradius,
W.labelborderradius),g=W.bgcolor||W.labelbgcolor?M(W.bgcolor||W.labelbgcolor,u(W.bgalpha,W.labelbgalpha,W.alpha,W.labelalpha,k.rawAttr.labelFontAlpha,100)):"",l=u(W.borderdashed,W.labelborderdashed,0)?E(u(W.borderdashlen,W.labelborderdashlen,4),u(W.borderdashgap,W.labelborderdashgap,2),u(W.borderthickness,W.labelborderthickness,1)):0===u(W.borderdashed,W.labelborderdashed)?"none":Z.borderDash,W.label?(xa[ga].graphics.label.attr({"text-bound":[H(g,Z.backgroundColor),H(b,Z.borderColor),H(d,Z.borderThickness),
H(f,Z.borderPadding),H(c,Z.borderRadius),H(l,Z.borderDash)]}),ia&&xa[ga].graphics.secondLabel.attr({"text-bound":[H(g,Z.backgroundColor),H(b,Z.borderColor),H(d,Z.borderThickness),H(f,Z.borderPadding),H(c,Z.borderRadius),H(l,Z.borderDash)]})):(xa[ga].graphics.label.attr({"text-bound":[]}),ia&&xa[J].graphics.secondLabel.attr({"text-bound":[]}));ga+=1}this.components.categoryLabel=xa;ja.freeUnusedElement()}else if(xa[ga])for(J=ga;J<xa.length;J++)xa[J].graphics.label.attr({text:"","text-bound":[]})},
_getCategoryValue:function(a,b){return this.chart.usesXYinCategory?u(a.x,a.y,b):b},_drawCategoryLine:function(a,b,e){var c=this.config,g=c.canvas,l=this.chart,k=l.config,t=l.components,p=c.isVertical,m=g.canvasBottom||k.canvasBottom,w=g.canvasLeft||k.canvasLeft,z=g.canvasRight||k.canvasRight,g=g.canvasTop||k.canvasTop,k=c.axisPlotLineContainer,r=c.showCanvasBorder,n=c.xAxisLabelMode,F=t.paper,t=t.colorManager,B=this.components.categoryLabelLine||[],q=l.jsonData.categories,K,R,L,P,v,Z,S=0,T=c.animateAxis,
V,C,A,N,J,W,O,U;a||(a=c.isCategoryAnimate&&c.animateCategories?c.animateCategories:c.categories.category);b=b||0;e=e||a?a.length-1:0;if(c.drawPlotlines){S=l.get("config","animationObj");W=S.animObj;O=S.dummyObj;l=S.transposeAnimDuration;U=S.animType;this.getPVR();J=this._isZoomed();C=this._getVisibleConfig();q&&q[0]&&(K=q[0].verticallinecolor,R=q[0].verticallinealpha,L=q[0].verticallinethickness,P=q[0].verticallinedashed,v=q[0].verticallinedashlen,Z=q[0].verticallinedashgap);q=b;for(S=0;q<=e;q+=1)(V=
a[q])&&(!r||"auto"!==n&&"mixed"!==n||q!==e&&q!==b)&&(N=this._getCategoryValue(V,q),1!==Number(V.showverticalline)||J&&(N<C.minValue||N>C.maxValue)||(A=this.getPixel(N),N={stroke:M(H(V.linecolor,K,c.divLineColor,t.getColor("divLineColor")),H(V.linealpha,R,t.getColor("divLineAlpha"))),"stroke-width":u(V.linethickness,L,1)},N["stroke-dasharray"]=u(V.linedashed,P,0)?E(u(V.linedashLen,v,4),u(V.linedashgap,Z,2),N["stroke-width"]):"none",A=p?X(["M",w,A,"L",z,A],N["stroke-width"]):X(["M",A,g,"L",A,m],N["stroke-width"]),
N.path=A.path,N["shape-rendering"]=A.isCrisped?"crisp":void 0,B[S]?(A=B[S].graphics.line,A.attr(N),l&&T&&!V.animate?A.animateWith(O,W,N,l,U):A.attr(N)):(A=F.path(N,k),B[S]={},B[S].graphics={},B[S].config={},B[S].graphics.line=A),S+=1));this.components.categoryLabelLine=B}if(B[S])for(q=S;q<B.length;q++)B[q].graphics.line.attr({path:["M",0,0]})},_drawCategoryVline:function(){var a=this.config,b=a.axisRange,f=b.min,b=b.max,c=a.canvas,g=this.chart,l=g.config,k=l.style||{},t=g.components.paper,m=c.canvasBottom||
l.canvasBottom,w=c.canvasLeft||l.canvasLeft,z=c.canvasRight||l.canvasRight,r=c.canvasTop||l.canvasTop,n=c.canvasHeight||l.canvasHeight,c=c.canvasWidth||l.canvasWidth,F=a.categories.category,q=a.isVertical,K=g.linkedItems.smartLabel,R=a.axisPlotLineContainerTop,L=a.axisPlotLineContainer,P=a.vlineLabelContainer,v=a.isRelativeAxisInverse,Z={fontFamily:l.style.inCanfontFamily,fontSize:l.style.inCanfontSize,color:l.style.inCancolor,lineHeight:l.style.inCanLineHeight},C=this.components.categoryVline||[],
A=this.components.categoryVlineLabel||[],N=0,O=0,ua=a.animateAxis,ia,xa,ja,ya,W,Q,ea,ga,la,Ca,Ha,pa,La,Ja,Fa,ta,Ka,Ea,Da,Ga,Na,Ua,Pa,Sa,ab,Xa,Za,bb,eb,Va,Ya,$a;xa=a.isCategoryVlineAnimate&&a.animateCategoriesVline?a.animateCategoriesVline:a.categories.vline;ia=g.get("config","animationObj");bb=ia.animObj;eb=ia.dummyObj;g=ia.transposeAnimDuration;ia=ia.animType;ya=xa.length;ja=this.getPVR();Va=this._isZoomed();Ya=this._getVisibleConfig();for(ea=0;ea<ya;ea++)W=xa[ea],Q=U(W.label),ga=!!u(W.showlabelborder,
a.showVLineLabelBorder,1),la=!!u(W.showlabelbackground,1),Ca=H(W.labelhalign,q?e:B),"center"==Ca?Ca=B:"left"==Ca?Ca=e:"right"==Ca&&(Ca=T),Ha=H(W.labelvalign,q?B:p).toLowerCase(),Ha==B?Ha="center":Ha==V?Ha=p:Ha==p&&(Ha=V),pa=u(W.labelposition,0),La=u(W.lineposition,.5),Ja=u(W.showvlines,a.showVLines,1),Fa=u(W.alpha,a.vLineAlpha,80),ta=H(W.color,a.vLineColor).replace(/^#?/,"#"),la=la?H(W.labelbgcolor,a.vLineLabelBgColor,"333333").replace(/^#?/,"#"):J,Ua=H(W.labelcolor,a.vLineLabelColor,W.color,k.inCancolor,
a.vLineColor).replace(/^#?/,"#"),Ka=u(W.thickness,a.vLineThickness,1),Ea=!!Number(H(W.dashed,0)),Da=u(W.dashlen,5),Na=u(W.dashgap,2),Ga=Z.fontSize,parseInt(Ga.replace(/px/i,""),10),Ga=u(W.rotatelabel,a.rotateVLineLabels)?270:0,La=0>La||1<La?.5:La,pa=0>pa||1<pa?0:pa,K.useEllipsesOnOverflow(l.useEllipsesWhenOverflow),K.setStyle(Z),K.getOriSize(Q),ta=M(ta,Ja?Fa:"0"),Fa=1===Number(W.showontop)||1===a.showVLinesOnTop?R:L,Xa=!1,$a=W.animate&&!q?W.startIndex+1:W.startIndex,Pa=F[$a],Sa=F[$a+1],Pa?Sa||(ab=
F[0]&&F[0].x?b:a.oriCatLen,Xa=!0):(ab=F[0]&&F[0].x?f:-1,Xa=!0),Xa||(ab=u(Pa.x,Pa.y,$a),La*=ab-u(Sa.x,Sa.y,$a+1)),La=ab+S(La),Va&&(La<Ya.minValue||La>Ya.maxValue)||!W.animate&&(La<f||La>b)||W.animate&&(La<f||La>b+Za)||(La=this.getPixel(La),Da={opacity:1,stroke:ta,"stroke-width":Ka,"stroke-dasharray":Ea?E(Da,Na,Ka):"none"},Ea={opacity:1,text:Q,"text-anchor":Ca,"vertical-align":Ha,"text-bound":[]},Ua={fill:Ja?Ua:ta,fontSize:Z.fontSize,fontFamily:Z.fontFamily,lineHeight:Z.lineHeight,backgroundColor:la},
q?(Na=X(["M",w,La,"L",z,La],Ka),Da.path=Na.path,Ea.x=w+c*(v?1-pa:pa),Ea.y=La):(Na=X(["M",La,r,"L",La,m],Ka),Da.path=Na.path,Ea.x=La,Ea.y=r+n*(v?1-pa:pa)),Da["shape-rendering"]=Na.isCrisped?"crisp":void 0,Ca==e?Ea.x+=2:Ca==T&&(Ea.x-=2),Ha==V?Ea.Y+=2:Ha==p&&(Ea.Y-=2),C[N]?(Ca=C[N].graphics.drawing,Fa.appendChild(Ca),g&&ua&&!W.animate?Ca.animateWith(eb,bb,Da,g):Ca.attr(Da)):(Ca=t.path(Da,Fa),C[N]={},C[N].graphics={},C[N].config={},C[N].graphics.drawing=Ca),Q&&(Ea.transform=t.getSuggestiveRotation(Ga,
Ea.x,Ea.y),A[O]?(Ca=A[O].graphics.label,Ca.css(Ua),g&&ua&&!W.animate?Ca.animateWith(eb,bb,Ea,g,ia):Ca.attr(Ea)):(Ca=t.text(Ea,Ua,P).css(Ua),A[O]={},A[O].graphics={},A[O].config={},A[O].graphics.label=Ca)),W.animate&&!q&&(Za=W.leftShift*ja,Ca={x:Ea.x-Za},Na=X(["M",La-Za,r,"L",La-Za,m],Ka),Ka={path:Na.path,"shape-rendering":Na.isCrisped?"crisp":void 0},W["delete"]&&(Ca.opacity=0,Ca["text-bound"]=[],Ka.opacity=0),Q&&A[O].graphics.label.animateWith(eb,bb,Ca,g,ia),C[N].graphics.drawing.animateWith(eb,
bb,Ka,g,ia)),Q&&(A[O].graphics.label.attr({"text-bound":[la,Ja&&ga?ta:J,Ja&&ga?1:0,2,void 0,Ja&&ga?"solid":J]}),O++),N++);if(C[N])for(ea=N;ea<C.length;ea++)C[ea].graphics.drawing.attr({path:["M",0,0]});if(A[O])for(ea=O;ea<A.length;ea++)A[ea].graphics.label.attr({text:"","text-bound":[]});this.components.categoryVline=C;this.components.categoryVlineLabel=A},_drawCategoryPlotLine:function(){var a=this.config,b=a.isVertical,e=a.axisRange,c=e.max,g=e.min,l=a.canvas,k=this.chart,t=k.config,p=a.categories.category,
m=p.length,e=l.canvasBottom||t.canvasBottom,w=l.canvasLeft||t.canvasLeft,z=l.canvasRight||t.canvasRight,l=l.canvasTop||t.canvasTop,t=a.axisPlotLineContainer,r=k.components.paper,n=this.graphics.line||[],B=0,F=M(a.divLineColor,a.divLineAlpha),q=a.divLineThickness,K=a.divLineIsDashed?E(a.divLineDashLen,a.divLineDashGap,q):"none",u=a.animateAxis,L,P,F={stroke:F,"stroke-width":q,"stroke-dasharray":K};if(p[0]&&(void 0!==p[0].x||void 0!==p[0].y)){if(n[B]&&"categories"===a.xAxisLabelMode)for(c=B;c<n.length;c++)n[c].attr({path:[]})}else if(a.lines.isDraw&&
a.categoryNumDivLines){B=k.get("config","animationObj");p=B.animObj;K=B.dummyObj;k=B.transposeAnimDuration;P=B.animType;a.categoryDivLinesFromZero&&(g=0,c=m-1);m=S(c-g)/(a.categoryNumDivLines+1);m=0===m?1:m;L=this._getVisibleConfig();B=g+m*R((L.minValue-3*m-g)/m);L=g+m*R((L.maxValue+3*m-g)/m);B=(B<g?g:B)+m;L=(L>c?c:L)-m;c=B;for(B=0;c<=L;c+=m)g=a.hasBreakPoints?this._getRealBreakValue(c):c,g=b?X(["M",w,this.getPixel(g),"L",z,this.getPixel(g)],q):X(["M",this.getPixel(g),l,"L",this.getPixel(g),e],q),
F.path=g.path,F["shape-rendering"]=g.isCrisped?"crisp":void 0,n[B]?(g=n[B],k&&u?g.animateWith(K,p,F,k,P):g.attr(F)):(g=r.path(F,t),n[B]=g),B+=1;if(n[B])for(c=B;c<n.length;c++)n[c].attr({path:[]});this.graphics.line=n}else if(n[B])for(c=B;c<n.length;c++)n[c].attr({path:[]})},_drawCategoryPlotBand:function(){var a=this.config,b=a.axisRange,e=b.max,c=b.min,g=a.canvas,l=this.chart,k=l.config,p=a.categories.category,m=p.length,b=g.canvasLeft||k.canvasLeft,w=g.canvasRight||k.canvasRight,z=g.canvasTop||
k.canvasTop,r=g.canvasHeight||k.canvasHeight,g=g.canvasWidth||k.canvasWidth,k=a.isVertical,n=a.axisBandContainer,B=l.components.paper,F=this.graphics.band||[],K=0,u=a.showAlternateGridColor,L=a.alternateGridColor,P=a.alternateGridAlpha,v=a.categoryDivLinesFromZero,Z=a.animateAxis,T,V,E;if(p[0]&&(void 0!==p[0].x||void 0!==p[0].y)){if(F[K])for(P=K;P<F.length;P++)F[P].attr({x:0,y:0,width:0,height:0,fill:null,"stroke-width":0})}else if(u&&a.band.isDraw&&a.categoryNumDivLines){K=l.get("config","animationObj");
p=K.animObj;u=K.dummyObj;l=K.transposeAnimDuration;E=K.animType;v&&(c=0,e=m-1);a=S(e-c)/(a.categoryNumDivLines+1);a=0===a?1:a;K=this._getVisibleConfig();m=c+a*R((K.minValue-3*a-c)/a);v=c+a*R((K.maxValue+3*a-c)/a);m=m<c?c:m;v=v>e?e:v;c=t((m-c)/a);m+=a;L={fill:q(M(L,P)),"stroke-width":0};V=this.getPVR();P=m;for(K=0;P-a<v;c+=1,P+=a)0===c%2&&(T=P===m?a+S(this.getValue(0))+1:P===v?a+S(this.getValue(w-b)-e):a,k?(L.x=b,L.y=P===v?this.getPixel(P-S(a)):this.getPixel(P-S(T)),L.width=g,L.height=S(T*V)):(L.x=
P===v?this.getPixel(P-S(a)):this.getPixel(P-S(T)),L.y=z,L.width=S(T*V),L.height=r),F[K]?(T=F[K],l&&Z?T.animateWith(u,p,L,l,E):T.attr(L)):(T=B.rect(L,n),F[K]=T),K+=1);if(F[K])for(P=K;P<F.length;P++)F[P].attr({x:0,y:0,width:0,height:0,fill:null,"stroke-width":0});this.graphics.band=F}else if(F[K])for(P=K;P<F.length;P++)F[P].attr({x:0,y:0,width:0,height:0,fill:null,"stroke-width":0})},resetNumericAxisComponents:function(){var a=this.graphics.line,b=this.graphics.labels,e;if(a&&a[0])for(e=0;e<a.length;e+=
1)a[e].attr({path:[]});if(b&&b[0])for(e=0,a=b.length;e<a;e+=1)b[e].attr({text:""})},resetCategoryAxisComponents:function(){var a=this.graphics.line,b=this.components.categoryVline,e=this.components.categoryLabel,c=this.components.categoryLabelLine,g;if(a&&a[0])for(g=0;g<a.length;g+=1)a[g].attr({path:[]});if(e&&e[0])for(g=0,a=e.length;g<a;g+=1)e[g].graphics.label.attr({text:"","text-bound":[]}),e[g].graphics.secondLabel&&e[g].graphics.secondLabel.attr({text:"","text-bound":[]});if(c&&c[0])for(g=0,
a=c.length;g<a;g+=1)c[g].graphics.line.attr({path:["M",0,0]});if(b&&b[0])for(g=0,a=b.length;g<a;g+=1)b[g].graphics.drawing.attr({path:["M",0,0]}),b[g].graphics.label.attr({text:"","text-bound":[]})},placeAxis:function(a){return this.config.isVertical?this._placeVerticalAxis(a):this._placeHorizontalAxis(a)},_placeVerticalAxis:function(a){var b=this.config,e=this.chart,c=e.config,g=e.components,l=e.linkedItems.smartLabel,k=b.axisRange,t=b.minLabelWidthPercent,p=b.name,m=b.isOpposit,w=g.numberFormatter,
z=c.canvasHeight,r=b.labelPadding=u(b.rawAttr.axisValuePadding,4),n=u(b.rawAttr.axisNamePadding,5),B=b.useEllipsesWhenOverflow,F=b.name.style,q=b.trend.trendStyle,K=b.axisName,R=b.trendLines,L=b.drawLabelsOpposit,v=b.drawAxisNameOpposit,S=b.drawLabelOnBothSide,T=0,V=0,E=0,X=0,C=0,A={left:0,right:0},N="",J="",M=0,O;O=-1;var ea,ga,la,Q,Ha;t&&(O=t/100*c.width);c.viewPortConfig&&1!==c.viewPortConfig.scaleY&&(b._setRangeAgain=!0);b._setRangeAgain&&this._setTickIntervalAfterZoom();b.oriCanvasHeight=z;0>
r&&(b.labelPadding=2);M=b.drawTick&&b.tickLength?b.axisLineThickness+b.tickLength:b.axisLineThickness;b.showAxisLine?(b.labelPadding=u(r,2)+M,0>b.labelPadding&&(b.labelPadding=(0>b.axisLineThickness?0:M)+2),a-=b.axisLineThickness):(b.labelPadding=u(r,2),0>b.labelPadding&&(b.labelPadding=2));r=k.max;k=k.min;b.name.rotation=0;b.labels.step=b.labelStep;b.labels.isDraw=1;b.lines.isDraw=1;b.band.isDraw=1;b.labels.drawNormalVal=b.showDivLineValues;b.labels.drawLimitVal=b.showLimits;M=F.lineHeight;M=Number(M.replace(/px/i,
""));M<a&&(a-=M);1!==b.showLimits&&1!==b.showDivLineValues&&(b.labels.isDraw=0);t=b.drawLabels?this._getVMaxLabelDimention(S?a-2*b.labelPadding/2:a-b.labelPadding):{width:0,height:0};if(t.width+b.labelPadding>a&&!b.hasCategory||0===t.width)b.labels.isDraw=0;b.labels.isDraw&&(b.labelMaxW=t.width>O?t.width:O,b.labelMaxH=t.height,T=b.labelMaxW+b.labelPadding,V=S?2*T:T);if(b.drawTrendLines&&b.drawTrendLabels&&R){O=b.isPercent?g.numberFormatter.percentValue:b.isVertical?g.numberFormatter.yAxis:g.numberFormatter.xAxis;
l.useEllipsesOnOverflow(c.useEllipsesWhenOverflow);l.setStyle({fontSize:q.fontSize,fontFamily:q.fontFamily,lineHeight:q.lineHeight,fontWeight:q.fontWeight});c=0;for(q=R.length;c<q;c+=1)for(t=0,ga=R[c].line&&R[c].line.length;t<ga;t+=1)la=R[c].line[t],Q=w.getCleanValue(H(la.startvalue,la.value,0)),Ha=u(la.endvalue,Q),Q<=r&&Q>=k&&Ha<=r&&Ha>=k&&(b.isOpposit&&(la.valueonright=1),Q=u(la.valueonright,0),X=1===Q?la.endvalue||la.startvalue:la.startvalue||la.endvalue,ea=U(la.origText||la.displayvalue||X||""),
ea===X&&(ea=""+O.call(g.numberFormatter,ea)),Q?ea.length>J.length&&(J=ea):ea.length>N.length&&(N=ea));t=l.getOriSize(J);C=t.width+b.labelPadding;t=l.getOriSize(N);X=t.width+b.labelPadding;m?(C>V&&C>a&&(C=a),V=P(V,C+b.labelPadding),X>a-V&&(X=Z(X,a-V))):(X>V&&X>a&&(X=a),V=P(V,X+b.labelPadding),C>a-V&&(C=Z(C,a-V)));c=0;for(q=R.length;c<q;c+=1)for(t=0,ga=R[c].line&&R[c].line.length;t<ga;t+=1){la=R[c].line[t];Q=w.getCleanValue(H(la.startvalue,la.value,0));Ha=u(la.endvalue,Q);ea=1===Number(la.valueonright)?
la.origText||la.displayvalue||""+Ha||"":la.origText||la.displayvalue||""+Q||"";ea=U(""+ea);if(Number(ea)===Ha||Number(ea)===Q)ea=""+O.call(g.numberFormatter,ea);la.origText=ea;N=(Q=u(la.valueonright,0))?l.getSmartText(ea,C,e.canvasHeight,B):l.getSmartText(ea,V,e.canvasHeight,B);la.displayvalue=N.text;N.tooltext?la.valueToolText=N.tooltext:delete la.valueToolText}}a+=M;!b.drawAxisName||0>=a-V-C||""===K?(p.isDraw=!1,p.value=""):(l.setStyle({fontSize:F.fontSize,fontFamily:F.fontFamily,lineHeight:F.lineHeight,
fontWeight:F.fontWeight}),p.isDraw=!0,b.rotateAxisName?(b.name.rotation=m?90:270,e=l.getSmartText(K,z,a-V-C),p.value=K,b.nameMaxW=Z(e.height)):(e=l.getSmartText(K,a-V-C,z),p.value=K,b.nameMaxW=Z(e.width,a-V),b.nameMaxH=e.height,0<=b.axisNameWidth&&(b.nameMaxW=Z(b.nameMaxW,b.axisNameWidth))),E=b.nameMaxW+n);m?(S?(A.left+=P(T,X),A.right+=P(T,C)):L?(A.left+=P(T,X),A.right+=C):(A.left+=X,A.right+=P(T,C)),v?(b.axisNamePadding=A.left+n,A.left+=E):(b.axisNamePadding=A.right+n,A.right+=E)):(S?(A.left+=P(T,
X),A.right+=P(T,C)):L?(A.left+=X,A.right+=P(T,C)):(A.left+=P(T,X),A.right+=C),v?(b.axisNamePadding=A.right+n,A.right+=E):(b.axisNamePadding=A.left+n,A.left+=E));p.isDraw&&b.axisNamePadding+b.nameMaxW>a&&(b.axisNamePadding=a-b.nameMaxW);return A},_placeHorizontalAxis:function(a){var b=this.config,e=this.chart,c=e.config,g=e.components,l=e.linkedItems.smartLabel,k=b.axisRange,t=b.name,p=b.isOpposit,m=g.numberFormatter,w=b.drawLabelsOpposit,z=b.drawAxisNameOpposit,r=b.drawLabelOnBothSide,n=0,B=c.canvasWidth,
F=b.labelPadding=u(b.rawAttr.axisValuePadding,4),q=u(b.rawAttr.axisNamePadding,5),K=b.useEllipsesWhenOverflow,R=b.name.style,L=b.trend.trendStyle,v=b.axisName,Z=b.vTrendLines,S,T,V=0,E=0,X={top:0,bottom:0},A=0,C=0,N,J,M,O,ga,la;c.viewPortConfig&&1!==c.viewPortConfig.scaleX&&(b._setRangeAgain=!0);b._setRangeAgain&&this._setTickIntervalAfterZoom();0>F&&(b.labelPadding=2);C=b.drawTick&&b.tickLength?b.axisLineThickness+b.tickLength:b.axisLineThickness;b.showAxisLine?(b.labelPadding=u(F,2)+C,0>b.labelPadding&&
(b.labelPadding=(0>b.axisLineThickness?0:C)+2),a-=b.axisLineThickness):(b.labelPadding=u(F,2),0>b.labelPadding&&(b.labelPadding=2));F=k.max;k=k.min;b.labels.rotation=0;b.labels.step=b.labelStep;b.labels.isDraw=1;b.lines.isDraw=1;b.band.isDraw=1;b.labels.drawNormalVal=b.showDivLineValues;b.labels.drawLimitVal=b.showLimits;C=R.lineHeight;C=Number(C.replace(/px/i,""));C<a&&(a-=C);b.rotateLabels&&"stagger"!==b.labelDisplay&&"none"!==b.labelDisplay&&(b.labelDisplay="rotate");1!==b.showLimits&&1!==b.showDivLineValues&&
(b.labels.isDraw=0);O=b.drawLabels?this._getHMaxLabelDimention(r?(a-2*b.labelPadding)/2:a-b.labelPadding):{width:0,height:0};b.labels.rotation?O.width+b.labelPadding>a&&!b.hasCategory&&(b.labels.isDraw=0):O.height+b.labelPadding>a&&!b.hasCategory&&(b.labels.isDraw=0);b.labels.isDraw&&(b.labels.rotation?(b.labelMaxW=O.height,b.labelMaxH=O.width,n=O.width+b.labelPadding):(b.labelMaxW=O.width,b.labelMaxH=O.height,n=O.height+b.labelPadding),V=r?2*n:n);V=P(V,b.labelPadding);O=V<=a?a-V:a;if(b.drawTrendLines&&
b.drawTrendLabels&&Z&&b.isActive)for(la=b.isPercent?g.numberFormatter.percentValue:b.isVertical?g.numberFormatter.yAxis:g.numberFormatter.xAxis,l.useEllipsesOnOverflow(c.useEllipsesWhenOverflow),l.setStyle({fontSize:L.fontSize,fontFamily:L.fontFamily,lineHeight:L.lineHeight,fontWeight:L.fontWeight}),c=0,T=Z.length;c<T;c+=1)for(N=0,M=Z[c].line&&Z[c].line.length;N<M;N+=1)ga=Z[c].line[N],S=m.getCleanValue(H(ga.startvalue,ga.value,0)),J=u(ga.endvalue,S),S<=F&&S>=k&&J<=F&&J>=k&&(S=u(ga.valueonright,0),
S=1===S?ga.endvalue||ga.startvalue:ga.startvalue||ga.endvalue,J=U(ga.origText||ga.displayvalue||S||""),J===S&&(J=""+la.call(g.numberFormatter,J)),ga.origText=J,S=l.getSmartText(J,e.canvasWidth,L.lineHeight,K),J=S.height+2,0>O-J?ga.displayvalue="":(ga.displayvalue=S.text,A=A<S.height?S.height:A),S.tooltext?ga.valueToolText=S.tooltext:delete ga.valueToolText);V+=A;O=O-A+C;a+=C;!b.drawAxisName||0>=O||""===v?(t.isDraw=!1,t.value=""):(l.setStyle({fontSize:R.fontSize,fontFamily:R.fontFamily,lineHeight:R.lineHeight,
fontWeight:R.fontWeight}),t.isDraw=!0,e=l.getSmartText(v,B,O),t.value=v,b.nameMaxW=B,b.nameMaxH=e.height,E=e.height+q,b.axisNamePadding=q+V,b.axisNamePadding+e.height>a&&(b.axisNamePadding=a-e.height,E=e.height+b.axisNamePadding-V));p?(r?(X.bottom+=n+A,X.top+=n):w?X.bottom+=n+A:(X.top+=n,X.bottom+=A),b.trendBottomPadding=X.bottom-A+2,z?X.bottom+=E:X.top+=E):(r?(X.bottom+=n+A,X.top+=n):w?(X.top+=n,X.bottom+=A):X.bottom+=n+A,b.trendBottomPadding=X.bottom-A+2,z?X.top+=E:X.bottom+=E);return X},_getHMaxLabelDimention:function(b){function d(a,
c){switch(c.toLowerCase()){case "left":return Math.abs(e._getCustomPixel(a));case "right":return Math.abs(l.width-e._getCustomPixel(a))}}var e=this,c=e.config,g=e.chart,l=g.config,k=g.components,t=g.linkedItems.smartLabel,p=c.axisRange,m=c.labels,w=c.labelDisplay,z=c.slantLabel,n=m.style,r=c.maxLabelHeight,F=p.tickInterval,B=c.staggerLines,q=c.labelStep,K=l.canvasLeft,R=l.canvasRight,L=B-2,v,Z,V,T=p.max,X=p.min,q=0,E=c.categories&&c.categories.category,H=E&&E.length,N=g.distributedColumns,J=0,M,O,
U,ea={text:void 0,width:0,style:void 0},g=0,ga,la,Q,Ha,pa=function(){},La=pa,Ja=pa,Fa=pa,ta,Ka=function(a){for(var c=0,b=a.length;c<b;c++)if(a[c].label||a[c].orilabel)return c},Ea={},Da,Ga,Na=0,Ua=!1,Pa=0,Sa,ab,Xa=!1,Za,bb=parseInt(n.lineHeight.replace(/(\d+)px/,"$1"),10),eb=Number.POSITIVE_INFINITY,Va,Ya,$a=Number.POSITIVE_INFINITY;if(N)for(J=e.getPixel(p.min),p=0;p<H;p++)N=2*(e.getPixel(E[p].x)-J),E[p].plotWidth=N,J+=N;if(c.hasCategory&&(!E||0===E.length))return{width:0,height:0};"rotate"===w&&
(c.rotateLabels=1);c.hasCategory||(c.irregularCatAxis=!1);Z=0===L?1:1===L?1.5:L;t.useEllipsesOnOverflow(l.useEllipsesWhenOverflow);t.setStyle({fontSize:n.fontSize,fontFamily:n.fontFamily,lineHeight:n.lineHeight,fontWeight:n.fontWeight});if(c.irregularCatAxis){E.sort(function(a,c){return a.x-c.x});p=0;for(J=E.length;p<J;p++){M=E[p];if(void 0!==Sa){$a=Math.abs(M.x-Sa);L=S(e._getCustomPixel(X)-e._getCustomPixel(X+$a));t.setStyle(M.style||{});H=t.getOriSize("W");H=H.width;if(L<1.2*H){M.label="";$a=eb;
continue}Za._individualIWR=L;M._individualIWL=L;eb=$a}Za=M;Sa=M.x}$a===Number.POSITIVE_INFINITY&&($a=Math.floor(Math.min(M.x,T-M.x)),$a=Math.max($a,4));p=0;for(J=E.length;p<J;p++)M=E[p],p||(M._individualIWL=Infinity),p===J-1&&(M._individualIWR=Infinity),M.individualIW=Math.min(M._individualIWL,M._individualIWR);U=S(e._getCustomPixel(X)-e._getCustomPixel(X+$a));U=Math.min(2*d(E[0].x,"left"),2*d(E[J-1].x,"right"),U)}else U=S(e._getCustomPixel(X)-e._getCustomPixel(X+F));b<bb&&(b=bb);b=r?r:b;Ea.__root__=
{getHeight:function(a){return parseInt(E[a]._ovrStyle.lineHeight.replace(/(\d+)px/,"$1"),10)},getWidth:function(){return b},getCalculatedLabelStep:function(b){var d=0,h=b.length,g=Number.NEGATIVE_INFINITY,l={},k,p,m,w=0,z;if(c.irregularCatAxis)return c.labelStep;for(;d<h;d++)if(k=b[d])k.label||(k.label=""),p=k.oriLabel||k.label,O={fontSize:n.fontSize,fontFamily:n.fontFamily,lineHeight:n.lineHeight,fontWeight:n.fontWeight},w++,k.style=k.style||{},C(O,k.style),k=O.fontSize+O.fontFamily+O.lineHeight+
O.fontWeight,l[k]?p.length>l[k].label.length&&(l[k].label=p):l[k]={label:p,style:O};for(m in l)l.hasOwnProperty(m)&&(b=l[m].style,d=l[m].label,b.lineHeight=a(b),t.setStyle(b),c.rotateLabels&&(z=parseInt(b.lineHeight.replace(/(\d+)px/,"$1"),10)),ga=t.getSmartText(d,void 0,z),b=0===c.rotateLabels?60<ga.width?60:ga.width:ga.height,g=Math.max(b,g));g=Math.floor(S(e._getCustomPixel(T)-e._getCustomPixel(X))/g);l=Math.max(Math.ceil(w/g),c.labelStep);U=S(e._getCustomPixel(X)-e._getCustomPixel(X+l));return w<=
g?c.labelStep:l}};Ea._inProp={};Ea.getCopyById=function(a){var c=this.__root__,b=this._inProp.copyStore,d,b=b||{};if(d=b[a])return d;C(d=b[a]={},c);return d};if(c.hasCategory){switch(w){case "rotate":m.rotation=z?300:270;Ha=Ea.getCopyById("rotate");break;case "stagger":Ha=Ea.getCopyById("stagger");Ha.getHeight=function(a){var b;b=(a=c.categories.category[a])&&a.style||(a.style={});O={fontSize:n.fontSize,fontFamily:n.fontFamily,lineHeight:n.lineHeight,fontWeight:n.fontWeight};C(O,b);t.setStyle(O);
return t.getOriSize(a.label).height};Ha.getWidth=function(a){return a.individualIW?a.individualIW:2*U*Z-4};Fa=function(a){var c,d=a.length,e=0,f,g,l;t.setStyle(n);c=t.getOriSize("WWW").height;if(Math.floor(a[d-1]._cumulativeSum)<=Math.ceil(d*(c+2)))g=Math.floor(b/c),B=0>g-B?g:B;else{g=Math.floor(b/(c+4));do for(e=0,l=g,f=l-1,d=a.length;f<d;){d-f<g&&(f=d-1);c=a[f];e=c._cumulativeSum-e;if(~~e>-~b){Ua=!0;break}else Ua=!1;e=c._cumulativeSum;f+=l}while(g--&&Ua);g++;B=Math.min(B,g)}};La=function(a){var c,
b,d,e,f=0;e=0;for(d=a.length;e<d;e++)c=a[e],c.stepSkipped||(b=c&&c.style||{},(b=b.lineHeight)||(b=n.lineHeight),(V=f++%B)?c.labelPadding=b.replace(/px/i,"")*V:c.labelPadding=0)};break;case "none":Ha=Ea.getCopyById("none");Ha.getHeight=pa;Ja=Ha.getWidth=pa;c.rotateLabels&&(m.rotation=z?300:270,ab=b);Ha.getCalculatedLabelStep=function(){return c.labelStep};break;default:Ha=Ea.getCopyById("auto"),Ha.getHeight=function(){return b},Ha.getWidth=function(a){return a.individualIW?a.individualIW:U-8},Ja=function(a,
b){var d,e,f,h;if(!c.irregularCatAxis&&(t.setStyle(a),d=t.getOriSize("WWW"),d=d.width,d>=U&&0!==c.rotateLabels)){m.rotation=z?300:270;m.forceRotate=!0;Ha=Ea.getCopyById("rotate");la=Ha.getWidth;Q=Ha.getHeight;d=ea.width=0;for(e=b.length;d<e;d++)(f=b[d])&&(f.label||f.oriLabel)&&0!==u(f.showlabel,c.showLabels,1)&&!0!==f.stepSkipped&&(h=f._ovrStyle,t.setStyle({fontSize:h.fontSize,fontFamily:h.fontFamily,lineHeight:h.lineHeight,fontWeight:h.fontWeight}),ga=t.getSmartText(f.oriLabel,la(f),Q(d)),f.label=
ga.text,f.labelTooltext=ga.tooltext,f._sLabel=ga,ea.width<ga.width&&(ea.text=ga.text,ea.width=ga.width,ea.height=ga.height,ea.style=h));Da=ea.text}}}la=Ha.getWidth;Q=Ha.getHeight;q=c.labels.step=c.labelStep=Ha.getCalculatedLabelStep(E);p=ta=Ka(E);J=E.length;for(ta=0;p<J;p++,ta++)(M=E[p])&&(M.label||M.oriLabel||M.orilabel)&&0!==u(M.showlabel,c.showLabels,1)&&(Xa=!0,O={fontSize:n.fontSize,fontFamily:n.fontFamily,lineHeight:n.lineHeight,fontWeight:n.fontWeight},C(O,M.style),O.lineHeight=a(O),v=O.fontSize+
O.fontFamily+O.lineHeight+O.fontWeight,v!==Ga&&(t.setStyle(O),Ga=v),ta%q?(M.stepSkipped=!0,M.appliedSmartLabel=!1,Pa++):(M.stepSkipped=!1,M.appliedSmartLabel=!0,M._ovrStyle=O,v=E[p].plotWidth?P("rotate"===w?E[p].plotWidth-3:0,Q(p)):P("rotate"===w?e.getPixel(1)-e.getPixel(0)-3:0,Q(p)),r&&"rotate"!==w&&(v=Math.min(r,v)),ga=t.getSmartText(M.oriLabel||M.label,la(M),v),Na+=M._nLineHeight=ga.height+2,M._cumulativeSum=Na,M.oriLabel=M.oriLabel||M.label,M.label=ga.text,M.labelTooltext=ga.tooltext,M._sLabel=
ga,ea.width<ga.oriTextWidth&&(C(ea,ga),ea.style=O),g<ga.height&&(g=ga.height)));if(!Xa)return{height:0,width:0};Fa(E,Pa);La(E,Pa);Ja(ea.style,E);Da=ea.text||"";if("mixed"===c.xAxisLabelMode)for(r=c.isPercent?k.numberFormatter.percentValue:k.numberFormatter.xAxis,q=Da.length,p=X;p<=T;p+=F)Ga=c.hasBreakPoints?e._getRealBreakValue(p):p,Ga=""+r.call(k.numberFormatter,Ga,c.axisIndex),Ga.length>q&&(Da=Ga,q=Ga.length);ea.height=Math.max(g,ea.height||0);k=E.length;p=0;for(J=E.length;p<J&&(Va=E[p],!Va._sLabel);p++);
J=E.length;for(p=J-1;0<=p&&(Ya=E[p],!Ya._sLabel);p--);F=e._isZoomed();m.rotation||F||!Va._sLabel?(c.axisEndLabelDisplaySpace.left=0,c.axisEndLabelDisplaySpace.right=0):(c.axisEndLabelDisplaySpace.left=Math.max(K-(e._getCustomPixel(Va.x||0)-Va._sLabel.width/2),0),c.axisEndLabelDisplaySpace.right=Math.max(e._getCustomPixel(Ya.x||k-1)+Ya._sLabel.width/2-R,0));K=ea}else{r=c.numberFormatterFn?k.numberFormatter[c.numberFormatterFn]:c.isPercent?k.numberFormatter.percentValue:k.numberFormatter.xAxis;for(p=
X;p<=T;p+=F)Ga=c.hasBreakPoints?A(e._getRealBreakValue(p),10):A(p,10),Ga=""+r.call(k.numberFormatter,Ga,c.axisIndex),p===X&&(ta=Ga),p===T&&(v=Ga),Ga.length>q&&(Da=Ga,q=Ga.length);t.setStyle({fontSize:n.fontSize,fontFamily:n.fontFamily,lineHeight:n.lineHeight,fontWeight:n.fontWeight});K=t.getOriSize(Da||"");"rotate"===w&&(m.rotation=270);c.rotateLabels&&(m.rotation=z?300:270);m.rotation||(ta=t.getOriSize(ta||""),v=t.getOriSize(v||""),c.axisEndLabelDisplaySpace.left=ta.width/2+2,c.axisEndLabelDisplaySpace.right=
v.width/2+2)}c.hasCategory&&"stagger"===w&&(K.height=B*ea.height);K.width=ab?Math.min(ab,K.width):K.width;return K},_getVMaxLabelDimention:function(b){var d,e,c,g,l=this.config,k=this.chart,t=k.components,p=k.config,m=k.linkedItems.smartLabel,w=l.axisRange,z=l.labels.style,n=w.tickInterval,r=l.useEllipsesWhenOverflow;c=l.maxLabelWidthPercent;e=l.minLabelWidthPercent;var B=w.max;g=w.min;var w=0,F=k.jsonData.categories,k={height:0,width:0},q,K;m.useEllipsesOnOverflow(p.useEllipsesWhenOverflow);m.setStyle({fontSize:z.fontSize,
fontFamily:z.fontFamily,lineHeight:z.lineHeight,fontWeight:z.fontWeight});if(l.hasCategory){F&&(q=F[0].font,K=F[0].fontsize);c&&(t=c/100*p.width,t<b&&(b=t));e&&(p=e/100*p.width,p>b&&(b=p));t=l.categories.category;p=0;for(n=t.length;p<n;p++)B=t[p],0!==u(B.showlabel,l.showLabels)&&(d=H(B.font,B.labelfont,q,z.fontFamily),e=H(B.fontsize,B.labelfontsize,K,z.fontSize).replace(/px/i,"")+"px",c="normal"==z.fontWeight?u(B.fontbold,B.labelfontbold,0)?"bold":"normal":z.fontWeight,g="normal"==z.fontStyle?u(B.fontitalic,
B.labelfontitalic,0)?"italic":"normal":z.fontStyle,d={fontFamily:H(d,q,z.fontFamily),fontSize:H(e,K,z.fontSize),fontWeight:H(c,z.fontWeight),fontStyle:H(g,z.fontStyle)},d.lineHeight=a(d),m.setStyle(d),d=m.getSmartText(B.oriLabel||B.label,b,z.lineHeight,r),B.oriLabel=B.oriLabel||B.label,B.label=d.text,B.labelTooltext=d.tooltext,d.width>w&&(k=d,w=d.width));return k}b=l.numberFormatterFn?t.numberFormatter[l.numberFormatterFn]:l.isPercent?t.numberFormatter.percentValue:t.numberFormatter.yAxis;for(p=g;p<=
B;p+=n)z=l.hasBreakPoints?A(this._getRealBreakValue(p),10):A(p,10),z=""+b.call(t.numberFormatter,z,l.axisIndex),z.length>w&&(d=z,w=z.length);return m.getOriSize(d)},getLogAxisLimits:function(a,b,e,c,g,l){var k=function(a){return null===a||void 0===a||""===a||isNaN(a)?!1:!0},t=0,p=[],m,n,r,B,q,K,u,L;a===b&&(b-=b/100);k(e)&&Number(e)>=a?a=Number(e):(e=1<g?z(F(a)/F(g)):R(F(a)/F(g)),a=w(g,e),n=e);n||(n=1<g?z(F(a)/F(g)):R(F(a)/F(g)));k(c)&&Number(c)<=b?b=Number(c):(e=1<g?R(F(b)/F(g)):z(F(b)/F(g)),b=w(g,
e),m=e);m||(m=1<g?R(F(b)/F(g)):z(F(b)/F(g)));c=Number(String(F(g)/F(10)));l=Number(l)||(R(c)==c?8:4);1<g?(r=n,B=m):0<g&&1>g&&(r=m,B=n);c=n;for(m=r;m>=B;--m)if(r=w(g,c),b<=r&&a>=r&&(p[t++]={value:r,ismajor:!0}),m!=B){n=1<g?-1:1;r=w(g,c)-w(g,c+n);e=r/(l+1);for(k=1;k<=l;++k)r=w(g,c+n)+e*k,b<=r&&a>=r&&(p[t++]={value:r,ismajor:!1});1<g?c--:c++}for(u in p)for(L in p[u])"value"==L&&(q||(q=p[u][L]==b&&(p[u].isextreme=p[u].isMin=!0)),K||(K=p[u][L]==a&&(p[u].isextreme=p[u].isMax=!0)));q||(p[t++]={value:b,ismajor:!0,
isMin:!0,isextreme:!0});K||(p[t]={value:a,ismajor:!0,isMax:!0,isextreme:!0});return{Max:a,Min:b,divArr:p}},getCategoryLen:function(){return this.config.categories?this.config.categories.category.length:0},getCleanValue:function(a,b){var e=this.chart;return(this.components.numberFormatter||e.components.numberFormatter).getCleanValue(a,b)},dataLabels:function(a){var b=this.chart;return(this.components.numberFormatter||b.components.numberFormatter).dataLabels(a,this.config.axisIndex)},setNumberFormatter:function(a){this.components.numberFormatter=
a}},void 0,{setAdaptiveMin:0,adjustDiv:1,axisNameWidth:void 0,rotateAxisName:0,useEllipsesWhenOverflow:1,divLineColor:void 0,divLineAlpha:void 0,divLineThickness:void 0,divLineIsDashed:void 0,divLineDashLen:void 0,divLineDashGap:void 0,showAlternateGridColor:void 0,alternateGridColor:void 0,alternateGridAlpha:void 0,showZeroPlane:1,zeroPlaneAlpha:80,showZeroPlaneValue:1,showZeroPlaneOnTop:0,showAxisLine:void 0,axisLineThickness:void 0,axisLineAlpha:void 0,tickLength:void 0,trendlineToolText:void 0,
trendlineColor:"333333",trendlineThickness:1,trendlineAlpha:void 0,showTrendlinesOnTop:0,trendlinesAreDashed:0,trendlinesDashLen:5,trendlinesDashGap:2,isTrendZone:void 0,showTrendlines:1,showTrendlineLabels:1,showLabels:1,maxLabelHeight:void 0,rotateLabels:void 0,slantLabel:0,showAxisValues:1,showTooltip:1}])}]);Q.register("module",["private","modules.renderer.js-axis-log",function(){var b=this.hcLib,v=b.pluck,J=b.toPrecision,C=b.pluckNumber,H=b.graphics.convertColor,A=b.getDashStyle,b=b.preDefStr,
u=b.POSITION_START,a=b.POSITION_TOP,O=b.POSITION_BOTTOM,q=b.POSITION_END,b=Math,M=b.abs,U=b.log;Q.register("component",["axis","log",{configure:function(){var a=this.config,b=a.rawAttr,r=this.chart.components,k=r.numberFormatter,r=r.colorManager;Q.register("component",["axis","cartesian"]).prototype.configure.call(this);a.minorDivlinecolor=H(v(b.minorDivlinecolor,r.getColor("divLineColor")),C(b.minorDivLineAlpha,r.getColor("divLineAlpha")/2));a.axisMinValue=k.getCleanValue(b.axisMinValue);a.axisMaxValue=
k.getCleanValue(b.axisMaxValue);0>=a.axisMinValue&&(a.axisMinValue=void 0);0>=a.axisMaxValue&&(a.axisMaxValue=void 0);a.minorDivLineThickness=C(b.minorDivLineThickness,1)},setDataLimit:function(a,b){var r=this.config,k=r.axisRange,m=this.getLogAxisLimits,n=r.axisMaxValue,q=r.axisMinValue,r=m(C(a,n),C(b,q),n,q,r.base,r.numMinorDivLines);k.min=Number(J(r.Min,10));k.max=Number(J(r.Max,10));k.divArr=r.divArr||{}},_setTickIntervalAfterZoom:function(){var a=this.config,b=this.chart.config.viewPortConfig,
r=a.isVertical,k=a.axisRange,m=this.getLogAxisLimits,n=a.rawAttr,q,g;a.hasCategory||(r=r?b.scaleY:b.scaleX,b=C(n.axisrange?n.axisrange.max:k.max),g=C(n.axisrange?n.axisrange.min:k.min),n=1===r?a.axisMaxValue:k.max,q=1===r?a.axisMinValue:k.min,C(1===r?a.adjustDiv:0),a=m(b,g,n,q,a.base,a.numMinorDivLines),k.min=Number(J(a.Min,10)),k.max=Number(J(a.Max,10)),k.divArr=a.divArr||{})},getValue:function(a){var b,r,k=this.config,m=k.axisRange,n=k.isVertical;b=k.canvas;r=k.axisDimention||{};var q=this.chart.config,
g=q.viewPortConfig,l=r.axisLength||b.canvasWidth||q.canvasWidth,B=m.max,m=m.min,q=a/(r.axisLength||b.canvasHeight||q.canvasHeight);b=Math.log(m);r=Math.log(B);n?(a=k.isReverse?b-q*(r-b):r-q*(r-b),a=Math.pow(Math.E,a)):(n=l*g.scaleX/(B-m),a=k.isReverse?B-(g.x*g.scaleX+Number(a))/n:m+(g.x*g.scaleX+Number(a))/n);return a},getPixel:function(a){var b=this.config,r=this.chart.config,k=b.axisRange,m=r.viewPortConfig,n=r.canvasHeight,q=r.canvasWidth,g=r.canvasTop,l=r.canvasLeft,B=r.canvasBottom,r=r.canvasRight,
e=k.max,k=k.min,u=b.base,p=U(e)/u,v=U(k)/u;a=U(a)/u-v;m||(m={x:l,y:g,scaleX:1,scaleY:1});b.isVertical?(q=-n*m.scaleY/(p-v),b=b.isReverse?B-(a*q+(n*m.scaleY-m.y*m.scaleY)):g+(a*q+(n*m.scaleY-m.y*m.scaleY))):(q=q*m.scaleX/(U(e-k)/u),b=b.isReverse?r-(a*q-m.x*m.scaleX):l+(a*q-m.x*m.scaleX));return b},_drawPlotLine:function(){var a=this.config,b=a.axisRange,r=a.isVertical,k=this.chart,m=k.config,n=m.canvasLeft,q=m.canvasRight,g=m.canvasTop,m=m.canvasBottom,l=a.showCanvasBorder,B=b.max,e=b.min,u=a.axisPlotLineContainer,
p=k.components.paper,v=this.graphics.line||[],K=0,t=H(a.divLineColor,a.divLineAlpha),Z=a.divLineThickness,P=a.divLineIsDashed?A(a.divLineDashLen,a.divLineDashGap,Z):"none",S=H(a.zeroPlaneColor,a.zeroPlaneAlpha),z=a.zeroPlaneThickness,R=a.animateAxis,w,F,X,h,d,f,c,D,G;h={stroke:t,"stroke-width":Z,"stroke-dasharray":P};P={stroke:a.minorDivlinecolor,"stroke-width":a.minorDivLineThickness,"stroke-dasharray":P};if(a.lines.isDraw){w=k.get("config","animationObj");D=w.animObj;G=w.dummyObj;k=w.transposeAnimDuration;
w=w.animType;this._getVisibleConfig();d=b.divArr;f=d.length;for(b=0;b<f;b++)if(X=d[b],c=X.value,F=this.getPixel(c),X=X.ismajor?h:P,!l||c!==e&&c!==B)if(0!==a.showZeroPlaneValue||0!==a.showZeroPlane||0!==c)0===c&&1===a.showZeroPlane&&1===a.showZeroPlaneValue&&(X.stroke=S,X["stroke-width"]=z),X.path=r?"M"+n+" "+F+"L"+q+" "+F:"M"+F+" "+g+"L"+F+" "+m,v[K]?(F=v[K],k&&R?F.animateWith(G,D,X,k,w):F.attr(X)):(F=p.path(X,u),v[K]=F),0===c&&1===a.showZeroPlane&&1===a.showZeroPlaneValue&&(X.stroke=t,X["stroke-width"]=
Z),K+=1;if(v[K])for(b=K;b<v.length;b++)v[b].attr({path:[]});this.graphics.line=v}else if(v[K])for(b=K;b<v.length;b++)v[b].attr({path:[]})},_drawLabel:function(){var b=this.config,v=this.chart,r=v.config,k=v.components,m=b.axisRange,n=b.isOpposit,L,g=b.labels,l=g.style,B=b.isVertical,e=m.max,V=m.min,p=r.canvasBottom,T=r.canvasLeft,K=r.canvasRight,r=r.canvasTop,t=b.axisContainer,Z=b.labelPadding,P=k.paper,S=b.labelMaxH,z=b.labelMaxW,R=b.axisStartPosition,w=this.graphics.labels||[],F=0,X=b.animateAxis,
h,d,f,c,D,G,A,C={fontFamily:l.fontFamily,fontSize:l.fontSize,fontWeight:l.fontWeight,fontStyle:l.fontStyle,lineHeight:l.lineHeight},H,J,wa,ca;l.lineHeight&&(G=l.lineHeight,-1!==G.indexOf("px")&&(G=G.replace("px",""),parseFloat(G)));if(b.labels.isDraw){h=v.get("config","animationObj");v=h.animObj;G=h.dummyObj;wa=h.animType;h=h.transposeAnimDuration;M(this.getPixel(V)-this.getPixel(V+m.tickInterval));ca=this._isZoomed();b.labels.step?L=m.tickInterval*b.labels.step:L=m.tickInterval;D=b.labels.rotation;
c=this._getVisibleConfig();l={fill:l.color,"font-size":l.fontSize};t.css(C);C=m.divArr;H=C.length;for(m=0;m<H;m++)if(J=C[m],A=J.value,d=this.getPixel(A),!(!J.ismajor&&!b.showMinorDivLineValues||f&&d>f-b.labelMaxH&&d<f+b.labelMaxH||ca&&(A<c.minValue||A>c.maxValue)||!b.labels.drawNormalVal&&(!b.labels.drawLimitVal||A!==V&&A!==e)||!b.labels.drawNormalVal&&A!==V&&A!==e||!(b.labels.drawLimitVal||A!==V&&A!==e)||0===b.showZeroPlaneValue&&0===b.showZeroPlane&&0===A)){if(1===b.showZeroPlane&&1===b.showZeroPlaneValue&&
(0>A&&0<A+L||0<A&&0>A-L))if(B){if(d+S>=this.getPixel(0)&&this.getPixel(0)>=d-S)continue}else if(d+z>=this.getPixel(0)&&this.getPixel(0)>=d-z)continue;B?(f=b.numberFormatterFn?k.numberFormatter[b.numberFormatterFn]:b.isPercent?k.numberFormatter.percentValue:k.numberFormatter.yAxis,f=""+f.call(k.numberFormatter,A),A=b.hasCategory?b.categories.category[m].labelPadding||0:0,l["text-anchor"]=n?u:q,l.text=f,l.x=n?(R||K)+Z:(R||T)-Z,l.y=A?d+A:d,f=l.y):(f=b.numberFormatterFn?k.numberFormatter[b.numberFormatterFn]:
b.isPercent?k.numberFormatter.percentValue:k.numberFormatter.xAxis,f=""+f.call(k.numberFormatter,A),A=b.hasCategory?Number(b.categories.category[m].labelPadding)||0:0,l.text=f,l.x=d,l.y=n?(R||r)-Z:(R||p)+Z,A&&(l.y+=A),D?(l["text-anchor"]=n?u:q,l["vertical-align"]="center"):l["vertical-align"]=n?O:a,f=l.x);g.shiftX&&(l.x+=g.shiftX);g.shiftY&&(l.y+=g.shiftY);l.transform=P.getSuggestiveRotation(D,l.x,l.y);w[F]?(d=w[F],h&&X?d.animateWith(G,v,l,h,wa):d.attr(l)):w[F]=P.text(l,t);F+=1}if(w[F])for(m=F;m<
w.length;m++)w[m].attr({text:""});this.graphics.labels=w}else if(w[F])for(m=F;m<w.length;m++)w[m].attr({text:""})},_drawPlotBand:function(){},_getVMaxLabelDimention:function(){var a=this.config,b=this.chart,r=b.components,k=b.linkedItems.smartLabel,m=a.labels.style,n=0,q=a.axisRange.divArr,g=q.length,l;k.useEllipsesOnOverflow(b.config.useEllipsesWhenOverflow);k.setStyle({fontSize:m.fontSize,fontFamily:m.fontFamily,lineHeight:m.lineHeight,fontWeight:m.fontWeight});b=a.isPercent?r.numberFormatter.percentValue:
r.numberFormatter.xAxis;for(a=0;a<g;a++)m=q[a],m=""+b.call(r.numberFormatter,m.value),m.length>n&&(l=m,n=m.length);return k.getOriSize(l)},_getHMaxLabelDimention:function(){var a=this.config,b=this.chart,r=b.components,k=b.linkedItems.smartLabel,m=a.labels.style,n=0,q=a.axisRange.divArr,g=q.length,l;k.useEllipsesOnOverflow(b.config.useEllipsesWhenOverflow);k.setStyle({fontSize:m.fontSize,fontFamily:m.fontFamily,lineHeight:m.lineHeight,fontWeight:m.fontWeight});b=a.isPercent?r.numberFormatter.percentValue:
r.numberFormatter.xAxis;for(a=0;a<g;a++)m=q[a],m=""+b.call(r.numberFormatter,m.value),m.length>n&&(l=m,n=m.length);return k.getOriSize(l)},getCleanValue:function(a){var b=null,r=this.chart.components.numberFormatter;a=M(a);0<a&&(b=r.getCleanValue(a));return b}},"cartesian",{base:10,showMinorDivLineValues:1,numMinorDivLines:void 0}])}]);Q.register("module",["private","modules.renderer.js-axis-polarcartesan",function(){var b=this.hcLib,v=b.graphics.convertColor,J=b.getDashStyle,C=Math.floor;Q.register("component",
["axis","polarcartesan",{_drawComponents:function(){var b=this.config;b.drawLabels&&this._drawLabel();b.drawPlotlines&&this._drawPlotLine()},_drawPlotLine:function(){var b=this.config,A=b.axisRange,u=A.tickInterval,a=this.chart,O=A.max,A=A.min,q=b.axisPlotLineContainer,M=a.components.paper,U=this.graphics.line||[],N=0,E=v(b.divLineColor,b.divLineAlpha),r=b.divLineThickness,k=b.divLineIsDashed?J(b.divLineDashLen,b.divLineDashGap,r):"none",m=v(b.zeroPlaneColor,b.zeroPlaneAlpha),n=b.zeroPlaneThickness,
L=b.animateAxis,g,l,B,e,V,p,T,K,t,k={stroke:E,"stroke-width":r,"stroke-dasharray":k};g=a.get("config","animationObj");K=g.animObj;t=g.dummyObj;a=g.transposeAnimDuration;g=g.animType;if(b.lines.isDraw){B=this._getVisibleConfig();N=A+u*C((B.minValue-3*u-A)/u);B=A+u*C((B.maxValue+3*u-A)/u);N=N<A?A:N;B=B>O?O:B;V=O=N;for(N=0;O<B;){if(O!==A&&(0!==b.showZeroPlane||0!==O)){0===O&&1===b.showZeroPlane&&(k.stroke=m,k["stroke-width"]=n);k.path=["M"];l=b.polarAxis;e=l.config.categories.category;p=e.length;for(e=
0;e<p;e++)T=l.getPixel(e,l.config.centerY-this.getPixel(O)),k.path.push(T.x,T.y,"L");k.path.pop();k.path.push("Z");U[N]?(l=U[N],a&&L?l.animateWith(t,K,k,a,g):l.attr(k)):(l=M.path(k,q),U[N]=l);0===O&&1===b.showZeroPlane&&(k.stroke=E,k["stroke-width"]=r);N+=1}b.showZeroPlane&&0>O&&0<O+u?(O=0,V+=u):O<V?O=V:(O+=u,V+=u)}if(U[N])for(O=N;O<U.length;O++)U[O].attr({path:[]});this.graphics.line=U}else if(U[N])for(O=N;O<U.length;O++)U[O].attr({path:[]})}},"cartesian"])}]);Q.register("module",["private","modules.renderer.js-axis-gauge",
function(){var b=this.hcLib,v=b.pluck,J=b.toPrecision,C=b.pluckNumber,H=b.graphics.convertColor,A=b.parseUnsafeString,u=b.preDefStr,a=u.POSITION_MIDDLE,O=u.POSITION_START,q=u.POSITION_TOP,M=u.POSITION_BOTTOM,U=u.POSITION_END,u=Math,N=u.round,E=u.min,r=u.max,k=u.abs,m=u.ceil,n=u.pow;Q.register("component",["axis","gauge",{configure:function(){var a=this.config,b=a.rawAttr,l=this.chart.components.colorManager;Q.register("component",["axis","cartesian"]).prototype.configure.call(this);a.majorTMColor=
H(v(b.majorTMColor,l.getColor("tickColor")),C(b.majorTMAlpha,100));a.tickValueStep=C(b.tickValueStep,1);a.tickValueStep=N(a.tickValueStep);0>=a.tickValueStep&&(a.tickValueStep=1);a.connectTickMarks=a.showTickMarks?C(b.connectTickMarks,1):0;a.showTickValues=C(b.showTickValues,a.showTickMarks);a.reverseScale=1==C(b.reverseScale,0);a.minorTMColor=H(v(b.minorTMColor,a.majorTMColor),C(b.minorTMAlpha,a.majorTMAlpha,100));a.minorTMHeight=a.showTickMarks?C(b.minorTMHeight,N(a.majorTMHeight/2)):0;a.tickValueDistance=
C(b.tickValueDistance,0)+2;a.upperLimitDisplay=A(b.upperLimitDisplay)||"";a.lowerLimitDisplay=A(b.lowerLimitDisplay)||"";a.drawTickMarkConnector=b.drawTickMarkConnector||0},setDataLimit:function(a,b){var l=this.config,k=l.axisRange,e=this.getGaugeAxisLimit,m=l.upperlimit,p=l.lowerlimit,n=l.setAdaptiveMin,r=l.majorTMNumber,l=l.adjustTM,t;t=!n;e=e.call(this,C(a,m),C(b,p),m,p,n,t,r,l);k.min=Number(J(e.min,10));k.max=Number(J(e.max,10));k.tickInterval=e.majorTickInt||1;k.numMajorTM=e.numMajorTM},_setTickIntervalAfterZoom:function(){},
_drawComponents:function(){var a=this.config;a.drawTick&&this._drawTick();a.drawLabels&&this._drawLabel();a.drawTrendLines&&this._drawTrendLine()},_drawTick:function(){var a=this.config,b=a.axisRange,l=b.tickInterval,k=a.isVertical,e=a.isOpposit,m=a.drawTick,p=a.drawTickMinor,n=a.canvas,r=this.chart,t=r.config,q=n.canvasBottom||t.canvasBottom,u=n.canvasLeft||t.canvasLeft,v=n.canvasRight||t.canvasRight,z=n.canvasTop||t.canvasTop,n=b.max,t=b.min,R=r.components.paper,w=this.graphics.tick||[],F=a.minorTMNumber,
b=b.numMajorTM||a.majorTMNumber,X=a.axisAxisLineContainer,h=0,d=a.animateAxis,f,c,D,G,A,E;D={stroke:a.majorTMColor,"stroke-width":a.majorTMThickness,"stroke-linecap":"round"};c={stroke:a.minorTMColor,"stroke-width":a.minorTMThickness,"stroke-linecap":"round"};if(a.lines.isDraw&&m){f=r.get("config","animationObj");r=f.animObj;A=f.dummyObj;m=f.transposeAnimDuration;f=f.animType;k?e?a.placeTicksInside?(e=v-a.tickMarkDistance,q=e-a.majorTMHeight,u=e-a.minorTMHeight):(e=v+a.tickMarkDistance,q=e+a.majorTMHeight,
u=e+a.minorTMHeight):a.placeTicksInside?(e=u+a.tickMarkDistance,q=e+a.majorTMHeight,u=e+a.minorTMHeight):(e=u-a.tickMarkDistance,q=e-a.majorTMHeight,u=e-a.minorTMHeight):e?a.placeTicksInside?(e=z+a.tickMarkDistance,q=e+a.majorTMHeight,u=e+a.minorTMHeight):(e=z-a.tickMarkDistance,q=e-a.majorTMHeight,u=e-a.minorTMHeight):a.placeTicksInside?(e=q-a.tickMarkDistance,q=e-a.majorTMHeight,u=e-a.minorTMHeight):(e=q+a.tickMarkDistance,q=e+a.majorTMHeight,u=e+a.minorTMHeight);a=a.drawTickMarkConnector?k?["M",
e,this.getPixel(t),"L",e,this.getPixel(n)]:["M",this.getPixel(t),e,"L",this.getPixel(n),e]:[];D.path=a;w[h]?(a=w[h],m&&d?a.animateWith(A,r,{path:D.path},m,f):a.attr({path:D.path})):(a=R.path(D,X),w[h]=a);h+=1;for(z=0;z<b;z+=1)if(E=z<b-1?J(Number(t+l*z),10):n,D.path=k?"M"+e+" "+this.getPixel(E)+"L"+q+" "+this.getPixel(E):"M"+this.getPixel(E)+" "+e+"L"+this.getPixel(E)+" "+q,w[h]?(a=w[h],m&&d?a.animateWith(A,r,D,m,f):a.attr(D)):(a=R.path(D,X),w[h]=a),h+=1,E!==n&&p)for(v=l/(F+1),G=1;G<=F&&!(E+v*G>=n);G+=
1)c.path=k?"M"+e+" "+this.getPixel(E+v*G)+"L"+u+" "+this.getPixel(E+v*G):"M"+this.getPixel(E+v*G)+" "+e+"L"+this.getPixel(E+v*G)+" "+u,w[h]?(a=w[h],m&&d?a.animateWith(A,r,c,m,f):a.attr(c)):(a=R.path(c,X),w[h]=a),h+=1;if(w[h])for(z=h;z<w.length;z++)w[z].attr({path:[]});this.graphics.tick=w}else if(w[h])for(z=h;z<w.length;z++)w[z].attr({path:[]})},_drawLabel:function(){var b=this.config,g=b.canvas,l=b.axisDimention||{},n=this.chart,e=n.config,r=n.components,p=n.linkedItems.smartLabel,u=b.axisRange,
K=b.isOpposit,t=b.isReverse,v=u.numMajorTM||b.majorTMNumber,P=b.labels,S=P.style,z=b.isVertical,R=u.max,w=u.min,F=g.canvasTop||e.canvasTop,X=g.canvasLeft||e.canvasLeft,h=g.canvasBottom||e.canvasBottom,g=g.canvasRight||e.canvasRight,d=b.axisLabelContainerTop,f=b.labelPadding,c=r.paper,D=b.labelMaxH,G=b.labelMaxW,l=z?l.x:l.y,E=this.graphics.labels||[],A=0,C=b.animateAxis,H,N,ca,ma,qa,va;va={fontFamily:S.fontFamily,fontSize:S.fontSize,fontWeight:S.fontWeight,fontStyle:S.fontStyle,lineHeight:S.lineHeight};
var ha,ra,ka,na;S.lineHeight&&(ma=S.lineHeight,-1!==ma.indexOf("px")&&(ma=ma.replace("px",""),ma=parseFloat(ma)));if(b.labels.isDraw){H=n.get("config","animationObj");ha=H.animObj;ra=H.dummyObj;n=H.transposeAnimDuration;H=H.animType;N=k(this.getPixel(w)-this.getPixel(w+u.tickInterval));z?(b.labelMaxH>N&&!b.hasCategory&&(qa=m(b.labelMaxH/N)),qa>b.labels.step&&(b.labels.step=qa)):(b.labelMaxW>N&&!b.hasCategory&&(qa=m(b.labelMaxW/N)),qa>b.labels.step&&(b.labels.step=qa),ka=X,na=e.width-g);qa=(z?G:N/
2)*b.labels.step;D=z?N/2:D;u=u.tickInterval;G=b.labels.step?b.labels.step:1;p.useEllipsesOnOverflow(e.useEllipsesWhenOverflow);p.setStyle({fontSize:S.fontSize,fontFamily:S.fontFamily,lineHeight:S.lineHeight,fontWeight:S.fontWeight});d.css(va);for(e=0;e<v;e+=G)if(N=e<v-G?J(Number(w+u*e),10):R,b.labels.drawNormalVal||b.labels.drawLimitVal&&(N===w||N===R))if(b.labels.drawNormalVal||N===w||N===R)if(b.labels.drawLimitVal||N!==w&&N!==R){va=r.numberFormatter.scale;if(N===w&&b.lowerLimitDisplay)va=p.getSmartText(b.lowerLimitDisplay,
qa,D+ma/2),ca=va.text;else if(N===R&&b.upperLimitDisplay)va=p.getSmartText(b.upperLimitDisplay,qa,D+ma/2),ca=va.text;else if(b.labels.drawNumericVal||N!==w&&N!==R)if(b.labels.drawNumericVal)ca=va.call(r.numberFormatter,N),va=p.getOriSize(""+ca);else continue;else if(va=p.getSmartText(va.call(r.numberFormatter,N),qa,D+ma/2),va.text===va.oriText)ca=va.text;else continue;z?(ca={fill:S.color,"line-height":ma,"text-anchor":K?O:U,text:ca,x:K?(l||g)+f:(l||X)-f,y:this.getPixel(N)},(!t&&N===w&&b.lowerLimitDisplay||
t&&N===R&&b.upperLimitDisplay)&&va.height>ma&&(ca["vertical-align"]=M),(!t&&N===R&&b.upperLimitDisplay||t&&N===w&&b.lowerLimitDisplay)&&va.height>ma&&(ca["vertical-align"]=q),b.placeValuesInside&&(ca["text-anchor"]=K?U:O)):(ca={fill:S.color,"line-height":ma,text:ca,"text-anchor":a,x:this.getPixel(N),y:K?(l||F)-f:(l||h)+f},(!t&&N===w||t&&N===R)&&va.width>2*ka&&(ca["text-anchor"]=O),(!t&&N===R||t&&N===w)&&va.width>2*na&&(ca["text-anchor"]=U),ca["vertical-align"]=b.placeValuesInside?K?q:M:K?M:q);P.shiftX&&
(ca.x+=P.shiftX);P.shiftY&&(ca.y+=P.shiftY);E[A]?(N=E[A],n&&C?N.animateWith(ra,ha,ca,n,H):N.attr(ca)):E[A]=N=c.text(ca,d);va&&va.tooltext?(N.tooltip(va.tooltext),N.trackTooltip(!0)):N.trackTooltip(!1);A+=1}if(E[A])for(e=A;e<E.length;e++)E[e].attr({text:""});this.graphics.labels=E}else if(E[A])for(e=A;e<E.length;e++)E[e].attr({text:""})},placeAxis:function(a){var b=this.chart,l=b.components,m=b.linkedItems.smartLabel,e=this.config,n=e.axisRange,p=e.isVertical,q=e.isOpposit,K=e.labels.style,t=n.tickInterval,
u=n.max,P=n.min,v,z=0,R=0,n="",w,F,X,h,d;w={left:0,right:0,top:0,bottom:0};if(0>=a)return w;e.labels.isDraw=!0;e.labels.drawNumericVal=!0;e.labels.drawNormalVal=e.showTickValues;e.labels.drawLimitVal=e.showLimits;e.lines.isDraw=!0;e.labels.step=e.tickValueStep;e.labelPadding=0;m.useEllipsesOnOverflow(b.config.useEllipsesWhenOverflow);m.setStyle({fontSize:K.fontSize,fontFamily:K.fontFamily,lineHeight:K.lineHeight,fontWeight:K.fontWeight});e.drawTick&&e.showTickMarks&&e.lines.isDraw?(a-=e.tickMarkDistance,
R=r(e.minorTMHeight,e.majorTMHeight),e.placeTicksInside?(a+=e.tickMarkDistance,e.placeValuesInside&&(e.labelPadding=e.tickMarkDistance+R)):R>a?e.lines.isDraw=!1:(p?q?w.right+=R+e.tickMarkDistance:w.left+=R+e.tickMarkDistance:q?w.top+=R+e.tickMarkDistance:w.bottom+=R+e.tickMarkDistance,a-=R,e.placeValuesInside||(e.labelPadding=e.tickMarkDistance+R))):e.lines.isDraw=!1;a-=e.tickValueDistance;if(e.drawLabels&&(e.showTickValues||e.showLimits)){b=k(this._getCustomPixel(P)-this._getCustomPixel(P+t))/2;
e.labelPadding+=e.tickValueDistance;a-=e.tickValueDistance;v=l.numberFormatter.scale;for(F=P+t;F<u;F+=t)K=""+v.call(l.numberFormatter,J(F,10)),K.length>z&&(n=K,z=K.length);R=m.getOriSize(n);p?R.width>a&&(e.labels.drawNumericVal=!1,e.upperLimitDisplay||e.lowerLimitDisplay||(e.labels.isDraw=!1),n="",R=m.getOriSize(n)):R.height>a&&(e.labels.drawNumericVal=!1,e.upperLimitDisplay||e.lowerLimitDisplay||(e.labels.isDraw=!1),n="",R=m.getOriSize(n));z=p?a:b;K=p?b:a;e.showLimits?(F=v.call(l.numberFormatter,
u),h=v.call(l.numberFormatter,P),l=e.upperLimitDisplay||""+F,v=e.lowerLimitDisplay||""+h,d=m.getOriSize(l),d.width>R.width&&(X=m.getSmartText(l,z,K),l===F&&X.text===X.oriText||e.labels.drawNumericVal)&&(n=l,R=d),F=m.getOriSize(v),F.width>R.width&&(X=m.getSmartText(v,z,K),v===h&&X.text===X.oriText||e.labels.drawNumericVal)&&(n=v),""===n&&(n=m.getOriSize(e.upperLimitDisplay).width>m.getOriSize(e.lowerLimitDisplay).width?l:v,R=m.getOriSize(n))):e.labels.drawLimitVal=!1;if(p)m.getSmartText(n,z,K);else for(F=
P;F<=u;F+=t)if(P=m.getSmartText(n,z,K),""===P.text)z+=b;else break;P=m.getSmartText(n,z,K);e.labelMaxW=r(P.width,R.width);e.labelMaxH=r(P.height,R.height);!e.placeValuesInside&&e.labels.isDraw?p?(e.labelMaxW=E(e.labelMaxW,a),q?w.right+=e.labelMaxW+e.tickValueDistance:w.left+=e.labelMaxW+e.tickValueDistance):(e.labelMaxH=E(e.labelMaxH,a),q?w.top+=e.labelMaxH+e.tickValueDistance:w.bottom+=e.labelMaxH+e.tickValueDistance):e.labelPadding=-e.labelPadding}else e.labels.isDraw=!1;return e.spaceTaken=w},
getGaugeAxisLimit:function(a,b,l,k,e,m,p,r){var q=!0,t=!0,u=Number(l),v=Number(k),S,z;z={max:0,min:0,MajorTickInterval:1,numMajorTM:p};if(l&&k)u>a&&(a=u),v<b&&(b=v);else if(isNaN(a)&&(a=.9,t=!1),isNaN(b)&&(b=0,q=!1),a===b&&0===a&&(isNaN(u)||(a=u),isNaN(u)||0===u))a=.9;S=Math.max(Math.floor(Math.log(Math.abs(b))/Math.LN10),Math.floor(Math.log(Math.abs(a))/Math.LN10));p=n(10,S);2>Math.abs(a)/p&&2>Math.abs(b)/p&&(S--,p=n(10,S));S=n(10,Math.floor(Math.log(a-b)/Math.LN10));0<a-b&&10<=p/S&&(p=S);S=(Math.floor(a/
p)+1)*p;0>b?m=-1*(Math.floor(Math.abs(b/p))+1)*p:m?m=0:(m=Math.floor(Math.abs(b/p)-1)*p,m=0>m?0:m);e&&0>=a&&(S=0);z.max=!l||l&&u<a&&t?S:u;z.min=!k||k&&v>b&&q?m:v;z.min>z.max?z.min==v&&z.max==u?(k=z.min,z.min=z.max,z.max=k):z.min==v?z.max=z.min+1:z.max==u&&(z.min=z.max-1):z.min==z.max&&(z.max=z.min+1);z.range=Math.abs(z.max-z.min);z.MajorTickInterval=p;this.calcTickInterval(z,l,r);z.max>u&&u>=a&&(z.max=u,z.range=u-z.min,z.numMajorTM=Math.ceil(z.range/z.majorTickInt)+1);z.min<v&&v<=b&&(z.min=v,z.range=
z.max-v,z.numMajorTM=Math.ceil(z.range/z.majorTickInt)+1);return z},calcTickInterval:function(a,b,l){var k=0;-1!=a.numMajorTM&&2>a.numMajorTM&&(a.numMajorTM=2);b||b||-1===a.numMajorTM?(a.numMajorTM=-1==a.numMajorTM?5:a.numMajorTM,l&&(b=function(a,b){for(var g=0,l=1,k;;){k=a.numMajorTM+g*l;k=0===k?1:k;if(b.isRangeDivisible(a.range,k,a.MajorTickInterval))break;g=-1==l||g>a.numMajorTM?++g:g;if(25<g){k=a.numMajorTM;break}l=g<=a.numMajorTM?-1*l:1}a.numMajorTM=1<k?k:a.numMajorTM},l=a.numMajorTM,b(a,this),
2===a.numMajorTM&&(a.numMajorTM=l,1<a.range&&(a.range+=1,0>a.min?--a.min:a.max+=1),b(a,this),k=0))):(a.numMajorTM=-1==a.numMajorTM?5:a.numMajorTM,b=this.getDivisibleRange(a.min,a.max,a.range,a.numMajorTM,a.MajorTickInterval,!0),l=b-a.range,a.range=b,0<a.max?a.max+=l:a.min-=l);a.majorTickInt=(a.max-a.min+k)/(a.numMajorTM-1)},isRangeDivisible:function(a,g,l){a/=g-1;g=new b.MathExt;return g.numDecimals(a)>g.numDecimals(l)?!1:!0},getDivisibleRange:function(a,b,l,k,e,m){if(3>k)return l;a=Math.abs(b-a);
b=a/(k-1);this.isRangeDivisible(a,k,e)||(m&&Number(b)/Number(e)<(1<e?2:.5)&&(e/=10),b=(Math.floor(b/e)+1)*e,a=b*(k-1));return a}},"cartesian",{majorTMNumber:-1,majorTMHeight:6,showTickMarks:1,majorTMThickness:1,upperlimit:void 0,lowerlimit:void 0,adjustTM:1,minorTMNumber:4,minorTMThickness:1,tickMarkDistance:3,placeTicksInside:0,placeValuesInside:0}])}]);Q.register("module",["private","modules.renderer.js-axis-polarGauge",function(){var b=this.hcLib,v=b.pluck,J=b.toPrecision,C=b.pluckNumber,H=b.graphics.convertColor,
A=b.parseUnsafeString,u=b.getDashStyle,a=b.getValidValue,O=b.getFirstValue,b=b.preDefStr,q=b.POSITION_MIDDLE,M=b.POSITION_START,U=b.POSITION_TOP,N=b.POSITION_BOTTOM,E=b.POSITION_END,r=Math,k=r.sin,m=r.cos,n=r.abs,L=2*r.PI;Q.register("component",["axis","polarGauge",{configure:function(){var a=this.config,b=a.rawAttr;Q.register("component",["axis","gauge"]).prototype.configure.call(this);a.upperLimitDisplay=b.upperLimitDisplay||"";a.lowerLimitDisplay=b.lowerLimitDisplay||"";a.polarPadding=4},_drawComponents:function(){var a=
this.config;a.drawTick&&this._drawTick();a.drawLabels&&this._drawLabel();a.drawTrendLines&&this._drawTrendLine()},getAxisPosition:function(a,b){return this.getPixel(a,b)},getPixel:function(a,b){var n=this.config,e=n.axisRange,r=e.min,p=e.max-r,q=n.startAngle||L/2,K=n.totalAngle||L/2,t=n.centerX||0,e=n.centerY||0;b=C(b,n.radius,0);n=q+K/p*(a-r);r=t+b*m(n);e+=b*k(n);return{x:r,y:e,angle:n}},getAngle:function(a){var b=this.config,k=b.axisRange,e=k.min;return(b.startAngle||L/2)+(b.totalAngle||L/2)/(k.max-
e)*(a-e)},placeAxis:function(a){var b=this.config,k=this.chart,e=k.components,m=k.linkedItems.smartLabel,p=b.axisRange,r=b.labels.style,q=p.tickInterval,t=b.upperLimitDisplay,u=b.lowerLimitDisplay,v=p.max,S=p.min,z=0,R,p={left:0,right:0,top:0,bottom:0};m.useEllipsesOnOverflow(k.config.useEllipsesWhenOverflow);m.setStyle({fontSize:r.fontSize,fontFamily:r.fontFamily,lineHeight:r.lineHeight,fontWeight:r.fontWeight});b.labels.isDraw=1;b.labels.drawNormalVal=1;b.labels.drawLimitVal=1;b.lines.isDraw=1;
b.labels.step=b.tickValueStep;b.labelPadding=0;if(b.drawLabels&&b.showTickValues&&0<a){n(this.getPixel(S)-this.getPixel(S+q));b.labelPadding+=b.tickValueDistance;k=e.numberFormatter.scale;for(r=S;r<=v;r+=q)S=""+k.call(e.numberFormatter,J(r,10)),S.length>z&&(R=S,z=S.length);e=m.getOriSizeImprove(R,!0);if(e.width>a/2)return b.labels.isDraw=!1,p;if(b.showLimits){if(""!==t||""!==u)t=m.getOriSizeImprove(t,!0),t.width>e.width&&(e=t),t=m.getOriSizeImprove(u,!0),t.width>e.width&&(e=t)}else b.labels.drawLimitVal=
!1;b.labelMaxW=e.width;b.labelMaxW>a/2&&(b.labelMaxW=a/2);b.labelMaxH=e.height;b.placeValuesInside?b.labelPadding=-b.labelPadding:(p.right+=b.labelMaxW+b.tickValueDistance,p.left+=b.labelMaxW+b.tickValueDistance,p.top+=b.labelMaxH+b.tickValueDistance,p.bottom+=b.labelMaxH+b.tickValueDistance)}else b.labels.isDraw=!1;return p},_drawLabel:function(){var a=this.config,b=this.chart,k=b.components,e=a.axisRange,m=b.linkedItems.smartLabel,p,n=a.labels.style,r=a.labelPadding||0,t=!1,u=a.radius,v=C(a.gaugeOuterRadius,
u),u=C(a.gaugeInnerRadius,u),S=a.centerX,z=a.centerY,R=a.placeValuesInside,w=a.labelMaxH,F=a.labelMaxW,X=e.max,h=e.min,d=a.axisLabelContainerTop,f=k.paper,c=this.graphics.labels||[],D=0,G=a.animateAxis,L,A,H;L={fontFamily:n.fontFamily,fontSize:n.fontSize,fontWeight:n.fontWeight,fontStyle:n.fontStyle,lineHeight:n.lineHeight};var O,wa,ca;n.lineHeight&&(H=n.lineHeight,-1!==H.indexOf("px")&&(H=H.replace("px",""),H=parseFloat(H)));m.useEllipsesOnOverflow(b.config.useEllipsesWhenOverflow);m.setStyle({fontSize:n.fontSize,
fontFamily:n.fontFamily,lineHeight:n.lineHeight,fontWeight:n.fontWeight});if(a.labels.isDraw){D=b.get("config","animationObj");O=D.animObj;wa=D.dummyObj;b=D.transposeAnimDuration;ca=D.animType;a.labels.step?p=e.tickInterval*a.labels.step:p=e.tickInterval;d.css(L);e=h;for(D=0;e<=X;e+=p)if(a.labels.drawNormalVal||a.labels.drawLimitVal&&(e===h||e===X))if(a.labels.drawNormalVal||e===h||e===X)if(a.labels.drawLimitVal||e!==h&&e!==X)if(0!==a.showZeroPlaneValue||0!==a.showZeroPlane||0!==e)L=k.numberFormatter.scale,
e===h&&a.lowerLimitDisplay?(L=m.getSmartText(a.lowerLimitDisplay,F,w),L=L.text):e===X&&a.upperLimitDisplay?(L=m.getSmartText(a.upperLimitDisplay,F,w),L=L.text):L=L.call(k.numberFormatter,J(e,10)),A=R?this.getPixel(e,u+r-a.polarPadding):this.getPixel(e,v+r+a.polarPadding),L={fill:n.color,"line-height":H,text:L,x:A.x,y:A.y},A.x>S-10&&A.x<S+10&&A.y<z?(L["text-anchor"]=q,L["text-valign"]=R?U:N):A.x>S-10&&A.x<S+10&&A.y<z?(L["text-anchor"]=q,L["text-valign"]=R?N:U):(L["text-anchor"]=A.x<S?R?M:E:R?E:M,L["text-valign"]=
"center"),c[D]?(A=c[D],b&&G?A.animateWith(wa,O,L,b,ca):A.attr(L)):c[D]=f.text(L,d),D+=1,!t&&e<X&&e+p>X&&(e=X-p,t=!0);if(c[D])for(e=D;e<c.length;e++)c[e].attr({text:""});this.graphics.labels=c}else if(c[D])for(e=D;e<c.length;e++)c[e].attr({text:""})},_drawTick:function(){var a=this.config,b=a.axisRange,k=b.tickInterval,e=a.drawTick,m=a.drawTickMinor,p=this.chart,n=p.components,q=b.max,t=b.min,u=a.radius,b=C(a.gaugeOuterRadius,u),u=C(a.gaugeInnerRadius,u),n=n.paper,v=this.graphics.tick||[],L=a.minorTMNumber,
z=0,R=a.animateAxis,w=!1,F,X,h,d,f,c,D,G,A,E;G=a.axisAxisLineContainer;d={stroke:a.majorTMColor,"stroke-width":a.majorTMThickness,"stroke-linecap":"round"};h={stroke:a.minorTMColor,"stroke-width":a.minorTMThickness,"stroke-linecap":"round"};if(a.lines.isDraw&&e){z=p.get("config","animationObj");p=z.animObj;A=z.dummyObj;e=z.transposeAnimDuration;E=z.animType;X=this._getVisibleConfig();z=t+k*r.floor((X.minValue-3*k-t)/k);X=t+k*r.floor((X.maxValue+3*k-t)/k);X=X>q?q:X;t=z<t?t:z;for(z=0;t<=X;t+=k){a.placeTicksInside?
(F=this.getPixel(t,u),f=this.getPixel(t,u+a.majorTMHeight)):(F=this.getPixel(t,b),f=this.getPixel(t,b-a.majorTMHeight));d.path="M"+F.x+" "+F.y+"L"+f.x+" "+f.y;v[z]?(F=v[z],e&&R?F.animateWith(A,p,d,e,E):F.attr(d)):(F=n.path(d,G),v[z]=F);z+=1;if(t<q&&m)for(f=k/(L+1),D=1;D<=L;D+=1)c=t+f*D,a.placeTicksInside?(F=this.getPixel(c,u),c=this.getPixel(c,u+a.minorTMHeight)):(F=this.getPixel(c,b),c=this.getPixel(c,b-a.minorTMHeight)),h.path="M"+F.x+" "+F.y+"L"+c.x+" "+c.y,v[z]?(F=v[z],e&&R?F.animateWith(A,p,
h,e,E):F.attr(h)):(F=n.path(h,G),v[z]=F),z+=1;!w&&t<q&&t+k>q&&(t=q-k,w=!0)}if(v[z])for(t=z;t<v.length;t++)v[t].attr({path:[]});this.graphics.tick=v}else if(v[z])for(t=z;t<v.length;t++)v[t].attr({path:[]})},_drawPlotBand:function(){},_drawPlotLine:function(){},_drawTrendLine:function(){var b,l,k,e,m,p,n,K,t,Z,P,L,z,R,w,F,X,h,d=this.config,f=d.axisRange,c=f.max,f=f.min,D=this.chart;L=D.config;var G=D.linkedItems.smartLabel,J=D.components,N=J.colorManager,Ia=d.scaleFactor,sa=d.centerX||0,wa=d.centerY||
0,ca=d.canvas.canvasWidth||L.canvasWidth,ma=d.trend.trendStyle,qa=d.axisTrendContainerTop,va=d.axisTrendContainerBottom,ha=d.axisTrendLabelContainer,ra=J.paper,ka=this.components.trendObj||[],na={fontFamily:ma.fontFamily,fontSize:ma.fontSize,lineHeight:ma.lineHeight,fontWeight:ma.fontWeight,fontStyle:ma.fontStyle},da=d.trendPoints,oa=r.PI/180,Y={},Q=d.animateAxis,fa,Aa,ua;fa=0;var ia;e={};K={};k={};m={};var xa={},ja,ya,W,Ma,ea,ga,la,Ca,Ha,pa,La,Ja;if(da){fa=D.get("config","animationObj");pa=fa.animObj;
La=fa.dummyObj;D=fa.transposeAnimDuration;Ja=fa.animType;G.useEllipsesOnOverflow(L.useEllipsesWhenOverflow);G.setStyle(na);fa=Aa=0;for(ua=da.point.length;Aa<ua;Aa+=1)ja=da.point[Aa],ya=C(ja.startvalue,ja.value),W=C(ja.endvalue,ya),ia=ya!==W,ya<=c&&ya>=f&&W<=c&&W>=f&&(b=ya,l=W,a(A(ja.markertooltext)),k=a(A(ja.displayvalue),ia?"":J.numberFormatter.scale(ya)),C(ja.showontop,d.ticksBelowGauge,d.ticksBelowGraph,1),e=v(ja.color,N.getColor("trendLightColor")),m=C(ja.alpha,99),p=C(ja.thickness,1),n=ja.dashed?
u(ja.dashlen||2,ja.dashgap||2,ja.thickness||1):"",K=C(ja.usemarker,0),t=H(v(ja.markercolor,ja.color,N.getColor("trendLightColor")),100),Z=H(v(ja.markerbordercolor,ja.bordercolor,N.getColor("trendDarkColor")),100),P=C(C(ja.markerradius)*Ia,5),L=O(ja.markertooltext),z=C(C(ja.trendvaluedistance,d.trendValueDistance)*Ia,d.polarPadding),R=C(ja.valueinside,d.placeValuesInside,0),w=C(ja.showborder,1),F=H(v(ja.bordercolor,ja.color,N.getColor("trendDarkColor")),C(ja.borderalpha,ja.alpha,100)),X=C(C(ja.radius)*
Ia),h=C(C(ja.innerradius)*Ia),Ma=Math.cos(89.99*oa),ea=-Ma,X=C(X,d.gaugeOuterRadius),h=C(h,ia?Math.max(d.gaugeInnerRadius-15,0):d.gaugeInnerRadius),ga=this.getPixel(ya,X),la=this.getPixel(ya,h),Ca=ga.x,ga=ga.y,Ha=la.x,la=la.y,W=this.getAngle(W),ya=this.getAngle(ya),ia?(ya>W&&(ya+=W,W=ya-W,ya-=W),e={fill:H(e,m),"stroke-width":w?p:0,stroke:F,"stroke-dasharray":n},m={ringpath:[sa,wa,X,h,ya,W]}):(e={"stroke-width":w?p:0,stroke:F,"stroke-linecap":"round","stroke-dasharray":n},m={path:["M",Ca,ga,"L",Ha,
la]}),K?(K={fill:t,"stroke-width":1,stroke:Z},xa={polypath:[3,Ca,ga,P,(-ya+Math.PI)/oa,0]}):K={},""!==k?(Y=(l+b)/2,W=this.getAngle(Y),b=Math.cos(W),l=Math.sin(W),P=G.getOriSize(k).width,R?(Y=h-2-z,z=b>Ma?E:b<ea?M:q):(Y=X+2+z,z=b>Ma?M:b<ea?E:q),Ca=sa+Y*b,ga=wa+Y*l,Y=G.getOriSize(k).height,Y=G.getSmartText(k,ca,Y),Ca=ca<Ca+P?ca-P/2:Ca<P?P/2:Ca,P>ca&&(Ca=ca/2),k={fill:ja.color||ma.color,text:Y.text,"text-anchor":z,"vertical-align":U,x:Ca,y:ga},ja=Y.height,ga=b>Ma||b<ea?ga+(-(ja/2)+.4*ja*l*(R?-1:1)):
R?ga+-(0>l?0:ja):ga+-(0<l?0:ja),k.y=ga):k={text:""},ka[fa]?(R=ka[fa].graphics.drawing,ia=ka[fa].graphics.label,Ma=ka[fa].graphics.marker,R.attr(e),Ma.attr(K),Ma.tooltip(L),ia.css(na).tooltip(Y.oriText),D&&Q?(R.animateWith(La,pa,m,D,Ja),Ma.animateWith(La,pa,xa,D,Ja),ia.animateWith(La,pa,k,D,Ja)):(R.attr(m),Ma.attr(xa),ia.attr(k)),d.showTooltip&&Y.oriText?ia.trackTooltip(!0):ia.trackTooltip(!1),Ma.trackTooltip(d.showTooltip&&""!==L)):(R=ia?ra.ringpath(sa,wa,X,h,ya,W,va):ra.path(qa),ia=ra.text(k,na,
ha),Ma=ra.polypath(qa),R.attr(e),R.attr(m),Ma.attr(K),Ma.attr(xa),Ma.tooltip(L),ia.tooltip(Y.oriText),d.showTooltip&&Y.oriText?ia.trackTooltip(!0):ia.trackTooltip(!1),Ma.trackTooltip(d.showTooltip&&""!==L),ka[fa]={},ka[fa].graphics={},ka[fa].graphics.drawing=R,ka[fa].graphics.label=ia,ka[fa].graphics.marker=Ma),fa+=1);this.components.trendObj=ka}if(ka[fa])for(Aa=fa;Aa<ka.length;Aa++)ka[Aa].graphics.drawing.attr({path:["M",0,0]}),ka[Aa].graphics.marker.attr({polypath:["M",0,0]}),ka[Aa].graphics.label.attr({text:"",
"text-bound":[]});for(Aa=0;Aa<fa;Aa++)ka[Aa].graphics.label.attr({"text-bound":[ma.backgroundColor,ma.borderColor,ma.borderThickness,ma.borderPadding,ma.borderRadius,ma.borderDash]})}},"gauge",{trendPoints:void 0,ticksBelowGauge:void 0,ticksBelowGraph:void 0,trendValueDistance:void 0}])}]);Q.register("module",["private","modules.renderer.js-axis-polar",function(){var b=this.hcLib,v=b.pluck,J=b.pluckNumber,C=b.setLineHeight,H=b.graphics.convertColor,A=b.getDashStyle,u=b.plotEventHandler,b=b.preDefStr,
a=b.POSITION_MIDDLE,O=b.POSITION_START,q=b.POSITION_TOP,M=b.POSITION_BOTTOM,U=b.POSITION_END,b=Math,N=b.sin,E=b.cos,r=b.min,k=b.PI,m=2*k;Q.register("component",["axis","polar",{configure:function(){var a=this.config,b=a.rawAttr,g=this.chart.components.colorManager;Q.register("component",["axis","cartesian"]).prototype.configure.call(this);a.gridLineColor=H(v(b.radarSpikeColor,g.getColor("divLineColor")),J(b.radarSpikeAlpha,b.radarInLineAlpha,g.getColor("divLineAlpha")));a.radarBorderColor=H(v(b.radarBorderColor,
g.getColor("divLineColor")),J(b.radarBorderAlpha,100));a.radarFillColor=H(v(b.radarFillColor,g.getColor("altHGridColor")),J(b.radarFillAlpha,g.getColor("altHGridAlpha")))},_drawComponents:function(){var a=this.config;a.drawLabels&&a.hasCategory&&this._drawCategory()},getAxisPosition:function(a,b){return this.getPixel(a,b)},getPixel:function(a,b){var g=this.config,l=g.axisRange,k=l.min,e=l.max-k+1,r=g.startAngle||-(m/4),p=g.totalAngle||-m,q=g.centerX||0,l=g.centerY||0;b=J(b,g.radius,0);g=r+p/e*(a-
k);k=q+b*E(g);l+=b*N(g);return{x:k,y:l}},getAngle:function(a,b){var g=this.config;return(180/k*Math.atan2(b-(g.centerY||0),(g.centerX||0)-a)+450)%360},_drawCategory:function(){var b=this.config,k=this.chart,g=b.isOpposit,l=b.labels,m=l.style,e=b.axisContainer,r=b.axisPlotLineContainer,p=k.components.paper,E=this.components.categoryLabel||[],K=this.graphics.radarBorder||[],t=k.jsonData.categories,Z=b.categories.category,P=b.labelPadding,S,z,R,w,F,X,h=b.gridLineColor,d=b.gridLineWidth,f=function(a){return function(c){u.call(this,
k,c,a)}},c=0,D=b.centerX,G=b.centerY,aa=b.animateAxis,N,Ia,sa,wa,ca,ma,qa,va,ha,ra,ka;va=J(b.radius,0);sa=Z?Z.length-1:0;N=k.get("config","animationObj");ha=N.animObj;ra=N.dummyObj;Ia=N.transposeAnimDuration;ka=N.animType;w={stroke:b.radarBorderColor,fill:b.radarFillColor,"stroke-width":b.radarBorderThickness,path:["M"]};if(0!==b.showRadarBorder){for(c=N=0;N<=sa;N++)ma=this.getPixel(N,va),w.path.push(ma.x,ma.y,"L");w.path.pop();w.path.push("Z")}K[0]?Ia&&aa?K[0].animate(w,Ia):K[0].attr(w):K[0]=p.path(w,
r);this.graphics.radarBorder=K;if(b.labels.isDraw){t&&(S=t[0].font,z=t[0].fontsize,R=t[0].fontcolor);for(c=N=0;N<=sa;N++)if(K=Z[N],ma=J(K.x,K.y,N),b.labels.drawNormalVal||b.labels.drawLimitVal&&(0===N||ma===sa))if(b.labels.drawNormalVal||0===ma||ma===sa)if(b.labels.drawLimitVal||0!==ma&&ma!==sa){t=v(K.font,K.labelfont);w=v(K.fontsize,K.labelfontsize);F=J(K.fontbold,K.labelfontbold,0)?"bold":void 0;X=J(K.fontitalic,K.labelfontitalic,0)?"italic":void 0;ca=H(v(K.fontcolor,K.labelfontcolor,R,m.color),
J(K.labelalpha,b.rawAttr.labelFontAlpha,100));t={fontFamily:v(t,S,m.fontFamily),fontSize:v(w,z,m.fontSize),fontWeight:v(F,m.fontWeight),fontStyle:v(X,m.fontStyle)};t.lineHeight=C(t);t.lineHeight&&(wa=t.lineHeight,-1!==wa.indexOf("px")&&(wa=wa.replace(/px/i,""),wa=parseFloat(wa)));w=this.getPixel(ma,va+P);X=w.x;qa=w.y;w=K.label||"";if(0===J(K.showlabel,1)||0===b.showLabels)w="";F=Number(K.labelPadding)||0;ca={fill:ca,"line-height":wa,"font-size":m.fontSize,text:w,cursor:K.link?"pointer":"",x:X,y:qa};
F&&(ca.y+=F);ca["vertical-align"]=g?M:q;0===N?(ca["text-anchor"]=a,ca["vertical-align"]=M):N===(sa+1)/2?(ca["text-anchor"]=a,ca["vertical-align"]=q):(ca["text-anchor"]=N<(sa+1)/2?U:O,ca["vertical-align"]="center");ma=this.getPixel(ma,va);F={stroke:h,"stroke-width":d,"stroke-dasharray":"none",path:["M",D,G,"L",ma.x,ma.y]};l.shiftX&&(ca.x+=l.shiftX);l.shiftY&&(ca.y+=l.shiftY);E[c]?(ma=E[c].graphics.line,Ia&&aa?ma.animateWith(ra,ha,F,Ia,ka):ma.attr(F),F=E[c].graphics.label,Ia&&aa?F.animateWith(ra,ha,
ca,Ia,ka):F.attr(ca),F.css(t),b.showTooltip&&K.tooltext?(F.tooltip(K.tooltext),F.trackTooltip(!0)):F.trackTooltip(!1)):(ma=p.path(F,r),F=p.text(ca,t,e),b.showTooltip&&K.tooltext?(F.tooltip(K.tooltext),F.trackTooltip(!0)):F.trackTooltip(!1),F.click(f("datalabelclick")).hover(f("dataLabelRollOver"),f("dataLabelRollOut")),E[c]={},E[c].graphics={},E[c].config={},E[c].graphics.line=ma,E[c].graphics.label=F);E[c].config.labelBox={label:w,lineHeight:t.lineHeight,border:J(K.borderthickness,K.labelborderthickness)?
J(K.borderthickness,K.labelborderthickness,1)+"px solid":"",borderColor:K.bordercolor||K.labelbordercolor?H(K.bordercolor||K.labelbordercolor,J(K.borderalpha,K.labelborderalpha,K.alpha,K.labelalpha,100)):"",borderThickness:J(K.borderthickness,K.labelborderthickness),borderPadding:J(K.borderpadding,K.labelborderpadding),borderRadius:J(K.borderradius,K.labelborderradius),backgroundColor:K.bgcolor||K.labelbgcolor?H(K.bgcolor||K.labelbgcolor,J(K.bgalpha,K.labelbgalpha,K.alpha,K.labelalpha,100)):"",borderDash:J(K.borderdashed,
K.labelborderdashed,0)?A(J(K.borderdashlen,K.labelborderdashlen,4),J(K.borderdashgap,K.labelborderdashgap,2),J(K.borderthickness,K.labelborderthickness,1)):0===J(K.borderdashed,K.labelborderdashed)?"none":m.borderDash};E[c].graphics.label.data("eventArgs",{link:K.link||K.labellink||m.labelLink,text:ca.text,index:c});c+=1}if(E[c])for(N=c;N<E.length;N++)E[N].graphics.line.attr({path:["M",0,0]}),E[N].graphics.label.attr({text:"","text-bound":[]});this.components.categoryLabel=E}else if(E[c])for(N=c;N<
E.length;N++)E[N].graphics.line.attr({path:["M",0,0]}),E[N].graphics.label.attr({text:"","text-bound":[]});for(N=0;N<c;N++)b=E[N].config.labelBox,b.label?E[N].graphics.label.attr({"text-bound":[v(b.backgroundColor,m.backgroundColor),v(b.borderColor,m.borderColor),v(b.borderThickness,m.borderThickness),v(b.borderPadding,m.borderPadding),v(b.borderRadius,m.borderRadius),v(b.borderDash,m.borderDash)]}):E[N].graphics.label.attr({"text-bound":[]})},placeAxis:function(a,b){var g,l,k,e,m,p,q=this.config,
u=this.chart,t=u.linkedItems.smartLabel,Z=q.labels.style,P=u.jsonData.categories,S=q.labelPadding=J(q.rawAttr.axisValuePadding,10),z=q.useEllipsesWhenOverflow,R=0,w=0,F=0,X=0,h=b/2,d=b/2,f=a/2,c=a/2,D,G;D=q.categories.category;q.labels.isDraw=1;q.labels.drawNormalVal=1;q.labels.drawLimitVal=1;if(q.showLabels)for(P&&(m=P[0].font,p=P[0].fontsize),q=0,P=D.length;q<P;q++)G=D[q],g=G.font,l=G.fontsize,k=G.fontbold?"bold":"normal",e=G.fontitalic?"italic":"normal",g={fontFamily:v(g,m,Z.fontFamily),fontSize:v(l,
p,Z.fontSize),fontWeight:v(k,Z.fontWeight),fontStyle:v(e,Z.fontStyle)},l=C(g),t.useEllipsesOnOverflow(u.config.useEllipsesWhenOverflow),t.setStyle(g),0===q?(g=t.getSmartText(G.label,a,r(l,h),z),G.oriLabel=G.label,G.label=g.text,g.width+=S,g.height+=S,g.height>R&&(X=R=g.height)):q===P/2?(g=t.getSmartText(G.label,a,r(l,d),z),G.oriLabel=G.label,G.label=g.text,g.width+=S,g.height+=S,g.height>X&&(X=g.height)):q<P/2?(g=t.getSmartText(G.label,c,l,z),G.oriLabel=G.label,G.label=g.text,g.width+=S,g.height+=
S,g.width>w&&(w=g.width)):(g=t.getSmartText(G.label,f,l,z),G.oriLabel=G.label,G.label=g.text,g.width+=S,g.height+=S,g.width>F&&(F=g.width));return{top:R,left:w,right:F,bottom:X}}},"cartesian",{axisValuePadding:10,gridLineWidth:1,showRadarBorder:1,radarBorderThickness:2}])}]);Q.register("module",["private","modules.renderer.js-dataset-column",function(){var b=this.window,v=this.hcLib,J=v.parseConfiguration,C="rgba(192,192,192,"+(/msie/i.test(b.navigator.userAgent)&&!b.opera?.002:1E-6)+")",b=v.TOUCH_THRESHOLD_PIXELS,
H=v.CLICK_THRESHOLD_PIXELS,A=v.extend2,u=v.pluck,a=v.pluckNumber,O=v.toRaphaelColor,q=v.graphics.convertColor,M=v.HUNDREDSTRING,U=v.plotEventHandler,N=v.hasTouch?b:H,E=v.getValidValue,r=v.getFirstValue,k=v.parseTooltext,m=v.regex.dropHypeash,n=v.HASHSTRING,b=v.preDefStr,L=b.DEFAULT,g=b.showHoverEffectStr,l=b.visibleStr,B=b.setRolloverAttrStr,e=b.setRolloutAttrStr,b=Math,V=b.min,p=b.max,T=b.abs,K=b.ceil,t=b.floor,Z=v.getFirstColor,P=v.graphics.getLightColor,S=v.schedular,z=v.toolTip;Q.register("component",
["dataset","Column",{type:"column",pIndex:2,customConfigFn:"_createDatasets",configure:function(){var b=this.chart,e=this.config,g=this.JSONData,l=b.singleseries,h=b.config.isdual,d=b.config,f=b.jsonData.chart,c=b.components,k=c.colorManager,t=e.plotColor=k.getPlotColor(this.index||this.positionIndex),m=a(g.dashed,f.plotborderdashed),z=a(f.useplotgradientcolor,1),r,n,q=v.getDashStyle;n=b.isBar;var B=b.is3D,K;this.__setDefaultConfig();J(g,e,d,{data:!0});e.showplotborder=a(f.showplotborder,B?0:1);r=
d.plotborderdashlen;d=d.plotborderdashgap;e.plotfillangle=a(360-f.plotfillangle,n?180:90);e.plotfillalpha=n=u(g.alpha,f.plotfillalpha,M);e.plotColor=u(g.color,t);e.legendSymbolColor=e.plotColor;e.plotgradientcolor=v.getDefinedColor(f.plotgradientcolor,k.getColor("plotGradientColor"));!z&&(e.plotgradientcolor="");e.plotborderalpha=u(f.plotborderalpha,n,M);e.plotbordercolor=u(f.plotbordercolor,B&&!l?"#ffffff":k.getColor("plotBorderColor"));e.plotborderdashstyle=m?q(r,d,void 0):"none";e.showShadow=B?
a(f.showshadow,1):a(f.showshadow,k.getColor("showShadow"));e.definedGroupPadding=p(a(f.plotspacepercent),0);e.parentYAxis=h?K="s"===u(g.parentyaxis&&g.parentyaxis.toLowerCase(),"p")?1:0:K=0;this.yAxis=c.yAxis[K];this.visible=1===a(g.visible,!Number(g.initiallyhidden),1);!0===this.visible?this._conatinerHidden=!1:this._containerHidden=!0;this._setConfigure();this._realTimeConfigure&&this._realTimeConfigure();!1!==b.hasLegend&&this._addLegend()},_setConfigure:function(b,e){var g=this.chart,l=g.config,
h=this.config,d=this.JSONData,f=b||d.data,c=g.singleseries,k=g.components,t=k.xAxis[0],m=t.getCategoryLen(),m=b?b.data.length:m,z=g.jsonData.chart,k=k.colorManager,n=h.showplotborder,B=h.plotColor,K=l.showtooltip,Z=v.parseUnsafeString,L=l.yaxisname,S=l.xaxisname,A=l.tooltipsepchar,C=l.seriesnameintooltip,T=v.parseTooltext,H,J,M,U,Y,Q,fa=l.plotborderdashlen,Aa=l.plotborderdashgap,ua=l.plotborderthickness,ia=l.useroundedges,xa=l.plothovereffect,ja=h.plotfillangle,ya,W,Ma,ea=h.plotborderdashstyle,ga,
la,Ca,Ha,pa,La,Ja,Fa,ta,Ka=v.getDashStyle,Ea=this.components.data,Da=g.isBar,Ga=g.is3D,Na,Ua=-Infinity,Pa=Infinity,Sa=this.yAxis,ab=l.use3dlighting,Xa=l.usedataplotcolorforlabels,Za;l.dragTolerance=l.isDrag?(n&&5<ua?ua/2+1:5)+N:0;Ea||(Ea=this.components.data=[]);this.visible=1===a(this.visible,this.JSONData.visible,!Number(this.JSONData.initiallyhidden),1);for(Na=0;Na<m;Na++){b?(Q=b&&b.data[Na]||{},Za=void 0!==e?e+Na:Ea.length-m+Na,J=Ea[Za]):(J=Ea[Na],Q=f&&f[Na]||{});g=J&&J.config;J||(J=Ea[Na]={});
J.config||(g=Ea[Na].config={});g.showValue=a(Q.showvalue,h.showvalues);g.setValue=J=Sa.getCleanValue(Q.value,l.stack100percent);g.setLink=u(Q.link);g.toolTipValue=B=Sa.dataLabels(J);g.setDisplayValue=U=Z(Q.displayvalue);g.displayValue=u(U,B);B=a(Q.dashed);U=a(Q.dashlen,fa);H=Aa=a(Q.dashgap,Aa);null!==J&&(Ua=p(Ua,J),Pa=V(Pa,J));g.plotBorderDashStyle=U=1===B?Ka(U,H,ua):0===B?"none":ea;c?(B=k.getPlotColor(a(Za-m,Na)),B=u(Q.color,B),Xa&&t.updateCategory(Na,{labelfontcolor:q(B)}),Ma=u(Q.alpha,Q.borderalpha,
h.plotborderalpha,ya).toString()):(B=u(Q.color,h.plotColor),Ma=u(Q.alpha,h.plotborderalpha,ya).toString());W=u(Q.ratio,h.ratio);ya=u(Q.alpha,h.plotfillalpha);g.shadow={opacity:h.showShadow?ya/100:0};0>J&&!ia&&(Y=h.plotfillangle,ja=Da?180-ja:360-ja);g.colorArr=H=v.graphics.getColumnColor(B+","+h.plotgradientcolor,ya,W,ja,ia,h.plotbordercolor,Ma,Da?1:0,Ga?!0:!1);g.originalPlotColor=B;ga=t.getLabel(a(Za-m,Na));g.origLabel=J=E(Z(ga.label));J=g.label=E(Z(ga.tooltext))||J;if(0!==xa){ga=u(Q.hovercolor,d.hovercolor,
z.plotfillhovercolor,z.columnhovercolor,B);la=u(Q.hoveralpha,d.hoveralpha,z.plotfillhoveralpha,z.columnhoveralpha,ya);Ca=u(Q.hovergradientcolor,d.hovergradientcolor,z.plothovergradientcolor,h.plotgradientcolor);!Ca&&(Ca="");W=u(Q.hoverratio,d.hoverratio,z.plothoverratio,W);Ha=a(360-Q.hoverangle,360-d.hoverangle,360-z.plothoverangle,ja);pa=u(Q.borderhovercolor,d.borderhovercolor,z.plotborderhovercolor,h.plotbordercolor);La=u(Q.borderhoveralpha,d.borderhoveralpha,z.plotborderhoveralpha,z.plotfillhoveralpha,
z.columnhoveralpha,Ma,ya);Ma=a(Q.borderhoverthickness,d.borderhoverthickness,z.plotborderhoverthickness,h.showplotborder&&ua);Ja=Q.borderhoverdashed||d.borderhoverdashed||z.plotborderhoverdashed;Fa=a(Q.borderhoverdashgap,d.borderhoverdashgap,z.plotborderhoverdashgap,fa);ta=a(Q.borderhoverdashlen,d.borderhoverdashlen,z.plotborderhoverdashlen,Aa);Ja=void 0!==Ja?Number(Ja)?Ka(ta,Fa,Ma):"":U;if(l.drawTrendRegion||1==xa&&ga===B)ga=P(ga,70);B=v.graphics.getColumnColor(ga+","+Ca,la,W,Ha,ia,pa,La.toString(),
Da?1:0,Ga?!0:!1);g.setRolloutAttr={fill:Ga?[O(H[0]),!ab]:O(H[0]),stroke:n&&O(H[1]),"stroke-width":ua,"stroke-dasharray":U};g.setRolloverAttr={fill:Ga?[O(B[0]),!ab]:O(B[0]),stroke:O(B[1]),"stroke-width":Ma,"stroke-dasharray":Ja}}H=g.toolTipValue;g.origToolText=B=E(Z(u(Q.tooltext,d.plottooltext,z.plottooltext)));K?null===H?Q=!1:void 0!==B?(U=[1,2,3,4,5,6,7],J={yaxisName:L,xaxisName:S,formattedValue:H,label:J},Q=T(B,U,J,Q,z,d)):(C&&(M=r(d&&d.seriesname)),Q=M?M+A:"",Q+=J?J+A:""):Q=!1;g.toolText=Q;g.setTooltext=
Q;Y&&(ja=Y);Za++}h.maxValue=Ua;h.minValue=Pa},init:function(a){var b=this.chart;if(!a)return!1;this.JSONData=a;this.chartGraphics=b.chartGraphics;this.components={};this.graphics={};this.configure()},_addLegend:function(){var b=this.chart,e=b.isBar,g=b.jsonData.chart,l,h;h=this.config;var d=Z(h.legendSymbolColor),b=b.components.legend;l=a(g.use3dlighting,g.useplotgradientcolor,1);g=P(d,60).replace(m,n);l?(l=P(d,40),e={FCcolor:{color:d+","+d+","+l+","+d+","+d,ratio:"0,30,30,30,10",angle:e?0:270,alpha:"100,100,100,100,100"}}):
e={FCcolor:{color:d,angle:e?0:270,ratio:"0",alpha:"100"}};h={enabled:h.includeinlegend,type:this.type,fillColor:O(e),strokeColor:O(g),rawFillColor:d,rawStrokeColor:d,label:r(this.JSONData.seriesname)};this.legendItemId=b.addItems(this,this.legendInteractivity,h)},legendInteractivity:function(a,b){var e=this.config,g=a.visible,h=b.config,d=b.graphics,f=e.itemHiddenStyle.color,e=e.itemStyle.color,c=h.fillColor,l,h=h.strokeColor;g?a.hide():a.show();g={legendItemSymbol:{fill:g?f:c,stroke:g?f:h},legendItemText:{fill:g?
f:e},legendItemLine:{stroke:g?f:h}};for(l in d)(f=d[l])&&g[l]&&f.attr(g[l])},_checkPointerOverColumn:function(a,b,e){var g=this.chart.config,h=g.plotborderthickness,d=g.showplotborder,f=this.components,f=f.dataRT||f.data,c,l,k,t,p,m=g.viewPortConfig,z=m.x,m=m.scaleX;c=this.config.plotsPerBin||1;var n=f&&f.length,r=0,q=0;a=(K(a/c)-1)*c+1;c=a+c-1;g=g.dragTolerance||0;for(n=c<n?c:n;n>=a;n--){c=f[n];if(!c)break;c._height<N&&(r=N);c._width<N&&(q=N);if(c._xPos||c._yPos)if(l=c.config.setValue,d&&void 0!==
h?p=h/2:h=p=0,null!==l&&(k=b-(c._xPos-z*m)+p,t=e-c._yPos+p+(0<=l?g:0),c=k>=-q/2&&k<=(q||c._width)+h&&t>=-r/2&&t<=(r||c._height)+h+(0>l?2*g:g)))return{pointIndex:n,hovered:c,pointObj:f[n]}}},_getHoveredPlot:function(a,b){var e=this.chart,g=e.config,h=e.components.canvas.config,h=Math.max(h.canvasPaddingLeft,h.canvasPadding),d=g.canvasLeft,g=g.canvasTop,e=e.components.xAxis[0].getValue(e.isBar?b-g-h:a-d-h),g=Math.round(e);return 0<g-e?this._checkPointerOverColumn(g,a,b)||this._checkPointerOverColumn(g-
1,a,b):this._checkPointerOverColumn(g+1,a,b)||this._checkPointerOverColumn(g,a,b)},_rolloverResponseSetter:function(a,b,e,g){var h=(b=(b=b.graphics)&&b.element)&&b.getData();!0!==h.draged&&(b&&0!==h.showHoverEffect&&b.attr(b.getData().setRolloverAttr),!g&&b&&U.call(b,a,e,"DataPlotRollOver"))},_rolloutResponseSetter:function(a,b,e,g){var h=(b=(b=b.graphics)&&b.element)&&b.getData();!0!==h.draged&&(b&&0!==h.showHoverEffect&&b.attr(b.getData().setRolloutAttr),!g&&b&&U.call(b,a,e,"DataPlotRollOut"))},
_decideTooltipType:function(a,b,e){var g=this.groupManager,h=this.chart,d=h.config.drawTrendRegion,f=h.components.paper,c=this.components,l=(c.dataRT||c.data)[a],c=l&&(l.config.finalTooltext||l.config.toolText),l=l&&(l.graphics.element||this.graphics.sharedAnchor.element);e=e.originalEvent;d&&l?g._drawTooltip(a,b,e):c&&!d&&z.customDraw(c,f,e,void 0,void 0,h.chartInstance.id)},_firePlotEvent:function(a,b,e,g){var h=this.chart,d=this.components,d=(d.dataRT||d.data)[b],f=d.graphics.element,c=v.toolTip,
l=e.originalEvent,k=h.components.paper.canvas.style,t;if(f)switch(t=d.config,t=t.setLink,a){case "mouseover":this._decideTooltipType(b,g,e);this._rolloverResponseSetter(h,d,l);t&&(k.cursor="pointer");break;case "mouseout":c.hide(h.chartInstance.id);this._rolloutResponseSetter(h,d,l);t&&(k.cursor=L);break;case "click":U.call(f,h,l);break;case "mousemove":this._decideTooltipType(b,g,e)}},draw:function(){var b=this,l=b.JSONData,k=b.chart.jsonData.chart,p=b.config,h=p.legendInteractivity,d=b.groupManager,
f=b.index,c,m,z=b.visible,n=b.chart,r=n.getJobList(),q=n.config,K=q.isDrag,P=q.plothovereffect,Z=n.components,L=Z.paper,E=Z.xAxis[0],A=E.getCategoryLen(),H=b.yAxis,J=n.graphics.columnGroup,M=q.isstacked,U,da,Q,Y=n.graphics.sumLabelsLayer,za=v.parseUnsafeString,fa=v.getValidValue,Aa=v.Raphael,ua=q.showtooltip,ia=n.get("config","animationObj"),xa=ia.animObj,ja=ia.dummyObj,ya=ia.duration,W=ia.animType,Ma=E.getAxisPosition(0),ea=E.getAxisPosition(1),ga=d.config,la=ga.groupMaxWidth=p.groupMaxWidth=ea-
Ma,Ca=q.definedgrouppadding,Ha=q.plotspacepercent/200,pa=d.getDataSetPosition(b),La=d.stackSumValue[b.positionIndex],Ja=q.maxcolwidth,Fa=(1-.01*Ca)*la||V(la*(1-2*Ha),1*Ja),ta=a(pa.columnWidth,Fa/1),Ka,Ea=pa.xPosOffset||0,Da=pa.height,Ga,Na,Ua=b.components,Pa=Ua.data,Sa,ab,Xa,Za,bb,eb,Va,Ya=b.drawn,$a=Ua.removeDataArr,Ta=$a&&$a.length,kb=Ua.addDataArr,hb=kb&&kb.length,ib,ob=H.getLimit(),ba=ob.min,Ba=0<ob.max&&0>ba,Oa,Qa=H.getAxisBase(),I=H.yBasePos=H.getAxisPosition(Qa),cb,vb,sb=q.plotborderthickness,
pb=q.useroundedges,gb=b.graphics,qb=gb.container,mb=gb.dataLabelContainer,nb=gb.shadowContainer,Fb=Ua.pool,Bb,Wb=1,Hb,wb,Nb=E.getAxisPosition(A-1)+Ea,xb=E.getAxisPosition(0)+Ea,yb,Cb=!0,Ib,Jb=b.startPosition,ub=n.isInverse,jb,tb=p.isSkippedData,Wa,Kb,zb,Gb=void 0!==q.scrollMinVal?q.scrollMinVal:0,Sb=void 0!==q.scrollMaxVal?q.scrollMaxVal:A,fb=function(){!1!==b.visible||!1!==b._conatinerHidden&&void 0!==b._conatinerHidden||(qb.hide(),nb.hide(),mb&&mb.hide(),b._conatinerHidden=!0);this.show()},Tb=function(){Y.show()},
Lb=function(){return Jb?function(a,c){a.x=xb-la*(hb-c);a.y=da;a.height=Ga}:!1===Jb?function(a){a.x=Nb+la*Wb++;a.y=da;a.height=Ga}:function(a){a.width=0}},Mb,Ob=n.config.viewPortConfig,Pb=Ob.x,rb=Ob.scaleX,db=q.showplotborder;Ya&&(Lb=Lb());qb||(qb=b.graphics.container=L.group("columns",J),z?qb.show():qb.hide());nb||(nb=b.graphics.shadowContainer=L.group("shadow",J).toBack(),z||nb.hide());z&&(qb.show(),nb.show());if(!(Gb>=Sb)){for(m=Gb;m<Sb;m++)if(Wa=(Va=(Sa=Pa[m])&&Sa.config)&&Va.isSkipped,bb=Va&&
Va.setValue,void 0===Sa||void 0===bb||null===bb||!0===Wa)(Hb=Sa&&Sa.graphics)&&Hb.element&&Hb.element.hide(),Va&&delete Va.isSkipped;else if(zb=Sa.graphics&&Sa.graphics.element,!1===tb||!Ya||M||K||!h||!(!z&&!zb||z&&zb&&0!==Sa._width&&0!==Sa._height)){Ib=Sa.trackerConfig={};Oa=0<=bb;Za=Va.setLink;Bb=Va.colorArr;Sa.graphics||(Pa[m].graphics={});eb=Va.displayValue;cb=Oa?Va.previousPositiveY:Va.previousNegativeY;ab=fa(za(u(Va.origToolText,l.plottooltext,k.plottooltext)));M&&(cb=b._parseValues(m,cb,La[m],
ab),bb=Va.value);vb=H.getAxisPosition(cb||Qa);U=E.getAxisPosition(m)+Ea+Pb*rb;0!==Da?(da=H.getAxisPosition(bb+(cb||0)),Ga=T(vb-da)):(Ga=0,da=vb);da=V(da,vb);!1===tb&&d.isCrisp?(Q=Aa.crispBound(U,da,ta,Ga,sb),U=Q.x,jb=t(Ga)===Q.height,wb=t(da)!==Q.y,da=Q.y,Ka=Q.width,Ga=Q.height):Ka=ta;z&&0<sb&&(0===sb%2&&(ub&&Ba?Oa?!wb&&(Ga+=1):!jb&&--da:Oa?wb&&--da:jb&&(Ga+=1)),ib=Math.floor(sb/2),ub&&Ba?Oa?Ga-=ib:da+=ib:Oa?da+=ib:Ga-=ib);Mb=Va.shadow;Na=Va.finalTooltext=!1!==Va.toolText?Va.toolText+(ab?"":Va.toolTipValue):
"";yb=Va.plotBorderDashStyle;Ib.eventArgs={index:m,link:Za,value:bb,displayValue:eb,categoryLabel:Va.origLabel,toolText:Na,id:"",datasetIndex:f,datasetName:l.seriesname,visible:z};Sa._xPos=U;Sa._yPos=da;Sa._height=Ga;Sa._width=Ka;Sa._index=m;if(!(Xa=Sa.graphics.element)){c={x:U,y:I,width:Ka,height:1,r:pb,ishot:!ua,fill:O(Bb[0]),stroke:O(Bb[1]),"stroke-width":db?sb:0,"stroke-dasharray":yb,"stroke-linejoin":"miter",visibility:z,cursor:Za?"pointer":""};Ya&&(Lb(c,m),Fb&&Fb.element[0]&&(Xa=Sa.graphics.element=
Fb.element[0],Xa.attr(c),Fb.element.splice(0,1)),Sa._newXPos=c.x);if(Xa)Va.elemCreated=!1;else{if(ga.skipZeroPlots&&0===bb)continue;Xa=Sa.graphics.element=L.rect(c,qb);Va.elemCreated=!0}Ya||(Xa.animateWith(ja,xa,{y:da,height:Ga||1},ya,W,Cb&&Tb),Cb=!1)}(Xa=Sa.graphics.element)&&Ya&&(Va.elemCreated=!1,c={x:U,y:da,width:Ka,height:Ga||1,r:pb},M||!1!==b.visible||0===Da||(delete c.y,delete c.height),h||Xa.attr({fill:O(Bb[0]),stroke:O(Bb[1]),"stroke-width":db?sb:0,"stroke-linejoin":"miter","stroke-dasharray":yb,
ishot:!ua,visibility:z,cursor:Za?"pointer":""}),Xa.animateWith(ja,xa,c,ya,W,Cb&&fb),Cb=!1);Xa.shadow(Mb,nb).data("BBox",Q);if(Za||ua)Ga<N&&(da-=(N-Ga)/2,Ga=N,Kb=!0),Ib.attr={x:U,y:da,width:Ka,height:Ga,r:pb,cursor:Za?"pointer":"",stroke:C,"stroke-width":db?sb:0,fill:C,ishot:!0,visibility:z};n.config.enablemousetracking&&Xa.data("eventArgs",Ib.eventArgs).data(g,P).data(B,Va.setRolloverAttr||{}).data(e,Va.setRolloutAttr||{})}Kb&&(q.toleranceBottom=N);Ya?b.drawLabel(Gb,Sb):r.labelDrawID.push(S.addJob(function(){b.drawLabel(Gb,
Sb)},v.priorityList.label));!Ya&&Y.hide();d.drawSumValueFlag&&d.drawSumValueFlag&&d.drawSumValue();b.drawn=!0;Ta&&b.remove()}},show:function(){var a=this.graphics&&this.graphics.container,b=this.graphics&&this.graphics.dataLabelContainer,e=this.graphics&&this.graphics.shadowContainer,g=this.chart.is3D,h=this.components.data,d=this.chart.config.categories,f=this.yAxis,c=this.chart,k=c.components.xAxis[0],d=V(this.JSONData.data&&this.JSONData.data.length,d&&d.length);this.config.legendInteractivity=
!0;c._chartAnimation();this.visible=!0;this._conatinerHidden=!1;if(g)for(a=0;a<d;a++)h[a]&&h[a].graphics&&h[a].graphics.element&&h[a].graphics.element.attr({visibility:l}),h[a]&&h[a].graphics&&h[a].graphics.hotElement&&h[a].graphics.hotElement.attr({visibility:l});else a.show();e.show();b&&b.show();c.config.transposeAxis&&(c._setAxisLimits(),f.draw());c.isRealTime&&k.draw();c._drawDataset();this.config.legendInteractivity=!1;c.chartInstance.__state._rtPaused&&c._setRTdata()},hide:function(){var a=
this.yAxis,b=this.chart,e=b.components.xAxis[0];b._chartAnimation();this.visible=!1;this.config.legendInteractivity=!0;b.config.transposeAxis&&(b._setAxisLimits(),a.draw());b.isRealTime&&e.draw();b._drawDataset();this.config.legendInteractivity=!1;b.chartInstance.__state._rtPaused&&b._setRTdata()},drawLabel:function(b,e){var g=this.chart,k=g.config,h=g.graphics,d=g.components,f=g.get("config","animationObj"),c=f.dummyObj,t=f.animObj,m=f.animType,f=f.duration,p=d.paper,z=g.linkedItems.smartLabel,n=
g.config.dataLabelStyle,r=this.config.legendInteractivity,q=d.xAxis[0].getCategoryLen(),B=this.components,d=B.data,B=B.pool,u=this.visible,K,v,k=k.rotatevalues?270:0,P,Z,L,S,E,C,V,T=this.graphics.dataLabelContainer,H=this.labelDrawn;K=a(b,0);q=a(e,q);h=h.datalabelsGroup;T||(T=this.graphics.dataLabelContainer=p.group("datalabel",h));u?T.show():T.hide();z.useEllipsesOnOverflow(g.config.useEllipsesWhenOverflow);z.setStyle(n);if(u){if(K>=q)return;for(h=K;h<q;h++)if(Z=(E=(K=d[h])&&K.config)&&E.setValue,
void 0===K||void 0===Z||null===Z||!0===E.labelSkip)E&&delete E.labelSkip,(V=K&&K.graphics)&&V.label&&V.label.hide();else if(u=K.graphics)L=K._yPos,S=K._xPos,v=E.displayValue,(P=E.showValue)&&null!==Z?(r&&E._state||(P=z.getOriSize(v),E._state=k?{labelWidth:P.height,labelHeight:P.width}:{labelWidth:P.width,labelHeight:P.height}),Z=this._getValuePosition({labelWidth:E._state.labelWidth,labelHeight:E._state.labelHeight,width:K._width,height:K._height,yPos:L,xPos:S,value:Z}),L=Z.textX,Z=Z.textY,v={x:L,
y:Z,text:v},r||(v=A(v,{visibility:l,"line-height":n.lineHeight,fill:n.color,"text-bound":[n.backgroundColor,n.borderColor,n.borderThickness,n.borderPadding,n.borderRadius,n.borderDash]})),!u.label&&H&&g.isRealTime&&(E=A({},v),E.x=v.x-S+(K._newXPos||0),E.transform=p.getSuggestiveRotation(k,E.x,Z),B&&B.label[0]?(u.label=B.label[0].attr(E),B.label.splice(0,1)):u.label=p.text(E,T)),v.transform=p.getSuggestiveRotation(k,L,Z),(K=u.label)||(B&&B.label[0]?(K=u.label=B.label[0].attr(v),B.label.splice(0,1)):
K=u.label=p.text(v,T),C=!0),K.show(),H&&!C&&K.animateWith(c,t,v,f,m)):u.label&&(u.label.attr({"text-bound":[]}),u.label.hide())}this.labelDrawn=!0},_getValuePosition:function(a){var b=this.chart,e=b.components,g=b.config,h=e.canvas.config,d=e.yAxis[0],e=h.xDepth,h=h.yDepth,f=g.canvasTop,c=g.canvasHeight+h,l,k,t,m=a.yPos,z=b.is3D,b=b.config.isstacked,n=g.valuepadding+2,r=a.height;l=a.width;g=g.placevaluesinside;t=a.labelHeight;var q=d.getAxisConfig("isReverse"),B=d.getAxisConfig("axisRange"),K=B.min,
d=a.value,B=0<B.max&&0>K;a=a.xPos;q&&B&&(k=0>d?!1:!0);k=u(k,0>d);t=q=t+n;n=.5*q+n;l=a+.5*l;a=k?f+c-(m+r+h):m-f;b?(c=V(f+c-.5*t,m+.5*r+(h||0)),c=p(f+.5*t,c),l-=e):g?r>=t?(c=m+(k?r-n:n),z&&(l-=e,c+=h)):a>=t?(c=m+(k?r+n:-n),z&&k&&(l-=e,c+=h)):(c=m+(k?r-n:n),z&&(l-=e,c+=h)):a>=t?(c=m+(k?r+n:-n),z&&(k?(l-=e,c+=h):l-=e/2)):(c=m+(k?r-n:n),z&&(l-=e,c+=h));return{textX:l,textY:c}},_parseValues:function(a,b,e,g){var h=this.chart.config;a=this.components.data[a].config;var d=h.showpercentvalues,f=h.showpercentintooltip,
c=a.setValue,h=h.stack100percent,l=this.chart.components.numberFormatter,t=this.yAxis,m=a.setDisplayValue,c=(this.visible?c||0:0)/e*100,l=l.percentValue(c);h&&(a.value=c,b=(b||0)/e*100);f&&(a.toolTipValue=l);d&&!m&&(a.displayValue=l);g&&(a.toolText=k(a.setTooltext,[14,24,25,112],{percentValue:l,sum:t.dataLabels(e),unformattedSum:e}));return b},getDataLimits:function(){return{max:this.config.maxValue,min:this.config.minValue}},addData:function(a,b,e){var g=this.components,h=this.chart.components.numberFormatter,
d=g.data,f=a.data,c=f.length,l=this.config,k=l.maxValue,l=l.minValue,t=this.maxminFlag,m;g.addDataArr=a.data;if(0===b)this.startPosition=!0;else if(b+c===d.length||void 0===b)this.startPosition=!1;for(m=0;m<c;m++)if(void 0!==b?d.splice(b+m,0,{config:{}}):d.push({config:{}}),!t&&(g=h.getCleanValue(f[m].value),g>k||g<l))t=this.maxminFlag=!0;this._setConfigure(a,b);t&&this.setMaxMin();e&&this.draw()},hideElements:function(a){a.hide()},removeData:function(a,b,e){var g=this.components,h=g.data,d=g.removeDataArr||
(g.removeDataArr=[]),f=this.config,c=this.groupManager,l=this.maxminFlag;void 0===b&&(b=1);a=a||0;if(a+b===h.length)this.endPosition=!0;else if(0===a||void 0===a)this.endPosition=!1;g.removeDataArr=d=d.concat(h.splice(a,b));c&&c.removeSumLabels&&c.removeSumLabels(a,b,this.positionIndex);g=d.length;for(a=0;a<g;a++)if(d[a]){b=d[a].config;if(b.setValue===f.maxValue||b.setValue===f.minValue)l=this.maxminFlag=!0;if(l)break}l&&this.setMaxMin();e&&this.draw()},updateData:function(a,b,e){var g=this.config,
h=g.maxValue,d=g.prevMin,f=this.chart,c=this.groupManager||this,l=f.components,k=l.xAxis||l.yAxis,t=k&&l.xAxis[0],l=k&&l.yAxis[0];this._setConfigure(a,b);this.setMaxMin();if(g.maxValue!==h||g.minValue!==d)this.maxminFlag=!0;e&&(f._setAxisLimits(),k&&t.draw(),k&&l.draw(),c.draw())},setMaxMin:function(){var a=this.components.data,b=this.config,e,g,h=a.length,d=-Infinity,f=Infinity;for(e=0;e<h;e++)a[e]&&(g=a[e].config,g=g.setValue,void 0!==g&&(d=p(d,g),f=V(f,g)));b.maxValue=d;b.minValue=f},hidingPosition:function(){var a=
this.components.removeDataArr.length,b=this.config.groupMaxWidth;return!1===this.endPosition?function(e){return{x:e._xPos-b*a,y:e._yPos}}:!0===this.endPosition?function(e){return{x:e._xPos+b*a||0,y:e._yPos}}:function(){return{width:0}}},remove:function(){var a=this.components,b=a.removeDataArr,e=a.pool||(a.pool={element:[],label:[]}),g=this.chart,h=g.get("config","animationObj"),d=h.duration,f=h.dummyObj,c=h.animObj,h=h.animType,l=this.maxminFlag,k,t,m,p,z=g.components.paper,n=g.config.rotatevalues,
r=this.chart.config.realTimeConfig&&this.chart.config.realTimeConfig.clear,q=this.hidingPosition(),B=function(){this.hide()};for(m=b.length-1;0<=m;m--)if(g=b[m],b.splice(m,1),g&&g.graphics){t=g.graphics;for(k in t)"label"===k&&void 0===this.startPosition&&void 0===this.endPosition&&t[k].hide(),p=q(g),"label"===k&&(p.transform=z.getSuggestiveRotation(n,p.x,p.y)),r&&t[k].hide(),t[k].animateWith(f,c,p,d,h,B);g.graphics.element&&(e.element=e.element.concat(g.graphics.element));g.graphics.label&&(e.label=
e.label.concat(g.graphics.label))}a.pool=e;l&&this.setMaxMin()},getAxisValuePadding:function(){return{left:.5,right:.5}},manageSpace:function(){var b=this.config||(this.config={}),e=this.chart,g=e.config.rotatevalues,l=e.components.xAxis[0],h=e.components.yAxis[0],d=e.config.dataLabelStyle,f=(this.components||{}).data||[],c=b.leftMostData||f[0],f=b.rightMostData||f[f.length-1],k,t,m={};k={};var z=0,n=0,r,q=l.getPixel(0),m=e.linkedItems.smartLabel,B={paddingLeft:0,paddingRight:0};k=0;var u=this.groupManager,
u="column"===this.type&&u.getDataSetPosition(this),K=this.getAxisValuePadding(),v=b.topMostData,b=b.bottomMostData;c&&(c=c.config,r=c.showValue,t=c&&c.anchorProps||{},r&&(k=c.displayValue,m.useEllipsesOnOverflow(e.config.useEllipsesWhenOverflow),m.setStyle(d),k=m.getOriSize(k),k=g?k.height:k.width),null!==c.setValue&&(z=a(t.radius,0)+a(t.borderThickness,0)/2,n=(k||0)/2-(l.getPixel(K.left)-q)-(u&&u.xPosOffset+u.columnWidth/2||0),0>n&&(n=0)),B.paddingLeft=p(z,n));f&&(c=f.config,r=c.showValue,t=c&&c.anchorProps||
{},r&&!g&&(k=c.displayValue,m.setStyle(d),m=m.getOriSize(k),k=g?m.height:m.width),null!==c.setValue&&(z=a(t.radius,0)+a(t.borderThickness,0)/2,n=(k||0)/2-(l.getPixel(K.right)-q)+(u&&u.xPosOffset+u.columnWidth/2||0),0>n&&(n=0)),B.paddingRight=p(z,n));v&&(t=(c=v.config)&&c.anchorProps||{},null!==c.setValue&&(z=a(t.radius,0)+a(t.borderThickness,0)/2,n=Math.max(z-(h.getPixel(c.setValue.y)-h.getPixel(h.getLimit().max)),0)),B.paddingTop=n);b&&(t=(c=b.config)&&c.anchorProps||{},null!==c.setValue&&(z=a(t.radius,
0)+a(t.borderThickness,0)/2,n=Math.max(z-(h.getPixel(h.getLimit().min)-h.getPixel(c.setValue.y)),0)),B.paddingBottom=n);return B},getPlotClickFn:function(a){return function(b){U.call(this,a,b)}},getEventArgs:function(){return{datasetName:(this.JSONData||{}).seriesname,datasetIndex:this.index,id:(this.config||{}).userID,visible:this.visible}},rolloverResponseSetter:function(a,b){var e=b.jsonData.chart;return function(g){var h=this.data("hoverEnabled"),d=this.data("draged"),f=this.data("dataset");!0!==
d&&(f._hoverFunc(a,"DataPlotRollOver",h,e),U.call(this,b,g,"DataPlotRollOver"))}},rolloutResponseSetter:function(a,b){var e=b.jsonData.chart;return function(g){var h=this.data("hoverEnabled"),d=this.data("draged"),f=this.data("dataset");!0!==d&&(f._hoverFunc(a,"DataPlotRollOut",h,e),U.call(this,b,g,"DataPlotRollOut"))}}},void 0,{showvalues:void 0,includeinlegend:1,plotfillalpha:void 0,plotfillangle:void 0,ratio:void 0}])}]);Q.register("module",["private","modules.renderer.js-dataset-realtimecolumn",
function(){Q.register("component",["dataset","realtimecolumn",{_realTimeConfigure:function(b){var v=this.chart,J=this.components.data,C=[],H=v.config.realTimeConfig.numDisplaySets;b=b?0:v.components.xAxis[0].getCategoryLen();b<H?(C.length=H-b,this.components.data=C.concat(J)):b>H&&this.components.data.splice(H,b-H)}},"Column"])}]);Q.register("module",["private","modules.renderer.js-dataset-scrollcolumn2d",function(){Q.register("component",["dataset","scrollcolumn2d",{},"Column"])}]);Q.register("module",
["private","modules.renderer.js-dataset-column3d",function(){var b=this.window,v=this.hcLib,b=/msie/i.test(b.navigator.userAgent)&&!b.opera,J=v.BLANKSTRING,C="rgba(192,192,192,"+(b?.002:1E-6)+")",b=v.TOUCH_THRESHOLD_PIXELS,H=v.CLICK_THRESHOLD_PIXELS,A=v.pluck,u=v.pluckNumber,a=v.toRaphaelColor,O=v.hasTouch?b:H,b=v.preDefStr,q=b.noneStr,M=b.configStr,U=b.animationObjStr,N=b.showHoverEffectStr,E=b.columnStr,r=b.shadowStr,k=b.visibleStr,m=b.hiddenStr,n=b.negativeValueStr,L=b.positiveValueStr,g=b.zeroPlaneStr,
l=b.categoryPlotsStr,B=b.setRolloverAttrStr,e=b.setRolloutAttrStr,V=b.strokeWidthStr,p=b.strokeDashStr,T=v.graphics.getCubePathOutline,b=Math,K=b.min,t=b.abs,Z=b.round,P=v.schedular;Q.register("component",["dataset","Column3D",{draw:function(){var b=this,z=b.JSONData,R=b.chart.jsonData.chart,w=b.config,F=b.groupManager,Z=b.index,h=b.chart.config.categories,d,f,c=b.chart,D=c.getJobList(),G=c.config,H=c.components.paper,Ra=c.components.xAxis[0],Ia=b.yAxis,sa=c.graphics.columnGroup,wa=c.config.isstacked,
ca,ma,qa=v.parseUnsafeString,va=v.getValidValue,Q=G.showtooltip,ra=c.get(M,U),ka=ra.animType,na=ra.animObj,da=ra.dummyObj,ra=ra.duration,oa=Ra.getAxisPosition(0),Y=Ra.getAxisPosition(1),Y=w.groupMaxWidth=Y-oa,za=w.definedGroupPadding,fa=G.plotspacepercent/200,Aa=F.getDataSetPosition(b),oa=F.stackSumValue[b.positionIndex],ua=G.maxcolwidth,Y=(1-.01*za)*Y||K(Y*(1-2*fa),1*ua),Y=u(Aa.columnWidth,Y/1),ia,za=Aa.xPosOffset||0,Aa=Aa.height,xa,fa=b.components.data,ja,ya,W,Ma,ea,ga,la;W={};ea={};ua=Ia.getLimit();
ya=ua.max;var Ca=ua.min,ua=Ia.getAxisBase(),Ha=Ia.yBasePos=Ia.getAxisPosition(ua),pa=0,La=G.plotborderthickness;ga=b.graphics.container;var Ja=b.graphics.dataLabelContainer,Fa=b.graphics.shadowContainer,ta,Ka,Ea,Da,Ga,Na=w.use3dlighting,Ua,Pa,Sa,ab,Xa=!0,Za=!1,bb=b.visible,eb=(b.components.removeDataArr||[]).length,Va=b.components.pool||[],Ya=G.showplotborder,$a=G.plothovereffect,Ta,kb,hb,ib=function(){var a,c;if(!1===b.visible&&(!1===b._conatinerHidden||void 0===b._conatinerHidden)){a=b.components.data;
for(c=0;c<d;c++)a[c]&&a[c].graphics&&a[c].graphics.element&&a[c].graphics.element.attr("visibility",m),a[c]&&a[c].graphics&&a[c].graphics.hotElement&&a[c].graphics.hotElement.attr("visibility",m);Fa.hide();Ja&&Ja.hide();b._conatinerHidden=!0}},ob=function(){F.drawSumValueFlag&&F.drawSumValue()};ga||(ga=b.graphics.container=c.datasetLayers=c.datasetLayers||H.group(E,sa));Fa||(Fa=b.graphics.shadowContainer=H.group(r,sa).toBack());c._cacheObj||(c._cacheObj={});!c._cacheObj.elemAttr&&(c._cacheObj.elemAttr=
{});Ta=c._cacheObj.elemAttr;!c._cacheObj.zeroplaneAttr&&(c._cacheObj.zeroplaneAttr={});la=c._cacheObj.zeroplaneAttr;!c._cacheObj.cubepathObj&&(c._cacheObj.cubepathObj={});kb=c._cacheObj.cubepathObj;d=Ra.getCategoryLen();if(bb)for(f=0;f<d;f++)fa[f].graphics&&fa[f].graphics.element&&fa[f].graphics.element.attr("visibility",k),fa[f].graphics&&fa[f].graphics.hotElement&&fa[f].graphics.hotElement.attr("visibility",k);sa=ga.negative=ga.negative||H.group(n,ga);Ka=ga.column=ga.column||H.group(L,ga);0>Ca&&
0<=ya?(f=ga.zeroPlane,la.fill=[G.zeroPlaneColor,!Na],la.stroke=G.zeroPlaneBorderColor||"none",la[V]=G.zeroPlaneShowBorder?1:0,f?(f=[c.config.canvasLeft-10,Ha+10,c.config.canvasWidth,1,10,10,f],F.graphics.zeroplane.show(),F.graphics.zeroplane._.cubetop.show(),F.graphics.zeroplane._.cubeside.show(),kb.cubepath=f,F.graphics.zeroplane.animateWith(da,na,kb,ra,ka),F.graphics.zeroplane.attr(la)):(f=ga.zeroPlane=H.group(g,ga).insertBefore(Ka),!F.graphics&&(F.graphics={}),F.graphics.zeroplane=H.cubepath(c.config.canvasLeft-
10,Ha+10,c.config.canvasWidth,1,10,10,f).attr(la))):F.graphics&&F.graphics.zeroplane&&F.graphics.zeroplane.hide()&&F.graphics.zeroplane._.cubetop.hide()&&F.graphics.zeroplane._.cubeside.hide();(Ea=sa.data(l))||(sa.data(l,Array(d)),Ea=sa.data(l));(Da=Ka.data(l))||(Ka.data(l,Array(d)),Da=Ka.data(l));for(f=0;f<d;f++)if(ga=f,W=(la=(G=fa[f])&&G.config)&&la.setValue,void 0!==G&&void 0!==W&&null!==W){hb=G.trackerConfig={};!G||void 0!==W&&null!==W||(G.graphics&&G.graphics.element&&(G.graphics.element.hide(),
G.graphics.element._.cubeside.hide(),G.graphics.element._.cubetop.hide()),G.graphics&&G.graphics.hotElement&&G.graphics.hotElement.hide());Ea[f]=Ea[f]||H.group(sa);Da[f]=Da[f]||H.group(Ka);G.graphics||(fa[f].graphics={});ya=la.setLink;Ca=la.colorArr;ea=la.displayValue;ca=0<=W?la.previousPositiveY:la.previousNegativeY;xa=va(qa(A(la.origToolText,z.plottooltext,R.plottooltext)));wa&&(ca=b._parseValues(f,ca,oa[f],xa),W=la.value);ia=Ia.getAxisPosition(ca||ua);c=Ra.getAxisPosition(f)+za;0!==Aa?(ma=Ia.getAxisPosition(W+
(ca||0)),ca=t(ia-ma)):(ca=0,ma=ia);ma=K(ma,ia);ia=Y;ta=(hb.isNegative=Ga=0>W)?Ea:Da;xa=la.finalTooltext=!1!==la.toolText&&la.toolText+(xa?"":la.toolTipValue);hb.eventArgs={index:f,link:ya,value:W,displayValue:ea,categoryLabel:h[f].label,toolText:xa?xa:"",id:J,datasetIndex:Z,datasetName:z.seriesname,visible:bb};Ma=hb.eventArgs;W=la.setRolloutAttr;ea=la.setRolloverAttr;ra||(Ha=ma,pa=ca);Ua=c;Pa=ma;Sa=ia;ab=ca;c-=10;ma+=10;G.graphics.element?(Za=!0,ja=G.graphics.element,ta[f].appendChild(ja._.cubetop),
ta[f].appendChild(ja._.cubeside),ta[f].appendChild(ja),kb.cubepath=[c,!0===b.visible||0===Aa||wa?ma:ja.attrs.cubepath[1],ia,!0===b.visible||0===Aa||wa?ca:ja.attrs.cubepath[3],10,10],ja.animateWith(da,na,kb,ra,ka,Xa&&ib),Ta.fill=[a(Ca[0]),!Na],Ta.ishot=!0,Ta.stroke=Ya&&a(Ca[1]),Ta[V]=Ya?La:0,Ta[p]=la.plotBorderDashStyle,Ta.cursor=ya?"pointer":J,Ta.visibility&&delete Ta.visibility,Ta.cubepath&&delete Ta.cubepath,ja.attr(Ta),la.elemCreated=!1):(Va.element&&Va.element.length?(ja=G.graphics.element=Va.element.shift(),
ta[f].appendChild(ja._.cubetop),ta[f].appendChild(ja._.cubeside),ta[f].appendChild(ja),ja.show()):ja=G.graphics.element=H.cubepath(ta[f]),Ta.cubepath=[c,ra?Ha+10:ma,ia,ra?0:pa,10,10],Ta.fill=[a(Ca[0]),!Na],Ta.ishot=!0,Ta.stroke=Ya&&a(Ca[1]),Ta[V]=Ya?La:0,Ta[p]=la.plotBorderDashStyle,Ta.cursor=ya?"pointer":J,Ta.visibility=bb?k:m,ja.attr(Ta),kb.cubepath=[c,ma,ia,ca,10,10],ja.animateWith(da,na,kb,ra,ka,Xa&&ob),Xa=!1,G._newXPos=c,la.elemCreated=!0);ja.shadow(la.shadow,Fa).data("BBox",{height:pa,width:ia,
x:c,y:ma});if(ya||Q)ca<O&&(ma-=(O-ca)/2,ca=O),hb.attr={path:T([c,ma,ia,ca,10,10]),cursor:ya?"pointer":J,stroke:La&&C||q,"stroke-width":Ya?w.plotBorderThickness:0,fill:C,ishot:!0};wa&&Ga&&ja.toBack();G._xPos=Ua;G._yPos=Pa;G._height=ab;G._width=Sa;ja.data("eventArgs",Ma).data("groupId",ga).data(N,$a).data(B,ea).data(e,W).tooltip(xa);ja._.cubetop.data("eventArgs",Ma).data("groupId",ga).data(N,$a).data(B,ea).data(e,W).tooltip(xa);ja._.cubeside.data("eventArgs",Ma).data("groupId",ga).data(N,$a).data(B,
ea).data(e,W).tooltip(xa)}b.drawn?b.drawLabel():D.labelDrawID.push(P.addJob(function(){b.drawLabel()},v.priorityList.label));b.drawn=!0;F.drawSumValueFlag&&Za&&F.drawSumValueFlag&&F.drawSumValue();eb&&b.remove();b.chart.config.canvasBottom+=10},_checkPointerOverColumn:function(a,b,e){var g=this.chart.config,l=g.plotborderthickness,k=g.showplotborder,h=this.components.data,d=h[a],f,c,t;if(d&&(f=d.config.setValue,!g.isstacked||!(0>f&&this.valueLook||0<f&&!this.valueLook))&&(l=k?l:0,t=l/2,t=0===t%2?
t+1:Z(t),null!==f&&(f=d._xPos-10,k=d._width+10,g=d._yPos,d=d._height+10,c=b-f+t,t=e-g+t,l=(l=0<=c&&c<=k+l&&0<=t&&t<=d+l?0<b+e-(f+g)-10:!1)?0>b+e-(f+g+k+d)+10:!1)))return{pointIndex:a,hovered:l,pointObj:h[a]}},_getHoveredPlot:function(a,b){var e=this.chart,g=e.config,l=e.components.canvas.config,l=Math.max(l.canvasPaddingLeft,l.canvasPadding),k=g.canvasLeft,g=g.canvasTop,e=e.components.xAxis[0].getValue(e.isBar?b-g-l:a-k-l),g=Math.round(e);return 0<g-e?this._checkPointerOverColumn(g,a,b)||this._checkPointerOverColumn(g-
1,a,b):this._checkPointerOverColumn(g+1,a,b)||this._checkPointerOverColumn(g,a,b)},remove:function(){var a=this,b=a.components,e=b.removeDataArr,g=b.pool||(b.pool={element:[],hotElement:[],label:[]}),l=e.length,k=a.config.groupMaxWidth,h,d=a.maxminFlag,f,c,t;(function(){return!1===a.endPosition?function(){return{x:h._xPos-k*l}}:!0===a.endPosition?function(){return{x:h._xPos+k*l||0}}:function(){return{width:0}}})();for(t=0;t<l;t++)if(h=e[0],e.splice(0,1),h&&h.graphics){c=h.graphics;for(f in c)c[f].hide();
h.graphics.element&&(g.element=g.element.concat(h.graphics.element));h.graphics.hotElement&&(g.hotElement=g.hotElement.concat(h.graphics.hotElement));h.graphics.label&&(g.label=g.label.concat(h.graphics.label))}b.pool=g;d&&a.setMaxMin()}},"Column",{use3dlighting:void 0}])}]);Q.register("module",["private","modules.renderer.js-dataset-waterfall2d",function(){var b=this.window,v=this.hcLib,b=/msie/i.test(b.navigator.userAgent)&&!b.opera,J=v.BLANKSTRING,C="rgba(192,192,192,"+(b?.002:1E-6)+")",b=v.TOUCH_THRESHOLD_PIXELS,
H=v.CLICK_THRESHOLD_PIXELS,A=v.pluck,u=v.pluckNumber,a=v.toRaphaelColor,O=v.graphics.convertColor,q=v.parseUnsafeString,M=v.getDefinedColor,U=v.HUNDREDSTRING,N=v.hasTouch?b:H,E=v.getCrispValues,r=v.getValidValue,k=v.getFirstValue,b=v.preDefStr,m=b.showHoverEffectStr,n=b.setRolloverAttrStr,L=b.setRolloutAttrStr,g=b.elementStr,l=b.hotElementStr,b=Math,B=b.round,e=b.min,V=b.max,p=b.abs,T=v.graphics.getLightColor;Q.register("component",["dataset","Waterfall2D",{configure:function(){var b,g,l=this.chart,
m=l.components;b=this.config;g=this.JSONData;var p=g.data,z=l.config.categories,z=e(z&&z.length,p&&p.length),n=l.jsonData.chart,w=m.colorManager,q,B=w.getPlotColor(this.index||this.positionIndex),h=u(g.dashed,n.plotborderdashed),d=u(n.useplotgradientcolor,1),f=u(n.showtooltip,1),c=v.parseUnsafeString,D=c(n.yaxisname),G=c(n.xaxisname),L=c(A(n.tooltipsepchar,", ")),E=v.parseTooltext,C,H,N,ca,ma,Q,va,ha,ra,ka,na,da,oa,Y,za,fa,Aa,ua,ia,xa,ja,ya,W,Ma,ea,ga,la,Ca=v.getDashStyle,Ha=this.components.data,
pa=m.numberFormatter,La;q={};q=q.dataObj||(q.dataObj={});La=q.chart||(q.chart={});Aa=A(n.connectorthickness,1);var Ja,Fa=-Infinity,ta=Infinity,Ka=0,Ea=0,Da=0,Ga,Na,Ua,Pa;this.visible=1===u(this.JSONData.visible,!Number(this.JSONData.initiallyhidden),1);q=b.showplotborder=u(n.showplotborder,1);b.plotBorderThickness=ma=q?u(n.plotborderthickness,1):0;b.isRoundEdges=Q=u(n.useroundedges,0);b.plotBorderAlpha=na=q?A(n.plotborderalpha,N,U):0;b.plotBorderColor=da=A(n.plotbordercolor,w.getColor("plotBorderColor").split(",")[0]);
b.plotgradientcolor=ka=d?M(n.plotgradientcolor,w.getColor("plotGradientColor")):J;b.plotDashLen=d=u(n.plotborderdashlen,6);b.plotDashGap=ca=u(n.plotborderdashgap,3);b.use3DLighting=u(n.use3dlighting,1);b.showSum=Ja=u(n.showsumatend,1);b.plotColor=A(g.color,B);b.plotfillAngle=ha=u(360-n.plotfillangle,90);b.showShadow=Q?u(n.showshadow,1):u(n.showshadow,w.getColor("showShadow"));b.showHoverEffect=va=u(n.plothovereffect,n.showhovereffect,void 0);b.plotFillAlpha=A(g.alpha,n.plotfillalpha,U);b.plotRadius=
u(n.useRoundEdges,b.isRoundEdges?1:0);b.plotFillRatio=ra=A(g.ratio,n.plotfillratio);b.plotBorderDashStyle=oa=h?Ca(d,ca,ma):"none";b.showValues=u(g.showvalues,n.showvalues,1);b.valuePadding=u(n.valuepadding,2);b.enableAnimation=B=u(n.animation,n.defaultanimation,1);b.animation=B?{duration:1E3*u(n.animationduration,1)}:!1;La.transposeAnimation=b.transposeAnimation=u(n.transposeanimation,La.transposeAnimation,B);b.transposeAnimDuration=1E3*u(n.transposeanimduration,.2);b.showTooltip=u(n.showtooltip,
1);b.stack100Percent=u(l.stack100percent,n.stack100percent,0);b.definedGroupPadding=V(u(n.plotspacepercent),0);b.plotSpacePercent=V(u(n.plotspacepercent,20)%100,0);b.maxColWidth=u(n.maxcolwidth,50);b.showPercentValues=u(n.showpercentvalues,0);b.showPercentInToolTip=u(n.showpercentintooltip,0);b.plotPaddingPercent=u(n.plotpaddingpercent);b.rotateValues=u(n.rotatevalues)?270:0;b.placeValuesInside=u(n.placevaluesinside,0);b.parentYAxis=La="s"===A(g.parentyaxis&&g.parentyaxis.toLowerCase(),"p")?1:0;Ha||
(Ha=this.components.data=[]);b.zLine=Na={step:!0,data:[],dashStyle:"1"===n.connectordashed?Ca(u(n.connectordashlen,2),u(n.connectordashgap,2),Aa):"none",useForwardSteps:!0,color:O(A(n.connectorcolor,"000000"),A(n.connectoralpha,100)),lineWidth:Aa};for(l=0;l<z;l+=1)Y=p[l],fa=pa.getCleanValue(Y.value),H=u(Y.issum,0),Y.vline||H?delete Y._value:(Ka+=fa,Y._value=fa);Ga=pa.dataLabels(Ka);Ja&&(Ja=!0,z+=1,Ua={label:k(n.sumlabel,"Total"),_value:Ka,value:Ka,issum:1,cumulative:1});for(Pa=l=0;l<z;l+=1)Y=p[l],
Aa=(fa=Ha[l])&&fa.config,fa||(fa=Ha[l]={graphics:{}}),fa.config||(Aa=Ha[l].config={}),!Y&&Ja&&(Y=p[l]=Ua),B=A(Y.color,w.getPlotColor(l)),fa.vline||(fa=Y._value,delete Y._value,Aa.issum=H=u(Y.issum,0),N=Aa.isCumulative=u(Y.cumulative,1),H?(fa=N?Ea:Ea===Da?Ea:Ea-Da,Aa.lastComTotal=Da,Da=Ea,Na.data.push({y:null,x:Pa-.5})):Ea+=fa,Fa=V(Fa,Ea),ta=e(ta,Ea),Aa.total=Ea,H=Aa.showLabel=u(Y.showlabel,n.showlabels,1),H=Aa.dataLabel=c(H?k(Y.label,Y.name):J),0<fa?(ua=A(Y.color,n.positivecolor,B),0!==va&&(ia=A(Y.positivehovercolor,
n.positivehovercolor,n.plotfillhovercolor,n.columnhovercolor,ua))):(ua=A(Y.color,n.negativecolor,B),0!==va&&(ia=A(Y.negativehovercolor,n.negativehovercolor,n.plotfillhovercolor,n.columnhovercolor,ua))),N=A(Y.alpha,b.plotFillAlpha),C=u(Y.dashed,h),xa=u(Y.dashlen,d),ja=ca=u(Y.dashgap,ca),Aa.showValue=u(Y.showvalue,b.showValues),Aa.setValue=za=fa,Aa.setLink=A(Y.link),Aa.toolTipValue=za=pa.dataLabels(za,La),Aa.setDisplayValue=ya=r(c(Y.displayvalue)),Aa.displayValue=A(ya,za),Aa.plotBorderDashStyle=C=1===
C?Ca(xa,ja,ma):0===C?"none":oa,Aa.colorArr=ua=v.graphics.getColumnColor(ua+","+ka.replace(/,+?$/,""),N,ra,ha,Q,da,na.toString(),0,!1),0!==va&&(xa=A(Y.alpha,Y.hoveralpha,g.hoveralpha,n.plotfillhoveralpha,n.columnhoveralpha,N),ja=A(Y.hovergradientcolor,g.hovergradientcolor,n.plothovergradientcolor,ka),!ja&&(ja=""),za=A(Y.hoverratio,g.hoverratio,Y.ratio,n.plothoverratio,ra),ya=u(360-Y.hoverangle,360-g.hoverangle,360-n.plothoverangle,ha),W=A(Y.borderhovercolor,g.borderhovercolor,n.plotborderhovercolor,
da),Ma=A(Y.borderhoveralpha,g.borderhoveralpha,n.plotborderhoveralpha,na,N),N=u(Y.borderhoverthickness,g.borderhoverthickness,n.plotborderhoverthickness,ma),ea=u(Y.borderhoverdashed,g.borderhoverdashed,n.plotborderhoverdashed),ga=u(Y.borderhoverdashgap,g.borderhoverdashgap,n.plotborderhoverdashgap,d),la=u(Y.borderhoverdashlen,g.borderhoverdashlen,n.plotborderhoverdashlen,ca),ea=ea?Ca(la,ga,N):C,1===va&&ia===B&&(ia=T(ia,70)),B=v.graphics.getColumnColor(ia+","+ja,xa,za,ya,Q,W,Ma.toString(),0,!1),Aa.setRolloutAttr=
{fill:a(ua[0]),stroke:q&&a(ua[1]),"stroke-width":ma,"stroke-dasharray":C},Aa.setRolloverAttr={fill:a(B[0]),stroke:q&&a(B[1]),"stroke-width":N,"stroke-dasharray":ea}),C=Aa.toolTipValue,B=r(c(A(Y.tooltext,g.plottooltext,n.plottooltext))),f?void 0!==B?(N=[1,2,3,5,6,7,20,21,24,25],H={formattedValue:C,label:H,yaxisName:D,xaxisName:G,cumulativeValue:Ea,cumulativeDataValue:pa.dataLabels(Ea),sum:Ga,unformattedSum:Ka},B=E(B,N,H,Y,n,g)):B=null===C?!1:H!==J?H+L+C:C:B=!1,Na.data.push({y:null===fa?null:Ea,x:Pa}),
Pa+=1,Aa.toolText=B,Aa.setTooltext=B);b.maxValue=Fa;b.minValue=ta;b.connectNullData=u(n.connectnulldata,0);b.showConnectors=u(n.showconnectors,1);b=g.catData;for(l=0;l<b.length;l+=1)g=b[l],p.splice(g.index,0,g.data);m.xAxis[0].setCategory(p);this.maxminFlag=!1},draw:function(){var b,g,l,k=this,E=k.chart,z=k.chart.jsonData.chart,R=E.config.canvasBottom;l=E.graphics.datasetGroup;var w=k.JSONData,F=k.config,V=k.groupManager,h=k.positionIndex,d=k.chart.config.categories,f=w.data,c=d&&d.length,D=f&&f.length,
G,f=k.visible,T=E.components,H=T.paper,J=T.xAxis[0],M=T.yAxis[0],O=k.components,ca,U,Q,va=E.graphics,ha=v.Raphael,ra=F.showTooltip,ka=J.getAxisPosition(0),ka=J.getAxisPosition(1)-ka,na=F.definedGroupPadding,da=F.plotSpacePercent/200,oa=V.getDataSetPosition(k),Y=F.maxColWidth,ka=(1-.01*na)*ka||e(ka*(1-2*da),1*Y),ka=u(oa.columnWidth,ka/1),za,na=oa.xPosOffset||0,oa=oa.height,fa,Aa,O=O.data,ua,ia,da=M.getAxisBase(),Y=M.yBasePos=M.getAxisPosition(da),xa=0,ja=F.showShadow,ya=F.plotBorderThickness,W=F.plotRadius,
Ma=k.graphics.container,ea=k.graphics.trackerContainer,ga=k.graphics.dataLabelContainer,la=k.graphics.shadowContainer;ua=va.trackerGroup;var Ca,va=!0,Ha=!1,pa=k.pool||(k.pool={}),La=function(){!1!==k.visible||!1!==k._conatinerHidden&&void 0!==k._conatinerHidden||(Ma.hide(),ea.hide(),la.hide(),ga&&ga.hide(),k._conatinerHidden=!0)},Ja=function(){k.drawLabel()},Fa=E.get("config","animationObj"),ta=Fa.duration||0,Ka=Fa.dummyObj,Ea=Fa.animObj,Fa=Fa.animType,Da,T=T.canvas.config.clip["clip-canvas"].slice(0);
Ma||(Ma=k.graphics.container=H.group("columns",l),f||Ma.hide());Ma.attr("clip-rect",T);ea||(ea=k.graphics.trackerContainer=H.group("col-hot",ua),f||ea.hide());la||(la=k.graphics.shadowContainer=H.group("shadow",l).toBack(),f||la.hide());F.showConnectors&&k.drawLine();F=e(c,D);for(c=0;c<F;c++)if(Da=(D=O[c])&&(D.trackerConfig={}),ia=D&&D.config,T=(l=D&&D.graphics)&&l.element,ia)(G=ia.setValue,ca=0<=G,null===G)?T&&T.hide():(ua=ia.setLink,g=ia.colorArr,D.graphics||(O[c].graphics={}),b=ia.displayValue,
r(q(A(ia.origToolText,w.plottooltext,z.plottooltext))),U=ca?ia.previousPositiveY:ia.previousNegativeY,ia.issum?ia.isCumulative||(U=ia.lastComTotal):U=O[c-1]&&O[c-1].config.total,za=M.getAxisPosition(U||da),ca=J.getAxisPosition(c)+na,0!==oa?(U=M.getAxisPosition(G+(U||0)),fa=p(za-U)):(fa=0,U=za),U=e(U,za),B(U+fa)>=R&&(fa+=ya/2),V.isCrisp?(Q=ha.crispBound(ca,U,ka,fa,ya),ca=Q.x,U=Q.y,za=Q.width,fa=Q.height):za=ka,Aa=ia.finalTooltext=ia.toolText,Ca=ia.plotBorderDashStyle,Da.eventArgs={index:c,link:ua,
value:G,displayValue:b,categoryLabel:d[c].label,toolText:Aa,id:"",datasetIndex:h,datasetName:w.seriesname,visible:f,setRolloutAttr:ia.setRolloutAttr,setRolloverAttr:ia.setRolloverAttr},ta||(Y=U,xa=fa),G={ishot:!ra,fill:a(g[0]),stroke:a(g[1]),"stroke-width":ya,"stroke-linejoin":"miter",visibility:f},g={x:ca,y:Y,width:za,height:xa||1,r:W,"stroke-dasharray":Ca},D._xPos=ca,D._yPos=U,D._height=fa,D._width=za,b=!1,T?(Ha=!0,g.y=U,g.height=fa||1,T.attr(G).animateWith(Ka,Ea,g,ta,Fa,va&&La)):(pa.element&&pa.element.length?
T=l.element=pa.element.shift():(T=l.element=H.rect(Ma),b=!0),T.show().attr(G).attr(g),ta?(T.animateWith(Ka,Ea,{y:U,height:fa||1},ta,Fa,va&&Ja),va=!1):Ha=!0),T.shadow({opacity:ja},la).data("BBox",Q),ua||ra?(fa<N&&(U-=(N-fa)/2,fa=N),Da.attr={x:ca,y:U,width:za,height:fa,r:W,cursor:ua?"pointer":"",stroke:C,"stroke-width":ya,fill:C,ishot:!0,visibility:f}):b&&k.attachCallBack.call(T,k,E,D),E.config.enablemousetracking&&T.data("eventArgs",Da.eventArgs).data(m,!0).data(n,ia.setRolloverAttr||{}).data(L,ia.setRolloutAttr||
{}));Ha&&k.drawLabel()},attachCallBack:function(a,b,e){this.click(a.getPlotClickFn(b)).hover(a.rolloverResponseSetter(e,b),a.rolloutResponseSetter(e,b))},drawLine:function(){var a=this.chart,b=a.components,g=a.graphics,l=this.config,k=b.paper,m,p,n=b.xAxis[0],b=b.yAxis[0],r=b.getAxisBase();m=b.getAxisPosition(r);var r=this.graphics.lineContainer,q=l.definedGroupPadding,h=l.plotSpacePercent/200,d=n.getAxisPosition(0),d=n.getAxisPosition(1)-d,f=l.maxColWidth,q=((1-.01*q)*d||e(d*(1-2*h),1*f))/2,c=l.zLine,
l=l.connectNullData,h=c.data,d=h.length,f=this.graphics,B=c.dashStyle,v=c.color,c=c.lineWidth,L,A=f.zLine,C=null,V=[],T=[],H=a.get("config","animationObj"),a=H.duration||0,J=H.dummyObj,N=H.animObj,H=H.animType,g=g.datalabelsGroup;p=f.dataLabelContainer;p||(p=this.graphics.dataLabelContainer=k.group("datalabel",g));r||(r=f.lineContainer=k.group("line-connector",p));b.yBasePos=m;for(g=0;g<d;g+=1)p=h[g],m=p.y,null===m?(T.length=0,0===l&&(C=null)):(p=u(p.x,g),m=b.getAxisPosition(m),p=n.getAxisPosition(p),
p=E(p,c,c).position,m=E(m,c,c).position,null!==C?(T.length&&(V=V.concat(T),T.length=0),V.push("M",L,C,"m",-q,0,"H",p,"h",q,"m",0,m-C)):T.push("M",p,m),L=p,C=m);A||(A=f.zLine=k.path(r).attr({path:V,"stroke-linecap":"round","stroke-opacity":0}));A.animateWith(J,N,{path:V,"stroke-opacity":1,"stroke-dasharray":B,stroke:v,"stroke-linejoin":2<=c?"round":"miter","stroke-width":c},a,H)},hidingPosition:function(){return function(){return{width:0}}},_hoverFunc:function(a,b,e){var k=a.graphics[l]||a.graphics[g];
b="DataPlotRollOver"===b?k.data(n):k.data(L);e&&a.graphics[g].attr(b)}},"Column"])}]);Q.register("module",["private","modules.renderer.js-dataset-bar2d",function(){var b=this.window,v=this.hcLib,b=/msie/i.test(b.navigator.userAgent)&&!b.opera,J=v.BLANKSTRING,C="rgba(192,192,192,"+(b?.002:1E-6)+")",b=v.TOUCH_THRESHOLD_PIXELS,H=v.CLICK_THRESHOLD_PIXELS,A=v.pluck,u=v.pluckNumber,a=v.toRaphaelColor,O=v.hasTouch?b:H,b=v.preDefStr,q=b.configStr,M=b.animationObjStr,U=b.showHoverEffectStr,N=b.barStr,E=b.shadowStr,
r=b.visibleStr,k=b.setRolloverAttrStr,m=b.setRolloutAttrStr,n=b.dataLabelStr,L=b.miterStr,g=b.POSITION_MIDDLE,l=b.POSITION_START,B=b.POSITION_END,b=Math,e=b.min,V=b.max,p=v.schedular;Q.register("component",["dataset","Bar2D",{type:"bar2d",draw:function(){var b=this,g=b.JSONData,l=b.chart.jsonData.chart,n=b.config,B=n.legendInteractivity,V=b.groupManager,z=b.index,R=g.data,w=b.chart.config.categories,F,H,h,d,f=b.chart,c=f.getJobList(),D=f.config,G=f.components.paper,aa=f.components.xAxis[0],Q=f.components.yAxis[0];
F=f.graphics.columnGroup;var Ia=f.config.isstacked,sa,wa,ca,ma=v.parseUnsafeString,qa=v.getValidValue,va=v.Raphael,ha=D.showtooltip,ra=aa.getAxisPosition(0),ka=aa.getAxisPosition(1),na=V.config.groupMaxWidth=n.groupMaxWidth=ka-ra,da=n.definedGroupPadding,oa=D.plotspacepercent/200,Y=V.getDataSetPosition(b),ra=V.stackSumValue[b.positionIndex],za=D.maxcolwidth,fa=f.get(q,M),ka=fa.animType,Aa=fa.animObj,ua=fa.dummyObj,fa=fa.duration,na=(1-.01*da)*na||e(na*(1-2*oa),1*za),na=u(Y.columnWidth,na/1),ia,da=
Y.xPosOffset||0,Y=Y.height,xa,oa=b.components.data,ja,ya,W,Ma,ea,za=Q.getLimit(),ga=za.min,za=0<za.max&&0>ga,ga=Q.getAxisBase(),la=Q.yBasePos=Q.getAxisPosition(ga),Ca,Ha=0,pa=D.plotborderthickness,La=pa/2,Ja=D.useroundedges,Fa=b.graphics.container,ta=b.graphics.dataLabelContainer,Ka=b.graphics.shadowContainer,Ea,Da=b.visible,Ga=!0,Na=!1,Ua=(b.components.removeDataArr||[]).length,Pa=b.components.pool||[],Sa=D.showplotborder,ab=D.plothovereffect,Xa,n=n.isSkippedData,Za,bb,eb=b.drawn,Va=function(){!1!==
b.visible||!1!==b._conatinerHidden&&void 0!==b._conatinerHidden||(Fa.hide(),Ka.hide(),ta&&ta.hide(),b._conatinerHidden=!0)},Ya=function(){V.drawSumValueFlag&&V.drawSumValue()};Fa||(Fa=b.graphics.container=G.group(N,F),Da||Fa.hide());Ka||(Ka=b.graphics.shadowContainer=G.group(E,F).toBack(),Da||Ka.hide());Da&&(Fa.show(),Ka.show());F=aa.getCategoryLen();for(d=0;d<F;d++)if(H=R&&R[d],h=(ea=(ja=oa[d])&&ja.config)&&ea.setValue,W=ea&&ea.isSkipped,void 0===ja||void 0===h||null===h||!0===W)(bb=ja&&ja.graphics)&&
bb.element&&bb.element.hide(),ea&&delete ea.isSkipped;else if(W=ja.graphics&&ja.graphics.element,!(eb&&!1!==n&&B&&(!Da&&!W||Da&&W&&0!==ja._width&&0!==ja._height))){Xa=ja.trackerConfig={};!ja||void 0!==h&&null!==h||ja.graphics&&ja.graphics.hotElement&&ja.graphics.hotElement.hide();W=ea.setLink;Ea=ea.colorArr;xa=0<=h;ja.graphics||(oa[d].graphics={});Ma=ea.displayValue;ia=xa?ea.previousPositiveY:ea.previousNegativeY;ya=qa(ma(A(H.tooltext,g.plottooltext,l.plottooltext)));Ia&&(ia=b._parseValues(d,ia,ra[d],
ya),h=ea.value);Ca=Q.getAxisPosition(ia||ga);H=aa.getAxisPosition(d)+da;0!==Y?(wa=Q.getAxisPosition(h+(ia||0)),sa=Math.abs(Ca-wa)):(sa=0,wa=Ca);wa=Math.min(wa,Ca);0<sa-pa&&0<pa&&(za?Ia?(wa+=La,xa||ia)?xa&&(sa=sa-pa+1,ia&&(wa=wa-pa+1)&&(sa=sa+pa-1)):sa-=pa:(wa+=La,sa-=pa):xa&&(wa-=La));V.isCrisp?(ca=va.crispBound(H,wa,na,sa,pa),H=ca.x,wa=ca.y,ia=ca.width,sa=ca.height):ia=na;xa=ea.finalTooltext=!1!==ea.toolText?ea.toolText+(ya?"":ea.toolTipValue):"";ya=ea.plotBorderDashStyle;Xa.eventArgs={index:d,link:W,
value:h,displayValue:Ma,categoryLabel:w[d].label,toolText:xa?xa:"",id:J,datasetIndex:z,datasetName:g.seriesname,visible:Da};fa||(la=wa,Ha=sa);h={x:la,y:H,width:Ha||1,height:ia,r:Ja,ishot:!ha,fill:a(Ea[0]),stroke:a(Ea[1]),"stroke-width":Sa?pa:0,"stroke-dasharray":ya,"stroke-linejoin":L,visibility:r};ja._xPos=wa;ja._yPos=H;ja._height=ia;ja._width=sa;if(ja.graphics.element){Na=!0;ja=ja.graphics.element;h={x:wa,y:H,height:ia};if(!0===b.visible||0===Y||Ia)h.width=sa;ja.animateWith(ua,Aa,h,fa,ka,Ga&&Va);
ja.attr({ishot:!ha,fill:a(Ea[0]),stroke:a(Ea[1]),"stroke-width":Sa?pa:0,"stroke-dasharray":ya,"stroke-linejoin":L,visibility:r});ea.elemCreated=!1}else Pa.element&&Pa.element.length?(ja=ja.graphics.element=Pa.element.shift(),ja.show()):ja=ja.graphics.element=G.rect(Fa),ja.attr(h),ja.animateWith(ua,Aa,{x:wa,width:sa||1},fa,ka,Ga&&Ya),ea.elemCreated=!0,Ga=!1;ja.shadow(ea.shadow,Ka).data("BBox",ca);if(W||ha)sa<O&&(wa-=(O-sa)/2,sa=O,Za=!0),Xa.attr={x:wa,y:H,width:sa,height:ia,r:Ja,cursor:W?"pointer":
J,stroke:C,"stroke-width":Sa?pa:0,fill:C,ishot:!0,visibility:Da},f.config.enablemousetracking&&ja.data("eventArgs",Xa.eventArgs).data(U,ab).data(k,ea.setRolloverAttr||{}).data(m,ea.setRolloutAttr||{})}Za&&(D.toleranceLeft=5);b.drawn?b.drawLabel():c.labelDrawID.push(p.addJob(function(){b.drawLabel()},v.priorityList.label));b.drawn=!0;V.drawSumValueFlag&&Na&&V.drawSumValueFlag&&V.drawSumValue();Ua&&b.remove()},drawLabel:function(){var a=this.chart,b=a.graphics,k=a.config,m=a.components.canvas.config,
p=a.config.dataLabelStyle,v=this.JSONData.data,z=a.config.categories,L=a.is3D,w=a.config.isstacked,F=z&&z.length,E=v.length,z=this.components.data,h=a.components.paper,d=a.linkedItems.smartLabel,f,c,D=m.yDepth,m=m.xDepth,G=a.components.numberFormatter,A=J,C,H=k.placevaluesinside,N=k.canvasWidth,O=k.canvasLeft,ca,k=k.valuepadding+2,U,Q,va,ha=a.get(q,M),a=ha.duration,ra=ha.animType,ka=ha.dummyObj,ha=ha.animObj,na=this.graphics.dataLabelContainer,da,oa,Y,za=this.components.pool||{};va=this.visible;b=
b.datalabelsGroup;na||(na=this.graphics.dataLabelContainer=h.group(n,b),va||na.hide());va&&na.show();d.setStyle(p);b=F<E?F:E;if(va)for(F=0;F<b;F++)if(Q=(c=(f=z[F])&&f.config)&&c.setValue,void 0===f||void 0===Q||null===Q||!0===c.labelSkip)(Y=f&&f.graphics)&&Y.label&&Y.label.hide(),c&&delete c.labelSkip;else if(E=f.graphics)if(C=v[F],U=f._yPos,va=f._xPos,Q=G.getCleanValue(C.value),C=0>u(Q),ca=f._height,f=f._width,da=w?g:C?H?l:B:H?B:l,A=c.displayValue,oa=E.label,c.showValue&&void 0!==A&&null!==A&&A!==
J&&null!==Q){c={text:A,fill:p.color,"text-bound":[p.backgroundColor,p.borderColor,p.borderThickness,p.borderPadding,p.borderRadius,p.borderDash],"line-height":p.lineHeight,visibility:r};A=d.getOriSize(A);A=A.width;A+=k;oa=k;U+=.5*ca;ca=va+(C?0:f);Q=C?va-O:O+N-(va+f);w?(ca+=.5*(C?f:-f),ca=V(O+.5*A,ca),ca=e(O+N-.5*A,ca),ca-=L?m:0,U+=L?D:0):H?f>=A?(ca+=C?oa:-oa,L&&(U+=D,ca-=m)):A<Q?(ca+=C?-oa:oa,da=C?B:l,L&&C&&(ca-=m)):(C?(ca=va+f+V(A-va-f+O,0)-oa,da=B):(ca=va-V(A-(O+N-va),0)+oa,da=l),L&&(ca-=m,U+=D)):
Q>=A?(ca+=C?-oa:oa,L&&C&&(ca-=m,U+=m)):(ca+=C?oa+A:-(oa+A),L&&(ca-=m,U+=D));if(ca>O+N||ca<O)ca=O+4,da=l;c["text-anchor"]=da;(oa=E.label||za.label&&za.label.shift())?oa.show().animateWith(ka,ha,{x:ca,y:U},a,ra).attr(c):(c.x=ca,c.y=U,E.label=h.text(c,na))}else oa&&oa.hide()},remove:function(){var a=this.components,b=a.removeDataArr,e=a.pool||(a.pool={element:[],hotElement:[],label:[]}),g=b.length,l,k=this.maxminFlag,m,p,n;for(n=0;n<g;n++)if(l=b[0],b.splice(0,1),l&&l.graphics){p=l.graphics;for(m in p)p[m].hide();
l.graphics.element&&(e.element=e.element.concat(l.graphics.element));l.graphics.hotElement&&(e.hotElement=e.hotElement.concat(l.graphics.hotElement));l.graphics.label&&(e.label=e.label.concat(l.graphics.label))}a.pool=e;k&&this.setMaxMin()}},"Column"])}]);Q.register("module",["private","modules.renderer.js-dataset-bar3d",function(){var b=this.window,v=this.hcLib,b=/msie/i.test(b.navigator.userAgent)&&!b.opera,J=v.BLANKSTRING,C="rgba(192,192,192,"+(b?.002:1E-6)+")",b=v.TOUCH_THRESHOLD_PIXELS,H=v.CLICK_THRESHOLD_PIXELS,
A=v.pluck,u=v.pluckNumber,a=v.toRaphaelColor,O=v.hasTouch?b:H,b=v.preDefStr,q=b.noneStr,M=b.configStr,U=b.animationObjStr,N=b.showHoverEffectStr,E=b.shadowStr,r=b.visibleStr,k=b.barStr,m=b.hiddenStr,n=b.negativeValueStr,L=b.positiveValueStr,g=b.zeroPlaneStr,l=b.categoryPlotsStr,B=b.setRolloverAttrStr,e=b.setRolloutAttrStr,V=v.graphics.getCubePathOutline,b=Math,p=b.min,T=b.abs,K=v.schedular;Q.register("component",["dataset","Bar3D",{draw:function(){var b=this,Z=b.JSONData,P=b.chart.jsonData.chart,
S=b.config,z=b.groupManager,R=b.index,w=Z.data,F=b.chart.config.categories,H,h,d,f,c=b.chart,D=c.getJobList(),G=c.config,aa=G.plothovereffect,Q=c.components.paper,Ia=c.components.xAxis[0],sa=c.components.yAxis[0];f=c.graphics.columnGroup;var wa=G.isstacked,ca,ma,qa=v.parseUnsafeString,va=v.getValidValue,ha=G.showtooltip,ra=Ia.getAxisPosition(0),ka=Ia.getAxisPosition(1),na=S.groupMaxWidth=T(ka-ra),da=S.definedGroupPadding,oa=G.plotspacepercent/200,Y=z.getDataSetPosition(b),S=z.stackSumValue[b.positionIndex],
za=G.maxcolwidth,fa=c.get(M,U),ra=fa.animType,ka=fa.animObj,Aa=fa.dummyObj,fa=fa.duration,na=(1-.01*da)*na||p(na*(1-2*oa),1*za),na=u(Y.columnWidth,na/1),ua,da=Y.xPosOffset||0,Y=Y.height,ia,oa=b.components.data,xa,ja,ya,W,Ma,ea,ga,la;W={};ea={};var za=sa.getLimit(),Ca=za.max;la=za.min;var za=sa.getAxisBase(),Ha=sa.yBasePos=sa.getAxisPosition(za),pa=0,La=G.plotborderthickness;ga=b.graphics.container;var Ja=b.graphics.dataLabelContainer,Fa=b.graphics.shadowContainer,ta,Ka,Ea,Da,Ga,Na,Ua,Pa=G.use3dlighting,
Sa=!0,ab=!1,Xa=b.visible,Za=(b.components.removeDataArr||[]).length,bb=b.components.pool||[],eb=G.showplotborder,Va,Ya=function(){var a,c;if(!1===b.visible&&(!1===b._conatinerHidden||void 0===b._conatinerHidden)){Ja&&Ja.hide();a=b.components.data;for(c=0;c<H;c++)a[c]&&a[c].graphics&&a[c].graphics.element&&a[c].graphics.element.attr("visibility",m),a[c]&&a[c].graphics&&a[c].graphics.hotElement&&a[c].graphics.hotElement.attr("visibility",m);Fa.hide();b._conatinerHidden=!0}},$a=function(){var c=b.components.data,
d;for(d=0;d<H;d++)c[d]&&c[d].graphics&&c[d].graphics.element&&c[d].graphics.element.attr("fill",[a(c[d].config.colorArr[0]),!Pa]);z.drawSumValueFlag&&z.drawSumValue()};ga||(ga=b.graphics.container=c.datasetLayers=c.datasetLayers||Q.group(k,f));Fa||(Fa=b.graphics.shadowContainer=Q.group(E,f).toBack());H=Ia.getCategoryLen();if(Xa)for(f=0;f<H;f++)oa[f].graphics&&oa[f].graphics.element&&oa[f].graphics.element.attr("visibility",r),oa[f].graphics&&oa[f].graphics.hotElement&&oa[f].graphics.hotElement.attr("visibility",
r);xa=ga.negative=ga.negative||Q.group(n,ga);ya=ga.column=ga.column||Q.group(L,ga);0>la&&0<=Ca?(f=ga.zeroPlane)?(f=[Ha-5,c.config.canvasTop+5,1,c.config.canvasHeight,5,5,f],z.graphics.zeroplane.show(),z.graphics.zeroplane._.cubetop.show(),z.graphics.zeroplane._.cubeside.show(),z.graphics.zeroplane.animateWith(Aa,ka,{cubepath:f},fa,ra),z.graphics.zeroplane.attr({fill:[G.zeroPlaneColor,!Pa],stroke:G.zeroPlaneBorderColor||"none","stroke-width":G.zeroPlaneShowBorder?1:0})):(f=ga.zeroPlane=Q.group(g,ga).insertBefore(ya),
!z.graphics&&(z.graphics={}),z.graphics.zeroplane=Q.cubepath(Ha-5,c.config.canvasTop+5,1,c.config.canvasHeight,5,5,f).attr({fill:[G.zeroPlaneColor,!Pa],stroke:G.zeroPlaneBorderColor||"none","stroke-width":G.zeroPlaneShowBorder?1:0})):z.graphics&&z.graphics.zeroplane&&z.graphics.zeroplane.hide()&&z.graphics.zeroplane._.cubetop.hide()&&z.graphics.zeroplane._.cubeside.hide();(c=xa.data(l))||(xa.data(l,Array(H)),c=xa.data(l));(Ca=ya.data(l))||(ya.data(l,Array(H)),Ca=ya.data(l));for(f=0;f<H;f+=1)c[f]=
c[f]||Q.group(xa),Ca[f]=Ca[f]||Q.group(ya);f=0;for(Ka=H-1;f<H;f++,Ka--)if(ga=f,h=w&&w[f],W=(la=(xa=oa[f])&&xa.config)&&la.setValue,void 0!==xa&&void 0!==W&&null!==W){Va=xa.trackerConfig={};!xa||void 0!==W&&null!==W||(xa.graphics&&xa.graphics.element&&(xa.graphics.element.hide(),xa.graphics.element._.cubeside.hide(),xa.graphics.element._.cubetop.hide()),xa.graphics&&xa.graphics.hotElement&&xa.graphics.hotElement.hide());ya=la.setLink;ta=la.colorArr;xa.graphics||(oa[f].graphics={});ea=la.displayValue;
ca=0<=W?la.previousPositiveY:la.previousNegativeY;ia=va(qa(A(h.tooltext,Z.plottooltext,P.plottooltext)));wa&&(ca=b._parseValues(f,ca,S[f],ia),W=la.value);ua=sa.getAxisPosition(ca||za);h=Ia.getAxisPosition(f)+da;0!==Y?(ma=sa.getAxisPosition(W+(ca||0)),ca=Math.abs(ua-ma)):(ca=0,ma=ua);ma=Math.min(ma,ua);ua=na;d=(Va.isNegative=Ea=0>W)?c:Ca;Va.targetGroupTracker=void 0;ia=la.finalTooltext=!1!==la.toolText&&la.toolText+(ia?"":la.toolTipValue);Va.eventArgs={index:f,link:ya,value:W,displayValue:ea,categoryLabel:F[f].label,
toolText:ia?ia:"",id:J,datasetIndex:R,datasetName:Z.seriesname,visible:Xa};Ma=Va.eventArgs;W=la.setRolloutAttr;ea=la.setRolloverAttr;fa||(Ha=ma,pa=ca);Da=h;Ga=ma;Na=ua;Ua=ca;h+=5;ma-=5;xa.graphics.element?(ab=!0,ja=xa.graphics.element,d[Ka].appendChild(ja._.cubetop),d[Ka].appendChild(ja._.cubeside),d[Ka].appendChild(ja),d={cubepath:[ma,h,!0===b.visible||0===Y||wa?ca:ja.attrs.cubepath[2],ua,5,5]},ja.animateWith(Aa,ka,d,fa,ra,Sa&&Ya),ja.attr({fill:[a(ta[0]),!Pa],ishot:!0,stroke:eb&&a(ta[1]),"stroke-width":eb?
G.plotborderthickness:0,"stroke-dasharray":la.plotBorderDashStyle,cursor:ya?"pointer":J}),la.elemCreated=!1):(bb.element&&bb.element.length?(ja=xa.graphics.element=bb.element.shift(),d[Ka].appendChild(ja._.cubetop),d[Ka].appendChild(ja._.cubeside),d[Ka].appendChild(ja),ja.show()):ja=xa.graphics.element=Q.cubepath(d[Ka]),ja.attr({cubepath:[fa?Ha-5:ma,h,fa?0:pa,ua,5,5],fill:[a(ta[0]),!Pa],ishot:!0,stroke:eb&&a(ta[1]),"stroke-width":eb?G.plotborderthickness:0,"stroke-dasharray":la.plotBorderDashStyle,
cursor:ya?"pointer":J,visibility:Xa?r:m}),ja.animateWith(Aa,ka,{cubepath:[ma,h,ca,ua,5,5]},fa,ra,Sa&&$a),Sa=!1,xa._newXPos=h,la.elemCreated=!0);ja.shadow(la.shadow,Fa).data("BBox",{height:ua,width:pa,x:ma,y:h});if(ya||ha)ca<O&&(ma-=(O-ca)/2,ca=O),Va.attr={path:V([ma,h,ca,ua,5,5]),cursor:ya?"pointer":J,stroke:La&&C||q,"stroke-width":eb?G.plotborderthickness:0,fill:C,ishot:!0};wa&&!Ea||ja.toBack();xa._xPos=Ga;xa._yPos=Da;xa._height=Na;xa._width=Ua;ja.data("eventArgs",Ma).data("groupId",ga).data(N,!0).data(B,
ea).data(e,W).tooltip(ia);ja._.cubetop.data("eventArgs",Ma).data("groupId",ga).data(N,aa).data(B,ea).data(e,W).tooltip(ia);ja._.cubeside.data("eventArgs",Ma).data("groupId",ga).data(N,aa).data(B,ea).data(e,W).tooltip(ia)}b.drawn?b.drawLabel():D.labelDrawID.push(K.addJob(function(){b.drawLabel()},v.priorityList.label));b.drawn=!0;z.drawSumValueFlag&&ab&&z.drawSumValueFlag&&z.drawSumValue();Za&&b.remove();G.toleranceLeft=7;G.toleranceBottom=7},_checkPointerOverColumn:function(a,b,e){var g=this.chart.config,
l=g.plotborderthickness,k=g.showplotborder,m=this.components.data,p=m[a],n,h,d;if(p&&(n=p.config.setValue,!g.isstacked||!(0>n&&this.valueLook||0<n&&!this.valueLook))&&(l=k?l:0,null!==n&&(k=p._yPos,n=p._height+5,g=p._xPos-5,p=p._width+5,h=b-g,d=e-k,l=(l=0<=h&&h<=p+l&&0<=d&&d<=n+l?0<b+e-(g+k)-5:!1)?0>b+e-(g+k+p+n)+5:!1)))return{pointIndex:a,hovered:l,pointObj:m[a]}},_getHoveredPlot:function(a,b){var e=this.chart,g=e.config,l=e.components.canvas.config,l=Math.max(l.canvasPaddingLeft,l.canvasPadding),
k=g.canvasLeft,g=g.canvasTop,e=e.components.xAxis[0].getValue(e.isBar?b-g-l:a-k-l),e=Math.round(e);return this._checkPointerOverColumn(e-1,a,b)||this._checkPointerOverColumn(e,a,b)},remove:function(){var a=this,b=a.components,e=b.removeDataArr,g=b.pool||(b.pool={element:[],hotElement:[],label:[]}),l=e.length,k=a.config.groupMaxWidth,m,p=a.maxminFlag,n,h,d;(function(){return!1===a.endPosition?function(){return{x:m._xPos-k*l}}:!0===a.endPosition?function(){return{x:m._xPos+k*l||0}}:function(){return{width:0}}})();
for(d=0;d<l;d++)if(m=e[0],e.splice(0,1),m&&m.graphics){h=m.graphics;for(n in h)h[n].hide();m.graphics.element&&(g.element=g.element.concat(m.graphics.element));m.graphics.hotElement&&(g.hotElement=g.hotElement.concat(m.graphics.hotElement));m.graphics.label&&(g.label=g.label.concat(m.graphics.label))}b.pool=g;p&&a.setMaxMin()}},"Bar2D"])}]);Q.register("module",["private","modules.renderer.js-dataset-area",function(){var b=this.hcLib,v=b.parseConfiguration,J=this.window.Image,C="VML"===b.Raphael.type,
H=b.BLANKSTRING,A=b.TOUCH_THRESHOLD_PIXELS,u=b.CLICK_THRESHOLD_PIXELS,a=b.extend2,O=b.pluck,q=b.pluckNumber,M=b.toRaphaelColor,U=b.getFirstAlpha,N=b.HUNDREDSTRING,E=b.plotEventHandler,r=b.hasTouch?A:u,k=b.getCrispValues,m=b.getValidValue,A=b.preDefStr,n=A.DEFAULT,L=A.visibleStr,g=A.hiddenStr,l=A.setRolloverAttrStr,B=A.setRolloutAttrStr,A=Math,e=A.min,V=A.max,p=A.ceil,T=b.getFirstColor,K=b.schedular;Q.register("component",["dataset","area",{type:"area",_getHoveredPlot:function(a,b){var e=this.chart,
g=e.components.canvas.config,l=e.components.xAxis[0],k=this.components,k=k.dataRT||k.data,m,n=k.length,r;m=this.config.plotsPerBin||1;var h=this.config,g=a-e.config.canvasLeft-Math.max(g.canvasPaddingLeft,g.canvasPadding||0),h=h&&h.radius||0,e=Math.floor(Math.max(l.getValue(g-h),0)),l=Math.ceil(Math.min(l.getValue(g+h),n-1));1<m&&(e=p(e/m),l=p(l/m),e=(e-1)*m+1,l*=m);for(;l>=e;l--)if(m=k[l])if(r=this.isWithinShape(m,l,a,b))break;return r},isWithinShape:function(a,b,e,g,l){if(a&&((l=a.config.setValue)||
0===l)){var k=a.config.anchorProps,m=k&&k.borderThickness,p=this.chart.config.viewPortConfig;l=this.components;l=l.dataRT||l.data;var n=q(a.config.dragTolerance,0),h,p=a._xPos-(p?p.x*p.scaleX:0);h=a._yPos;if(null!==h)return a=a.config.hoverEffects,(a=Math.max(k&&k.radius,a&&a.anchorRadius||0,r)+m/2)||(a=0),e=Math.sqrt(Math.pow(e-p,2)+Math.pow(g-h,2)),e<=a||e<=n?{pointIndex:b,hovered:!0,pointObj:l[b]}:!1}},_parseShadowOptions:function(){var a=this.chart,b=this.config,e=a.jsonData.chart,a=q(a.defaultPlotShadow,
a.components.colorManager.getColor("showShadow"));return{opacity:q(e.showshadow,a)?b.alpha/100:0}},_firePlotEvent:function(a,e,g,l){var k=this.chart,m=this.components,m=(m.dataRT||m.data)[e],p=this.graphics.sharedAnchor,p=m.graphics.element||void 0!==m.config.setValue&&p&&p.element,r=b.toolTip,q=g.originalEvent,h=k.components.paper.canvas.style,d,f;if(p)switch(d=m.config,f=d.setLink,d=d.eventArgs,a){case "mouseover":this._decideTooltipType(e,l,g);this._rolloverResponseSetter(k,m,q);f&&(h.cursor="pointer");
break;case "mouseout":r.hide(k.chartInstance.id);this._rolloutResponseSetter(k,m,q);f&&(h.cursor=n);break;case "click":E.call(p,k,q,"dataplotclick",d);break;case "mousemove":this._decideTooltipType(e,l,g)}},_rolloverResponseSetter:function(a,b,e,g){var l=b.graphics,k=(l=l&&(l.element||this.getAnchor(a,b)))&&l.getData(),m=k.hoverEnabled;!0!==k.draged&&(this._hoverFunc(b,"DataPlotRollOver",m,a.jsonData.chart),!g&&l&&E.call(l,a,e,"DataPlotRollOver"))},_rolloutResponseSetter:function(a,b,e,g){var l=b.graphics,
k=(l=l&&(l.element||this.getAnchor(a,b,!0)))&&l.getData(),m=k.hoverEnabled,p=this.type,n=b.config,h=n.anchorProps,h=h.radius&&h.anchorAlpha;!0!==k.draged&&(this._hoverFunc(b,"DataPlotRollOut",m,a.jsonData.chart),!g&&l&&E.call(l,a,e,"DataPlotRollOut"));n.isAnchorsDrawn&&!h&&"area"===p&&l&&l.hide()},getAnchor:function(a,b,e){var g=this.graphics,g=g.sharedAnchor||(g.sharedAnchor={}),k=g.element,m=this.graphics.container,p=a.components.paper,n=b&&b.config,r=n&&n.anchorProps,h,d,f,c,q,u;if(r)return h=
n&&n.eventArgs,d=n&&n.setRolloutAttr,f=n&&n.setRolloverAttr,c=n&&n.hoverEffects,q=r&&r.radius,u=r&&r.shadow,a=a.config.prevAnchorHovered,r=r&&r.anchorAlpha,c.anchorAnimation=0,k||(k=g.element=p.polypath(m.anchorGroup)),b._index!==a&&(k.shadow(u,m.anchorShadowGroup).data("anchorRadius",q).data("anchorHoverRadius",c.anchorRadius).data("hoverEnabled",c.enabled).data("eventArgs",h),c.enabled&&k&&k.data(l,f).data(B,d)),e?k.hide():r&&k.show(),n.prevAnchorHovered=b._index,k},configure:function(){var a=this.chart,
e=a.components,g=a.config,l=this.config,k=this.JSONData,p=a.jsonData.chart,n=a.singleseries,r=e.colorManager,B=q(this.index,this.stackIndex),h=q(k.showplotborder,p.showplotborder||1),B=!n||m(p.palettecolors)?r.getPlotColor(B):r.getColor("plotFillColor").split(/\s*\,\s*/)[0],d,f=g.isdual,c=g.haslineset;this.__setDefaultConfig();v(k,l,a.config,{data:!0});l.plotColor=B;l.parentYAxis=f?c?d=1:d="s"===O(k.parentyaxis&&k.parentyaxis.toLowerCase(),"p")?1:0:d=0;this.yAxis=e.yAxis[d];l.valueposition=l.valueposition.toLowerCase();
l.plotfillcolor=O(k.color,p.plotfillcolor,B);l.plotgradientcolor=0!==g.useplotgradientcolor?b.getDefinedColor(p.plotgradientcolor,r.getColor("plotGradientColor")):"";l.plotfillalpha=O(k.alpha,g.plotfillalpha);l.fillColor={color:l.plotfillcolor+(l.plotgradientcolor?","+l.plotgradientcolor:""),alpha:l.plotfillalpha,angle:l.plotfillangle};l.plotborderalpha=h?O(k.plotborderalpha,p.plotborderalpha,k.alpha,p.plotfillalpha,"95"):0;l.plotbordercolor=O(k.plotbordercolor,p.plotbordercolor,p.areabordercolor,
n?m(p.palettecolors)?r.getPlotColor(0):r.getColor("plotBorderColor").split(/\s*\,\s*/)[0]:"666666");l.plotborderdashstyle=l.dashed?b.getDashStyle(l.plotborderdashlen,l.plotborderdashgap,l.plotborderthickness):"none";l.linecolor=O(k.color,p.linecolor,l.plotColor);l.legendSymbolColor="line"===this.type?l.linecolor:l.plotfillcolor;e=b.getDashStyle(l.linedashlen,l.linedashgap,l.linethickness);l.lineDashStyle=l.dashed?e:"none";l.shadow=this._parseShadowOptions();l.drawanchors=q(k.drawanchors,k.showanchors,
p.showanchors,p.drawanchors);l.anchorbgcolor=O(k.anchorbgcolor,g.anchorbgcolor,r.getColor("anchorBgColor"));l.anchorbordercolor=O(k.anchorbordercolor,g.anchorbordercolor,l.linecolor,l.plotColor);this.components.data=this.components.data||(this.components.data=[]);this.visible=1===q(k.visible,!Number(k.initiallyhidden),1);this._setConfigure();this._realTimeConfigure&&this._realTimeConfigure();!1!==a.hasLegend&&this._addLegend()},_setConfigure:function(a,g){var l=this.chart,k=b.parseUnsafeString,p=
this.config,n=l.config,w=this.JSONData,B=l.jsonData.chart,u=a||w.data||[],h,d=l.components.xAxis[0],f=a?a.data.length:d.getCategoryLen(),c,K=n.isDrag,v,L,E,A,C,H=-Infinity,T=Infinity,J=k(n.yaxisname),N=k(n.xaxisname),M=this.yAxis,U=n.tooltipsepchar,Q=p.dashed,ka,na,da;p.imageCount=0;c=this.components.data;c||(c=this.components.data=[]);p.maxRadius=-Infinity;n.dragTolerance=n.dragTolerance||-Infinity;for(L=0;L<f;L++)a?(l=a&&a.data[L]||{},ka=void 0!==g?g+L:c.length-f+L,h=c[ka]):(h=c[L],l=u&&u[L]||{}),
v=h&&h.config,h||(h=c[L]={}),h.config||(v=c[L].config={}),h.graphics||(h.graphics={}),A=q(ka-f,L),v.setValue=E=M.getCleanValue(l.value,p.stack100percent),v.setLink=O(l.link),v.anchorProps=this._parseAnchorProperties(A),p.maxRadius=V(v.anchorProps.radius+v.anchorProps.borderThickness/2,p.maxRadius),da=v.anchorProps.radius+v.anchorProps.borderThickness/2,v.dragTolerance=K?(6>da?5.5:da+.5)+r:0,A=d.getLabel(A),v.label=m(k(A.tooltext||A.label)),v.showValue=q(l.showvalue,p.showvalues),v.dashed=q(l.dashed,
Q),v.dashStyle=v.dashed?b.getDashStyle(p.linedashlen,p.linedashgap,p.linethickness):"none",v.color=O(l.color,p.linecolor),v.setColor=l.color,v.setAlpha=l.alpha,v.setDashed=l.dashed,v.alpha=O(l.alpha,l.linealpha,p.linealpha),v.setColor&&(na=!0),null!==E&&(H=V(H,E),T=e(T,E)),v.setTooltext=k(l.toolText),v.toolTipValue=E=M.dataLabels(E),v.setDisplayValue=A=k(l.displayvalue),v.displayValue=O(A,E),v.formatedVal=A=v.toolTipValue,v.setTooltext=b.getValidValue(k(O(l.tooltext,w.plottooltext,B.plottooltext))),
v.valuePosition=O(l.valueposition,p.valueposition),v.valuePosition&&(v.valuePosition=v.valuePosition.toLowerCase()),n.showtooltip?null===A?E=!1:void 0!==v.setTooltext?(E=[1,2,3,4,5,6,7],A={yaxisName:J,xaxisName:N,formattedValue:A,label:v.label},E=b.parseTooltext(v.setTooltext,E,A,l,B,w)):(n.seriesnameintooltip&&(C=b.getFirstValue(w&&w.seriesname)),E=C?C+U:"",E+=v.label?v.label+U:""):E=!1,v.toolText=E,v.setLevelTooltext=v.setTooltext,v.setTooltext=E,v.hoverEffects=this._parseHoverEffectOptions(h,l),
v.anchorProps.isAnchorHoverRadius=v.hoverEffects.anchorRadius,n.dragTolerance=V(n.dragTolerance,p.maxRadius,v.hoverEffects.anchorRadius);n.dragTolerance=K?(5<n.dragTolerance?n.dragTolerance:5.5)+r:0;p.maxValue=H;p.minValue=T;this.ErrorValueConfigure&&this.ErrorValueConfigure();p.hasSetColor=na},init:function(a){this.JSONData=a;this.components={};this.graphics={};this.configure()},draw:function(){var e=this,p=e.chart,n=p.jsonData,r=e.graphics,z=p.graphics,q=p.config,w=p.getJobList(),u=p.components,
v=e.JSONData,h=n.chart,d=e.config,f=d.legendInteractivity,c=p.config.isstacked,D=e.groupManager.stackSumValue[0],G=e.stackIndex,E,L=u.paper,A=u.xAxis[0],C=e.yAxis,H,T,N,U=q.showtooltip,Q,ha=e.components.data,ra=e.components.removeDataArr||[],ka=ra.length,na,da,oa,Y,za,fa,Aa,ua,ia=z.areaGroup,xa=C.getAxisBase(),ja,ya,W=d.plotbordercolor,Ma=d.plotborderalpha,ea=d.plotborderdashstyle,ga=d.plotborderthickness,la=r.container,Ca,Ha=b.parseUnsafeString,pa=d.fillColor,La=p.is3D,Ja=r.shadowContainer,Fa=r.dataLabelContainer,
ta=function(){!1!==e.visible||!1!==e._conatinerHidden&&void 0!==e._conatinerHidden||(la.areaGroup.hide(),Ja.hide(),la.anchorShadowGroup.hide(),la.anchorGroup.hide(),Fa&&Fa.hide(),e._conatinerHidden=!0)},Ka=function(){!1!==e.visible&&(la.anchorShadowGroup.show(),la.anchorGroup.show(),Fa.show(),Ja.show());ia.area.attr({"clip-rect":null});ia.area.node&&ia.area.node.removeAttribute("clip-path");p._animCallBack()},Ea=d.shadow,Da,Ga=e.visible,Na,Ua,Pa={},Sa=z.datalabelsGroup,ab=A.getPVR(),Xa,Za=La?10:0,
bb,eb=La?10:0,Va=p.components.scrollBar,Ya=p.components.canvas.config.clip,$a=a([],Ya["clip-canvas"]),Ta=a([],Ya["clip-canvas-init"]),kb=q.height,hb=!q.drawfullareaborder,ib=r.connector,ob=e.components.pool||{},ba=0,Ba=e.drawn,Oa=!0!==Ba,Qa,I,cb,vb=e.startPosition,sb={},pb={},gb=p.get("config","animationObj")||{},qb=gb.duration,mb=gb.dummyObj,nb=gb.animObj,Fb=gb.animType,Bb=d.lastPath||{},Wb,Hb=!0,wb,Nb,xb,yb,Cb,Ib=p.config.viewPortConfig,Jb=Ib.x,ub=Ib.scaleX,jb,tb,Wa,Kb,zb,Gb,Sb=e.chart.config.realTimeConfig&&
e.chart.config.realTimeConfig.clear,fb=0,Tb=!Oa&&qb,Lb=0,Mb,Ob,Pb,rb,db=d.isSkippedData,Ab=p.config.canvasTop,Vb=p.config.canvasBottom,Db=r.sharedAnchor,Qb=Db&&Db.element,Eb=p.isRealTime,lb=0,Ub=A.getCategoryLen(),Zb=void 0!==q.scrollMinVal?q.scrollMinVal:0,Rb=void 0!==q.scrollMaxVal?q.scrollMaxVal:Ub,Xb=q.startPathIndex,Yb=q.endPathIndex,$b;if(Xb||Yb)$b={begin:Xb-1,end:Yb+1};d.imagesLoaded=0;e.noOfNewDataAtEnd=0;la||(la=r.container={anchorShadowGroup:L.group("anchor-shadow",ia.areaConnector),areaGroup:L.group("area",
ia.area),anchorGroup:L.group("anchors",ia.areaConnector)},Ga||(la.anchorShadowGroup.hide(),la.areaGroup.hide(),la.anchorGroup.hide()));Ja||(Ja=r.shadowContainer=L.group("shadows",ia.shadows),Ga||Ja.hide());Fa||(Fa=r.dataLabelContainer=r.dataLabelContainer||L.group("datalabel",Sa),Ga||Fa.hide());Ga&&(la.anchorShadowGroup.show(),la.areaGroup.show(),la.anchorGroup.show(),Ja.show(),Fa.show(),e._conatinerHidden=!1);d.groupMaxWidth=A.getAxisPosition(1)-A.getAxisPosition(0);Xa=ab*Ub;if(Sb)for(E=0,Ub=ra.length;E<
Ub;E++)e._removeDataVisuals(ra.shift());else e._shiftOffRemovedPoints();sb=d.removePath;Eb&&($a[1]=0,$a[3]=kb,la.areaGroup.attr({"clip-rect":$a}),Fa.attr({"clip-rect":$a}),la.anchorGroup.attr({"clip-rect":$a}),la.anchorShadowGroup.attr({"clip-rect":$a}),Ja.attr({"clip-rect":$a}));if(!(Zb>=Rb)){for(E=Zb;E<Rb;E++)Q=(na=ha[E])&&na.config,na&&void 0!==Q.setValue&&(na.graphics||(na.graphics={}),oa=na.graphics.element,jb=na.graphics.image,Qa=A.getLabel(E).label,za=Q.setValue,Pb=Q&&Q.isSkipped,void 0===
za||!0===Pb||!1!==db&&!Oa&&f&&(!Ga&&!oa||Ga&&oa&&!na._xPos&&!na._yPos)?(oa&&oa.hide(),jb&&jb.hide(),Q&&(Q.isSkipped=!0)):(Y=Q.setLink,Pa=Q.anchorProps||{},Ua=Pa.shadow,H=m(Ha(O(Q.setLevelTooltext,v.plottooltext,h.plottooltext))),Q&&(ja=0<=za?Q.previousPositiveY:Q.previousNegativeY),c&&za&&(ja=e._parseValues(E,ja,D[E],H),za=Q.value),null!==za&&(ya=C.getAxisPosition(ja||xa)+eb,N=e.visible?C.getAxisPosition(za+(ja||0))+eb:ya,T=A.getAxisPosition(E)-Za+Jb*ub,T=k(T,ga,ga).position,N=k(N,ga,ga).position,
tb=Pa.symbol,Wa=Pa.radius,Kb=Pa.startAngle,wb=Pa.bgColor,Cb=Pa.bgAlpha,Nb=Pa.borderColor,yb=Pa.borderAlpha,xb=Pa.borderThickness,Da=Q.hoverEffects,Mb=N-Wa-xb/2,Ob=N+Wa+xb/2,Mb<Ab&&(q.toleranceTop=V(q.toleranceTop||0,Ab-Mb)),Ob>Vb&&(q.toleranceBottom=V(q.toleranceBottom||0,Ob-Vb)),da=U?Q.toolText+(H?"":Q.toolTipValue):"",Q.finalTooltext=da,fa=Q.eventArgs=Q.eventArgs||{},fa.index=E,fa.link=Y,fa.value=za,fa.displayValue=Q.displayValue,fa.categoryLabel=Qa,fa.toolText=da,fa.id=e.userID,fa.datasetIndex=
G||0,fa.datasetName=v.seriesname,fa.visible=Ga,Da.enabled&&(Q.setRolloverAttr={polypath:[Da.anchorSides||2,T,N,Da.anchorRadius,Da.startAngle,Da.dip],fill:M({color:Da.anchorColor,alpha:Da.anchorBgAlpha}),stroke:M({color:Da.anchorBorderColor,alpha:Da.anchorBorderAlpha}),"stroke-width":Da.anchorBorderThickness},Q.setRolloutAttr={polypath:[Pa.symbol[1]||2,T,N,Pa.radius,Pa.startAngle,0],fill:M({color:Pa.bgColor,alpha:Pa.bgAlpha}),stroke:M({color:Pa.borderColor,alpha:Pa.borderAlpha}),"stroke-width":Pa.borderThickness},
ua=Q.setRolloverAttr,Aa=Q.setRolloutAttr),Gb={polypath:[tb[1]||2,T,N,Wa,Kb,0]},zb=!1,!oa&&Tb&&!0!==vb&&(cb=Ub+ba,I=A.getPixel(cb),na._baseXPos=na._xPos=I,na._yPos=N,na._baseYPos=ya,Bb=this.getLinePath([na],Bb),ba++),rb=Wa&&Pa.anchorAlpha,Q.isAnchorsDrawn||d.drawanchors||rb?Pa.imageUrl?(Q.anchorImageLoaded=!1,Na=new J,Na.onload=e._onAnchorImageLoad(e,E,fa,T,N,na),Na.onerror=e._onErrorSetter(e,E),Na.src=Pa.imageUrl,fb++):(jb&&jb.hide(),oa||(ob.element&&ob.element.length?(oa=na.graphics.element=ob.element.shift(),
oa.show().attr({transform:""})):(oa=na.graphics.element=L.polypath(la.anchorGroup),oa.attr(Gb),zb=!0,Q.isAnchorsDrawn=!0,lb++),Tb&&Eb&&oa.attr({polypath:[Pa.symbol[1]||2,I,N,Pa.radius,Pa.startAngle,0]})),!Ba||zb&&!Eb||oa.show().animateWith(mb,nb,Gb,qb,Fb,Hb&&ta),oa.attr({fill:M({color:wb,alpha:Cb}),stroke:M({color:Nb,alpha:yb}),"stroke-width":xb,visibility:Wa?Ga:g}).shadow(Ua,la.anchorShadowGroup).data("anchorRadius",Wa).data("anchorHoverRadius",Da.anchorRadius).data("hoverEnabled",Da.enabled).data("eventArgs",
fa),Hb=!1,jb&&jb.hide(),Da.enabled&&oa&&oa.data("anchorRadius",Pa.radius).data("anchorHoverRadius",Da.anchorRadius).data("hoverEnabled",Da.enabled).data("eventArgs",fa).data(l,ua).data(B,Aa)):oa&&!rb&&oa.hide()),na._xPos=T,na._yPos=N,na._baseXPos=T,na._baseYPos=ya,na._polyPath=Gb,na._index=E,Lb++));E===lb||d.drawanchors?Qb&&Qb.hide():Db&&Qb?Qb.hide():e.getAnchor(p,na,!0);d.noOfImages=fb;d.totalImages=fb;0===fb&&(!0===Ba?e.drawLabel():w.labelDrawID.push(K.addJob(function(){e.drawLabel()},b.priorityList.label)));
pb=this.getLinePath(ha,{},$b);ka&&Eb?(sb=this.getLinePath(ha,sb),Wb=sb.getPathArr()):Wb=pb.getPathArr();d.lastPath=pb;Va&&(bb=Va.conf.startPercent,$a[2]=Xa+Ta[0],1===bb&&(Ta[0]=$a[2],$a[0]=0));$a[3]+=eb;(Ca=e.graphics.lineElement)?qb&&Eb&&Ca.attr({path:Bb.getPathArr()}):(Ca=e.graphics.lineElement=L.path(la.areaGroup),Ca.attr({path:pb.getPathArr()}),qb&&Ga&&(la.anchorGroup.hide(),la.anchorShadowGroup.hide(),Ja.hide(),Fa.hide(),ia.area.attr({"clip-rect":Ta}).animate({"clip-rect":$a},qb,Fb,Ka)));Sb?
Ca.hide():Ba&&Ca.show().animateWith(mb,nb,{path:Wb},qb,Fb,Hb&&ta);Hb=!1;Ca.attr({stroke:M({color:W,alpha:Ma}),"stroke-width":hb?0:ga,fill:M(pa),"stroke-linecap":"round","stroke-linejoin":2<ga?"round":"miter","stroke-dasharray":ea}).shadow(Ea,Ja);hb?(ib=e.graphics.connector,ib||(ib=e.graphics.connector=L.path({path:pb.pathArr,stroke:M({color:W,alpha:Ma}),"stroke-width":ga,"stroke-linecap":"round","stroke-linejoin":2<ga?"round":"miter","stroke-dasharray":ea},la.areaGroup)),ib.show().animateWith(mb,
nb,{path:pb.pathArr},qb,Fb)):ib&&ib.hide();e.drawn=!0}},getPathArr:function(){var a=this.pathArr,b=this.path2Arr;return a.length||b.length?a.concat(b):[]},_getPathString:function(a){var b=a.length,e="",g;for(g=0;g<b;g+=1)e+=" "+a[g];return e},getLinePath:function(a,b,e){var g=this.chart,l=g.config,k=l.connectnulldata,p=b||{};b=p.lastValidValue||!1;var m=p.temp||[],n=p.temp2||[],h=p.pathArr||[],d=p.path2Arr||[],g=g.components.xAxis[0],f=this.yAxis,c,r,q,B,u,K=a.length,p=p.pointsJoined||0,v,E;c=e&&
e.begin||0;e=e&&e.end||K;for(var K=f.getPixel(0),L=l.viewPortConfig,l=L.x,L=L.scaleX,A="area"===this.type;c<e;c++)if(v=a[c])r=v.config,E=r.setValue,q=v._xPos||g.getPixel(c)+l*L,B=v._yPos||f.getPixel(E),void 0===E||r&&!0===r.isSkipped?r&&delete r.isSkipped:(r=v._baseXPos||(A?q:void 0),u=v._baseYPos||(A?K:void 0),null===E?k||(0<p&&("Z"!==d[d.length-1]&&void 0!==u&&d.push("Z"),h=h.concat(d),d=[]),m=[],n=[],b=!1):b?(m.length&&(h=h.concat(m),void 0!==r&&(d=n,n=[]),m=[],p++),h.push(q,",",B),void 0!==u&&
d.unshift(q,",",u)):(m.push("M",q,",",B,"L"),void 0!==u&&n.push(r,",",u),p=0,b=!0));"Z"!==d[d.length-1]&&0<p&&void 0!==u&&d.push("Z");return{pathArr:h,path2Arr:d,lastValidValue:b,pointsJoined:p,temp:m,temp2:n,getPathArr:this.getPathArr}},_shiftOffRemovedPoints:function(){var a=this,b=a.chart,e=a.config,g=a.components.removeDataArr,l,k=b.components.xAxis[0].getPVR();l=b.get("config","animationObj");var b=l.duration,p=a.drawn&&b,m=l.dummyObj,n=l.animObj,h=l.animType,d,f,c,r,q,B={},u,K,v=a.components.removeElementsArr=
a.components.removeElementsArr||(a.components.removeElementsArr=[]),E=e.hideAnimFlag=!1,L=function(){var c=a.components.removeElementsArr,b=c.length,d;for(d=0;d<b;d++)a._removeDataVisuals(c.shift())},A,C;if(g){l=g.length;for(u=0;u<l;u++){if(C=g[0])if(v.push(C),p){d=C.config.setValue;f=C._xPos;if(void 0==f){g.splice(0,1);continue}c=C.graphics.element;r=C.graphics.label;q=C.graphics.image;K=C.graphics.connector;null!==d&&(d=l*k,A="T,"+-d+",0",C._xPos=f-d,f=C._xPos,C._baseXPos=f,c&&c.animateWith(m,n,
{transform:A},b,h,!E&&L),e.hideAnimFlag=!0,r&&r.animateWith(m,n,{transform:A},b,h),q&&q.animateWith(m,n,{transform:A},b,h),K&&K.hide());B=a.getLinePath([C],B)}else L();g.splice(0,1)}e.removePath=B}},_removeDataVisuals:function(a){var b=this.components.pool||(this.components.pool={}),e,g,l;if(a)for(e in g=a.graphics,g)a=b[e]||(b[e]=[]),l=g[e],l.hide&&"function"===typeof l.hide&&(l.attr({"text-bound":[]}),l.hide(),l.shadow&&l.shadow(!1)),a.push(g[e])},_parseAnchorProperties:function(a,e){var g=this.config,
l=this.type,k=this.chart,p=k.config.anchoralpha,p="area"===(!k.config.anchoralpha&&l)?0:1,m=this.JSONData,n=this.chart.jsonData.chart,k=(e||m.data||[])[a]||{},l={},r=b.graphics.mapSymbolName,h,d;h=void 0!==O(k.anchorstartangle,m.anchorstartangle,n.anchorstartangle,k.anchorimagealpha,m.anchorimagealpha,n.anchorimagealpha,k.anchorimagescale,m.anchorimagescale,n.anchorimagescale,k.anchorimagepadding,m.anchorimagepadding,n.anchorimagepadding,k.anchorimageurl,m.anchorimageurl,n.anchorimageurl,k.anchorradius,
m.anchorradius,n.anchorradius,k.anchorbgcolor,m.anchorbgcolor,n.anchorbgcolor,k.anchorbordercolor,m.anchorbordercolor,n.anchorbordercolor,k.anchoralpha,m.anchoralpha,n.anchoralpha,k.anchorsides,m.anchorsides,n.anchorsides,k.anchorborderthickness,m.anchorborderthickness,n.anchorborderthickness,void 0);d=q(k.drawanchors,g.drawanchors);l.enabled=h?q(d,h):q(d,p);l.startAngle=q(k.anchorstartangle,g.anchorstartangle);l.imageAlpha=q(k.anchorimagealpha,g.anchorimagealpha);l.imageScale=q(k.anchorimagescale,
g.anchorimagescale);l.imagePadding=q(k.anchorimagepadding,g.anchorimagepadding);0>l.imagePadding&&(l.imagePadding=0);l.imageUrl=O(k.anchorimageurl,g.anchorimageurl);l.imageUrl&&g.imageCount++;l.radius=q(k.anchorradius,g.anchorradius);l.isAnchorRadius=O(k.anchorradius,m.anchorradius,n.anchorradius);l.bgColor=O(k.anchorbgcolor,g.anchorbgcolor);p=l.enabled?U(O(k.anchoralpha,g.anchoralpha,l.enabled?N:"0")):0;l.anchorAlpha=p;l.bgAlpha=U(O(k.anchorbgalpha,g.anchorbgalpha,p))*p/100;l.imageAlpha=l.imageAlpha*
p/100;l.borderColor=O(k.anchorbordercolor,g.anchorbordercolor);l.borderAlpha=p;l.sides=O(k.anchorsides,g.anchorsides);l.borderThickness=O(k.anchorborderthickness,g.anchorborderthickness);l.symbol=r(l.sides).split("_");g=q(k.anchorshadow,g.anchorshadow)&&1<=l.radius;l.shadow={opacity:g?p/100:0};return l},_onErrorSetter:function(a){return function(){var e=a.config,g=a.chart.getJobList();e.imagesLoaded++;e.imagesLoaded===e.imageCount&&(!0===a.drawn?a.drawLabel():g.labelDrawID.push(K.addJob(function(){a.drawLabel()},
b.priorityList.label)))}},_onAnchorImageLoad:function(k,p,m,n,r,q){return function(){var w=k.chart,u=w.getJobList(),v=k.config,h=w.config,d=w.components.paper,f=k.components.data,c=void 0!==q?q:f[p],D=c.config,G=c.graphics,E=D.anchorProps,A=k.graphics.container,H=A.anchorGroup,T=A.anchorShadowGroup,J=w.get("config","animationObj"),A=J.dummyObj,N=J.animObj,O=J.animType,J=J.duration,U=E.imageUrl,Q=w.components.xAxis[0],ha=f.length,f=D.hoverEffects,ra=E.imageScale,ka=E.imageAlpha,na=f.imageHoverAlpha,
da=f.imageHoverScale,oa=this.height*ra*.01,Y=this.width*ra*.01,za=this.width*da*.01,fa=this.height*da*.01,Aa=h.showtooltip,ua=k.startPosition,ia=k.noOfNewDataAtEnd,xa=k.allImagesDrawn&&J,ja=D.setLink,ya,W,Ma,ea,ga,la,Ca,Ha,pa,La,Ja,Fa,w=w.isRealTime,ta=k.config.animFlag,Ka=v.noOfImages;W=v.noOfImagesDrawn=v.noOfImagesDrawn||(v.noOfImagesDrawn=0);var Ea=k.components.pool||{};D.isRemoving||(C?(Ca={x:n-this.width*ra*.005,y:r-this.height*ra*.005,width:Y,height:oa,alpha:ka},pa={x:n-this.width*da*.005,
y:r-this.height*da*.005,width:za,height:this.height*da*.01,alpha:na},(na=G.element)&&"image"!==na.type&&(na.remove(),na=G.element=null),na||(G.element=na=d.image(U,H),D.isAnchorsDrawn=!0),h.dragTolerance=h.dragTolerance<oa?oa+.5:h.dragTolerance,na.css({opacity:.01*ka}).data("alwaysInvisible",!ra).data("setRolloverProperties",f).data(l,pa).data(B,Ca).data("imgRef",this).data("anchorRadius",ra).data("anchorHoverRadius",da),na.animateWith(A,N,Ca,J,O)):(ya=E.symbol[1],la=f.isAnchorHoverRadius,W=E.isAnchorRadius,
W=E.radius=W?E.radius:e(Y,oa)/2,Ma=E.shadow,Ca=E.imagePadding,f.radius=la?f.anchorRadius:W+1,ga=f.radius-Ca-.5*f.anchorBorderThickness,la=W-Ca-.5*E.borderThickness,pa=Ca={},Ha=[ya||2,n,r,W,E.startAngle,void 0],E.markerRadius=W,h.dragTolerance=h.dragTolerance<W?W+.5:h.dragTolerance,h={fill:M({color:E.bgColor,alpha:E.bgAlpha}),"stroke-width":E.borderThickness,stroke:M({color:E.borderColor,alpha:E.borderAlpha})},Ca=a({polypath:Ha},h),f&&(pa={polypath:[f.anchorSides||2,n,r,f.radius,f.startAngle,f.dip],
fill:M({color:f.anchorColor,alpha:f.anchorBgAlpha}),"stroke-width":f.anchorBorderThickness,stroke:M({color:f.anchorBorderColor,alpha:f.anchorBorderAlpha})},Ha=V(f.anchorAlpha,f.anchorBorderAlpha),na>Ha&&(na=Ha)),E.bgAlpha&&E.borderAlpha&&(Ha=V(E.bgAlpha,E.borderAlpha),ka>Ha&&(ka=Ha)),La=G.element,Ha={polypath:Ca.polypath},La||(Ea.element&&Ea.element.length?(La=G.element=Ea.element.shift())&&La.attr({transform:""}):(La=G.element=d.polypath(H),La.attr(Ha),ea=D.isAnchorsDrawn=!0),xa&&w&&!0!==ua&&(Ja=
Q.getPixel(ha+ia),k.noOfNewDataAtEnd+=1,Q=[ya||2,Ja,r,W,E.startAngle,void 0],La.attr({transform:"",polypath:Q}))),!k.allImagesDrawn||ea&&!w||La.show().animateWith(A,N,Ha,J,O,ta&&void 0).attr(h),ta=k.config.animFlag=!1,La.attr({fill:M({color:E.bgColor,alpha:E.bgAlpha}),ishot:!Aa,"stroke-width":E.borderThickness,stroke:M({color:E.borderColor,alpha:E.borderAlpha}),cursor:ja?"pointer":"",visibility:W?L:g}).data("alwaysInvisible",!W).data("setRolloverProperties",f).data("hoverEnabled",f.enabled).data(l,
pa).data(B,Ca).data("anchorRadius",W).data("anchorHoverRadius",f&&f.radius).data("eventArgs",m).shadow(Ma,T),ea=d.polypath(ya||2,n,r,0<la?la:0,E.startAngle,void 0,H).attr({visibility:g}),Q=k._getPathString(ea.attrs.path),ea.remove(),ea=d.polypath(ya||2,n,r,0<ga?ga:0,f.startAngle,f.dip,H).attr({visibility:g}),T=k._getPathString(ea.attrs.path),ea.remove(),E.imgRefWidth=this.width,E.imgRefHeight=this.height,E.imgRefScale=ra,E.rolloutClipRadius=la,Ca={x:n-this.width*ra*.005,y:r-this.height*ra*.005,width:Y,
height:oa,alpha:ka,"clip-path":Q},pa={x:n-this.width*da*.005,y:r-this.height*da*.005,width:za,height:fa,alpha:na,"clip-path":T},na=G.image,na||(Ea.image&&Ea.image.length?(na=G.image=Ea.image.shift(),na.show().attr({transform:""})):(G.image=na=d.image(U,H),na.attr({x:Ca.x,y:Ca.y,width:Ca.width,height:Ca.height,"clip-path":Ca["clip-path"]}),Fa=D.isAnchorsDrawn=!0),xa&&w&&(ea=d.polypath(ya||2,Ja,r,0<la?la:0,E.startAngle,void 0).attr({visibility:g}),d=k._getPathString(ea.attrs.path),ea.remove(),Ja={x:Ja-
this.width*ra*.005,y:r-this.height*ra*.005,width:Y,height:oa,alpha:ka,"clip-path":d},na.attr(Ja))),na.attr({src:U}).toFront(),na.attr({visibility:W?L:g}).css({opacity:.01*ka}).data("alwaysInvisible",!ra).data("setRolloverProperties",f).data(l,pa).data(B,Ca).data("anchorRadius",ra).data("imgRef",this).data("anchorHoverRadius",da),!k.allImagesDrawn||Fa&&!w||na.animateWith(A,N,{x:Ca.x,y:Ca.y,width:Ca.width,height:Ca.height,"clip-path":Ca["clip-path"]},J,O,ta&&void 0),na.attr({alpha:Ca.alpha}),W=V(W,
f&&f.anchorRadius||0,2)),c._xPos=n,c._yPos=r,v.imagesLoaded++,D.anchorImageLoaded=!0,v.imagesLoaded===v.totalImages&&(!0===k.drawn?k.drawLabel():u.labelDrawID.push(K.addJob(function(){k.drawLabel()},b.priorityList.label))),W=v.noOfImagesDrawn+=1,W===Ka&&(k.allImagesDrawn=!0))}},_hideGraphics:function(a){var b,e;for(e in a)a.hasOwnProperty(e)&&(b=a[e])&&(b.hide?b.hide():this._hideGraphics(b))},getPlotClickFn:function(a){return function(b){E.call(this,a,b)}},show:function(){var a=this.chart,b=a.components.xAxis[0],
e=this.yAxis;this.config.legendInteractivity=!0;a._chartAnimation();this.visible=!0;this._conatinerHidden=!1;a.config.transposeAxis&&(a._setAxisLimits(),e.draw());a.isRealTime&&b.draw();a._drawDataset();a.chartInstance.__state._rtPaused&&a._setRTdata()},hide:function(){var a=this.chart,b=this.yAxis,e=a.components.xAxis[0];a._chartAnimation();this.config.legendInteractivity=!0;this.visible=!1;a.config.transposeAxis&&(a._setAxisLimits(),b.draw());a.isRealTime&&e.draw();a._drawDataset();a.chartInstance.__state._rtPaused&&
a._setRTdata()},_parseHoverEffectOptions:function(a,b){var e=this.JSONData,g=this.chart,l=g.jsonData.chart,g=g.config,k=a.config.anchorProps||{},p=g.plothovereffect,m=this.config.drawanchors,n={enabled:!1};b=b||{};0!==p&&0!==m&&(n.enabled=void 0!==O(b.hovercolor,b.anchorhovercolor,b.hovercolor,e.hovercolor,b.anchorbghovercolor,e.anchorbghovercolor,l.anchorbghovercolor,e.anchorhovercolor,l.anchorhovercolor,b.hoveralpha,b.anchorhoveralpha,e.anchorhoveralpha,l.anchorhoveralpha,b.bghoveralpha,b.anchorbghoveralpha,
e.anchorbghoveralpha,l.anchorbghoveralpha,b.anchorborderhovercolor,b.borderhovercolor,e.anchorborderhovercolor,l.anchorborderhovercolor,b.anchorborderhoverthickness,b.borderhoverthickness,e.anchorborderhoverthickness,l.anchorborderhoverthickness,b.anchorborderhoveralpha,b.borderhoveralpha,e.anchorborderhoveralpha,l.anchorborderhoveralpha,b.hoverdip,b.anchorhoverdip,e.anchorhoverdip,l.anchorhoverdip,b.anchorhoverstartangle,e.anchorhoverstartangle,l.anchorhoverstartangle,b.hoversides,b.anchorhoversides,
e.anchorhoversides,l.anchorhoversides,b.hoverradius,b.anchorhoverradius,e.anchorhoverradius,l.anchorhoverradius,e.plotfillhovercolor,l.plotfillhovercolor,g.plothovereffect,void 0),n.startAngle=q(b.anchorhoverstartangle,e.anchorhoverstartangle,l.anchorhoverstartangle,k.startAngle),n.anchorSides=q(b.hoversides,b.anchorhoversides,e.anchorhoversides,l.anchorhoversides,k.sides),n.anchorRadius=q(b.anchorhoverradius,e.anchorhoverradius,l.anchorhoverradius),n.isAnchorHoverRadius=n.anchorRadius,n.anchorRadius=
q(n.anchorRadius,k.radius+(p?2:0)),n.anchorScale=O(b.hoverscale,e.anchorscale,l.anchorscale),n.imageHoverScale=q(b.anchorimagehoverScale,e.anchorimagehoverscale,l.anchorimagehoverscale,110),n.imageHoverAlpha=q(b.anchorimagehoveralpha,e.anchorimaghoverealpha,l.anchorimagehoveralpha),n.anchorAlpha=O(b.anchorhoveralpha,b.hoveralpha,e.anchorhoveralpha,l.anchorhoveralpha,k.anchorAlpha),n.anchorColor=T(O(b.hovercolor,b.anchorhovercolor,b.hoverColor,b.anchorbghovercolor,e.anchorbghovercolor,e.anchorhovercolor,
e.hovercolor,l.anchorbghovercolor,l.anchorhovercolor,l.plotfillhovercolor,k.bgColor)),n.anchorBgAlpha=O(b.bghoveralpha,b.anchorbghoveralpha,e.anchorbghoveralpha,l.anchorbghoveralpha,l.plotfillhoveralpha,k.bgAlpha),n.anchorBgAlpha=n.anchorBgAlpha*n.anchorAlpha/100,n.anchorBorderColor=O(b.borderhovercolor,b.anchorborderhovercolor,e.anchorborderhovercolor,l.anchorborderhovercolor,k.borderColor),n.anchorBorderAlpha=O(b.borderhoveralpha,b.anchorborderhoveralpha,e.anchorborderhoveralpha,l.anchorborderhoveralpha,
n.anchorAlpha,k.borderAlpha),n.anchorBorderThickness=q(b.borderhoverthickness,b.anchorborderhoverthickness,e.anchorborderhoverthickness,l.anchorborderhoverthickness,l.anchorBorderThickness,k.borderThickness),n.dip=O(b.hoverdip,b.anchorhoverdip,e.anchorhoverdip,l.anchorhoverdip,k.dip),n.anchorAnimation=q(b.anchorhoveranimation,e.anchorhoveranimation,l.anchorhoveranimation,1));return n},_hoverPlotAnchor:function(a,b){var e=this.graphics.sharedAnchor,k=a.graphics.element||e&&e.element,p=a.graphics.label,
m=a.config||{},n=m.anchorProps.anchorAlpha,m=m&&m.anchorProps.imageUrl,r=C&&m?a.graphics.element:a.graphics.image,q=k.data(l),h=k.data(B),d="DataPlotRollOver"===b?k.data(l):k.data(B),m="image"===k.type,f=k.data("anchorRadius"),c=k.data("anchorHoverRadius"),u=p&&(p.data("isBelow")?1:-1)*(m?.5*(q.height-h.height):c-f),K=a.config.hoverEffects,v,E={polypath:d.polypath},d={fill:d.fill,"stroke-width":d["stroke-width"],stroke:d.stroke},A=p&&p.data("rotation")||"",u={transform:"T0,"+("DataPlotRollOver"===
b?u:0)+A},q=!(/,0\)$/.test(q.fill)&&/,0\)$/.test(h.fill))&&k.data("anchorHoverRadius")-k.data("anchorRadius")&&K.anchorAnimation&&50;r&&(v=r.data(l),h=r.data(B),v="DataPlotRollOver"==b?v:h);if("DataPlotRollOver"==b&&0!==c||"DataPlotRollOut"==b&&0!==f)k.attr({visibility:L}),r&&r.attr({visibility:L});r&&r.css({opacity:.01*v.alpha});m?k.css({opacity:.01*E.alpha}):k.attr(d);k.stop();k.animate(E,q,"easeOut",function(){("DataPlotRollOver"==b&&!c||"DataPlotRollOut"==b&&!f)&&k.attr({visibility:g})});r&&r.animate(v,
q,"easeOut",function(){("DataPlotRollOver"==b&&!c||"DataPlotRollOut"==b&&!f)&&r.attr({visibility:g})});p&&p.stop();(q||e&&e.element&&n)&&p&&p.animate(u,50,"easeOut")},drawLabel:function(a){var b=this.chart,e=b.config,g=b.linkedItems.smartLabel,l=b.config.dataLabelStyle,k=this.components.data,p=b.components.paper,m=b.get("config","animationObj"),n=m.duration,h=!0===this.drawn&&n,d=e.stack100percent,f=m.dummyObj,c=m.animObj,r="",m=m.animType,q=e.rotatevalues?270:0,B=e.canvasTop,u=e.canvasHeight,K=b.config.isstacked,
v,E=this.graphics.dataLabelContainer,L=b.components.xAxis[0],A=0,C=L.getCategoryLen(),V=this.startPosition,T=this.components.pool||{},J,N,M,O,U,Y,Q,fa,Aa,ua,ia,xa;fa=this.visible;void 0!==a?(ia=a,a=ia+1):(ia=0,a=k.length);void 0!==e.scrollMinVal&&(ia=e.scrollMinVal);void 0!==e.scrollMaxVal&&(a=e.scrollMaxVal);if(!(ia>=a)&&(J={"font-weight":l.fontWeight,"font-style":l.fontStyle,"font-family":l.fontFamily,"font-size":l.fontSize,"line-height":l.lineHeight},g.setStyle(J),fa))for(;ia<a;ia++)if(J=(fa=(O=
k[ia])&&O.config)&&fa.setValue,void 0===O||void 0===J||null===J||!0===fa.labelSkip)fa&&delete fa.labelSkip,(xa=O&&O.graphics)&&xa.label&&xa.label.hide();else{U=fa.anchorProps;J=O.graphics;M=O._yPos;O=O._xPos;U=J.element?J.image&&.5*J.element.attr("height")||U.radius-3:0;v=e.valuepadding+2+U;U=fa.valuePosition;switch(U){case "above":Y=0;break;case "below":Y=1;break;default:U=k[ia-1]&&k[ia-1].config||{},Aa=k[ia+1]&&k[ia+1].config||{},K&&d?(U=U.value,ua=Aa.value,Aa=fa.value):(U=U.setValue,ua=Aa.setValue,
Aa=fa.setValue),Y=ia?U>Aa?1:(null==ua&&ua)>Aa?1:0:0}r=fa.displayValue;ua=fa.showValue;U=J.label;void 0!==r&&null!==r&&r!==H&&null!==Aa&&ua?(ua={text:r,fill:l.color,"text-bound":[l.backgroundColor,l.borderColor,l.borderThickness,l.borderPadding,l.borderRadius,l.borderDash]},r=g.getOriSize(r),q?(fa._state={labelWidth:r.height,labelHeight:r.width},fa._rotated=!0):(fa._state={labelWidth:r.width,labelHeight:r.height},fa._rotated=!1),r=N=fa._state.labelHeight,r+=v,v=.5*N+v,N=M-B,Q=B+u-M,r+=4,Y?Q>r?(M+=
v,fa._valueBelowPoint=1):N>r&&(M-=v,fa._valueBelowPoint=0):N>r?(M-=v,fa._valueBelowPoint=0):Q>r&&(M+=v,fa._valueBelowPoint=1),v=Y=!1,U||(T.label&&T.label.length?(J.label=U=T.label.shift(),J.label.show()):(ua.x=O,ua.y=M,ua.transform=p.getSuggestiveRotation(q,O,M),J.label=U=p.text(ua,E),v=!0),h&&b.isRealTime&&!0!==V&&(J=C+A,J=L.getPixel(J),J instanceof Object&&(J=J.x),U.attr({x:J,y:M,transform:p.getSuggestiveRotation(q,J,M)}),A++,Y=!0)),v||U.attr(ua),v&&!Y||U.show().animateWith(f,c,{x:O,y:M,transform:p.getSuggestiveRotation(q,
O,M)},n,m),U.data("isBelow",fa._valueBelowPoint),U.data("rotation",p.getSuggestiveRotation(q,O,M))):U&&U.hide()}},getAxisValuePadding:function(){var a=(this.chart||{}).hasScroll;return{left:a?.5:0,right:a?.5:0}},hidingPosition:function(){return function(){return{polypath:[[2,0,0,0,0,0]],text:""}}},_hoverFunc:function(a,b,e,g){if(e)return this._hoverPlotAnchor(a,b,g)}},"column",{valueposition:void 0,plotborderdashlen:void 0,plotborderdashgap:void 0,plotborderdashstyle:void 0,plotborderthickness:void 0,
linethickness:void 0,linedashlen:void 0,linedashgap:void 0,dashed:void 0,linedashstyle:void 0,linecolor:void 0,linealpha:void 0,anchorbgcolor:void 0,anchorbordercolor:void 0,anchorradius:void 0,anchoralpha:void 0,anchorimageurl:void 0,anchorsides:void 0,anchorbgalpha:void 0,anchorborderthickness:void 0,anchorshadow:void 0,anchorstartangle:void 0,anchorimagealpha:void 0,anchorimagescale:void 0,anchorimagepadding:void 0,alpha:void 0,parentyaxis:void 0}])}]);Q.register("module",["private","modules.renderer.js-dataset-scrollarea2d",
function(){Q.register("component",["dataset","scrollarea2d",{},"area"])}]);Q.register("module",["private","modules.renderer.js-dataset-realtimearea",function(){Q.register("component",["dataset","realtimearea",{_realTimeConfigure:Q.get("component",["dataset","realtimecolumn"]).prototype._realTimeConfigure},"area"])}]);Q.register("module",["private","modules.renderer.js-dataset-radar",function(){var b=this.hcLib,v=this.window.Image,J=b.TOUCH_THRESHOLD_PIXELS,C=b.CLICK_THRESHOLD_PIXELS,H=b.pluck,A=b.pluckNumber,
u=b.toRaphaelColor,a=b.hasTouch?J:C,O=b.getValidValue,q=b.getFirstValue,M=b.regex.dropHypeash,U=b.HASHSTRING,J=b.preDefStr,N=J.hiddenStr,E=J.setRolloverAttrStr,r=J.setRolloutAttrStr,k=Math.max,m=b.graphics.getLightColor,n=b.schedular;Q.register("component",["dataset","radar",{type:"radar",configure:function(){var a=this.config,b=this.chart,l=b.jsonData.chart,k=this.JSONData,b=b.components.colorManager.getPlotColor(this.index);this.__base__.configure.call(this);a.plotfillcolor=H(k.color,l.plotfillcolor,
b);a.plotbordercolor=H(k.plotbordercolor,l.plotbordercolor,l.areabordercolor,b).split(",")[0];a.fillColor.color=a.plotfillcolor;a.legendSymbolColor=a.plotfillcolor},_addLegend:function(){var a=this.chart,b=a.jsonData.chart,l,k;k=this.config;var a=a.components.legend,e=k.legendSymbolColor;l=A(b.use3dlighting,b.useplotgradientcolor,1);b=m(e,60).replace(M,U);l?(l=m(e,40),l={FCcolor:{color:e+","+e+","+l+","+e+","+e,ratio:"0,70,30",angle:270,alpha:"100,100,100,100,100"}}):l={FCcolor:{color:e,angle:0,ratio:"0",
alpha:"100"}};k={enabled:k.includeInLegend,type:this.type,fillColor:u(l),strokeColor:u(b),rawFillColor:e,label:q(this.JSONData.seriesname)};this.legendItemId=a.addItems(this,this.legendInteractivity,k)},_getHoveredPlot:function(a,b){var l=this.chart.components.xAxis[0],k=this.components.data,e,m=k.length,p,n=this.config,r=360/m;e=Math.floor(Math.max(l.getAngle(a-n.maxRadius,b)/r-1,0));for(m=Math.ceil(Math.min(l.getAngle(a+n.maxRadius,b)/r,m-1));m>=e;m--)if(l=k[m])if(p=this.isWithinShape(l,m,a,b))break;
return p},draw:function(){var m=this,g=m.chart,l=g.getJobList(),q=g.graphics,e=g.config,A=g.components,p=m.JSONData,C=g.jsonData.chart,K=m.config,t=m.index,J=p.data||[],P,S,z,R=A.paper,w=A.xAxis[0],F=m.yAxis,X,h,d,f=e.showtooltip,c,D=m.components.data,G,M,U,Q,sa,wa,ca=F.getAxisBase(),ma,A=K.plotbordercolor,qa=K.plotborderalpha,va=K.plotBorderDashStyle,ha=K.plotborderthickness,ra=m.graphics.container,ka=[],na,da,oa=b.parseUnsafeString,Y=!1,za=K.fillColor,fa=g.is3D,Aa=q.areaGroup,ua=g.get("config",
"animationObj"),ia=ua.duration,xa=ua.dummyObj,ja=ua.animObj,ua=ua.animType,ya=ra&&ra.shadowContainer,W=m.graphics.dataLabelContainer,Ma=function(){!1===m.visible&&(ra.areaGroup.hide(),ya.hide(),ra.lineShadowGroup.hide(),ra.anchorShadowGroup.hide(),ra.anchorGroup.hide(),W&&W.hide(),m._conatinerHidden=!0)},ea=function(){ra.areaGroup.attr({"clip-rect":null});!1!==m.visible&&(ra.lineShadowGroup.show(),ra.anchorShadowGroup.show(),ra.anchorGroup.show(),W.show());g._animCallBack()},ga=K.shadow,la,Ca=m.visible,
Ha,pa={};na=q.datalabelsGroup;var La=fa?10:0,q=m.components.removeDataArr||[],fa=q.length,Ja=m.components.pool||{},Fa=!0,ta=0,Ka,Ea,Da=0;K.imagesLoaded=0;ra||(ra=m.graphics.container={lineShadowGroup:R.group("connector-shadow",Aa.areaConnector),anchorShadowGroup:R.group("anchor-shadow",Aa.areaConnector),areaGroup:R.group("area",Aa.area),anchorGroup:R.group("anchors",Aa.areaConnector)},Ca||(ra.lineShadowGroup.hide(),ra.anchorShadowGroup.hide(),ra.areaGroup.hide(),ra.anchorGroup.hide()));ya||(ya=m.graphics.shadowContainer=
Aa.shadows||(Aa.shadows=R.group("shadows",ra.areaGroup).toBack()),Ca||ya.hide());D||(D=m.components.data);W||(W=m.graphics.dataLabelContainer=m.graphics.dataLabelContainer||R.group("datalabel",na),Ca||W.hide());Ca&&(ra.lineShadowGroup.show(),ra.anchorShadowGroup.show(),ra.areaGroup.show(),ra.anchorGroup.show(),W.show());P=w.getCategoryLen();na=w.config.centerX;da=w.config.centerY;for(z=0;z<P;z++)S=J[z]||{},c=(G=D[z])&&G.config,Ka=w.getLabel(z).label,Q=c.setValue,U=c.setLink,pa=c.anchorProps,Ha=pa.shadow,
X=O(oa(H(S.tooltext,p.plottooltext,C.plottooltext))),G.graphics||(G.graphics={}),c&&(ma=0<=Q?c.previousPositiveY:c.previousNegativeY),h=G.graphics,S=h.element,Ea=h.image,null===Q?(!1!==Y?ka.push("L",na,",",da):ka.push("M",na,",",da),Y=!1,S&&S.hide()):(h=F.getAxisPosition(ma||ca)+La,d=m.visible?F.getAxisPosition(Q+(ma||0))+La:h,h=w.getAxisPosition(z,e.canvasTop+e.canvasHeight/2-d),d=h.y,h=h.x,la=c.hoverEffects,M=f?c.toolText+(X?"":c.toolTipValue):"",c.finalTooltext=M,X=c.eventArgs||(c.eventArgs={}),
X.index=z,X.link=U,X.value=Q,X.displayValue=c.displayValue,X.categoryLabel=Ka,X.toolText=M,X.id=m.userID,X.datasetIndex=t||0,X.datasetName=p.seriesname,X.visible=Ca,la.enabled&&(c.setRolloverAttr={polypath:[la.anchorSides||2,h,d,la.anchorRadius,la.startAngle,la.dip],fill:u({color:la.anchorColor,alpha:la.anchorBgAlpha}),stroke:u({color:la.anchorBorderColor,alpha:la.anchorBorderAlpha}),"stroke-width":la.anchorBorderThickness},c.setRolloutAttr={polypath:[pa.symbol[1]||2,h,d,pa.radius,pa.startAngle,0],
fill:u({color:pa.bgColor,alpha:pa.bgAlpha}),stroke:u({color:pa.borderColor,alpha:pa.borderAlpha}),"stroke-width":pa.borderThickness},wa=c.setRolloverAttr,sa=c.setRolloutAttr),pa.imageUrl?(c.anchorImageLoaded=!1,c=new v,c.onload=m._onAnchorImageLoad(m,z,X,h,d),c.onerror=m._onErrorSetter(m,z),c.src=pa.imageUrl,Da++):(Ea&&Ea.hide(),S||(Ja.element&&Ja.element.length?S=G.graphics.element=Ja.element.shift():(S=G.graphics.element=R.polypath(ra.anchorGroup),S.attr({polypath:[pa.symbol[1]||2,h,d,pa.radius,
pa.startAngle,0]}))),S.show().animateWith(xa,ja,{polypath:[pa.symbol[1]||2,h,d,pa.radius,pa.startAngle,0]},ia,ua,Fa&&Ma),Fa=!1,S.attr({fill:u({color:pa.bgColor,alpha:pa.bgAlpha}),stroke:u({color:pa.borderColor,alpha:pa.borderAlpha}),"stroke-width":pa.borderThickness,visibility:pa.radius?Ca:N}).shadow(Ha,ra.anchorShadowGroup).data("anchorRadius",pa.radius).data("anchorHoverRadius",la.anchorRadius).data("hoverEnabled",la.enabled).data("eventArgs",X),la.enabled&&S&&S.data("anchorRadius",pa.radius).data("anchorHoverRadius",
la.anchorRadius).data("hoverEnabled",la.enabled).data(E,wa).data(r,sa).data("eventArgs",X),c.trackerConfig||(c.trackerConfig={}),c.trackerConfig.trackerRadius=k(pa.radius,la&&!0&&la.anchorRadius||0,a)+(pa.borderThickness||0)/2),G._xPos=h,G._yPos=d,G._index=z,Y?(ka.push("L",h,",",d),ta++):(0===z?ka.push("M",h,",",d):ka.push("L",h,",",d),Y=!0));ka.push("Z");K.noOfImages=K.totalImages=Da;0===Da&&l.labelDrawID.push(n.addJob(function(){m.drawLabel()},b.priorityList.label));e=ka.concat([]);l=m.graphics.lineElement;
l||(l=m.graphics.lineElement=R.path(ra.areaGroup),l.attr({path:ka}),ia&&Ca&&(ra.anchorGroup.hide(),ra.anchorShadowGroup.hide(),W.hide(),Aa.scale(.01,.01,na,da).animateWith(xa,ja,{transform:"s1,1"},ia,ua,ea)));l.show().animateWith(xa,ja,{path:e},ia,ua,Fa&&Ma).attr({stroke:u({color:A,alpha:qa}),"stroke-width":ha,fill:u(za),"stroke-linecap":"round","stroke-linejoin":2<ha?"round":"miter","stroke-dasharray":va}).shadow(ga,ya);m.drawn=!0;for(z=0;z<fa;z++)m._removeDataVisuals(q.shift())}},"area"])}]);Q.register("module",
["private","modules.renderer.js-dataset-line",function(){var b=this.hcLib,v=b.Raphael,J=this.window.Image,C=b.pluck,H=b.pluckNumber,A=b.toRaphaelColor,u=b.getCrispValues,a=b.getFirstValue,O=b.preDefStr,q=O.hiddenStr,M=O.setRolloverAttrStr,U=O.setRolloutAttrStr,O=Math,N=O.max,E=O.pow,r=b.schedular;Q.register("component",["dataset","Line",{type:"line",_addLegend:function(){var b=this.config,m=this.chart.components.legend,n=H(b.drawanchors,1),b={enabled:b.includeinlegend,type:this.type,drawLine:C(b.drawLine,
!0),fillColor:A({color:b.anchorbgcolor,alpha:b.anchorbgalpha}),strokeColor:A({color:b.anchorbordercolor,alpha:"100"}),rawFillColor:b.anchorbgcolor,rawStrokeColor:b.anchorbordercolor,anchorSide:n?b.anchorsides:0,strokeWidth:b.anchorborderthickness,label:a(this.JSONData.seriesname),lineWidth:b.linethickness};this.legendItemId=m.addItems(this,this.legendInteractivity,b)},draw:function(){var a,m,n=this,E=n.JSONData,g=n.chart,l=g.getJobList(),B=g.components,e=B.canvas.config.clip,V=n.config,p=V.legendInteractivity,
H=n.index,K=g.config,t=n.components,Z=n.graphics,P=t.data,S=P.length,z=B.paper,R=B.xAxis[0],w=n.yAxis,F=t.removeDataArr||[],X=g.graphics,h=X.datalabelsGroup,d,f,c,D=V.linethickness,G=Z.container,O=K.showtooltip,Q=X.lineGroup,Ia,sa=V.shadow,wa,ca=Z.dataLabelContainer,ma={},qa,va,ha,ra=g.is3D,ka=K.use3dlineshift,na=n.graphics.errorGroupContainer,da=n.graphics.errorShadowContainer,oa=function(){!1!==n.visible||!1!==n._conatinerHidden&&void 0!==n._conatinerHidden||(G.lineGroup.hide(),G.lineShadowGroup.hide(),
G.anchorShadowGroup.hide(),G.anchorGroup.hide(),ca&&ca.hide(),na&&na.hide(),da&&da.hide(),n._conatinerHidden=!0)},Y=function(){Q.lineConnector.attr({"clip-rect":null});Q.lineConnector.node&&Q.lineConnector.node.removeAttribute("clip-path");!1!==n.visible&&(G.lineShadowGroup.show(),G.anchorShadowGroup.show(),G.anchorGroup.show(),ca&&ca.show())},za=!0,fa,Aa,ua,ia=w.getAxisBase(),xa=w.yBasePos=w.getAxisPosition(ia),ja=R.getPVR(),ya,W=ra?10:0,Ma=ra&&ka?10:0,ea=e["clip-canvas"].slice(0),ga=e["clip-canvas-init"].slice(0),
la=B.scrollBar,Ca=g.hasScroll||!1,Ha,pa=V.lineDashStyle,La={color:V.linecolor,alpha:V.alpha},Ja=[A(La),pa].join(":"),Fa,ta,Ka,Ea,Da,Ga=Z.lineElement,Na=n.visible,Ua,Pa,Sa=0,ab=n.drawn,Xa=!0!==ab,Za=n.components.pool||{},bb,eb,Va=n.startPosition,Ya={},$a=S,Ta,kb={},hb=V.lastPath||{},ib,ob,ba=0,Ba=g.config.viewPortConfig,Oa=Ba.x,Qa=Ba.scaleX,I,cb,vb,sb,pb,gb,qb,mb,nb,Fb,Bb,Ab,Hb,wb,Nb,xb,yb,Cb,Ib=V.noOfImages=0,Jb,ub=g.get("config","animationObj"),jb=ub.duration,tb=ub.dummyObj,Wa=ub.animObj,Kb=ub.animType,
zb=!Xa&&jb,Gb,Sb=K.height,fb=K.realTimeConfig&&K.realTimeConfig.clear,Tb=$a,Lb,Mb,Ob,Pb,rb=V.isSkippedData,db=K.canvasTop,Rb=K.canvasBottom,Vb=b.plotEventHandler,Db=Z.sharedAnchor,Qb=Db&&Db.element,Eb=0,lb=g.isRealTime,Ub=function(a){Vb.call(this,g,a)},Zb=function(a){Vb.call(this,g,a,"DataPlotRollOver")},cc=function(a){Vb.call(this,g,a,"DataPlotRollOut")},Xb=void 0!==K.scrollMinVal?K.scrollMinVal:0,Yb=void 0!==K.scrollMaxVal?Math.min(K.scrollMaxVal,Tb):Tb,$b=K.startPathIndex,bc=K.endPathIndex;if($b||
bc)ba=$b-1,xb=bc+1,V.hasSetColor&&(Xb=ba,Yb=xb);if(!(Xb>=Yb)){n.noOfNewDataAtEnd=0;V.hideAnimFlag=!1;V.imagesLoaded=0;Q.lineConnector=Q.lineConnector||z.group("line-connector",Q);G||(G=n.graphics.container={lineShadowGroup:z.group("connector-shadow",Q.lineConnector),anchorShadowGroup:z.group("anchor-shadow",Q.lineConnector),lineGroup:z.group("line",Q.lineConnector),anchorGroup:z.group("anchors",Q.lineConnector)},Na||(G.lineShadowGroup.hide(),G.anchorShadowGroup.hide(),G.lineGroup.hide(),G.anchorGroup.hide()));
P||(P=n.components.data=[]);ca||(ca=n.graphics.dataLabelContainer=n.graphics.dataLabelContainer||z.group("datalabel",h),Na||ca.hide());Na&&(G.lineShadowGroup&&G.lineShadowGroup.show(),G.lineGroup&&G.lineGroup.show(),G.anchorGroup&&G.anchorGroup.show(),n._conatinerHidden=!1,ca.show(),V.attachEvents&&G.anchorGroup.trackTooltip(!0));ya=ja*$a;lb&&(ea[1]=0,ea[3]=Sb,ca.attr({"clip-rect":ea}),G.anchorGroup.attr({"clip-rect":ea}),G.anchorShadowGroup.attr({"clip-rect":ea}),G.lineGroup.attr({"clip-rect":ea}),
G.lineShadowGroup.attr({"clip-rect":ea}));if(fb)for(Ta=0,$a=F.length;Ta<$a;Ta++)n._removeDataVisuals(F.shift());else n._shiftOffRemovedPoints();Ya=V.removePath||{};Nb=G.anchorShadowGroup;for(Ta=Xb;Ta<Yb;Ta++)if(d=P[Ta])ha=d.config||{},pb=ha.setValue,d.graphics&&(cb=d.graphics.element,yb=d.graphics.image),Ob=ha&&ha.isSkipped,void 0===pb||!0===Ob||!1!==rb&&!Xa&&p&&(!Na&&!cb||Na&&cb&&!d._xPos&&!d._yPos)?(cb&&cb.hide(),yb&&yb.hide(),ha&&(ha.isSkipped=!0)):(vb=d.graphics,sb=ha.setLink,Ua=ha.x||Ta,fa=ha.setLevelTooltext,
ma=ha.anchorProps,va=ma.symbol,mb=ma.radius,wa=ma.shadow,nb=ma.startAngle,Fb=ma.bgColor,Bb=ma.bgAlpha,Ab=ma.borderColor,Hb=ma.borderAlpha,wb=ma.borderThickness,qb=ha.displayValue,Pa=ha.dip||0,d||(d=P[Ta]={graphics:{}}),a=ha.setColor,m=ha.setAlpha,ua=ha.dashStyle,Ea=ha.xPos||R.getAxisPosition(Ua)-W+Oa*Qa,Da=!n.visible&&jb?xa:w.getAxisPosition(pb)+Ma,Ea=u(Ea,V.linethickness,V.linethickness).position,Da=u(Da,V.linethickness,V.linethickness).position,Ia=ha.hoverEffects,ma.isAnchorHoverRadius=Ia.anchorRadius,
Lb=Da-mb-wb/2,Mb=Da+mb+wb/2,Lb<db&&(K.toleranceTop=N(K.toleranceTop||0,db-Lb)),Mb>Rb&&(K.toleranceBottom=N(K.toleranceBottom||0,Mb-Rb)),ib=R.getLabel(Ta)||{},I=O?ha.toolText+(fa?"":ha.toolTipValue):"",ha.finalTooltext=I,gb=ha.eventArgs=ha.eventArgs||{},gb.index=Ta,gb.link=sb,gb.value=pb,gb.displayValue=qb,gb.categoryLabel=ib.label,gb.toolText=I,gb.id=V.userID,gb.datasetIndex=H||0,gb.datasetName=E.seriesname,gb.visible=Na,Cb=!1,cb=d.graphics.element,yb=d.graphics.image,Ia.enabled&&(c=ha.setRolloverAttr=
{polypath:[Ia.anchorSides||2,Ea,Da,Ia.anchorRadius,Ia.startAngle,Ia.dip],fill:A({color:Ia.anchorColor,alpha:Ia.anchorBgAlpha}),stroke:A({color:Ia.anchorBorderColor,alpha:Ia.anchorBorderAlpha}),"stroke-width":Ia.anchorBorderThickness},f=ha.setRolloutAttr={polypath:[ma.sides,Ea,Da,ma.radius,ma.startAngle,Pa],fill:A({color:ma.bgColor,alpha:ma.bgAlpha}),stroke:A({color:ma.borderColor,alpha:ma.borderAlpha}),"stroke-width":ma.borderThickness}),null!==pb?(Jb={polypath:[va[1]||2,Ea,Da,mb,nb,ha.dip||0]},!cb&&
zb&&!0!==Va&&(eb=$a+Sa,bb=R.getPixel(eb),d._xPos=bb,d._yPos=Da,hb=n.getLinePath([d],hb),Sa++),Pb=mb&&ma.anchorAlpha,ha.isAnchorsDrawn||V.drawanchors||Pb?ma.imageUrl?(qa=new J,ha.anchorImageLoaded=!1,qa.onload=n._onAnchorImageLoad(n,Ta,gb,Ea,Da,d),qa.onerror=n._onErrorSetter(n,Ta),qa.src=ma.imageUrl,Ib++):(yb&&yb.hide(),cb||(Za.element&&Za.element.length?(cb=vb.element=Za.element.shift(),cb.show().attr({transform:""})):(cb=vb.element=z.polypath(G.anchorGroup),cb.attr(Jb),Cb=!0,ha.isAnchorsDrawn=!0,
Eb++),zb&&lb&&cb.attr({polypath:[va[1]||2,bb,Da,mb,nb,0]})),!ab||Cb&&!lb||cb.show().animateWith(tb,Wa,Jb,jb,Kb,za&&oa),jb||za&&oa(),za=!1,cb.attr({fill:A({color:Fb,alpha:Bb}),stroke:A({color:Ab,alpha:Hb}),"stroke-width":wb,visibility:mb?Na:q}).shadow(wa,Nb).data("anchorRadius",mb).data("anchorHoverRadius",Ia.anchorRadius).data("hoverEnabled",Ia.enabled).data("eventArgs",gb),Ia.enabled&&cb&&cb.data("anchorRadius",ma.radius).data("anchorHoverRadius",Ia.anchorRadius).data(M,c).data(U,f).data("hoverEnabled",
Ia.enabled).data("eventArgs",gb)):cb&&!Pb&&cb.hide(),V.attachEvents&&(Cb&&(cb.tooltip(ha.finalTooltext),cb.click(Ub).hover(Zb,cc)),Cb=!1)):(cb&&cb.hide(),yb&&yb.hide()),d._xPos=Ea,d._yPos=Da,d._polyPath=Jb,d._index=Ta,Ta===Eb||V.drawanchors?Qb&&Qb.hide():Db&&Qb?Qb.hide():n.getAnchor(g,d,!0),Ka=Ja!==[A({color:C(a,La.color),alpha:C(m,La.alpha)}),ua||pa].join(":"),Aa=d.graphics.connector,ob=[],Ka&&(xb=Ta,kb=n.getLinePath(P,{},{begin:ba,end:xb+1}),ha.connStartIndex=ba,ha.connEndIndex=xb,ob=kb.getPathArr(),
ob.length&&(Gb=v.animation({path:ob},jb,Kb,za&&oa),Aa||(Za.connector&&Za.connector.length?Aa=d.graphics.connector=Za.connector.shift():(Aa=d.graphics.connector=z.path(G.lineGroup),Aa.attr({path:ob}))),ab&&Aa.show().animateWith(tb,Wa,Gb),Aa.attr({"stroke-dasharray":ta,"stroke-width":D,stroke:Fa,"stroke-linecap":"round","stroke-linejoin":2<D?"round":"miter"}).shadow(sa,G.lineShadowGroup),ba=Ta,kb={}),xb=null),Ka||ob.length||Aa&&Aa.hide(),null!==pb&&(Fa=A({color:C(a,La.color),alpha:C(m,La.alpha)}),ta=
ua||pa),Ja=[Fa,ta].join(":"));0===Ib&&(!0===ab?n.drawLabel():l.labelDrawID.push(r.addJob(function(){n.drawLabel()},b.priorityList.label)));V.pathStartIndex=ba;V.pathEndIndex=xb;V.noOfImages=V.totalImages=Ib;kb=n.getLinePath(P,{},{begin:ba,end:xb});F&&lb&&(Ya=n.getLinePath(P,Ya));lb&&(V.lastPath=kb);Ga?jb&&lb&&Ga.attr({path:hb.getPathArr()}):Ga=Z.lineElement=z.path({path:kb.getPathArr()},G.lineGroup);fb?Ga.hide():ab&&Ga.show().animateWith(tb,Wa,{path:Ya.getPathArr&&lb?Ya.getPathArr():kb.getPathArr()},
jb,Kb,za&&oa);Ga.attr({"stroke-width":D,"stroke-dasharray":ta,stroke:Fa,"stroke-linecap":"round","stroke-linejoin":2<=D?"round":"miter"}).shadow(sa,G.lineShadowGroup);Ca&&(Ha=la.conf.startPercent,ea[2]=ya+ga[0],1===Ha&&(ga[0]=ea[2],ea[0]=0));ea[3]+=Ma;n._drawTracker&&n._drawTracker();jb&&Na&&!ab&&(G.anchorGroup.hide(),G.anchorShadowGroup.hide(),ca.hide(),Q.lineConnector.attr({"clip-rect":ga}).animateWith(tb,Wa,{"clip-rect":ea},jb,Kb,Y));n.drawn=!0;n.drawErrorValue&&n.drawErrorValue()}},getDataLimits:function(){var a=
this.config,b=a.maxValue,a=a.minValue,n=this.chart.config.transposeAxis;!1===this.visible&&n&&(b=-Infinity,a=Infinity);return{max:b,min:a}},pointValueWatcher:function(a,b,n){var r=n.obj||(n.obj={}),g=n.objX||(n.objX={});null!==b&&(r.max=r.max>b?r.max:b,r.min=r.min<b?r.min:b);null!==a&&(g.max=g.max>a?g.max:a,g.min=g.min<a?g.min:a);n.isRegression&&(a=a||0,b=b||0,n.sumX+=a,n.sumY+=b,n.sumXY+=a*b,n.sumXsqure+=E(a,2),n.xValues.push(a),n.sumYsqure+=E(b,2),n.yValues.push(b))}},"area"])}]);Q.register("module",
["private","modules.renderer.js-dataset-realtimeline",function(){Q.register("component",["dataset","Realtimeline",{_realTimeConfigure:Q.get("component",["dataset","realtimecolumn"]).prototype._realTimeConfigure},"line"])}]);Q.register("module",["private","modules.renderer.js-quadrant",function(){var b=this.hcLib,v=b.pluck,J=b.pluckNumber,C=b.setLineHeight,H=b.graphics.convertColor,A=b.HUNDREDSTRING,u=b.getDashStyle,a=b.getValidValue,O=b.getFirstValue,b=b.preDefStr,q=b.POSITION_START,M=b.POSITION_TOP,
U=b.POSITION_BOTTOM,N=b.POSITION_END;Q.register("component",["quadrant","cartesian",{pIndex:1,init:function(){var a=this.chart.components,b=a.xAxis[0];this.yAxis=a.yAxis[0];this.xAxis=b;this.components={};this.conf={};this.graphics={};this.configure()},configure:function(){var b,r,k,m,n,q,g,l,B,e,V=this.conf;B=this.chart;q=B.config;var p=B.jsonData.chart;r=B.components.canvas.config;var T=q.dataLabelStyle;b=B.linkedItems.smartLabel;if(V.enabled=J(p.drawquadrant,0))B=J(p.quadrantxval),e=J(p.quadrantyval),
l=H(v(p.quadrantlinecolor,r.canvasBorderColor),v(p.quadrantlinealpha,p.quadrantlinealpha,A)),r=J(p.quadrantlinethickness,r.canvasBorderThickness),m=J(p.quadrantlinedashed,p.quadrantlineisdashed,0),k=J(p.quadrantlinedashlen,4),n=J(p.quadrantlinedashgap,2),k=m?u(k,n,r):"none",V.xVal=B,V.yVal=e,V.quadrantLineColor=l,V.quadrantLineThickness=r,V.dashStyle=k,r=a(p.quadrantlabeltl,""),l=a(p.quadrantlabeltr,""),B=a(p.quadrantlabelbl,""),e=a(p.quadrantlabelbr,""),V.quadrantLabelPadding=J(p.quadrantlabelpadding,
3),b.useEllipsesOnOverflow(q.useEllipsesWhenOverflow),b.setStyle(T),""!==r&&(b=O(p.quadrantlabeltlbordercolor,p.quadrantlabelbordercolor,""),m=v(p.quadrantlabeltlbgcolor,p.quadrantlabelbgcolor),q=J(p.quadrantlabeltlborderthickness,p.quadrantlabelborderthickness,1),b=b?H(b,J(p.quadrantlabeltlborderalpha,p.quadrantlabelborderalpha,p.quadrantlabeltlalpha,p.quadrantlabelalpha,100)):"",g=V.tlConfig,g||(g=V.tlConfig={enabled:!0,styleObj:{}}),g.label=r,g.styleObj.fontSize=v(J(p.quadrantlabeltlfontsize,p.quadrantlabelfontsize),
parseInt(T.fontSize,10))+"px",g.styleObj.lineHeight=T.lineHeight,g.styleObj.fontFamily=v(p.quadrantlabeltlfont,p.quadrantlabelfont,T.fontFamily),g.styleObj.color=H(v(p.quadrantlabeltlfontcolor,p.quadrantlabelfontcolor,T.color),J(p.quadrantlabeltlfontalpha,p.quadrantlabelfontalpha,100)),g.styleObj.fontWeight=J(p.quadrantlabeltlfontbold,p.quadrantlabelfontbold)?"bold":"normal",g.styleObj.fontStyle=J(p.quadrantlabeltlfontitalic,p.quadrantlabelfontitalic)?"italic":"normal",C(g.styleObj),r=J(p.quadrantlabeltlborderpadding,
p.quadrantlabelborderpadding,2),k=J(p.quadrantlabeltlborderradius,p.quadrantlabelborderradius,0),m=m?H(m,J(p.quadrantlabeltlbgalpha,p.quadrantlabelbgalpha,p.quadrantlabeltlalpha,p.quadrantlabelalpha,100)):"",n=J(p.quadrantlabeltlborderdashed,p.quadrantlabelborderdashed,0)?u(J(p.quadrantlabeltlborderdashlen,p.quadrantlabelborderdashlen,4),J(p.quadrantlabeltlborderdashgap,p.quadrantlabelborderdashgap,2),q):"none",g["text-bound"]=[m,b,q,r,k,n]),""!==l&&(b=O(p.quadrantlabeltrbordercolor,p.quadrantlabelbordercolor,
""),m=v(p.quadrantlabeltrbgcolor,p.quadrantlabelbgcolor),q=J(p.quadrantlabeltrborderthickness,p.quadrantlabelborderthickness,1),b=b?H(b,J(p.quadrantlabeltrborderalpha,p.quadrantlabelborderalpha,p.quadrantlabeltralpha,p.quadrantlabelalpha,100)):"",l=V.trConfig,l||(l=V.trConfig={enabled:!0,styleObj:{}}),l.label=a(p.quadrantlabeltr,""),l.styleObj.fontSize=v(J(p.quadrantlabeltrfontsize,p.quadrantlabelfontsize),parseInt(T.fontSize,10))+"px",l.styleObj.lineHeight=T.lineHeight,l.styleObj.fontFamily=v(p.quadrantlabeltrfont,
p.quadrantlabelfont,T.fontFamily),l.styleObj.color=H(v(p.quadrantlabeltrfontcolor,p.quadrantlabelfontcolor,T.color),J(p.quadrantlabeltrfontalpha,p.quadrantrabelfontalpha,100)),l.styleObj.fontWeight=J(p.quadrantlabeltrfontbold,p.quadrantlabelfontbold)?"bold":"normal",l.styleObj.fontStyle=J(p.quadrantlabeltrfontitalic,p.quadrantlabelfontitalic)?"italic":"normal",C(l.styleObj),r=J(p.quadrantlabeltrborderpadding,p.quadrantlabelborderpadding,2),k=J(p.quadrantlabeltrborderradius,p.quadrantlabelborderradius,
0),m=m?H(m,J(p.quadrantlabeltrbgalpha,p.quadrantlabelbgalpha,p.quadrantlabeltralpha,p.quadrantlabelalpha,100)):"",n=J(p.quadrantlabeltrborderdashed,p.quadrantlabelborderdashed,0)?u(J(p.quadrantlabeltrborderdashlen,p.quadrantlabelborderdashlen,4),J(p.quadrantlabeltrborderdashgap,p.quadrantlabelborderdashgap,2),q):"none",l["text-bound"]=[m,b,q,r,k,n]),""!==B&&(b=O(p.quadrantlabelblbordercolor,p.quadrantlabelbordercolor,""),m=v(p.quadrantlabelblbgcolor,p.quadrantlabelbgcolor),q=J(p.quadrantlabelblborderthickness,
p.quadrantlabelborderthickness,1),b=b?H(b,J(p.quadrantlabelblborderalpha,p.quadrantlabelborderalpha,p.quadrantlabelblalpha,p.quadrantlabelalpha,100)):"",l=V.blConfig,l||(l=V.blConfig={enabled:!0,styleObj:{}}),l.label=B,l.styleObj.fontSize=v(J(p.quadrantlabelblfontsize,p.quadrantlabelfontsize),parseInt(T.fontSize,10))+"px",l.styleObj.lineHeight=T.lineHeight,l.styleObj.fontFamily=v(p.quadrantlabelblfont,p.quadrantlabelfont,T.fontFamily),l.styleObj.color=H(v(p.quadrantlabelblfontcolor,p.quadrantlabelfontcolor,
T.color),J(p.quadrantlabelblfontalpha,p.quadrantlabelfontalpha,100)),l.styleObj.fontWeight=J(p.quadrantlabelblfontbold,p.quadrantlabelfontbold)?"bold":"normal",l.styleObj.fontStyle=J(p.quadrantlabelblfontitalic,p.quadrantlabelfontitalic)?"italic":"normal",C(l.styleObj),r=J(p.quadrantlabelblborderpadding,p.quadrantlabelborderpadding,2),k=J(p.quadrantlabelblborderradius,p.quadrantlabelborderradius,0),m=m?H(m,J(p.quadrantlabelblbgalpha,p.quadrantlabelbgalpha,p.quadrantlabelblalpha,p.quadrantlabelalpha,
100)):"",n=J(p.quadrantlabelblborderdashed,p.quadrantlabelborderdashed,0)?u(J(p.quadrantlabelblborderdashlen,p.quadrantlabelborderdashlen,4),J(p.quadrantlabelblborderdashgap,p.quadrantlabelborderdashgap,2),q):"none",l["text-bound"]=[m,b,q,r,k,n]),""!==e&&(b=O(p.quadrantlabelbrbordercolor,p.quadrantlabelbordercolor,""),m=v(p.quadrantlabelbrbgcolor,p.quadrantlabelbgcolor),q=J(p.quadrantlabelbrborderthickness,p.quadrantlabelborderthickness,1),b=b?H(b,J(p.quadrantlabelbrborderalpha,p.quadrantlabelborderalpha,
p.quadrantlabelbralpha,p.quadrantlabelalpha,100)):"",B=V.brConfig,B||(B=V.brConfig={enabled:!0,styleObj:{}}),B.label=a(p.quadrantlabelbr,""),B.styleObj.fontSize=v(J(p.quadrantlabelbrfontsize,p.quadrantlabelfontsize),parseInt(T.fontSize,10))+"px",B.styleObj.lineHeight=T.lineHeight,B.styleObj.fontFamily=v(p.quadrantlabelbrfont,p.quadrantlabelfont,T.fontFamily),B.styleObj.color=H(v(p.quadrantlabelbrfontcolor,p.quadrantlabelfontcolor,T.color),J(p.quadrantlabelbrfontalpha,p.quadrantrabelfontalpha,100)),
B.styleObj.fontWeight=J(p.quadrantlabelbrfontbold,p.quadrantlabelfontbold)?"bold":"normal",B.styleObj.fontStyle=J(p.quadrantlabelbrfontitalic,p.quadrantlabelfontitalic)?"italic":"normal",C(B.styleObj),m=m?H(m,J(p.quadrantlabelbrbgalpha,p.quadrantlabelbgalpha,p.quadrantlabelbralpha,p.quadrantlabelalpha,100)):"",r=J(p.quadrantlabelbrborderpadding,p.quadrantlabelborderpadding,2),k=J(p.quadrantlabelbrborderradius,p.quadrantlabelborderradius,0),n=J(p.quadrantlabelbrborderdashed,p.quadrantlabelborderdashed,
0)?u(J(p.quadrantlabelbrborderdashlen,p.quadrantlabelborderdashlen,4),J(p.quadrantlabelbrborderdashgap,p.quadrantlabelborderdashgap,2),q):"none",B["text-bound"]=[m,b,q,r,k,n])},_preDraw:function(){var a,b,k,m,n,q;k=this.conf;var g=this.chart;m=g.components;q=m.yAxis[0];n=m.xAxis[0].getLimit();var l=q.getLimit();m=n.max;q=l.max;var B=n.min;n=l.min;var g=g.config,e=g.canvasWidth,u=g.canvasHeight,g=k.quadrantLabelPadding,l=k.tlConfig,p=k.trConfig,v=k.blConfig,K=k.brConfig;a=k.xVal||(k.xVal=(B+m)/2);
b=k.yVal||(k.yVal=(n+q)/2);if(b>=n&&b<=q&&a>=B&&a<=m){k=e/(m-B)*(a-B);m=e-k;q=u/(q-n)*(b-n);k-=g;n=u-q-g;q-=g;if(0>n||0>k)l.enabled=!1;if(0>n||0>m-g)p.enabled=!1;if(0>q||0>k)v.enabled=!1;if(0>q||0>k)K.enabled=!1}else k.enabled=!1;return this},draw:function(){var a=this._preDraw(),b=a.conf,k=a.chart,m=k.graphics,n=k.config,u=n.reverseXAxis,g=k.components,l=k.linkedItems.smartLabel,a=a.graphics,B=a.tlLabel,e=a.trLabel,v=a.blLabel,p=a.brLabel,A=n.textDirection,K=g.xAxis[0],t=g.yAxis[0],g=g.paper,C=a.container,
P=b.tlConfig||{},H=b.trConfig||{},z=b.blConfig||{},R=b.brConfig||{},P=P.enabled&&P.label,H=H.enabled&&H.label,z=z.enabled&&z.label,R=R.enabled&&R.label,w=n.canvasLeft,F=n.canvasTop,J=b.quadrantLabelPadding,h=K.getLimit(),d=t.getLimit(),f=u?h.min:h.max,c=d.max,d=d.min,u=K.getPixel(u?h.max:h.min)+J,f=K.getPixel(f)-J,d=t.getPixel(d)-J,J=t.getPixel(c)+J,K=K.getPixel(b.xVal),D=t.getPixel(b.yVal),t=K-u,c=f-K,h=D-J,G=d-D,O=a.horizontalQuadLine,Q=a.verticalQuadLine,Ia=k.get("config","animationObj"),k=Ia.duration||
0,sa=Ia.dummyObj,Ia=Ia.animObj,wa=!1;b.enabled?(C||(wa=!0,C=a.container=g.group("quadrant").insertBefore(m.datasetGroup)),C.animateWith(sa,Ia,{"clip-rect":n.canvasLeft+","+n.canvasTop+","+n.canvasWidth+","+n.canvasHeight},wa?0:k),O||(O=a.horizontalQuadLine=g.path(C)),O.animateWith(sa,Ia,{path:"M"+w+" "+D+"h"+n.canvasWidth},k).attr({stroke:b.quadrantLineColor,"stroke-dasharray":b.dashStyle,"stroke-width":b.quadrantLineThickness,"stroke-linecap":"butt"}),Q||(Q=a.verticalQuadLine=g.path(C)),Q.animateWith(sa,
Ia,{path:"M"+K+" "+F+"v"+n.canvasHeight},k).attr({stroke:b.quadrantLineColor,"stroke-width":b.quadrantLineThickness,"stroke-dasharray":b.dashStyle,"stroke-linecap":"butt"}),P?(B||(B=a.tlLabel=g.text(C).attr({"text-anchor":q,"vertical-align":M}).css(b.tlConfig.styleObj)),l.useEllipsesOnOverflow(n.useEllipsesWhenOverflow),l.setStyle(b.tlConfig.styleObj),m=l.getSmartText(P,t,h),P&&B.animateWith(sa,Ia,{x:u,y:J},wa?0:k).attr({text:m.text,direction:A,"text-bound":b.tlConfig["text-bound"]}).show()):B&&B.hide(),
H?(e||(e=a.trLabel=g.text(C).attr({"text-anchor":N,"vertical-align":M,direction:A}).css(b.trConfig.styleObj)),l.setStyle(b.trConfig.styleObj),m=l.getSmartText(H,c,h),H&&e.animateWith(sa,Ia,{x:f,y:J},wa?0:k).attr({text:m.text,"text-bound":b.trConfig["text-bound"]}).show()):e&&e.hide(),z?(v||(v=a.blLabel=g.text(C).attr({"text-anchor":q,"vertical-align":U,direction:A}).css(b.blConfig.styleObj)),l.setStyle(b.blConfig.styleObj),m=l.getSmartText(z,t,G),z&&v.animateWith(sa,Ia,{x:u,y:d},wa?0:k).attr({text:m.text,
"text-bound":b.blConfig["text-bound"]}).show()):v&&v.hide(),R?(p||(p=a.brLabel=g.text(C).attr({"text-anchor":N,"vertical-align":U,direction:A}).css(b.brConfig.styleObj)),l.setStyle(b.brConfig.styleObj),m=l.getSmartText(R,c,G),R&&p.animateWith(sa,Ia,{x:f,y:d},wa?0:k).attr({text:m.text,"text-bound":b.brConfig["text-bound"]}).show()):p&&p.hide()):C&&C.hide()}}])}]);Q.register("module",["private","modules.renderer.js-dataset-scatter",function(){var b=this.hcLib,v=this.window.Image,J=b.BLANKSTRING,C=b.BGRATIOSTRING,
H=b.extend2,A=b.pluck,u=b.pluckNumber,a=b.toRaphaelColor,O=b.graphics.getDarkColor,q=b.getFirstAlpha,M=b.HUNDREDSTRING,U=b.getFirstValue,N=b.parseTooltext,E=b.preDefStr,r=E.hiddenStr,k=E.setRolloverAttrStr,m=E.setRolloutAttrStr,E=Math,n=E.max,L=E.pow,g=b.getFirstColor,l=b.graphics.getLightColor,B=b.schedular;Q.register("component",["dataset","Scatter",{type:"scatter",configure:function(){var e,l,k,m=this.chart,n=m.components,t=b.parseUnsafeString,r=this.config,B=this.JSONData,v=m.areaAlpha,z=m.jsonData.chart,
E=n.colorManager;e=u(B.showplotborder,z.showplotborder||1);var w=E.getPlotColor(this.index),F=r.lineDashed=u(B.linedashed,B.dashed,z.linedashed,0),C=this.isLineSet;r.plotColor=w;k=u(m.defaultPlotShadow,E.getColor("showShadow"));r.xAxisLabelMode=A(z.xaxislabelmode,"categories");r.toolTipSepChar=A(z.tooltipsepchar,", ");r.parentYAxis=C?l=1:l="s"===A(B.parentyaxis&&B.parentyaxis.toLowerCase(),"p")?1:0;this.yAxis=n.yAxis[l];r.connectNullData=u(z.connectnulldata,0);r.includeInLegend=u(B.includeinlegend,
1);r.enableAnimation=l=u(z.animation,z.defaultanimation,1);r.animation=l?{duration:1E3*u(z.animationduration,1)}:!1;r.transposeanimation=u(z.transposeanimation,l);r.transposeanimduration=1E3*u(z.transposeanimduration,.2);r.showValues=u(B.showvalues,z.showvalues);r.valuePadding=u(z.valuepadding,2);r.valuePosition=A(B.valueposition,z.valueposition,"auto");r.showTooltip=u(z.showtooltip,1);r.seriesNameInTooltip=u(z.seriesnameintooltip,1);r.showRegressionLine=u(B.showregressionline,z.showregressionline,
0);r.plotFillColor=A(B.color,z.plotfillcolor,w);r.plotFillAngle=A(z.plotfillangle,270);r.plotFillAlpha=A(B.alpha,z.plotfillalpha,v,"70");v=u(z.useplotgradientcolor,1);r.plotGradientColor=0!==v?b.getDefinedColor(z.plotgradientcolor,E.getColor("plotGradientColor")):"";r.fillColor={color:r.plotFillColor+(r.plotGradientColor?","+r.plotGradientColor:J),alpha:r.plotFillAlpha,angle:r.plotFillAngle};r.plotBorderAlpha=e?A(B.plotborderalpha,z.plotborderalpha,B.alpha,"95"):0;r.plotBorderColor=A(B.plotbordercolor,
z.plotbordercolor,z.areabordercolor,"666666");r.dashed=e=u(B.dashed,z.plotborderdashed);r.plotBorderDashLen=A(B.plotborderdashlen,z.plotborderdashlen,5);r.plotBorderDashGap=A(B.plotborderdashgap,z.plotborderdashgap,4);r.plotBorderThickness=u(B.plotborderthickness,z.plotborderthickness,1);r.plotBorderDashStyle=e?b.getDashStyle(r.plotBorderDashLen,r.plotBorderDashGap,r.plotBorderThickness):"none";r.showHoverEffect=u(z.plothovereffect,z.anchorhovereffect,z.showhovereffect,void 0);r.rotateValues=u(z.rotatevalues)?
270:0;r.drawLine=u(B.drawline,z.drawlines,0);r.lineThickness=u(B.linethickness,z.linethickness,2);r.lineDashLen=u(B.linedashlen,z.linedashlen,5);r.lineDashGap=u(B.linedashgap,z.linedashgap,4);r.lineAlpha=u(B.linealpha,z.linealpha,B.alpha,M);r.lineColor=A(B.linecolor,z.linecolor,B.color,r.plotColor);r.lineDashStyle=b.getDashStyle(r.lineDashLen,r.lineDashGap,r.lineThickness);r.lineDashStyle=F?r.lineDashStyle:"none";r.shadow={opacity:u(z.showshadow,k)?r.lineAlpha/100:0};r.drawanchors=u(B.drawanchors,
B.showanchors,z.drawanchors,z.showanchors);r.anchorbgcolor=g(A(B.anchorbgcolor,z.anchorbgcolor,E.getColor("anchorBgColor")));r.anchorbordercolor=g(A(B.anchorbordercolor,B.color,z.anchorbordercolor,r.lineColor));r.anchorradius=u(B.anchorradius,z.anchorradius,3);r.anchoralpha=A(B.anchoralpha,B.alpha,z.anchoralpha,M);r.anchorbgalpha=A(B.anchorbgalpha,B.alpha,z.anchorbgalpha,M);r.anchorborderthickness=A(B.anchorborderthickness,z.anchorborderthickness,1);r.anchorsides=u(B.anchorsides,z.anchorsides,this.index+
3);r.anchorimageurl=A(B.anchorimageurl,z.anchorimageurl);r.anchorimagealpha=u(B.anchorimagealpha,z.anchorimagealpha,100);r.anchorimagescale=u(B.anchorimagescale,z.anchorimagescale,100);r.anchorimagepadding=u(B.anchorimagepadding,z.anchorimagepadding,1);r.anchorstartangle=u(B.anchorstartangle,z.anchorstartangle,90);r.anchorshadow=u(B.anchorshadow,z.anchorshadow,0);r.plotToolText=b.getValidValue(t(A(B.plottooltext,z.plottooltext)));r.showRegressionLine&&(r.regressionObj={isRegression:!0,sumX:0,sumY:0,
sumXY:0,sumXsqure:0,sumYsqure:0,xValues:[],yValues:[]},r.showYOnX=u(B.showyonx,z.showyonx,1),r.regressionLineColor=g(A(B.regressionlinecolor,z.regressionlinecolor,r.anchorbordercolor)),r.regressionLineThickness=u(B.regressionlinethickness,z.regressionlinethickness,r.anchorborderthickness),r.regressionLineAlpha=q(u(B.regressionlinealpha,z.regressionlinealpha,r.anchoralpha)),r.regLineColor=a({color:r.regressionLineColor,alpha:r.regressionLineAlpha}));r.seriesNameInTooltip&&(r.seriesname=b.getFirstValue(B&&
B.seriesname));this.visible=1===u(B.visible,!Number(B.initiallyhidden),1);this._setConfigure();!1!==m.hasLegend&&this._addLegend()},_setConfigure:function(){var a,g,l,k,m,t,n,r,q,B=-Infinity,v=Infinity,w=Infinity,F=-Infinity,E=this.components.data||(this.components.data=[]);a=this.chart;var h=b.parseUnsafeString,d=this.config,f=this.JSONData,c=a.jsonData.chart,D=f.data||[],G=D.length,C=a.components.numberFormatter,L=h(c.yaxisname),H=h(c.xaxisname),M=d.lineDashed,O=d.lineDashStyle,U=d.parentYAxis,
Q=d.toolTipSepChar,qa=d.seriesname;for(a=d.imageCount=0;a<G;a+=1)k=D[a],l=E[a]||(E[a]={}),g=l.config||(l.config={}),g.setValue=m={x:C.getCleanValue(k.x),y:C.getCleanValue(k.y)},null!==m.x&&null!==m.y&&(m.x>F&&(F=m.x,d.rightMostData=l),m.x<w&&(w=m.x,d.leftMostData=l),m.y>B&&(B=m.y,d.topMostData=l),m.y<v&&(v=m.y,d.bottomMostData=l)),d.showRegressionLine&&this.pointValueWatcher(m.x,m.y,d.regressionObj),g.setLink=A(k.link),g.anchorProps=this._parseAnchorProperties(a),g.showValue=u(k.showvalue,d.showValues),
g.dashed=u(k.dashed,M),g.color=A(k.color,d.lineColor),g.alpha=A(k.alpha,d.lineAlpha),g.dashStyle=g.dashed?O:"none",g.toolTipValue=t=C.dataLabels(m.y,U),g.setDisplayValue=q=h(k.displayvalue),r=g.formatedVal=A(k.toolTipValue,C.dataLabels(m.y,U)),n=C.xAxis(m.x),g.displayValue=A(q,t),g.setTooltext=b.getValidValue(h(A(k.tooltext,d.plotToolText))),d.showTooltip?void 0!==g.setTooltext?(m=[4,5,6,7,8,9,10,11],n={yaxisName:L,xaxisName:H,yDataValue:r,xDataValue:n},k=N(g.setTooltext,m,n,k,c,f)):null===r?k=!1:
(k=qa?qa+Q:J,k+=m.x?n+Q:J,k+=t):k=!1,g.toolText=k,l?l.graphics||(E[a].graphics={}):l=E[a]={graphics:{}},g.hoverEffects=this._parseHoverEffectOptions(l),g.anchorProps.isAnchorHoverRadius=g.hoverEffects.anchorRadius;d.xMax=F;d.xMin=w;d.yMin=v;d.yMax=B;d.showRegressionLine&&(d.regressionData=this.getRegressionLineSeries(d.regressionObj,d.showYOnX,G));this.ErrorValueConfigure&&this.ErrorValueConfigure()},sortFN:function(a,b){return a-b},_getHoveredPlot:function(a,b){var g=this.dataTree.getNeighbour({x:a,
y:b},!0);if(g)return{pointIndex:g.index||g.i,hovered:!0,pointObj:g.data}},manageSpace:function(){var a=this.config||(this.config={}),b=this.chart,g=b.config.rotatevalues,l=b.components.xAxis[0],k=b.components.yAxis[0],m=l.config.isReverse,r=b.config.dataLabelStyle,q=(this.components||{}).data||[],B=a.leftMostData||q[0],z=a.rightMostData||q[q.length-1],q=a.topMostData,a=a.bottomMostData,v,w,F,E=l.config.axisRange,h=E.max,d=k.config.axisRange,f=d.min,d=d.max,E=l.getPixel(E.min),c=l.getPixel(h),D={};
F={};var G=0,A=0,C,D=b.linkedItems.smartLabel,h={paddingLeft:0,paddingRight:0};F=0;m&&(B=z=B);if(B){v=B.config;B=v.anchorProps.radius;if(C=v.showValue)F=v.displayValue,D.useEllipsesOnOverflow(b.config.useEllipsesWhenOverflow),D.setStyle(r),F=D.getOriSize(F),F=g?F.height:F.width;null!==v.setValue&&(b=l.getPixel(v.setValue.x),A=m?c-(b-.5*F):E-(b-.5*F),G=!m&&b-B<=E||m&&b-B<=c?m?c-(b-B):E-(b-B):0);h.paddingLeft=n(A,G)}z&&(v=z.config,C=v.showValue,B=v.anchorProps.radius,C&&(F=v.displayValue,D.setStyle(r),
D=D.getOriSize(F),F=g?D.height:D.width),null!==v.setValue&&(b=l.getPixel(v.setValue.x),g=b-E+.5*F,A=g-c+E,m&&(A=g),G=!m&&b+B>=c||m&&b+B>=E?m?b+B-E:b+B-c:0),h.paddingRight=n(A,G));q&&(m=(v=q.config)&&v.anchorProps||{},B=v.anchorProps.radius||0,d=k.getPixel(d),null!==v.setValue&&(w=k.getPixel(v.setValue.y),G=u(B,0)+u(m.borderThickness,0)/2),h.paddingTop=0<d-(w-G)?d-(w-G):0);a&&(m=(v=a.config)&&v.anchorProps||{},B=v.anchorProps.radius||0,f=k.getPixel(f),null!==v.setValue&&(w=k.getPixel(v.setValue.y),
G=u(B,0)+u(m.borderThickness,0)/2),h.paddingBottom=0<w+G-f?w+G-f:0);return h},getRegressionLineSeries:function(a,b,g){var l,k,m,n;n=a.sumXY;var r=a.sumX,q=a.sumY;k=a.xValues;m=a.sumXsqure;l=a.yValues;a=a.sumYsqure;b?(k.sort(this.sortFN),l=k[0],k=k[k.length-1],n=(g*n-r*q)/(g*m-L(r,2)),m=!isNaN(n)&&isFinite(n)?n*(l-r/g)+q/g:q/g,g=!isNaN(n)&&isFinite(n)?n*(k-r/g)+q/g:q/g,g=[{x:l,y:m},{x:k,y:g}]):(l.sort(this.sortFN),m=l[0],l=l[l.length-1],n=(g*n-r*q)/(g*a-L(q,2)),k=isNaN(n)?r/g:n*(m-q/g)+r/g,g=isNaN(n)?
r/g:n*(l-q/g)+r/g,g=[{x:k,y:m},{x:g,y:l}]);return g},draw:function(){var e,g,l,q,u,t,E,C,L,z,H,w,F,J,h,d,f,c,D,G=this,N=G.JSONData,M=G.chart,O=M.getJobList(),U=M.components,Q=G.components.removeDataArr,Q=Q&&Q.length,ca=M.jsonData.chart,ma=G.config,qa=G.index,va=N.data||[],ha=M.config,ra=U.paper,ka=U.xAxis[0],U=U.yAxis[0],na=b.parseUnsafeString,da=b.getValidValue,oa=G.components.data,Y=oa.length;f={};g={};var za=ma.lineThickness;g=M.graphics;t=g.datalabelsGroup;var fa=G.graphics.container,Aa=G.graphics.trackerContainer;
J=g.trackerGroup;var ua=G.pool||(G.pool={}),ia=ma.connectNullData,xa=ma.showTooltip;g=g.datasetGroup;var ja=ma.shadow,ya=G.graphics.dataLabelContainer,W=G.visible;u={};var Ma=this.searchDataArr=[],ea=[n(0,ha.canvasLeft),n(0,ha.canvasTop),n(1,ha.canvasWidth),n(1,ha.canvasHeight)],ha=[n(0,ha.canvasLeft),n(0,ha.canvasTop),1,n(1,ha.canvasHeight)],ga=ma.lineDashStyle,la={color:ma.lineColor,alpha:ma.lineAlpha},Ca=[],Ha=[],pa=null,La=[],Ja=!1,Fa=G.graphics.lineElement;u=G.graphics.regressionLineElement;
var ta=M.get("config","animationObj"),M=ta.duration||0,Ka=ta.dummyObj,Ea=ta.animObj,ta=ta.animType,Da=0;ma.imagesLoaded=0;g.line=g.line||ra.group("line",g);g.lineConnector=g.lineConnector||ra.group("line-connector",g);fa||(fa=G.graphics.container={lineShadowGroup:ra.group("connector-shadow",g.lineConnector),anchorShadowGroup:ra.group("anchor-shadow",g.lineConnector),lineGroup:ra.group("connector",g.lineConnector),anchorGroup:ra.group("anchors",g.lineConnector)});Aa||(Aa=G.graphics.trackerContainer=
ra.group("line-hot"));oa||(oa=G.components.data=[]);J&&J.appendChild(Aa);ya||(ya=G.graphics.dataLabelContainer=ra.group("datalabel",t).attr("class","fusioncharts-datalabels"));ma.showRegressionLine&&W?(t=ma.regressionData[0],J=ma.regressionData[1],(g=ma._regressionAttr)||(ma._regressionAttr=g={}),g.stroke=ma.regLineColor,g["stroke-width"]=ma.regressionLineThickness,g["stroke-linecap"]="round",g["stroke-linejoin"]=2<ma.regressionLineThickness?"round":"miter",g.path="M "+ka.getAxisPosition(t.x)+","+
U.getAxisPosition(t.y)+" L "+ka.getAxisPosition(J.x)+","+U.getAxisPosition(J.y),u?u.animateWith(Ka,Ea,g,M,ta):u=G.graphics.regressionLineElement=ra.path(g,fa.regLineGroup),u.show()):u&&u.hide();for(t=0;t<Y;t+=1)if(u=va[t],J=oa[t],c=J.config,l=c.trackerConfig={},g=J.graphics,w=c.setValue,H=c.setLink,da(na(A(u.tooltext,N.plottooltext,ca.plottooltext))),u=c.anchorProps,f=u.symbol,h=u.shadow,F=c.displayValue,J||(J=oa[t]={graphics:{}}),q=w.y,e=w.x,L=c.finalTooltext=c.toolText,null!==q&&null!==e){d=c.hoverEffects;
E=ka.getAxisPosition(e);C=U.getAxisPosition(q);c.eventArgs={index:t,link:H,x:e,y:q,value:w,displayValue:F,toolText:L,id:ma.userID,datasetIndex:qa||0,datasetName:N.seriesname,visible:W};if(u.imageUrl)c.anchorImageLoaded=!1,l=new v,c.anchorImageLoaded=!1,W||g.image&&g.image.animateWith(Ka,Ea,{opacity:0},M,ta),l.onload=this._onAnchorImageLoad(G,t,void 0,E,C),l.onerror=this._onErrorSetter(G,t),l.src=u.imageUrl,Da++;else if(z=g.element,(w=g.image)&&w.hide(),z||(z=ua.element&&ua.element.length?g.element=
ua.element.shift():g.element=ra.polypath(fa.anchorGroup),Ja=!0,M&&Ja&&z.attr({polypath:[f[1]||2,E,C,u.radius,u.startAngle,0],opacity:0,"fill-opacity":0,"stroke-opacity":0})),z.attr({fill:a({color:u.bgColor,alpha:u.bgAlpha}),stroke:a({color:u.borderColor,alpha:u.borderAlpha}),"stroke-width":u.borderThickness,cursor:H?"pointer":"",visibility:u.radius?W:r}).shadow(h,fa.anchorShadowGroup).animateWith(Ka,Ea,{polypath:[f[1]||2,E,C,u.radius,u.startAngle,0],opacity:W?u.bgAlpha/100:0,"fill-opacity":W?u.bgAlpha/
100:0,"stroke-opacity":W?u.borderAlpha/100:0},M,ta),H||xa||d)g=n(u.radius,d.anchorRadius||0),l.trackerRadius=g;d.enabled&&(g={polypath:[d.anchorSides||2,E,C,d.anchorRadius,d.startAngle,d.dip],fill:a({color:d.anchorColor,alpha:d.anchorBgAlpha}),stroke:a({color:d.anchorBorderColor,alpha:d.anchorBorderAlpha}),"stroke-width":d.anchorBorderThickness},f={polypath:[f[1]||2,E,C,u.radius,u.startAngle,0],fill:a({color:u.bgColor,alpha:u.bgAlpha}),stroke:a({color:u.borderColor,alpha:u.borderAlpha}),"stroke-width":u.borderThickness},
z&&z.data("hoverEnabled",d.enabled).data("anchorRadius",u.radius).data("anchorHoverRadius",d.anchorRadius).data(k,g).data(m,f));u.isAnchorHoverRadius=d.anchorRadius;null!==pa?(La.length&&(Ca=Ca.concat(La),La.length=0),Ca.join("")||Ca.push("M",D,pa),Ca.push("L",E,C)):La.push("M",E,C);D=E;pa=C;J._xPos=E;J._yPos=C;z&&z.data("eventArgs",c&&c.eventArgs);Ma.push({x:E,y:C,index:t,data:J,r:u.radius||0})}else La.length=0,ia||(pa=null);this.dataTree=(new b.KdTree).buildKdTree(Ma);Ca.length&&(Ha=Ha.concat(Ca));
ma.drawLine&&Ha.join("")?(Fa||(Fa=G.graphics.lineElement=ra.path({path:Ha},fa.lineGroup),Ja=!0),W&&Fa.attr({"stroke-dasharray":ga,"stroke-width":za,stroke:a(la),"stroke-linecap":"round","stroke-linejoin":2<=za?"round":"miter"}),W?Fa.animateWith(Ka,Ea,{path:Ha,"stroke-opacity":1},M,ta,function(){this.shadow(ja,fa.lineShadowGroup)}):Fa.animateWith(Ka,Ea,{path:Ha,"stroke-opacity":0},Ja?0:M,ta).shadow(!1)):Fa&&Fa.animateWith(Ka,Ea,{"stroke-opacity":0},M,ta).shadow(!1);ma.totalImages=ma.noOfImages=Da;
0===Da&&(G.drawn?G.drawLabel():O.labelDrawID.push(B.addJob(function(){G.drawLabel()},b.priorityList.label)));fa.lineShadowGroup.hide();fa.anchorShadowGroup.hide();ya.hide();Ja&&fa.lineGroup.attr({"clip-rect":ha});fa.lineGroup.animateWith(Ka,Ea,{"clip-rect":ea},M,ta,function(){fa.lineGroup.attr({"clip-rect":null});W?(fa.lineShadowGroup.show(),fa.anchorShadowGroup.show(),fa.anchorGroup.show(),Aa.show(),ya&&ya.show()):(fa.lineShadowGroup.hide(),fa.anchorShadowGroup.hide(),fa.anchorGroup.hide(),Aa.hide(),
ya&&ya.hide())});Q&&G.remove();G.drawErrorValue&&G.drawErrorValue();G.drawn=!0},getDataLimits:function(){var a=this.config,b=a.yMax,g=a.yMin,l=a.xMax,a=a.xMin,k=this.chart.config.transposeAxis;!1===this.visible&&k&&(b=-Infinity,g=Infinity,l=-Infinity,a=Infinity);return{max:b,min:g,xMax:l,xMin:a}},getAxisValuePadding:function(){return{left:0,right:0}},_addLegend:function(){var b,g=this.config,l=this.chart.components.legend,k=u(g.drawanchors,1);b=this.getPointColor(g.anchorbgcolor,M);var m={FCcolor:{color:g.anchorbordercolor,
alpha:g.anchoralpha}};l.config.symbol3DLighting?b&&b.FCcolor?(b=H({},b),b.FCcolor.alpha="100"):b=A(b):b={FCcolor:{color:A(b&&(b.FCcolor&&b.FCcolor.color.split(",")[0]||b)),angle:0,ratio:"0",alpha:"100"}};this.legendItemId=l.addItems(this,this.legendInteractivity,{enabled:g.includeInLegend,type:this.type,drawLine:A(g.drawLine,!0),fillColor:a(b),strokeColor:a(A(m&&(m.FCcolor&&m.FCcolor.color.split(",")[0]||m))),rawFillColor:g.anchorbgcolor,rawStrokeColor:g.anchorbordercolor,anchorSide:k?g.anchorsides:
0,strokeWidth:g.anchorborderthickness,label:U(this.JSONData.seriesname)})},getPointColor:function(a,b){var k,m;a=g(a);b=q(b);k=l(a,70);m=O(a,50);return{FCcolor:{gradientUnits:"objectBoundingBox",cx:.4,cy:.4,r:"100%",color:k+","+m,alpha:b+","+b,ratio:C,radialGradient:!0}}}},"Line"])}]);Q.register("module",["private","modules.renderer.js-dataset-pareto",function(){var b=this.hcLib,v=b.extend2,J=b.pluck,C=b.pluckNumber,H=b.toRaphaelColor,A=b.graphics.convertColor,u=b.HUNDREDSTRING,a=b.getValidValue,
O=Math,q=O.min,M=O.max,U=O.abs,N=b.getFirstColor,E=b.graphics.getLightColor;Q.register("component",["dataset","Pareto",{configure:function(){var r=this.chart,k=this.config,m=r.components,n=m.xAxis[0],L=this.JSONData,g=L.data,l=g&&g.length,B=r.jsonData.chart,e=m.colorManager,V,p=e.getPlotColor(this.index||this.positionIndex),T=C(L.dashed,B.plotborderdashed),K=C(B.useplotgradientcolor,1),t=C(B.showtooltip,1),Z=b.parseUnsafeString,P=Z(B.yaxisname),S=Z(B.xaxisname),z=b.parseTooltext,R,w,F,X,h,d,f,c,D,
G,O,Q,Ia,sa,wa,ca=b.getDashStyle,ma=this.components.data,m=m.numberFormatter,qa,va=r.is3D,ha,ra,ka,na,da,oa,Y,za,fa=-Infinity,Aa=Infinity,ua=this.type.toLowerCase(),ia,xa,ja=0,ya=[],W=0,Ma,ea=k.tootipSepChar=J(B.tooltipsepchar,", ");k.enableAnimation=f=C(B.animation,B.defaultanimation,1);k.animation=f?{duration:1E3*C(B.animationduration,1)}:!1;k.showTooltip=C(B.showtooltip,1);k.valuePadding=C(B.valuepadding,2);k.rotateValues=C(B.rotatevalues)?270:0;k.showHoverEffect=f=C(B.plothovereffect,B.showhovereffect,
void 0);k.showShadow=d||va?C(B.showshadow,1):C(B.showshadow,e.getColor("showShadow"));k.useDataPlotColorForLabels=Ma=C(B.usedataplotcolorforlabels,0);k.use3dlineshift=C(B.use3dlineshift,r.use3dlineshift);/column/.test(ua)&&(V=k.showplotborder=C(B.showplotborder,va?0:1),k.plotDashLen=F=C(B.plotborderdashlen,5),k.plotDashGap=X=C(B.plotborderdashgap,4),k.plotfillangle=c=C(360-B.plotfillangle,90),k.plotfillalpha=D=J(B.plotfillalpha,u),k.plotColor=p,k.isRoundEdges=d=C(B.useroundedges,0),k.plotRadius=C(B.useRoundEdges,
k.isRoundEdges?1:0),k.plotfillratio=G=J(B.plotfillratio),k.plotgradientcolor=O=b.getDefinedColor(B.plotgradientcolor,e.getColor("plotGradientColor")),!K&&(O=""),k.plotborderalpha=Q=V&&!va?J(B.plotborderalpha,D,u):0,k.plotbordercolor=Ia=J(B.plotbordercolor,va?"#ffffff":e.getColor("plotBorderColor")),k.plotborderthickness=h=C(B.plotborderthickness,1),k.plotBorderDashStyle=sa=T?ca(F,X,h):"none",k.showValues=C(B.showvalues,1),k.definedGroupPadding=M(C(B.plotspacepercent),0),k.plotSpacePercent=M(C(B.plotspacepercent,
20)%100,0),k.maxcolwidth=C(B.maxcolwidth,50),k.plotpaddingpercent=C(B.plotpaddingpercent),k.placevaluesinside=C(B.placevaluesinside,0),k.use3dlighting=C(B.use3dlighting,1),k.parentYAxis=0);"line"===ua&&(k.linecolor=N(J(B.linecolor,e.getColor("plotBorderColor"))),k.linethickness=C(B.linethickness,2),k.linealpha=J(B.linealpha,u),k.linedashed=C(B.linedashed,0),k.linedashlen=C(L.linedashlen,B.linedashlen,5),k.linedashgap=C(L.linedashgap,B.linedashgap,4),T=b.getDashStyle(k.linedashlen,k.linedashgap,k.linethickness),
k.lineDashStyle=k.linedashed?T:"none",k.drawanchors=C(B.drawanchors,B.showanchors),k.anchorbgcolor=J(B.anchorbgcolor,e.getColor("anchorBgColor")),k.anchorbordercolor=J(B.anchorbordercolor,k.linecolor),k.anchorradius=C(B.anchorradius,3),k.anchoralpha=J(B.anchoralpha),k.anchorbgalpha=J(B.anchorbgalpha,100),k.anchorborderthickness=J(B.anchorborderthickness,1),k.anchorsides=J(B.anchorsides,0),k.anchorimageurl=J(B.anchorimageurl),k.anchorimagealpha=C(B.anchorimagealpha,100),k.anchorimagescale=C(B.anchorimagescale,
100),k.anchorimagepadding=C(B.anchorimagepadding,1),k.anchorstartangle=C(B.anchorstartangle,90),k.parentYAxis=1,k.valuePosition=J(B.valueposition,"auto"),k.showValues=C(B.showlinevalues,B.showvalues,1),k.showShadow&&(k.shadow={opacity:k.lineAlpha/100}),k.showCumulativeLine=C(B.showcumulativeline,1),k.maxRadius=-Infinity);ma||(ma=this.components.data=[]);for(T=0;T<l;T++)K=U(m.getCleanValue(g[T].value)),ja+=K,ya[T]=v({},g[T]),ya[T].value=K;ya.sort(function(a,c){return c.value-a.value});for(T=k.imageCount=
0;T<l;T++)K=ya[T],(p=ma[T])||(p=ma[T]={graphics:{}}),p.config||(g=ma[T].config={}),r=U(m.getCleanValue(K.value)),null!==r&&(g=p&&p.config,qa=n.getLabel(T),g.label=a(Z(J(qa.label))),g.showValue=C(K.showvalue,k.showValues),g.setValue=r,g.setLink=J(K.link),g.setDisplayValue=qa=Z(K.displayvalue),W+=g.setValue,ia=m.dataLabels(r),/column/.test(ua)?(p=C(K.dashed),R=C(K.dashlen,F),wa=X=C(K.dashgap,X),g.plotBorderDashStyle=R=1===p?ca(R,wa,h):0===p?"none":sa,p=e.getPlotColor(T),p=J(K.color,p),G=J(K.ratio,k.plotfillratio),
D=J(K.alpha,k.plotfillalpha),Q=J(K.alpha,k.plotborderalpha),0>r&&!d&&(w=c,c=360-c),g.colorArr=wa=b.graphics.getColumnColor(p+","+O,D,G,c,d,Ia,Q.toString(),0,va?!0:!1),0!==f&&(ha=J(K.hovercolor,B.plotfillhovercolor,B.columnhovercolor,p),ra=J(K.hoveralpha,B.plotfillhoveralpha,B.columnhoveralpha,D),ka=J(K.hovergradientcolor,B.plothovergradientcolor,O),!ka&&(ka=""),G=J(K.hoverratio,B.plothoverratio,G),na=C(360-K.hoverangle,360-L.hoverangle,360-B.plothoverangle,c),da=J(K.borderhovercolor,B.plotborderhovercolor,
Ia),Q=J(K.borderhoveralpha,L.borderhoveralpha,B.plotborderhoveralpha,B.plotfillhoveralpha,Q,D),D=C(K.borderhoverthickness,L.borderhoverthickness,B.plotborderhoverthickness,h),oa=C(K.borderhoverdashed,B.plotborderhoverdashed),Y=C(K.borderhoverdashgap,B.plotborderhoverdashgap,F),za=C(K.borderhoverdashlen,B.plotborderhoverdashlen,X),oa=oa?ca(za,Y,D):R,1==f&&ha===p&&(ha=E(ha,70)),ha=b.graphics.getColumnColor(ha+","+ka,ra,G,na,d,da,Q.toString(),0,va?!0:!1),g.setRolloutAttr={fill:va?[H(wa[0]),!k.use3dlighting]:
H(wa[0]),stroke:V&&H(wa[1]),"stroke-width":h,"stroke-dasharray":R},g.setRolloverAttr={fill:va?[H(ha[0]),!k.use3dlighting]:H(ha[0]),stroke:V&&H(ha[1]),"stroke-width":D,"stroke-dasharray":oa}),Ma&&n.updateCategory(T,{labelfontcolor:A(p)}),g.displayValue=J(qa,ia),R=g.setTooltext=g.origToolText=a(Z(J(K.tooltext,B.plottooltext))),g.toolTipValue=m.dataLabels(r,k.parentYAxis)):(r=g.setValue=W/ja*100,xa=m.percentValue(r),g.toolTipValue=xa,g.displayValue=xa,g.valuePosition=J(K.valueposition,k.valuePosition),
g.anchorProps=this._parseAnchorProperties(T,ya),g.hoverEffects=this._parseHoverEffectOptions(p),p=g.anchorProps,k.maxRadius=Math.max(k.maxRadius,p.radius+p.borderThickness/2)),p=g.toolTipValue,fa=M(fa,r),Aa=q(Aa,r),t?(k.showTooltip?void 0!==R?(r={formattedValue:p,label:g.label,yaxisName:P,xaxisName:S,cumulativeValue:W,cumulativeDataValue:m.dataLabels(W),cumulativePercentValue:xa,sum:m.dataLabels(ja),unformattedSum:ja},p=[1,2,3,5,6,7,20,21,22,23,24,25],K=z(R,p,r,K,B)):K=g.label?g.label+ea:"":K=!1,
g.toolText=K):K=!1,g.toolText=K,g.tooltext=R,g.setTooltext=K,w&&(c=w));k.maxValue=fa;k.minValue=Aa},init:function(a,b,m){var n=a.chart.components;a.JSONData={data:b};a.type=m;a.yAxis="line"===m?n.yAxis[1]:n.yAxis[0];a.components={};a.graphics={};a.visible=!0;this.configure.call(a)}}])}]);Q.register("module",["private","modules.renderer.js-dataset-mssplinearea",function(){var b=this.hcLib,v=this.window.Image,J=b.TOUCH_THRESHOLD_PIXELS,C=b.CLICK_THRESHOLD_PIXELS,H=b.toRaphaelColor,A=b.hasTouch?J:C,
J=b.preDefStr,u=J.hiddenStr,a=J.setRolloverAttrStr,O=J.setRolloutAttrStr,J=Math,q=J.sqrt,M=J.min,U=J.max,N=J.abs,E=b.schedular;Q.register("component",["dataset","MSSplineArea",{configure:function(){Q.get("component",["dataset","area"]).prototype.configure.call(this);this._calculateMaxMin()},_calculateMaxMin:function(){var a=this.config,b=this.chart,m=b.config,n=b.origRenderWidth,q=m.connectnulldata,g=this.components.data,l=Number.MIN_VALUE,B=Number.MAX_VALUE;0===m.minimizetendency&&(b=b.getSplineExtremities(g,
n,q),a.maxValue=U(a.maxValue,b.max),a.minValue=M(a.minValue,b.min),a.maxValue===l&&(a.maxValue=0),a.minValue===B&&(a.minValue=0))},getSplinePath:function(a,b,m,n){var u=function(a,c,b,d){c=(d-c)/q((b-a)*(b-a)+(d-c)*(d-c));c=N(.5*c);return a*c+b*(1-c)},g=function(a,c,b,d){var e=a.length,f=a[e-1],g=f.length,h=f[0],f=f[g-2];3>g||("R"!==h&&"C"!==h||3!==g||(a[e-1][0]="L"),c&&a.push(["L",f,d,b,d,"Z"]))},l=/area/ig.test(this.defaultDatasetType),B=[null],e=[],v=[],p=b.getAxisBase();b=b.getAxisPosition(p);
var E,K,t,A,C,H,z,J,w,F,M,h,d,f,c,D;c=0;for(D=a.length;c<D;c+=1)if(w=a[c],t=a[c-1]||{},A=a[c+1]||{},C=w.x,p=w.y,E=t.x,t=t.y,H=A.x,A=A.y,z=w.lastYPos,J=w.lastXPos,M=e.length,w=v.length,n)if(null!==z)if(K=d,c===a.length-1){z=B[c-h-1];w=H=(C+E)/2;M=(w-E)*z+t;if(t>p&&M<p||t<p&&M>p)M=p,w=(M-t)/z+E;d.push(w,M,H,(p+t)/2,C,p);e.push(d);v.push(d);l&&g(e,!0,f,b);l&&g(v,!1)}else{z=B[c-h-1];if(t>p&&A>=p||t<p&&A<=p)if(F=0,H=u(E,t,C,p),A=p,1!==c-h){w=H;M=(w-E)*z+t;if(t>p&&M<p||t<p&&M>p)M=p,w=(M-t)/z+E;d.push(w,
M,H,A,C,p)}else d.push((C+E)/2,(p+t)/2,H,A,C,p);else if(t===p)F=0,d.push(E,t,C,p,C,p);else if(t>p&&p>A||t<p&&p<A){F=(A-t)/(H-E);H=u(E,t,C,p);A=(H-C)*F+p;if(t>p&&A>t||t<p&&A<t)A=t,H=(A-p)/F+C;if(1!==c-h){w=H;M=(w-E)*z+t;if(t>p&&M<p||t<p&&M>p)M=p,w=(M-t)/z+E;d.push(w,M,H,A,C,p)}else d.push((C+E)/2,(p+t)/2,H,A,C,p)}B.push(F)}else null===z&&0!==c?(K||(K=[]),"C"===K[0]&&(e.push(d),v.push(d),l&&g(e,!0,f,b),l&&g(v,!1)),e.push(["M",C,p]),v.push(["M",C,p]),f=C,d=["C"],h=c,B=[null]):(e.push(["M",C,p]),v.push(["M",
C,p]),f=C,d=["C"],h=c);else null!==z?2<=M?("M"===e[M-1][0]&&e.push(["R"]),"M"===v[w-1][0]&&v.push(["R"]),M=e.length,w=v.length,K=e[M-1],E=K.length,e[M-1].push(C),e[M-1].push(p),v[w-1].push(C),v[w-1].push(p),c===m-1&&"R"===K[0]&&(g(e,!0,f,b),g(v,!1))):(e.push(["M",J,z]),e.push(["R",C,p]),v.push(["M",J,z]),v.push(["R",C,p]),f=J):null===z&&2<=M&&(K=e[M-1],"R"===K[0]&&(g(e,!0,f,b),g(v,!1)),e.push(["M",C,p]),v.push(["M",C,p]),f=C);K=e[e.length-1];l&&K&&(E=K.length,"Z"===K[E-1]||"R"!==K[0]&&"C"!==K[0]||
(g(e,!0,f,b),g(v,!1)));l||(e=n?e:v,2<=e.length&&g(e,!1));return{closedPath:e,openPath:v}},draw:function(){var r=this,k=r.config,m=r.chart,n=m.getJobList(),q=r.JSONData,g=m.config,l=m.components,B=l.canvas.config,e=r.index,C,p,J=l.paper,l=l.xAxis[0],K=r.yAxis,t,N,P,M,z=null,R=[],w=[],F=m.graphics,X=g.showtooltip,h,d=r.components.data,f,c,D,G,aa,Q=g.connectnulldata,Ia,sa,wa=g.minimizetendency,ca=K.getAxisBase(),ma,qa=k.plotbordercolor,va=k.plotborderalpha,ha=k.plotBorderDashStyle,ra=k.plotborderthickness,
ka=r.graphics.container,na=[],da,oa=k.fillColor,Y=F.areaGroup,za=m.get("config","animationObj"),fa=za.duration,Aa=za.animType,ua=r.components.removeDataArr||[],ia=ua.length,xa=ka&&ka.shadowContainer,ja=r.graphics.dataLabelContainer,ya=function(){!1!==r.visible||!1!==r._conatinerHidden&&void 0!==r._conatinerHidden||(ka.areaGroup.hide(),xa.hide(),ka.lineShadowGroup.hide(),ka.anchorShadowGroup.hide(),ka.anchorGroup.hide(),ja&&ja.hide(),r._conatinerHidden=!0)},W=function(){Y.area.attr({"clip-rect":null});
Y.area.node&&Y.area.node.removeAttribute("clip-path");!1!==r.visible&&(ka.lineShadowGroup.show(),ka.anchorShadowGroup.show(),ka.anchorGroup.show(),ja.show(),xa.show())},Ma=k.shadow,ea,ga=r.visible,la,na={},na=F.datalabelsGroup,F=B.clip["clip-canvas"].slice(0),B=B.clip["clip-canvas-init"].slice(0),g=!g.drawfullareaborder,Ca=!0,Ha=r.components.pool||[],pa=za.dummyObj,za=za.animObj,La=r.graphics.connector,Ja=0,Fa;k.imagesLoaded=0;ka||(ka=r.graphics.container={lineShadowGroup:J.group("connector-shadow",
Y.areaConnector),anchorShadowGroup:J.group("anchor-shadow",Y.areaConnector),areaGroup:J.group("area",Y.area),anchorGroup:J.group("anchors",Y.areaConnector)},ga||(ka.lineShadowGroup.hide(),ka.anchorShadowGroup.hide(),ka.areaGroup.hide(),ka.anchorGroup.hide()));xa||(xa=r.graphics.shadowContainer=J.group("shadows",Y.shadows),ga||xa.hide());d||(d=r.components.data);ja||(ja=r.graphics.dataLabelContainer=r.graphics.dataLabelContainer||J.group("datalabel",na),ga||ja.hide());ga&&(ka.lineShadowGroup.show(),
ka.anchorShadowGroup.show(),ka.areaGroup.show(),ka.anchorGroup.show(),ja.show(),xa.show());C=l.getCategoryLen();da=r.graphics.splineElement;for(p=0;p<C;p++)if(f=d[p])h=f&&f.config,aa=h.setValue,G=h.setLink,na=h.anchorProps,la=na.shadow,t=h.setLevelTooltext,h&&(ma=0<=aa?h.previousPositiveY:h.previousNegativeY),D=f.graphics.element,N=f.graphics.hotElement,Fa=f.graphics.image,null===aa?(D&&D.hide(),N&&N.hide(),Fa&&Fa.hide(),Q||(z=null)):(K.getAxisPosition(ma||ca),P=K.getAxisPosition(aa+(ma||0)),N=l.getAxisPosition(p),
!1===ga&&fa&&(P=K.getPixel(K.getAxisBase())),ea=h.hoverEffects,c=X?h.toolText+(t?"":h.toolTipValue):"",h.finalTooltext=c,t=h.eventArgs=h.eventArgs||{},t.index=p,t.link=G,t.value=aa,t.displayValue=h.displayValue,t.categoryLabel=l.getLabel(p).label,t.toolText=c,t.id=r.userID,t.datasetIndex=e||0,t.datasetName=q.seriesname,t.visible=ga,ea.enabled&&(h.setRolloverAttr={polypath:[ea.anchorSides||2,N,P,ea.anchorRadius,ea.startAngle,ea.dip],fill:H({color:ea.anchorColor,alpha:ea.anchorBgAlpha}),stroke:H({color:ea.anchorBorderColor,
alpha:ea.anchorBorderAlpha}),"stroke-width":ea.anchorBorderThickness},h.setRolloutAttr={polypath:[na.symbol[1]||2,N,P,na.radius,na.startAngle,0],fill:H({color:na.bgColor,alpha:na.bgAlpha}),stroke:H({color:na.borderColor,alpha:na.borderAlpha}),"stroke-width":na.borderThickness},sa=h.setRolloverAttr,Ia=h.setRolloutAttr),G=[na.symbol[1]||2,N,P,na.radius,na.startAngle,0],na.imageUrl?(h.anchorImageLoaded=!1,Ja++,h=new v,h.onload=r._onAnchorImageLoad(r,p,t,N,P),h.onerror=r._onErrorSetter(r,p),h.src=na.imageUrl):
(Fa&&Fa.hide(),D||(Ha.element&&Ha.element.length?D=f.graphics.element=Ha.element.shift():(D=f.graphics.element=J.polypath(ka.anchorGroup),D.attr({polypath:G}))),Fa&&Fa.hide(),D.show().animateWith(pa,za,{polypath:G},fa,Aa,Ca&&void 0).attr({fill:H({color:na.bgColor,alpha:na.bgAlpha}),stroke:H({color:na.borderColor,alpha:na.borderAlpha}),"stroke-width":na.borderThickness,visibility:na.radius?ga:u}).shadow(la,ka.anchorShadowGroup).data("anchorRadius",na.radius).data("anchorHoverRadius",ea.anchorRadius).data("eventArgs",
t),ea.enabled&&D&&D.data("anchorRadius",na.radius).data("anchorHoverRadius",ea.anchorRadius).data("hoverEnabled",ea.enabled).data(a,sa).data(O,Ia),h.trackerConfig||(h.trackerConfig={}),h.trackerConfig.trackerRadius=U(na.radius,ea&&ea.anchorRadius||0,A)+(na.borderThickness||0)/2),f._xPos=N,f._yPos=P,w.push({x:N,y:P,lastXPos:M,lastYPos:z}),M=N,z=P);k.noOfImages=k.totalImages=Ja;0===Ja&&n.labelDrawID.push(E.addJob(function(){r.drawLabel()},b.priorityList.label));na=this.getSplinePath.call(m,w,K,C,wa).closedPath;
na=na.join();da||(da=r.graphics.splineElement=J.path(ka.areaGroup),da.attr({path:na}),fa&&ga&&(ka.anchorGroup.hide(),ka.anchorShadowGroup.hide(),ja.hide(),xa.hide(),Y.area.attr({"clip-rect":B}).animateWith(pa,za,{"clip-rect":F},fa,Aa,W)));""===na?da.hide():da.show().animateWith(pa,za,{path:na},fa,Aa,Ca&&ya);Ca=!1;da.attr({stroke:H({color:qa,alpha:va}),"stroke-width":g?0:ra,fill:H(oa),"stroke-linecap":"round","stroke-linejoin":2<ra?"round":"miter","stroke-dasharray":ha}).shadow(Ma,xa);g&&(La||(La=
r.graphics.connector=J.path(ka.areaGroup)),La.animateWith(pa,za,{path:R},fa,Aa),La.attr({stroke:H({color:qa,alpha:va}),"stroke-width":ra,"stroke-linecap":"round","stroke-linejoin":2<ra?"round":"miter","stroke-dasharray":ha}));for(p=0;p<ia;p++)r._removeDataVisuals(ua.shift())}},"area"])}]);Q.register("module",["private","modules.renderer.js-dataset-msspline",function(){var b=this.hcLib,v=this.window.Image,J=b.TOUCH_THRESHOLD_PIXELS,C=b.CLICK_THRESHOLD_PIXELS,H=b.pluck,A=b.toRaphaelColor,u=b.hasTouch?
J:C,J=b.preDefStr,a=J.hiddenStr,O=J.setRolloverAttrStr,q=J.setRolloutAttrStr,J=Math,M=J.sqrt,U=J.max,N=J.abs,E=b.schedular;Q.register("component",["dataset","MSSpline",{type:"spline",configure:function(){var a=Q.get("component",["dataset","line"]),b=Q.get("component",["dataset","MSSplineArea"]);a.prototype.configure.call(this);b.prototype._calculateMaxMin.call(this)},getSplinePath:function(a,b,m){var n=function(a,c,b,d){c=(d-c)/M((b-a)*(b-a)+(d-c)*(d-c));c=N(.5*c);return a*c+b*(1-c)},q=function(a,
c,b,d){var e=a.length,f=a[e-1],g=f.length,h=f[0],f=f[g-2];3>g||("R"!==h&&"C"!==h||3!==g||(a[e-1][0]="L"),c&&a.push(["L",f,d,b,d,"Z"]))},g=this.chart,l=/area/ig.test(g.defaultDatasetType);b=b.getAxisPosition(b.getAxisBase());var g=g.config.minimizetendency,B=[null],e=[],u=[],p,v,K,t,E,A,C,z,H,w,F,J,h,d,f,c,D;c=0;for(D=a.length;c<D;c+=1)if(w=a[c],t=a[c-1]||{},E=a[c+1]||{},A=w.x,K=w.y,p=t.x,t=t.y,C=E.x,E=E.y,z=w.lastYPos,H=w.lastXPos,J=e.length,w=u.length,g)if(null!==z)if(v=d,c===a.length-1){z=B[c-h-
1];w=C=(A+p)/2;J=(w-p)*z+t;if(t>K&&J<K||t<K&&J>K)J=K,w=(J-t)/z+p;d.push(w,J,C,(K+t)/2,A,K);e.push(d);u.push(d);l&&q(e,!0,f,b);l&&q(u,!1)}else{z=B[c-h-1];if(t>K&&E>=K||t<K&&E<=K)if(F=0,C=n(p,t,A,K),E=K,1!==c-h){w=C;J=(w-p)*z+t;if(t>K&&J<K||t<K&&J>K)J=K,w=(J-t)/z+p;d.push(w,J,C,E,A,K)}else d.push((A+p)/2,(K+t)/2,C,E,A,K);else if(t===K)F=0,d.push(p,t,A,K,A,K);else if(t>K&&K>E||t<K&&K<E){F=(E-t)/(C-p);C=n(p,t,A,K);E=(C-A)*F+K;if(t>K&&E>t||t<K&&E<t)E=t,C=(E-K)/F+A;if(1!==c-h){w=C;J=(w-p)*z+t;if(t>K&&J<
K||t<K&&J>K)J=K,w=(J-t)/z+p;d.push(w,J,C,E,A,K)}else d.push((A+p)/2,(K+t)/2,C,E,A,K)}B.push(F)}else null===z&&0!==c?(v||(v=[]),"C"===v[0]&&(e.push(d),u.push(d),l&&q(e,!0,f,b),l&&q(u,!1)),e.push(["M",A,K]),u.push(["M",A,K]),f=A,d=["C"],h=c,B=[null]):(e.push(["M",A,K]),u.push(["M",A,K]),f=A,d=["C"],h=c);else null!==z?2<=J?("M"===e[J-1][0]&&e.push(["R"]),"M"===u[w-1][0]&&u.push(["R"]),J=e.length,w=u.length,v=e[J-1],p=v.length,e[J-1].push(A),e[J-1].push(K),u[w-1].push(A),u[w-1].push(K),c===m-1&&"R"===
v[0]&&(q(e,!0,f,b),q(u,!1))):(e.push(["M",H,z]),e.push(["R",A,K]),u.push(["M",H,z]),u.push(["R",A,K]),f=H):null===z&&2<=J&&(v=e[J-1],"R"===v[0]&&(q(e,!0,f,b),q(u,!1)),e.push(["M",A,K]),u.push(["M",A,K]),f=A);v=e[e.length-1];l&&v&&(p=v.length,"Z"===v[p-1]||"R"!==v[0]&&"C"!==v[0]||(q(e,!0,f,b),q(u,!1)));l||(e=g?e:u,2<=e.length&&q(e,!1));return{closedPath:e,openPath:u}},draw:function(){var r=this,k=r.JSONData,m=[],n=[],C=r.chart,n=C.getJobList(),g=C.components,l=g.canvas.config,B=r.config,e=C.config,
J=r.index||r.positionIndex,p=e.categories,N=g.paper,K=g.xAxis[0],t=r.yAxis,M,P,S=C.graphics,z=S.datalabelsGroup,R=b.parseUnsafeString,w=b.getValidValue,F,X,h,d,f,c,D=r.components.data,G,g=B.linethickness,aa=r.graphics.container,Q=e.connectnulldata,e=e.showtooltip,Ia=S.datasetGroup,sa,S=B.shadow,wa=r.graphics.dataLabelContainer,ca={},ma,qa,ca=C.get("config","animationObj"),C=ca.duration,va=ca.animType,ha=r.components.removeDataArr||[],ra=ha.length,ka=r.components.pool||[],na=function(){!1!==r.visible||
!1!==r._conatinerHidden&&void 0!==r._conatinerHidden||(aa.lineGroup.hide(),aa.lineShadowGroup.hide(),aa.anchorShadowGroup.hide(),aa.anchorGroup.hide(),wa&&wa.hide())},da=function(){Ia.lineConnector.attr({"clip-rect":null});Ia.lineConnector.node&&Ia.lineConnector.node.removeAttribute("clip-path");!1!==r.visible&&(aa.lineShadowGroup.show(),aa.anchorShadowGroup.show(),aa.anchorGroup.show(),wa&&wa.show())},oa=r.config.animFlag=r.config.animFlag||(r.config.animFlag=!0),Y=l.clip["clip-canvas"].slice(0),
l=l.clip["clip-canvas-init"].slice(0),za=null,fa,Aa=!1,ua=B.lineDashStyle,ia={color:B.linecolor,alpha:B.alpha},xa,ja,ya,W=ca.dummyObj,Ma=ca.animObj,ea=0,ca=r.graphics.SplineElement,ga=r.visible;B.imagesLoaded=0;Ia.lineConnector=Ia.lineConnector||N.group("line-connector",Ia);aa||(aa=r.graphics.container={lineShadowGroup:N.group("connector-shadow",Ia.lineConnector),anchorShadowGroup:N.group("anchor-shadow",Ia.lineConnector),lineGroup:N.group("spline",Ia.lineConnector),anchorGroup:N.group("anchors",
Ia.lineConnector)},ga||(aa.lineShadowGroup.hide(),aa.anchorShadowGroup.hide(),aa.lineGroup.hide(),aa.anchorGroup.hide()));D||(D=r.components.data=[]);wa||(wa=r.graphics.dataLabelContainer=r.graphics.dataLabelContainer||N.group("datalabel",z),ga||wa.hide());ga&&(aa.lineShadowGroup.show(),aa.anchorShadowGroup.show(),aa.lineGroup.show(),aa.anchorGroup.show(),wa.show());ja=K.getCategoryLen();for(xa=0;xa<ja;xa++)if(z=D[xa])qa=z.config,d=qa.setValue,h=qa.setLink,f=qa.setLevelTooltext,ca=qa.anchorProps,
ma=ca.symbol,G=ca.shadow,c=qa.displayValue,z||(z=D[xa]={graphics:{}}),X=z.graphics.element,ya=z.graphics.image,P=z.graphics.label,M=z.graphics.hotElement,null===d?(X&&X.hide(),P&&P.hide(),M&&M.hide(),ya&&ya.hide(),Q||(za=null)):(M=K.getAxisPosition(xa),P=t.getAxisPosition(d),sa=qa.hoverEffects,ca.isAnchorHoverRadius=sa.anchorRadius,!1===ga&&C&&(P=t.getPixel(t.getAxisBase())),w(R(H(p[xa].tooltext,p[xa].label))),F=e?qa.toolText+(f?"":qa.toolTipValue):"",qa.finalTooltext=F,f=qa.eventArgs||(qa.eventArgs=
{}),f.index=xa,f.link=h,f.value=d,f.displayValue=c,f.categoryLabel=K.getLabel(xa).label,f.toolText=F,f.id=B.userID,f.datasetIndex=J||0,f.datasetName=k.seriesname,f.visible=ga,ca.imageUrl?(qa.anchorImageLoaded=!1,X=new v,X.onload=r._onAnchorImageLoad(r,xa,f,M,P),X.onerror=r._onErrorSetter(r,xa),X.src=ca.imageUrl,ea++):(ya&&ya.hide(),h=[ma[1]||2,M,P,ca.radius,ca.startAngle,0],X||(ka.element&&ka.element.length?X=z.graphics.element=ka.element.shift():(X=z.graphics.element=N.polypath(aa.anchorGroup),X.attr({polypath:h}))),
X.show().animateWith(W,Ma,{polypath:h},C,va,oa&&na),X.attr({fill:A({color:ca.bgColor,alpha:ca.bgAlpha}),stroke:A({color:ca.borderColor,alpha:ca.borderAlpha}),"stroke-width":ca.borderThickness,visibility:ca.radius?ga:a}).shadow(G,aa.anchorShadowGroup).data("eventArgs",f),oa=!1,sa.enabled&&(h={polypath:[sa.anchorSides||2,M,P,sa.anchorRadius,sa.startAngle,sa.dip],fill:A({color:sa.anchorColor,alpha:sa.anchorBgAlpha}),stroke:A({color:sa.anchorBorderColor,alpha:sa.anchorBorderAlpha}),"stroke-width":sa.anchorBorderThickness},
G={polypath:[ca.sides,M,P,ca.radius,ca.startAngle,0],fill:A({color:ca.bgColor,alpha:ca.bgAlpha}),stroke:A({color:ca.borderColor,alpha:ca.borderAlpha}),"stroke-width":ca.borderThickness},X&&X.data("anchorRadius",ca.radius).data("anchorHoverRadius",sa.anchorRadius).data("hoverEnabled",sa.enabled).data(O,h).data(q,G)),qa.trackerConfig||(qa.trackerConfig={}),qa.trackerConfig.trackerRadius=U(ca.radius,sa&&sa.anchorRadius||0,u)+(ca.borderThickness||0)/2),m.push({x:M,y:P,lastXPos:fa,lastYPos:za}),fa=M,za=
P,z._xPos=M,z._yPos=P,!ca.imageUrl&&this.drawLabel(xa));B.noOfImages=B.totalImages=ea;0===ea&&n.labelDrawID.push(E.addJob(function(){r.drawLabel()},b.priorityList.label));n=r.getSplinePath(m,t).closedPath;ca=r.graphics.SplineElement;2<=n.length?(ca||(ca=r.graphics.SplineElement=N.path(n,aa.lineGroup),Aa=!0),ca.show().animateWith(W,Ma,{path:n},C,va,oa&&na),ca.attr({"stroke-dasharray":ua,"stroke-width":g,stroke:A(ia),"stroke-linecap":"round"}).shadow(S,aa.lineShadowGroup),oa=!1):ca&&ca.hide();C&&ga&&
Aa&&(aa.anchorGroup.hide(),aa.lineShadowGroup.hide(),aa.anchorShadowGroup.hide(),wa.hide(),Ia.lineConnector.attr({"clip-rect":l}).animateWith(W,Ma,{"clip-rect":Y},C,va,da));r.drawn=!0;for(xa=0;xa<ra;xa++)r._removeDataVisuals(ha.shift())}},"Line"])}]);Q.register("module",["private","modules.renderer.js-dataset-bubble",function(){var b=this.hcLib,v=b.BLANKSTRING,J=b.TOUCH_THRESHOLD_PIXELS,C=b.CLICK_THRESHOLD_PIXELS,H=b.pluck,A=b.pluckNumber,u=b.toRaphaelColor,a=b.graphics.convertColor,O=b.getFirstAlpha,
q=b.hasTouch?J:C,M=b.getValidValue,J=b.preDefStr,U=J.visibleStr,N=J.setRolloverAttrStr,E=J.setRolloutAttrStr,r=Math,k=r.round,m=r.min,n=r.max,L=r.sqrt,g=b.getFirstColor,l=b.graphics.getLightColor,B=b.schedular;Q.register("component",["dataset","Bubble",{type:"bubble",configure:function(){var e=this.chart,k=e.config,p=e.components,e=e.jsonData.chart,r=this.JSONData,q=this.config,t=r.data||[],B,v=k.zMax||-Infinity,E,z,C,w;B=p.colorManager;E=this.index;var p=p.numberFormatter,F,L=b.parseUnsafeString,
h=H(L(e.tooltipsepchar),", "),d,f,c,D,G,J,N=-Infinity,U=Infinity,Q=-Infinity,wa=Infinity,ca=-Infinity,ma=Infinity,qa,va=b.graphics.getPointColor;q.includeInLegend=A(r.includeinlegend,1);q.seriesname=L(r.seriesname);q.anchorBgColor=H(r.color,r.plotfillcolor,e.plotfillcolor,B.getPlotColor(E));q.showPlotBorder=A(r.showplotborder,e.showplotborder,1);q.anchorBorderThickness=q.showPlotBorder?A(r.plotborderthickness,e.plotborderthickness,1):0;q.anchorBorderColor=g(H(r.plotbordercolor,e.plotbordercolor,"666666"));
q.plotFillAlpha=H(r.plotfillalpha,r.bubblefillalpha,e.plotfillalpha,"100");q.plotBorderAlpha=H(r.plotborderalpha,e.plotborderalpha,"95");q.negativeColor=H(e.negativecolor,"FF0000");q.is3d=0!==A(e.use3dlighting,r.is3d,e.is3d);q.bubbleScale=A(e.bubblescale,1);q.minBubbleRadius=A(e.minbubbleradius);q.clipBubbles=A(e.clipbubbles,1);q.showRegressionLine=A(r.showregressionline,e.showregressionline,0);q.enableAnimation=B=A(e.animation,e.defaultanimation,1);q.animation=B?{duration:1E3*A(e.animationduration,
1)}:!1;q.showTooltip=A(e.showtooltip,1);q.transposeAnimation=A(e.transposeanimation,B);q.transposeAnimDuration=1E3*A(e.transposeanimduration,.2);q.seriesNameInTooltip=A(e.seriesnameintooltip,1);q.rotateValues=A(e.rotatevalues)?270:0;q.showHoverEffect=A(e.plothovereffect,e.showhovereffect,void 0);q.showValues=A(r.showvalues,e.showvalues,0);C=this.components.data=this.components.data||(this.components.data=[]);B=t.length;q.showRegressionLine&&(this.events={hide:this.hideRLine,show:this.showRLine},F=
{sumX:0,sumY:0,sumXY:0,sumXsqure:0,sumYsqure:0,xValues:[],yValues:[],isRegression:!0},q.showYOnX=A(r.showyonx,e.showyonx,1),q.regressionLineColor=g(H(r.regressionlinecolor,e.regressionlinecolor,q.anchorBgColor)),q.regressionLineThickness=A(r.regressionlinethickness,e.regressionlinethickness,1),q.regressionLineAlpha=O(A(r.regressionlinealpha,e.regressionlinealpha,100)),q.regLineColor=a(q.regressionLineColor,q.regressionLineAlpha));q.fillColor=q.is3d?u(va(q.anchorBgColor,q.plotFillAlpha)):u({color:q.anchorBgColor,
alpha:q.plotFillAlpha});q.strokeColor=u({color:q.anchorBorderColor,alpha:q.plotFillAlpha});for(E=0;E<B;E++)if(f=t[E],z=C[E]=C[E]||(C[E]={}),!z.graphics&&(z.graphics={}),c=z.config={},c.x=p.getCleanValue(f.x),c.y=p.getCleanValue(f.y),c.z=p.getCleanValue(f.z,!0),c.showValue=A(f.showvalue,q.showValues),c.anchorProps={},J=c.label=c.x,c.setLink=M(f.link),q.max=ca=n(ca,c.z||0),q.min=ma=m(ma,c.z||0),c.is3d=0!==A(f.is3d,q.is3d),N=n(N,c.x),U=m(U,c.x),Q=n(Q,c.y),wa=m(wa,c.y),z=c.color=g(H(f.color,0>f.z?q.negativeColor:
q.anchorBgColor)),w=c.alpha=H(f.alpha,q.plotFillAlpha),c.colorObj=qa=c.is3d?va(z,w):{color:z,alpha:w},c.setDisplayValue=D=L(H(f.displayvalue,f.name,f.label)),d=c.formatedVal=null===c.y?c.y:p.dataLabels(c.y),c.displayValue=H(D,c.formatedVal),c.setTooltext=b.getValidValue(L(H(f.tooltext,r.plottooltext,e.plottooltext))),v<c.z&&(v=c.z),q.showTooltip?null===d?D=!1:void 0!==c.setTooltext?(D=[4,5,6,7,8,9,10,11,12,13,118],d={yDataValue:d,xDataValue:p.xAxis(J),yaxisName:L(e.yaxisname),xaxisName:L(e.xaxisname),
zDataValue:p.dataLabels(c.z)},D=b.parseTooltext(c.setTooltext,D,d,f,e,r)):(q.seriesNameInTooltip&&(G=b.getFirstValue(r&&r.seriesname)),D=G?G+h:"",D+=J?p.xAxis(J)+h:"",D+=d,D+=f.z?h+p.dataLabels(f.z):""):D=!1,c.toolText=D,this.pointValueWatcher(c.x,c.y,q.showRegressionLine&&F),d=c.hoverEffects={},0!==q.showHoverEffect){J=d.enabled=void 0!==H(f.hoveralpha,r.hoveralpha,e.bubblehoveralpha,f.hovercolor,r.hovercolor,r.bubblehovercolor,e.bubblehovercolor,f.borderhovercolor,r.borderhovercolor,e.plotborderhovercolor,
f.borderhoveralpha,r.borderhoveralpha,e.plotborderhoveralpha,f.hoverscale,r.bubblehoverscale,e.bubblehoverscale,f.borderhovercolor,r.borderhovercolor,e.plotborderhovercolor,f.borderhoverthickness,r.borderhoverthickness,e.plotborderhoverthickness,f.negativehovercolor,r.negativeColor,e.negativecolor,f.is3donhover,e.plotfillhovercolor,r.is3donhover,e.is3donhover,void 0);d.negativeColor=H(f.negativehovercolor,r.negativehovercolor,e.negativehovercolor,q.negativeColor);d.is3d=A(f.is3donhover,r.is3donhover,
e.is3donhover,c.is3d);d.color=H(f.hovercolor,r.hovercolor,r.bubblehovercolor,e.plotfillhovercolor,e.bubblehovercolor,c.is3d?qa.FCcolor.color:z);d.color=d.negativeColor&&0>f.z?d.negativeColor:d.color;d.scale=H(f.hoverscale,r.hoverscale,r.bubblehoverscale,e.bubblehoverscale,1);d.color=g(d.color);d.alpha=H(f.hoveralpha,r.hoveralpha,e.plotfillhoveralpha,e.bubblehoveralpha,w);d.borderColor=H(f.borderhovercolor,r.borderhovercolor,e.plotborderhovercolor,q.anchorBorderColor);d.borderAlpha=H(f.borderhoveralpha,
r.borderhoveralpha,e.plotborderhoveralpha,d.alpha,q.plotBorderAlpha);d.borderThickness=A(f.borderhoverthickness,r.borderhoverthickness,e.plotborderhoverthickness,q.anchorBorderThickness);d.color=d.is3d?va(d.color,d.alpha):{FCcolor:{color:d.color,alpha:d.alpha}};f=J&&q.showHoverEffect?0:q.showHoverEffect;if(1===f){c=(f="string"==typeof d.color)?d.color.split(/\s{0,},\s{0,}/):d.color.FCcolor.color.split(/\s{0,},\s{0,}/);w=c.length;for(z=0;z<w;z++)c[z]=l(c[z],70);f?d.color=c.join(","):d.color.FCcolor.color=
c.join(",")}!1===J&&(d.enabled=!!q.showHoverEffect)}else d.enabled=!1;q.xMax=N;q.xMin=U;q.yMin=wa;q.yMax=Q;k.zMax=v;q.regressionData=q.showRegressionLine&&this.getRegressionLineSeries(F,q.showYOnX,B);this.visible=1===A(r.visible,!Number(r.initiallyhidden),1);this._addLegend()},init:function(a){this.yAxis=this.chart.components.yAxis[0];this.components={};this.graphics={};this.JSONData=a;this.configure()},_getHoveredPlot:function(a,b){var g=this.dataTree.getNeighbour({x:a,y:b},!0,"circle");if(g)return{pointIndex:g.index||
g.i,hovered:!0,pointObj:g.data}},_addLegend:function(){var a=this.config;this.legendItemId=this.chart.components.legend.addItems(this,this.legendInteractivity,{enabled:a.includeInLegend,fillColor:a.fillColor,strokeColor:a.strokeColor,rawFillColor:a.anchorBgColor,rawStrokeColor:a.anchorBorderColor,anchorSide:1,type:this.type,label:a.seriesname})},draw:function(){var a=this,g=a.JSONData,l=r.sqrt,v=a.chart,K=v.getJobList(),t=v.components,C=t.canvas.config,L=t.paper,H=v.config,z=v.graphics,H=m(H.canvasHeight,
H.canvasWidth)/8,J=z.datasetGroup,w,F,M=a.yAxis,t=t.xAxis[0],h=a.config;w=h._regressionAttr;var d,f,c,D;d=C.clip["clip-canvas"].slice(0);var G=C.clip["clip-canvas-init"].slice(0),O,C=a.components.data,U=a.components.removeDataArr||[],Q=U.length,sa=a.graphics.container,wa=a.graphics.dataLabelContainer,ca=function(){!1===a.visible&&(sa.bubbleGroup.hide(),sa.regLineGroup.hide(),wa.hide(),a._containerHidden=!0)};O=function(){a.visible&&(wa.attr({"clip-rect":null}),sa.regLineGroup.attr({"clip-rect":null}))};
var ma=h.minBubbleRadius,qa=h.bubbleScale,va=v.getDataLimits().zMax||0,va=l(va);D=h.clipBubbles;var ha=v.get("config","animationObj"),v=ha.duration;f=a.graphics.regressionLineElement;c=h.showRegressionLine;var ra=a.visible,ka=h.showTooltip,na=z.datalabelsGroup,da,oa,Y;da={};var za,fa,z=!0,Aa=ha.dummyObj,ua=ha.animObj,ha=ha.animType,ia=a.components.pool||{},xa=h.anchorBorderThickness;da=a.drawn;var ja=[];sa||(sa=a.graphics.container={bubbleGroup:L.group("bubble",J),regLineGroup:L.group("regLine",J)},
ra||(sa.bubbleGroup.hide(),sa.regLineGroup.hide()));wa||(wa=a.graphics.dataLabelContainer=L.group("datalabel",na),wa.attr({"clip-rect":G}).animateWith(Aa,ua,{"clip-rect":d},v,ha,O),ra||wa.hide());D?da?sa.bubbleGroup.animateWith(Aa,ua,{"clip-rect":d},v,ha):sa.bubbleGroup.attr({"clip-rect":d}):(sa.bubbleGroup.attr({"clip-rect":null}),sa.bubbleGroup.node&&sa.bubbleGroup.node.removeAttribute&&sa.bubbleGroup.node.removeAttribute("clip-path"));ra&&(sa.bubbleGroup.show(),sa.regLineGroup.show(),wa.show());
c?(da=h.regressionData[0],J=h.regressionData[1],w||(h._regressionAttr=w={}),w.stroke=u({color:h.regressionLineColor,alpha:h.regressionLineAlpha}),w["stroke-width"]=h.regressionLineThickness,w["stroke-linecap"]="round",w["stroke-linejoin"]=2<h.regressionLineThickness?"round":"miter",w.path="M "+t.getAxisPosition(da.x)+","+M.getAxisPosition(da.y)+" L "+t.getAxisPosition(J.x)+","+M.getAxisPosition(J.y),f?f.animateWith(Aa,ua,w,v,ha):(f=a.graphics.regressionLineElement=L.path(w,sa.regLineGroup),sa.regLineGroup.attr({"clip-rect":G}),
sa.regLineGroup.animateWith(Aa,ua,{"clip-rect":d},v,ha,O))):f&&f.hide();J=0;for(G=C.length;J<G;J+=1)d=C[J],O=d.config,D=A(O.x,J),na=O.y,f=O.z,w=d.graphics.element,oa=O.setLink,Y=O.displayValue,c=O.toolText,O.finalTooltext=O.toolText,da=O.hoverEffects,w=d.graphics.element,F=d.graphics.hotElement,fa=d.graphics.label,null!==na?(F=O.eventArgs||(O.eventArgs={}),F.index=J,F.link=oa,F.value=na,F.y=na,F.x=D,F.z=f,F.displayValue=Y,F.toolText=c,F.id=a.userID,F.datasetIndex=a.index||0,F.datasetName=g.seriesname,
F.visible=ra,c=M.getAxisPosition(na),D=t.getAxisPosition(D),f=l(f),f=k(f*H/va)*qa||0,ja.push({x:D,y:c,r:f}),ma&&(f=n(f,ma)),na=O.setRolloutAttr={fill:u(O.colorObj),"stroke-width":h.anchorBorderThickness,stroke:u({color:h.anchorBorderColor,alpha:h.plotBorderAlpha}),r:f},!1!==da.enabled&&(za=O.setRolloverAttr={fill:u(da.color),"stroke-width":da.borderThickness,stroke:u({color:da.borderColor,alpha:da.borderAlpha}),r:f*da.scale}),a.visible||(f=0),w||(ia.element&&ia.element.length?w=d.graphics.element=
ia.element.shift():(w=d.graphics.element=L.circle(sa.bubbleGroup),w.attr({cx:D,cy:c,r:v?0:f}))),w.show().animateWith(Aa,ua,{cx:D,cy:c,r:f||0},v,ha,z&&ca).attr({fill:u(O.colorObj),ishot:!ka,"stroke-width":h.anchorBorderThickness,stroke:na.stroke,visibility:ra}),z=!1,O.trackerConfig||(O.trackerConfig={}),O.trackerConfig.trackerRadius=n(f+(xa||0),q),w.data("hoverEnabled",da.enabled).data(N,za).data(E,na),d._xPos=D,d._yPos=c,w&&w.data("eventArgs",O&&O.eventArgs)):(w&&w.hide(),F&&F.hide(),fa&&fa.hide());
this.dataTree=(new b.KdTree).buildKdTree(ja);a.drawn?a.drawLabel():K.labelDrawID.push(B.addJob(function(){a.drawLabel()},b.priorityList.label));a.drawn=!0;for(J=0;J<Q;J++)a._removeDataVisuals(U.shift())},manageSpace:function(){var a=this.config||(this.config={}),b=this.chart,g=b.config,l=b.config.rotatevalues,n=b.components.xAxis[0],t=n.config.isReverse,r=b.config.dataLabelStyle,q=(this.components||{}).data||[],B=q.length,u=a.leftMostData||q[0],v=a.rightMostData||q[q.length-1],w=m(g.canvasHeight,
g.canvasWidth)/8,F,E=1,h=1,d,f;F=g.zMax;var c,D=a.bubbleScale,G,A,C,a=n.config.axisRange,g=a.max,a=n.getPixel(a.min),g=n.getPixel(g),H=n.getValue(0),J={};f={};var J=b.linkedItems.smartLabel,N={paddingLeft:0,paddingRight:0};f=0;F=L(F);w/=F;for(G=0;G<B;G++)d=q[G].config,F=u.config,f=v.config,c=L(d.z),c=k(c*w)*D||0,c=n.getValue(c)-H,d=d.x-c/2,1===E&&(c=L(F.z),c=k(c*w)*D||0,c=n.getValue(c)-H,A=F.x-c/2),1===h&&(c=L(f.z),c=k(c*w)*D||0,c=n.getValue(c)-H,C=f.x-c/2),h=E=0,A>d&&(u=q[G],E=1),C<d&&(v=q[G],h=
1);t&&(u=v=u,a=g=a);J.useEllipsesOnOverflow(b.config.useEllipsesWhenOverflow);J.setStyle(r);u&&u.config.showValue&&(b=u.config,t=b.displayValue,f=J.getOriSize(t),f=l?f.height:f.width,b=n.getPixel(b.x)-.5*f,a>b&&(N.paddingLeft=a-b));v&&v.config.showValue&&(b=v.config,t=b.displayValue,J=J.getOriSize(t),f=l?J.height:J.width,l=n.getPixel(b.x)+.5*f,g<l&&(N.paddingRight=l-g));return N},show:function(){var a=this.chart,b=this.graphics.container,g=this.graphics.dataLabelContainer;this.visible=!0;b.bubbleGroup.show();
b.regLineGroup&&b.regLineGroup.show();g.show();a._setAxisLimits();a._drawAxis();a._drawDataset()},hide:function(){var a=this.chart;this.visible=!1;a._setAxisLimits();a._drawAxis();a._drawDataset()},getDataLimits:function(){var a=this.config,b=a.yMax,g=a.yMin,l=this.chart.config.transposeAxis,k=a.xMin,m=a.xMax,n=a.max,a=a.min;!1===this.visible&&l&&(b=-Infinity,k=g=Infinity,m=-Infinity);return{max:b,min:g,xMin:k,xMax:m,zMax:n,zMin:a}},drawLabel:function(){var a=this.chart,b=a.config.dataLabelStyle,
g=this.components.data,l=a.components.paper,k;k="";var m=this.config,n=a.get("config","animationObj"),a=n.duration,r=n.animType,q=n.animObj,n=n.dummyObj,m=m.rotateValues,B,u=this.graphics.dataLabelContainer,w,F,E,h,d,f,c,D,G=this.components.pool||{};f=0;for(c=g.length;f<c;f++)if(k=g[f])w=k.config,B=k.graphics,E=k._yPos,F=k._xPos,k=w.displayValue,d=B.label,D=w.showValue,void 0!==k&&null!==k&&k!==v&&null!==w.z&&D?(k={text:k,fill:b.color,"text-bound":[b.backgroundColor,b.borderColor,b.borderThickness,
b.borderPadding,b.borderRadius,b.borderDash],"line-height":b.lineHeight,visibility:U},d||(G.label&&G.label.length?d=B.label=G.label.shift():(k.x=F,k.y=E,k.transform=l.getSuggestiveRotation(m,F,E),d=B.label=l.text(k,u),h=!0)),h||(d.show().animateWith(n,q,{x:F,y:E,transform:l.getSuggestiveRotation(m,F,E)},a,r),d.attr(k))):d&&d.hide()},_hoverFunc:function(a,b,g){a=a.graphics.element;b="DataPlotRollOut"===b?a.data(E):a.data(N);g&&a.attr(b)}},"scatter"])}]);Q.register("module",["private","modules.renderer.js-dataset-pie2d",
function(){var b=this.hcLib,v=b.parseConfiguration,J="VML"===b.Raphael.type,C=b.getPosition,H=b.COMMASPACE,A=b.ZEROSTRING,u=b.hasSVG,a=b.pluck,O=b.parsexAxisStyles,q=b.pluckNumber,M=b.toRaphaelColor,U=b.graphics.convertColor,N=b.parseUnsafeString,E=b.graphics.getDarkColor,r=b.ONESTRING,k=b.getFirstAlpha,m=b.HUNDREDSTRING,n=b.getDashStyle,L=b.getValidValue,g=b.parseTooltext,l=b.preDefStr.visibleStr,B=8===this.window.document.documentMode?l:"",l=Math,e=l.sin,V=l.cos,p=l.max,T=l.abs,K=l.PI,t=2*K,Z=b.getFirstColor,
P=b.graphics.getLightColor,S=b.schedular;Q.register("component",["dataset","Pie2D",{type:"pie2d",configure:function(){var e=this.chart,g=e.config,l=g.dataLabelStyle,k=this.config,m=this.JSONData,h=e.jsonData.chart,d=b.parseUnsafeString,f=e.is3D,c,p;this.__setDefaultConfig();v({},this.config,e&&e.config);p=k.enableAnimation=q(h.animation,h.defaultanimation,1);k.animation=p?{duration:1E3*q(h.animationduration,h.moveduration,1)}:!1;k.transposeAnim=p||q(k.transposeanimation,1)?{duration:1E3*q(h.transposeanimduration,
.2)}:!1;k.showPlotBorder=q(h.showplotborder,1);k.showHoverEffect=q(h.plothovereffect,h.showhovereffect,void 0);k.showTooltip=q(h.showtooltip,1);k.toolText=L(d(a(m.plottooltext,h.plottooltext)));p=k.enableMultiSlicing=q(h.enablemultislicing,1);c=k.use3DLighting=q(h.use3dlighting,1);k.radius3D=c?q(h.radius3d,90):100;k.showZeroPies=q(h.showzeropies,1);k.showPercentInToolTip=q(h.showpercentintooltip,1);k.showLabels=q(h.showlabels,1);k.showValues=q(m.showvalues,h.showvalues,1);k.showPercentValues=q(h.showpercentvalues,
h.showpercentagevalues,0);c=k.toolTipSepChar=a(h.tooltipsepchar,h.hovercapsepchar,H);k.labelSepChar=a(h.labelsepchar,c);k.pieBorderColor=a(h.plotbordercolor,h.piebordercolor);k.pieBorderAlpha=q(h.plotborderalpha,h.pieborderalpha);k.pieBorderThickness=k.showPlotBorder?q(h.plotborderthickness,h.pieborderthickness,g.plotborderthickness,1):0;k.plotDashLen=q(h.plotborderdashlen,5);k.plotDashGap=q(h.plotborderdashgap,4);k.showValueInLegend=q(h.showvalueinlegend,0);k.showLabelInLegend=q(h.showlabelinlegend,
1);k.valueBeforeLabelInLegend=q(h.valuebeforelabelinlegend,0);k.showValueAsPercentInLegend=q(h.showvalueaspercentinlegend,1);k.legendSepChar=a(h.legendsepchar,", ");k.showvalues=q(h.showvalues,1);k.chartPosition=C(e.linkedItems.container,void 0,e);k.timerThreshold=30;k.centerLabelConfig={label:d(a(h.defaultcenterlabel,"")),font:a(h.centerlabelfont,l.fontFamily),fontSize:q(h.centerlabelfontsize,parseInt(l.fontSize,10)),color:Z(a(h.centerlabelcolor,h.valuefontcolor,g.style.inCanvasStyle.color,"555555")),
alpha:q(h.centerlabelalpha,100),bold:q(h.centerlabelbold,l.fontWeight),italic:q(h.centerlabelitalic,l.style),bgColor:a(h.centerlabelbgcolor,""),bgAlpha:q(h.centerlabelbgalpha,100),borderColor:a(h.centerlabelbordercolor,l.borderColor),borderAlpha:q(h.centerlabelborderalpha,100),borderThickness:q(h.centerlabelborderthickness,l.borderThickness),borderRadius:q(h.centerlabelborderradius,l.borderRadius),textPadding:q(h.centerlabeltextpadding,l.borderPadding),padding:q(h.centerlabelpadding,2),bgOval:q(h.centerlabelbgoval,
0),shadow:q(h.showcenterlabelshadow,0),hoverColor:h.centerlabelhovercolor&&Z(a(h.centerlabelhovercolor)),hoverAlpha:q(h.centerlabelhoveralpha),toolText:d(a(h.centerlabeltooltext,""))};k.showLegend=q(h.showlegend,0);k.reverselegend=!q(h.reverselegend,0);e.is3D=f;k.pieYScale=q(h.pieyscale,40);1>k.pieYScale&&(k.pieYScale=1);100<=k.pieYScale&&(k.pieYScale=80);k.pieYScale/=100;k.pieSliceDepth=q(h.pieslicedepth,15);1>k.pieSliceDepth&&(k.pieSliceDepth=1);k.managedPieSliceDepth=k.pieSliceDepth;k.enableMultiSlicing=
!!p;k.startAngle=q(h.startingangle,0)*-(K/180);k.usePerPointLabelColor=h.colorlabelsfromplot==r;k.reversePlotOrder=q(h.reverseplotorder,0);k.animateClockWise=q(h.animateclockwise,k.reversePlotOrder);k.showShadow=q(h.showshadow,1);k.singletonCase=1===m.data.length;k.valueTotal=0;this._setConfigure();this._addLegend()},_parseDisplayProperties:function(b,e){var l,k,m="",h,d,f,c,p,n,t;l=this.chart;var r=l.components.numberFormatter,B=l.jsonData.chart;c=this.config;d=q(e.y,r.getCleanValue(b.value,!0));
var u=c.valueTotal;f=c.showLabels;var v=N(a(e.seriesName,b.label,b.name,""));n=c.showPercentValues;h=c.showPercentInToolTip;var E=c.labelSepChar,K=c.toolTipSepChar,A=c.showTooltip;l=L(N(a(b.tooltext,c.toolText)));k=e.pValue=r.percentValue(d/u*100);d=e.value=r.dataLabels(d)||"";f=1===q(b.showlabel,f)?v:"";c=1===(t=q(b.showvalue,c.showValues))?1===n?k:d:"";h=h?k:d;p=L(N(b.displayvalue));n=a(p,v+E+(n?k:d),"");c=void 0!==p&&t?p:""!==c&&""!==f?f+E+c:a(f,c);A&&(void 0!==l?m=g(l,[1,2,3,5,6,7,14,24,25],{formattedValue:d,
label:v,yaxisName:N(B.yaxisname),xaxisName:N(B.xaxisname),percentValue:k,sum:r.dataLabels(u),unformattedSum:u},b,B):(m=v,m=""!=m?m+K+h:h));e.displayValue=c;e.displayValueArgs=n;e.toolText=m;e.seriesName=v;e.categoryLabel=f},foldingFn:function(a){a=a.data("plotItem");return{ringpath:[a.center[0],a.center[1],a.radius,a.innerDiameter/2,a.angle,a.angle]}},_isStyled:function(a){if(this.chart.config.usedataplotcolorforlabels||a.labelbordercolor||a.labelbgcolor||a.labelborderthickness||a.labelborderalpha||
a.labelalpha||a.labelfont||a.labelfontsize||a.labelfontcolor||a.labelfontalpha||a.labelalpha||a.labelfontbold||a.labelfontitalic||a.labelborderpadding||a.labelborderradius||a.labelbgalpha||a.labelborderdashed||a.labelborderdashlen||a.labelborderdashgap)return!0},_setConfigure:function(b,e){var g,l,k,h,d,f,c,t,B,u,v,E,K,C,H,J,P,M;d=this.chart;var V=d.jsonData.chart,T=d.components;h=T.legend;var S=d.config,Q=this.config,da=this.JSONData;l=(u=(b||da).data)&&u.length;E=Q.showZeroPies;var da=Q.valueTotal||
0,oa=[],Y=q(V.plotborderdashed,0),za=this.components.data||(this.components.data=[]),fa=T.numberFormatter,T=T.colorManager,Aa=Q.labelInLeg,ua=Q.valInLeg,ia=Q.centerLabelConfig,xa=Q.pieBorderThickness,ja=Q.reversePlotOrder,ya=Q.radius3D,W=Q.enableMultiSlicing,Ma=Q.lastSlicedid||0,ea=q(V.plotBorderDashed,5),ga=q(V.plotborderdashgap,4),la=q(V.valuebeforelabelinlegend,0),Ca=q(V.showvalueaspercentinlegend,1);M=0;var Ha=a(V.legendsepchar,", ");d=d.get("config","animationObj");B=d.duration||0;f=d.dummyObj;
t=d.animObj;v=d.animType;S.dataLabelStyle=O({},{},V,S.dataLabelStyle,c);for(d=0;d<l;d+=1)c=u[d],k=fa.getCleanValue(c.value,!0),null===k||!E&&0===k?M+=1:(oa.push(c),da+=k);if(M&&za.length>l-M)for(h&&h.emptyItems(za.length-M),d=za.length-1;0<M;--d,--M)if(za[d]){c=za[d];l=c.config;k=c.graphics;for(g in k)h=k[g],h.animateWith(f,t,this.foldingFn.call(this,h),B,v,this.hideFn.call(this,k,g,this));l.y=null;c.legendItemId=void 0}0===da&&(oa=[]);Q.valueTotal=da;Q.dataLabelCounter=0;S.allPlotSliceEnabled=S.enableslicing;
for(d=(l=oa.length)-1;0<=d;--d){k=d;b?(M=oa[d],k=void 0!==e?e+d:za.length-l+d,c=za[k]):(c=za[d]||(za[d]={graphics:{},config:{}}),M=oa[d]);g=c&&c.config;g||(g=za[k].config={});c.graphics||(za[k].graphics={});g.y=k=fa.getCleanValue(M.value,!0);g.seriesName=f=N(a(M.label,M.name,""));c=a(M.color,T.getPlotColor(d));h=a(M.alpha,V.plotfillalpha,m);t=g.borderConfig=this._parseBorderConfig(c,h,M);B=t.setPlotBorderColor;t=t.setPlotBorderAlpha;u={opacity:p(h,t)/100};if(E=!!q(M.issliced,V.issliced,0))W||(-1!==
Ma&&(za[za.length-Ma-1].sliced=!1),Q.lastSlicedid=d),Q.preSliced=E;C=(v=q(M.dashed,Y))?n(a(M.dashlen,ea),a(M.dashgap,ga),xa):"none";this._parseDisplayProperties(M,g);v=Aa?f:"";ua&&(k=Ca?fa.legendPercentValue(k/da*100):fa.legendValue(k),v=la?k+(v&&Ha+v):(v&&v+Ha)+k);(k=g.displayValue)&&(Q.dataLabelCounter+=1);J=g.value;H=g.pValue;k={label:a((K=M.centerlabel||V.centerlabel)&&this.replaceMacros(K,["\\$value","\\$percentValue","\\$displayValue","\\$label"],[J,H,void 0===k?"":k,f]),""),font:ia.font,fontSize:q(M.centerlabelfontsize,
ia.fontSize),color:Z(a(M.centerlabelcolor,ia.color)),alpha:q(M.centerlabelalpha,ia.alpha),bold:q(M.centerlabelbold,ia.bold),italic:q(M.centerlabelitalic,ia.italic),bgColor:a(M.centerlabelbgcolor,ia.bgColor),bgAlpha:q(M.centerlabelbgalpha,ia.bgAlpha),borderColor:a(M.centerlabelbordercolor,ia.borderColor),borderAlpha:q(M.centerlabelborderalpha,ia.borderAlpha),borderThickness:ia.borderThickness,borderRadius:ia.borderRadius,textPadding:ia.textPadding,padding:ia.padding,bgOval:ia.bgOval,shadow:ia.shadow,
hoverColor:(P=a(M.centerlabelhovercolor,ia.hoverColor))&&Z(P),hoverAlpha:q(M.centerlabelhoveralpha,ia.hoverAlpha),toolText:a(M.centerlabeltooltext,"")};this._isStyled(M)?g.style=O(M,{},V,S.dataLabelStyle,c):g.style&&delete g.style;g.showInLegend=""!==v;g.isVisible=!0;g.name=v;g.shadow=u;g.setColor=c;g.color=this._getPointColor(c,h,ya);g._3dAlpha=h;g.borderColor=U(B,t);g.borderWidth=xa;g.link=L(M.link);g.sliced=E;g.dashStyle=C;(g.doNotSlice=a(M.enableslicing,S.enableslicing)!=r)||S.allPlotSliceEnabled!==
A||(S.allPlotSliceEnabled=r);this._parseHoverEffectOptions(d);g.centerLabelConfig=k;g.radius3D=ya}ja&&za&&za.reverse();Q.dataArr=oa;Q.enableRotation=1<za.length?q(V.enablerotation,1):0},_parseHoverEffectOptions:function(b){var e,g,l,k,h,d,f,c,m;d=this.chart.jsonData.chart;g=this.config;var p=this.components.data[b].config;f=this.JSONData;c=f.data[b];l=p.setColor;k=p._3dAlpha;b=g.radius3D;m=p.borderConfig;h=m.setPlotBorderAlpha;var n=m.setPlotBorderColor;m=g.setBorderWidth;g=q(p.hovereffect,g.showHoverEffect);
p=p.hoverEffects={enabled:g};void 0===g&&(g=p.enabled=void 0!==a(c.hovercolor,f.hovercolor,d.plotfillhovercolor,c.hoveralpha,f.hoveralpha,d.plotfillhoveralpha,c.borderhovercolor,f.borderhovercolor,d.plotborderhovercolor,c.borderhoveralpha,f.borderhoveralpha,d.plotborderhoveralpha,d.plotfillhoveralpha,c.borderhoverthickness,f.borderhoverthickness,d.plotborderhoverthickness,void 0));if(g){e=q(c.highlightonhover,f.highlight,d.highlight,1);(g=a(c.hovercolor,f.hovercolor,d.plotfillhovercolor))&&e&&(e=
0);g=a(g,l);l=a(c.hoveralpha,f.hoveralpha,d.plotfillhoveralpha,k);k=a(c.borderhovercolor,f.borderhovercolor,d.plotborderhovercolor,n);h=a(c.borderhoveralpha,f.borderhoveralpha,d.plotborderhoveralpha,d.plotfillhoveralpha,h);d=q(c.borderhoverthickness,f.borderhoverthickness,d.plotborderhoverthickness,m);g.replace(/,+?$/,"");if(1===e){c=(f="string"==typeof g)?g.split(/\s{0,},\s{0,}/):g.color.split(/\s{0,},\s{0,}/);m=c.length;for(e=0;e<m;e++)c[e]=P(c[e],70);f?g=c.join(","):g.color=c.join(",")}this._setHoverColor(p,
g,l,b);p.borderColor=U(k,h);p.borderWidth=d}else p.enabled=!1},_setHoverColor:function(a,b,e,g){a.color=this._getPointColor(b,e,g)},replaceMacros:function(a,b,e){for(var g=b.length||0,l;g--;)l=new RegExp(b[g],"gi"),a=a.replace(l,e[g]);return a},containsMacro:function(a,b){for(var e=b.length||0,g;e--;)if(g=new RegExp(b[e],"gi"),g=a.match(g))return!0;return!1},updateData:function(a,b){this.config.valueTotal-=this.components.data[b].config.y;this.__base__.updateData.apply(this,arguments)},_parsePiePlotOptions:function(){var a=
this.config;return{size:a.pieMinRadius,slicedOffset:a.slicingDistance}},_parseDataLabelOptions:function(){return{style:this.chart.config.dataLabelStyle}},_addLegend:function(){var a,b,e,g=this.chart.components.legend,l=this.components.data;for(a=0;a<l.length;a+=1)e=l[a],b=e.config,null!==b.y&&(e.legendItemId=g.addItems(this,this.legendInteractivity,{index:a,fillColor:M(b.setColor),strokeColor:M(b.borderColor),type:this.type,label:b.seriesName,enabled:q(b.includeInLegend,1),legendItemId:e.legendItemId}))},
_parseBorderConfig:function(b,e,g){var l=this.chart.jsonData.chart,k=a(g.bordercolor,this.config.pieBorderColor);g=a(g.borderalpha,l.plotborderalpha,l.pieborderalpha);k=a(k,P(b,25)).split(",")[0];g=l.showplotborder==A?A:a(g,e,"80");return{setPlotBorderColor:k,setPlotBorderAlpha:g}},_getPointColor:function(a,b,e){var g,l;a=Z(a);b=k(b);100>e&&u?(g=Math.floor(85*(100-.35*e))/100,g=E(a,g),l=Math.floor(50*(100+e))/100,a=P(a,l),b={color:a+","+g,alpha:b+","+b,ratio:e+","+(100-e),radialGradient:!0,gradientUnits:"userSpaceOnUse"}):
b={color:a+","+a,alpha:b+","+b,ratio:"0,100"};return b},hideElements:function(){var a=this.data&&this.data("plotItem").chart,b=0,e=this._&&this._.shadows||[];if(a&&a.components.dataset[0])for(this.hide();b<e.length;b+=1)e[b].hide()},hideFn:function(a,b){return function(){a[b].hide()}},singleFillColor:function(a){return M({color:Z(a.color),alpha:k(a.alpha)})},draw:function(){var a,g,l=this.chart,k=l.getJobList(),m=l.graphics,h=l.config,d=h.dataLabelStyle,f=l.graphics,c=this.config,p=c.showShadow,n=
l.components.paper,r=this.components,q=r.data,u=r.removeDataArr||[],v,E,K,A,C;v=h.style;var L=m.datasetGroup.trackTooltip(!0),H=this.graphics,N=this.pool;v=H.container;var P=this.visible,O=H.shadowContainer;E=m.datalabelsGroup;var Z=H.dataLabelContainer,U,Q,za,fa,Aa,ua,ia,xa,ja,ya=r.data||[],W=ya.length,r=h.canvasLeft+.5*h.canvasWidth,m=h.canvasTop+.5*h.canvasHeight,Ma=f.datasetGroup;A=h.alphaanimation;var ea=!1,f=l.get("config","animationObj"),ga=f.duration||0,la=f.dummyObj,Ca=f.animObj,Ha=f.animType,
f=function(){ea||(ea=!0,Z.show(),Ma.animateWith(la,Ca,{opacity:1},ga,Ha))},pa=function(){var a,c;if(g)for(a=0;a<W;a+=1)c=ya[a],c.graphics.element&&c.graphics.element.attr({fill:M(c.config.color)})};U=function(){var a=c.pieCenter||[],b={cx:a[0],cy:a[1],r:(c.piePlotOptions||[]).size,r2:.5*(c.innerSize||0)};return function(a){var c,d=!1;for(c in a)if(5<T(a[c]-b[c])){d=!0;break}return d}}();Q=function(){ea||pa()};var La=l._plotDragMove,Ja=l._plotDragStart,Fa=l._plotDragEnd,ta=l._plotRollOver,Ka=l._plotRollOut,
Ea=!!c.enableRotation,Da=c.piePlotOptions=this._parsePiePlotOptions(),h=h.textDirection,Ga=c.dataLabelOptions,Na=Da.slicedOffset,Ua,Da=Da.size,Pa=.5*(c.innerSize||0),Sa=(c.startAngle||0)%t,ab,Xa,Za,bb=Sa-t,eb=c.animateClockWise,Va,Ya;v?(Za=!0,ga&&(ab=Q),g=U({cx:r,cy:m,r:Da,r2:Pa})):(L.pie=n.group("pie",L),L.pieLabels=n.group("pie",L),v=H.container={lineShadowGroup:n.group("connector-shadow",L.pieLabels),anchorShadowGroup:n.group("anchor-shadow",L.pieLabels),pieGroup:H.pieContainer=n.group("pie",L.pie),
dataLabel:n.group("dataLabel",L.pie)},O=H.shadowContainer=L.shadows||(L.shadows=n.group("shadows",v.pieGroup).toBack()),Z=H.dataLabelContainer=this.graphics.dataLabelContainer||n.group("datalabel",E).trackTooltip(!0),ga&&(ab=f,Z.hide()));Z.css(d);L=c.valueTotal;P&&0!==L?0!==L&&(v.lineShadowGroup.show(),v.anchorShadowGroup.show(),v.pieGroup.show(),v.dataLabel.show(),O.show(),Z.show()):(v.lineShadowGroup.hide(),v.anchorShadowGroup.hide(),v.pieGroup.hide(),v.dataLabel.hide(),O.hide(),Z.hide());A&&Ma.attr({opacity:0});
u.length&&this.remove();P=0!==L?t/L:0;c.pieCenter=[r,m];U=u=Sa;0!==L&&k.labelDrawID.push(c.labelDrawID=S.addJob(function(){l.placeDataLabels(!1,q,c)},b.priorityList.label));for(k=0;k<W;k+=1)if(v=ya[k],C=v.graphics,Q=v.config,(Va=Q._textAttrs)||(Va=Q._textAttrs={}),za=Q.y,fa=Q.displayValue,Aa=Q.sliced,E=Q.toolText,A=!!Q.link,v=Q.style,ua=A||Ea||!Q.doNotSlice,null!==za&&void 0!==za&&!1!==Q.isVisible){U=Q.color;U.r=Da;U.cx=r;U.cy=m;U=u;u-=c.singletonCase?t:za*P;ia=.5*(u+U);K=C.element;xa=C.label;Ua=
C.connector;if(!K){K=N&&N.element.length?C.element=N.element.splice(0,1)[0].show():C.element=n.ringpath(H.pieContainer).attr({"stroke-linejoin":"round",ishot:ua}).drag(La,Ja,Fa).hover(ta,Ka);if(Za){if(k<W)for(Xa=void 0,a=k+1;a<W&&void 0===Xa;a+=1)Xa=ya[a].config.endAngle;void 0===Xa&&(Xa=bb)}else Xa=eb?bb:Sa;K.attr({ringpath:[r,m,Da,Pa,Xa,Xa]})}void 0!==fa?(v?((Ya=Q._textCss)||(Ya=Q._textCss={}),Ya.fontFamily=v.fontFamily,Ya.fontSize=v.fontSize,Ya.lineHeight=v.lineHeight,Ya.fontWeight=v.fontWeight,
Ya.fontStyle=v.fontStyle):Q._textCss&&(xa&&xa.removeCSS(),delete Q._textCss,Ya=void 0),Q.style=v||(v=d),Va.text=fa,Va.fill=v.color||"#000000",Va["text-bound"]=[v.backgroundColor,v.borderColor,v.borderThickness,v.borderPadding,v.borderRadius,v.borderDash],Va.direction=h,Va.lineHeight=v.lineHeight,xa?(Ya&&(xa.css(Ya),delete Ya.fontFamily,delete Ya.fontSize,delete Ya.lineHeight,delete Ya.fontWeight,delete Ya.fontStyle,Ya=void 0),delete Va.ishot):N&&N.label.length?xa=C.label=N.label.splice(0,1)[0]:Va.ishot=
ua,0<Ga.distance&&(ja=Ga.connectorWidth)&&Ga.enableSmartLabels?(Ua||(Ua=N&&N.connector.length?C.connector=N.connector.splice(0,1)[0]:C.connector=n.path("M 0 0 l 0 0",Z).attr({visibility:B,ishot:!0}).drag(La,Ja,Fa).hover(ta,Ka)),Ua.attr({"stroke-width":ja,stroke:Ga.connectorColor||"#606060"}).show()):Ua&&Ua.hide()):(Va.visibility="hidden",xa&&xa.hide(),Ua&&Ua.hide());0===L?(xa&&xa.hide(),Ua&&Ua.hide()):(xa&&xa.show(),Ua&&Ua.show());v=Q.plotItem={chart:l,index:k,seriesData:c,value:za,angle:Q.angle=
ia,angle1:Q.startAngle=u,angle2:Q.endAngle=U,slicedX:V(ia)*Na,slicedY:e(ia)*Na,sliced:Aa,labelText:fa,toolText:E,name:Q.name,link:Q.link,percentage:L?za*L/100:0,originalIndex:W-k-1,style:Q.style,color:M(Q.color),borderColor:Q.borderColor,borderWidth:Q.borderWidth,rolloverProperties:Q.hoverEffects,radius:Da,center:[r,m],innerDiameter:2*Pa,centerLabelConfig:Q.centerLabelConfig,graphic:K,isVisible:Q.isVisible,label:xa,connector:Ua,transX:Q.transX=V(ia)*Na,transY:Q.transY=e(ia)*Na,slicedTranslation:Q.slicedTranslation=
"t"+V(ia)*Na+","+e(ia)*Na};C={index:c.reversePlotOrder?W-1-k:k,link:Q.link,value:Q.y,displayValue:Q.displayValueArgs,categoryLabel:Q.categoryLabel,isSliced:Aa,toolText:E};K.animateWith(la,Ca,{ringpath:[r,m,Da,Pa,u,U]},ga,Ha,ab);K.attr({"stroke-width":Q.borderWidth,stroke:Q.borderColor,fill:J||Za&&g?this.singleFillColor(Q.color):M(Q.color),"stroke-dasharray":Q.dashStyle,redrawDataLabels:Sa,cursor:A?"pointer":"",transform:v.sliced?v.slicedTranslation:""}).show().shadow(p&&Q.shadow,O).tooltip(E).data("plotItem",
v).data("eventArgs",C);Va.plotItem=v;Va.eventArgs=C;Ua&&Ua.data("plotItem",v).data("eventArgs",C)}ga?Za&&l.placeDataLabels(!1,q,c):(pa(),f())},remove:function(){var a=this.components.removeDataArr||[],b=this.pool=this.pool={},e=a.length,g=this.config,l,h=g.pieCenter,d,f=h[0],h=h[1],c=this.hideElements,k=g.pieMinRadius,m=.5*(g.innerSize||0),p,g=g.startAngle-t;p=this.chart.get("config","animationObj");var n=p.duration||0,r=p.dummyObj,q=p.animObj,B=p.animType;for(p=0;p<e;p++){l=a[0];l=l.graphics;for(d in l)l[d].data("plotItem"),
l[d].animateWith(r,q,{ringpath:[f,h,k,m,g,g+.01]},n,B,c),b[d]||(b[d]=[]),b[d].push(l[d].hide());a.splice(0,1)}},legendInteractivity:function(a,b){a.chart._plotGraphicClick.call(a.components.data[b.configuration.index].graphics.element)},init:function(a){var b=this.chart;if(!a)return!1;this.JSONData=a;this.chartGraphics=b.chartGraphics;this.components={};this.graphics={};this.visible=1===q(this.JSONData.visible,!Number(this.JSONData.initiallyhidden),1);this.configure()},_getInnerSize:function(){var a,
b=this.config,e=this.chart.jsonData.chart;a=q(e.doughnutradius,0);var e=q(e.use3dlighting,1)?q(e.radius3d,e["3dradius"],50):100,g,l,h;g=b.pieMinRadius;100<e&&(e=100);0>e&&(e=0);a=0>=a||a>=g?g/2:a;b.innerRadius=a;if(0<e&&u&&(b=parseInt(a/g*100,10),g=(100-b)/2,e=parseInt(g*e/100,10),e=b+","+e+","+2*(g-e)+","+e,this&&(h=this.components.data)))for(b=0,g=h.length;b<g;b+=1)l=h[b],l=l.config,l.color&&(l.color.ratio=e,l.hoverEffects&&l.hoverEffects.color&&(l.hoverEffects.color.ratio=e));return 2*a},getEventArgs:function(a){a=
a.configuration.index;var b=this.components.data[a].config||{};return{datasetName:b.seriesName,datasetIndex:a,id:b.userID,visible:b.isVisible,label:b.seriesName,value:b.value,percentValue:b.pValue,tooltext:b.toolText,link:b.link,sliced:b.sliced}}},"area"])}]);Q.register("module",["private","modules.renderer.js-dataset-pie3d",function(){var b=this.hcLib,v=b.BLANKSTRING,J=b.ZEROSTRING,C=b.pluck,H=b.toRaphaelColor,A=b.getFirstAlpha,u=b.preDefStr.elementStr,a=Math,O=a.sin,q=a.cos,M=2*a.PI,U=b.getFirstColor,
N=b.graphics.getLightColor;Q.register("component",["dataset","Pie3D",{type:"pie3d",_parsePie3DOptions:function(){var a=this.config;return{size:2*a.pieMinRadius,slicedOffset:a.slicingDistance,allowPointSelect:!0,cursor:"pointer",innerSize:"pie3d"===this.type?0:this._getInnerSize()}},_parseBorderConfig:function(a,b,k){var m=this.chart.jsonData.chart,n=C(k.bordercolor,this.config.pieBorderColor);k=C(k.borderalpha,m.plotborderalpha,m.pieborderalpha);n=C(n,N(a,90)).split(",")[0];k=m.showplotborder==J?
J:C(k,b,"80");return{setPlotBorderColor:n,setPlotBorderAlpha:k}},_setHoverColor:function(a,b,k){a.color=b;a.alpha=k},draw:function(){var a,b,k=this.pool||(this.pool={}),m=this.components,n=this.config,u=this.chart,g=u.get("config","animationObj"),l=g.duration||0,B=g.dummyObj,e=g.animObj,A=g.animType,p=u.config;a=u.graphics;var C=m.data,g=n.dataLabelOptions,K=g.style,t=u.components.paper,J=p.tooltip||{},J=J&&!1!==J.enabled,N=n.slicingDistance,S=n.slicedOffsetY||(n.slicedOffsetY=N*n.pieYScale),z=u._plotDragMove,
R=u._plotDragStart,w=u._plotDragEnd,F=u._plotRollOver,Q=u._plotRollOut,h=!!n.enableRotation,d=n.showBorderEffect,f=C.length,c=n.usePerPointLabelColor,D=p.textDirection,G,U,Ra,Ia,sa,wa,ca,ma,qa,va,ha,ra,ka;b=m.removeDataArr||[];var na;ha=this.visible;var da,oa,Y=!1,za=this.graphics.dataLabelContainer,fa=(n.startAngle||0)%M,Aa,ua,ia,xa=fa-M,ja=n.animateClockWise,ya,W,Ma,ea=a.datasetGroup;da=p.alphaanimation;var ga=function(){0!==n.valueTotal&&(za.show(),u.placeDataLabels(!1))},la=function(){Y||(Y=p.fireInitialAnimation=
!0,ea.animateWith(B,e,{opacity:1},l,A,ga))};W=function(){var a,c;if(!Y)for(la(),a=0;a<f;a+=1)c=C[a],c.graphics.element&&c.graphics.element.attr({fill:H(c.config.color)})};var Ca=p.dataLabelStyle;if(za){if(ia=!0,l||!p.fireInitialAnimation)ma=l,Aa=W,p.fireInitialAnimation=!1}else za=this.graphics.dataLabelContainer=t.group("datalabel",a.datalabelsGroup).trackTooltip(!0),l&&(Aa=la,ma=l,za.hide(),da&&ea.attr({opacity:0}));za.css(Ca);ha||za.hide();b.length&&this.remove();u._preDrawCalculate();a=n.center;
b=n.pieYScale;m=m.Pie3DManager;C&&f||(C=[]);for(da=-1;++da<f;)if(K=C[da],ha=K.config,(W=ha._textAttrs)||(W=ha._textAttrs={}),ra=K.graphics,G=ha.y,U=ha.displayValue,Ia=ha.sliced,qa=ha.shapeArgs,wa=ha.centerAngle,va=ha.toolText,Ra=!!ha.link,K=ha.style,sa=Ra||h||!ha.doNotSlice,null!==G&&void 0!==G){ya=ra.element;ka=ra.label;na=ra.connector;if(!ya){ya=ra.element=m.useSliceFromPool();if(ia){if(da<f)for(ua=void 0,oa=da+1;oa<f&&void 0===ua;oa+=1)ua=C[oa].config.shapeArgs.end;void 0===ua&&(ua=fa)}else ua=
ja?fa:xa;ya||(ya=ra.element=m.createSlice().drag(z,R,w).mouseover(F).mouseout(Q).attr({ishot:sa}));ya.attr({start:-ua,end:-ua,cx:a[0],cy:a[1],r:a[2],innerR:a[3],radiusYFactor:b})}void 0!==U?(K?((Ma=ha._textCss)||(Ma=ha._textCss={}),Ma.fontFamily=K.fontFamily,Ma.fontSize=K.fontSize,Ma.lineHeight=K.lineHeight,Ma.fontWeight=K.fontWeight,Ma.fontStyle=K.fontStyle):ha._textCss&&(ka&&ka.removeCSS(),delete ha._textCss,Ma=void 0),ha.style=K||(K=Ca),W.text=U,W.fill=(c?H(ha.color):K.color)||"#000000",W["text-bound"]=
[K.backgroundColor,K.borderColor,K.borderThickness,K.borderPadding,K.borderRadius,K.borderDash],W.direction=D,W.lineHeight=K.lineHeight,ka?(Ma&&(ka.css(Ma),delete Ma.fontFamily,delete Ma.fontSize,delete Ma.lineHeight,delete Ma.fontWeight,delete Ma.fontStyle,Ma=void 0),delete W.ishot):k&&k.graphics&&k.graphics.label&&k.graphics.label.length?ka=ra.label=k.graphics.label.splice(0,1):W.ishot=sa,0<g.distance&&(ca=g.connectorWidth)&&g.enableSmartLabels?(na||(na=k&&k.graphics&&k.graphics.connector&&k.graphics.connector.length?
ra.connector=k.graphics.connector.splice(0,1):ra.connector=t.path("M 0 0 l 0 0",za).attr({visibility:"hidden",ishot:sa}).drag(z,R,w).hover(F,Q)),na.attr({"stroke-width":ca,stroke:g.connectorColor||"#606060",cursor:Ra?"pointer":""}).show()):na&&na.hide()):(ka&&ka.hide(),na&&na.hide());G={chart:u,index:da,seriesData:n,value:G,angle:ha.angle=wa,link:ha.link,shapeArgs:qa,slicedX:Ia&&!n.singletonCase?q(wa)*N:0,slicedY:Ia&&!n.singletonCase?O(wa)*S:0,sliced:Ia,labelText:U,name:ha.name,percentage:ha.percentage,
toolText:va,originalIndex:f-da-1,style:ha.style,graphic:ya,transX:ha.transX=q(wa)*N,transY:ha.transY=O(wa)*S,slicedTranslation:ha.slicedTranslation="t"+ha.transX+","+ha.transY,label:ka,connector:na};K={index:n.reversePlotOrder?da:f-1-da,link:ha.link,value:ha.y,displayValue:ha.displayValueArgs,categoryLabel:ha.categoryLabel,isSliced:ha.sliced,toolText:ha.toolText};ya.attr({transform:"t"+G.slicedX+","+G.slicedY,cursor:Ra?"pointer":"",color:ha.color.color.split(",")[0],alpha:ha._3dAlpha,borderWidth:ha.borderWidth,
borderColor:ha.borderColor,showBorderEffect:d}).animateWith(B,e,{start:qa.start,end:qa.end,r:a[2],innerR:a[3],cx:a[0],cy:a[1],radiusYFactor:b},ma,A,Aa).tooltip(J?va:v).data("groupId",da).data("plotItem",G).data("eventArgs",K);W.plotItem=G;W.eventArgs=K;na&&na.data("plotItem",G).data("eventArgs",K)}!l&&ga();0===n.valueTotal?(za.hide(),m.slicingWallsBackGroup.hide(),m.slicingWallsFrontGroup.hide(),m.topGroup.hide(),m.bottomBorderGroup.hide()):(za.show(),m.slicingWallsBackGroup.show(),m.slicingWallsFrontGroup.show(),
m.topGroup.show(),m.bottomBorderGroup.show())},hideFn:function(a,b,k){var m=k&&k.components||{};return function(){b===u?(m.Pie3DManager.removeSlice(a.element),delete a.element):a[b].hide()}},remove:function(){var a=this.chart,b=this.config,k=this.components.removeDataArr||[],m=this.pool=this.pool=[],n=k.length,q,g,l,B,e=this.hideFn,b=b.startAngle;l=a.get("config","animationObj");var a=l.duration||0,v=l.dummyObj,p=l.animObj,A=l.animType;for(l=0;l<n;l++){q=k[0];q=q.graphics;for(g in q)B=q[g],m[g]||
(m[g]=[]),g===u?B.animateWith(v,p,{start:-b,end:-b+.01},a,A,e(q,g,this)):m[g].push(B.hide());k.splice(0,1)}},foldingFn:function(){var a=this.config.startAngle;return{start:-a,end:-a+.01}},_getPointColor:function(a,b){a=U(a);b=A(b);return{color:a+","+a,alpha:b+","+b,ratio:"0,100"}}},"pie2D",{setBorderWidth:void 0,showBorderEffect:void 0}])}]);Q.register("module",["private","modules.renderer.js-dataset-doughnut2d",function(){var b=this.hcLib,v=b.hasSVG,J=b.toRaphaelColor,C=b.graphics.getDarkColor,H=
b.getFirstAlpha,A=Math.floor,u=b.getFirstColor,a=b.graphics.getLightColor;Q.register("component",["dataset","Doughnut2D",{type:"doughnut2d",_getPointColor:function(b,q,J){var Q;b=u(b);q=H(q);100>J&&v?(Q=C(b,A(100*(85-.2*(100-J)))/100),b=a(b,A(100*(100-.5*J))/100),q={color:Q+","+b+","+b+","+Q,alpha:q+","+q+","+q+","+q,radialGradient:!0,gradientUnits:"userSpaceOnUse",r:J}):q={color:b+","+b,alpha:q+","+q,ratio:"0,100"};return q},_parsePiePlotOptions:function(){var a=this.__base__._parsePiePlotOptions.call(this);
a.innerSize=this._getInnerSize();return a},draw:function(){var a=this.chart,b=a.config,u=this.config,v=b.canvasLeft+.5*b.canvasWidth,b=b.canvasTop+.5*b.canvasHeight,A,E=u.centerLabelConfig,r=E.label;A=.5*((u.innerSize=this._getInnerSize())||0);this.__base__.draw.call(this);r&&A&&a.drawDoughnutCenterLabel(r,v,b,2*A,2*A,E,!0);u.lastCenterLabelConfig=E},singleFillColor:function(a){return J({color:u(a.color,1),alpha:H(a.alpha,1)})}},"Pie2D"])}]);Q.register("module",["private","modules.renderer.js-dataset-doughnut3D",
function(){Q.register("component",["dataset","Doughnut3D",{type:"doughnut3d"},"Pie3D"])}]);Q.register("module",["private","modules.renderer.js-dataset-marimekko",function(){var b=this.hcLib,v="VML"===b.Raphael.type,J=b.pluck,C=b.pluckNumber,H=b.toRaphaelColor,A=b.getFirstValue,u=b.regex.dropHypeash,a=b.HASHSTRING,O=b.preDefStr,q=O.showHoverEffectStr,M=O.setRolloverAttrStr,U=O.setRolloutAttrStr,O=Math,N=O.round,E=O.min,r=O.abs,k=b.graphics.getLightColor,m=b.schedular;Q.register("component",["dataset",
"marimekko",{type:"marimekko",configure:function(){b.each(this.JSONData.data,function(a){a&&(a.value=r(a.value))});this.__base__.configure.call(this)},_addLegend:function(){var b=this.chart,m=b.jsonData.chart,g,l;l=this.config;var b=b.components.legend,r=l.legendSymbolColor;g=C(m.us3dlighting,m.useplotgradientcolor,1);m=k(r,60).replace(u,a);g?(g=k(r,40),g={FCcolor:{color:r+","+r+","+g+","+r+","+r,ratio:"0,70,30",angle:270,alpha:"100,100,100,100,100"}}):g={FCcolor:{color:r,angle:0,ratio:"0",alpha:"100"}};
l={enabled:l.includeInLegend,type:this.type,fillColor:H(g),strokeColor:H(m),rawFillColor:r,label:A(this.JSONData.seriesname)};this.legendItemId=b.addItems(this,this.legendInteractivity,l)},searchIndex:function(a,b){for(var g=this.chart.components.xAxis[0],l=0,k=b.length-1,e,m;l<=k;)if(e=Math.round((l+k)/2)||0,m=g.getAxisPosition(b[e].x)+b[e].columnWidth/2,m<a)l=e+1;else if(m>a)k=e-1;else return e;return l},_getHoveredPlot:function(a,b){var g=this.groupManager,l=g.stackConf,k=this.chart.config,g=g.config,
e=k.plotborderthickness,m=l.length-1,p,e=k.showplotborder?e:0,k=e/2,k=0===k%2?k+1:Math.round(k),l=p&&g.datasetIndex||this.searchIndex(a+k,l);g.datasetIndex||(g.datasetIndex=l);(p=this._checkPointerOverColumn(l,a,b))?delete g.datasetIndex:this.index===m&&delete g.datasetIndex;return p},draw:function(){var a=this,k=a.JSONData,g=a.chart,l=g.jsonData.chart,u=g.config,e=g.getJobList(),A=a.config,p=a.groupManager,T=a.index,K,t,Z=a.visible,P=g.components;t=P.canvas.config.clip;var S=P.paper,P=P.xAxis[0],
z=P.getCategoryLen(),R=a.yAxis,w=g.graphics.datasetGroup,F=g.config.isstacked,O,h,d,f=b.parseUnsafeString,c=b.getValidValue,D=b.Raphael,G=u.showtooltip,Q=g.get("config","animationObj"),Ra=Q.duration,Ia=Q.dummyObj,sa=Q.animObj,Q=Q.animType,wa=P.getAxisPosition(0),ca=P.getAxisPosition(1),ma=A.groupMaxWidth=ca-wa,wa=p.stackSumValue[a.positionIndex],ca=u.maxcolwidth,ca=(1-.01*A.definedgrouppadding)*ma||E(1*ma,1*ca),qa,va,ha,ra=a.components,ka=ra.data,na,da,oa,Y,za,fa=a.drawn,Aa=ra.removeDataArr,Aa=Aa&&
Aa.length,ua=(ra=ra.addDataArr)&&ra.length,ia,ra=R.getAxisBase(),xa=R.yBasePos=R.getAxisPosition(ra),ja,ya=0,A=A.showshadow,W=u.plotborderthickness,Ma=u.useroundedges,ea=a.graphics,ga=ea.container,la=ea.dataLabelContainer,Ca=ea.shadowContainer,ea=ea.pool,Ha=1,pa=P.getAxisPosition(z-1)+0,La=P.getAxisPosition(0)+0,Ja=!0,Fa=a.startPosition,ta=p.stackConf,Ka=u.showplotborder,Ea=function(){!1!==a.visible||!1!==a._conatinerHidden&&void 0!==a._conatinerHidden||(ga.hide(),Ca.hide(),la&&la.hide(),a._conatinerHidden=
!0)},Da=function(){Ja&&Ea();this.show()},Ga=function(){return Fa?function(a,b){a.x=La-ma*(ua-b);a.y=h;a.height=va}:!1===Fa?function(a){a.x=pa+ma*Ha++;a.y=h;a.height=va}:function(a){a.width=0}},Na=g.components.canvas.config;za=Na.oriCanvasBorderThickness;var Na=0<Na.canvasBorderWidth,Ua=u.canvasRight,Pa=u.canvasTop,u=u.canvasLeft;fa&&(Ga=Ga());ga||(ga=a.graphics.container=S.group("columns",w),Z||ga.hide());Ca||(Ca=a.graphics.shadowContainer=S.group("shadow",w).toBack(),Z||Ca.hide());t=t["clip-canvas"];
Na||(t[3]+=za/2,v&&(t[2]+=2*za));fa?(ga.animateWith(Ia,sa,{"clip-rect":t},Ra,Q),Ca.animateWith(Ia,sa,{"clip-rect":t},Ra,Q)):(ga.attr({"clip-rect":t}),Ca.attr({"clip-rect":t}));for(t=0;t<z;t++)K=(za=(w=ka[t])&&w.config)&&za.setValue,void 0!==w&&null!==K&&(ia=p.getDataSetPosition(a,t),qa=C(ia.columnWidth,ca/1),oa=ia.height,da=za.setLink,ia=za.colorArr,w.graphics||(ka[t].graphics={}),Y=za.displayValue,ja=za.previousPositiveY,na=c(f(J(za.origToolText,k.plottooltext,l.plottooltext))),F&&(ja=a._parseValues(t,
ja,wa[t],na),K=za.value),O=ta[t].x,ha=R.getAxisPosition(ja||ra),O=P.getAxisPosition(O)-qa/2,0!==oa?(h=R.getAxisPosition(K+(ja||0)),va=r(ha-h)):(va=0,h=ha),h=E(h,ha),parseInt(h)<=Pa&&(va-=Pa-h-+Na,h=Pa-+Na),1>=W&&(N(O)<=u&&(qa+=O,O=u-W/2+ +!!W-+Na,qa-=O),N(O+qa)>=Ua&&(qa=Ua-O+W/2-+!!W+ +Na)),p.isCrisp&&(d=D.crispBound(O,h,qa,va,W),O=d.x,h=d.y,qa=d.width,va=d.height),ja=w.trackerConfig||(w.trackerConfig={}),(ha=!1!==za.toolText&&za.toolText+(na?"":za.toolTipValue))&&(za.finalTooltext=ha),na=za.plotBorderDashStyle,
oa=ja.eventArgs||(ja.eventArgs={}),oa.index=t,oa.link=da,oa.value=K,oa.displayValue=Y,oa.categoryLabel=za.label,oa.toolText=ha,oa.id="",oa.datasetIndex=T||0,oa.datasetName=k.seriesname,oa.visible=Z,Ra||(xa=h,ya=va),K={x:O,y:xa,width:qa,height:ya||1,r:Ma,ishot:!G,fill:H(ia[0]),stroke:H(ia[1]),"stroke-width":Ka?W:0,"stroke-dasharray":na,"stroke-linejoin":"miter",visibility:Z},w._xPos=O,w._yPos=h,w._height=va,w._width=qa,w._index=t,!w.graphics.element&&fa&&(Ga(K,t),ea&&ea[0].graphics.element?(da=ea[0].graphics.element,
da.attr(K)):da=w.graphics.element=S.rect(K,ga),ea&&ea[0].graphics.hotElement&&(w.graphics.hotElement=ea[0].graphics.hotElement),ea&&ea.splice(0,1)),w.graphics.element?(K={x:O,y:h,width:qa,height:va||1},Ra?da=w.graphics.element.animateWith(Ia,sa,K,Ra,Q,Da):(da=w.graphics.element.attr(K),Ja&&Ea())):(da=w.graphics.element=S.rect(K,ga),Ra&&(da.animateWith(Ia,sa,{y:h,height:va||1},Ra,Q),Ja=!1)),da.attr({r:Ma,ishot:!G,fill:H(ia[0]),stroke:H(ia[1]),"stroke-width":Ka?W:0,"stroke-dasharray":na,"stroke-linejoin":"miter"}).shadow({opacity:A},
Ca).data("BBox",d),g.config.enablemousetracking&&da.data("eventArgs",ja.eventArgs).data(q,!0).data(M,za.setRolloverAttr||{}).data(U,za.setRolloutAttr||{}));a.drawn?a.drawLabel():e.labelDrawID.push(m.addJob(function(){a.drawLabel()},b.priorityList.label));a.drawn=!0;Aa&&a.remove()},getDataLimits:function(){var a=this.conf;return{max:a.yMax,min:a.yMin,xMax:100,xMin:0}}},"column"])}]);Q.register("module",["private","modules.renderer.js-dataset-group-column",function(){var b=this.window,v=this.hcLib,
J=v.pluck,C=v.pluckNumber,H=v.plotEventHandler,A=v.hashify,u=v.preDefStr,a=u.visibleStr,O=u.customTooltipStr1='<span style="color :',q=u.customTooltipStr2='; font-size : 12px">&#9632 </span>',M=u.customTooltipStr3=' <span style="color :',U=u.closeSpan="</span> ",N=u.closeTag='">',E=u.breakLineStr="</br>",u=Math,r=u.min,k=u.max,m=u.abs,n=u.ceil,L=v.toolTip;Q.register("component",["datasetGroup","Column",{init:function(){this.positionStackArr=[];this.stackSumValue=[];this.stackConfig=[];this.drawSumValueFlag=
!0},addDataSet:function(a,b,k){var e=this.positionStackArr[b];a.groupManager=this;a.positionIndex=b;a.stackIndex=k;e||(e=this.positionStackArr[b]=[]);e[k]={dataSet:a}},removeDataSet:function(a,b,k){var e=this.positionStackArr[a];e&&e[b]&&e.splice(b,k);0===e.length&&this.positionStackArr.splice(a,1)},_decideSkipping:function(a,b,k){a=a&&a.length;b=n(k/b);b=a/b;return 1<b?n(b):!1},_decidePlotableData:function(a,b,k,e){var m=this.stackSumValue&&this.stackSumValue[0],p,r,q,t,u=this.chart.config,v,A,z=
(a&&a.length)-b,E,w,C=n(1/u.binSize*u.labelBinSize),H,h;this.lastPlot||(this.lastPlot={positvePlot:[],negativePlot:[]});for(E=r=p=q=0;q<z&&k;q+=b,p++,r++){w=E%C;E++;for(t=q+b;t>=q+1;t--)A=a[t].config,v=m&&m[t]||A.setValue,u.labelBinSize&&(A.labelSkip=!0),A.isSkipped=!0,0<=v?(this.lastPlot.positvePlot[p]||(this.lastPlot.positvePlot[p]=v,0===w&&delete A.labelSkip,H=t,delete A.isSkipped),this.lastPlot.positvePlot[p]<v&&(this.lastPlot.positvePlot[p]=v,H=t,delete A.isSkipped)):(this.lastPlot.negativePlot[r]||
(this.lastPlot.negativePlot[r]=v,0===w&&delete A.labelSkip,h=t,delete A.isSkipped),this.lastPlot.negativePlot[r]>v&&(this.lastPlot.negativePlot[r]=v,h=t,delete A.isSkipped));0===w&&(a[H]&&delete a[H].config.labelSkip,a[h]&&delete a[h].config.labelSkip)}e&&delete this.lastPlot},skipOverlapPlot:function(){var a=this.positionStackArr,b,k,e,m,p,n;b=this.chart;var r=this.config,t=b.config,q=t.canvasWidth,u=t.canvasHeight,v=t.binSize,z,A,w=b.isBar;for(b=a.length-1;0<=b;b--)for(e=a[b],m=e.length,k=0;k<m;k++)p=
e[k].dataSet,z=p.visible,n=p.components,n=n.data,(A=this._decideSkipping(n,v,w?u:q))||(p.config.isSkippedData=!1),(p.config.plotsPerBin=A)&&this._decidePlotableData(n,A,z,!b);r.skipZeroPlots=t.skipZeroPlots&&3>r.groupNetWidth},draw:function(){var a=this.positionStackArr,b=a.length,k,e,m,p,n=this.chart,r=n.config;k=r.viewPortConfig.scaleX||1;e=n.graphics.columnGroup;p=n.graphics;m=n.components.canvas.config.clip["clip-canvas"].slice(0);p=p.datalabelsGroup;var t=n.get("config","animationObj"),n=t.animType,
q=t.animObj,u=t.dummyObj,v=m[2],t=t.duration;m[2]*=k;e.attrs["clip-rect"]||e.attr({"clip-rect":m});p.attrs["clip-rect"]||p.attr({"clip-rect":[m[0],0,v,m[3]+m[1]]});e.animateWith(u,q,{"clip-rect":m},t,n);p.animateWith(u,q,{"clip-rect":[m[0],0,v,m[3]+m[1]]},t,n);this.preDrawCalculate();this.drawSumValueFlag=!0;for(k=0;k<b;k++)for(e=a[k],m=e.length,this.manageClip=!0,e=0;e<m;e++)p=a[k][e].dataSet,p.draw();r.drawTrendRegion&&this.drawTrendRegion()},_moveTrendRegion:function(a,b,k){var e=this.chart,m=
e.isBar,p=e.graphics.trendRegion.columnTrendRegion,n=e.config.plotcolorintooltip,r=e.config.rolloverbandanimationduration,t=e.config.rolloverbandanimation?r:0,r=this.config,u=e.components.xAxis[0].getAxisPosition(a),C=e.components.dataset,L=C.length,z=C[0].components.data.length,N=r.prevIndexHovered;k=void 0===k?!0:k;var w,F,M,h,d,f=r.toolText||(r.toolText=""),c=v.toolTip;b=b&&b.originalEvent;var D,G;if(!(0>a||a>=z)){if(r.customHighlightFlag&&!r.groupHighlightFlag||N!==a){f="";for(w=0;w<L;w++)M=C[w],
F=M.components.data,z=F[a],h=F[N],d=z&&z.config,F=M.graphics.sharedAnchor,D=h&&h.config.setValue,G=z&&z.config.setValue,k&&h&&(h.graphics&&h.graphics.element||F&&F.element)&&(D||0===D)&&M._rolloutResponseSetter(e,h,b,!0),z&&(G||0===G)&&(z.graphics&&z.graphics.element||F&&F.element)&&M.visible&&(void 0!==a&&(k&&M._rolloverResponseSetter(e,z,b,!0),n?(h=d&&J(d.originalPlotColor,d.color),r.toolText=f+=O+A(h)+q+z.config.finalTooltext+E):r.toolText=f+=z.config.finalTooltext+E),M.config.hidSharedAnchor||
void 0!==a||F&&F.element.hide());r.groupHighlightFlag=!0}f&&r.customHighlightFlag&&this._drawTooltip(a,void 0,b);N!==a&&(void 0===N&&(t=0),z=C[0].components.data,void 0!==a?(t?m?p.animate({transform:"t0,"+u},t):p.animate({transform:"t"+u+",0"},t):m?p.transform("t0,"+u):p.transform("t"+u+",0"),p.show(),k&&(m=void 0!==N&&z[N].config,void 0!==N&&H.call(p,e,b,"trendRegionRollOut",{index:N,categoryLabel:m.origLabel||m.label}),H.call(p,e,b,"trendRegionRollOver",{index:a,categoryLabel:z[a].config.origLabel||
z[a].config.label}))):(p.hide(),m=z[N].config,k&&H.call(p,e,b,"trendRegionRollOut",{index:N,categoryLabel:m.origLabel||m.label})),void 0!==a&&f||(r.toolText="",c.hide(e.chartInstance.id)),this.config.prevIndexHovered=a)}},_drawTooltip:function(a,l,k){var e=this.config,m=e.toolText,p=this.chart,n=p.config,r=p.isBar||0,t=p.components,u=n.datasetOrder||t.dataset,v,C=t.paper,z=u.length,H,t=t.yAxis[0],w=p.linkedItems.container,F=this.sumValues[0],Q=n.plotcolorintooltip,n=n.tooltipgrayoutcolor,h,d,f,c,
D,G;if(void 0!==l)for(m="",G=0;G<z;G++)v=u[G],H=v.components.data,d=(H=H[a])&&H.config,f=H.config.displayValue||0,h=d.color,h=d&&J(d.originalPlotColor,h),(f=void 0!==a&&f)&&v.visible&&(v=l===G?void 0:n,Q?(f=l===G?h:n,e.toolText=m+=O+A(f)+q+M+A(v)+N+H.config.finalTooltext+U+E):e.toolText=m+=M+A(v)+N+H.config.finalTooltext+U+E);k||(H=u[0].components.data[a],l=w.getBoundingClientRect(),e=b.document.documentElement,c=H._xPos+(r&&H._width)+l.left+(b.pageXOffset||e.scrollLeft)-e.clientLeft-L.pointeroffset,
D=l.top+(b.pageYOffset||e.scrollTop)-e.clientTop+(F?t.getPixel(F[a].positive):H._yPos)-L.pointeroffset);L.customDraw(m,C,k,c,D,p.chartInstance.id)},_notifyGroup:function(a,b){var k=this.chart,e=k.components.dataset,m=e.length,p,n,r,t,q=this.config;p=q.customHighlightFlag;var u=this.config.prevIndexHovered,v=b.originalEvent;!a&&(q.customHighlightFlag=!0);if(a&&p){for(p=0;p<m;p++)t=e[p],n=(r=t.components.data[u])&&r.config.setValue,r&&(n||0===n)&&(r.graphics||t.graphics.sharedAnchor)&&t._rolloutResponseSetter(k,
r,v,!0);q.customHighlightFlag=!1;q.groupHighlightFlag=!1}},_getHoveredRegion:function(a,b,k){var e=this.chart,m=e.config,p=e.components.xAxis[0],n=e.components.canvas.config,r=Math.max(n.canvasPaddingLeft,n.canvasPadding),n=m.canvasLeft,t=m.canvasRight,q=m.canvasTop,m=m.canvasBottom,e=p.getValue(e.isBar?b-q-r:a-n-r),e=Math.round(e);0>e||e>=p.getCategoryLen()||a<=n||a>=t||b<=q||b>=m?this._moveTrendRegion(void 0,k):this._moveTrendRegion(e,k)},drawTrendRegion:function(){var a=this.chart,b=a.isBar,k=
a.config,e=a.graphics,m=e.trendRegion||(e.trendRegion={}),p=m.columnTrendRegion,n=e.columnTrendGroup,r=k.trendRegionColor,t=k.trendRegionStroke,a=a.components.paper,q=this.stackConfig[0].xPosOffset,u=this.config.groupNetWidth,v=this.config.groupMaxWidth||(this.config.groupMaxWidth=1),z=k.prevTrendRegionOverPlot,A=k.drawCrossLineOnTop,b="M"+(b?k.canvasLeft:0)+", "+(b?0:k.canvasTop)+", "+(b?"H"+(k.canvasWidth+k.canvasLeft):"V"+(k.canvasHeight+k.canvasTop));this.config.trendRegionOffset=q-(v-u)/2;r=
{path:b,fill:r,stroke:t,"stroke-width":v,"stroke-linecap":"butt"};z!==A&&(A?n.insertAfter(e.datasetGroup):n.insertBefore(e.datasetGroup),p&&p.remove(),delete m.columnTrendRegion,p=void 0);k.prevTrendRegionOverPlot=A;p?p.attr(r):(p=m.columnTrendRegion=a.path(r,n),p.hide())},getDataSetPosition:function(a){var b=this.numVisiblePositions,k=this.stackConfig[a.positionIndex||0];a=a.visible;var e;if(k){if(!a&&k.visible||0===b)e=0;return{xPosOffset:k.xPosOffset,columnWidth:k.columnWidth,height:e}}},preDrawCalculate:function(){var a=
this.chart,b=a.config.transposeAxis,n=this.stackConfig,e=this.stackSumValue,q=this.positionStackArr,p=this.sumValues=[],u=this.dataLimits=[],v=this.config,t=!1,A=a.config,E=A.isstacked,H=q.length,z,J,w,F,L,h,d,f,c,D,G,N,M,O,Q,U,ca,ma=a.isBar,qa=a.jsonData.chart,va=a.components.xAxis[0],ha=C(ma?qa.overlapbars:qa.overlapcolumns,a.is3D?0:1),ra=va.getAxisPosition(0),ka=va.getAxisPosition(1),na=m(ka-ra),da=k(C(qa.plotspacepercent),0),oa=C(qa.plotpaddingpercent),ra=k(C(qa.plotspacepercent,20)%100,0),Y=
v.groupPadding=ra/200,za,ka=!0,fa,Aa,ua;for(d=this.numVisiblePositions=0;d<H;d++){f=q[d].length;U=n[d]||(n[d]={});U.visible=!1;U.previousVisibleCount=this.numVisiblePositions;Aa=[];for(ca=0;ca<f;ca++)if(ua=Infinity,F=q[d][ca],fa=F.dataSet.yAxis,F&&!1!==F.dataSet.visible&&(U.visible=!0),E){h=q[d][ca+1];c=ca;for(t=!1;0<=c&&!t;)t=(z=q[d][--c])&&z.dataSet.visible;L=F&&F.dataSet.components.data;Q=h&&h.dataSet.components.data;D=F.dataSet.components.data;G=z&&z.dataSet.components.data;D||(D=F.dataSet.components.data=
[]);N=L&&L.length;for(h=0;h<N;h++){(M=D[h])||(M=D[h]={config:{}});O=G&&G[h];if(!O)for(;0<=c&&!O;)if(t=(z=q[d][--c])&&z.dataSet.visible)O=(G=z&&z.dataSet.components.data)&&G[h];M=M.config;M.value=t=fa.getCleanValue(L[h].config.setValue);w=(O=O&&O.config)&&O.value;!Aa[h]&&(Aa[h]=(w||0===w)&&!0);J=(O&&O.previousPositiveY||0)+(O&&(0<w?w:0)||0);w=(O&&O.previousNegativeY||0)+(O&&(0>w?w:0)||0);M.previousPositiveY=J;M.previousNegativeY=w;ua=r(ua,(w||J)+M.setValue);Q&&Q[h]&&Q[h].config.setValue||(e[d]||(e[d]=
[],e[d].parentYAxis=F.dataSet.config.parentYAxis),e[d][h]=J+(F.dataSet.visible&&m(t))+m(w),!e[d][h]&&(e[d][h]=1),p&&(p[d]||(p[d]=[]),p[d][h]=p[d][h]||{},null!==t&&(M=F.dataSet.visible,p[d][h].visible=Aa[h]||M&&!0,p[d][h].positive=J+(0<=t?M&&t:0),p[d][h].negative=w+(0>t?M&&t:0))))}h=q[d][ca+1];c=ca;if(!b)for(z=q[d][ca-1],L=F&&F.dataSet.components.data,Q=h&&h.dataSet.components.data,D=F.dataSet.components.data,G=z&&z.dataSet.components.data,N=L&&L.length,h=0;h<N;h++){M=D[h];O=G&&G[h];if(!O)for(;0<=
c&&!O;)O=(G=(z=q[d][--c])&&z.dataSet.components.data)&&G[h];M=M.config;M.value=t=fa.getCleanValue(L[h].config.setValue);O=O&&O.config;ua=r(ua,(w||J)+M.setValue);za=(O&&O.previousPositiveDataLimit||0)+(O&&(0<O.value?O.value:0)||0);O=(O&&O.previousNegativeDataLimit||0)+(O&&(0>O.value?O.value:0)||0);M.previousPositiveDataLimit=za;M.previousNegativeDataLimit=O;Q&&Q[h]&&Q[h].config.setValue||!u||(u[d]||(u[d]=[],u[d].parentYAxis=F.dataSet.config.parentYAxis),u[d][h]=u[d][h]||{},null!==t&&(u[d][h].positive=
za+(0<=t?t:0),u[d][h].negative=O+(0>t?t:0)))}ua&&(F.dataSet.config.minValue=ua)}U.visible&&(this.numVisiblePositions+=1)}b&&(this.dataLimits=this.sumValues);b=this.numVisiblePositions;d=m(C(ma?qa.maxbarheight:qa.maxcolwidth,a.maxColWidth||50));a=v.groupNetWidth=(1-.01*da)*na||r(na*(1-2*Y),d*(b||1));void 0===qa.plotspacepercent&&a>=A.canvasWidth/2&&(v.groupNetWidth=a=na-d/2);v=a/2;A=0===b?a:a/b;ha=r(A-1,1<b?ha||void 0!==oa?0<oa?A*oa/100:0:4:0);for(d=0;d<H;d++)oa=this.stackConfig[d],qa=oa.previousVisibleCount,
oa.xPosOffset=qa*A-v+ha/2,A-=ha,oa.columnWidth=oa.visible||0===b?A:0,A+=ha;H=va.getAxisPosition(0)-v;4>va.getAxisPosition(1)-v-(H+a)&&(ka=!1);"0"==ra&&(ka=!0);this.isCrisp=ka},getMaxSumValueSpace:function(){var a=this.stackSumValue,b=this.chart,m={},e=a.length,n=b.components.numberFormatter,p,r=0,q=0,t,u,v,A=b.linkedItems.smartLabel;t=b.config.dataLabelStyle;A.useEllipsesOnOverflow(b.config.useEllipsesWhenOverflow);A.setStyle(t);for(b=0;b<e;b++)for(t=a[b],v=t.length,u=0;u<v;u++)m=t[u],m=n.dataLabels(m),
m=A.getOriSize(m),p=m.width,m=m.height,q=k(q,p),r=k(r,m);return{maxWidth:q,maxHeight:r}},drawSumValue:function(){var b=this.chart,l=b.components,k=l.paper,e=this.positionStackArr,n=this.stackConfig,p=b.linkedItems.smartLabel,r=b.config,q,t=b.config.rotatevalues?270:0,l=l.xAxis[0],u,v=b.config.isstacked,A,z=r.dataLabelStyle,E,w,F,H,h,d,f,c,D,G,J=this.sumValuesDrawn,L,N,M,O,Q=l.getPVR(),U,qa=this.pool,va=!1,ha=!1,ra=b.get("config","animationObj"),ka=ra.duration,na=ra.dummyObj,da=ra.animObj,ra=ra.animType,
oa=b.config.stack100percent,Y;F=r.showsum;var za=1,fa=!1,Aa=this.sumValues,ua=b.config.canvasTop,ia=b.components.canvas.config.clip["clip-canvas"].slice(0),xa,ja=b.graphics.sumLabelsLayer;ia[1]=0;ia[3]+=ua;this.drawSumValueFlag=!1;if(v)if(F){ja.css(z);p.setStyle(z);ja.show();!this.graphics&&(this.graphics={});q=this.graphics.sumLabels;v=this.graphics.sumLabelContainer;q||(q=this.graphics.sumLabels=[]);v||(v=this.graphics.sumLabelContainer=[]);fa=q.length;F=Aa.length;if(fa>F)for(;F<fa;F++){ua=q[F].length;
for(H=0;H<ua;H++)u=q[F][H]||{},(G=u.element)&&G.hide();(ua=v[F])&&ua.hide();q.pop();v.pop()}ua=e.length;for(F=0;F<ua;F++){(q=v[F])||(q=v[F]=this.graphics.sumLabelContainer[F]||k.group("sumlabels",ja));b.isRealTime&&q.attr({"clip-rect":ia});H=e[F][0].dataSet;u=H.yAxis;A=Aa[F];d=C(r.scrollMaxVal,l.getCategoryLen());h=this.graphics.sumLabels[F]=this.graphics.sumLabels[F]||[];D=r.scrollMinVal||0;n[F].visible||(ha=!0);Y=n[F].xPosOffset;U=n[F].columnWidth;M=l.getPixel(d-1)+Y;L=H.addDataArr&&H.addDataArr.length;
va=H.startPosition;N=this.removedSumLabels&&this.removedSumLabels[F]&&this.removedSumLabels[F].length;for(H=r.scrollMinVal||0;H<d;H++,D++)if(fa=!1,q.show(),f=A[H]||{},G=f.positive,c=f.negative,!h[D]&&(h[D]={}),void 0!==G||void 0!==c)if(w=G+c,w=u.dataLabels(w),O=m(c)>G?c:G,G=h[D].element,!f.visible)G&&G.hide();else if(w||""===w)f=z.backgroundColor,c=z.borderColor,xa=p.getOriSize(w),E=this.getSumValueConfig({xValue:H,columnWidth:U,sumValue:O,xPosOffset:Y,stack100percent:oa,yAxis:u}),O=this.getSumValuePosition(xa,
{stack100percent:oa,rotateValues:t,xPos:E.xPos,yPos:E.yPos,sumValue:O}),E=O.x,w={text:w,fill:z.color,"text-bound":[f,c,z.borderThickness,z.borderPadding,z.borderRadius,z.borderDash],"line-height":z.lineHeight,visibility:a},O.transform=k.getSuggestiveRotation(t,E,O.y),G||(qa&&qa.sumLabels[F]&&qa.sumLabels[F][0]?(h[D].element=G=qa.sumLabels[F][0],qa.sumLabels[F].shift()):(w.x=E,w.y=O.y,w.transform=O.transform,O["text-anchor"]&&(w["text-anchor"]=O["text-anchor"]),h[D].element=G=k.text(w,q),fa=!0),J&&
ka&&(f=va,f=!0===f?NaN-Q*(L-F):!1===f?M+Q*za++:E,G.attr({x:f,y:O.y,transform:k.getSuggestiveRotation(t,f,O.y)}))),fa||(G.show().animateWith(na,da,O,ka,ra),G.attr(w));N&&this.removeGraphics(F);ha&&(q.hide(),ha=!1)}}else ja.hide();this.sumValuesDrawn=!0},getSumValueConfig:function(a){var b=this.chart,k=a.columnWidth,e=a.yAxis,m=b.config.viewPortConfig,p=m.x,n=m.scaleX,m=a.stack100percent,r=a.sumValue,t=a.xPosOffset;a=b.components.xAxis[0].getAxisPosition(a.xValue)+t+p*n;e=e.getAxisPosition(m?100:r);
return{xPos:a+.5*k,yPos:e}},getSumValuePosition:function(a,b){var k=this.chart,e=k.config,m=e.canvasBottom,p=e.canvasTop,n=k.is3D,r=b.stack100percent,t=e.yDepth,e=e.xDepth,q=b.yPos,u,v=b.xPos,z=k.components.canvas.config.canvasBorderWidth,A=b.sumValue;u=k=b.rotateValues?a.width:a.height;u=u/2+2;r?q=p<=k?u:p-u-z:(0<=A&&(p=q-p,q=p<k?q+u-p:q-u),0>A&&(q=m-q<k?q-u:q+u,n&&(v-=e,q+=t)));return{x:v,y:q}},removeGraphics:function(a){var b=this.removedSumLabels||[],k=this.positionStackArr[a][0].dataSet,e=k.endPosition,
m=k.config.rotateValues,p=this.chart,k=(p.config.realTimeConfig||{}).clear,n=p.components.paper,r=b[a]&&b[a].length||0,t=p.components.xAxis[0],q=this.pool||(this.pool={sumLabels:[]}),u=t.getPVR(),v=p.get("config","animationObj"),z,p=function(){this.hide()},t=v.dummyObj,A=v.animObj,w=v.transposeAnimDuration,E=v.animType,C;C=function(){return!1===e?function(a){var b=a.attr("x")-u*r;a=a.attr("y");return{x:b,transform:n.getSuggestiveRotation(m,b,a)}}:function(a){var b=a.attr("x")+u*r||0;a=a.attr("y");
return{x:b,transform:n.getSuggestiveRotation(m,b,a)}}}();q.sumLabels||(q.sumLabels=[]);for(v=0;v<r;v++)z=b[a][0]&&b[a][0].element,b[a].splice(0,1),z&&(void 0===e||k?z&&z.hide().attr({"text-bound":[]}):w?z.animateWith(t,A,C(z),w,E,p):(z.stop(),z.hide()),q.sumLabels[a]||(q.sumLabels[a]=[]),q.sumLabels[a]=q.sumLabels[a].concat(z))},removeSumLabels:function(a,b,k){var e=this.chart,m=(this.graphics||{}).sumLabels||[],p;if(m.length){this.removedSumLabels||(this.removedSumLabels=[]);this.removedSumLabels[k]||
(this.removedSumLabels[k]=[]);if(!this.removedSumLabels[k].length||!e.config._sumValuesUpdated||e.config._dataUpdated){for(p=a;p<a+b;p++)m[k].push({});this.removedSumLabels[k]=this.removedSumLabels[k].concat(m[k].splice(a,b))}e.config._sumValuesUpdated=!0}},getDataLimits:function(){var a=this.chart,b=this.positionStackArr,m,e,n,p,q,u=-Infinity,t=Infinity,v,A,E;m=a.config.isstacked;var a=a.config.transposeAxis,z=-Infinity,C=Infinity;n=q=Infinity;var w;this.preDrawCalculate();p=this.dataLimits;if(m){m=
0;for(A=p.length;m<A;m++)for(v=p[m].length,w=p[m].parentYAxis,e=0;e<v;e++)E=p[m][e],void 0!==E.positive&&void 0!==E.negative&&(1===w?(u=k(u,E.positive),t=r(t,E.negative),n=r(n,u)):(z=k(z,E.positive),C=r(C,E.negative),q=r(q,z)));0===C&&(C=q);0===t&&(t=n)}p=b.length;for(m=0;m<p;m++)for(e=b[m],q=e.length,e=0;e<q;e++)n=b[m][e].dataSet,!1===n.visible&&a||(n=n.config,1===n.parentYAxis?(u=k(u,n.maxValue),t=r(t,n.minValue)):(z=k(z,n.maxValue),C=r(C,n.minValue)));this.maxValue=z;this.minValue=C;return{max:z,
min:C,sYMax:u,sYMin:t}},manageSpace:function(){var a=this.positionStackArr,b,m,e,n,p=a.length,r={paddingLeft:-Infinity,paddingRight:-Infinity};for(b=0;b<p;b++)for(e=a[b].length,n=0;n<e;n++)m=a[b][n].dataSet,m=m.manageSpace&&m.manageSpace()||{},r.paddingLeft=k(m.paddingLeft,r.paddingLeft),r.paddingRight=k(m.paddingRight,r.paddingRight);return r}}])}]);Q.register("module",["private","modules.renderer.js-dataset-group-realtimecolumn",function(){Q.register("component",["datasetGroup","realtimecolumn",
{},"Column"])}]);Q.register("module",["private","modules.renderer.js-dataset-group-waterfall2d",function(){Q.register("component",["datasetGroup","Waterfall2D",{},"column"])}]);Q.register("module",["private","modules.renderer.js-dataset-group-column3d",function(){Q.register("component",["datasetGroup","Column3d",{},"column"])}]);Q.register("module",["private","modules.renderer.js-dataset-group-bar2d",function(){var b=this.hcLib.preDefStr,v=b.POSITION_MIDDLE,J=b.POSITION_START;Q.register("component",
["datasetGroup","bar2d",{getSumValueConfig:function(b){var v=this.chart,A=b.columnWidth,u=b.yAxis,a=v.config.viewPortConfig,J=a.x,q=a.scaleX,a=b.stack100percent,M=b.sumValue,Q=b.xPosOffset;b=v.components.xAxis[0].getAxisPosition(b.xValue)+Q+J*q;u=u.getAxisPosition(a?100:M);return{xPos:u,yPos:b+.5*A}},getSumValuePosition:function(b,H){var A=this.chart,u=A.config,a=u.canvasLeft,O=u.canvasWidth,q=A.is3D,M=H.stack100percent,Q=u.yDepth,u=u.xDepth,N,E={},r=H.sumValue,k=H.xPos,m=H.yPos,n=A.components.canvas.config.canvasBorderWidth,
A=N=H.rotateValues?b.height:b.width,A=A/2+2;M?(k+=n,E["text-anchor"]=J):(0<=r?(a=a+O-k,a<N?(k=k-A+a,q&&(k-=u,m+=Q)):k+=A):(a=k-a,a<N?(k=k+A-a-(q?u:0),m+=q?Q:0):(k-=A,q&&(k-=u,m+=Q))),E["text-anchor"]=v);E.x=k;E.y=m;return E}},"column"])}]);Q.register("module",["private","modules.renderer.js-dataset-group-bar3d",function(){Q.register("component",["datasetGroup","bar3d",{},"bar2d"])}]);Q.register("module",["private","modules.renderer.js-dataset-group-scrollcolumn2d",function(){Q.register("component",
["datasetGroup","scrollcolumn2d",{},"column"])}]);Q.register("module",["private","modules.renderer.js-dataset-group-area",function(){var b=this.hcLib.pluckNumber,v=Math.ceil;Q.register("component",["datasetGroup","Area",{_decidePlotableData:function(b,C,H){var A=this.chart.config,u,a,O,q,M,Q,N,E,r,k,m=(b&&b.length)-C,n,L,g=v(1/A.binSize*A.labelBinSize);for(n=a=u=O=0;O<m&&H;O+=C,u++,a++){L=n%g;n++;N=E=r=k=void 0;for(q=O+C;q>=O+1;q--)Q=b[q].config,M=Q.setValue,Q.isSkipped=!0,A.labelBinSize&&(Q.labelSkip=
!0),r?r<M&&(N=q,r=M):(N=q,r=M),k?k>M&&(E=q,k=M):(E=q,k=M);delete b[E].config.isSkipped;delete b[N].config.isSkipped;0===L&&(delete b[E].config.labelSkip,delete b[N].config.labelSkip)}},draw:function(){var v=this.chart,C=v.config,H=v.graphics,A=this.positionStackArr,u,a=A.length;u=H.areaGroup;var H=H.columnGroup,O=v.components.paper,v=b(v.jsonData.chart.areaovercolumns,1);u.area=u.area||O.group("area",u);u.areaConnector=u.areaConnector||O.group("area-connector",u);u.shadows||(u.shadows=O.group("shadow",
u).toBack());v?H&&u.insertAfter(H):u.toBack();this.preDrawCalculate();for(u=0;u<a;u++)for(v=A[u],v=v.length,H=0;H<v;H++)O=A[u][H].dataSet,O.draw();C.drawTrendRegion&&this.drawTrendRegion()}},"column"])}]);Q.register("module",["private","modules.renderer.js-dataset-group-line",function(){Q.register("component",["datasetGroup","line",{},"area"])}]);Q.register("module",["private","modules.renderer.js-dataset-group-scrollarea2d",function(){Q.register("component",["datasetGroup","scrollarea2d",{},"Area"])}]);
Q.register("module",["private","modules.renderer.js-dataset-group-realtimearea",function(){Q.register("component",["datasetGroup","realtimearea",{},"area"])}]);Q.register("module",["private","modules.renderer.js-dataset-group-radar",function(){Q.register("component",["datasetGroup","radar",{},"area"])}]);Q.register("module",["private","modules.renderer.js-dataset-group-mssplinearea",function(){Q.register("component",["datasetGroup","MSSplineArea",{},"area"])}]);Q.register("module",["private","modules.renderer.js-dataset-group-marimekko",
function(){var b=this.hcLib,v=b.pluck,J=b.pluckNumber,C=b.preDefStr.visibleStr,H=Math,A=H.min,u=H.max,a=H.abs,O=b.schedular;Q.register("component",["datasetGroup","marimekko",{init:function(){this.__base__.init.call(this);this.stackConf=[]},getDataSetPosition:function(a,b){var u=this.numVisiblePositions,v=this.stackConfig[a.positionIndex||0],A=this.stackConf[b],r;if(!a.visible&&v.visible||0===u)r=0;return{columnWidth:A.columnWidth,height:r,x:A.x}},draw:function(){var a=this,u=a.positionStackArr,v=
u.length,A=a.chart.getJobList(),E,r,k,m;a.preDrawCalculate();a.drawLabel();a.drawSumValueFlag=!0;for(E=0;E<v;E++)for(r=u[E],k=r.length,a.manageClip=!0,r=0;r<k;r++)m=u[E][r].dataSet,m.draw();a.drawn?a.drawSumValue():A.labelDrawID.push(O.addJob(function(){a.drawSumValue()},b.priorityList.label));a.drawn=!0},preDrawCalculate:function(){var b=this.chart,v=this.stackSumValue,C,H=b.isBar,E=b.jsonData.chart,r=b.components.xAxis[0];C=J(H?E.overlapbars:E.overlapcolumns,b.is3D?0:1);var k=r.getAxisPosition(0),
m=r.getAxisPosition(1),n=a(m-k),L=u(J(E.plotspacepercent),0),g=J(E.plotpaddingpercent),l,k=b.config.canvasWidth,B,e=m=0,O=r.config.axisRange.min,r=r.config.axisRange.max-O,p=b.config.categories,T;B=0;var K=b.components.numberFormatter;this.__base__.preDrawCalculate.call(this);b=O;l=this.numVisiblePositions;H=J(H?E.maxbarheight:E.maxcolwidth,Infinity);H=(1-.01*L)*n||A(1*n,H*(l||1));H=0===l?H:H/l;A(H-1,1<l?C||void 0!==g?0<g?H*g/100:0:4:0);C=0;for(g=v[0].length;C<g;C++)m+=v[0][C];this.totalSumValue=
m;for(C=0;C<p.length;C++)H=p[C],H.widthpercent&&(B+=K.getCleanValue(H.widthpercent));100===B&&(T=this.setUserWidth=1);C=0;for(g=v[0].length;C<g;C++)H=p[C],this.stackConf[C]||(this.stackConf[C]={}),B=this.stackConf[C],H=T?K.getCleanValue(H.widthpercent)/100:v[0][C]/m,B.columnWidth=H*k,e+=H,H=H*r/2+b,b=e*r+O,B.x=H;this.isCrisp=!0},getStackSumPercent:function(){var a=this.stackSumValue,b=this.totalSumValue,u,v=this.chart.components.numberFormatter,A=this.chart.config.categories,r=this.setUserWidth,k=
[];for(u=0;u<a[0].length;u++)k[u]=r?v.getCleanValue(A[u].widthpercent):a[0][u]/b*100;return k},drawLabel:function(){var a=this.chart,b=a.components,u=a.linkedItems.smartLabel,A=this.getStackSumPercent(),E=this.stackConf,r,k,m,n=a.graphics.datalabelsGroup,H=b.numberFormatter,g=0,l,B,e=b.paper,O=a.config.canvasBottom,p=b.xAxis[0];r=a.config.style;var T=a.config.dataLabelStyle,K=A.length,t,Q=this.sumValues[0],P,S,z,R=a.jsonData.chart;S=b.canvas.config.clip["clip-canvas"];n=this.labelContainer=this.labelContainer||
e.group("labelGroup",n);k=J(R.showxaxispercentvalues,1);var R=this.xLabels=this.xLabels||[],w=a.get("config","animationObj"),a=w.duration,b=w.animType,F=w.dummyObj,w=w.animObj;n.attr({"clip-rect":S});u.setStyle(T);if(k)for(S=v(T.backgroundColor,"#ffffff"),P=v(""===T.borderColor?"#"+r.inCancolor:T.borderColor,"#000000"),z=v(T.borderThickness,1),m=0;m<K-1;m++)g+=A[m],l=H.percentValue(g),r=p.getAxisPosition(E[m].x)+E[m].columnWidth/2,k=O,t=R[m],Q[m].positive===Q[m].negative?t&&t.hide():(B={text:l,fill:T.color,
"text-bound":[S,P,z,T.borderPadding,T.borderRadius,T.borderDash],"line-height":T.lineHeight,visibility:C},l=u.getOriSize(l),k=k-l.height/2-z,t?(t.show().animateWith(F,w,{x:r,y:k},a,b),t.attr(B)):(B.x=r,B.y=k,R[m]=e.text(B,n)))},getSumValueConfig:function(a){var b=a.yAxis,u=a.stack100percent,v=a.sumValue;a=this.chart.components.xAxis[0].getAxisPosition(this.stackConf[a.xValue].x);b=b.getAxisPosition(u?100:v);return{xPos:a,yPos:b}}},"column"])}]);Q.register("module",["private","modules.renderer.js-interface",
function(){var b=this,v=b.hcLib,J=b.renderer.getRenderer("javascript"),C=v.hasModule,H=v.loadModule,A=v.getMetaSentence,u=v.moduleCmdQueue,a=v.executeWaitingCommands,O=v.injectModuleDependency,q=v.moduleDependencies,M=v.getDependentModuleName,Q,N;Q=function(q){var r,k,m,n={},u;q=A(q);for(r in b.core.items)r=b.core.items[r],k=r.chartType(),m=r.options.chartTypeSourcePath+k,(k=r.jsVars)&&k.waitingModule&&r.__state.rendering&&v.needsModule(q.predicate,m)&&(k.waitingModuleError=!0,k=M(m).concat(k.userModules),
k.length&&(k=k[k.length-1],n[k]=v.moduleCmdQueue[k]));for(u in n)a(n[u]);b.raiseError(b.core,"11171116151","run","HC-interface~renderer.load","Unable to load required modules and resources: "+q.key)};N=function(a,r,k){var m=a.args,n=a.options;a._chartMessageImageStyle={imageHAlign:m.typeNotSupportedMessageImageHAlign||n.baseChartMessageImageHAlign,imageVAlign:m.typeNotSupportedMessageImageVAlign||n.baseChartMessageImageVAlign,imageAlpha:m.typeNotSupportedMessageImageAlpha||n.baseChartMessageImageAlpha,
imageScale:m.typeNotSupportedMessageImageScale||n.baseChartMessageImageScale};a._chartMessageStyle={color:m.typeNotSupportedMessageColor||n.baseChartMessageColor,fontFamily:m.typeNotSupportedMessageFont||n.baseChartMessageFont,fontSize:m.typeNotSupportedMessageFontSize||n.baseChartMessageFontSize};b.hcLib.createChart(a,r,"base",k,n.typeNotSupportedMessage)};v.eventList=b.extend(b.legacyEventList,{loaded:"FC_Loaded",dataloaded:"FC_DataLoaded",rendered:"FC_Rendered",drawcomplete:"FC_DrawComplete",dataxmlinvalid:"FC_DataXMLInvalid",
nodatatodisplay:"FC_NoDataToDisplay",exported:"FC_Exported"});v.raiseEvent=b.raiseEventWithLegacy;q.charts=b.extend(q.charts||{},{column2d:0,column3d:0,bar2d:0,bar3d:0,pie2d:0,pie3d:0,line:0,area2d:0,doughnut2d:0,doughnut3d:0,pareto2d:0,pareto3d:0,mscolumn2d:0,mscolumn3d:0,msline:0,msarea:0,msbar2d:0,msbar3d:0,stackedcolumn2d:0,marimekko:0,stackedcolumn3d:0,stackedarea2d:0,stackedcolumn2dline:0,stackedcolumn3dline:0,stackedbar2d:0,stackedbar3d:0,msstackedcolumn2d:0,mscombi2d:0,mscombi3d:0,mscolumnline3d:0,
mscombidy2d:0,mscolumn3dlinedy:0,stackedcolumn3dlinedy:0,msstackedcolumn2dlinedy:0,scatter:0,bubble:0,ssgrid:0,scrollcolumn2d:0,scrollcolumn3d:0,scrollline2d:0,scrollarea2d:0,scrollstackedcolumn2d:0,scrollcombi2d:0,scrollcombidy2d:0,zoomline:0,zoomlinedy:0,zoomscatter:0});q.powercharts=b.extend(q.powercharts||{},{spline:0,splinearea:0,msspline:0,mssplinearea:0,mssplinedy:0,multiaxisline:0,multilevelpie:0,waterfall2d:0,msstepline:0,inversemsline:0,inversemscolumn2d:0,inversemsarea:0,errorbar2d:0,errorscatter:0,
errorline:0,logmsline:0,logmscolumn2d:0,logstackedcolumn2d:0,radar:0,dragnode:0,candlestick:0,selectscatter:0,dragcolumn2d:0,dragline:0,dragarea:0,boxandwhisker2d:0,kagi:0,heatmap:0,treemap:0});q.widgets=b.extend(q.widgets||{},{angulargauge:0,bulb:0,cylinder:0,drawingpad:0,funnel:0,hbullet:0,hled:0,hlineargauge:0,vlineargauge:0,pyramid:0,realtimearea:0,realtimecolumn:0,realtimeline:0,realtimelinedy:0,realtimestackedarea:0,realtimestackedcolumn:0,sparkcolumn:0,sparkline:0,sparkwinloss:0,thermometer:0,
vbullet:0,gantt:0,vled:0});q.maps=b.extend(q.maps||{},{});b.extend(J,{render:function(a,r){var k=this.chartType(),m=this.options.chartTypeSourcePath+k,n=this.jsVars,q=this.__state,g=v.chartAPI,l=this.options,B=this.args,e=this.options.showChartLoadingMessage,A,p;A=M(m).concat(n.userModules);n.isResizing&&(n.isResizing=clearTimeout(n.isResizing));n.hcObj&&n.hcObj.destroy&&n.hcObj.destroy();if(g[k]){if(g[q.lastRenderedType]&&q.lastRenderedType!==k)for(p in b.raiseEvent("chartTypeChanged",{previousType:q.lastRenderedType,
newType:k},this),g[q.lastRenderedType].eiMethods)delete this[p];q.lastRenderedType=k;q.lastRenderedSrc=this.src;!n.waitingModuleError&&v.raiseEvent("internal.loaded",{type:k,triggeredModuleLoad:n.drLoadAttempted||n.waitingModule},this,[this.id]);delete n.waitingModule;delete n.waitingModuleError;delete n.drLoadAttempted;b.hcLib.createChart(this,a,k,r)}else{if(k&&C(A)){if(n.drLoadAttempted){b.raiseError(this,11112822001,"run","HC-interface~renderer.render","Chart runtimes not loaded even when resource is present");
N(this,a,r);return}O(m)&&(A=M(m).concat(n.userModules));n.drLoadAttempted=!0}else{if(!A.length){N(this,a,r);return}if(n.waitingModuleError){N(this,a,r);delete n.waitingModule;delete n.waitingModuleError;return}}(k=u[A[A.length-1]])?(k.push({cmd:"render",obj:this,args:arguments}),n.waitingModule||(n=e?l.PBarLoadingText||l.loadMessage:"",this._chartMessageImageStyle={imageHAlign:B.loadMessageImageHAlign||l.baseChartMessageImageHAlign,imageVAlign:B.loadMessageImageVAlign||l.baseChartMessageImageVAlign,
imageAlpha:B.loadMessageImageAlpha||l.baseChartMessageImageAlpha,imageScale:B.loadMessageImageScale||l.baseChartMessageImageScale},this._chartMessageStyle={color:B.loadMessageColor||l.baseChartMessageColor,fontFamily:B.loadMessageFont||l.baseChartMessageFont,fontSize:B.loadMessageFontSize||l.baseChartMessageFontSize},b.hcLib.createChart(this,a,"base",void 0,n),J.load.call(this,a,r))):(b.raiseError(this,12080515551,"run","HC-interface~renderer.render","Unregistered module in dependentModule definition."),
this._chartMessageImageStyle={imageHAlign:B.renderErrorMessageImageHAlign||l.baseChartMessageImageHAlign,imageVAlign:B.renderErrorMessageImageVAlign||l.baseChartMessageImageVAlign,imageAlpha:B.renderErrorMessageImageAlpha||l.baseChartMessageImageAlpha,imageScale:B.renderErrorMessageImageScale||l.baseChartMessageImageScale},this._chartMessageStyle={color:B.renderErrorMessageColor||l.baseChartMessageColor,fontFamily:B.renderErrorMessageFont||l.baseChartMessageFont,fontSize:B.renderErrorMessageFontSize||
l.baseChartMessageFontSize},b.hcLib.createChart(this,a,"base",void 0,l.renderErrorMessage))}},update:function(a){var r=this.ref,k=this.jsVars,m,n=k&&k.fcObj,n=k.container||n&&n.options&&n.options.containerElement&&n.options.containerElement.childNodes[0];k.hcObj&&k.hcObj.destroy&&k.hcObj.destroy();k.isResizing&&(k.isResizing=clearTimeout(k.isResizing));void 0===a.error?(delete k.stallLoad,delete k.loadError,!this.__state.firstRenderNotified&&this.jsVars.secondTimeRender&&(this.__state.firstRenderNotified=
!0,m=b.renderer.notifyRender),this.isActive()?this.src!==this.__state.lastRenderedSrc?this.render():b.hcLib.createChart(this,n,void 0,m):this.__state.rendering&&!k.waitingModule&&b.hcLib.createChart(this,n,void 0,m)):(this.isActive()&&"function"===typeof r.showChartMessage&&r.showChartMessage("InvalidXMLText"),delete k.loadError)},resize:function(a){var r=this.ref,k,m=this.jsVars;r&&r.resize&&(m.isResizing&&(m.isResizing=clearTimeout(m.isResizing)),m.isResizing=setTimeout(function(){k=b.normalizeCSSDimension(a.width,
a.height,r);void 0!==a.width&&(r.style.width=k.width);void 0!==a.height&&(r.style.height=k.height);r.resize();delete m.isResizing},0))},dispose:function(){var a,r=this.jsVars;r.isResizing&&(r.isResizing=clearTimeout(r.isResizing));this.apiInstance&&(this.apiInstance.dispose(),delete r.instanceAPI);if(a=this.ref)b.purgeDOM(a),a.parentNode&&a.parentNode.removeChild(a);r.container=null;v.cleanupWaitingCommands(this)},load:function(q,r){var k=this.jsVars,m=this.chartType(),n=b.hcLib.chartAPI[m],m=M(m).concat(k.userModules),
u=m[m.length-1];n||!m||m&&0===m.length?(delete k.waitingModule,q&&N(this,q||this.ref,r)):k.waitingModule||(k.waitingModule=!0,delete k.waitingModuleError,H(m,function(){delete k.waitingModule;a(v.moduleCmdQueue[u])},Q,this))}})}]);Q.register("module",["private","modules.api.dynamicchartattributes",function(){var b=this;b.extend(b.core,{setChartAttribute:function(v,J){var C,H,A,u;if("string"===typeof v)C=v,v={},v[C]=J;else if(null===v||"object"!==typeof v)return;u=0;if(A=(C=this.getChartData(b.dataFormats.JSON))&&
(C.chart||C.graph||C.map)){for(H in v)u+=1,null===v[H]?delete A[H.toLowerCase()]:A[H.toLowerCase()]=v[H];0<u&&("undefined"===typeof A.animation&&(A.animation="0"),this.setChartData(C,b.dataFormats.JSON))}else b.raiseError(this,"2105141421","run","#setChartAttribute()","Could not retrieve attribute list. Is data ready?")},getChartAttribute:function(v){var J=this.getChartData(b.dataFormats.JSON),J=J&&(J.chart||J.graph||J.map),C,H;if(0===arguments.length||void 0===v||void 0===J)return J;if("string"===
typeof v)C=J[v.toString().toLowerCase()];else if(v instanceof Array)for(C={},H=0;H<v.length;H+=1)C[v[H]]=J[v[H].toString().toLowerCase()];else b.raiseError(this,"25081429","param","~getChartAttribute()",'Unexpected value of "attribute"');return C}},!0)}]);Q.register("module",["private","api.linkmanager",function(){var b=this,v=b.FusionChartsDOMInsertModes,J={},C=function(u,a){this.items={};this.root=u;this.parent=a;a instanceof b.core?this.level=this.parent.link.level+1:(J[u.id]=[{}],this.level=0)},
H=function(b,a){return(b.options.containerElement===a.options.containerElement||b.options.containerElementId===a.options.containerElementId)&&b.options.insertMode===v.REPLACE},A=function(u){var a;u.sender.link instanceof C&&!u.sender.link.root.disposed?u.sender.link.parent instanceof b.core&&(a=u.sender.link.parent.link.items,!a[u.sender.id]&&(a[u.sender.id]=u.sender)):u.sender.link=new C(u.sender)};b.policies.link=["link",void 0];C.prototype.configuration=function(){return J[this.root.id][this.level]||
(J[this.root.id][this.level]={})};b.extend(b.core,{configureLink:function(u,a){var v;if(u instanceof Array){for(v=0;v<u.length;v+=1)"object"!==typeof J[this.link.root.id][v]&&(J[this.link.root.id][v]={}),b.extend(J[this.link.root.id][v],u[v]);J[this.link.root.id].splice(u.length)}else"object"===typeof u?("number"!==typeof a&&(a=this.link.level),void 0===J[this.link.root.id][a]&&(J[this.link.root.id][a]={}),b.extend(J[this.link.root.id][a],u)):b.raiseError(this,"25081731","param","~configureLink()",
"Unable to update link configuration from set parameters")}},!0);b.addEventListener("beforeRender",function(b){A(b)});b.addEventListener("beforeInitialize",function(b){A(b)});b.addEventListener("linkedChartInvoked",function(u,a){var v=u.sender,q=v.clone({dataSource:a.data,dataFormat:a.linkType,asyncRender:0,link:new C(v.link.root,v)},!0),A=a.alias,J;A&&(!q.typeSource&&q.swfUrl&&(q.typeSource=q.swfUrl.replace(/(.*?)?[^\/]*\.swf.*?/ig,"$1")),q.type=A);v.args&&0!==parseInt(v.args.animate,10)&&delete q.animate;
b.extend(q,v.link.configuration());b.raiseEvent("beforeLinkedItemOpen",{level:v.link.level},v.link.root,void 0,function(){b.core.items[q.id]instanceof b.core&&b.core.items[q.id].dispose();J=new b.core(q);H(J,v)||v.options.overlayButton&&v.options.overlayButton.message||("object"!==typeof v.options.overlayButton&&(v.options.overlayButton={}),v.options.overlayButton.message="Close");J.render();b.raiseEvent("linkedItemOpened",{level:v.link.level,item:J},v.link.root)})});b.addEventListener("overlayButtonClick",
function(u,a){if("LinkManager"===a.id){var v=u.sender,q=v.link.level-1,A=v.link.parent,C=v.link.root;b.raiseEvent("beforeLinkedItemClose",{level:q,item:v},C,v,function(){setTimeout(function(){b.core.items[v.id]&&v.dispose();b.raiseEvent("linkedItemClosed",{level:q},C)},0);A.disposed||A.isActive()||!H(v,A)||A.render()})}});b.addEventListener("DrawComplete",function(u){u=u.sender;var a;u&&void 0!==u.link&&u.link.root!==u&&u.link.parent instanceof b.core&&(u.ref&&"function"===typeof u.ref.drawOverlayButton?
(a=b.extend({show:!0,id:"LinkManager"},u.link.parent.options.overlayButton),b.extend(a,u.link.parent.link.configuration().overlayButton||{}),u.ref.drawOverlayButton(a)):b.raiseWarning(u,"04091602","run","::LinkManager^Loaded","Unable to draw overlay button on object. -"+u.id))});b.addEventListener("beforeDispose",function(u){var a=u.sender;a&&a.link instanceof C&&(a&&a.link&&a.link.parent instanceof b.core&&a.link.parent.link&&a.link.parent.link.items&&delete a.link.parent.link.items[u.sender.id],
delete J[a.id])})}]);Q.register("module",["private","modules.renderer.js-thememanager",function(){var b=this,v,J,C,H=/\s+!important$/,A=/\\!important$/,u=function(a,b){for(var m=b.length,n=-1;m--;)if(a===b[m]){n=m;break}return n},a=function(b,k,m,n,q){var g,l,v,e;q?(n.push(b),q.push(k)):(n=[b],q=[k]);if(k instanceof Array)for(g=0;g<k.length;g+=1){try{l=b[g],v=k[g]}catch(A){continue}if("object"!==typeof v)m&&void 0===v||(b[g]=v);else{if(null===l||"object"!==typeof l)l=b[g]=v instanceof Array?[]:{};
e=u(v,q);-1!==e?l=b[g]=n[e]:a(l,v,m,n,q)}}else for(g in k){try{l=b[g],v=k[g]}catch(A){continue}if(null!==v&&"object"===typeof v)if(e=Object.prototype.toString.call(v),"[object Object]"===e){if(null===l||"object"!==typeof l)l=b[g]={};e=u(v,q);-1!==e?l=b[g]=n[e]:a(l,v,m,n,q)}else"[object Array]"===e?(null!==l&&l instanceof Array||(l=b[g]=[]),e=u(v,q),-1!==e?l=b[g]=n[e]:a(l,v,m,n,q)):b[g]=v;else b[g]=v}return b},O=function(b,k,m){if("object"!==typeof b&&"object"!==typeof k)return null;if("object"!==
typeof k||null===k)return b;"object"!==typeof b&&(b=k instanceof Array?[]:{});a(b,k,m);return b},q=function(a){var b={important:!1,str:""};if(!a)return b;a=a.toString();H.test(a)?(a=a.replace(H,""),b.important=!0):(a=a.replace(A,"!imporant"),b.important=!1);b.str=a;return b},M=function(a,b){var m,n,q,g,l,u,e=0,v=0;for(m in a)if(n=a[m],n instanceof Array)for(u=n.length,l=0;l<u;l+=1){if(g=n[l],"object"===typeof g)if("category"===m)if("true"===g.vline){if(q=b.component("vline",e,g))Q(g,q),e+=1}else{if(q=
b.component("category",v,g,u))Q(g,q),v+=1}else if(q=b.component(m,l,g,u))Q(g,q),M(g,q)}else"object"===typeof n&&(q=b.component(m,null,n))&&(Q(n,q),M(n,q))},Q=function(a,b){var m=b.getAll(),n,u;for(n in m)u=m[n].toString(),u=q(u),u.important?a[n.toLowerCase()]=u.str:void 0===a[n.toLowerCase()]&&(a[n.toLowerCase()]=u.str)},N=function(a,b){"geo"===b.defaultSeriesType&&E.call(this,a,b)},E=function(a,k){var m=a.sender,n=m.getChartData(b.dataFormats.JSON,!0),q;n.error||((q=n.data.chart.theme)?C.themify(q,
m,m.chartType(),n.data,"geo"===k.defaultSeriesType&&"geo"):m.jsVars&&m.jsVars.themeObject&&m.jsVars.themeObject.dispose())};v=function(){this.themeStore={}};v.prototype={constructor:v,add:function(a){for(var b=0,m=a.length,n;b<m;b+=1)(n=a[b].name)&&(this.themeStore[n]=a[b])},themify:function(a,k,m,n,q){var g=k.jsVars,l=a.split(","),u=[],e=l.length,v,p;if(e){for(p=0;p<e;p+=1){v=this.themeStore;var A;A=l[p];A=A.replace(/^\s\s*/,"");for(var C=/\s/,t=A.length;C.test(A.charAt(--t)););A=A.slice(0,t+1);
(v=v[A])&&u.push(this.evaluateThemeJSON(v.theme,k,m,q))}u.length?(g.themeObject=new J(u,k,!1,n),this.applyTheme(k),k.addEventListener("chartTypeChanged",E),k.addEventListener("internal.drawstart",N)):b.raiseWarning(k,"14051100501","run","api.themes~themify()",'The theme "'+a+'" requested has not been registered.')}},evaluateThemeJSON:function(a,b,m,n){var q={},g=b.jsVars,l=function(a){var b,g;for(b in a)g=a[b],q[b]=g instanceof Array?O(q[b]||[],g):"object"===typeof g?O(q[b]||{},g):g};m=m||b.chartType();
g.themeObject&&a!==g.themeObject&&(g.themeObject.dispose(),delete g.themeObject);l(a.base);n&&a[n]&&l(a[n]);m&&a[m]&&l(a[m]);return q},applyTheme:function(a){a=a.jsVars.themeObject;var b=a.getThemedJSONData().data;b&&M(b,a)}};J=function(a,b,m,n){this.themeArray=a;this.themeComponents={};this.base={};this.chartInstance=b;this.isChildInstance=!!m;this.themedData=m?null:O({},n);this.length=a.length;b=0;for(m=a.length;b<m;b+=1)this.parse(a[b])};J.prototype={constructor:J,pushTheme:function(a){a&&(this.themeArray.push(a),
this.parse(a),this.length+=1)},popTheme:function(){},parse:function(a){var b=this.themeComponents,m=this.chartInstance,n=this.base,u,g,l;for(g in a)if("string"===typeof a[g]||"number"===typeof a[g])if(n[g]){if(u=q(a[g]),l=q(n[g]),u.important||!l.important)n[g]=a[g]}else n[g]=a[g];else b[g]||(b[g]=[]),u=b[g],a[g]instanceof Array?u.push(O([],a[g])):"object"===typeof a[g]?u.push(new J([a[g]],m,!0)):"function"===typeof a[g]&&u.push(a[g])},merge:function(a){var b=this.base,m=a.base,n=this.themeComponents,
u=a.themeComponents,g,l,v;for(v in m)if(g=q(b[v]),l=q(m[v]),!g.important||l.important)b[v]=m[v];for(v in u)n[v]=n[v]?n[v].concat(u[v]):[].concat(u[v]);this.length+=a.length},get:function(a){return this.base[a]},getAll:function(){return O({},this.base)},component:function(a,b,m,n){var q=this.themeComponents,g=this.chartInstance,l=new J([],g,!0),u,e,v;e=q[a];if(!e)return null;a=0;for(q=e.length;a<q;a+=1)v=e[a],"function"===typeof v?(b=b||0,l.pushTheme(v.call(g,b,m,n))):v instanceof Array?(b=b||0,u=
v.length,b%=u,u=v[b],u instanceof J?l.merge(u):"function"===typeof u?l.pushTheme(u.call(g,b,m,n)):l.pushTheme(u)):v instanceof J?l.merge(v):l.pushTheme(v);return l},getThemedJSONData:function(){return{data:this.themedData}},dispose:function(){var a=this.themeComponents,b=this.chartInstance,m,n;for(m in a)if(n=a[m].length){for(;n--;)a[m][n].dispose&&a[m][n].dispose();delete a[m]}this.isChildInstance||(b.removeEventListener("chartTypeChanged",E),b.removeEventListener("internal.drawstart",N));this.dataWithoutTheme=
this.isChildInstance=this.themeArray=this.base=this.chartInstance=this.themeComponents=null}};C=new v;b.registrars.theme=b.registerTheme=function(a){a&&("[object Array]"!==Object.prototype.toString.call(a)&&(a=[a]),C.add(a))};b.addEventListener("beforeDataUpdate",function(a,k){var m=a.sender,n=b.core.transcodeData(k.data,k.format,b.dataFormats.JSON),q=n.chart&&n.chart.theme;q?C.themify(q,m,m.args.type,n):m.jsVars&&m.jsVars.themeObject&&(m.jsVars&&m.jsVars.themeObject.dispose(),m.jsVars&&delete m.jsVars.themeObject)})}]);
Q.register("theme",{name:"default",theme:{base:{chart:{labelDisplay:"stagger !important",caption:"Theme Caption \\!important",canvasBgColor:"#56EF22",borderThickness:"5 !important",borderColor:"#E60539",baseFontColor:"#781129"},categories:[{fontColor:"#0F4F40",fontSize:15,category:function(b){return{showLabel:b%2?0:1}},vline:{color:"#000000",thickness:2}}],dataset:[{color:"#8C3146",data:function(b,v){8==b&&(v.value="");return{color:32E3>Number(v.value)?"#8C3146":"#FF0000",alpha:"100"}}}],trendlines:[{line:function(b){return b?
{color:"#ff0000",thickness:3}:{color:"#ffff00",thickness:3}}}]},pie2d:{chart:{bgColor:"#FF0000"}},msline:{chart:{canvasBgColor:"#ff0000"}},geo:{chart:{canvasBgColor:"#0000ff"}},world:{chart:{canvasBgColor:"#00ff00"}}}});Q.register("module",["private","modules.renderer.js-kdtree",function(){function b(a){function b(a,e,g,l){var m={},p;p=l?"y":"x";if(e===g)return m.point=a[e],m;if(1===g-e)return a[e][p]>a[g][p]?(m.point=a[e],m.left={point:a[g]}):(m.point=a[g],m.left={point:a[e]}),m;p=e+g>>1;l?k(a,p,
e,g):q(a,p,e,g);m.point=a[p];m.left=b(a,e,p-1,!l);m.right=b(a,p+1,g,!l);return m}function q(a,b,k,n){for(var u,z,C,w,E;n>k;){600<n-k&&(u=n-k+1,z=b-k+1,C=A(u),w=.5*p(2*C/3),E=.5*v(C*w*(u-w)/u)*(0>z-u/2?-1:1),C=g(k,l(b-z*w/u+E)),u=e(n,l(b+(u-z)*w/u+E)),q(a,b,C,u));u=a[b];z=k;w=n;m(a,k,b);for(a[n].x>u.x&&m(a,k,n);z<w;){m(a,z,w);z++;for(w--;a[z].x<u.x;)z++;for(;a[w].x>u.x;)w--}a[k].x===u.x?m(a,k,w):(w++,m(a,w,n));w<=b&&(k=w+1);b<=w&&(n=w-1)}}function k(a,b,n,q){for(var r,u,C,w,E;q>n;){600<q-n&&(r=q-n+
1,u=b-n+1,C=A(r),w=.5*p(2*C/3),E=.5*v(C*w*(r-w)/r)*(0>u-r/2?-1:1),C=g(n,l(b-u*w/r+E)),r=e(q,l(b+(r-u)*w/r+E)),k(a,b,C,r));r=a[b];u=n;w=q;m(a,n,b);for(a[q].y>r.y&&m(a,n,q);u<w;){m(a,u,w);u++;for(w--;a[u].y<r.y;)u++;for(;a[w].y>r.y;)w--}a[n].y===r.y?m(a,n,w):(w++,m(a,w,q));w<=b&&(n=w+1);b<=w&&(q=w-1)}}function m(a,b,e){var g=a[b];a[b]=a[e];a[e]=g}var n=a&&a[0]&&a[0].r||5,u,g=Math.max,l=Math.floor,v=Math.sqrt,e=Math.min,A=Math.log,p=Math.exp,C=Math.pow;a=a||[];for(u=a.length;u--;)a[u].r>n&&(n=a[u].r),
a[u].i=u,a[u].x=+a[u].x,a[u].y=+a[u].y;return{tree:0===a.length?{}:b(a,0,a.length-1,!1),search:function(a,b,e){function g(c,l){return"circle"===e?v(C(c-a,2)+C(l-b,2))<=r:c>=r&&c<=h&&l>=d&&l<=f}function l(d){var e=a>=d.x1&&a<=d.x2&&b>=d.y1&&b<=d.y2,f;f=d.point.y;f=v(C(a-d.point.x,2)+C(b-f,2));q?e?c?d.point.i>q.point.i&&(q=d,c=e,u=f):(q=d,c=e,u=f):!c&&f<u&&(q=d,c=e,u=f):(q=d,c=e,u=f)}function k(c){"circle"===e?r=c:(r=a-c||0,h=a+c||0,d=b-c||0,f=b+c||0)}function m(a){a&&a.point&&(k(a.point.r),g(a.point.x,
a.point.y)&&l(a),r<=a.point.x&&p(a.left),h>=a.point.x&&p(a.right))}function p(a){a&&a.point&&(k(a.point.r),g(a.point.x,a.point.y)&&l(a),d<=a.point.y&&m(a.left),f>=a.point.y&&m(a.right))}var q,r=a-n,h=a+n,d=b-n,f=b+n,c=!1,u=0;m(this.tree);return q&&q.point||q}}}function v(a){this.configure(a)}var J=this.hcLib,C=function(a,b,q,k,m){return Math.pow(q-a,2)+Math.pow(k-b,2)<=Math.pow(m,2)},H=Math.PI,A=Math.cos,u=Math.sin,a=Math.max,O=Math.min,q=H/180,M=function(b,q,r,k,m,n){return r<=a(b,m)&&r>=O(b,m)&&
k<=a(q,n)&&k>=O(q,n)?!0:!1},Q=function(a,b,q,k,m,n){b=(k-b)*(m-q);a=(q-a)*(n-k);isNaN(b)&&(b=0);isNaN(a)&&(a=0);a=b-a;return 0===a?0:0<a?1:2};v.prototype={configure:function(a){this.validatorFn=a?this.shapeValidator():this.defaultValidator()},defaultValidator:function(){var a=this;return function(b){var q=a.mousePoint;return b&&1>=Math.pow((b.x-q.x)/a.xLimit,2)+Math.pow((b.y-q.y)/a.yLimit,2)?!0:!1}},shapeValidator:function(){var a=this;return function(b){var r=a.mousePoint,k=b&&b.shapeInfo,m=!1,n,
v=r.x,r=r.y,g;switch(k&&k.type){case "circle":n=k.radius;m=C(v,r,b.x,b.y,n);break;case "arc":m=k.innerradius;n=k.radius;m=!C(v,r,b.x,b.y,m)&&C(v,r,b.x,b.y,n);break;case "polygon":n=k.radius;g=k.startAngle;k=k.sides;a:{m=b.x;b=b.y;var l,B=0,e,J,p,O,K;l=!1;if(C(v,r,m,b,n)&&3<=k){l=void 0===g?.5*H:g%360*q;K=2*H/k;e=m+n*A(-l);O=b+n*u(-l);for(g=0;g<k;g++){l+=K;J=m+n*A(-l);p=b+n*u(-l);var t=e,Z=O,P=J,S=p,z=v,R=r,w=r,F=Q(t,Z,P,S,z,R),X=Q(t,Z,P,S,Infinity,w),h=Q(z,R,Infinity,w,t,Z),d=Q(z,R,Infinity,w,P,S);
if(F!==X&&h!==d||0===F&&M(t,Z,z,R,P,S)||0===X&&M(t,Z,Infinity,w,P,S)||0===h&&M(z,R,t,Z,Infinity,w)||0===d&&M(z,R,P,S,Infinity,w)){if(0===Q(e,O,v,r,J,p)){m=M(e,O,v,r,J,p);break a}B++}e=J;O=p}l=0!==B%2}m=l}break;case "rect":m=b.x;n=b.y;b=m+(k.width||0);k=n+(k.height||0);m=v>=m&&v<=b&&r>=n&&r<=k;break;case "default":m=!1}return m}},buildKdTree:function(a){this.kdTree=b(a);this.tree=this.kdTree.tree;return this},getNeighbour:function(a,b,q){var k=this.tree,m={x1:a.x-this.xLimit,x2:a.x+this.xLimit,y1:a.y-
this.yLimit,y2:a.y+this.yLimit},n=this.validatorFn;this.mousePoint=a;if(b)return this.kdTree&&this.kdTree.search(a.x,a.y,q);if(k)return this._searchBtwnLimit(m,k,!0,n)},_compair2closest:function(a,b){return!a||a&&b&&b.i>a.i?b:a},_searchBtwnLimit:function(a,b,q,k){var m,n,u=q?a.x1:a.y1,g=q?a.x2:a.y2;m=b&&b.point&&b.point[q?"x":"y"];if(void 0!==m)return k(b.point)&&(n=b.point),m>=u&&b.left&&(n=this._compair2closest(n,this._searchBtwnLimit(a,b.left,!q,k))),m<=g&&b.right&&(n=this._compair2closest(n,this._searchBtwnLimit(a,
b.right,!q,k))),n},_setSearchLimit:function(a,b){this.xLimit=a;this.yLimit=b}};v.prototype.constructor=v;J.KdTree=v}]);Q.register("module",["private","modules.renderer.js-highlightmanager",function(){var b=this,v=b.hcLib,J=v.extend2,C=v.pluckNumber,H=v.toRaphaelColor,A=/^#?[0-9a-f]{6}/i,u=/FFFFFF/i,a=/255,255,255/,O=v.getFirstAlpha,q=function(a){a=a.replace("rgba(","").split(",");return"#"+("000000"+(a[0]<<16|a[1]<<8|a[2]).toString(16)).slice(-6)},M=v.pluck,U=function(a){if(/rgb/.test(a))return a=
a.match(/[\d\.]+\)/g),parseFloat(a&&a[0]);if(a.FCcolor)return O(a.FCcolor.alpha)},N=function(a){a=a.split(",");var b,e,g,k={},m;b=0;for(e=a.length;b<e;b++)g=a[b].split("="),m=g[0],g=g[1],k[m]=g;return k},E=function(a,b,e){var g,k=b.color;if(/rgb/.test(a))b=M(b.alpha,100*U(a)),/rgb/.test(k)&&(k=q(k)),g=e?H({color:M(k,q(a)),alpha:b}):a;else if(a.FCcolor){if(e){a=a.FCcolor;var m;e={};var n;for(m in a)if("alpha"===m){k=m;if(b.alpha){g=a[m];var t=b.alpha,r=void 0,u=void 0,v=[];if("number"===typeof g)g=
t;else{u=g.split&&g.split(",");for(r=0;r<u.length;r++)v.push(t);g=v.join()}}else g=a[m];e[k]=g}else"color"===m?(-1!==a[m].indexOf(",")&&b.color&&(n=b.color+","+a[m].substring(a[m].indexOf(",")+1)),e[m]=M(n||b.color,a[m])):e[m]=a[m];b=H(e)}else b=H(a.FCcolor);g=b}else A.test(a.color||a)&&(g=e?H({color:M(b.color,a.color,a),alpha:M(b.alpha,a.alpha)}):H({color:a.color||a,alpha:a.alpha}));return g},r=function(a,b,e){var g,k,m,n=a.chart;g=n.config;n=n.config.dataLabelStyle;a=a.components.data;var q,r,u,
v,z,A;q=0;for(r=a.length;q<r;q++)if(g=a[q])for(v in u=g.graphics,g=g.config,m=g.anchorProps,k=m.enabled,g={FCcolor:{alpha:e&&k?M(b.anchorbgalpha,b.alpha,m.bgAlpha):m.bgAlpha,color:e&&k?M(b.anchorbgcolor,b.color,m.bgColor):m.bgColor}},k={FCcolor:{alpha:e&&k?M(b.borderalpha,b.alpha,m.borderAlpha):m.borderAlpha,color:e&&k?M(b.anchorbordercolor,b.color,m.borderColor):m.borderColor}},m=e?b.alpha:m.imageAlpha,e||U(n.color),u)switch(A=(z=u[v])&&z.type,A){case "path":z.attr({fill:H(g),stroke:H(k)});break;
case "image":z.attr({opacity:m/100});break;case "text":L(z,b,n,e)}},k=function(b,g,e,k){var m=g.symbolAttr||{},n=m.fill,m=m.stroke,r=g.textAttr||{},r=k?M(e.color,q(r.fill)):q(r.fill),t=b.legendItemText,v=b.legendItemSymbol;b=b.legendItemLine;g=(g.lineAttr||{}).stroke;b&&g&&(A.test(g)?b.attr({stroke:k?H({color:M(e.color,g),alpha:e.alpha}):g}):(g=E(g,e,k),b.attr({stroke:g})));v&&(n&&(n=n.match(A)?k&&!u.test(n)?H({color:e.color||n,alpha:e.alpha}):n:a.test(n)?n:E(n,e,k)),m&&(m=A.test(m)?k&&!u.test(m)?
H({color:e.color||m,alpha:e.alpha}):m:k&&!a.test(m)?e.color?H({color:e.color,alpha:e.alpha}):m:m),v.attr({fill:n||"none",stroke:m||"none"}));t&&t.attr({fill:H({color:r,alpha:k?e.alpha:100})})},m={area:function(a,b,e){var g=this.chart,m=g.config,n=g.components.legend.components.items,q,t=this.legendItemId,u=n.length;a=N(a);var v=this.graphics||{},g=v.legendGraphics,A=m.dataLabelStyle,z=v.dataLabelContainer,C=this.config,w,m=0<(C.shadow||{}).opacity;if(!e&&!0===this.visible){a.alpha=a.alpha||30;for(e=
0;e<u&&(q=n[e]||{},q.legendItemId!==t);e++);z&&z.attr({opacity:b?a.alpha/100:U(A.color)});e=C.plotbordercolor;n=C.plotborderalpha;t=C.plotfillalpha;u=C.plotgradientcolor;v=M(v.lineElement,v.splineElement);e=b?M(a.bordercolor,a.color,e):e;a.color&&(w=a.color+(u?","+u:""));u=C.fillColor.color;w=b?M(w,u):u;C=C.plotfillangle;t=b?a.alpha:t;n=b?M(a.borderalpha,a.alpha):n;m=m?b?a.alpha/100:t/100:!1;v.attr({fill:H({color:w,alpha:t,angle:C}),stroke:H({color:e,alpha:n})}).shadow(m);g&&k(g,q.config,a,b);r(this,
a,b)}},bubble:function(a,b,e){var g=this.chart,m=g.components.legend.components.items||[],n,q=m.length,t=this.legendItemId,g=g.config.dataLabelStyle,r=this.graphics,u=r.legendGraphics,A=v.graphics.getPointColor,z=r.dataLabelContainer;a=N(a);if(!1===e&&!0===this.visible){a.alpha||(a.alpha=30);r=this.components.data||[];for(e=0;e<q&&(n=m[e]||{},n.legendItemId!==t);e++);k(u,n.config,a,b);z&&z.attr({opacity:b?a.alpha/100:U(g.color)});e=0;for(q=r.length;e<q;e++)if(m=r[e])t=m.graphics,n=m.config,m=n.colorObj,
u=n.is3d,n=t.element,t=t.label,u?(u=b?A(M(a.color,m.FCcolor.color),M(a.alpha,O(m.alpha))):m,u=H(u)):(u=b?M(a.color,m.color):m.color,m=b?a.alpha:m.alpha,u=H({color:u,alpha:m})),n&&n.attr({fill:u}),t&&L(t,a,g,b)}},pie:function(a,b,e,g){var m=g.chart,n;g=g._getPointColor;var q=this,t,r,u,v;u={};var q=this.legendItemId,z;r=m.components.legend.getItems()||[];a=N(a);if(!1===e){a.alpha||(a.alpha=30);e=this.graphics.element;t=this.config;v=0;for(m=r.length;v<m&&(n=r[v],z=n.legendItemId,z!==q);v++);q=n.graphics;
k(q,n.config,a,b);r=t.color.color;q=e.data("plotItem");m=q.chart;n=q.style;m=m.is3D;if(v=q.center)u=v[0],v=v[1],q=q.radius,u={cx:u,cy:v,r:q};r=b?g(M(a.color,r),a.alpha,90):t.color;g=b?a.alpha:r.alpha;r=J(r,u);m?e&&e.attr({color:r.color.split(",")[0],alpha:g}):e&&e.attr({fill:H(r)});g=this.graphics.label;e=this.graphics.connector;g&&L(g,a,n,b);e&&e.attr({opacity:b?a.alpha/100:U(n.color)})}},line:function(a,b,e){var g=this.chart,m=g.components.legend.components.items||[],n=m.length,q,t=this.legendItemId,
u=g.config.dataLabelStyle;a=N(a);var v=this.graphics||{},g=v.legendGraphics,A=v.dataLabelContainer,z=v.errorGroupContainer,C=this.config,w=C.linecolor,F=C.alpha,E=0<(C.shadow||{}).opacity;if(!e&&!0===this.visible){a.alpha||(a.alpha=30);for(e=0;e<n&&(q=m[e]||{},q.legendItemId!==t);e++);z&&(m=U(C.errorBarColor),m=b?M(a.alpha/100,m):m,z.attr({opacity:m}));A&&A.attr({opacity:b?a.alpha/100:U(u.color)});u=M(v.lineElement,v.SplineElement);w=b?M(a.color,w):w;F=b?M(a.alpha,F):F;E=E?b?a.alpha/100:F/100:!1;
u&&u.attr({stroke:H({color:w,alpha:F})}).shadow(E);g&&k(g,q.config,a,b);r(this,a,b)}},boxandwhisker2d:function(a,b,e){var g=this.config.isRoundEdges,m=this.graphics,n=m.legendGraphics,r=m.lowerWhiskerContainer,t=m.upperWhiskerContainer,u=m.dataLabelContainer,A=this.legendItemId,C=this.chart.components.legend.components.items||[],m=C.length,z;a=N(a);if(!1===e&&!0===this.visible){a.alpha||(a.alpha=30);for(e=0;e<m&&(z=C[e]||{},z.legendItemId!==A);e++);k(n,z.config,a,b);r&&r.attr({opacity:b?a.alpha/100:
1});t&&t.attr({opacity:b?a.alpha/100:1});u&&u.attr({opacity:b?a.alpha/100:1});n=this.components.data;e=0;for(m=n.length;e<m;e++){r=n[e];t=r.config;r=r.graphics;z=a;var u=b,A=g,J={},w={},F=J=w=void 0,L=C=void 0,h=void 0,d=void 0,f=void 0;u?(w=v.graphics.getColumnColor(z.color||t.upperColorArr[0].FCcolor.color,z.alpha.toString(),t.upperColorArr[0].FCcolor.ratio,t.upperColorArr[0].FCcolor.angle,A,z.bordercolor||q(t.upperBoxBorder.color),z.borderalpha&&z.borderalpha.toString()||(100*U(t.lowerBoxBorder.color)).toString()),
w=H(w[0]),J=v.graphics.getColumnColor(z.color||t.lowerColorArr[0].FCcolor.color,z.alpha.toString(),t.lowerColorArr[0].FCcolor.ratio,t.lowerColorArr[0].FCcolor.angle,A,z.bordercolor||q(t.lowerBoxBorder.color),z.borderalpha&&z.borderalpha.toString()||(100*U(t.lowerBoxBorder.color)).toString()),J=H(J[0]),F=E(t.median.color,z,u),h=E(t.lowerQuartile.color,z,u),d=E(t.upperQuartile.color,z,u)):(w=H(t.upperColorArr[0]),J=H(t.lowerColorArr[0]),F=t.median.color,C=t.upperBoxBorder.color,L=t.lowerBoxBorder.color,
d=t.upperQuartile.color,h=t.lowerQuartile.color);f=r.upperBoxElem;f.attr({fill:w,"drop-shadow":f.attrs["drop-shadow"]&&"none"!==f.attrs["drop-shadow"]?[1,1,3,"rgba(64,64,64,"+U(w)+")",f.attrs[4],f.attrs["drop-shadow"][5]]:"none"});f=r.lowerBoxElem;f.attr({fill:J,"drop-shadow":f.attrs["drop-shadow"]&&"none"!==f.attrs["drop-shadow"]?[1,1,3,"rgba(64,64,64,"+U(J)+")",f.attrs[4],f.attrs["drop-shadow"][5]]:"none"});f=r.lowerBoxBorderEle;f.attr({stroke:L});r.upperBoxBorderEle&&r.upperBoxBorderEle.attr({stroke:C});
r.lowerQuartileEle&&r.lowerQuartileEle.attr({stroke:h});r.upperQuartileEle&&r.upperQuartileEle.attr({stroke:d});r.midLineElem&&r.midLineElem.attr({stroke:F})}}},heatmap:function(a,b,e,g){var m=g.chart,n=m.config;g=n.dataLabelStyle;var n=m.components.legend,r,t,m=this.legendItemId,u,v;a=N(a);var A=n.getItems()||[];if(!e&&this.config.visible){a.alpha||(a.alpha=30);n=this.config;u=0;for(e=A.length;u<e&&(r=A[u],v=r.legendItemId,v!==m);u++);m=r.graphics;k(m,r.config,a,b);r=q(n.color);n=U(n.color);r=b?
M(a.color,r):r;n=b?a.alpha:100*n;e=this.graphics;m=e.element;m.attr({fill:H({color:r,alpha:n})});b||U(g.color);for(t in e)m=e[t],"text"===m.type&&L(m,a,g,b)}},funnelpyramid:function(a,b,e,g){g=g.chart.components.legend;var m,n,r,t,u;a=N(a);g=g.getItems()||[];n=this.legendItemId;if(!1===e){a.alpha||(a.alpha=30);r=0;for(e=g.length;r<e&&(m=g[r],t=m.legendItemId,t!==n);r++);e=m.graphics;k(e,m.config,a,b);m=this.style;g=this.color;e=q(g);g=U(g);e=b?M(a.color,e):e;r=b?a.alpha:100*g;n=this.plot.graphic;
t=this.plot.dataLabel;u=this.plot.connector;g=this.plot.point.style;n&&n.attr({fill:H({color:e,alpha:r})});t&&L(t,a,g,b);u&&u.attr({opacity:b?a.alpha/100:U(m.color)})}},"default":function(a,b,e){var g=this.config,m=this.chart,n=m.config,q=n.dataLabelStyle,r=n.useroundedges,u=m.is3D,A,E,z;a=N(a);var J=this.graphics,w=J.legendGraphics,F=J.dataLabelContainer;z=J.errorGroupContainer;var Q,h,n="",n=this.legendItemId,d=m.components.legend.components.items||[];Q=d.length;m=g.showShadow;J=v.graphics.getColumnColor;
if(!1===e&&!0===this.visible){a.alpha||(a.alpha="30");e=this.components.data||[];for(A=0;A<Q&&(E=d[A]||{},E.legendItemId!==n);A++);w&&k(w,E.config,a,b);F&&F.attr({opacity:b?a.alpha/100:U(q.color)});z&&(Q=U(g.errorBarColor),Q=b?M(a.alpha/100,Q):Q,z.attr({opacity:Q}));A=0;for(Q=e.length;A<Q;A++)if((g=e[A])&&g.graphics){n=g.config;z=n.colorArr[0];E=n.colorArr[1];w=E.FCcolor.alpha;n=z.FCcolor.color;n=-1!==(h=n.indexOf(","))&&a.color?a.color+n.substring(h):M(a.color,n);F=u?w:M(a.borderalpha,a.alpha,w);
0===C(w)&&(F="0");w=b?J(n,a.alpha,z.FCcolor.ratio,z.FCcolor.angle,r,M(a.bordercolor,E.FCcolor.color),F,!1,u):[z,E];if(z=g.graphics.element)n=H(w[0]),E=H(w[1]),z.attr({stroke:E,fill:n}).shadow({opacity:m?O(w[0].alpha)/100:0});g=g.graphics.label;L(g,a,q,b)}}}},n=function(){this.effectStore={};this.eventHandlers={}},L=function(a,b,e,g){var k,m,n,r,u;k=q(e.color);n=100*U(e.color);m=g?M(b.valuefontcolor,k):k;r=g?M(b.valuefontalpha,b.alpha,n):n;k=""===e.backgroundColor?"":q(e.backgroundColor);n=""===e.backgroundColor?
0:100*U(e.backgroundColor);isNaN(n)&&(n=0);u=g?M(b.valuebgcolor,k):k;n=g?M(b.valuebgalpha,b.alpha,n):n;u=H({color:u,alpha:n});k=""===e.borderColor?"":q(e.borderColor);n=""===e.borderColor?"":100*U(e.borderColor);isNaN(n)&&(n=0);k=g?M(b.valuebordercolor,k):k;b=g?M(b.valueborderalpha,b.alpha,n):n;b=H({color:k,alpha:b});a&&a.attr({fill:H({color:m,alpha:r}),"text-bound":[u,b,e.borderThickness,e.borderPadding,e.borderRadius,e.borderDash]})},g=new n;n.prototype.add=function(a){this.effectStore[a.name]=
a};n.prototype.attachEventHandlers=function(a,g){this.eventHandlers[a]||(this.eventHandlers[a]={},this.eventHandlers[a].listenerFn=b.addEventListener(a,g))};n.prototype.applyEffect=function(a,b,e){var g=this.effectStore,k=a.jsonData.chart,m=a.defaultDatasetType,n=k.plothighlighteffect&&k.plothighlighteffect.toLowerCase(),k=a.components.dataset;a=a.isSingleSeries?k[0].components.data:k;b=M(b.itemId,b.legendItemId,b.legendItemIndex);var q,r,u,v="",z;n&&(n=n.replace(/\s+/g,"").split("|"),z=n[0],v=n[1]||
"");if(z&&g[z])for(r=0,u=a.length;r<u;r++)n=a[r],m=n.type||m,m=m.toLowerCase(),q=M(n.itemId,n.legendItemId),void 0!==q&&(q=q===b,g[z][m]?g[z][m].call(n,v,e,q,k[0]):g[z]["default"].call(n,v,e,q,k[0]))};b.registrars.highlighteffect=function(a){a&&g.add(a)};g.attachEventHandlers("legenditemrollover",function(a,b){var e=a.sender.jsVars.instanceAPI;!1!==e.hasInteractiveLegend&&!1!==e.highlightEnabled&&g.applyEffect(e,b,!0)});g.attachEventHandlers("legenditemrollout",function(a,b){var e=a.sender.jsVars.instanceAPI;
!1!==e.hasInteractiveLegend&&!1!==e.highlightEnabled&&g.applyEffect(e,b,!1)});g.attachEventHandlers("legenditemclicked",function(a,b){var e=a.sender.jsVars.instanceAPI;!1!==e.hasInteractiveLegend&&!1!==e.highlightEnabled&&g.applyEffect(e,b,!0)});Q.register("highlightEffect",{name:"fadeout",area:m.area,radar:m.area,bubble:m.bubble,pie2d:m.pie,line:m.line,spline:m.line,areaspline:m.area,pie3d:m.pie,zoomline:m.line,funnel:m.funnelpyramid,pyramid:m.funnelpyramid,scatter:m.line,doughnut2d:m.pie,doughnut3d:m.pie,
heatmap:m.heatmap,boxandwhisker2d:m.boxandwhisker2d,multiaxisline:m.line,"default":m["default"]})}]);Rb&&(Ab.FusionCharts=Q);return Q});

//# sourceMappingURL=http://localhost:3052/3.12.2/map/eval/fusioncharts.js.map


/***/ }),

/***/ "../../../../fusioncharts/themes/fusioncharts.theme.fint.js":
/***/ (function(module, exports) {

/*
 Fint Theme v0.0.4
 FusionCharts JavaScript Library

 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>
*/
(function(b){"object"===typeof module&&"undefined"!==typeof module.exports?module.exports=b:b(FusionCharts)})(function(b){b.register("theme",{name:"fint",theme:{base:{chart:{paletteColors:"#0075c2,#1aaf5d,#f2c500,#f45b00,#8e0000,#0e948c,#8cbb2c,#f3de00,#c02d00,#5b0101",labelDisplay:"auto",baseFontColor:"#333333",baseFont:"Helvetica Neue,Arial",captionFontSize:"14",subcaptionFontSize:"14",subcaptionFontBold:"0",showBorder:"0",bgColor:"#ffffff",showShadow:"0",canvasBgColor:"#ffffff",showCanvasBorder:"0",
useplotgradientcolor:"0",useRoundEdges:"0",showPlotBorder:"0",showAlternateHGridColor:"0",showAlternateVGridColor:"0",toolTipColor:"#ffffff",toolTipBorderThickness:"0",toolTipBgColor:"#000000",toolTipBgAlpha:"80",toolTipBorderRadius:"2",toolTipPadding:"5",legendBgAlpha:"0",legendBorderAlpha:"0",legendShadow:"0",legendItemFontSize:"10",legendItemFontColor:"#666666",legendCaptionFontSize:"9",divlineAlpha:"100",divlineColor:"#999999",divlineThickness:"1",divLineIsDashed:"1",divLineDashLen:"1",divLineGapLen:"1",
scrollheight:"10",flatScrollBars:"1",scrollShowButtons:"0",scrollColor:"#cccccc",showHoverEffect:"1",valueFontSize:"10",showXAxisLine:"1",xAxisLineThickness:"1",xAxisLineColor:"#999999"},dataset:[{}],trendlines:[{}]},geo:{chart:{showLabels:"0",fillColor:"#0075c2",showBorder:"1",borderColor:"#eeeeee",borderThickness:"1",borderAlpha:"50",entityFillhoverColor:"#0075c2",entityFillhoverAlpha:"80",connectorColor:"#cccccc",connectorThickness:"1.5",markerFillHoverAlpha:"90"}},pie2d:{chart:{placeValuesInside:"0",
use3dlighting:"0",valueFontColor:"#333333",captionPadding:"15"},data:function(b,a,c){a=window.Math;return{alpha:100-(50<c?a.round(100/a.ceil(c/10)):20)*a.floor(b/10)}}},doughnut2d:{chart:{placeValuesInside:"0",use3dlighting:"0",valueFontColor:"#333333",centerLabelFontSize:"12",centerLabelBold:"1",centerLabelFontColor:"#333333",captionPadding:"15"},data:function(b,a,c){a=window.Math;return{alpha:100-(50<c?a.round(100/a.ceil(c/10)):20)*a.floor(b/10)}}},line:{chart:{lineThickness:"2"}},spline:{chart:{lineThickness:"2"}},
column2d:{chart:{paletteColors:"#0075c2",valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},bar2d:{chart:{paletteColors:"#0075c2",valueFontColor:"#ffffff",placeValuesInside:"1"}},column3d:{chart:{paletteColors:"#0075c2",valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},bar3d:{chart:{paletteColors:"#0075c2",valueFontColor:"#ffffff",placeValuesInside:"1"}},area2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},splinearea:{chart:{valueBgColor:"#ffffff",
valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},mscolumn2d:{chart:{valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},mscolumn3d:{chart:{showValues:"0"}},msstackedcolumn2dlinedy:{chart:{showValues:"0"}},stackedcolumn2d:{chart:{showValues:"0"}},stackedarea2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},stackedbar2d:{chart:{showValues:"0"}},msstackedcolumn2d:{chart:{showValues:"0"}},mscombi3d:{chart:{showValues:"0"}},
mscombi2d:{chart:{showValues:"0"}},mscolumn3dlinedy:{chart:{showValues:"0"}},stackedcolumn3dline:{chart:{showValues:"0"}},stackedcolumn2dline:{chart:{showValues:"0"}},scrollstackedcolumn2d:{chart:{valueFontColor:"#ffffff"}},scrollcombi2d:{chart:{showValues:"0"}},scrollcombidy2d:{chart:{showValues:"0"}},logstackedcolumn2d:{chart:{showValues:"0"}},logmsline:{chart:{showValues:"0"}},logmscolumn2d:{chart:{showValues:"0"}},msstackedcombidy2d:{chart:{showValues:"0"}},scrollcolumn2d:{chart:{valueFontColor:"#ffffff",
placeValuesInside:"1",rotateValues:"1"}},pareto2d:{chart:{paletteColors:"#0075c2",showValues:"0"}},pareto3d:{chart:{paletteColors:"#0075c2",showValues:"0"}},angulargauge:{chart:{pivotFillColor:"#ffffff",pivotRadius:"4",gaugeFillMix:"{light+0}",showTickValues:"1",majorTMHeight:"12",majorTMThickness:"2",majorTMColor:"#000000",minorTMNumber:"0",tickValueDistance:"10",valueFontSize:"24",valueFontBold:"1",gaugeInnerRadius:"50%",showHoverEffect:"0"},dials:{dial:[{baseWidth:"10",rearExtension:"7",bgColor:"#000000",
bgAlpha:"100",borderColor:"#666666",bgHoverAlpha:"20"}]}},hlineargauge:{chart:{pointerFillColor:"#ffffff",gaugeFillMix:"{light+0}",showTickValues:"1",majorTMHeight:"3",majorTMColor:"#000000",minorTMNumber:"0",valueFontSize:"18",valueFontBold:"1"},pointers:{pointer:[{}]}},bubble:{chart:{use3dlighting:"0",showplotborder:"0",showYAxisLine:"1",yAxisLineThickness:"1",yAxisLineColor:"#999999",showAlternateHGridColor:"0",showAlternateVGridColor:"0",plotFillHoverColor:"#2b8ecf"},categories:[{verticalLineDashed:"1",
verticalLineDashLen:"1",verticalLineDashGap:"1",verticalLineThickness:"1",verticalLineColor:"#000000",category:[{}]}],vtrendlines:[{line:[{alpha:"0"}]}]},scatter:{chart:{use3dlighting:"0",showYAxisLine:"1",yAxisLineThickness:"1",yAxisLineColor:"#999999",showAlternateHGridColor:"0",showAlternateVGridColor:"0"},categories:[{verticalLineDashed:"1",verticalLineDashLen:"1",verticalLineDashGap:"1",verticalLineThickness:"1",verticalLineColor:"#000000",category:[{}]}],vtrendlines:[{line:[{alpha:"0"}]}]},
boxandwhisker2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},thermometer:{chart:{gaugeFillColor:"#0075c2"}},cylinder:{chart:{cylFillColor:"#0075c2"}},sparkline:{chart:{linecolor:"#0075c2"}},sparkcolumn:{chart:{plotFillColor:"#0075c2"}},sparkwinloss:{chart:{winColor:"#0075c2",lossColor:"#1aaf5d",drawColor:"#f2c500",scoreLessColor:"#f45b00"}},hbullet:{chart:{plotFillColor:"#0075c2",targetColor:"#1aaf5d"}},vbullet:{chart:{plotFillColor:"#0075c2",targetColor:"#1aaf5d"}}}})});


/***/ }),

/***/ "../../../../rxjs/InnerSubscriber.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Subscriber_1 = __webpack_require__("../../../../rxjs/Subscriber.js");
/**
 * We need this JSDoc comment for affecting ESDoc.
 * @ignore
 * @extends {Ignored}
 */
var InnerSubscriber = (function (_super) {
    __extends(InnerSubscriber, _super);
    function InnerSubscriber(parent, outerValue, outerIndex) {
        _super.call(this);
        this.parent = parent;
        this.outerValue = outerValue;
        this.outerIndex = outerIndex;
        this.index = 0;
    }
    InnerSubscriber.prototype._next = function (value) {
        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);
    };
    InnerSubscriber.prototype._error = function (error) {
        this.parent.notifyError(error, this);
        this.unsubscribe();
    };
    InnerSubscriber.prototype._complete = function () {
        this.parent.notifyComplete(this);
        this.unsubscribe();
    };
    return InnerSubscriber;
}(Subscriber_1.Subscriber));
exports.InnerSubscriber = InnerSubscriber;
//# sourceMappingURL=InnerSubscriber.js.map

/***/ }),

/***/ "../../../../rxjs/Observable.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var root_1 = __webpack_require__("../../../../rxjs/util/root.js");
var toSubscriber_1 = __webpack_require__("../../../../rxjs/util/toSubscriber.js");
var observable_1 = __webpack_require__("../../../../rxjs/symbol/observable.js");
/**
 * A representation of any set of values over any amount of time. This is the most basic building block
 * of RxJS.
 *
 * @class Observable<T>
 */
var Observable = (function () {
    /**
     * @constructor
     * @param {Function} subscribe the function that is called when the Observable is
     * initially subscribed to. This function is given a Subscriber, to which new values
     * can be `next`ed, or an `error` method can be called to raise an error, or
     * `complete` can be called to notify of a successful completion.
     */
    function Observable(subscribe) {
        this._isScalar = false;
        if (subscribe) {
            this._subscribe = subscribe;
        }
    }
    /**
     * Creates a new Observable, with this Observable as the source, and the passed
     * operator defined as the new observable's operator.
     * @method lift
     * @param {Operator} operator the operator defining the operation to take on the observable
     * @return {Observable} a new observable with the Operator applied
     */
    Observable.prototype.lift = function (operator) {
        var observable = new Observable();
        observable.source = this;
        observable.operator = operator;
        return observable;
    };
    /**
     * Invokes an execution of an Observable and registers Observer handlers for notifications it will emit.
     *
     * <span class="informal">Use it when you have all these Observables, but still nothing is happening.</span>
     *
     * `subscribe` is not a regular operator, but a method that calls Observable's internal `subscribe` function. It
     * might be for example a function that you passed to a {@link create} static factory, but most of the time it is
     * a library implementation, which defines what and when will be emitted by an Observable. This means that calling
     * `subscribe` is actually the moment when Observable starts its work, not when it is created, as it is often
     * thought.
     *
     * Apart from starting the execution of an Observable, this method allows you to listen for values
     * that an Observable emits, as well as for when it completes or errors. You can achieve this in two
     * following ways.
     *
     * The first way is creating an object that implements {@link Observer} interface. It should have methods
     * defined by that interface, but note that it should be just a regular JavaScript object, which you can create
     * yourself in any way you want (ES6 class, classic function constructor, object literal etc.). In particular do
     * not attempt to use any RxJS implementation details to create Observers - you don't need them. Remember also
     * that your object does not have to implement all methods. If you find yourself creating a method that doesn't
     * do anything, you can simply omit it. Note however, that if `error` method is not provided, all errors will
     * be left uncaught.
     *
     * The second way is to give up on Observer object altogether and simply provide callback functions in place of its methods.
     * This means you can provide three functions as arguments to `subscribe`, where first function is equivalent
     * of a `next` method, second of an `error` method and third of a `complete` method. Just as in case of Observer,
     * if you do not need to listen for something, you can omit a function, preferably by passing `undefined` or `null`,
     * since `subscribe` recognizes these functions by where they were placed in function call. When it comes
     * to `error` function, just as before, if not provided, errors emitted by an Observable will be thrown.
     *
     * Whatever style of calling `subscribe` you use, in both cases it returns a Subscription object.
     * This object allows you to call `unsubscribe` on it, which in turn will stop work that an Observable does and will clean
     * up all resources that an Observable used. Note that cancelling a subscription will not call `complete` callback
     * provided to `subscribe` function, which is reserved for a regular completion signal that comes from an Observable.
     *
     * Remember that callbacks provided to `subscribe` are not guaranteed to be called asynchronously.
     * It is an Observable itself that decides when these functions will be called. For example {@link of}
     * by default emits all its values synchronously. Always check documentation for how given Observable
     * will behave when subscribed and if its default behavior can be modified with a {@link Scheduler}.
     *
     * @example <caption>Subscribe with an Observer</caption>
     * const sumObserver = {
     *   sum: 0,
     *   next(value) {
     *     console.log('Adding: ' + value);
     *     this.sum = this.sum + value;
     *   },
     *   error() { // We actually could just remove this method,
     *   },        // since we do not really care about errors right now.
     *   complete() {
     *     console.log('Sum equals: ' + this.sum);
     *   }
     * };
     *
     * Rx.Observable.of(1, 2, 3) // Synchronously emits 1, 2, 3 and then completes.
     * .subscribe(sumObserver);
     *
     * // Logs:
     * // "Adding: 1"
     * // "Adding: 2"
     * // "Adding: 3"
     * // "Sum equals: 6"
     *
     *
     * @example <caption>Subscribe with functions</caption>
     * let sum = 0;
     *
     * Rx.Observable.of(1, 2, 3)
     * .subscribe(
     *   function(value) {
     *     console.log('Adding: ' + value);
     *     sum = sum + value;
     *   },
     *   undefined,
     *   function() {
     *     console.log('Sum equals: ' + sum);
     *   }
     * );
     *
     * // Logs:
     * // "Adding: 1"
     * // "Adding: 2"
     * // "Adding: 3"
     * // "Sum equals: 6"
     *
     *
     * @example <caption>Cancel a subscription</caption>
     * const subscription = Rx.Observable.interval(1000).subscribe(
     *   num => console.log(num),
     *   undefined,
     *   () => console.log('completed!') // Will not be called, even
     * );                                // when cancelling subscription
     *
     *
     * setTimeout(() => {
     *   subscription.unsubscribe();
     *   console.log('unsubscribed!');
     * }, 2500);
     *
     * // Logs:
     * // 0 after 1s
     * // 1 after 2s
     * // "unsubscribed!" after 2.5s
     *
     *
     * @param {Observer|Function} observerOrNext (optional) Either an observer with methods to be called,
     *  or the first of three possible handlers, which is the handler for each value emitted from the subscribed
     *  Observable.
     * @param {Function} error (optional) A handler for a terminal event resulting from an error. If no error handler is provided,
     *  the error will be thrown as unhandled.
     * @param {Function} complete (optional) A handler for a terminal event resulting from successful completion.
     * @return {ISubscription} a subscription reference to the registered handlers
     * @method subscribe
     */
    Observable.prototype.subscribe = function (observerOrNext, error, complete) {
        var operator = this.operator;
        var sink = toSubscriber_1.toSubscriber(observerOrNext, error, complete);
        if (operator) {
            operator.call(sink, this.source);
        }
        else {
            sink.add(this.source ? this._subscribe(sink) : this._trySubscribe(sink));
        }
        if (sink.syncErrorThrowable) {
            sink.syncErrorThrowable = false;
            if (sink.syncErrorThrown) {
                throw sink.syncErrorValue;
            }
        }
        return sink;
    };
    Observable.prototype._trySubscribe = function (sink) {
        try {
            return this._subscribe(sink);
        }
        catch (err) {
            sink.syncErrorThrown = true;
            sink.syncErrorValue = err;
            sink.error(err);
        }
    };
    /**
     * @method forEach
     * @param {Function} next a handler for each value emitted by the observable
     * @param {PromiseConstructor} [PromiseCtor] a constructor function used to instantiate the Promise
     * @return {Promise} a promise that either resolves on observable completion or
     *  rejects with the handled error
     */
    Observable.prototype.forEach = function (next, PromiseCtor) {
        var _this = this;
        if (!PromiseCtor) {
            if (root_1.root.Rx && root_1.root.Rx.config && root_1.root.Rx.config.Promise) {
                PromiseCtor = root_1.root.Rx.config.Promise;
            }
            else if (root_1.root.Promise) {
                PromiseCtor = root_1.root.Promise;
            }
        }
        if (!PromiseCtor) {
            throw new Error('no Promise impl found');
        }
        return new PromiseCtor(function (resolve, reject) {
            // Must be declared in a separate statement to avoid a RefernceError when
            // accessing subscription below in the closure due to Temporal Dead Zone.
            var subscription;
            subscription = _this.subscribe(function (value) {
                if (subscription) {
                    // if there is a subscription, then we can surmise
                    // the next handling is asynchronous. Any errors thrown
                    // need to be rejected explicitly and unsubscribe must be
                    // called manually
                    try {
                        next(value);
                    }
                    catch (err) {
                        reject(err);
                        subscription.unsubscribe();
                    }
                }
                else {
                    // if there is NO subscription, then we're getting a nexted
                    // value synchronously during subscription. We can just call it.
                    // If it errors, Observable's `subscribe` will ensure the
                    // unsubscription logic is called, then synchronously rethrow the error.
                    // After that, Promise will trap the error and send it
                    // down the rejection path.
                    next(value);
                }
            }, reject, resolve);
        });
    };
    Observable.prototype._subscribe = function (subscriber) {
        return this.source.subscribe(subscriber);
    };
    /**
     * An interop point defined by the es7-observable spec https://github.com/zenparsing/es-observable
     * @method Symbol.observable
     * @return {Observable} this instance of the observable
     */
    Observable.prototype[observable_1.observable] = function () {
        return this;
    };
    // HACK: Since TypeScript inherits static properties too, we have to
    // fight against TypeScript here so Subject can have a different static create signature
    /**
     * Creates a new cold Observable by calling the Observable constructor
     * @static true
     * @owner Observable
     * @method create
     * @param {Function} subscribe? the subscriber function to be passed to the Observable constructor
     * @return {Observable} a new cold observable
     */
    Observable.create = function (subscribe) {
        return new Observable(subscribe);
    };
    return Observable;
}());
exports.Observable = Observable;
//# sourceMappingURL=Observable.js.map

/***/ }),

/***/ "../../../../rxjs/Observer.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

exports.empty = {
    closed: true,
    next: function (value) { },
    error: function (err) { throw err; },
    complete: function () { }
};
//# sourceMappingURL=Observer.js.map

/***/ }),

/***/ "../../../../rxjs/OuterSubscriber.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Subscriber_1 = __webpack_require__("../../../../rxjs/Subscriber.js");
/**
 * We need this JSDoc comment for affecting ESDoc.
 * @ignore
 * @extends {Ignored}
 */
var OuterSubscriber = (function (_super) {
    __extends(OuterSubscriber, _super);
    function OuterSubscriber() {
        _super.apply(this, arguments);
    }
    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {
        this.destination.next(innerValue);
    };
    OuterSubscriber.prototype.notifyError = function (error, innerSub) {
        this.destination.error(error);
    };
    OuterSubscriber.prototype.notifyComplete = function (innerSub) {
        this.destination.complete();
    };
    return OuterSubscriber;
}(Subscriber_1.Subscriber));
exports.OuterSubscriber = OuterSubscriber;
//# sourceMappingURL=OuterSubscriber.js.map

/***/ }),

/***/ "../../../../rxjs/Subject.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Observable_1 = __webpack_require__("../../../../rxjs/Observable.js");
var Subscriber_1 = __webpack_require__("../../../../rxjs/Subscriber.js");
var Subscription_1 = __webpack_require__("../../../../rxjs/Subscription.js");
var ObjectUnsubscribedError_1 = __webpack_require__("../../../../rxjs/util/ObjectUnsubscribedError.js");
var SubjectSubscription_1 = __webpack_require__("../../../../rxjs/SubjectSubscription.js");
var rxSubscriber_1 = __webpack_require__("../../../../rxjs/symbol/rxSubscriber.js");
/**
 * @class SubjectSubscriber<T>
 */
var SubjectSubscriber = (function (_super) {
    __extends(SubjectSubscriber, _super);
    function SubjectSubscriber(destination) {
        _super.call(this, destination);
        this.destination = destination;
    }
    return SubjectSubscriber;
}(Subscriber_1.Subscriber));
exports.SubjectSubscriber = SubjectSubscriber;
/**
 * @class Subject<T>
 */
var Subject = (function (_super) {
    __extends(Subject, _super);
    function Subject() {
        _super.call(this);
        this.observers = [];
        this.closed = false;
        this.isStopped = false;
        this.hasError = false;
        this.thrownError = null;
    }
    Subject.prototype[rxSubscriber_1.rxSubscriber] = function () {
        return new SubjectSubscriber(this);
    };
    Subject.prototype.lift = function (operator) {
        var subject = new AnonymousSubject(this, this);
        subject.operator = operator;
        return subject;
    };
    Subject.prototype.next = function (value) {
        if (this.closed) {
            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();
        }
        if (!this.isStopped) {
            var observers = this.observers;
            var len = observers.length;
            var copy = observers.slice();
            for (var i = 0; i < len; i++) {
                copy[i].next(value);
            }
        }
    };
    Subject.prototype.error = function (err) {
        if (this.closed) {
            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();
        }
        this.hasError = true;
        this.thrownError = err;
        this.isStopped = true;
        var observers = this.observers;
        var len = observers.length;
        var copy = observers.slice();
        for (var i = 0; i < len; i++) {
            copy[i].error(err);
        }
        this.observers.length = 0;
    };
    Subject.prototype.complete = function () {
        if (this.closed) {
            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();
        }
        this.isStopped = true;
        var observers = this.observers;
        var len = observers.length;
        var copy = observers.slice();
        for (var i = 0; i < len; i++) {
            copy[i].complete();
        }
        this.observers.length = 0;
    };
    Subject.prototype.unsubscribe = function () {
        this.isStopped = true;
        this.closed = true;
        this.observers = null;
    };
    Subject.prototype._trySubscribe = function (subscriber) {
        if (this.closed) {
            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();
        }
        else {
            return _super.prototype._trySubscribe.call(this, subscriber);
        }
    };
    Subject.prototype._subscribe = function (subscriber) {
        if (this.closed) {
            throw new ObjectUnsubscribedError_1.ObjectUnsubscribedError();
        }
        else if (this.hasError) {
            subscriber.error(this.thrownError);
            return Subscription_1.Subscription.EMPTY;
        }
        else if (this.isStopped) {
            subscriber.complete();
            return Subscription_1.Subscription.EMPTY;
        }
        else {
            this.observers.push(subscriber);
            return new SubjectSubscription_1.SubjectSubscription(this, subscriber);
        }
    };
    Subject.prototype.asObservable = function () {
        var observable = new Observable_1.Observable();
        observable.source = this;
        return observable;
    };
    Subject.create = function (destination, source) {
        return new AnonymousSubject(destination, source);
    };
    return Subject;
}(Observable_1.Observable));
exports.Subject = Subject;
/**
 * @class AnonymousSubject<T>
 */
var AnonymousSubject = (function (_super) {
    __extends(AnonymousSubject, _super);
    function AnonymousSubject(destination, source) {
        _super.call(this);
        this.destination = destination;
        this.source = source;
    }
    AnonymousSubject.prototype.next = function (value) {
        var destination = this.destination;
        if (destination && destination.next) {
            destination.next(value);
        }
    };
    AnonymousSubject.prototype.error = function (err) {
        var destination = this.destination;
        if (destination && destination.error) {
            this.destination.error(err);
        }
    };
    AnonymousSubject.prototype.complete = function () {
        var destination = this.destination;
        if (destination && destination.complete) {
            this.destination.complete();
        }
    };
    AnonymousSubject.prototype._subscribe = function (subscriber) {
        var source = this.source;
        if (source) {
            return this.source.subscribe(subscriber);
        }
        else {
            return Subscription_1.Subscription.EMPTY;
        }
    };
    return AnonymousSubject;
}(Subject));
exports.AnonymousSubject = AnonymousSubject;
//# sourceMappingURL=Subject.js.map

/***/ }),

/***/ "../../../../rxjs/SubjectSubscription.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Subscription_1 = __webpack_require__("../../../../rxjs/Subscription.js");
/**
 * We need this JSDoc comment for affecting ESDoc.
 * @ignore
 * @extends {Ignored}
 */
var SubjectSubscription = (function (_super) {
    __extends(SubjectSubscription, _super);
    function SubjectSubscription(subject, subscriber) {
        _super.call(this);
        this.subject = subject;
        this.subscriber = subscriber;
        this.closed = false;
    }
    SubjectSubscription.prototype.unsubscribe = function () {
        if (this.closed) {
            return;
        }
        this.closed = true;
        var subject = this.subject;
        var observers = subject.observers;
        this.subject = null;
        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {
            return;
        }
        var subscriberIndex = observers.indexOf(this.subscriber);
        if (subscriberIndex !== -1) {
            observers.splice(subscriberIndex, 1);
        }
    };
    return SubjectSubscription;
}(Subscription_1.Subscription));
exports.SubjectSubscription = SubjectSubscription;
//# sourceMappingURL=SubjectSubscription.js.map

/***/ }),

/***/ "../../../../rxjs/Subscriber.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var isFunction_1 = __webpack_require__("../../../../rxjs/util/isFunction.js");
var Subscription_1 = __webpack_require__("../../../../rxjs/Subscription.js");
var Observer_1 = __webpack_require__("../../../../rxjs/Observer.js");
var rxSubscriber_1 = __webpack_require__("../../../../rxjs/symbol/rxSubscriber.js");
/**
 * Implements the {@link Observer} interface and extends the
 * {@link Subscription} class. While the {@link Observer} is the public API for
 * consuming the values of an {@link Observable}, all Observers get converted to
 * a Subscriber, in order to provide Subscription-like capabilities such as
 * `unsubscribe`. Subscriber is a common type in RxJS, and crucial for
 * implementing operators, but it is rarely used as a public API.
 *
 * @class Subscriber<T>
 */
var Subscriber = (function (_super) {
    __extends(Subscriber, _super);
    /**
     * @param {Observer|function(value: T): void} [destinationOrNext] A partially
     * defined Observer or a `next` callback function.
     * @param {function(e: ?any): void} [error] The `error` callback of an
     * Observer.
     * @param {function(): void} [complete] The `complete` callback of an
     * Observer.
     */
    function Subscriber(destinationOrNext, error, complete) {
        _super.call(this);
        this.syncErrorValue = null;
        this.syncErrorThrown = false;
        this.syncErrorThrowable = false;
        this.isStopped = false;
        switch (arguments.length) {
            case 0:
                this.destination = Observer_1.empty;
                break;
            case 1:
                if (!destinationOrNext) {
                    this.destination = Observer_1.empty;
                    break;
                }
                if (typeof destinationOrNext === 'object') {
                    if (destinationOrNext instanceof Subscriber) {
                        this.destination = destinationOrNext;
                        this.destination.add(this);
                    }
                    else {
                        this.syncErrorThrowable = true;
                        this.destination = new SafeSubscriber(this, destinationOrNext);
                    }
                    break;
                }
            default:
                this.syncErrorThrowable = true;
                this.destination = new SafeSubscriber(this, destinationOrNext, error, complete);
                break;
        }
    }
    Subscriber.prototype[rxSubscriber_1.rxSubscriber] = function () { return this; };
    /**
     * A static factory for a Subscriber, given a (potentially partial) definition
     * of an Observer.
     * @param {function(x: ?T): void} [next] The `next` callback of an Observer.
     * @param {function(e: ?any): void} [error] The `error` callback of an
     * Observer.
     * @param {function(): void} [complete] The `complete` callback of an
     * Observer.
     * @return {Subscriber<T>} A Subscriber wrapping the (partially defined)
     * Observer represented by the given arguments.
     */
    Subscriber.create = function (next, error, complete) {
        var subscriber = new Subscriber(next, error, complete);
        subscriber.syncErrorThrowable = false;
        return subscriber;
    };
    /**
     * The {@link Observer} callback to receive notifications of type `next` from
     * the Observable, with a value. The Observable may call this method 0 or more
     * times.
     * @param {T} [value] The `next` value.
     * @return {void}
     */
    Subscriber.prototype.next = function (value) {
        if (!this.isStopped) {
            this._next(value);
        }
    };
    /**
     * The {@link Observer} callback to receive notifications of type `error` from
     * the Observable, with an attached {@link Error}. Notifies the Observer that
     * the Observable has experienced an error condition.
     * @param {any} [err] The `error` exception.
     * @return {void}
     */
    Subscriber.prototype.error = function (err) {
        if (!this.isStopped) {
            this.isStopped = true;
            this._error(err);
        }
    };
    /**
     * The {@link Observer} callback to receive a valueless notification of type
     * `complete` from the Observable. Notifies the Observer that the Observable
     * has finished sending push-based notifications.
     * @return {void}
     */
    Subscriber.prototype.complete = function () {
        if (!this.isStopped) {
            this.isStopped = true;
            this._complete();
        }
    };
    Subscriber.prototype.unsubscribe = function () {
        if (this.closed) {
            return;
        }
        this.isStopped = true;
        _super.prototype.unsubscribe.call(this);
    };
    Subscriber.prototype._next = function (value) {
        this.destination.next(value);
    };
    Subscriber.prototype._error = function (err) {
        this.destination.error(err);
        this.unsubscribe();
    };
    Subscriber.prototype._complete = function () {
        this.destination.complete();
        this.unsubscribe();
    };
    Subscriber.prototype._unsubscribeAndRecycle = function () {
        var _a = this, _parent = _a._parent, _parents = _a._parents;
        this._parent = null;
        this._parents = null;
        this.unsubscribe();
        this.closed = false;
        this.isStopped = false;
        this._parent = _parent;
        this._parents = _parents;
        return this;
    };
    return Subscriber;
}(Subscription_1.Subscription));
exports.Subscriber = Subscriber;
/**
 * We need this JSDoc comment for affecting ESDoc.
 * @ignore
 * @extends {Ignored}
 */
var SafeSubscriber = (function (_super) {
    __extends(SafeSubscriber, _super);
    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {
        _super.call(this);
        this._parentSubscriber = _parentSubscriber;
        var next;
        var context = this;
        if (isFunction_1.isFunction(observerOrNext)) {
            next = observerOrNext;
        }
        else if (observerOrNext) {
            next = observerOrNext.next;
            error = observerOrNext.error;
            complete = observerOrNext.complete;
            if (observerOrNext !== Observer_1.empty) {
                context = Object.create(observerOrNext);
                if (isFunction_1.isFunction(context.unsubscribe)) {
                    this.add(context.unsubscribe.bind(context));
                }
                context.unsubscribe = this.unsubscribe.bind(this);
            }
        }
        this._context = context;
        this._next = next;
        this._error = error;
        this._complete = complete;
    }
    SafeSubscriber.prototype.next = function (value) {
        if (!this.isStopped && this._next) {
            var _parentSubscriber = this._parentSubscriber;
            if (!_parentSubscriber.syncErrorThrowable) {
                this.__tryOrUnsub(this._next, value);
            }
            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {
                this.unsubscribe();
            }
        }
    };
    SafeSubscriber.prototype.error = function (err) {
        if (!this.isStopped) {
            var _parentSubscriber = this._parentSubscriber;
            if (this._error) {
                if (!_parentSubscriber.syncErrorThrowable) {
                    this.__tryOrUnsub(this._error, err);
                    this.unsubscribe();
                }
                else {
                    this.__tryOrSetError(_parentSubscriber, this._error, err);
                    this.unsubscribe();
                }
            }
            else if (!_parentSubscriber.syncErrorThrowable) {
                this.unsubscribe();
                throw err;
            }
            else {
                _parentSubscriber.syncErrorValue = err;
                _parentSubscriber.syncErrorThrown = true;
                this.unsubscribe();
            }
        }
    };
    SafeSubscriber.prototype.complete = function () {
        var _this = this;
        if (!this.isStopped) {
            var _parentSubscriber = this._parentSubscriber;
            if (this._complete) {
                var wrappedComplete = function () { return _this._complete.call(_this._context); };
                if (!_parentSubscriber.syncErrorThrowable) {
                    this.__tryOrUnsub(wrappedComplete);
                    this.unsubscribe();
                }
                else {
                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);
                    this.unsubscribe();
                }
            }
            else {
                this.unsubscribe();
            }
        }
    };
    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {
        try {
            fn.call(this._context, value);
        }
        catch (err) {
            this.unsubscribe();
            throw err;
        }
    };
    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {
        try {
            fn.call(this._context, value);
        }
        catch (err) {
            parent.syncErrorValue = err;
            parent.syncErrorThrown = true;
            return true;
        }
        return false;
    };
    SafeSubscriber.prototype._unsubscribe = function () {
        var _parentSubscriber = this._parentSubscriber;
        this._context = null;
        this._parentSubscriber = null;
        _parentSubscriber.unsubscribe();
    };
    return SafeSubscriber;
}(Subscriber));
//# sourceMappingURL=Subscriber.js.map

/***/ }),

/***/ "../../../../rxjs/Subscription.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isArray_1 = __webpack_require__("../../../../rxjs/util/isArray.js");
var isObject_1 = __webpack_require__("../../../../rxjs/util/isObject.js");
var isFunction_1 = __webpack_require__("../../../../rxjs/util/isFunction.js");
var tryCatch_1 = __webpack_require__("../../../../rxjs/util/tryCatch.js");
var errorObject_1 = __webpack_require__("../../../../rxjs/util/errorObject.js");
var UnsubscriptionError_1 = __webpack_require__("../../../../rxjs/util/UnsubscriptionError.js");
/**
 * Represents a disposable resource, such as the execution of an Observable. A
 * Subscription has one important method, `unsubscribe`, that takes no argument
 * and just disposes the resource held by the subscription.
 *
 * Additionally, subscriptions may be grouped together through the `add()`
 * method, which will attach a child Subscription to the current Subscription.
 * When a Subscription is unsubscribed, all its children (and its grandchildren)
 * will be unsubscribed as well.
 *
 * @class Subscription
 */
var Subscription = (function () {
    /**
     * @param {function(): void} [unsubscribe] A function describing how to
     * perform the disposal of resources when the `unsubscribe` method is called.
     */
    function Subscription(unsubscribe) {
        /**
         * A flag to indicate whether this Subscription has already been unsubscribed.
         * @type {boolean}
         */
        this.closed = false;
        this._parent = null;
        this._parents = null;
        this._subscriptions = null;
        if (unsubscribe) {
            this._unsubscribe = unsubscribe;
        }
    }
    /**
     * Disposes the resources held by the subscription. May, for instance, cancel
     * an ongoing Observable execution or cancel any other type of work that
     * started when the Subscription was created.
     * @return {void}
     */
    Subscription.prototype.unsubscribe = function () {
        var hasErrors = false;
        var errors;
        if (this.closed) {
            return;
        }
        var _a = this, _parent = _a._parent, _parents = _a._parents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;
        this.closed = true;
        this._parent = null;
        this._parents = null;
        // null out _subscriptions first so any child subscriptions that attempt
        // to remove themselves from this subscription will noop
        this._subscriptions = null;
        var index = -1;
        var len = _parents ? _parents.length : 0;
        // if this._parent is null, then so is this._parents, and we
        // don't have to remove ourselves from any parent subscriptions.
        while (_parent) {
            _parent.remove(this);
            // if this._parents is null or index >= len,
            // then _parent is set to null, and the loop exits
            _parent = ++index < len && _parents[index] || null;
        }
        if (isFunction_1.isFunction(_unsubscribe)) {
            var trial = tryCatch_1.tryCatch(_unsubscribe).call(this);
            if (trial === errorObject_1.errorObject) {
                hasErrors = true;
                errors = errors || (errorObject_1.errorObject.e instanceof UnsubscriptionError_1.UnsubscriptionError ?
                    flattenUnsubscriptionErrors(errorObject_1.errorObject.e.errors) : [errorObject_1.errorObject.e]);
            }
        }
        if (isArray_1.isArray(_subscriptions)) {
            index = -1;
            len = _subscriptions.length;
            while (++index < len) {
                var sub = _subscriptions[index];
                if (isObject_1.isObject(sub)) {
                    var trial = tryCatch_1.tryCatch(sub.unsubscribe).call(sub);
                    if (trial === errorObject_1.errorObject) {
                        hasErrors = true;
                        errors = errors || [];
                        var err = errorObject_1.errorObject.e;
                        if (err instanceof UnsubscriptionError_1.UnsubscriptionError) {
                            errors = errors.concat(flattenUnsubscriptionErrors(err.errors));
                        }
                        else {
                            errors.push(err);
                        }
                    }
                }
            }
        }
        if (hasErrors) {
            throw new UnsubscriptionError_1.UnsubscriptionError(errors);
        }
    };
    /**
     * Adds a tear down to be called during the unsubscribe() of this
     * Subscription.
     *
     * If the tear down being added is a subscription that is already
     * unsubscribed, is the same reference `add` is being called on, or is
     * `Subscription.EMPTY`, it will not be added.
     *
     * If this subscription is already in an `closed` state, the passed
     * tear down logic will be executed immediately.
     *
     * @param {TeardownLogic} teardown The additional logic to execute on
     * teardown.
     * @return {Subscription} Returns the Subscription used or created to be
     * added to the inner subscriptions list. This Subscription can be used with
     * `remove()` to remove the passed teardown logic from the inner subscriptions
     * list.
     */
    Subscription.prototype.add = function (teardown) {
        if (!teardown || (teardown === Subscription.EMPTY)) {
            return Subscription.EMPTY;
        }
        if (teardown === this) {
            return this;
        }
        var subscription = teardown;
        switch (typeof teardown) {
            case 'function':
                subscription = new Subscription(teardown);
            case 'object':
                if (subscription.closed || typeof subscription.unsubscribe !== 'function') {
                    return subscription;
                }
                else if (this.closed) {
                    subscription.unsubscribe();
                    return subscription;
                }
                else if (typeof subscription._addParent !== 'function' /* quack quack */) {
                    var tmp = subscription;
                    subscription = new Subscription();
                    subscription._subscriptions = [tmp];
                }
                break;
            default:
                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');
        }
        var subscriptions = this._subscriptions || (this._subscriptions = []);
        subscriptions.push(subscription);
        subscription._addParent(this);
        return subscription;
    };
    /**
     * Removes a Subscription from the internal list of subscriptions that will
     * unsubscribe during the unsubscribe process of this Subscription.
     * @param {Subscription} subscription The subscription to remove.
     * @return {void}
     */
    Subscription.prototype.remove = function (subscription) {
        var subscriptions = this._subscriptions;
        if (subscriptions) {
            var subscriptionIndex = subscriptions.indexOf(subscription);
            if (subscriptionIndex !== -1) {
                subscriptions.splice(subscriptionIndex, 1);
            }
        }
    };
    Subscription.prototype._addParent = function (parent) {
        var _a = this, _parent = _a._parent, _parents = _a._parents;
        if (!_parent || _parent === parent) {
            // If we don't have a parent, or the new parent is the same as the
            // current parent, then set this._parent to the new parent.
            this._parent = parent;
        }
        else if (!_parents) {
            // If there's already one parent, but not multiple, allocate an Array to
            // store the rest of the parent Subscriptions.
            this._parents = [parent];
        }
        else if (_parents.indexOf(parent) === -1) {
            // Only add the new parent to the _parents list if it's not already there.
            _parents.push(parent);
        }
    };
    Subscription.EMPTY = (function (empty) {
        empty.closed = true;
        return empty;
    }(new Subscription()));
    return Subscription;
}());
exports.Subscription = Subscription;
function flattenUnsubscriptionErrors(errors) {
    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError_1.UnsubscriptionError) ? err.errors : err); }, []);
}
//# sourceMappingURL=Subscription.js.map

/***/ }),

/***/ "../../../../rxjs/observable/ArrayObservable.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Observable_1 = __webpack_require__("../../../../rxjs/Observable.js");
var ScalarObservable_1 = __webpack_require__("../../../../rxjs/observable/ScalarObservable.js");
var EmptyObservable_1 = __webpack_require__("../../../../rxjs/observable/EmptyObservable.js");
var isScheduler_1 = __webpack_require__("../../../../rxjs/util/isScheduler.js");
/**
 * We need this JSDoc comment for affecting ESDoc.
 * @extends {Ignored}
 * @hide true
 */
var ArrayObservable = (function (_super) {
    __extends(ArrayObservable, _super);
    function ArrayObservable(array, scheduler) {
        _super.call(this);
        this.array = array;
        this.scheduler = scheduler;
        if (!scheduler && array.length === 1) {
            this._isScalar = true;
            this.value = array[0];
        }
    }
    ArrayObservable.create = function (array, scheduler) {
        return new ArrayObservable(array, scheduler);
    };
    /**
     * Creates an Observable that emits some values you specify as arguments,
     * immediately one after the other, and then emits a complete notification.
     *
     * <span class="informal">Emits the arguments you provide, then completes.
     * </span>
     *
     * <img src="./img/of.png" width="100%">
     *
     * This static operator is useful for creating a simple Observable that only
     * emits the arguments given, and the complete notification thereafter. It can
     * be used for composing with other Observables, such as with {@link concat}.
     * By default, it uses a `null` IScheduler, which means the `next`
     * notifications are sent synchronously, although with a different IScheduler
     * it is possible to determine when those notifications will be delivered.
     *
     * @example <caption>Emit 10, 20, 30, then 'a', 'b', 'c', then start ticking every second.</caption>
     * var numbers = Rx.Observable.of(10, 20, 30);
     * var letters = Rx.Observable.of('a', 'b', 'c');
     * var interval = Rx.Observable.interval(1000);
     * var result = numbers.concat(letters).concat(interval);
     * result.subscribe(x => console.log(x));
     *
     * @see {@link create}
     * @see {@link empty}
     * @see {@link never}
     * @see {@link throw}
     *
     * @param {...T} values Arguments that represent `next` values to be emitted.
     * @param {Scheduler} [scheduler] A {@link IScheduler} to use for scheduling
     * the emissions of the `next` notifications.
     * @return {Observable<T>} An Observable that emits each given input value.
     * @static true
     * @name of
     * @owner Observable
     */
    ArrayObservable.of = function () {
        var array = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            array[_i - 0] = arguments[_i];
        }
        var scheduler = array[array.length - 1];
        if (isScheduler_1.isScheduler(scheduler)) {
            array.pop();
        }
        else {
            scheduler = null;
        }
        var len = array.length;
        if (len > 1) {
            return new ArrayObservable(array, scheduler);
        }
        else if (len === 1) {
            return new ScalarObservable_1.ScalarObservable(array[0], scheduler);
        }
        else {
            return new EmptyObservable_1.EmptyObservable(scheduler);
        }
    };
    ArrayObservable.dispatch = function (state) {
        var array = state.array, index = state.index, count = state.count, subscriber = state.subscriber;
        if (index >= count) {
            subscriber.complete();
            return;
        }
        subscriber.next(array[index]);
        if (subscriber.closed) {
            return;
        }
        state.index = index + 1;
        this.schedule(state);
    };
    ArrayObservable.prototype._subscribe = function (subscriber) {
        var index = 0;
        var array = this.array;
        var count = array.length;
        var scheduler = this.scheduler;
        if (scheduler) {
            return scheduler.schedule(ArrayObservable.dispatch, 0, {
                array: array, index: index, count: count, subscriber: subscriber
            });
        }
        else {
            for (var i = 0; i < count && !subscriber.closed; i++) {
                subscriber.next(array[i]);
            }
            subscriber.complete();
        }
    };
    return ArrayObservable;
}(Observable_1.Observable));
exports.ArrayObservable = ArrayObservable;
//# sourceMappingURL=ArrayObservable.js.map

/***/ }),

/***/ "../../../../rxjs/observable/ConnectableObservable.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Subject_1 = __webpack_require__("../../../../rxjs/Subject.js");
var Observable_1 = __webpack_require__("../../../../rxjs/Observable.js");
var Subscriber_1 = __webpack_require__("../../../../rxjs/Subscriber.js");
var Subscription_1 = __webpack_require__("../../../../rxjs/Subscription.js");
/**
 * @class ConnectableObservable<T>
 */
var ConnectableObservable = (function (_super) {
    __extends(ConnectableObservable, _super);
    function ConnectableObservable(source, subjectFactory) {
        _super.call(this);
        this.source = source;
        this.subjectFactory = subjectFactory;
        this._refCount = 0;
        this._isComplete = false;
    }
    ConnectableObservable.prototype._subscribe = function (subscriber) {
        return this.getSubject().subscribe(subscriber);
    };
    ConnectableObservable.prototype.getSubject = function () {
        var subject = this._subject;
        if (!subject || subject.isStopped) {
            this._subject = this.subjectFactory();
        }
        return this._subject;
    };
    ConnectableObservable.prototype.connect = function () {
        var connection = this._connection;
        if (!connection) {
            this._isComplete = false;
            connection = this._connection = new Subscription_1.Subscription();
            connection.add(this.source
                .subscribe(new ConnectableSubscriber(this.getSubject(), this)));
            if (connection.closed) {
                this._connection = null;
                connection = Subscription_1.Subscription.EMPTY;
            }
            else {
                this._connection = connection;
            }
        }
        return connection;
    };
    ConnectableObservable.prototype.refCount = function () {
        return this.lift(new RefCountOperator(this));
    };
    return ConnectableObservable;
}(Observable_1.Observable));
exports.ConnectableObservable = ConnectableObservable;
var connectableProto = ConnectableObservable.prototype;
exports.connectableObservableDescriptor = {
    operator: { value: null },
    _refCount: { value: 0, writable: true },
    _subject: { value: null, writable: true },
    _connection: { value: null, writable: true },
    _subscribe: { value: connectableProto._subscribe },
    _isComplete: { value: connectableProto._isComplete, writable: true },
    getSubject: { value: connectableProto.getSubject },
    connect: { value: connectableProto.connect },
    refCount: { value: connectableProto.refCount }
};
var ConnectableSubscriber = (function (_super) {
    __extends(ConnectableSubscriber, _super);
    function ConnectableSubscriber(destination, connectable) {
        _super.call(this, destination);
        this.connectable = connectable;
    }
    ConnectableSubscriber.prototype._error = function (err) {
        this._unsubscribe();
        _super.prototype._error.call(this, err);
    };
    ConnectableSubscriber.prototype._complete = function () {
        this.connectable._isComplete = true;
        this._unsubscribe();
        _super.prototype._complete.call(this);
    };
    ConnectableSubscriber.prototype._unsubscribe = function () {
        var connectable = this.connectable;
        if (connectable) {
            this.connectable = null;
            var connection = connectable._connection;
            connectable._refCount = 0;
            connectable._subject = null;
            connectable._connection = null;
            if (connection) {
                connection.unsubscribe();
            }
        }
    };
    return ConnectableSubscriber;
}(Subject_1.SubjectSubscriber));
var RefCountOperator = (function () {
    function RefCountOperator(connectable) {
        this.connectable = connectable;
    }
    RefCountOperator.prototype.call = function (subscriber, source) {
        var connectable = this.connectable;
        connectable._refCount++;
        var refCounter = new RefCountSubscriber(subscriber, connectable);
        var subscription = source.subscribe(refCounter);
        if (!refCounter.closed) {
            refCounter.connection = connectable.connect();
        }
        return subscription;
    };
    return RefCountOperator;
}());
var RefCountSubscriber = (function (_super) {
    __extends(RefCountSubscriber, _super);
    function RefCountSubscriber(destination, connectable) {
        _super.call(this, destination);
        this.connectable = connectable;
    }
    RefCountSubscriber.prototype._unsubscribe = function () {
        var connectable = this.connectable;
        if (!connectable) {
            this.connection = null;
            return;
        }
        this.connectable = null;
        var refCount = connectable._refCount;
        if (refCount <= 0) {
            this.connection = null;
            return;
        }
        connectable._refCount = refCount - 1;
        if (refCount > 1) {
            this.connection = null;
            return;
        }
        ///
        // Compare the local RefCountSubscriber's connection Subscription to the
        // connection Subscription on the shared ConnectableObservable. In cases
        // where the ConnectableObservable source synchronously emits values, and
        // the RefCountSubscriber's downstream Observers synchronously unsubscribe,
        // execution continues to here before the RefCountOperator has a chance to
        // supply the RefCountSubscriber with the shared connection Subscription.
        // For example:
        // ```
        // Observable.range(0, 10)
        //   .publish()
        //   .refCount()
        //   .take(5)
        //   .subscribe();
        // ```
        // In order to account for this case, RefCountSubscriber should only dispose
        // the ConnectableObservable's shared connection Subscription if the
        // connection Subscription exists, *and* either:
        //   a. RefCountSubscriber doesn't have a reference to the shared connection
        //      Subscription yet, or,
        //   b. RefCountSubscriber's connection Subscription reference is identical
        //      to the shared connection Subscription
        ///
        var connection = this.connection;
        var sharedConnection = connectable._connection;
        this.connection = null;
        if (sharedConnection && (!connection || sharedConnection === connection)) {
            sharedConnection.unsubscribe();
        }
    };
    return RefCountSubscriber;
}(Subscriber_1.Subscriber));
//# sourceMappingURL=ConnectableObservable.js.map

/***/ }),

/***/ "../../../../rxjs/observable/EmptyObservable.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Observable_1 = __webpack_require__("../../../../rxjs/Observable.js");
/**
 * We need this JSDoc comment for affecting ESDoc.
 * @extends {Ignored}
 * @hide true
 */
var EmptyObservable = (function (_super) {
    __extends(EmptyObservable, _super);
    function EmptyObservable(scheduler) {
        _super.call(this);
        this.scheduler = scheduler;
    }
    /**
     * Creates an Observable that emits no items to the Observer and immediately
     * emits a complete notification.
     *
     * <span class="informal">Just emits 'complete', and nothing else.
     * </span>
     *
     * <img src="./img/empty.png" width="100%">
     *
     * This static operator is useful for creating a simple Observable that only
     * emits the complete notification. It can be used for composing with other
     * Observables, such as in a {@link mergeMap}.
     *
     * @example <caption>Emit the number 7, then complete.</caption>
     * var result = Rx.Observable.empty().startWith(7);
     * result.subscribe(x => console.log(x));
     *
     * @example <caption>Map and flatten only odd numbers to the sequence 'a', 'b', 'c'</caption>
     * var interval = Rx.Observable.interval(1000);
     * var result = interval.mergeMap(x =>
     *   x % 2 === 1 ? Rx.Observable.of('a', 'b', 'c') : Rx.Observable.empty()
     * );
     * result.subscribe(x => console.log(x));
     *
     * // Results in the following to the console:
     * // x is equal to the count on the interval eg(0,1,2,3,...)
     * // x will occur every 1000ms
     * // if x % 2 is equal to 1 print abc
     * // if x % 2 is not equal to 1 nothing will be output
     *
     * @see {@link create}
     * @see {@link never}
     * @see {@link of}
     * @see {@link throw}
     *
     * @param {Scheduler} [scheduler] A {@link IScheduler} to use for scheduling
     * the emission of the complete notification.
     * @return {Observable} An "empty" Observable: emits only the complete
     * notification.
     * @static true
     * @name empty
     * @owner Observable
     */
    EmptyObservable.create = function (scheduler) {
        return new EmptyObservable(scheduler);
    };
    EmptyObservable.dispatch = function (arg) {
        var subscriber = arg.subscriber;
        subscriber.complete();
    };
    EmptyObservable.prototype._subscribe = function (subscriber) {
        var scheduler = this.scheduler;
        if (scheduler) {
            return scheduler.schedule(EmptyObservable.dispatch, 0, { subscriber: subscriber });
        }
        else {
            subscriber.complete();
        }
    };
    return EmptyObservable;
}(Observable_1.Observable));
exports.EmptyObservable = EmptyObservable;
//# sourceMappingURL=EmptyObservable.js.map

/***/ }),

/***/ "../../../../rxjs/observable/ScalarObservable.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Observable_1 = __webpack_require__("../../../../rxjs/Observable.js");
/**
 * We need this JSDoc comment for affecting ESDoc.
 * @extends {Ignored}
 * @hide true
 */
var ScalarObservable = (function (_super) {
    __extends(ScalarObservable, _super);
    function ScalarObservable(value, scheduler) {
        _super.call(this);
        this.value = value;
        this.scheduler = scheduler;
        this._isScalar = true;
        if (scheduler) {
            this._isScalar = false;
        }
    }
    ScalarObservable.create = function (value, scheduler) {
        return new ScalarObservable(value, scheduler);
    };
    ScalarObservable.dispatch = function (state) {
        var done = state.done, value = state.value, subscriber = state.subscriber;
        if (done) {
            subscriber.complete();
            return;
        }
        subscriber.next(value);
        if (subscriber.closed) {
            return;
        }
        state.done = true;
        this.schedule(state);
    };
    ScalarObservable.prototype._subscribe = function (subscriber) {
        var value = this.value;
        var scheduler = this.scheduler;
        if (scheduler) {
            return scheduler.schedule(ScalarObservable.dispatch, 0, {
                done: false, value: value, subscriber: subscriber
            });
        }
        else {
            subscriber.next(value);
            if (!subscriber.closed) {
                subscriber.complete();
            }
        }
    };
    return ScalarObservable;
}(Observable_1.Observable));
exports.ScalarObservable = ScalarObservable;
//# sourceMappingURL=ScalarObservable.js.map

/***/ }),

/***/ "../../../../rxjs/observable/merge.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var merge_1 = __webpack_require__("../../../../rxjs/operator/merge.js");
exports.merge = merge_1.mergeStatic;
//# sourceMappingURL=merge.js.map

/***/ }),

/***/ "../../../../rxjs/operator/merge.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var Observable_1 = __webpack_require__("../../../../rxjs/Observable.js");
var ArrayObservable_1 = __webpack_require__("../../../../rxjs/observable/ArrayObservable.js");
var mergeAll_1 = __webpack_require__("../../../../rxjs/operator/mergeAll.js");
var isScheduler_1 = __webpack_require__("../../../../rxjs/util/isScheduler.js");
/* tslint:enable:max-line-length */
/**
 * Creates an output Observable which concurrently emits all values from every
 * given input Observable.
 *
 * <span class="informal">Flattens multiple Observables together by blending
 * their values into one Observable.</span>
 *
 * <img src="./img/merge.png" width="100%">
 *
 * `merge` subscribes to each given input Observable (either the source or an
 * Observable given as argument), and simply forwards (without doing any
 * transformation) all the values from all the input Observables to the output
 * Observable. The output Observable only completes once all input Observables
 * have completed. Any error delivered by an input Observable will be immediately
 * emitted on the output Observable.
 *
 * @example <caption>Merge together two Observables: 1s interval and clicks</caption>
 * var clicks = Rx.Observable.fromEvent(document, 'click');
 * var timer = Rx.Observable.interval(1000);
 * var clicksOrTimer = clicks.merge(timer);
 * clicksOrTimer.subscribe(x => console.log(x));
 *
 * @example <caption>Merge together 3 Observables, but only 2 run concurrently</caption>
 * var timer1 = Rx.Observable.interval(1000).take(10);
 * var timer2 = Rx.Observable.interval(2000).take(6);
 * var timer3 = Rx.Observable.interval(500).take(10);
 * var concurrent = 2; // the argument
 * var merged = timer1.merge(timer2, timer3, concurrent);
 * merged.subscribe(x => console.log(x));
 *
 * @see {@link mergeAll}
 * @see {@link mergeMap}
 * @see {@link mergeMapTo}
 * @see {@link mergeScan}
 *
 * @param {ObservableInput} other An input Observable to merge with the source
 * Observable. More than one input Observables may be given as argument.
 * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input
 * Observables being subscribed to concurrently.
 * @param {Scheduler} [scheduler=null] The IScheduler to use for managing
 * concurrency of input Observables.
 * @return {Observable} An Observable that emits items that are the result of
 * every input Observable.
 * @method merge
 * @owner Observable
 */
function merge() {
    var observables = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        observables[_i - 0] = arguments[_i];
    }
    return this.lift.call(mergeStatic.apply(void 0, [this].concat(observables)));
}
exports.merge = merge;
/* tslint:enable:max-line-length */
/**
 * Creates an output Observable which concurrently emits all values from every
 * given input Observable.
 *
 * <span class="informal">Flattens multiple Observables together by blending
 * their values into one Observable.</span>
 *
 * <img src="./img/merge.png" width="100%">
 *
 * `merge` subscribes to each given input Observable (as arguments), and simply
 * forwards (without doing any transformation) all the values from all the input
 * Observables to the output Observable. The output Observable only completes
 * once all input Observables have completed. Any error delivered by an input
 * Observable will be immediately emitted on the output Observable.
 *
 * @example <caption>Merge together two Observables: 1s interval and clicks</caption>
 * var clicks = Rx.Observable.fromEvent(document, 'click');
 * var timer = Rx.Observable.interval(1000);
 * var clicksOrTimer = Rx.Observable.merge(clicks, timer);
 * clicksOrTimer.subscribe(x => console.log(x));
 *
 * // Results in the following:
 * // timer will emit ascending values, one every second(1000ms) to console
 * // clicks logs MouseEvents to console everytime the "document" is clicked
 * // Since the two streams are merged you see these happening
 * // as they occur.
 *
 * @example <caption>Merge together 3 Observables, but only 2 run concurrently</caption>
 * var timer1 = Rx.Observable.interval(1000).take(10);
 * var timer2 = Rx.Observable.interval(2000).take(6);
 * var timer3 = Rx.Observable.interval(500).take(10);
 * var concurrent = 2; // the argument
 * var merged = Rx.Observable.merge(timer1, timer2, timer3, concurrent);
 * merged.subscribe(x => console.log(x));
 *
 * // Results in the following:
 * // - First timer1 and timer2 will run concurrently
 * // - timer1 will emit a value every 1000ms for 10 iterations
 * // - timer2 will emit a value every 2000ms for 6 iterations
 * // - after timer1 hits it's max iteration, timer2 will
 * //   continue, and timer3 will start to run concurrently with timer2
 * // - when timer2 hits it's max iteration it terminates, and
 * //   timer3 will continue to emit a value every 500ms until it is complete
 *
 * @see {@link mergeAll}
 * @see {@link mergeMap}
 * @see {@link mergeMapTo}
 * @see {@link mergeScan}
 *
 * @param {...ObservableInput} observables Input Observables to merge together.
 * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of input
 * Observables being subscribed to concurrently.
 * @param {Scheduler} [scheduler=null] The IScheduler to use for managing
 * concurrency of input Observables.
 * @return {Observable} an Observable that emits items that are the result of
 * every input Observable.
 * @static true
 * @name merge
 * @owner Observable
 */
function mergeStatic() {
    var observables = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        observables[_i - 0] = arguments[_i];
    }
    var concurrent = Number.POSITIVE_INFINITY;
    var scheduler = null;
    var last = observables[observables.length - 1];
    if (isScheduler_1.isScheduler(last)) {
        scheduler = observables.pop();
        if (observables.length > 1 && typeof observables[observables.length - 1] === 'number') {
            concurrent = observables.pop();
        }
    }
    else if (typeof last === 'number') {
        concurrent = observables.pop();
    }
    if (scheduler === null && observables.length === 1 && observables[0] instanceof Observable_1.Observable) {
        return observables[0];
    }
    return new ArrayObservable_1.ArrayObservable(observables, scheduler).lift(new mergeAll_1.MergeAllOperator(concurrent));
}
exports.mergeStatic = mergeStatic;
//# sourceMappingURL=merge.js.map

/***/ }),

/***/ "../../../../rxjs/operator/mergeAll.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var OuterSubscriber_1 = __webpack_require__("../../../../rxjs/OuterSubscriber.js");
var subscribeToResult_1 = __webpack_require__("../../../../rxjs/util/subscribeToResult.js");
/**
 * Converts a higher-order Observable into a first-order Observable which
 * concurrently delivers all values that are emitted on the inner Observables.
 *
 * <span class="informal">Flattens an Observable-of-Observables.</span>
 *
 * <img src="./img/mergeAll.png" width="100%">
 *
 * `mergeAll` subscribes to an Observable that emits Observables, also known as
 * a higher-order Observable. Each time it observes one of these emitted inner
 * Observables, it subscribes to that and delivers all the values from the
 * inner Observable on the output Observable. The output Observable only
 * completes once all inner Observables have completed. Any error delivered by
 * a inner Observable will be immediately emitted on the output Observable.
 *
 * @example <caption>Spawn a new interval Observable for each click event, and blend their outputs as one Observable</caption>
 * var clicks = Rx.Observable.fromEvent(document, 'click');
 * var higherOrder = clicks.map((ev) => Rx.Observable.interval(1000));
 * var firstOrder = higherOrder.mergeAll();
 * firstOrder.subscribe(x => console.log(x));
 *
 * @example <caption>Count from 0 to 9 every second for each click, but only allow 2 concurrent timers</caption>
 * var clicks = Rx.Observable.fromEvent(document, 'click');
 * var higherOrder = clicks.map((ev) => Rx.Observable.interval(1000).take(10));
 * var firstOrder = higherOrder.mergeAll(2);
 * firstOrder.subscribe(x => console.log(x));
 *
 * @see {@link combineAll}
 * @see {@link concatAll}
 * @see {@link exhaust}
 * @see {@link merge}
 * @see {@link mergeMap}
 * @see {@link mergeMapTo}
 * @see {@link mergeScan}
 * @see {@link switch}
 * @see {@link zipAll}
 *
 * @param {number} [concurrent=Number.POSITIVE_INFINITY] Maximum number of inner
 * Observables being subscribed to concurrently.
 * @return {Observable} An Observable that emits values coming from all the
 * inner Observables emitted by the source Observable.
 * @method mergeAll
 * @owner Observable
 */
function mergeAll(concurrent) {
    if (concurrent === void 0) { concurrent = Number.POSITIVE_INFINITY; }
    return this.lift(new MergeAllOperator(concurrent));
}
exports.mergeAll = mergeAll;
var MergeAllOperator = (function () {
    function MergeAllOperator(concurrent) {
        this.concurrent = concurrent;
    }
    MergeAllOperator.prototype.call = function (observer, source) {
        return source.subscribe(new MergeAllSubscriber(observer, this.concurrent));
    };
    return MergeAllOperator;
}());
exports.MergeAllOperator = MergeAllOperator;
/**
 * We need this JSDoc comment for affecting ESDoc.
 * @ignore
 * @extends {Ignored}
 */
var MergeAllSubscriber = (function (_super) {
    __extends(MergeAllSubscriber, _super);
    function MergeAllSubscriber(destination, concurrent) {
        _super.call(this, destination);
        this.concurrent = concurrent;
        this.hasCompleted = false;
        this.buffer = [];
        this.active = 0;
    }
    MergeAllSubscriber.prototype._next = function (observable) {
        if (this.active < this.concurrent) {
            this.active++;
            this.add(subscribeToResult_1.subscribeToResult(this, observable));
        }
        else {
            this.buffer.push(observable);
        }
    };
    MergeAllSubscriber.prototype._complete = function () {
        this.hasCompleted = true;
        if (this.active === 0 && this.buffer.length === 0) {
            this.destination.complete();
        }
    };
    MergeAllSubscriber.prototype.notifyComplete = function (innerSub) {
        var buffer = this.buffer;
        this.remove(innerSub);
        this.active--;
        if (buffer.length > 0) {
            this._next(buffer.shift());
        }
        else if (this.active === 0 && this.hasCompleted) {
            this.destination.complete();
        }
    };
    return MergeAllSubscriber;
}(OuterSubscriber_1.OuterSubscriber));
exports.MergeAllSubscriber = MergeAllSubscriber;
//# sourceMappingURL=mergeAll.js.map

/***/ }),

/***/ "../../../../rxjs/operator/multicast.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ConnectableObservable_1 = __webpack_require__("../../../../rxjs/observable/ConnectableObservable.js");
/* tslint:enable:max-line-length */
/**
 * Returns an Observable that emits the results of invoking a specified selector on items
 * emitted by a ConnectableObservable that shares a single subscription to the underlying stream.
 *
 * <img src="./img/multicast.png" width="100%">
 *
 * @param {Function|Subject} subjectOrSubjectFactory - Factory function to create an intermediate subject through
 * which the source sequence's elements will be multicast to the selector function
 * or Subject to push source elements into.
 * @param {Function} [selector] - Optional selector function that can use the multicasted source stream
 * as many times as needed, without causing multiple subscriptions to the source stream.
 * Subscribers to the given source will receive all notifications of the source from the
 * time of the subscription forward.
 * @return {Observable} An Observable that emits the results of invoking the selector
 * on the items emitted by a `ConnectableObservable` that shares a single subscription to
 * the underlying stream.
 * @method multicast
 * @owner Observable
 */
function multicast(subjectOrSubjectFactory, selector) {
    var subjectFactory;
    if (typeof subjectOrSubjectFactory === 'function') {
        subjectFactory = subjectOrSubjectFactory;
    }
    else {
        subjectFactory = function subjectFactory() {
            return subjectOrSubjectFactory;
        };
    }
    if (typeof selector === 'function') {
        return this.lift(new MulticastOperator(subjectFactory, selector));
    }
    var connectable = Object.create(this, ConnectableObservable_1.connectableObservableDescriptor);
    connectable.source = this;
    connectable.subjectFactory = subjectFactory;
    return connectable;
}
exports.multicast = multicast;
var MulticastOperator = (function () {
    function MulticastOperator(subjectFactory, selector) {
        this.subjectFactory = subjectFactory;
        this.selector = selector;
    }
    MulticastOperator.prototype.call = function (subscriber, source) {
        var selector = this.selector;
        var subject = this.subjectFactory();
        var subscription = selector(subject).subscribe(subscriber);
        subscription.add(source.subscribe(subject));
        return subscription;
    };
    return MulticastOperator;
}());
exports.MulticastOperator = MulticastOperator;
//# sourceMappingURL=multicast.js.map

/***/ }),

/***/ "../../../../rxjs/operator/share.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var multicast_1 = __webpack_require__("../../../../rxjs/operator/multicast.js");
var Subject_1 = __webpack_require__("../../../../rxjs/Subject.js");
function shareSubjectFactory() {
    return new Subject_1.Subject();
}
/**
 * Returns a new Observable that multicasts (shares) the original Observable. As long as there is at least one
 * Subscriber this Observable will be subscribed and emitting data. When all subscribers have unsubscribed it will
 * unsubscribe from the source Observable. Because the Observable is multicasting it makes the stream `hot`.
 * This is an alias for .publish().refCount().
 *
 * <img src="./img/share.png" width="100%">
 *
 * @return {Observable<T>} An Observable that upon connection causes the source Observable to emit items to its Observers.
 * @method share
 * @owner Observable
 */
function share() {
    return multicast_1.multicast.call(this, shareSubjectFactory).refCount();
}
exports.share = share;
;
//# sourceMappingURL=share.js.map

/***/ }),

/***/ "../../../../rxjs/symbol/iterator.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var root_1 = __webpack_require__("../../../../rxjs/util/root.js");
function symbolIteratorPonyfill(root) {
    var Symbol = root.Symbol;
    if (typeof Symbol === 'function') {
        if (!Symbol.iterator) {
            Symbol.iterator = Symbol('iterator polyfill');
        }
        return Symbol.iterator;
    }
    else {
        // [for Mozilla Gecko 27-35:](https://mzl.la/2ewE1zC)
        var Set_1 = root.Set;
        if (Set_1 && typeof new Set_1()['@@iterator'] === 'function') {
            return '@@iterator';
        }
        var Map_1 = root.Map;
        // required for compatability with es6-shim
        if (Map_1) {
            var keys = Object.getOwnPropertyNames(Map_1.prototype);
            for (var i = 0; i < keys.length; ++i) {
                var key = keys[i];
                // according to spec, Map.prototype[@@iterator] and Map.orototype.entries must be equal.
                if (key !== 'entries' && key !== 'size' && Map_1.prototype[key] === Map_1.prototype['entries']) {
                    return key;
                }
            }
        }
        return '@@iterator';
    }
}
exports.symbolIteratorPonyfill = symbolIteratorPonyfill;
exports.iterator = symbolIteratorPonyfill(root_1.root);
/**
 * @deprecated use iterator instead
 */
exports.$$iterator = exports.iterator;
//# sourceMappingURL=iterator.js.map

/***/ }),

/***/ "../../../../rxjs/symbol/observable.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var root_1 = __webpack_require__("../../../../rxjs/util/root.js");
function getSymbolObservable(context) {
    var $$observable;
    var Symbol = context.Symbol;
    if (typeof Symbol === 'function') {
        if (Symbol.observable) {
            $$observable = Symbol.observable;
        }
        else {
            $$observable = Symbol('observable');
            Symbol.observable = $$observable;
        }
    }
    else {
        $$observable = '@@observable';
    }
    return $$observable;
}
exports.getSymbolObservable = getSymbolObservable;
exports.observable = getSymbolObservable(root_1.root);
/**
 * @deprecated use observable instead
 */
exports.$$observable = exports.observable;
//# sourceMappingURL=observable.js.map

/***/ }),

/***/ "../../../../rxjs/symbol/rxSubscriber.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var root_1 = __webpack_require__("../../../../rxjs/util/root.js");
var Symbol = root_1.root.Symbol;
exports.rxSubscriber = (typeof Symbol === 'function' && typeof Symbol.for === 'function') ?
    Symbol.for('rxSubscriber') : '@@rxSubscriber';
/**
 * @deprecated use rxSubscriber instead
 */
exports.$$rxSubscriber = exports.rxSubscriber;
//# sourceMappingURL=rxSubscriber.js.map

/***/ }),

/***/ "../../../../rxjs/util/ObjectUnsubscribedError.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
/**
 * An error thrown when an action is invalid because the object has been
 * unsubscribed.
 *
 * @see {@link Subject}
 * @see {@link BehaviorSubject}
 *
 * @class ObjectUnsubscribedError
 */
var ObjectUnsubscribedError = (function (_super) {
    __extends(ObjectUnsubscribedError, _super);
    function ObjectUnsubscribedError() {
        var err = _super.call(this, 'object unsubscribed');
        this.name = err.name = 'ObjectUnsubscribedError';
        this.stack = err.stack;
        this.message = err.message;
    }
    return ObjectUnsubscribedError;
}(Error));
exports.ObjectUnsubscribedError = ObjectUnsubscribedError;
//# sourceMappingURL=ObjectUnsubscribedError.js.map

/***/ }),

/***/ "../../../../rxjs/util/UnsubscriptionError.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
/**
 * An error thrown when one or more errors have occurred during the
 * `unsubscribe` of a {@link Subscription}.
 */
var UnsubscriptionError = (function (_super) {
    __extends(UnsubscriptionError, _super);
    function UnsubscriptionError(errors) {
        _super.call(this);
        this.errors = errors;
        var err = Error.call(this, errors ?
            errors.length + " errors occurred during unsubscription:\n  " + errors.map(function (err, i) { return ((i + 1) + ") " + err.toString()); }).join('\n  ') : '');
        this.name = err.name = 'UnsubscriptionError';
        this.stack = err.stack;
        this.message = err.message;
    }
    return UnsubscriptionError;
}(Error));
exports.UnsubscriptionError = UnsubscriptionError;
//# sourceMappingURL=UnsubscriptionError.js.map

/***/ }),

/***/ "../../../../rxjs/util/errorObject.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// typeof any so that it we don't have to cast when comparing a result to the error object
exports.errorObject = { e: {} };
//# sourceMappingURL=errorObject.js.map

/***/ }),

/***/ "../../../../rxjs/util/isArray.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

exports.isArray = Array.isArray || (function (x) { return x && typeof x.length === 'number'; });
//# sourceMappingURL=isArray.js.map

/***/ }),

/***/ "../../../../rxjs/util/isArrayLike.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

exports.isArrayLike = (function (x) { return x && typeof x.length === 'number'; });
//# sourceMappingURL=isArrayLike.js.map

/***/ }),

/***/ "../../../../rxjs/util/isFunction.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function isFunction(x) {
    return typeof x === 'function';
}
exports.isFunction = isFunction;
//# sourceMappingURL=isFunction.js.map

/***/ }),

/***/ "../../../../rxjs/util/isObject.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function isObject(x) {
    return x != null && typeof x === 'object';
}
exports.isObject = isObject;
//# sourceMappingURL=isObject.js.map

/***/ }),

/***/ "../../../../rxjs/util/isPromise.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function isPromise(value) {
    return value && typeof value.subscribe !== 'function' && typeof value.then === 'function';
}
exports.isPromise = isPromise;
//# sourceMappingURL=isPromise.js.map

/***/ }),

/***/ "../../../../rxjs/util/isScheduler.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

function isScheduler(value) {
    return value && typeof value.schedule === 'function';
}
exports.isScheduler = isScheduler;
//# sourceMappingURL=isScheduler.js.map

/***/ }),

/***/ "../../../../rxjs/util/root.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {
// CommonJS / Node have global context exposed as "global" variable.
// We don't want to include the whole node.d.ts this this compilation unit so we'll just fake
// the global "global" var for now.
var __window = typeof window !== 'undefined' && window;
var __self = typeof self !== 'undefined' && typeof WorkerGlobalScope !== 'undefined' &&
    self instanceof WorkerGlobalScope && self;
var __global = typeof global !== 'undefined' && global;
var _root = __window || __global || __self;
exports.root = _root;
// Workaround Closure Compiler restriction: The body of a goog.module cannot use throw.
// This is needed when used with angular/tsickle which inserts a goog.module statement.
// Wrap in IIFE
(function () {
    if (!_root) {
        throw new Error('RxJS could not find any global context (window, self, global)');
    }
})();
//# sourceMappingURL=root.js.map
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__("../../../../webpack/buildin/global.js")))

/***/ }),

/***/ "../../../../rxjs/util/subscribeToResult.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var root_1 = __webpack_require__("../../../../rxjs/util/root.js");
var isArrayLike_1 = __webpack_require__("../../../../rxjs/util/isArrayLike.js");
var isPromise_1 = __webpack_require__("../../../../rxjs/util/isPromise.js");
var isObject_1 = __webpack_require__("../../../../rxjs/util/isObject.js");
var Observable_1 = __webpack_require__("../../../../rxjs/Observable.js");
var iterator_1 = __webpack_require__("../../../../rxjs/symbol/iterator.js");
var InnerSubscriber_1 = __webpack_require__("../../../../rxjs/InnerSubscriber.js");
var observable_1 = __webpack_require__("../../../../rxjs/symbol/observable.js");
function subscribeToResult(outerSubscriber, result, outerValue, outerIndex) {
    var destination = new InnerSubscriber_1.InnerSubscriber(outerSubscriber, outerValue, outerIndex);
    if (destination.closed) {
        return null;
    }
    if (result instanceof Observable_1.Observable) {
        if (result._isScalar) {
            destination.next(result.value);
            destination.complete();
            return null;
        }
        else {
            return result.subscribe(destination);
        }
    }
    else if (isArrayLike_1.isArrayLike(result)) {
        for (var i = 0, len = result.length; i < len && !destination.closed; i++) {
            destination.next(result[i]);
        }
        if (!destination.closed) {
            destination.complete();
        }
    }
    else if (isPromise_1.isPromise(result)) {
        result.then(function (value) {
            if (!destination.closed) {
                destination.next(value);
                destination.complete();
            }
        }, function (err) { return destination.error(err); })
            .then(null, function (err) {
            // Escaping the Promise trap: globally throw unhandled errors
            root_1.root.setTimeout(function () { throw err; });
        });
        return destination;
    }
    else if (result && typeof result[iterator_1.iterator] === 'function') {
        var iterator = result[iterator_1.iterator]();
        do {
            var item = iterator.next();
            if (item.done) {
                destination.complete();
                break;
            }
            destination.next(item.value);
            if (destination.closed) {
                break;
            }
        } while (true);
    }
    else if (result && typeof result[observable_1.observable] === 'function') {
        var obs = result[observable_1.observable]();
        if (typeof obs.subscribe !== 'function') {
            destination.error(new TypeError('Provided object does not correctly implement Symbol.observable'));
        }
        else {
            return obs.subscribe(new InnerSubscriber_1.InnerSubscriber(outerSubscriber, outerValue, outerIndex));
        }
    }
    else {
        var value = isObject_1.isObject(result) ? 'an invalid object' : "'" + result + "'";
        var msg = ("You provided " + value + " where a stream was expected.")
            + ' You can provide an Observable, Promise, Array, or Iterable.';
        destination.error(new TypeError(msg));
    }
    return null;
}
exports.subscribeToResult = subscribeToResult;
//# sourceMappingURL=subscribeToResult.js.map

/***/ }),

/***/ "../../../../rxjs/util/toSubscriber.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var Subscriber_1 = __webpack_require__("../../../../rxjs/Subscriber.js");
var rxSubscriber_1 = __webpack_require__("../../../../rxjs/symbol/rxSubscriber.js");
var Observer_1 = __webpack_require__("../../../../rxjs/Observer.js");
function toSubscriber(nextOrObserver, error, complete) {
    if (nextOrObserver) {
        if (nextOrObserver instanceof Subscriber_1.Subscriber) {
            return nextOrObserver;
        }
        if (nextOrObserver[rxSubscriber_1.rxSubscriber]) {
            return nextOrObserver[rxSubscriber_1.rxSubscriber]();
        }
    }
    if (!nextOrObserver && !error && !complete) {
        return new Subscriber_1.Subscriber(Observer_1.empty);
    }
    return new Subscriber_1.Subscriber(nextOrObserver, error, complete);
}
exports.toSubscriber = toSubscriber;
//# sourceMappingURL=toSubscriber.js.map

/***/ }),

/***/ "../../../../rxjs/util/tryCatch.js":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var errorObject_1 = __webpack_require__("../../../../rxjs/util/errorObject.js");
var tryCatchTarget;
function tryCatcher() {
    try {
        return tryCatchTarget.apply(this, arguments);
    }
    catch (e) {
        errorObject_1.errorObject.e = e;
        return errorObject_1.errorObject;
    }
}
function tryCatch(fn) {
    tryCatchTarget = fn;
    return tryCatcher;
}
exports.tryCatch = tryCatch;
;
//# sourceMappingURL=tryCatch.js.map

/***/ }),

/***/ "../../../../tslib/tslib.es6.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = __extends;
/* unused harmony export __assign */
/* unused harmony export __rest */
/* unused harmony export __decorate */
/* unused harmony export __param */
/* unused harmony export __metadata */
/* unused harmony export __awaiter */
/* unused harmony export __generator */
/* unused harmony export __exportStar */
/* unused harmony export __values */
/* unused harmony export __read */
/* unused harmony export __spread */
/* unused harmony export __await */
/* unused harmony export __asyncGenerator */
/* unused harmony export __asyncDelegator */
/* unused harmony export __asyncValues */
/* unused harmony export __makeTemplateObject */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/* global Reflect, Promise */

var extendStatics = Object.setPrototypeOf ||
    ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
    function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };

function __extends(d, b) {
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = Object.assign || function __assign(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
    }
    return t;
}

function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)
            t[p[i]] = s[p[i]];
    return t;
}

function __decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}

function __param(paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
}

function __metadata(metadataKey, metadataValue) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
}

function __awaiter(thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = y[op[0] & 2 ? "return" : op[0] ? "throw" : "next"]) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [0, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

function __exportStar(m, exports) {
    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
}

function __values(o) {
    var m = typeof Symbol === "function" && o[Symbol.iterator], i = 0;
    if (m) return m.call(o);
    return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
}

function __read(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
}

function __spread() {
    for (var ar = [], i = 0; i < arguments.length; i++)
        ar = ar.concat(__read(arguments[i]));
    return ar;
}

function __await(v) {
    return this instanceof __await ? (this.v = v, this) : new __await(v);
}

function __asyncGenerator(thisArg, _arguments, generator) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var g = generator.apply(thisArg, _arguments || []), i, q = [];
    return i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i;
    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }
    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r);  }
    function fulfill(value) { resume("next", value); }
    function reject(value) { resume("throw", value); }
    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
}

function __asyncDelegator(o) {
    var i, p;
    return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
    function verb(n, f) { if (o[n]) i[n] = function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === "return" } : f ? f(v) : v; }; }
}

function __asyncValues(o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator];
    return m ? m.call(o) : typeof __values === "function" ? __values(o) : o[Symbol.iterator]();
}

function __makeTemplateObject(cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};


/***/ }),

/***/ "../../../../webpack/buildin/global.js":
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || Function("return this")() || (1,eval)("this");
} catch(e) {
	// This works if the window reference is available
	if(typeof window === "object")
		g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "../../../common/@angular/common.es5.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export NgLocaleLocalization */
/* unused harmony export NgLocalization */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return parseCookieValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CommonModule; });
/* unused harmony export DeprecatedI18NPipesModule */
/* unused harmony export NgClass */
/* unused harmony export NgFor */
/* unused harmony export NgForOf */
/* unused harmony export NgForOfContext */
/* unused harmony export NgIf */
/* unused harmony export NgIfContext */
/* unused harmony export NgPlural */
/* unused harmony export NgPluralCase */
/* unused harmony export NgStyle */
/* unused harmony export NgSwitch */
/* unused harmony export NgSwitchCase */
/* unused harmony export NgSwitchDefault */
/* unused harmony export NgTemplateOutlet */
/* unused harmony export NgComponentOutlet */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return DOCUMENT; });
/* unused harmony export AsyncPipe */
/* unused harmony export DatePipe */
/* unused harmony export I18nPluralPipe */
/* unused harmony export I18nSelectPipe */
/* unused harmony export JsonPipe */
/* unused harmony export LowerCasePipe */
/* unused harmony export CurrencyPipe */
/* unused harmony export DecimalPipe */
/* unused harmony export PercentPipe */
/* unused harmony export SlicePipe */
/* unused harmony export UpperCasePipe */
/* unused harmony export TitleCasePipe */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return PLATFORM_BROWSER_ID; });
/* unused harmony export PLATFORM_SERVER_ID */
/* unused harmony export PLATFORM_WORKER_APP_ID */
/* unused harmony export PLATFORM_WORKER_UI_ID */
/* unused harmony export isPlatformBrowser */
/* unused harmony export isPlatformServer */
/* unused harmony export isPlatformWorkerApp */
/* unused harmony export isPlatformWorkerUi */
/* unused harmony export VERSION */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return PlatformLocation; });
/* unused harmony export LOCATION_INITIALIZED */
/* unused harmony export LocationStrategy */
/* unused harmony export APP_BASE_HREF */
/* unused harmony export HashLocationStrategy */
/* unused harmony export PathLocationStrategy */
/* unused harmony export Location */
/* unused harmony export a */
/* unused harmony export b */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__("../../../../tslib/tslib.es6.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__("../../../core/@angular/core.es5.js");

/**
 * @license Angular v4.4.5
 * (c) 2010-2017 Google, Inc. https://angular.io/
 * License: MIT
 */

/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * This class should not be used directly by an application developer. Instead, use
 * {\@link Location}.
 *
 * `PlatformLocation` encapsulates all calls to DOM apis, which allows the Router to be platform
 * agnostic.
 * This means that we can have different implementation of `PlatformLocation` for the different
 * platforms that angular supports. For example, `\@angular/platform-browser` provides an
 * implementation specific to the browser environment, while `\@angular/platform-webworker` provides
 * one suitable for use with web workers.
 *
 * The `PlatformLocation` class is used directly by all implementations of {\@link LocationStrategy}
 * when they need to interact with the DOM apis like pushState, popState, etc...
 *
 * {\@link LocationStrategy} in turn is used by the {\@link Location} service which is used directly
 * by the {\@link Router} in order to navigate between routes. Since all interactions between {\@link
 * Router} /
 * {\@link Location} / {\@link LocationStrategy} and DOM apis flow through the `PlatformLocation`
 * class they are all platform independent.
 *
 * \@stable
 * @abstract
 */
var PlatformLocation = (function () {
    function PlatformLocation() {
    }
    /**
     * @abstract
     * @return {?}
     */
    PlatformLocation.prototype.getBaseHrefFromDOM = function () { };
    /**
     * @abstract
     * @param {?} fn
     * @return {?}
     */
    PlatformLocation.prototype.onPopState = function (fn) { };
    /**
     * @abstract
     * @param {?} fn
     * @return {?}
     */
    PlatformLocation.prototype.onHashChange = function (fn) { };
    /**
     * @abstract
     * @return {?}
     */
    PlatformLocation.prototype.pathname = function () { };
    /**
     * @abstract
     * @return {?}
     */
    PlatformLocation.prototype.search = function () { };
    /**
     * @abstract
     * @return {?}
     */
    PlatformLocation.prototype.hash = function () { };
    /**
     * @abstract
     * @param {?} state
     * @param {?} title
     * @param {?} url
     * @return {?}
     */
    PlatformLocation.prototype.replaceState = function (state, title, url) { };
    /**
     * @abstract
     * @param {?} state
     * @param {?} title
     * @param {?} url
     * @return {?}
     */
    PlatformLocation.prototype.pushState = function (state, title, url) { };
    /**
     * @abstract
     * @return {?}
     */
    PlatformLocation.prototype.forward = function () { };
    /**
     * @abstract
     * @return {?}
     */
    PlatformLocation.prototype.back = function () { };
    return PlatformLocation;
}());
/**
 * \@whatItDoes indicates when a location is initialized
 * \@experimental
 */
var LOCATION_INITIALIZED = new __WEBPACK_IMPORTED_MODULE_1__angular_core__["C" /* InjectionToken */]('Location Initialized');
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * `LocationStrategy` is responsible for representing and reading route state
 * from the browser's URL. Angular provides two strategies:
 * {\@link HashLocationStrategy} and {\@link PathLocationStrategy}.
 *
 * This is used under the hood of the {\@link Location} service.
 *
 * Applications should use the {\@link Router} or {\@link Location} services to
 * interact with application route state.
 *
 * For instance, {\@link HashLocationStrategy} produces URLs like
 * `http://example.com#/foo`, and {\@link PathLocationStrategy} produces
 * `http://example.com/foo` as an equivalent URL.
 *
 * See these two classes for more.
 *
 * \@stable
 * @abstract
 */
var LocationStrategy = (function () {
    function LocationStrategy() {
    }
    /**
     * @abstract
     * @param {?=} includeHash
     * @return {?}
     */
    LocationStrategy.prototype.path = function (includeHash) { };
    /**
     * @abstract
     * @param {?} internal
     * @return {?}
     */
    LocationStrategy.prototype.prepareExternalUrl = function (internal) { };
    /**
     * @abstract
     * @param {?} state
     * @param {?} title
     * @param {?} url
     * @param {?} queryParams
     * @return {?}
     */
    LocationStrategy.prototype.pushState = function (state, title, url, queryParams) { };
    /**
     * @abstract
     * @param {?} state
     * @param {?} title
     * @param {?} url
     * @param {?} queryParams
     * @return {?}
     */
    LocationStrategy.prototype.replaceState = function (state, title, url, queryParams) { };
    /**
     * @abstract
     * @return {?}
     */
    LocationStrategy.prototype.forward = function () { };
    /**
     * @abstract
     * @return {?}
     */
    LocationStrategy.prototype.back = function () { };
    /**
     * @abstract
     * @param {?} fn
     * @return {?}
     */
    LocationStrategy.prototype.onPopState = function (fn) { };
    /**
     * @abstract
     * @return {?}
     */
    LocationStrategy.prototype.getBaseHref = function () { };
    return LocationStrategy;
}());
/**
 * The `APP_BASE_HREF` token represents the base href to be used with the
 * {\@link PathLocationStrategy}.
 *
 * If you're using {\@link PathLocationStrategy}, you must provide a provider to a string
 * representing the URL prefix that should be preserved when generating and recognizing
 * URLs.
 *
 * ### Example
 *
 * ```typescript
 * import {Component, NgModule} from '\@angular/core';
 * import {APP_BASE_HREF} from '\@angular/common';
 *
 * \@NgModule({
 *   providers: [{provide: APP_BASE_HREF, useValue: '/my/app'}]
 * })
 * class AppModule {}
 * ```
 *
 * \@stable
 */
var APP_BASE_HREF = new __WEBPACK_IMPORTED_MODULE_1__angular_core__["C" /* InjectionToken */]('appBaseHref');
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@whatItDoes `Location` is a service that applications can use to interact with a browser's URL.
 * \@description
 * Depending on which {\@link LocationStrategy} is used, `Location` will either persist
 * to the URL's path or the URL's hash segment.
 *
 * Note: it's better to use {\@link Router#navigate} service to trigger route changes. Use
 * `Location` only if you need to interact with or create normalized URLs outside of
 * routing.
 *
 * `Location` is responsible for normalizing the URL against the application's base href.
 * A normalized URL is absolute from the URL host, includes the application's base href, and has no
 * trailing slash:
 * - `/my/app/user/123` is normalized
 * - `my/app/user/123` **is not** normalized
 * - `/my/app/user/123/` **is not** normalized
 *
 * ### Example
 * {\@example common/location/ts/path_location_component.ts region='LocationComponent'}
 * \@stable
 */
var Location = (function () {
    /**
     * @param {?} platformStrategy
     */
    function Location(platformStrategy) {
        var _this = this;
        /**
         * \@internal
         */
        this._subject = new __WEBPACK_IMPORTED_MODULE_1__angular_core__["w" /* EventEmitter */]();
        this._platformStrategy = platformStrategy;
        var browserBaseHref = this._platformStrategy.getBaseHref();
        this._baseHref = Location.stripTrailingSlash(_stripIndexHtml(browserBaseHref));
        this._platformStrategy.onPopState(function (ev) {
            _this._subject.emit({
                'url': _this.path(true),
                'pop': true,
                'type': ev.type,
            });
        });
    }
    /**
     * @param {?=} includeHash
     * @return {?}
     */
    Location.prototype.path = function (includeHash) {
        if (includeHash === void 0) { includeHash = false; }
        return this.normalize(this._platformStrategy.path(includeHash));
    };
    /**
     * Normalizes the given path and compares to the current normalized path.
     * @param {?} path
     * @param {?=} query
     * @return {?}
     */
    Location.prototype.isCurrentPathEqualTo = function (path, query) {
        if (query === void 0) { query = ''; }
        return this.path() == this.normalize(path + Location.normalizeQueryParams(query));
    };
    /**
     * Given a string representing a URL, returns the normalized URL path without leading or
     * trailing slashes.
     * @param {?} url
     * @return {?}
     */
    Location.prototype.normalize = function (url) {
        return Location.stripTrailingSlash(_stripBaseHref(this._baseHref, _stripIndexHtml(url)));
    };
    /**
     * Given a string representing a URL, returns the platform-specific external URL path.
     * If the given URL doesn't begin with a leading slash (`'/'`), this method adds one
     * before normalizing. This method will also add a hash if `HashLocationStrategy` is
     * used, or the `APP_BASE_HREF` if the `PathLocationStrategy` is in use.
     * @param {?} url
     * @return {?}
     */
    Location.prototype.prepareExternalUrl = function (url) {
        if (url && url[0] !== '/') {
            url = '/' + url;
        }
        return this._platformStrategy.prepareExternalUrl(url);
    };
    /**
     * Changes the browsers URL to the normalized version of the given URL, and pushes a
     * new item onto the platform's history.
     * @param {?} path
     * @param {?=} query
     * @return {?}
     */
    Location.prototype.go = function (path, query) {
        if (query === void 0) { query = ''; }
        this._platformStrategy.pushState(null, '', path, query);
    };
    /**
     * Changes the browsers URL to the normalized version of the given URL, and replaces
     * the top item on the platform's history stack.
     * @param {?} path
     * @param {?=} query
     * @return {?}
     */
    Location.prototype.replaceState = function (path, query) {
        if (query === void 0) { query = ''; }
        this._platformStrategy.replaceState(null, '', path, query);
    };
    /**
     * Navigates forward in the platform's history.
     * @return {?}
     */
    Location.prototype.forward = function () { this._platformStrategy.forward(); };
    /**
     * Navigates back in the platform's history.
     * @return {?}
     */
    Location.prototype.back = function () { this._platformStrategy.back(); };
    /**
     * Subscribe to the platform's `popState` events.
     * @param {?} onNext
     * @param {?=} onThrow
     * @param {?=} onReturn
     * @return {?}
     */
    Location.prototype.subscribe = function (onNext, onThrow, onReturn) {
        return this._subject.subscribe({ next: onNext, error: onThrow, complete: onReturn });
    };
    /**
     * Given a string of url parameters, prepend with '?' if needed, otherwise return parameters as
     * is.
     * @param {?} params
     * @return {?}
     */
    Location.normalizeQueryParams = function (params) {
        return params && params[0] !== '?' ? '?' + params : params;
    };
    /**
     * Given 2 parts of a url, join them with a slash if needed.
     * @param {?} start
     * @param {?} end
     * @return {?}
     */
    Location.joinWithSlash = function (start, end) {
        if (start.length == 0) {
            return end;
        }
        if (end.length == 0) {
            return start;
        }
        var /** @type {?} */ slashes = 0;
        if (start.endsWith('/')) {
            slashes++;
        }
        if (end.startsWith('/')) {
            slashes++;
        }
        if (slashes == 2) {
            return start + end.substring(1);
        }
        if (slashes == 1) {
            return start + end;
        }
        return start + '/' + end;
    };
    /**
     * If url has a trailing slash, remove it, otherwise return url as is. This
     * method looks for the first occurence of either #, ?, or the end of the
     * line as `/` characters after any of these should not be replaced.
     * @param {?} url
     * @return {?}
     */
    Location.stripTrailingSlash = function (url) {
        var /** @type {?} */ match = url.match(/#|\?|$/);
        var /** @type {?} */ pathEndIdx = match && match.index || url.length;
        var /** @type {?} */ droppedSlashIdx = pathEndIdx - (url[pathEndIdx - 1] === '/' ? 1 : 0);
        return url.slice(0, droppedSlashIdx) + url.slice(pathEndIdx);
    };
    return Location;
}());
Location.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
Location.ctorParameters = function () { return [
    { type: LocationStrategy, },
]; };
/**
 * @param {?} baseHref
 * @param {?} url
 * @return {?}
 */
function _stripBaseHref(baseHref, url) {
    return baseHref && url.startsWith(baseHref) ? url.substring(baseHref.length) : url;
}
/**
 * @param {?} url
 * @return {?}
 */
function _stripIndexHtml(url) {
    return url.replace(/\/index.html$/, '');
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@whatItDoes Use URL hash for storing application location data.
 * \@description
 * `HashLocationStrategy` is a {\@link LocationStrategy} used to configure the
 * {\@link Location} service to represent its state in the
 * [hash fragment](https://en.wikipedia.org/wiki/Uniform_Resource_Locator#Syntax)
 * of the browser's URL.
 *
 * For instance, if you call `location.go('/foo')`, the browser's URL will become
 * `example.com#/foo`.
 *
 * ### Example
 *
 * {\@example common/location/ts/hash_location_component.ts region='LocationComponent'}
 *
 * \@stable
 */
var HashLocationStrategy = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](HashLocationStrategy, _super);
    /**
     * @param {?} _platformLocation
     * @param {?=} _baseHref
     */
    function HashLocationStrategy(_platformLocation, _baseHref) {
        var _this = _super.call(this) || this;
        _this._platformLocation = _platformLocation;
        _this._baseHref = '';
        if (_baseHref != null) {
            _this._baseHref = _baseHref;
        }
        return _this;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    HashLocationStrategy.prototype.onPopState = function (fn) {
        this._platformLocation.onPopState(fn);
        this._platformLocation.onHashChange(fn);
    };
    /**
     * @return {?}
     */
    HashLocationStrategy.prototype.getBaseHref = function () { return this._baseHref; };
    /**
     * @param {?=} includeHash
     * @return {?}
     */
    HashLocationStrategy.prototype.path = function (includeHash) {
        if (includeHash === void 0) { includeHash = false; }
        // the hash value is always prefixed with a `#`
        // and if it is empty then it will stay empty
        var /** @type {?} */ path = this._platformLocation.hash;
        if (path == null)
            path = '#';
        return path.length > 0 ? path.substring(1) : path;
    };
    /**
     * @param {?} internal
     * @return {?}
     */
    HashLocationStrategy.prototype.prepareExternalUrl = function (internal) {
        var /** @type {?} */ url = Location.joinWithSlash(this._baseHref, internal);
        return url.length > 0 ? ('#' + url) : url;
    };
    /**
     * @param {?} state
     * @param {?} title
     * @param {?} path
     * @param {?} queryParams
     * @return {?}
     */
    HashLocationStrategy.prototype.pushState = function (state, title, path, queryParams) {
        var /** @type {?} */ url = this.prepareExternalUrl(path + Location.normalizeQueryParams(queryParams));
        if (url.length == 0) {
            url = this._platformLocation.pathname;
        }
        this._platformLocation.pushState(state, title, url);
    };
    /**
     * @param {?} state
     * @param {?} title
     * @param {?} path
     * @param {?} queryParams
     * @return {?}
     */
    HashLocationStrategy.prototype.replaceState = function (state, title, path, queryParams) {
        var /** @type {?} */ url = this.prepareExternalUrl(path + Location.normalizeQueryParams(queryParams));
        if (url.length == 0) {
            url = this._platformLocation.pathname;
        }
        this._platformLocation.replaceState(state, title, url);
    };
    /**
     * @return {?}
     */
    HashLocationStrategy.prototype.forward = function () { this._platformLocation.forward(); };
    /**
     * @return {?}
     */
    HashLocationStrategy.prototype.back = function () { this._platformLocation.back(); };
    return HashLocationStrategy;
}(LocationStrategy));
HashLocationStrategy.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
HashLocationStrategy.ctorParameters = function () { return [
    { type: PlatformLocation, },
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["Q" /* Optional */] }, { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */], args: [APP_BASE_HREF,] },] },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@whatItDoes Use URL for storing application location data.
 * \@description
 * `PathLocationStrategy` is a {\@link LocationStrategy} used to configure the
 * {\@link Location} service to represent its state in the
 * [path](https://en.wikipedia.org/wiki/Uniform_Resource_Locator#Syntax) of the
 * browser's URL.
 *
 * If you're using `PathLocationStrategy`, you must provide a {\@link APP_BASE_HREF}
 * or add a base element to the document. This URL prefix that will be preserved
 * when generating and recognizing URLs.
 *
 * For instance, if you provide an `APP_BASE_HREF` of `'/my/app'` and call
 * `location.go('/foo')`, the browser's URL will become
 * `example.com/my/app/foo`.
 *
 * Similarly, if you add `<base href='/my/app'/>` to the document and call
 * `location.go('/foo')`, the browser's URL will become
 * `example.com/my/app/foo`.
 *
 * ### Example
 *
 * {\@example common/location/ts/path_location_component.ts region='LocationComponent'}
 *
 * \@stable
 */
var PathLocationStrategy = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](PathLocationStrategy, _super);
    /**
     * @param {?} _platformLocation
     * @param {?=} href
     */
    function PathLocationStrategy(_platformLocation, href) {
        var _this = _super.call(this) || this;
        _this._platformLocation = _platformLocation;
        if (href == null) {
            href = _this._platformLocation.getBaseHrefFromDOM();
        }
        if (href == null) {
            throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");
        }
        _this._baseHref = href;
        return _this;
    }
    /**
     * @param {?} fn
     * @return {?}
     */
    PathLocationStrategy.prototype.onPopState = function (fn) {
        this._platformLocation.onPopState(fn);
        this._platformLocation.onHashChange(fn);
    };
    /**
     * @return {?}
     */
    PathLocationStrategy.prototype.getBaseHref = function () { return this._baseHref; };
    /**
     * @param {?} internal
     * @return {?}
     */
    PathLocationStrategy.prototype.prepareExternalUrl = function (internal) {
        return Location.joinWithSlash(this._baseHref, internal);
    };
    /**
     * @param {?=} includeHash
     * @return {?}
     */
    PathLocationStrategy.prototype.path = function (includeHash) {
        if (includeHash === void 0) { includeHash = false; }
        var /** @type {?} */ pathname = this._platformLocation.pathname +
            Location.normalizeQueryParams(this._platformLocation.search);
        var /** @type {?} */ hash = this._platformLocation.hash;
        return hash && includeHash ? "" + pathname + hash : pathname;
    };
    /**
     * @param {?} state
     * @param {?} title
     * @param {?} url
     * @param {?} queryParams
     * @return {?}
     */
    PathLocationStrategy.prototype.pushState = function (state, title, url, queryParams) {
        var /** @type {?} */ externalUrl = this.prepareExternalUrl(url + Location.normalizeQueryParams(queryParams));
        this._platformLocation.pushState(state, title, externalUrl);
    };
    /**
     * @param {?} state
     * @param {?} title
     * @param {?} url
     * @param {?} queryParams
     * @return {?}
     */
    PathLocationStrategy.prototype.replaceState = function (state, title, url, queryParams) {
        var /** @type {?} */ externalUrl = this.prepareExternalUrl(url + Location.normalizeQueryParams(queryParams));
        this._platformLocation.replaceState(state, title, externalUrl);
    };
    /**
     * @return {?}
     */
    PathLocationStrategy.prototype.forward = function () { this._platformLocation.forward(); };
    /**
     * @return {?}
     */
    PathLocationStrategy.prototype.back = function () { this._platformLocation.back(); };
    return PathLocationStrategy;
}(LocationStrategy));
PathLocationStrategy.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
PathLocationStrategy.ctorParameters = function () { return [
    { type: PlatformLocation, },
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["Q" /* Optional */] }, { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */], args: [APP_BASE_HREF,] },] },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@experimental
 * @abstract
 */
var NgLocalization = (function () {
    function NgLocalization() {
    }
    /**
     * @abstract
     * @param {?} value
     * @return {?}
     */
    NgLocalization.prototype.getPluralCategory = function (value) { };
    return NgLocalization;
}());
/**
 * Returns the plural category for a given value.
 * - "=value" when the case exists,
 * - the plural category otherwise
 *
 * \@internal
 * @param {?} value
 * @param {?} cases
 * @param {?} ngLocalization
 * @return {?}
 */
function getPluralCategory(value, cases, ngLocalization) {
    var /** @type {?} */ key = "=" + value;
    if (cases.indexOf(key) > -1) {
        return key;
    }
    key = ngLocalization.getPluralCategory(value);
    if (cases.indexOf(key) > -1) {
        return key;
    }
    if (cases.indexOf('other') > -1) {
        return 'other';
    }
    throw new Error("No plural message found for value \"" + value + "\"");
}
/**
 * Returns the plural case based on the locale
 *
 * \@experimental
 */
var NgLocaleLocalization = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](NgLocaleLocalization, _super);
    /**
     * @param {?} locale
     */
    function NgLocaleLocalization(locale) {
        var _this = _super.call(this) || this;
        _this.locale = locale;
        return _this;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    NgLocaleLocalization.prototype.getPluralCategory = function (value) {
        var /** @type {?} */ plural = getPluralCase(this.locale, value);
        switch (plural) {
            case Plural.Zero:
                return 'zero';
            case Plural.One:
                return 'one';
            case Plural.Two:
                return 'two';
            case Plural.Few:
                return 'few';
            case Plural.Many:
                return 'many';
            default:
                return 'other';
        }
    };
    return NgLocaleLocalization;
}(NgLocalization));
NgLocaleLocalization.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
NgLocaleLocalization.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */], args: [__WEBPACK_IMPORTED_MODULE_1__angular_core__["H" /* LOCALE_ID */],] },] },
]; };
var Plural = {};
Plural.Zero = 0;
Plural.One = 1;
Plural.Two = 2;
Plural.Few = 3;
Plural.Many = 4;
Plural.Other = 5;
Plural[Plural.Zero] = "Zero";
Plural[Plural.One] = "One";
Plural[Plural.Two] = "Two";
Plural[Plural.Few] = "Few";
Plural[Plural.Many] = "Many";
Plural[Plural.Other] = "Other";
/**
 * Returns the plural case based on the locale
 *
 * \@experimental
 * @param {?} locale
 * @param {?} nLike
 * @return {?}
 */
function getPluralCase(locale, nLike) {
    // TODO(vicb): lazy compute
    if (typeof nLike === 'string') {
        nLike = parseInt(/** @type {?} */ (nLike), 10);
    }
    var /** @type {?} */ n = (nLike);
    var /** @type {?} */ nDecimal = n.toString().replace(/^[^.]*\.?/, '');
    var /** @type {?} */ i = Math.floor(Math.abs(n));
    var /** @type {?} */ v = nDecimal.length;
    var /** @type {?} */ f = parseInt(nDecimal, 10);
    var /** @type {?} */ t = parseInt(n.toString().replace(/^[^.]*\.?|0+$/g, ''), 10) || 0;
    var /** @type {?} */ lang = locale.split('-')[0].toLowerCase();
    switch (lang) {
        case 'af':
        case 'asa':
        case 'az':
        case 'bem':
        case 'bez':
        case 'bg':
        case 'brx':
        case 'ce':
        case 'cgg':
        case 'chr':
        case 'ckb':
        case 'ee':
        case 'el':
        case 'eo':
        case 'es':
        case 'eu':
        case 'fo':
        case 'fur':
        case 'gsw':
        case 'ha':
        case 'haw':
        case 'hu':
        case 'jgo':
        case 'jmc':
        case 'ka':
        case 'kk':
        case 'kkj':
        case 'kl':
        case 'ks':
        case 'ksb':
        case 'ky':
        case 'lb':
        case 'lg':
        case 'mas':
        case 'mgo':
        case 'ml':
        case 'mn':
        case 'nb':
        case 'nd':
        case 'ne':
        case 'nn':
        case 'nnh':
        case 'nyn':
        case 'om':
        case 'or':
        case 'os':
        case 'ps':
        case 'rm':
        case 'rof':
        case 'rwk':
        case 'saq':
        case 'seh':
        case 'sn':
        case 'so':
        case 'sq':
        case 'ta':
        case 'te':
        case 'teo':
        case 'tk':
        case 'tr':
        case 'ug':
        case 'uz':
        case 'vo':
        case 'vun':
        case 'wae':
        case 'xog':
            if (n === 1)
                return Plural.One;
            return Plural.Other;
        case 'ak':
        case 'ln':
        case 'mg':
        case 'pa':
        case 'ti':
            if (n === Math.floor(n) && n >= 0 && n <= 1)
                return Plural.One;
            return Plural.Other;
        case 'am':
        case 'as':
        case 'bn':
        case 'fa':
        case 'gu':
        case 'hi':
        case 'kn':
        case 'mr':
        case 'zu':
            if (i === 0 || n === 1)
                return Plural.One;
            return Plural.Other;
        case 'ar':
            if (n === 0)
                return Plural.Zero;
            if (n === 1)
                return Plural.One;
            if (n === 2)
                return Plural.Two;
            if (n % 100 === Math.floor(n % 100) && n % 100 >= 3 && n % 100 <= 10)
                return Plural.Few;
            if (n % 100 === Math.floor(n % 100) && n % 100 >= 11 && n % 100 <= 99)
                return Plural.Many;
            return Plural.Other;
        case 'ast':
        case 'ca':
        case 'de':
        case 'en':
        case 'et':
        case 'fi':
        case 'fy':
        case 'gl':
        case 'it':
        case 'nl':
        case 'sv':
        case 'sw':
        case 'ur':
        case 'yi':
            if (i === 1 && v === 0)
                return Plural.One;
            return Plural.Other;
        case 'be':
            if (n % 10 === 1 && !(n % 100 === 11))
                return Plural.One;
            if (n % 10 === Math.floor(n % 10) && n % 10 >= 2 && n % 10 <= 4 &&
                !(n % 100 >= 12 && n % 100 <= 14))
                return Plural.Few;
            if (n % 10 === 0 || n % 10 === Math.floor(n % 10) && n % 10 >= 5 && n % 10 <= 9 ||
                n % 100 === Math.floor(n % 100) && n % 100 >= 11 && n % 100 <= 14)
                return Plural.Many;
            return Plural.Other;
        case 'br':
            if (n % 10 === 1 && !(n % 100 === 11 || n % 100 === 71 || n % 100 === 91))
                return Plural.One;
            if (n % 10 === 2 && !(n % 100 === 12 || n % 100 === 72 || n % 100 === 92))
                return Plural.Two;
            if (n % 10 === Math.floor(n % 10) && (n % 10 >= 3 && n % 10 <= 4 || n % 10 === 9) &&
                !(n % 100 >= 10 && n % 100 <= 19 || n % 100 >= 70 && n % 100 <= 79 ||
                    n % 100 >= 90 && n % 100 <= 99))
                return Plural.Few;
            if (!(n === 0) && n % 1e6 === 0)
                return Plural.Many;
            return Plural.Other;
        case 'bs':
        case 'hr':
        case 'sr':
            if (v === 0 && i % 10 === 1 && !(i % 100 === 11) || f % 10 === 1 && !(f % 100 === 11))
                return Plural.One;
            if (v === 0 && i % 10 === Math.floor(i % 10) && i % 10 >= 2 && i % 10 <= 4 &&
                !(i % 100 >= 12 && i % 100 <= 14) ||
                f % 10 === Math.floor(f % 10) && f % 10 >= 2 && f % 10 <= 4 &&
                    !(f % 100 >= 12 && f % 100 <= 14))
                return Plural.Few;
            return Plural.Other;
        case 'cs':
        case 'sk':
            if (i === 1 && v === 0)
                return Plural.One;
            if (i === Math.floor(i) && i >= 2 && i <= 4 && v === 0)
                return Plural.Few;
            if (!(v === 0))
                return Plural.Many;
            return Plural.Other;
        case 'cy':
            if (n === 0)
                return Plural.Zero;
            if (n === 1)
                return Plural.One;
            if (n === 2)
                return Plural.Two;
            if (n === 3)
                return Plural.Few;
            if (n === 6)
                return Plural.Many;
            return Plural.Other;
        case 'da':
            if (n === 1 || !(t === 0) && (i === 0 || i === 1))
                return Plural.One;
            return Plural.Other;
        case 'dsb':
        case 'hsb':
            if (v === 0 && i % 100 === 1 || f % 100 === 1)
                return Plural.One;
            if (v === 0 && i % 100 === 2 || f % 100 === 2)
                return Plural.Two;
            if (v === 0 && i % 100 === Math.floor(i % 100) && i % 100 >= 3 && i % 100 <= 4 ||
                f % 100 === Math.floor(f % 100) && f % 100 >= 3 && f % 100 <= 4)
                return Plural.Few;
            return Plural.Other;
        case 'ff':
        case 'fr':
        case 'hy':
        case 'kab':
            if (i === 0 || i === 1)
                return Plural.One;
            return Plural.Other;
        case 'fil':
            if (v === 0 && (i === 1 || i === 2 || i === 3) ||
                v === 0 && !(i % 10 === 4 || i % 10 === 6 || i % 10 === 9) ||
                !(v === 0) && !(f % 10 === 4 || f % 10 === 6 || f % 10 === 9))
                return Plural.One;
            return Plural.Other;
        case 'ga':
            if (n === 1)
                return Plural.One;
            if (n === 2)
                return Plural.Two;
            if (n === Math.floor(n) && n >= 3 && n <= 6)
                return Plural.Few;
            if (n === Math.floor(n) && n >= 7 && n <= 10)
                return Plural.Many;
            return Plural.Other;
        case 'gd':
            if (n === 1 || n === 11)
                return Plural.One;
            if (n === 2 || n === 12)
                return Plural.Two;
            if (n === Math.floor(n) && (n >= 3 && n <= 10 || n >= 13 && n <= 19))
                return Plural.Few;
            return Plural.Other;
        case 'gv':
            if (v === 0 && i % 10 === 1)
                return Plural.One;
            if (v === 0 && i % 10 === 2)
                return Plural.Two;
            if (v === 0 &&
                (i % 100 === 0 || i % 100 === 20 || i % 100 === 40 || i % 100 === 60 || i % 100 === 80))
                return Plural.Few;
            if (!(v === 0))
                return Plural.Many;
            return Plural.Other;
        case 'he':
            if (i === 1 && v === 0)
                return Plural.One;
            if (i === 2 && v === 0)
                return Plural.Two;
            if (v === 0 && !(n >= 0 && n <= 10) && n % 10 === 0)
                return Plural.Many;
            return Plural.Other;
        case 'is':
            if (t === 0 && i % 10 === 1 && !(i % 100 === 11) || !(t === 0))
                return Plural.One;
            return Plural.Other;
        case 'ksh':
            if (n === 0)
                return Plural.Zero;
            if (n === 1)
                return Plural.One;
            return Plural.Other;
        case 'kw':
        case 'naq':
        case 'se':
        case 'smn':
            if (n === 1)
                return Plural.One;
            if (n === 2)
                return Plural.Two;
            return Plural.Other;
        case 'lag':
            if (n === 0)
                return Plural.Zero;
            if ((i === 0 || i === 1) && !(n === 0))
                return Plural.One;
            return Plural.Other;
        case 'lt':
            if (n % 10 === 1 && !(n % 100 >= 11 && n % 100 <= 19))
                return Plural.One;
            if (n % 10 === Math.floor(n % 10) && n % 10 >= 2 && n % 10 <= 9 &&
                !(n % 100 >= 11 && n % 100 <= 19))
                return Plural.Few;
            if (!(f === 0))
                return Plural.Many;
            return Plural.Other;
        case 'lv':
        case 'prg':
            if (n % 10 === 0 || n % 100 === Math.floor(n % 100) && n % 100 >= 11 && n % 100 <= 19 ||
                v === 2 && f % 100 === Math.floor(f % 100) && f % 100 >= 11 && f % 100 <= 19)
                return Plural.Zero;
            if (n % 10 === 1 && !(n % 100 === 11) || v === 2 && f % 10 === 1 && !(f % 100 === 11) ||
                !(v === 2) && f % 10 === 1)
                return Plural.One;
            return Plural.Other;
        case 'mk':
            if (v === 0 && i % 10 === 1 || f % 10 === 1)
                return Plural.One;
            return Plural.Other;
        case 'mt':
            if (n === 1)
                return Plural.One;
            if (n === 0 || n % 100 === Math.floor(n % 100) && n % 100 >= 2 && n % 100 <= 10)
                return Plural.Few;
            if (n % 100 === Math.floor(n % 100) && n % 100 >= 11 && n % 100 <= 19)
                return Plural.Many;
            return Plural.Other;
        case 'pl':
            if (i === 1 && v === 0)
                return Plural.One;
            if (v === 0 && i % 10 === Math.floor(i % 10) && i % 10 >= 2 && i % 10 <= 4 &&
                !(i % 100 >= 12 && i % 100 <= 14))
                return Plural.Few;
            if (v === 0 && !(i === 1) && i % 10 === Math.floor(i % 10) && i % 10 >= 0 && i % 10 <= 1 ||
                v === 0 && i % 10 === Math.floor(i % 10) && i % 10 >= 5 && i % 10 <= 9 ||
                v === 0 && i % 100 === Math.floor(i % 100) && i % 100 >= 12 && i % 100 <= 14)
                return Plural.Many;
            return Plural.Other;
        case 'pt':
            if (n === Math.floor(n) && n >= 0 && n <= 2 && !(n === 2))
                return Plural.One;
            return Plural.Other;
        case 'ro':
            if (i === 1 && v === 0)
                return Plural.One;
            if (!(v === 0) || n === 0 ||
                !(n === 1) && n % 100 === Math.floor(n % 100) && n % 100 >= 1 && n % 100 <= 19)
                return Plural.Few;
            return Plural.Other;
        case 'ru':
        case 'uk':
            if (v === 0 && i % 10 === 1 && !(i % 100 === 11))
                return Plural.One;
            if (v === 0 && i % 10 === Math.floor(i % 10) && i % 10 >= 2 && i % 10 <= 4 &&
                !(i % 100 >= 12 && i % 100 <= 14))
                return Plural.Few;
            if (v === 0 && i % 10 === 0 ||
                v === 0 && i % 10 === Math.floor(i % 10) && i % 10 >= 5 && i % 10 <= 9 ||
                v === 0 && i % 100 === Math.floor(i % 100) && i % 100 >= 11 && i % 100 <= 14)
                return Plural.Many;
            return Plural.Other;
        case 'shi':
            if (i === 0 || n === 1)
                return Plural.One;
            if (n === Math.floor(n) && n >= 2 && n <= 10)
                return Plural.Few;
            return Plural.Other;
        case 'si':
            if (n === 0 || n === 1 || i === 0 && f === 1)
                return Plural.One;
            return Plural.Other;
        case 'sl':
            if (v === 0 && i % 100 === 1)
                return Plural.One;
            if (v === 0 && i % 100 === 2)
                return Plural.Two;
            if (v === 0 && i % 100 === Math.floor(i % 100) && i % 100 >= 3 && i % 100 <= 4 || !(v === 0))
                return Plural.Few;
            return Plural.Other;
        case 'tzm':
            if (n === Math.floor(n) && n >= 0 && n <= 1 || n === Math.floor(n) && n >= 11 && n <= 99)
                return Plural.One;
            return Plural.Other;
        // When there is no specification, the default is always "other"
        // Spec: http://cldr.unicode.org/index/cldr-spec/plural-rules
        // > other (requiredgeneral plural form  also used if the language only has a single form)
        default:
            return Plural.Other;
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 * @param {?} cookieStr
 * @param {?} name
 * @return {?}
 */
function parseCookieValue(cookieStr, name) {
    name = encodeURIComponent(name);
    for (var _i = 0, _a = cookieStr.split(';'); _i < _a.length; _i++) {
        var cookie = _a[_i];
        var /** @type {?} */ eqIndex = cookie.indexOf('=');
        var _b = eqIndex == -1 ? [cookie, ''] : [cookie.slice(0, eqIndex), cookie.slice(eqIndex + 1)], cookieName = _b[0], cookieValue = _b[1];
        if (cookieName.trim() === name) {
            return decodeURIComponent(cookieValue);
        }
    }
    return null;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@ngModule CommonModule
 *
 * \@whatItDoes Adds and removes CSS classes on an HTML element.
 *
 * \@howToUse
 * ```
 *     <some-element [ngClass]="'first second'">...</some-element>
 *
 *     <some-element [ngClass]="['first', 'second']">...</some-element>
 *
 *     <some-element [ngClass]="{'first': true, 'second': true, 'third': false}">...</some-element>
 *
 *     <some-element [ngClass]="stringExp|arrayExp|objExp">...</some-element>
 *
 *     <some-element [ngClass]="{'class1 class2 class3' : true}">...</some-element>
 * ```
 *
 * \@description
 *
 * The CSS classes are updated as follows, depending on the type of the expression evaluation:
 * - `string` - the CSS classes listed in the string (space delimited) are added,
 * - `Array` - the CSS classes declared as Array elements are added,
 * - `Object` - keys are CSS classes that get added when the expression given in the value
 *              evaluates to a truthy value, otherwise they are removed.
 *
 * \@stable
 */
var NgClass = (function () {
    /**
     * @param {?} _iterableDiffers
     * @param {?} _keyValueDiffers
     * @param {?} _ngEl
     * @param {?} _renderer
     */
    function NgClass(_iterableDiffers, _keyValueDiffers, _ngEl, _renderer) {
        this._iterableDiffers = _iterableDiffers;
        this._keyValueDiffers = _keyValueDiffers;
        this._ngEl = _ngEl;
        this._renderer = _renderer;
        this._initialClasses = [];
    }
    Object.defineProperty(NgClass.prototype, "klass", {
        /**
         * @param {?} v
         * @return {?}
         */
        set: function (v) {
            this._applyInitialClasses(true);
            this._initialClasses = typeof v === 'string' ? v.split(/\s+/) : [];
            this._applyInitialClasses(false);
            this._applyClasses(this._rawClass, false);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgClass.prototype, "ngClass", {
        /**
         * @param {?} v
         * @return {?}
         */
        set: function (v) {
            this._cleanupClasses(this._rawClass);
            this._iterableDiffer = null;
            this._keyValueDiffer = null;
            this._rawClass = typeof v === 'string' ? v.split(/\s+/) : v;
            if (this._rawClass) {
                if (Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_49" /* isListLikeIterable */])(this._rawClass)) {
                    this._iterableDiffer = this._iterableDiffers.find(this._rawClass).create();
                }
                else {
                    this._keyValueDiffer = this._keyValueDiffers.find(this._rawClass).create();
                }
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NgClass.prototype.ngDoCheck = function () {
        if (this._iterableDiffer) {
            var /** @type {?} */ iterableChanges = this._iterableDiffer.diff(/** @type {?} */ (this._rawClass));
            if (iterableChanges) {
                this._applyIterableChanges(iterableChanges);
            }
        }
        else if (this._keyValueDiffer) {
            var /** @type {?} */ keyValueChanges = this._keyValueDiffer.diff(/** @type {?} */ (this._rawClass));
            if (keyValueChanges) {
                this._applyKeyValueChanges(keyValueChanges);
            }
        }
    };
    /**
     * @param {?} rawClassVal
     * @return {?}
     */
    NgClass.prototype._cleanupClasses = function (rawClassVal) {
        this._applyClasses(rawClassVal, true);
        this._applyInitialClasses(false);
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    NgClass.prototype._applyKeyValueChanges = function (changes) {
        var _this = this;
        changes.forEachAddedItem(function (record) { return _this._toggleClass(record.key, record.currentValue); });
        changes.forEachChangedItem(function (record) { return _this._toggleClass(record.key, record.currentValue); });
        changes.forEachRemovedItem(function (record) {
            if (record.previousValue) {
                _this._toggleClass(record.key, false);
            }
        });
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    NgClass.prototype._applyIterableChanges = function (changes) {
        var _this = this;
        changes.forEachAddedItem(function (record) {
            if (typeof record.item === 'string') {
                _this._toggleClass(record.item, true);
            }
            else {
                throw new Error("NgClass can only toggle CSS classes expressed as strings, got " + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(record.item));
            }
        });
        changes.forEachRemovedItem(function (record) { return _this._toggleClass(record.item, false); });
    };
    /**
     * @param {?} isCleanup
     * @return {?}
     */
    NgClass.prototype._applyInitialClasses = function (isCleanup) {
        var _this = this;
        this._initialClasses.forEach(function (klass) { return _this._toggleClass(klass, !isCleanup); });
    };
    /**
     * @param {?} rawClassVal
     * @param {?} isCleanup
     * @return {?}
     */
    NgClass.prototype._applyClasses = function (rawClassVal, isCleanup) {
        var _this = this;
        if (rawClassVal) {
            if (Array.isArray(rawClassVal) || rawClassVal instanceof Set) {
                ((rawClassVal)).forEach(function (klass) { return _this._toggleClass(klass, !isCleanup); });
            }
            else {
                Object.keys(rawClassVal).forEach(function (klass) {
                    if (rawClassVal[klass] != null)
                        _this._toggleClass(klass, !isCleanup);
                });
            }
        }
    };
    /**
     * @param {?} klass
     * @param {?} enabled
     * @return {?}
     */
    NgClass.prototype._toggleClass = function (klass, enabled) {
        var _this = this;
        klass = klass.trim();
        if (klass) {
            klass.split(/\s+/g).forEach(function (klass) { _this._renderer.setElementClass(_this._ngEl.nativeElement, klass, !!enabled); });
        }
    };
    return NgClass;
}());
NgClass.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */], args: [{ selector: '[ngClass]' },] },
];
/**
 * @nocollapse
 */
NgClass.ctorParameters = function () { return [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["F" /* IterableDiffers */], },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["G" /* KeyValueDiffers */], },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["u" /* ElementRef */], },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["Z" /* Renderer */], },
]; };
NgClass.propDecorators = {
    'klass': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */], args: ['class',] },],
    'ngClass': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
};
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Instantiates a single {\@link Component} type and inserts its Host View into current View.
 * `NgComponentOutlet` provides a declarative approach for dynamic component creation.
 *
 * `NgComponentOutlet` requires a component type, if a falsy value is set the view will clear and
 * any existing component will get destroyed.
 *
 * ### Fine tune control
 *
 * You can control the component creation process by using the following optional attributes:
 *
 * * `ngComponentOutletInjector`: Optional custom {\@link Injector} that will be used as parent for
 * the Component. Defaults to the injector of the current view container.
 *
 * * `ngComponentOutletContent`: Optional list of projectable nodes to insert into the content
 * section of the component, if exists.
 *
 * * `ngComponentOutletNgModuleFactory`: Optional module factory to allow dynamically loading other
 * module, then load a component from that module.
 *
 * ### Syntax
 *
 * Simple
 * ```
 * <ng-container *ngComponentOutlet="componentTypeExpression"></ng-container>
 * ```
 *
 * Customized injector/content
 * ```
 * <ng-container *ngComponentOutlet="componentTypeExpression;
 *                                   injector: injectorExpression;
 *                                   content: contentNodesExpression;">
 * </ng-container>
 * ```
 *
 * Customized ngModuleFactory
 * ```
 * <ng-container *ngComponentOutlet="componentTypeExpression;
 *                                   ngModuleFactory: moduleFactory;">
 * </ng-container>
 * ```
 * ## Example
 *
 * {\@example common/ngComponentOutlet/ts/module.ts region='SimpleExample'}
 *
 * A more complete example with additional options:
 *
 * {\@example common/ngComponentOutlet/ts/module.ts region='CompleteExample'}
 * A more complete example with ngModuleFactory:
 *
 * {\@example common/ngComponentOutlet/ts/module.ts region='NgModuleFactoryExample'}
 *
 * \@experimental
 */
var NgComponentOutlet = (function () {
    /**
     * @param {?} _viewContainerRef
     */
    function NgComponentOutlet(_viewContainerRef) {
        this._viewContainerRef = _viewContainerRef;
        this._componentRef = null;
        this._moduleRef = null;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    NgComponentOutlet.prototype.ngOnChanges = function (changes) {
        this._viewContainerRef.clear();
        this._componentRef = null;
        if (this.ngComponentOutlet) {
            var /** @type {?} */ elInjector = this.ngComponentOutletInjector || this._viewContainerRef.parentInjector;
            if (changes['ngComponentOutletNgModuleFactory']) {
                if (this._moduleRef)
                    this._moduleRef.destroy();
                if (this.ngComponentOutletNgModuleFactory) {
                    var /** @type {?} */ parentModule = elInjector.get(__WEBPACK_IMPORTED_MODULE_1__angular_core__["N" /* NgModuleRef */]);
                    this._moduleRef = this.ngComponentOutletNgModuleFactory.create(parentModule.injector);
                }
                else {
                    this._moduleRef = null;
                }
            }
            var /** @type {?} */ componentFactoryResolver = this._moduleRef ? this._moduleRef.componentFactoryResolver :
                elInjector.get(__WEBPACK_IMPORTED_MODULE_1__angular_core__["p" /* ComponentFactoryResolver */]);
            var /** @type {?} */ componentFactory = componentFactoryResolver.resolveComponentFactory(this.ngComponentOutlet);
            this._componentRef = this._viewContainerRef.createComponent(componentFactory, this._viewContainerRef.length, elInjector, this.ngComponentOutletContent);
        }
    };
    /**
     * @return {?}
     */
    NgComponentOutlet.prototype.ngOnDestroy = function () {
        if (this._moduleRef)
            this._moduleRef.destroy();
    };
    return NgComponentOutlet;
}());
NgComponentOutlet.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */], args: [{ selector: '[ngComponentOutlet]' },] },
];
/**
 * @nocollapse
 */
NgComponentOutlet.ctorParameters = function () { return [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_14" /* ViewContainerRef */], },
]; };
NgComponentOutlet.propDecorators = {
    'ngComponentOutlet': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
    'ngComponentOutletInjector': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
    'ngComponentOutletContent': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
    'ngComponentOutletNgModuleFactory': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
};
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@stable
 */
var NgForOfContext = (function () {
    /**
     * @param {?} $implicit
     * @param {?} ngForOf
     * @param {?} index
     * @param {?} count
     */
    function NgForOfContext($implicit, ngForOf, index, count) {
        this.$implicit = $implicit;
        this.ngForOf = ngForOf;
        this.index = index;
        this.count = count;
    }
    Object.defineProperty(NgForOfContext.prototype, "first", {
        /**
         * @return {?}
         */
        get: function () { return this.index === 0; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgForOfContext.prototype, "last", {
        /**
         * @return {?}
         */
        get: function () { return this.index === this.count - 1; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgForOfContext.prototype, "even", {
        /**
         * @return {?}
         */
        get: function () { return this.index % 2 === 0; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgForOfContext.prototype, "odd", {
        /**
         * @return {?}
         */
        get: function () { return !this.even; },
        enumerable: true,
        configurable: true
    });
    return NgForOfContext;
}());
/**
 * The `NgForOf` directive instantiates a template once per item from an iterable. The context
 * for each instantiated template inherits from the outer context with the given loop variable
 * set to the current item from the iterable.
 *
 * ### Local Variables
 *
 * `NgForOf` provides several exported values that can be aliased to local variables:
 *
 * - `$implicit: T`: The value of the individual items in the iterable (`ngForOf`).
 * - `ngForOf: NgIterable<T>`: The value of the iterable expression. Useful when the expression is
 * more complex then a property access, for example when using the async pipe (`userStreams |
 * async`).
 * - `index: number`: The index of the current item in the iterable.
 * - `first: boolean`: True when the item is the first item in the iterable.
 * - `last: boolean`: True when the item is the last item in the iterable.
 * - `even: boolean`: True when the item has an even index in the iterable.
 * - `odd: boolean`: True when the item has an odd index in the iterable.
 *
 * ```
 * <li *ngFor="let user of userObservable | async as users; index as i; first as isFirst">
 *    {{i}}/{{users.length}}. {{user}} <span *ngIf="isFirst">default</span>
 * </li>
 * ```
 *
 * ### Change Propagation
 *
 * When the contents of the iterator changes, `NgForOf` makes the corresponding changes to the DOM:
 *
 * * When an item is added, a new instance of the template is added to the DOM.
 * * When an item is removed, its template instance is removed from the DOM.
 * * When items are reordered, their respective templates are reordered in the DOM.
 * * Otherwise, the DOM element for that item will remain the same.
 *
 * Angular uses object identity to track insertions and deletions within the iterator and reproduce
 * those changes in the DOM. This has important implications for animations and any stateful
 * controls (such as `<input>` elements which accept user input) that are present. Inserted rows can
 * be animated in, deleted rows can be animated out, and unchanged rows retain any unsaved state
 * such as user input.
 *
 * It is possible for the identities of elements in the iterator to change while the data does not.
 * This can happen, for example, if the iterator produced from an RPC to the server, and that
 * RPC is re-run. Even if the data hasn't changed, the second response will produce objects with
 * different identities, and Angular will tear down the entire DOM and rebuild it (as if all old
 * elements were deleted and all new elements inserted). This is an expensive operation and should
 * be avoided if possible.
 *
 * To customize the default tracking algorithm, `NgForOf` supports `trackBy` option.
 * `trackBy` takes a function which has two arguments: `index` and `item`.
 * If `trackBy` is given, Angular tracks changes by the return value of the function.
 *
 * ### Syntax
 *
 * - `<li *ngFor="let item of items; index as i; trackBy: trackByFn">...</li>`
 * - `<li template="ngFor let item of items; index as i; trackBy: trackByFn">...</li>`
 *
 * With `<ng-template>` element:
 *
 * ```
 * <ng-template ngFor let-item [ngForOf]="items" let-i="index" [ngForTrackBy]="trackByFn">
 *   <li>...</li>
 * </ng-template>
 * ```
 *
 * ### Example
 *
 * See a [live demo](http://plnkr.co/edit/KVuXxDp0qinGDyo307QW?p=preview) for a more detailed
 * example.
 *
 * \@stable
 */
var NgForOf = (function () {
    /**
     * @param {?} _viewContainer
     * @param {?} _template
     * @param {?} _differs
     */
    function NgForOf(_viewContainer, _template, _differs) {
        this._viewContainer = _viewContainer;
        this._template = _template;
        this._differs = _differs;
        this._differ = null;
    }
    Object.defineProperty(NgForOf.prototype, "ngForTrackBy", {
        /**
         * @return {?}
         */
        get: function () { return this._trackByFn; },
        /**
         * @param {?} fn
         * @return {?}
         */
        set: function (fn) {
            if (Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_22" /* isDevMode */])() && fn != null && typeof fn !== 'function') {
                // TODO(vicb): use a log service once there is a public one available
                if ((console) && (console.warn)) {
                    console.warn("trackBy must be a function, but received " + JSON.stringify(fn) + ". " +
                        "See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information.");
                }
            }
            this._trackByFn = fn;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgForOf.prototype, "ngForTemplate", {
        /**
         * @param {?} value
         * @return {?}
         */
        set: function (value) {
            // TODO(TS2.1): make TemplateRef<Partial<NgForRowOf<T>>> once we move to TS v2.1
            // The current type is too restrictive; a template that just uses index, for example,
            // should be acceptable.
            if (value) {
                this._template = value;
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} changes
     * @return {?}
     */
    NgForOf.prototype.ngOnChanges = function (changes) {
        if ('ngForOf' in changes) {
            // React on ngForOf changes only once all inputs have been initialized
            var /** @type {?} */ value = changes['ngForOf'].currentValue;
            if (!this._differ && value) {
                try {
                    this._differ = this._differs.find(value).create(this.ngForTrackBy);
                }
                catch (e) {
                    throw new Error("Cannot find a differ supporting object '" + value + "' of type '" + getTypeNameForDebugging(value) + "'. NgFor only supports binding to Iterables such as Arrays.");
                }
            }
        }
    };
    /**
     * @return {?}
     */
    NgForOf.prototype.ngDoCheck = function () {
        if (this._differ) {
            var /** @type {?} */ changes = this._differ.diff(this.ngForOf);
            if (changes)
                this._applyChanges(changes);
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    NgForOf.prototype._applyChanges = function (changes) {
        var _this = this;
        var /** @type {?} */ insertTuples = [];
        changes.forEachOperation(function (item, adjustedPreviousIndex, currentIndex) {
            if (item.previousIndex == null) {
                var /** @type {?} */ view = _this._viewContainer.createEmbeddedView(_this._template, new NgForOfContext(/** @type {?} */ ((null)), _this.ngForOf, -1, -1), currentIndex);
                var /** @type {?} */ tuple = new RecordViewTuple(item, view);
                insertTuples.push(tuple);
            }
            else if (currentIndex == null) {
                _this._viewContainer.remove(adjustedPreviousIndex);
            }
            else {
                var /** @type {?} */ view = ((_this._viewContainer.get(adjustedPreviousIndex)));
                _this._viewContainer.move(view, currentIndex);
                var /** @type {?} */ tuple = new RecordViewTuple(item, /** @type {?} */ (view));
                insertTuples.push(tuple);
            }
        });
        for (var /** @type {?} */ i = 0; i < insertTuples.length; i++) {
            this._perViewChange(insertTuples[i].view, insertTuples[i].record);
        }
        for (var /** @type {?} */ i = 0, /** @type {?} */ ilen = this._viewContainer.length; i < ilen; i++) {
            var /** @type {?} */ viewRef = (this._viewContainer.get(i));
            viewRef.context.index = i;
            viewRef.context.count = ilen;
        }
        changes.forEachIdentityChange(function (record) {
            var /** @type {?} */ viewRef = (_this._viewContainer.get(record.currentIndex));
            viewRef.context.$implicit = record.item;
        });
    };
    /**
     * @param {?} view
     * @param {?} record
     * @return {?}
     */
    NgForOf.prototype._perViewChange = function (view, record) {
        view.context.$implicit = record.item;
    };
    return NgForOf;
}());
NgForOf.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */], args: [{ selector: '[ngFor][ngForOf]' },] },
];
/**
 * @nocollapse
 */
NgForOf.ctorParameters = function () { return [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_14" /* ViewContainerRef */], },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_8" /* TemplateRef */], },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["F" /* IterableDiffers */], },
]; };
NgForOf.propDecorators = {
    'ngForOf': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
    'ngForTrackBy': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
    'ngForTemplate': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
};
var RecordViewTuple = (function () {
    /**
     * @param {?} record
     * @param {?} view
     */
    function RecordViewTuple(record, view) {
        this.record = record;
        this.view = view;
    }
    return RecordViewTuple;
}());
/**
 * @deprecated from v4.0.0 - Use NgForOf instead.
 */
var NgFor = NgForOf;
/**
 * @param {?} type
 * @return {?}
 */
function getTypeNameForDebugging(type) {
    return type['name'] || typeof type;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Conditionally includes a template based on the value of an `expression`.
 *
 * `ngIf` evaluates the `expression` and then renders the `then` or `else` template in its place
 * when expression is truthy or falsy respectively. Typically the:
 *  - `then` template is the inline template of `ngIf` unless bound to a different value.
 *  - `else` template is blank unless it is bound.
 *
 * ## Most common usage
 *
 * The most common usage of the `ngIf` directive is to conditionally show the inline template as
 * seen in this example:
 * {\@example common/ngIf/ts/module.ts region='NgIfSimple'}
 *
 * ## Showing an alternative template using `else`
 *
 * If it is necessary to display a template when the `expression` is falsy use the `else` template
 * binding as shown. Note that the `else` binding points to a `<ng-template>` labeled `#elseBlock`.
 * The template can be defined anywhere in the component view but is typically placed right after
 * `ngIf` for readability.
 *
 * {\@example common/ngIf/ts/module.ts region='NgIfElse'}
 *
 * ## Using non-inlined `then` template
 *
 * Usually the `then` template is the inlined template of the `ngIf`, but it can be changed using
 * a binding (just like `else`). Because `then` and `else` are bindings, the template references can
 * change at runtime as shown in this example.
 *
 * {\@example common/ngIf/ts/module.ts region='NgIfThenElse'}
 *
 * ## Storing conditional result in a variable
 *
 * A common pattern is that we need to show a set of properties from the same object. If the
 * object is undefined, then we have to use the safe-traversal-operator `?.` to guard against
 * dereferencing a `null` value. This is especially the case when waiting on async data such as
 * when using the `async` pipe as shown in following example:
 *
 * ```
 * Hello {{ (userStream|async)?.last }}, {{ (userStream|async)?.first }}!
 * ```
 *
 * There are several inefficiencies in the above example:
 *  - We create multiple subscriptions on `userStream`. One for each `async` pipe, or two in the
 *    example above.
 *  - We cannot display an alternative screen while waiting for the data to arrive asynchronously.
 *  - We have to use the safe-traversal-operator `?.` to access properties, which is cumbersome.
 *  - We have to place the `async` pipe in parenthesis.
 *
 * A better way to do this is to use `ngIf` and store the result of the condition in a local
 * variable as shown in the the example below:
 *
 * {\@example common/ngIf/ts/module.ts region='NgIfAs'}
 *
 * Notice that:
 *  - We use only one `async` pipe and hence only one subscription gets created.
 *  - `ngIf` stores the result of the `userStream|async` in the local variable `user`.
 *  - The local `user` can then be bound repeatedly in a more efficient way.
 *  - No need to use the safe-traversal-operator `?.` to access properties as `ngIf` will only
 *    display the data if `userStream` returns a value.
 *  - We can display an alternative template while waiting for the data.
 *
 * ### Syntax
 *
 * Simple form:
 * - `<div *ngIf="condition">...</div>`
 * - `<div template="ngIf condition">...</div>`
 * - `<ng-template [ngIf]="condition"><div>...</div></ng-template>`
 *
 * Form with an else block:
 * ```
 * <div *ngIf="condition; else elseBlock">...</div>
 * <ng-template #elseBlock>...</ng-template>
 * ```
 *
 * Form with a `then` and `else` block:
 * ```
 * <div *ngIf="condition; then thenBlock else elseBlock"></div>
 * <ng-template #thenBlock>...</ng-template>
 * <ng-template #elseBlock>...</ng-template>
 * ```
 *
 * Form with storing the value locally:
 * ```
 * <div *ngIf="condition as value; else elseBlock">{{value}}</div>
 * <ng-template #elseBlock>...</ng-template>
 * ```
 *
 * \@stable
 */
var NgIf = (function () {
    /**
     * @param {?} _viewContainer
     * @param {?} templateRef
     */
    function NgIf(_viewContainer, templateRef) {
        this._viewContainer = _viewContainer;
        this._context = new NgIfContext();
        this._thenTemplateRef = null;
        this._elseTemplateRef = null;
        this._thenViewRef = null;
        this._elseViewRef = null;
        this._thenTemplateRef = templateRef;
    }
    Object.defineProperty(NgIf.prototype, "ngIf", {
        /**
         * @param {?} condition
         * @return {?}
         */
        set: function (condition) {
            this._context.$implicit = this._context.ngIf = condition;
            this._updateView();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgIf.prototype, "ngIfThen", {
        /**
         * @param {?} templateRef
         * @return {?}
         */
        set: function (templateRef) {
            this._thenTemplateRef = templateRef;
            this._thenViewRef = null; // clear previous view if any.
            this._updateView();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgIf.prototype, "ngIfElse", {
        /**
         * @param {?} templateRef
         * @return {?}
         */
        set: function (templateRef) {
            this._elseTemplateRef = templateRef;
            this._elseViewRef = null; // clear previous view if any.
            this._updateView();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NgIf.prototype._updateView = function () {
        if (this._context.$implicit) {
            if (!this._thenViewRef) {
                this._viewContainer.clear();
                this._elseViewRef = null;
                if (this._thenTemplateRef) {
                    this._thenViewRef =
                        this._viewContainer.createEmbeddedView(this._thenTemplateRef, this._context);
                }
            }
        }
        else {
            if (!this._elseViewRef) {
                this._viewContainer.clear();
                this._thenViewRef = null;
                if (this._elseTemplateRef) {
                    this._elseViewRef =
                        this._viewContainer.createEmbeddedView(this._elseTemplateRef, this._context);
                }
            }
        }
    };
    return NgIf;
}());
NgIf.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */], args: [{ selector: '[ngIf]' },] },
];
/**
 * @nocollapse
 */
NgIf.ctorParameters = function () { return [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_14" /* ViewContainerRef */], },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_8" /* TemplateRef */], },
]; };
NgIf.propDecorators = {
    'ngIf': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
    'ngIfThen': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
    'ngIfElse': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
};
/**
 * \@stable
 */
var NgIfContext = (function () {
    function NgIfContext() {
        this.$implicit = null;
        this.ngIf = null;
    }
    return NgIfContext;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var SwitchView = (function () {
    /**
     * @param {?} _viewContainerRef
     * @param {?} _templateRef
     */
    function SwitchView(_viewContainerRef, _templateRef) {
        this._viewContainerRef = _viewContainerRef;
        this._templateRef = _templateRef;
        this._created = false;
    }
    /**
     * @return {?}
     */
    SwitchView.prototype.create = function () {
        this._created = true;
        this._viewContainerRef.createEmbeddedView(this._templateRef);
    };
    /**
     * @return {?}
     */
    SwitchView.prototype.destroy = function () {
        this._created = false;
        this._viewContainerRef.clear();
    };
    /**
     * @param {?} created
     * @return {?}
     */
    SwitchView.prototype.enforceState = function (created) {
        if (created && !this._created) {
            this.create();
        }
        else if (!created && this._created) {
            this.destroy();
        }
    };
    return SwitchView;
}());
/**
 * \@ngModule CommonModule
 *
 * \@whatItDoes Adds / removes DOM sub-trees when the nest match expressions matches the switch
 *             expression.
 *
 * \@howToUse
 * ```
 *     <container-element [ngSwitch]="switch_expression">
 *       <some-element *ngSwitchCase="match_expression_1">...</some-element>
 *       <some-element *ngSwitchCase="match_expression_2">...</some-element>
 *       <some-other-element *ngSwitchCase="match_expression_3">...</some-other-element>
 *       <ng-container *ngSwitchCase="match_expression_3">
 *         <!-- use a ng-container to group multiple root nodes -->
 *         <inner-element></inner-element>
 *         <inner-other-element></inner-other-element>
 *       </ng-container>
 *       <some-element *ngSwitchDefault>...</some-element>
 *     </container-element>
 * ```
 * \@description
 *
 * `NgSwitch` stamps out nested views when their match expression value matches the value of the
 * switch expression.
 *
 * In other words:
 * - you define a container element (where you place the directive with a switch expression on the
 * `[ngSwitch]="..."` attribute)
 * - you define inner views inside the `NgSwitch` and place a `*ngSwitchCase` attribute on the view
 * root elements.
 *
 * Elements within `NgSwitch` but outside of a `NgSwitchCase` or `NgSwitchDefault` directives will
 * be preserved at the location.
 *
 * The `ngSwitchCase` directive informs the parent `NgSwitch` of which view to display when the
 * expression is evaluated.
 * When no matching expression is found on a `ngSwitchCase` view, the `ngSwitchDefault` view is
 * stamped out.
 *
 * \@stable
 */
var NgSwitch = (function () {
    function NgSwitch() {
        this._defaultUsed = false;
        this._caseCount = 0;
        this._lastCaseCheckIndex = 0;
        this._lastCasesMatched = false;
    }
    Object.defineProperty(NgSwitch.prototype, "ngSwitch", {
        /**
         * @param {?} newValue
         * @return {?}
         */
        set: function (newValue) {
            this._ngSwitch = newValue;
            if (this._caseCount === 0) {
                this._updateDefaultCases(true);
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * \@internal
     * @return {?}
     */
    NgSwitch.prototype._addCase = function () { return this._caseCount++; };
    /**
     * \@internal
     * @param {?} view
     * @return {?}
     */
    NgSwitch.prototype._addDefault = function (view) {
        if (!this._defaultViews) {
            this._defaultViews = [];
        }
        this._defaultViews.push(view);
    };
    /**
     * \@internal
     * @param {?} value
     * @return {?}
     */
    NgSwitch.prototype._matchCase = function (value) {
        var /** @type {?} */ matched = value == this._ngSwitch;
        this._lastCasesMatched = this._lastCasesMatched || matched;
        this._lastCaseCheckIndex++;
        if (this._lastCaseCheckIndex === this._caseCount) {
            this._updateDefaultCases(!this._lastCasesMatched);
            this._lastCaseCheckIndex = 0;
            this._lastCasesMatched = false;
        }
        return matched;
    };
    /**
     * @param {?} useDefault
     * @return {?}
     */
    NgSwitch.prototype._updateDefaultCases = function (useDefault) {
        if (this._defaultViews && useDefault !== this._defaultUsed) {
            this._defaultUsed = useDefault;
            for (var /** @type {?} */ i = 0; i < this._defaultViews.length; i++) {
                var /** @type {?} */ defaultView = this._defaultViews[i];
                defaultView.enforceState(useDefault);
            }
        }
    };
    return NgSwitch;
}());
NgSwitch.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */], args: [{ selector: '[ngSwitch]' },] },
];
/**
 * @nocollapse
 */
NgSwitch.ctorParameters = function () { return []; };
NgSwitch.propDecorators = {
    'ngSwitch': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
};
/**
 * \@ngModule CommonModule
 *
 * \@whatItDoes Creates a view that will be added/removed from the parent {\@link NgSwitch} when the
 *             given expression evaluate to respectively the same/different value as the switch
 *             expression.
 *
 * \@howToUse
 * ```
 * <container-element [ngSwitch]="switch_expression">
 *   <some-element *ngSwitchCase="match_expression_1">...</some-element>
 * </container-element>
 * ```
 * \@description
 *
 * Insert the sub-tree when the expression evaluates to the same value as the enclosing switch
 * expression.
 *
 * If multiple match expressions match the switch expression value, all of them are displayed.
 *
 * See {\@link NgSwitch} for more details and example.
 *
 * \@stable
 */
var NgSwitchCase = (function () {
    /**
     * @param {?} viewContainer
     * @param {?} templateRef
     * @param {?} ngSwitch
     */
    function NgSwitchCase(viewContainer, templateRef, ngSwitch) {
        this.ngSwitch = ngSwitch;
        ngSwitch._addCase();
        this._view = new SwitchView(viewContainer, templateRef);
    }
    /**
     * @return {?}
     */
    NgSwitchCase.prototype.ngDoCheck = function () { this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase)); };
    return NgSwitchCase;
}());
NgSwitchCase.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */], args: [{ selector: '[ngSwitchCase]' },] },
];
/**
 * @nocollapse
 */
NgSwitchCase.ctorParameters = function () { return [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_14" /* ViewContainerRef */], },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_8" /* TemplateRef */], },
    { type: NgSwitch, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["x" /* Host */] },] },
]; };
NgSwitchCase.propDecorators = {
    'ngSwitchCase': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
};
/**
 * \@ngModule CommonModule
 * \@whatItDoes Creates a view that is added to the parent {\@link NgSwitch} when no case expressions
 * match the
 *             switch expression.
 *
 * \@howToUse
 * ```
 * <container-element [ngSwitch]="switch_expression">
 *   <some-element *ngSwitchCase="match_expression_1">...</some-element>
 *   <some-other-element *ngSwitchDefault>...</some-other-element>
 * </container-element>
 * ```
 *
 * \@description
 *
 * Insert the sub-tree when no case expressions evaluate to the same value as the enclosing switch
 * expression.
 *
 * See {\@link NgSwitch} for more details and example.
 *
 * \@stable
 */
var NgSwitchDefault = (function () {
    /**
     * @param {?} viewContainer
     * @param {?} templateRef
     * @param {?} ngSwitch
     */
    function NgSwitchDefault(viewContainer, templateRef, ngSwitch) {
        ngSwitch._addDefault(new SwitchView(viewContainer, templateRef));
    }
    return NgSwitchDefault;
}());
NgSwitchDefault.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */], args: [{ selector: '[ngSwitchDefault]' },] },
];
/**
 * @nocollapse
 */
NgSwitchDefault.ctorParameters = function () { return [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_14" /* ViewContainerRef */], },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_8" /* TemplateRef */], },
    { type: NgSwitch, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["x" /* Host */] },] },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@ngModule CommonModule
 *
 * \@whatItDoes Adds / removes DOM sub-trees based on a numeric value. Tailored for pluralization.
 *
 * \@howToUse
 * ```
 * <some-element [ngPlural]="value">
 *   <ng-template ngPluralCase="=0">there is nothing</ng-template>
 *   <ng-template ngPluralCase="=1">there is one</ng-template>
 *   <ng-template ngPluralCase="few">there are a few</ng-template>
 * </some-element>
 * ```
 *
 * \@description
 *
 * Displays DOM sub-trees that match the switch expression value, or failing that, DOM sub-trees
 * that match the switch expression's pluralization category.
 *
 * To use this directive you must provide a container element that sets the `[ngPlural]` attribute
 * to a switch expression. Inner elements with a `[ngPluralCase]` will display based on their
 * expression:
 * - if `[ngPluralCase]` is set to a value starting with `=`, it will only display if the value
 *   matches the switch expression exactly,
 * - otherwise, the view will be treated as a "category match", and will only display if exact
 *   value matches aren't found and the value maps to its category for the defined locale.
 *
 * See http://cldr.unicode.org/index/cldr-spec/plural-rules
 *
 * \@experimental
 */
var NgPlural = (function () {
    /**
     * @param {?} _localization
     */
    function NgPlural(_localization) {
        this._localization = _localization;
        this._caseViews = {};
    }
    Object.defineProperty(NgPlural.prototype, "ngPlural", {
        /**
         * @param {?} value
         * @return {?}
         */
        set: function (value) {
            this._switchValue = value;
            this._updateView();
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} value
     * @param {?} switchView
     * @return {?}
     */
    NgPlural.prototype.addCase = function (value, switchView) { this._caseViews[value] = switchView; };
    /**
     * @return {?}
     */
    NgPlural.prototype._updateView = function () {
        this._clearViews();
        var /** @type {?} */ cases = Object.keys(this._caseViews);
        var /** @type {?} */ key = getPluralCategory(this._switchValue, cases, this._localization);
        this._activateView(this._caseViews[key]);
    };
    /**
     * @return {?}
     */
    NgPlural.prototype._clearViews = function () {
        if (this._activeView)
            this._activeView.destroy();
    };
    /**
     * @param {?} view
     * @return {?}
     */
    NgPlural.prototype._activateView = function (view) {
        if (view) {
            this._activeView = view;
            this._activeView.create();
        }
    };
    return NgPlural;
}());
NgPlural.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */], args: [{ selector: '[ngPlural]' },] },
];
/**
 * @nocollapse
 */
NgPlural.ctorParameters = function () { return [
    { type: NgLocalization, },
]; };
NgPlural.propDecorators = {
    'ngPlural': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
};
/**
 * \@ngModule CommonModule
 *
 * \@whatItDoes Creates a view that will be added/removed from the parent {\@link NgPlural} when the
 *             given expression matches the plural expression according to CLDR rules.
 *
 * \@howToUse
 * ```
 * <some-element [ngPlural]="value">
 *   <ng-template ngPluralCase="=0">...</ng-template>
 *   <ng-template ngPluralCase="other">...</ng-template>
 * </some-element>
 * ```
 *
 * See {\@link NgPlural} for more details and example.
 *
 * \@experimental
 */
var NgPluralCase = (function () {
    /**
     * @param {?} value
     * @param {?} template
     * @param {?} viewContainer
     * @param {?} ngPlural
     */
    function NgPluralCase(value, template, viewContainer, ngPlural) {
        this.value = value;
        var isANumber = !isNaN(Number(value));
        ngPlural.addCase(isANumber ? "=" + value : value, new SwitchView(viewContainer, template));
    }
    return NgPluralCase;
}());
NgPluralCase.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */], args: [{ selector: '[ngPluralCase]' },] },
];
/**
 * @nocollapse
 */
NgPluralCase.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["g" /* Attribute */], args: ['ngPluralCase',] },] },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_8" /* TemplateRef */], },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_14" /* ViewContainerRef */], },
    { type: NgPlural, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["x" /* Host */] },] },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@ngModule CommonModule
 *
 * \@whatItDoes Update an HTML element styles.
 *
 * \@howToUse
 * ```
 * <some-element [ngStyle]="{'font-style': styleExp}">...</some-element>
 *
 * <some-element [ngStyle]="{'max-width.px': widthExp}">...</some-element>
 *
 * <some-element [ngStyle]="objExp">...</some-element>
 * ```
 *
 * \@description
 *
 * The styles are updated according to the value of the expression evaluation:
 * - keys are style names with an optional `.<unit>` suffix (ie 'top.px', 'font-style.em'),
 * - values are the values assigned to those properties (expressed in the given unit).
 *
 * \@stable
 */
var NgStyle = (function () {
    /**
     * @param {?} _differs
     * @param {?} _ngEl
     * @param {?} _renderer
     */
    function NgStyle(_differs, _ngEl, _renderer) {
        this._differs = _differs;
        this._ngEl = _ngEl;
        this._renderer = _renderer;
    }
    Object.defineProperty(NgStyle.prototype, "ngStyle", {
        /**
         * @param {?} v
         * @return {?}
         */
        set: function (v) {
            this._ngStyle = v;
            if (!this._differ && v) {
                this._differ = this._differs.find(v).create();
            }
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NgStyle.prototype.ngDoCheck = function () {
        if (this._differ) {
            var /** @type {?} */ changes = this._differ.diff(this._ngStyle);
            if (changes) {
                this._applyChanges(changes);
            }
        }
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    NgStyle.prototype._applyChanges = function (changes) {
        var _this = this;
        changes.forEachRemovedItem(function (record) { return _this._setStyle(record.key, null); });
        changes.forEachAddedItem(function (record) { return _this._setStyle(record.key, record.currentValue); });
        changes.forEachChangedItem(function (record) { return _this._setStyle(record.key, record.currentValue); });
    };
    /**
     * @param {?} nameAndUnit
     * @param {?} value
     * @return {?}
     */
    NgStyle.prototype._setStyle = function (nameAndUnit, value) {
        var _a = nameAndUnit.split('.'), name = _a[0], unit = _a[1];
        value = value != null && unit ? "" + value + unit : value;
        this._renderer.setElementStyle(this._ngEl.nativeElement, name, /** @type {?} */ (value));
    };
    return NgStyle;
}());
NgStyle.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */], args: [{ selector: '[ngStyle]' },] },
];
/**
 * @nocollapse
 */
NgStyle.ctorParameters = function () { return [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["G" /* KeyValueDiffers */], },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["u" /* ElementRef */], },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["Z" /* Renderer */], },
]; };
NgStyle.propDecorators = {
    'ngStyle': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
};
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@ngModule CommonModule
 *
 * \@whatItDoes Inserts an embedded view from a prepared `TemplateRef`
 *
 * \@howToUse
 * ```
 * <ng-container *ngTemplateOutlet="templateRefExp; context: contextExp"></ng-container>
 * ```
 *
 * \@description
 *
 * You can attach a context object to the `EmbeddedViewRef` by setting `[ngTemplateOutletContext]`.
 * `[ngTemplateOutletContext]` should be an object, the object's keys will be available for binding
 * by the local template `let` declarations.
 *
 * Note: using the key `$implicit` in the context object will set it's value as default.
 *
 * ## Example
 *
 * {\@example common/ngTemplateOutlet/ts/module.ts region='NgTemplateOutlet'}
 *
 * \@experimental
 */
var NgTemplateOutlet = (function () {
    /**
     * @param {?} _viewContainerRef
     */
    function NgTemplateOutlet(_viewContainerRef) {
        this._viewContainerRef = _viewContainerRef;
    }
    Object.defineProperty(NgTemplateOutlet.prototype, "ngOutletContext", {
        /**
         * @deprecated v4.0.0 - Renamed to ngTemplateOutletContext.
         * @param {?} context
         * @return {?}
         */
        set: function (context) { this.ngTemplateOutletContext = context; },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} changes
     * @return {?}
     */
    NgTemplateOutlet.prototype.ngOnChanges = function (changes) {
        if (this._viewRef) {
            this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef));
        }
        if (this.ngTemplateOutlet) {
            this._viewRef = this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet, this.ngTemplateOutletContext);
        }
    };
    return NgTemplateOutlet;
}());
NgTemplateOutlet.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */], args: [{ selector: '[ngTemplateOutlet]' },] },
];
/**
 * @nocollapse
 */
NgTemplateOutlet.ctorParameters = function () { return [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_14" /* ViewContainerRef */], },
]; };
NgTemplateOutlet.propDecorators = {
    'ngTemplateOutletContext': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
    'ngTemplateOutlet': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
    'ngOutletContext': [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */] },],
};
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A collection of Angular directives that are likely to be used in each and every Angular
 * application.
 */
var COMMON_DIRECTIVES = [
    NgClass,
    NgComponentOutlet,
    NgForOf,
    NgIf,
    NgTemplateOutlet,
    NgStyle,
    NgSwitch,
    NgSwitchCase,
    NgSwitchDefault,
    NgPlural,
    NgPluralCase,
];
/**
 * A collection of deprecated directives that are no longer part of the core module.
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} type
 * @param {?} value
 * @return {?}
 */
function invalidPipeArgumentError(type, value) {
    return Error("InvalidPipeArgument: '" + value + "' for pipe '" + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(type) + "'");
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ObservableStrategy = (function () {
    function ObservableStrategy() {
    }
    /**
     * @param {?} async
     * @param {?} updateLatestValue
     * @return {?}
     */
    ObservableStrategy.prototype.createSubscription = function (async, updateLatestValue) {
        return async.subscribe({ next: updateLatestValue, error: function (e) { throw e; } });
    };
    /**
     * @param {?} subscription
     * @return {?}
     */
    ObservableStrategy.prototype.dispose = function (subscription) { subscription.unsubscribe(); };
    /**
     * @param {?} subscription
     * @return {?}
     */
    ObservableStrategy.prototype.onDestroy = function (subscription) { subscription.unsubscribe(); };
    return ObservableStrategy;
}());
var PromiseStrategy = (function () {
    function PromiseStrategy() {
    }
    /**
     * @param {?} async
     * @param {?} updateLatestValue
     * @return {?}
     */
    PromiseStrategy.prototype.createSubscription = function (async, updateLatestValue) {
        return async.then(updateLatestValue, function (e) { throw e; });
    };
    /**
     * @param {?} subscription
     * @return {?}
     */
    PromiseStrategy.prototype.dispose = function (subscription) { };
    /**
     * @param {?} subscription
     * @return {?}
     */
    PromiseStrategy.prototype.onDestroy = function (subscription) { };
    return PromiseStrategy;
}());
var _promiseStrategy = new PromiseStrategy();
var _observableStrategy = new ObservableStrategy();
/**
 * \@ngModule CommonModule
 * \@whatItDoes Unwraps a value from an asynchronous primitive.
 * \@howToUse `observable_or_promise_expression | async`
 * \@description
 * The `async` pipe subscribes to an `Observable` or `Promise` and returns the latest value it has
 * emitted. When a new value is emitted, the `async` pipe marks the component to be checked for
 * changes. When the component gets destroyed, the `async` pipe unsubscribes automatically to avoid
 * potential memory leaks.
 *
 *
 * ## Examples
 *
 * This example binds a `Promise` to the view. Clicking the `Resolve` button resolves the
 * promise.
 *
 * {\@example common/pipes/ts/async_pipe.ts region='AsyncPipePromise'}
 *
 * It's also possible to use `async` with Observables. The example below binds the `time` Observable
 * to the view. The Observable continuously updates the view with the current time.
 *
 * {\@example common/pipes/ts/async_pipe.ts region='AsyncPipeObservable'}
 *
 * \@stable
 */
var AsyncPipe = (function () {
    /**
     * @param {?} _ref
     */
    function AsyncPipe(_ref) {
        this._ref = _ref;
        this._latestValue = null;
        this._latestReturnedValue = null;
        this._subscription = null;
        this._obj = null;
        this._strategy = ((null));
    }
    /**
     * @return {?}
     */
    AsyncPipe.prototype.ngOnDestroy = function () {
        if (this._subscription) {
            this._dispose();
        }
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    AsyncPipe.prototype.transform = function (obj) {
        if (!this._obj) {
            if (obj) {
                this._subscribe(obj);
            }
            this._latestReturnedValue = this._latestValue;
            return this._latestValue;
        }
        if (obj !== this._obj) {
            this._dispose();
            return this.transform(/** @type {?} */ (obj));
        }
        if (this._latestValue === this._latestReturnedValue) {
            return this._latestReturnedValue;
        }
        this._latestReturnedValue = this._latestValue;
        return __WEBPACK_IMPORTED_MODULE_1__angular_core__["_16" /* WrappedValue */].wrap(this._latestValue);
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    AsyncPipe.prototype._subscribe = function (obj) {
        var _this = this;
        this._obj = obj;
        this._strategy = this._selectStrategy(obj);
        this._subscription = this._strategy.createSubscription(obj, function (value) { return _this._updateLatestValue(obj, value); });
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    AsyncPipe.prototype._selectStrategy = function (obj) {
        if (Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_51" /* isPromise */])(obj)) {
            return _promiseStrategy;
        }
        if (Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_50" /* isObservable */])(obj)) {
            return _observableStrategy;
        }
        throw invalidPipeArgumentError(AsyncPipe, obj);
    };
    /**
     * @return {?}
     */
    AsyncPipe.prototype._dispose = function () {
        this._strategy.dispose(/** @type {?} */ ((this._subscription)));
        this._latestValue = null;
        this._latestReturnedValue = null;
        this._subscription = null;
        this._obj = null;
    };
    /**
     * @param {?} async
     * @param {?} value
     * @return {?}
     */
    AsyncPipe.prototype._updateLatestValue = function (async, value) {
        if (async === this._obj) {
            this._latestValue = value;
            this._ref.markForCheck();
        }
    };
    return AsyncPipe;
}());
AsyncPipe.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */], args: [{ name: 'async', pure: false },] },
];
/**
 * @nocollapse
 */
AsyncPipe.ctorParameters = function () { return [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["k" /* ChangeDetectorRef */], },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Transforms text to lowercase.
 *
 * {\@example  common/pipes/ts/lowerupper_pipe.ts region='LowerUpperPipe' }
 *
 * \@stable
 */
var LowerCasePipe = (function () {
    function LowerCasePipe() {
    }
    /**
     * @param {?} value
     * @return {?}
     */
    LowerCasePipe.prototype.transform = function (value) {
        if (!value)
            return value;
        if (typeof value !== 'string') {
            throw invalidPipeArgumentError(LowerCasePipe, value);
        }
        return value.toLowerCase();
    };
    return LowerCasePipe;
}());
LowerCasePipe.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */], args: [{ name: 'lowercase' },] },
];
/**
 * @nocollapse
 */
LowerCasePipe.ctorParameters = function () { return []; };
/**
 * Helper method to transform a single word to titlecase.
 *
 * \@stable
 * @param {?} word
 * @return {?}
 */
function titleCaseWord(word) {
    if (!word)
        return word;
    return word[0].toUpperCase() + word.substr(1).toLowerCase();
}
/**
 * Transforms text to titlecase.
 *
 * \@stable
 */
var TitleCasePipe = (function () {
    function TitleCasePipe() {
    }
    /**
     * @param {?} value
     * @return {?}
     */
    TitleCasePipe.prototype.transform = function (value) {
        if (!value)
            return value;
        if (typeof value !== 'string') {
            throw invalidPipeArgumentError(TitleCasePipe, value);
        }
        return value.split(/\b/g).map(function (word) { return titleCaseWord(word); }).join('');
    };
    return TitleCasePipe;
}());
TitleCasePipe.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */], args: [{ name: 'titlecase' },] },
];
/**
 * @nocollapse
 */
TitleCasePipe.ctorParameters = function () { return []; };
/**
 * Transforms text to uppercase.
 *
 * \@stable
 */
var UpperCasePipe = (function () {
    function UpperCasePipe() {
    }
    /**
     * @param {?} value
     * @return {?}
     */
    UpperCasePipe.prototype.transform = function (value) {
        if (!value)
            return value;
        if (typeof value !== 'string') {
            throw invalidPipeArgumentError(UpperCasePipe, value);
        }
        return value.toUpperCase();
    };
    return UpperCasePipe;
}());
UpperCasePipe.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */], args: [{ name: 'uppercase' },] },
];
/**
 * @nocollapse
 */
UpperCasePipe.ctorParameters = function () { return []; };
var NumberFormatStyle = {};
NumberFormatStyle.Decimal = 0;
NumberFormatStyle.Percent = 1;
NumberFormatStyle.Currency = 2;
NumberFormatStyle[NumberFormatStyle.Decimal] = "Decimal";
NumberFormatStyle[NumberFormatStyle.Percent] = "Percent";
NumberFormatStyle[NumberFormatStyle.Currency] = "Currency";
var NumberFormatter = (function () {
    function NumberFormatter() {
    }
    /**
     * @param {?} num
     * @param {?} locale
     * @param {?} style
     * @param {?=} opts
     * @return {?}
     */
    NumberFormatter.format = function (num, locale, style, opts) {
        if (opts === void 0) { opts = {}; }
        var minimumIntegerDigits = opts.minimumIntegerDigits, minimumFractionDigits = opts.minimumFractionDigits, maximumFractionDigits = opts.maximumFractionDigits, currency = opts.currency, _a = opts.currencyAsSymbol, currencyAsSymbol = _a === void 0 ? false : _a;
        var /** @type {?} */ options = {
            minimumIntegerDigits: minimumIntegerDigits,
            minimumFractionDigits: minimumFractionDigits,
            maximumFractionDigits: maximumFractionDigits,
            style: NumberFormatStyle[style].toLowerCase()
        };
        if (style == NumberFormatStyle.Currency) {
            options.currency = typeof currency == 'string' ? currency : undefined;
            options.currencyDisplay = currencyAsSymbol ? 'symbol' : 'code';
        }
        return new Intl.NumberFormat(locale, options).format(num);
    };
    return NumberFormatter;
}());
var DATE_FORMATS_SPLIT = /((?:[^yMLdHhmsazZEwGjJ']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|J+|j+|m+|s+|a|z|Z|G+|w+))(.*)/;
var PATTERN_ALIASES = {
    // Keys are quoted so they do not get renamed during closure compilation.
    'yMMMdjms': datePartGetterFactory(combine([
        digitCondition('year', 1),
        nameCondition('month', 3),
        digitCondition('day', 1),
        digitCondition('hour', 1),
        digitCondition('minute', 1),
        digitCondition('second', 1),
    ])),
    'yMdjm': datePartGetterFactory(combine([
        digitCondition('year', 1), digitCondition('month', 1), digitCondition('day', 1),
        digitCondition('hour', 1), digitCondition('minute', 1)
    ])),
    'yMMMMEEEEd': datePartGetterFactory(combine([
        digitCondition('year', 1), nameCondition('month', 4), nameCondition('weekday', 4),
        digitCondition('day', 1)
    ])),
    'yMMMMd': datePartGetterFactory(combine([digitCondition('year', 1), nameCondition('month', 4), digitCondition('day', 1)])),
    'yMMMd': datePartGetterFactory(combine([digitCondition('year', 1), nameCondition('month', 3), digitCondition('day', 1)])),
    'yMd': datePartGetterFactory(combine([digitCondition('year', 1), digitCondition('month', 1), digitCondition('day', 1)])),
    'jms': datePartGetterFactory(combine([digitCondition('hour', 1), digitCondition('second', 1), digitCondition('minute', 1)])),
    'jm': datePartGetterFactory(combine([digitCondition('hour', 1), digitCondition('minute', 1)]))
};
var DATE_FORMATS = {
    // Keys are quoted so they do not get renamed.
    'yyyy': datePartGetterFactory(digitCondition('year', 4)),
    'yy': datePartGetterFactory(digitCondition('year', 2)),
    'y': datePartGetterFactory(digitCondition('year', 1)),
    'MMMM': datePartGetterFactory(nameCondition('month', 4)),
    'MMM': datePartGetterFactory(nameCondition('month', 3)),
    'MM': datePartGetterFactory(digitCondition('month', 2)),
    'M': datePartGetterFactory(digitCondition('month', 1)),
    'LLLL': datePartGetterFactory(nameCondition('month', 4)),
    'L': datePartGetterFactory(nameCondition('month', 1)),
    'dd': datePartGetterFactory(digitCondition('day', 2)),
    'd': datePartGetterFactory(digitCondition('day', 1)),
    'HH': digitModifier(hourExtractor(datePartGetterFactory(hour12Modify(digitCondition('hour', 2), false)))),
    'H': hourExtractor(datePartGetterFactory(hour12Modify(digitCondition('hour', 1), false))),
    'hh': digitModifier(hourExtractor(datePartGetterFactory(hour12Modify(digitCondition('hour', 2), true)))),
    'h': hourExtractor(datePartGetterFactory(hour12Modify(digitCondition('hour', 1), true))),
    'jj': datePartGetterFactory(digitCondition('hour', 2)),
    'j': datePartGetterFactory(digitCondition('hour', 1)),
    'mm': digitModifier(datePartGetterFactory(digitCondition('minute', 2))),
    'm': datePartGetterFactory(digitCondition('minute', 1)),
    'ss': digitModifier(datePartGetterFactory(digitCondition('second', 2))),
    's': datePartGetterFactory(digitCondition('second', 1)),
    // while ISO 8601 requires fractions to be prefixed with `.` or `,`
    // we can be just safely rely on using `sss` since we currently don't support single or two digit
    // fractions
    'sss': datePartGetterFactory(digitCondition('second', 3)),
    'EEEE': datePartGetterFactory(nameCondition('weekday', 4)),
    'EEE': datePartGetterFactory(nameCondition('weekday', 3)),
    'EE': datePartGetterFactory(nameCondition('weekday', 2)),
    'E': datePartGetterFactory(nameCondition('weekday', 1)),
    'a': hourClockExtractor(datePartGetterFactory(hour12Modify(digitCondition('hour', 1), true))),
    'Z': timeZoneGetter('short'),
    'z': timeZoneGetter('long'),
    'ww': datePartGetterFactory({}),
    // first Thursday of the year. not support ?
    'w': datePartGetterFactory({}),
    // of the year not support ?
    'G': datePartGetterFactory(nameCondition('era', 1)),
    'GG': datePartGetterFactory(nameCondition('era', 2)),
    'GGG': datePartGetterFactory(nameCondition('era', 3)),
    'GGGG': datePartGetterFactory(nameCondition('era', 4))
};
/**
 * @param {?} inner
 * @return {?}
 */
function digitModifier(inner) {
    return function (date, locale) {
        var /** @type {?} */ result = inner(date, locale);
        return result.length == 1 ? '0' + result : result;
    };
}
/**
 * @param {?} inner
 * @return {?}
 */
function hourClockExtractor(inner) {
    return function (date, locale) { return inner(date, locale).split(' ')[1]; };
}
/**
 * @param {?} inner
 * @return {?}
 */
function hourExtractor(inner) {
    return function (date, locale) { return inner(date, locale).split(' ')[0]; };
}
/**
 * @param {?} date
 * @param {?} locale
 * @param {?} options
 * @return {?}
 */
function intlDateFormat(date, locale, options) {
    return new Intl.DateTimeFormat(locale, options).format(date).replace(/[\u200e\u200f]/g, '');
}
/**
 * @param {?} timezone
 * @return {?}
 */
function timeZoneGetter(timezone) {
    // To workaround `Intl` API restriction for single timezone let format with 24 hours
    var /** @type {?} */ options = { hour: '2-digit', hour12: false, timeZoneName: timezone };
    return function (date, locale) {
        var /** @type {?} */ result = intlDateFormat(date, locale, options);
        // Then extract first 3 letters that related to hours
        return result ? result.substring(3) : '';
    };
}
/**
 * @param {?} options
 * @param {?} value
 * @return {?}
 */
function hour12Modify(options, value) {
    options.hour12 = value;
    return options;
}
/**
 * @param {?} prop
 * @param {?} len
 * @return {?}
 */
function digitCondition(prop, len) {
    var /** @type {?} */ result = {};
    result[prop] = len === 2 ? '2-digit' : 'numeric';
    return result;
}
/**
 * @param {?} prop
 * @param {?} len
 * @return {?}
 */
function nameCondition(prop, len) {
    var /** @type {?} */ result = {};
    if (len < 4) {
        result[prop] = len > 1 ? 'short' : 'narrow';
    }
    else {
        result[prop] = 'long';
    }
    return result;
}
/**
 * @param {?} options
 * @return {?}
 */
function combine(options) {
    return options.reduce(function (merged, opt) { return (Object.assign({}, merged, opt)); }, {});
}
/**
 * @param {?} ret
 * @return {?}
 */
function datePartGetterFactory(ret) {
    return function (date, locale) { return intlDateFormat(date, locale, ret); };
}
var DATE_FORMATTER_CACHE = new Map();
/**
 * @param {?} format
 * @param {?} date
 * @param {?} locale
 * @return {?}
 */
function dateFormatter(format, date, locale) {
    var /** @type {?} */ fn = PATTERN_ALIASES[format];
    if (fn)
        return fn(date, locale);
    var /** @type {?} */ cacheKey = format;
    var /** @type {?} */ parts = DATE_FORMATTER_CACHE.get(cacheKey);
    if (!parts) {
        parts = [];
        var /** @type {?} */ match = void 0;
        DATE_FORMATS_SPLIT.exec(format);
        var /** @type {?} */ _format = format;
        while (_format) {
            match = DATE_FORMATS_SPLIT.exec(_format);
            if (match) {
                parts = parts.concat(match.slice(1));
                _format = ((parts.pop()));
            }
            else {
                parts.push(_format);
                _format = null;
            }
        }
        DATE_FORMATTER_CACHE.set(cacheKey, parts);
    }
    return parts.reduce(function (text, part) {
        var /** @type {?} */ fn = DATE_FORMATS[part];
        return text + (fn ? fn(date, locale) : partToTime(part));
    }, '');
}
/**
 * @param {?} part
 * @return {?}
 */
function partToTime(part) {
    return part === '\'\'' ? '\'' : part.replace(/(^'|'$)/g, '').replace(/''/g, '\'');
}
var DateFormatter = (function () {
    function DateFormatter() {
    }
    /**
     * @param {?} date
     * @param {?} locale
     * @param {?} pattern
     * @return {?}
     */
    DateFormatter.format = function (date, locale, pattern) {
        return dateFormatter(pattern, date, locale);
    };
    return DateFormatter;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _NUMBER_FORMAT_REGEXP = /^(\d+)?\.((\d+)(-(\d+))?)?$/;
/**
 * @param {?} pipe
 * @param {?} locale
 * @param {?} value
 * @param {?} style
 * @param {?=} digits
 * @param {?=} currency
 * @param {?=} currencyAsSymbol
 * @return {?}
 */
function formatNumber(pipe, locale, value, style, digits, currency, currencyAsSymbol) {
    if (currency === void 0) { currency = null; }
    if (currencyAsSymbol === void 0) { currencyAsSymbol = false; }
    if (value == null)
        return null;
    // Convert strings to numbers
    value = typeof value === 'string' && isNumeric(value) ? +value : value;
    if (typeof value !== 'number') {
        throw invalidPipeArgumentError(pipe, value);
    }
    var /** @type {?} */ minInt = undefined;
    var /** @type {?} */ minFraction = undefined;
    var /** @type {?} */ maxFraction = undefined;
    if (style !== NumberFormatStyle.Currency) {
        // rely on Intl default for currency
        minInt = 1;
        minFraction = 0;
        maxFraction = 3;
    }
    if (digits) {
        var /** @type {?} */ parts = digits.match(_NUMBER_FORMAT_REGEXP);
        if (parts === null) {
            throw new Error(digits + " is not a valid digit info for number pipes");
        }
        if (parts[1] != null) {
            minInt = parseIntAutoRadix(parts[1]);
        }
        if (parts[3] != null) {
            minFraction = parseIntAutoRadix(parts[3]);
        }
        if (parts[5] != null) {
            maxFraction = parseIntAutoRadix(parts[5]);
        }
    }
    return NumberFormatter.format(/** @type {?} */ (value), locale, style, {
        minimumIntegerDigits: minInt,
        minimumFractionDigits: minFraction,
        maximumFractionDigits: maxFraction,
        currency: currency,
        currencyAsSymbol: currencyAsSymbol,
    });
}
/**
 * \@ngModule CommonModule
 * \@whatItDoes Formats a number according to locale rules.
 * \@howToUse `number_expression | number[:digitInfo]`
 *
 * Formats a number as text. Group sizing and separator and other locale-specific
 * configurations are based on the active locale.
 *
 * where `expression` is a number:
 *  - `digitInfo` is a `string` which has a following format: <br>
 *     <code>{minIntegerDigits}.{minFractionDigits}-{maxFractionDigits}</code>
 *   - `minIntegerDigits` is the minimum number of integer digits to use. Defaults to `1`.
 *   - `minFractionDigits` is the minimum number of digits after fraction. Defaults to `0`.
 *   - `maxFractionDigits` is the maximum number of digits after fraction. Defaults to `3`.
 *
 * For more information on the acceptable range for each of these numbers and other
 * details see your native internationalization library.
 *
 * WARNING: this pipe uses the Internationalization API which is not yet available in all browsers
 * and may require a polyfill. See [Browser Support](guide/browser-support) for details.
 *
 * ### Example
 *
 * {\@example common/pipes/ts/number_pipe.ts region='NumberPipe'}
 *
 * \@stable
 */
var DecimalPipe = (function () {
    /**
     * @param {?} _locale
     */
    function DecimalPipe(_locale) {
        this._locale = _locale;
    }
    /**
     * @param {?} value
     * @param {?=} digits
     * @return {?}
     */
    DecimalPipe.prototype.transform = function (value, digits) {
        return formatNumber(DecimalPipe, this._locale, value, NumberFormatStyle.Decimal, digits);
    };
    return DecimalPipe;
}());
DecimalPipe.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */], args: [{ name: 'number' },] },
];
/**
 * @nocollapse
 */
DecimalPipe.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */], args: [__WEBPACK_IMPORTED_MODULE_1__angular_core__["H" /* LOCALE_ID */],] },] },
]; };
/**
 * \@ngModule CommonModule
 * \@whatItDoes Formats a number as a percentage according to locale rules.
 * \@howToUse `number_expression | percent[:digitInfo]`
 *
 * \@description
 *
 * Formats a number as percentage.
 *
 * - `digitInfo` See {\@link DecimalPipe} for detailed description.
 *
 * WARNING: this pipe uses the Internationalization API which is not yet available in all browsers
 * and may require a polyfill. See [Browser Support](guide/browser-support) for details.
 *
 * ### Example
 *
 * {\@example common/pipes/ts/number_pipe.ts region='PercentPipe'}
 *
 * \@stable
 */
var PercentPipe = (function () {
    /**
     * @param {?} _locale
     */
    function PercentPipe(_locale) {
        this._locale = _locale;
    }
    /**
     * @param {?} value
     * @param {?=} digits
     * @return {?}
     */
    PercentPipe.prototype.transform = function (value, digits) {
        return formatNumber(PercentPipe, this._locale, value, NumberFormatStyle.Percent, digits);
    };
    return PercentPipe;
}());
PercentPipe.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */], args: [{ name: 'percent' },] },
];
/**
 * @nocollapse
 */
PercentPipe.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */], args: [__WEBPACK_IMPORTED_MODULE_1__angular_core__["H" /* LOCALE_ID */],] },] },
]; };
/**
 * \@ngModule CommonModule
 * \@whatItDoes Formats a number as currency using locale rules.
 * \@howToUse `number_expression | currency[:currencyCode[:symbolDisplay[:digitInfo]]]`
 * \@description
 *
 * Use `currency` to format a number as currency.
 *
 * - `currencyCode` is the [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217) currency code, such
 *    as `USD` for the US dollar and `EUR` for the euro.
 * - `symbolDisplay` is a boolean indicating whether to use the currency symbol or code.
 *   - `true`: use symbol (e.g. `$`).
 *   - `false`(default): use code (e.g. `USD`).
 * - `digitInfo` See {\@link DecimalPipe} for detailed description.
 *
 * WARNING: this pipe uses the Internationalization API which is not yet available in all browsers
 * and may require a polyfill. See [Browser Support](guide/browser-support) for details.
 *
 * ### Example
 *
 * {\@example common/pipes/ts/number_pipe.ts region='CurrencyPipe'}
 *
 * \@stable
 */
var CurrencyPipe = (function () {
    /**
     * @param {?} _locale
     */
    function CurrencyPipe(_locale) {
        this._locale = _locale;
    }
    /**
     * @param {?} value
     * @param {?=} currencyCode
     * @param {?=} symbolDisplay
     * @param {?=} digits
     * @return {?}
     */
    CurrencyPipe.prototype.transform = function (value, currencyCode, symbolDisplay, digits) {
        if (currencyCode === void 0) { currencyCode = 'USD'; }
        if (symbolDisplay === void 0) { symbolDisplay = false; }
        return formatNumber(CurrencyPipe, this._locale, value, NumberFormatStyle.Currency, digits, currencyCode, symbolDisplay);
    };
    return CurrencyPipe;
}());
CurrencyPipe.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */], args: [{ name: 'currency' },] },
];
/**
 * @nocollapse
 */
CurrencyPipe.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */], args: [__WEBPACK_IMPORTED_MODULE_1__angular_core__["H" /* LOCALE_ID */],] },] },
]; };
/**
 * @param {?} text
 * @return {?}
 */
function parseIntAutoRadix(text) {
    var /** @type {?} */ result = parseInt(text);
    if (isNaN(result)) {
        throw new Error('Invalid integer literal when parsing ' + text);
    }
    return result;
}
/**
 * @param {?} value
 * @return {?}
 */
function isNumeric(value) {
    return !isNaN(value - parseFloat(value));
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ISO8601_DATE_REGEX = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
/**
 * \@ngModule CommonModule
 * \@whatItDoes Formats a date according to locale rules.
 * \@howToUse `date_expression | date[:format]`
 * \@description
 *
 * Where:
 * - `expression` is a date object or a number (milliseconds since UTC epoch) or an ISO string
 * (https://www.w3.org/TR/NOTE-datetime).
 * - `format` indicates which date/time components to include. The format can be predefined as
 *   shown below or custom as shown in the table.
 *   - `'medium'`: equivalent to `'yMMMdjms'` (e.g. `Sep 3, 2010, 12:05:08 PM` for `en-US`)
 *   - `'short'`: equivalent to `'yMdjm'` (e.g. `9/3/2010, 12:05 PM` for `en-US`)
 *   - `'fullDate'`: equivalent to `'yMMMMEEEEd'` (e.g. `Friday, September 3, 2010` for `en-US`)
 *   - `'longDate'`: equivalent to `'yMMMMd'` (e.g. `September 3, 2010` for `en-US`)
 *   - `'mediumDate'`: equivalent to `'yMMMd'` (e.g. `Sep 3, 2010` for `en-US`)
 *   - `'shortDate'`: equivalent to `'yMd'` (e.g. `9/3/2010` for `en-US`)
 *   - `'mediumTime'`: equivalent to `'jms'` (e.g. `12:05:08 PM` for `en-US`)
 *   - `'shortTime'`: equivalent to `'jm'` (e.g. `12:05 PM` for `en-US`)
 *
 *
 *  | Component | Symbol | Narrow | Short Form   | Long Form         | Numeric   | 2-digit   |
 *  |-----------|:------:|--------|--------------|-------------------|-----------|-----------|
 *  | era       |   G    | G (A)  | GGG (AD)     | GGGG (Anno Domini)| -         | -         |
 *  | year      |   y    | -      | -            | -                 | y (2015)  | yy (15)   |
 *  | month     |   M    | L (S)  | MMM (Sep)    | MMMM (September)  | M (9)     | MM (09)   |
 *  | day       |   d    | -      | -            | -                 | d (3)     | dd (03)   |
 *  | weekday   |   E    | E (S)  | EEE (Sun)    | EEEE (Sunday)     | -         | -         |
 *  | hour      |   j    | -      | -            | -                 | j (1 PM)  | jj (1 PM) |
 *  | hour12    |   h    | -      | -            | -                 | h (1)     | hh (01)   |
 *  | hour24    |   H    | -      | -            | -                 | H (13)    | HH (13)   |
 *  | minute    |   m    | -      | -            | -                 | m (5)     | mm (05)   |
 *  | second    |   s    | -      | -            | -                 | s (9)     | ss (09)   |
 *  | timezone  |   z    | -      | -            | z (Pacific Standard Time)| -  | -         |
 *  | timezone  |   Z    | -      | Z (GMT-8:00) | -                 | -         | -         |
 *  | timezone  |   a    | -      | a (PM)       | -                 | -         | -         |
 *
 * In javascript, only the components specified will be respected (not the ordering,
 * punctuations, ...) and details of the formatting will be dependent on the locale.
 *
 * Timezone of the formatted text will be the local system timezone of the end-user's machine.
 *
 * When the expression is a ISO string without time (e.g. 2016-09-19) the time zone offset is not
 * applied and the formatted text will have the same day, month and year of the expression.
 *
 * WARNINGS:
 * - this pipe is marked as pure hence it will not be re-evaluated when the input is mutated.
 *   Instead users should treat the date as an immutable object and change the reference when the
 *   pipe needs to re-run (this is to avoid reformatting the date on every change detection run
 *   which would be an expensive operation).
 * - this pipe uses the Internationalization API. Therefore it is only reliable in Chrome and Opera
 *   browsers.
 *
 * ### Examples
 *
 * Assuming `dateObj` is (year: 2015, month: 6, day: 15, hour: 21, minute: 43, second: 11)
 * in the _local_ time and locale is 'en-US':
 *
 * ```
 *     {{ dateObj | date }}               // output is 'Jun 15, 2015'
 *     {{ dateObj | date:'medium' }}      // output is 'Jun 15, 2015, 9:43:11 PM'
 *     {{ dateObj | date:'shortTime' }}   // output is '9:43 PM'
 *     {{ dateObj | date:'mmss' }}        // output is '43:11'
 * ```
 *
 * {\@example common/pipes/ts/date_pipe.ts region='DatePipe'}
 *
 * \@stable
 */
var DatePipe = (function () {
    /**
     * @param {?} _locale
     */
    function DatePipe(_locale) {
        this._locale = _locale;
    }
    /**
     * @param {?} value
     * @param {?=} pattern
     * @return {?}
     */
    DatePipe.prototype.transform = function (value, pattern) {
        if (pattern === void 0) { pattern = 'mediumDate'; }
        var /** @type {?} */ date;
        if (isBlank(value) || value !== value)
            return null;
        if (typeof value === 'string') {
            value = value.trim();
        }
        if (isDate(value)) {
            date = value;
        }
        else if (isNumeric(value)) {
            date = new Date(parseFloat(value));
        }
        else if (typeof value === 'string' && /^(\d{4}-\d{1,2}-\d{1,2})$/.test(value)) {
            /**
             * For ISO Strings without time the day, month and year must be extracted from the ISO String
             * before Date creation to avoid time offset and errors in the new Date.
             * If we only replace '-' with ',' in the ISO String ("2015,01,01"), and try to create a new
             * date, some browsers (e.g. IE 9) will throw an invalid Date error
             * If we leave the '-' ("2015-01-01") and try to create a new Date("2015-01-01") the timeoffset
             * is applied
             * Note: ISO months are 0 for January, 1 for February, ...
             */
            var _a = value.split('-').map(function (val) { return parseInt(val, 10); }), y = _a[0], m = _a[1], d = _a[2];
            date = new Date(y, m - 1, d);
        }
        else {
            date = new Date(value);
        }
        if (!isDate(date)) {
            var /** @type {?} */ match = void 0;
            if ((typeof value === 'string') && (match = value.match(ISO8601_DATE_REGEX))) {
                date = isoStringToDate(match);
            }
            else {
                throw invalidPipeArgumentError(DatePipe, value);
            }
        }
        return DateFormatter.format(date, this._locale, DatePipe._ALIASES[pattern] || pattern);
    };
    return DatePipe;
}());
/**
 * \@internal
 */
DatePipe._ALIASES = {
    'medium': 'yMMMdjms',
    'short': 'yMdjm',
    'fullDate': 'yMMMMEEEEd',
    'longDate': 'yMMMMd',
    'mediumDate': 'yMMMd',
    'shortDate': 'yMd',
    'mediumTime': 'jms',
    'shortTime': 'jm'
};
DatePipe.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */], args: [{ name: 'date', pure: true },] },
];
/**
 * @nocollapse
 */
DatePipe.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */], args: [__WEBPACK_IMPORTED_MODULE_1__angular_core__["H" /* LOCALE_ID */],] },] },
]; };
/**
 * @param {?} obj
 * @return {?}
 */
function isBlank(obj) {
    return obj == null || obj === '';
}
/**
 * @param {?} obj
 * @return {?}
 */
function isDate(obj) {
    return obj instanceof Date && !isNaN(obj.valueOf());
}
/**
 * @param {?} match
 * @return {?}
 */
function isoStringToDate(match) {
    var /** @type {?} */ date = new Date(0);
    var /** @type {?} */ tzHour = 0;
    var /** @type {?} */ tzMin = 0;
    var /** @type {?} */ dateSetter = match[8] ? date.setUTCFullYear : date.setFullYear;
    var /** @type {?} */ timeSetter = match[8] ? date.setUTCHours : date.setHours;
    if (match[9]) {
        tzHour = toInt(match[9] + match[10]);
        tzMin = toInt(match[9] + match[11]);
    }
    dateSetter.call(date, toInt(match[1]), toInt(match[2]) - 1, toInt(match[3]));
    var /** @type {?} */ h = toInt(match[4] || '0') - tzHour;
    var /** @type {?} */ m = toInt(match[5] || '0') - tzMin;
    var /** @type {?} */ s = toInt(match[6] || '0');
    var /** @type {?} */ ms = Math.round(parseFloat('0.' + (match[7] || 0)) * 1000);
    timeSetter.call(date, h, m, s, ms);
    return date;
}
/**
 * @param {?} str
 * @return {?}
 */
function toInt(str) {
    return parseInt(str, 10);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _INTERPOLATION_REGEXP = /#/g;
/**
 * \@ngModule CommonModule
 * \@whatItDoes Maps a value to a string that pluralizes the value according to locale rules.
 * \@howToUse `expression | i18nPlural:mapping`
 * \@description
 *
 *  Where:
 *  - `expression` is a number.
 *  - `mapping` is an object that mimics the ICU format, see
 *    http://userguide.icu-project.org/formatparse/messages
 *
 *  ## Example
 *
 * {\@example common/pipes/ts/i18n_pipe.ts region='I18nPluralPipeComponent'}
 *
 * \@experimental
 */
var I18nPluralPipe = (function () {
    /**
     * @param {?} _localization
     */
    function I18nPluralPipe(_localization) {
        this._localization = _localization;
    }
    /**
     * @param {?} value
     * @param {?} pluralMap
     * @return {?}
     */
    I18nPluralPipe.prototype.transform = function (value, pluralMap) {
        if (value == null)
            return '';
        if (typeof pluralMap !== 'object' || pluralMap === null) {
            throw invalidPipeArgumentError(I18nPluralPipe, pluralMap);
        }
        var /** @type {?} */ key = getPluralCategory(value, Object.keys(pluralMap), this._localization);
        return pluralMap[key].replace(_INTERPOLATION_REGEXP, value.toString());
    };
    return I18nPluralPipe;
}());
I18nPluralPipe.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */], args: [{ name: 'i18nPlural', pure: true },] },
];
/**
 * @nocollapse
 */
I18nPluralPipe.ctorParameters = function () { return [
    { type: NgLocalization, },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@ngModule CommonModule
 * \@whatItDoes Generic selector that displays the string that matches the current value.
 * \@howToUse `expression | i18nSelect:mapping`
 * \@description
 *
 *  Where `mapping` is an object that indicates the text that should be displayed
 *  for different values of the provided `expression`.
 *  If none of the keys of the mapping match the value of the `expression`, then the content
 *  of the `other` key is returned when present, otherwise an empty string is returned.
 *
 *  ## Example
 *
 * {\@example common/pipes/ts/i18n_pipe.ts region='I18nSelectPipeComponent'}
 *
 *  \@experimental
 */
var I18nSelectPipe = (function () {
    function I18nSelectPipe() {
    }
    /**
     * @param {?} value
     * @param {?} mapping
     * @return {?}
     */
    I18nSelectPipe.prototype.transform = function (value, mapping) {
        if (value == null)
            return '';
        if (typeof mapping !== 'object' || typeof value !== 'string') {
            throw invalidPipeArgumentError(I18nSelectPipe, mapping);
        }
        if (mapping.hasOwnProperty(value)) {
            return mapping[value];
        }
        if (mapping.hasOwnProperty('other')) {
            return mapping['other'];
        }
        return '';
    };
    return I18nSelectPipe;
}());
I18nSelectPipe.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */], args: [{ name: 'i18nSelect', pure: true },] },
];
/**
 * @nocollapse
 */
I18nSelectPipe.ctorParameters = function () { return []; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@ngModule CommonModule
 * \@whatItDoes Converts value into JSON string.
 * \@howToUse `expression | json`
 * \@description
 *
 * Converts value into string using `JSON.stringify`. Useful for debugging.
 *
 * ### Example
 * {\@example common/pipes/ts/json_pipe.ts region='JsonPipe'}
 *
 * \@stable
 */
var JsonPipe = (function () {
    function JsonPipe() {
    }
    /**
     * @param {?} value
     * @return {?}
     */
    JsonPipe.prototype.transform = function (value) { return JSON.stringify(value, null, 2); };
    return JsonPipe;
}());
JsonPipe.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */], args: [{ name: 'json', pure: false },] },
];
/**
 * @nocollapse
 */
JsonPipe.ctorParameters = function () { return []; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@ngModule CommonModule
 * \@whatItDoes Creates a new List or String containing a subset (slice) of the elements.
 * \@howToUse `array_or_string_expression | slice:start[:end]`
 * \@description
 *
 * Where the input expression is a `List` or `String`, and:
 * - `start`: The starting index of the subset to return.
 *   - **a positive integer**: return the item at `start` index and all items after
 *     in the list or string expression.
 *   - **a negative integer**: return the item at `start` index from the end and all items after
 *     in the list or string expression.
 *   - **if positive and greater than the size of the expression**: return an empty list or string.
 *   - **if negative and greater than the size of the expression**: return entire list or string.
 * - `end`: The ending index of the subset to return.
 *   - **omitted**: return all items until the end.
 *   - **if positive**: return all items before `end` index of the list or string.
 *   - **if negative**: return all items before `end` index from the end of the list or string.
 *
 * All behavior is based on the expected behavior of the JavaScript API `Array.prototype.slice()`
 * and `String.prototype.slice()`.
 *
 * When operating on a [List], the returned list is always a copy even when all
 * the elements are being returned.
 *
 * When operating on a blank value, the pipe returns the blank value.
 *
 * ## List Example
 *
 * This `ngFor` example:
 *
 * {\@example common/pipes/ts/slice_pipe.ts region='SlicePipe_list'}
 *
 * produces the following:
 *
 *     <li>b</li>
 *     <li>c</li>
 *
 * ## String Examples
 *
 * {\@example common/pipes/ts/slice_pipe.ts region='SlicePipe_string'}
 *
 * \@stable
 */
var SlicePipe = (function () {
    function SlicePipe() {
    }
    /**
     * @param {?} value
     * @param {?} start
     * @param {?=} end
     * @return {?}
     */
    SlicePipe.prototype.transform = function (value, start, end) {
        if (value == null)
            return value;
        if (!this.supports(value)) {
            throw invalidPipeArgumentError(SlicePipe, value);
        }
        return value.slice(start, end);
    };
    /**
     * @param {?} obj
     * @return {?}
     */
    SlicePipe.prototype.supports = function (obj) { return typeof obj === 'string' || Array.isArray(obj); };
    return SlicePipe;
}());
SlicePipe.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */], args: [{ name: 'slice', pure: false },] },
];
/**
 * @nocollapse
 */
SlicePipe.ctorParameters = function () { return []; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * This module provides a set of common Pipes.
 */
/**
 * A collection of Angular pipes that are likely to be used in each and every application.
 */
var COMMON_PIPES = [
    AsyncPipe,
    UpperCasePipe,
    LowerCasePipe,
    JsonPipe,
    SlicePipe,
    DecimalPipe,
    PercentPipe,
    TitleCasePipe,
    CurrencyPipe,
    DatePipe,
    I18nPluralPipe,
    I18nSelectPipe,
];
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * The module that includes all the basic Angular directives like {\@link NgIf}, {\@link NgForOf}, ...
 *
 * \@stable
 */
var CommonModule = (function () {
    function CommonModule() {
    }
    return CommonModule;
}());
CommonModule.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["L" /* NgModule */], args: [{
                declarations: [COMMON_DIRECTIVES, COMMON_PIPES],
                exports: [COMMON_DIRECTIVES, COMMON_PIPES],
                providers: [
                    { provide: NgLocalization, useClass: NgLocaleLocalization },
                ],
            },] },
];
/**
 * @nocollapse
 */
CommonModule.ctorParameters = function () { return []; };
/**
 * I18N pipes are being changed to move away from using the JS Intl API.
 *
 * The former pipes relying on the Intl API will be moved to this module while the `CommonModule`
 * will contain the new pipes that do not rely on Intl.
 *
 * As a first step this module is created empty to ease the migration.
 *
 * see https://github.com/angular/angular/pull/18284
 *
 * @deprecated from v5
 */
var DeprecatedI18NPipesModule = (function () {
    function DeprecatedI18NPipesModule() {
    }
    return DeprecatedI18NPipesModule;
}());
DeprecatedI18NPipesModule.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["L" /* NgModule */], args: [{ declarations: [], exports: [] },] },
];
/**
 * @nocollapse
 */
DeprecatedI18NPipesModule.ctorParameters = function () { return []; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A DI Token representing the main rendering context. In a browser this is the DOM Document.
 *
 * Note: Document might not be available in the Application Context when Application and Rendering
 * Contexts are not the same (e.g. when running the application into a Web Worker).
 *
 * \@stable
 */
var DOCUMENT = new __WEBPACK_IMPORTED_MODULE_1__angular_core__["C" /* InjectionToken */]('DocumentToken');
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var PLATFORM_BROWSER_ID = 'browser';
var PLATFORM_SERVER_ID = 'server';
var PLATFORM_WORKER_APP_ID = 'browserWorkerApp';
var PLATFORM_WORKER_UI_ID = 'browserWorkerUi';
/**
 * Returns whether a platform id represents a browser platform.
 * \@experimental
 * @param {?} platformId
 * @return {?}
 */
function isPlatformBrowser(platformId) {
    return platformId === PLATFORM_BROWSER_ID;
}
/**
 * Returns whether a platform id represents a server platform.
 * \@experimental
 * @param {?} platformId
 * @return {?}
 */
function isPlatformServer(platformId) {
    return platformId === PLATFORM_SERVER_ID;
}
/**
 * Returns whether a platform id represents a web worker app platform.
 * \@experimental
 * @param {?} platformId
 * @return {?}
 */
function isPlatformWorkerApp(platformId) {
    return platformId === PLATFORM_WORKER_APP_ID;
}
/**
 * Returns whether a platform id represents a web worker UI platform.
 * \@experimental
 * @param {?} platformId
 * @return {?}
 */
function isPlatformWorkerUi(platformId) {
    return platformId === PLATFORM_WORKER_UI_ID;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all public APIs of the common package.
 */
/**
 * \@stable
 */
var VERSION = new __WEBPACK_IMPORTED_MODULE_1__angular_core__["_11" /* Version */]('4.4.5');
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all public APIs of the common package.
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all public APIs of the common package.
 */
// This file only reexports content of the `src` folder. Keep it that way.
/**
 * Generated bundle index. Do not edit.
 */

//# sourceMappingURL=common.es5.js.map


/***/ }),

/***/ "../../../compiler/@angular/compiler.es5.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export VERSION */
/* unused harmony export TEMPLATE_TRANSFORMS */
/* unused harmony export CompilerConfig */
/* unused harmony export preserveWhitespacesDefault */
/* unused harmony export JitCompiler */
/* unused harmony export DirectiveResolver */
/* unused harmony export PipeResolver */
/* unused harmony export NgModuleResolver */
/* unused harmony export DEFAULT_INTERPOLATION_CONFIG */
/* unused harmony export InterpolationConfig */
/* unused harmony export NgModuleCompiler */
/* unused harmony export AssertNotNull */
/* unused harmony export BinaryOperator */
/* unused harmony export BinaryOperatorExpr */
/* unused harmony export BuiltinMethod */
/* unused harmony export BuiltinVar */
/* unused harmony export CastExpr */
/* unused harmony export ClassStmt */
/* unused harmony export CommaExpr */
/* unused harmony export CommentStmt */
/* unused harmony export ConditionalExpr */
/* unused harmony export DeclareFunctionStmt */
/* unused harmony export DeclareVarStmt */
/* unused harmony export ExpressionStatement */
/* unused harmony export ExternalExpr */
/* unused harmony export ExternalReference */
/* unused harmony export FunctionExpr */
/* unused harmony export IfStmt */
/* unused harmony export InstantiateExpr */
/* unused harmony export InvokeFunctionExpr */
/* unused harmony export InvokeMethodExpr */
/* unused harmony export LiteralArrayExpr */
/* unused harmony export LiteralExpr */
/* unused harmony export LiteralMapExpr */
/* unused harmony export NotExpr */
/* unused harmony export ReadKeyExpr */
/* unused harmony export ReadPropExpr */
/* unused harmony export ReadVarExpr */
/* unused harmony export ReturnStatement */
/* unused harmony export ThrowStmt */
/* unused harmony export TryCatchStmt */
/* unused harmony export WriteKeyExpr */
/* unused harmony export WritePropExpr */
/* unused harmony export WriteVarExpr */
/* unused harmony export StmtModifier */
/* unused harmony export Statement */
/* unused harmony export EmitterVisitorContext */
/* unused harmony export ViewCompiler */
/* unused harmony export getParseErrors */
/* unused harmony export isSyntaxError */
/* unused harmony export syntaxError */
/* unused harmony export TextAst */
/* unused harmony export BoundTextAst */
/* unused harmony export AttrAst */
/* unused harmony export BoundElementPropertyAst */
/* unused harmony export BoundEventAst */
/* unused harmony export ReferenceAst */
/* unused harmony export VariableAst */
/* unused harmony export ElementAst */
/* unused harmony export EmbeddedTemplateAst */
/* unused harmony export BoundDirectivePropertyAst */
/* unused harmony export DirectiveAst */
/* unused harmony export ProviderAst */
/* unused harmony export ProviderAstType */
/* unused harmony export NgContentAst */
/* unused harmony export PropertyBindingType */
/* unused harmony export NullTemplateVisitor */
/* unused harmony export RecursiveTemplateAstVisitor */
/* unused harmony export templateVisitAll */
/* unused harmony export identifierName */
/* unused harmony export identifierModuleUrl */
/* unused harmony export viewClassName */
/* unused harmony export rendererTypeName */
/* unused harmony export hostViewClassName */
/* unused harmony export componentFactoryName */
/* unused harmony export CompileSummaryKind */
/* unused harmony export tokenName */
/* unused harmony export tokenReference */
/* unused harmony export CompileStylesheetMetadata */
/* unused harmony export CompileTemplateMetadata */
/* unused harmony export CompileDirectiveMetadata */
/* unused harmony export createHostComponentMeta */
/* unused harmony export CompilePipeMetadata */
/* unused harmony export CompileNgModuleMetadata */
/* unused harmony export TransitiveCompileNgModuleMetadata */
/* unused harmony export ProviderMeta */
/* unused harmony export flatten */
/* unused harmony export sourceUrl */
/* unused harmony export templateSourceUrl */
/* unused harmony export sharedStylesheetJitUrl */
/* unused harmony export ngModuleJitUrl */
/* unused harmony export templateJitUrl */
/* unused harmony export createAotCompiler */
/* unused harmony export AotCompiler */
/* unused harmony export analyzeNgModules */
/* unused harmony export analyzeAndValidateNgModules */
/* unused harmony export extractProgramSymbols */
/* unused harmony export GeneratedFile */
/* unused harmony export toTypeScript */
/* unused harmony export StaticReflector */
/* unused harmony export StaticSymbol */
/* unused harmony export StaticSymbolCache */
/* unused harmony export ResolvedStaticSymbol */
/* unused harmony export StaticSymbolResolver */
/* unused harmony export unescapeIdentifier */
/* unused harmony export AotSummaryResolver */
/* unused harmony export AstPath */
/* unused harmony export SummaryResolver */
/* unused harmony export JitSummaryResolver */
/* unused harmony export COMPILER_PROVIDERS */
/* unused harmony export JitCompilerFactory */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return platformCoreDynamic; });
/* unused harmony export JitReflector */
/* unused harmony export CompileReflector */
/* unused harmony export createUrlResolverWithoutPackagePrefix */
/* unused harmony export createOfflineCompileUrlResolver */
/* unused harmony export DEFAULT_PACKAGE_URL_PROVIDER */
/* unused harmony export UrlResolver */
/* unused harmony export getUrlScheme */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ResourceLoader; });
/* unused harmony export ElementSchemaRegistry */
/* unused harmony export Extractor */
/* unused harmony export I18NHtmlParser */
/* unused harmony export MessageBundle */
/* unused harmony export Serializer */
/* unused harmony export Xliff */
/* unused harmony export Xliff2 */
/* unused harmony export Xmb */
/* unused harmony export Xtb */
/* unused harmony export DirectiveNormalizer */
/* unused harmony export ParserError */
/* unused harmony export ParseSpan */
/* unused harmony export AST */
/* unused harmony export Quote */
/* unused harmony export EmptyExpr */
/* unused harmony export ImplicitReceiver */
/* unused harmony export Chain */
/* unused harmony export Conditional */
/* unused harmony export PropertyRead */
/* unused harmony export PropertyWrite */
/* unused harmony export SafePropertyRead */
/* unused harmony export KeyedRead */
/* unused harmony export KeyedWrite */
/* unused harmony export BindingPipe */
/* unused harmony export LiteralPrimitive */
/* unused harmony export LiteralArray */
/* unused harmony export LiteralMap */
/* unused harmony export Interpolation */
/* unused harmony export Binary */
/* unused harmony export PrefixNot */
/* unused harmony export NonNullAssert */
/* unused harmony export MethodCall */
/* unused harmony export SafeMethodCall */
/* unused harmony export FunctionCall */
/* unused harmony export ASTWithSource */
/* unused harmony export TemplateBinding */
/* unused harmony export NullAstVisitor */
/* unused harmony export RecursiveAstVisitor */
/* unused harmony export AstTransformer */
/* unused harmony export visitAstChildren */
/* unused harmony export TokenType */
/* unused harmony export Lexer */
/* unused harmony export Token */
/* unused harmony export EOF */
/* unused harmony export isIdentifier */
/* unused harmony export isQuote */
/* unused harmony export SplitInterpolation */
/* unused harmony export TemplateBindingParseResult */
/* unused harmony export Parser */
/* unused harmony export _ParseAST */
/* unused harmony export ERROR_COLLECTOR_TOKEN */
/* unused harmony export CompileMetadataResolver */
/* unused harmony export Text */
/* unused harmony export Expansion */
/* unused harmony export ExpansionCase */
/* unused harmony export Attribute */
/* unused harmony export Element */
/* unused harmony export Comment */
/* unused harmony export visitAll */
/* unused harmony export RecursiveVisitor */
/* unused harmony export findNode */
/* unused harmony export ParseTreeResult */
/* unused harmony export TreeError */
/* unused harmony export HtmlParser */
/* unused harmony export HtmlTagDefinition */
/* unused harmony export getHtmlTagDefinition */
/* unused harmony export TagContentType */
/* unused harmony export splitNsName */
/* unused harmony export isNgContainer */
/* unused harmony export isNgContent */
/* unused harmony export isNgTemplate */
/* unused harmony export getNsPrefix */
/* unused harmony export mergeNsAndName */
/* unused harmony export NAMED_ENTITIES */
/* unused harmony export NGSP_UNICODE */
/* unused harmony export debugOutputAstAsTypeScript */
/* unused harmony export TypeScriptEmitter */
/* unused harmony export ParseLocation */
/* unused harmony export ParseSourceFile */
/* unused harmony export ParseSourceSpan */
/* unused harmony export ParseErrorLevel */
/* unused harmony export ParseError */
/* unused harmony export typeSourceSpan */
/* unused harmony export DomElementSchemaRegistry */
/* unused harmony export CssSelector */
/* unused harmony export SelectorMatcher */
/* unused harmony export SelectorListContext */
/* unused harmony export SelectorContext */
/* unused harmony export StylesCompileDependency */
/* unused harmony export CompiledStylesheet */
/* unused harmony export StyleCompiler */
/* unused harmony export TemplateParseError */
/* unused harmony export TemplateParseResult */
/* unused harmony export TemplateParser */
/* unused harmony export splitClasses */
/* unused harmony export createElementCssSelector */
/* unused harmony export removeSummaryDuplicates */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__("../../../../tslib/tslib.es6.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__("../../../core/@angular/core.es5.js");

/**
 * @license Angular v4.4.5
 * (c) 2010-2017 Google, Inc. https://angular.io/
 * License: MIT
 */

/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all public APIs of the common package.
 */
/**
 * \@stable
 */
var VERSION = new __WEBPACK_IMPORTED_MODULE_1__angular_core__["_11" /* Version */]('4.4.5');
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A segment of text within the template.
 */
var TextAst = (function () {
    /**
     * @param {?} value
     * @param {?} ngContentIndex
     * @param {?} sourceSpan
     */
    function TextAst(value, ngContentIndex, sourceSpan) {
        this.value = value;
        this.ngContentIndex = ngContentIndex;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    TextAst.prototype.visit = function (visitor, context) { return visitor.visitText(this, context); };
    return TextAst;
}());
/**
 * A bound expression within the text of a template.
 */
var BoundTextAst = (function () {
    /**
     * @param {?} value
     * @param {?} ngContentIndex
     * @param {?} sourceSpan
     */
    function BoundTextAst(value, ngContentIndex, sourceSpan) {
        this.value = value;
        this.ngContentIndex = ngContentIndex;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    BoundTextAst.prototype.visit = function (visitor, context) {
        return visitor.visitBoundText(this, context);
    };
    return BoundTextAst;
}());
/**
 * A plain attribute on an element.
 */
var AttrAst = (function () {
    /**
     * @param {?} name
     * @param {?} value
     * @param {?} sourceSpan
     */
    function AttrAst(name, value, sourceSpan) {
        this.name = name;
        this.value = value;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    AttrAst.prototype.visit = function (visitor, context) { return visitor.visitAttr(this, context); };
    return AttrAst;
}());
/**
 * A binding for an element property (e.g. `[property]="expression"`) or an animation trigger (e.g.
 * `[\@trigger]="stateExp"`)
 */
var BoundElementPropertyAst = (function () {
    /**
     * @param {?} name
     * @param {?} type
     * @param {?} securityContext
     * @param {?} value
     * @param {?} unit
     * @param {?} sourceSpan
     */
    function BoundElementPropertyAst(name, type, securityContext, value, unit, sourceSpan) {
        this.name = name;
        this.type = type;
        this.securityContext = securityContext;
        this.value = value;
        this.unit = unit;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    BoundElementPropertyAst.prototype.visit = function (visitor, context) {
        return visitor.visitElementProperty(this, context);
    };
    Object.defineProperty(BoundElementPropertyAst.prototype, "isAnimation", {
        /**
         * @return {?}
         */
        get: function () { return this.type === PropertyBindingType.Animation; },
        enumerable: true,
        configurable: true
    });
    return BoundElementPropertyAst;
}());
/**
 * A binding for an element event (e.g. `(event)="handler()"`) or an animation trigger event (e.g.
 * `(\@trigger.phase)="callback($event)"`).
 */
var BoundEventAst = (function () {
    /**
     * @param {?} name
     * @param {?} target
     * @param {?} phase
     * @param {?} handler
     * @param {?} sourceSpan
     */
    function BoundEventAst(name, target, phase, handler, sourceSpan) {
        this.name = name;
        this.target = target;
        this.phase = phase;
        this.handler = handler;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} name
     * @param {?} target
     * @param {?} phase
     * @return {?}
     */
    BoundEventAst.calcFullName = function (name, target, phase) {
        if (target) {
            return target + ":" + name;
        }
        else if (phase) {
            return "@" + name + "." + phase;
        }
        else {
            return name;
        }
    };
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    BoundEventAst.prototype.visit = function (visitor, context) {
        return visitor.visitEvent(this, context);
    };
    Object.defineProperty(BoundEventAst.prototype, "fullName", {
        /**
         * @return {?}
         */
        get: function () { return BoundEventAst.calcFullName(this.name, this.target, this.phase); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BoundEventAst.prototype, "isAnimation", {
        /**
         * @return {?}
         */
        get: function () { return !!this.phase; },
        enumerable: true,
        configurable: true
    });
    return BoundEventAst;
}());
/**
 * A reference declaration on an element (e.g. `let someName="expression"`).
 */
var ReferenceAst = (function () {
    /**
     * @param {?} name
     * @param {?} value
     * @param {?} sourceSpan
     */
    function ReferenceAst(name, value, sourceSpan) {
        this.name = name;
        this.value = value;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ReferenceAst.prototype.visit = function (visitor, context) {
        return visitor.visitReference(this, context);
    };
    return ReferenceAst;
}());
/**
 * A variable declaration on a <ng-template> (e.g. `var-someName="someLocalName"`).
 */
var VariableAst = (function () {
    /**
     * @param {?} name
     * @param {?} value
     * @param {?} sourceSpan
     */
    function VariableAst(name, value, sourceSpan) {
        this.name = name;
        this.value = value;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    VariableAst.prototype.visit = function (visitor, context) {
        return visitor.visitVariable(this, context);
    };
    return VariableAst;
}());
/**
 * An element declaration in a template.
 */
var ElementAst = (function () {
    /**
     * @param {?} name
     * @param {?} attrs
     * @param {?} inputs
     * @param {?} outputs
     * @param {?} references
     * @param {?} directives
     * @param {?} providers
     * @param {?} hasViewContainer
     * @param {?} queryMatches
     * @param {?} children
     * @param {?} ngContentIndex
     * @param {?} sourceSpan
     * @param {?} endSourceSpan
     */
    function ElementAst(name, attrs, inputs, outputs, references, directives, providers, hasViewContainer, queryMatches, children, ngContentIndex, sourceSpan, endSourceSpan) {
        this.name = name;
        this.attrs = attrs;
        this.inputs = inputs;
        this.outputs = outputs;
        this.references = references;
        this.directives = directives;
        this.providers = providers;
        this.hasViewContainer = hasViewContainer;
        this.queryMatches = queryMatches;
        this.children = children;
        this.ngContentIndex = ngContentIndex;
        this.sourceSpan = sourceSpan;
        this.endSourceSpan = endSourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ElementAst.prototype.visit = function (visitor, context) {
        return visitor.visitElement(this, context);
    };
    return ElementAst;
}());
/**
 * A `<ng-template>` element included in an Angular template.
 */
var EmbeddedTemplateAst = (function () {
    /**
     * @param {?} attrs
     * @param {?} outputs
     * @param {?} references
     * @param {?} variables
     * @param {?} directives
     * @param {?} providers
     * @param {?} hasViewContainer
     * @param {?} queryMatches
     * @param {?} children
     * @param {?} ngContentIndex
     * @param {?} sourceSpan
     */
    function EmbeddedTemplateAst(attrs, outputs, references, variables, directives, providers, hasViewContainer, queryMatches, children, ngContentIndex, sourceSpan) {
        this.attrs = attrs;
        this.outputs = outputs;
        this.references = references;
        this.variables = variables;
        this.directives = directives;
        this.providers = providers;
        this.hasViewContainer = hasViewContainer;
        this.queryMatches = queryMatches;
        this.children = children;
        this.ngContentIndex = ngContentIndex;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    EmbeddedTemplateAst.prototype.visit = function (visitor, context) {
        return visitor.visitEmbeddedTemplate(this, context);
    };
    return EmbeddedTemplateAst;
}());
/**
 * A directive property with a bound value (e.g. `*ngIf="condition").
 */
var BoundDirectivePropertyAst = (function () {
    /**
     * @param {?} directiveName
     * @param {?} templateName
     * @param {?} value
     * @param {?} sourceSpan
     */
    function BoundDirectivePropertyAst(directiveName, templateName, value, sourceSpan) {
        this.directiveName = directiveName;
        this.templateName = templateName;
        this.value = value;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    BoundDirectivePropertyAst.prototype.visit = function (visitor, context) {
        return visitor.visitDirectiveProperty(this, context);
    };
    return BoundDirectivePropertyAst;
}());
/**
 * A directive declared on an element.
 */
var DirectiveAst = (function () {
    /**
     * @param {?} directive
     * @param {?} inputs
     * @param {?} hostProperties
     * @param {?} hostEvents
     * @param {?} contentQueryStartId
     * @param {?} sourceSpan
     */
    function DirectiveAst(directive, inputs, hostProperties, hostEvents, contentQueryStartId, sourceSpan) {
        this.directive = directive;
        this.inputs = inputs;
        this.hostProperties = hostProperties;
        this.hostEvents = hostEvents;
        this.contentQueryStartId = contentQueryStartId;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    DirectiveAst.prototype.visit = function (visitor, context) {
        return visitor.visitDirective(this, context);
    };
    return DirectiveAst;
}());
/**
 * A provider declared on an element
 */
var ProviderAst = (function () {
    /**
     * @param {?} token
     * @param {?} multiProvider
     * @param {?} eager
     * @param {?} providers
     * @param {?} providerType
     * @param {?} lifecycleHooks
     * @param {?} sourceSpan
     */
    function ProviderAst(token, multiProvider, eager, providers, providerType, lifecycleHooks, sourceSpan) {
        this.token = token;
        this.multiProvider = multiProvider;
        this.eager = eager;
        this.providers = providers;
        this.providerType = providerType;
        this.lifecycleHooks = lifecycleHooks;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ProviderAst.prototype.visit = function (visitor, context) {
        // No visit method in the visitor for now...
        return null;
    };
    return ProviderAst;
}());
var ProviderAstType = {};
ProviderAstType.PublicService = 0;
ProviderAstType.PrivateService = 1;
ProviderAstType.Component = 2;
ProviderAstType.Directive = 3;
ProviderAstType.Builtin = 4;
ProviderAstType[ProviderAstType.PublicService] = "PublicService";
ProviderAstType[ProviderAstType.PrivateService] = "PrivateService";
ProviderAstType[ProviderAstType.Component] = "Component";
ProviderAstType[ProviderAstType.Directive] = "Directive";
ProviderAstType[ProviderAstType.Builtin] = "Builtin";
/**
 * Position where content is to be projected (instance of `<ng-content>` in a template).
 */
var NgContentAst = (function () {
    /**
     * @param {?} index
     * @param {?} ngContentIndex
     * @param {?} sourceSpan
     */
    function NgContentAst(index, ngContentIndex, sourceSpan) {
        this.index = index;
        this.ngContentIndex = ngContentIndex;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    NgContentAst.prototype.visit = function (visitor, context) {
        return visitor.visitNgContent(this, context);
    };
    return NgContentAst;
}());
var PropertyBindingType = {};
PropertyBindingType.Property = 0;
PropertyBindingType.Attribute = 1;
PropertyBindingType.Class = 2;
PropertyBindingType.Style = 3;
PropertyBindingType.Animation = 4;
PropertyBindingType[PropertyBindingType.Property] = "Property";
PropertyBindingType[PropertyBindingType.Attribute] = "Attribute";
PropertyBindingType[PropertyBindingType.Class] = "Class";
PropertyBindingType[PropertyBindingType.Style] = "Style";
PropertyBindingType[PropertyBindingType.Animation] = "Animation";
/**
 * A visitor that accepts each node but doesn't do anything. It is intended to be used
 * as the base class for a visitor that is only interested in a subset of the node types.
 */
var NullTemplateVisitor = (function () {
    function NullTemplateVisitor() {
    }
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullTemplateVisitor.prototype.visitNgContent = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullTemplateVisitor.prototype.visitEmbeddedTemplate = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullTemplateVisitor.prototype.visitElement = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullTemplateVisitor.prototype.visitReference = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullTemplateVisitor.prototype.visitVariable = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullTemplateVisitor.prototype.visitEvent = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullTemplateVisitor.prototype.visitElementProperty = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullTemplateVisitor.prototype.visitAttr = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullTemplateVisitor.prototype.visitBoundText = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullTemplateVisitor.prototype.visitText = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullTemplateVisitor.prototype.visitDirective = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullTemplateVisitor.prototype.visitDirectiveProperty = function (ast, context) { };
    return NullTemplateVisitor;
}());
/**
 * Base class that can be used to build a visitor that visits each node
 * in an template ast recursively.
 */
var RecursiveTemplateAstVisitor = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](RecursiveTemplateAstVisitor, _super);
    function RecursiveTemplateAstVisitor() {
        return _super.call(this) || this;
    }
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveTemplateAstVisitor.prototype.visitEmbeddedTemplate = function (ast, context) {
        return this.visitChildren(context, function (visit) {
            visit(ast.attrs);
            visit(ast.references);
            visit(ast.variables);
            visit(ast.directives);
            visit(ast.providers);
            visit(ast.children);
        });
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveTemplateAstVisitor.prototype.visitElement = function (ast, context) {
        return this.visitChildren(context, function (visit) {
            visit(ast.attrs);
            visit(ast.inputs);
            visit(ast.outputs);
            visit(ast.references);
            visit(ast.directives);
            visit(ast.providers);
            visit(ast.children);
        });
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveTemplateAstVisitor.prototype.visitDirective = function (ast, context) {
        return this.visitChildren(context, function (visit) {
            visit(ast.inputs);
            visit(ast.hostProperties);
            visit(ast.hostEvents);
        });
    };
    /**
     * @template T
     * @param {?} context
     * @param {?} cb
     * @return {?}
     */
    RecursiveTemplateAstVisitor.prototype.visitChildren = function (context, cb) {
        var /** @type {?} */ results = [];
        var /** @type {?} */ t = this;
        /**
         * @template T
         * @param {?} children
         * @return {?}
         */
        function visit(children) {
            if (children && children.length)
                results.push(templateVisitAll(t, children, context));
        }
        cb(visit);
        return [].concat.apply([], results);
    };
    return RecursiveTemplateAstVisitor;
}(NullTemplateVisitor));
/**
 * Visit every node in a list of {\@link TemplateAst}s with the given {\@link TemplateAstVisitor}.
 * @param {?} visitor
 * @param {?} asts
 * @param {?=} context
 * @return {?}
 */
function templateVisitAll(visitor, asts, context) {
    if (context === void 0) { context = null; }
    var /** @type {?} */ result = [];
    var /** @type {?} */ visit = visitor.visit ?
        function (ast) { return ((visitor.visit))(ast, context) || ast.visit(visitor, context); } :
        function (ast) { return ast.visit(visitor, context); };
    asts.forEach(function (ast) {
        var /** @type {?} */ astResult = visit(ast);
        if (astResult) {
            result.push(astResult);
        }
    });
    return result;
}
/**
 * A token representing the a reference to a static type.
 *
 * This token is unique for a filePath and name and can be used as a hash table key.
 */
var StaticSymbol = (function () {
    /**
     * @param {?} filePath
     * @param {?} name
     * @param {?} members
     */
    function StaticSymbol(filePath, name, members) {
        this.filePath = filePath;
        this.name = name;
        this.members = members;
    }
    /**
     * @return {?}
     */
    StaticSymbol.prototype.assertNoMembers = function () {
        if (this.members.length) {
            throw new Error("Illegal state: symbol without members expected, but got " + JSON.stringify(this) + ".");
        }
    };
    return StaticSymbol;
}());
/**
 * A cache of static symbol used by the StaticReflector to return the same symbol for the
 * same symbol values.
 */
var StaticSymbolCache = (function () {
    function StaticSymbolCache() {
        this.cache = new Map();
    }
    /**
     * @param {?} declarationFile
     * @param {?} name
     * @param {?=} members
     * @return {?}
     */
    StaticSymbolCache.prototype.get = function (declarationFile, name, members) {
        members = members || [];
        var /** @type {?} */ memberSuffix = members.length ? "." + members.join('.') : '';
        var /** @type {?} */ key = "\"" + declarationFile + "\"." + name + memberSuffix;
        var /** @type {?} */ result = this.cache.get(key);
        if (!result) {
            result = new StaticSymbol(declarationFile, name, members);
            this.cache.set(key, result);
        }
        return result;
    };
    return StaticSymbolCache;
}());
var TagContentType = {};
TagContentType.RAW_TEXT = 0;
TagContentType.ESCAPABLE_RAW_TEXT = 1;
TagContentType.PARSABLE_DATA = 2;
TagContentType[TagContentType.RAW_TEXT] = "RAW_TEXT";
TagContentType[TagContentType.ESCAPABLE_RAW_TEXT] = "ESCAPABLE_RAW_TEXT";
TagContentType[TagContentType.PARSABLE_DATA] = "PARSABLE_DATA";
/**
 * @param {?} elementName
 * @return {?}
 */
function splitNsName(elementName) {
    if (elementName[0] != ':') {
        return [null, elementName];
    }
    var /** @type {?} */ colonIndex = elementName.indexOf(':', 1);
    if (colonIndex == -1) {
        throw new Error("Unsupported format \"" + elementName + "\" expecting \":namespace:name\"");
    }
    return [elementName.slice(1, colonIndex), elementName.slice(colonIndex + 1)];
}
/**
 * @param {?} tagName
 * @return {?}
 */
function isNgContainer(tagName) {
    return splitNsName(tagName)[1] === 'ng-container';
}
/**
 * @param {?} tagName
 * @return {?}
 */
function isNgContent(tagName) {
    return splitNsName(tagName)[1] === 'ng-content';
}
/**
 * @param {?} tagName
 * @return {?}
 */
function isNgTemplate(tagName) {
    return splitNsName(tagName)[1] === 'ng-template';
}
/**
 * @param {?} fullName
 * @return {?}
 */
function getNsPrefix(fullName) {
    return fullName === null ? null : splitNsName(fullName)[0];
}
/**
 * @param {?} prefix
 * @param {?} localName
 * @return {?}
 */
function mergeNsAndName(prefix, localName) {
    return prefix ? ":" + prefix + ":" + localName : localName;
}
// see http://www.w3.org/TR/html51/syntax.html#named-character-references
// see https://html.spec.whatwg.org/multipage/entities.json
// This list is not exhaustive to keep the compiler footprint low.
// The `&#123;` / `&#x1ab;` syntax should be used when the named character reference does not
// exist.
var NAMED_ENTITIES = {
    'Aacute': '\u00C1',
    'aacute': '\u00E1',
    'Acirc': '\u00C2',
    'acirc': '\u00E2',
    'acute': '\u00B4',
    'AElig': '\u00C6',
    'aelig': '\u00E6',
    'Agrave': '\u00C0',
    'agrave': '\u00E0',
    'alefsym': '\u2135',
    'Alpha': '\u0391',
    'alpha': '\u03B1',
    'amp': '&',
    'and': '\u2227',
    'ang': '\u2220',
    'apos': '\u0027',
    'Aring': '\u00C5',
    'aring': '\u00E5',
    'asymp': '\u2248',
    'Atilde': '\u00C3',
    'atilde': '\u00E3',
    'Auml': '\u00C4',
    'auml': '\u00E4',
    'bdquo': '\u201E',
    'Beta': '\u0392',
    'beta': '\u03B2',
    'brvbar': '\u00A6',
    'bull': '\u2022',
    'cap': '\u2229',
    'Ccedil': '\u00C7',
    'ccedil': '\u00E7',
    'cedil': '\u00B8',
    'cent': '\u00A2',
    'Chi': '\u03A7',
    'chi': '\u03C7',
    'circ': '\u02C6',
    'clubs': '\u2663',
    'cong': '\u2245',
    'copy': '\u00A9',
    'crarr': '\u21B5',
    'cup': '\u222A',
    'curren': '\u00A4',
    'dagger': '\u2020',
    'Dagger': '\u2021',
    'darr': '\u2193',
    'dArr': '\u21D3',
    'deg': '\u00B0',
    'Delta': '\u0394',
    'delta': '\u03B4',
    'diams': '\u2666',
    'divide': '\u00F7',
    'Eacute': '\u00C9',
    'eacute': '\u00E9',
    'Ecirc': '\u00CA',
    'ecirc': '\u00EA',
    'Egrave': '\u00C8',
    'egrave': '\u00E8',
    'empty': '\u2205',
    'emsp': '\u2003',
    'ensp': '\u2002',
    'Epsilon': '\u0395',
    'epsilon': '\u03B5',
    'equiv': '\u2261',
    'Eta': '\u0397',
    'eta': '\u03B7',
    'ETH': '\u00D0',
    'eth': '\u00F0',
    'Euml': '\u00CB',
    'euml': '\u00EB',
    'euro': '\u20AC',
    'exist': '\u2203',
    'fnof': '\u0192',
    'forall': '\u2200',
    'frac12': '\u00BD',
    'frac14': '\u00BC',
    'frac34': '\u00BE',
    'frasl': '\u2044',
    'Gamma': '\u0393',
    'gamma': '\u03B3',
    'ge': '\u2265',
    'gt': '>',
    'harr': '\u2194',
    'hArr': '\u21D4',
    'hearts': '\u2665',
    'hellip': '\u2026',
    'Iacute': '\u00CD',
    'iacute': '\u00ED',
    'Icirc': '\u00CE',
    'icirc': '\u00EE',
    'iexcl': '\u00A1',
    'Igrave': '\u00CC',
    'igrave': '\u00EC',
    'image': '\u2111',
    'infin': '\u221E',
    'int': '\u222B',
    'Iota': '\u0399',
    'iota': '\u03B9',
    'iquest': '\u00BF',
    'isin': '\u2208',
    'Iuml': '\u00CF',
    'iuml': '\u00EF',
    'Kappa': '\u039A',
    'kappa': '\u03BA',
    'Lambda': '\u039B',
    'lambda': '\u03BB',
    'lang': '\u27E8',
    'laquo': '\u00AB',
    'larr': '\u2190',
    'lArr': '\u21D0',
    'lceil': '\u2308',
    'ldquo': '\u201C',
    'le': '\u2264',
    'lfloor': '\u230A',
    'lowast': '\u2217',
    'loz': '\u25CA',
    'lrm': '\u200E',
    'lsaquo': '\u2039',
    'lsquo': '\u2018',
    'lt': '<',
    'macr': '\u00AF',
    'mdash': '\u2014',
    'micro': '\u00B5',
    'middot': '\u00B7',
    'minus': '\u2212',
    'Mu': '\u039C',
    'mu': '\u03BC',
    'nabla': '\u2207',
    'nbsp': '\u00A0',
    'ndash': '\u2013',
    'ne': '\u2260',
    'ni': '\u220B',
    'not': '\u00AC',
    'notin': '\u2209',
    'nsub': '\u2284',
    'Ntilde': '\u00D1',
    'ntilde': '\u00F1',
    'Nu': '\u039D',
    'nu': '\u03BD',
    'Oacute': '\u00D3',
    'oacute': '\u00F3',
    'Ocirc': '\u00D4',
    'ocirc': '\u00F4',
    'OElig': '\u0152',
    'oelig': '\u0153',
    'Ograve': '\u00D2',
    'ograve': '\u00F2',
    'oline': '\u203E',
    'Omega': '\u03A9',
    'omega': '\u03C9',
    'Omicron': '\u039F',
    'omicron': '\u03BF',
    'oplus': '\u2295',
    'or': '\u2228',
    'ordf': '\u00AA',
    'ordm': '\u00BA',
    'Oslash': '\u00D8',
    'oslash': '\u00F8',
    'Otilde': '\u00D5',
    'otilde': '\u00F5',
    'otimes': '\u2297',
    'Ouml': '\u00D6',
    'ouml': '\u00F6',
    'para': '\u00B6',
    'permil': '\u2030',
    'perp': '\u22A5',
    'Phi': '\u03A6',
    'phi': '\u03C6',
    'Pi': '\u03A0',
    'pi': '\u03C0',
    'piv': '\u03D6',
    'plusmn': '\u00B1',
    'pound': '\u00A3',
    'prime': '\u2032',
    'Prime': '\u2033',
    'prod': '\u220F',
    'prop': '\u221D',
    'Psi': '\u03A8',
    'psi': '\u03C8',
    'quot': '\u0022',
    'radic': '\u221A',
    'rang': '\u27E9',
    'raquo': '\u00BB',
    'rarr': '\u2192',
    'rArr': '\u21D2',
    'rceil': '\u2309',
    'rdquo': '\u201D',
    'real': '\u211C',
    'reg': '\u00AE',
    'rfloor': '\u230B',
    'Rho': '\u03A1',
    'rho': '\u03C1',
    'rlm': '\u200F',
    'rsaquo': '\u203A',
    'rsquo': '\u2019',
    'sbquo': '\u201A',
    'Scaron': '\u0160',
    'scaron': '\u0161',
    'sdot': '\u22C5',
    'sect': '\u00A7',
    'shy': '\u00AD',
    'Sigma': '\u03A3',
    'sigma': '\u03C3',
    'sigmaf': '\u03C2',
    'sim': '\u223C',
    'spades': '\u2660',
    'sub': '\u2282',
    'sube': '\u2286',
    'sum': '\u2211',
    'sup': '\u2283',
    'sup1': '\u00B9',
    'sup2': '\u00B2',
    'sup3': '\u00B3',
    'supe': '\u2287',
    'szlig': '\u00DF',
    'Tau': '\u03A4',
    'tau': '\u03C4',
    'there4': '\u2234',
    'Theta': '\u0398',
    'theta': '\u03B8',
    'thetasym': '\u03D1',
    'thinsp': '\u2009',
    'THORN': '\u00DE',
    'thorn': '\u00FE',
    'tilde': '\u02DC',
    'times': '\u00D7',
    'trade': '\u2122',
    'Uacute': '\u00DA',
    'uacute': '\u00FA',
    'uarr': '\u2191',
    'uArr': '\u21D1',
    'Ucirc': '\u00DB',
    'ucirc': '\u00FB',
    'Ugrave': '\u00D9',
    'ugrave': '\u00F9',
    'uml': '\u00A8',
    'upsih': '\u03D2',
    'Upsilon': '\u03A5',
    'upsilon': '\u03C5',
    'Uuml': '\u00DC',
    'uuml': '\u00FC',
    'weierp': '\u2118',
    'Xi': '\u039E',
    'xi': '\u03BE',
    'Yacute': '\u00DD',
    'yacute': '\u00FD',
    'yen': '\u00A5',
    'yuml': '\u00FF',
    'Yuml': '\u0178',
    'Zeta': '\u0396',
    'zeta': '\u03B6',
    'zwj': '\u200D',
    'zwnj': '\u200C',
};
// The &ngsp; pseudo-entity is denoting a space. see:
// https://github.com/dart-lang/angular/blob/0bb611387d29d65b5af7f9d2515ab571fd3fbee4/_tests/test/compiler/preserve_whitespace_test.dart
var NGSP_UNICODE = '\uE500';
NAMED_ENTITIES['ngsp'] = NGSP_UNICODE;
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var HtmlTagDefinition = (function () {
    /**
     * @param {?=} __0
     */
    function HtmlTagDefinition(_a) {
        var _b = _a === void 0 ? {} : _a, closedByChildren = _b.closedByChildren, requiredParents = _b.requiredParents, implicitNamespacePrefix = _b.implicitNamespacePrefix, _c = _b.contentType, contentType = _c === void 0 ? TagContentType.PARSABLE_DATA : _c, _d = _b.closedByParent, closedByParent = _d === void 0 ? false : _d, _e = _b.isVoid, isVoid = _e === void 0 ? false : _e, _f = _b.ignoreFirstLf, ignoreFirstLf = _f === void 0 ? false : _f;
        var _this = this;
        this.closedByChildren = {};
        this.closedByParent = false;
        this.canSelfClose = false;
        if (closedByChildren && closedByChildren.length > 0) {
            closedByChildren.forEach(function (tagName) { return _this.closedByChildren[tagName] = true; });
        }
        this.isVoid = isVoid;
        this.closedByParent = closedByParent || isVoid;
        if (requiredParents && requiredParents.length > 0) {
            this.requiredParents = {};
            // The first parent is the list is automatically when none of the listed parents are present
            this.parentToAdd = requiredParents[0];
            requiredParents.forEach(function (tagName) { return _this.requiredParents[tagName] = true; });
        }
        this.implicitNamespacePrefix = implicitNamespacePrefix || null;
        this.contentType = contentType;
        this.ignoreFirstLf = ignoreFirstLf;
    }
    /**
     * @param {?} currentParent
     * @return {?}
     */
    HtmlTagDefinition.prototype.requireExtraParent = function (currentParent) {
        if (!this.requiredParents) {
            return false;
        }
        if (!currentParent) {
            return true;
        }
        var /** @type {?} */ lcParent = currentParent.toLowerCase();
        var /** @type {?} */ isParentTemplate = lcParent === 'template' || currentParent === 'ng-template';
        return !isParentTemplate && this.requiredParents[lcParent] != true;
    };
    /**
     * @param {?} name
     * @return {?}
     */
    HtmlTagDefinition.prototype.isClosedByChild = function (name) {
        return this.isVoid || name.toLowerCase() in this.closedByChildren;
    };
    return HtmlTagDefinition;
}());
// see http://www.w3.org/TR/html51/syntax.html#optional-tags
// This implementation does not fully conform to the HTML5 spec.
var TAG_DEFINITIONS = {
    'base': new HtmlTagDefinition({ isVoid: true }),
    'meta': new HtmlTagDefinition({ isVoid: true }),
    'area': new HtmlTagDefinition({ isVoid: true }),
    'embed': new HtmlTagDefinition({ isVoid: true }),
    'link': new HtmlTagDefinition({ isVoid: true }),
    'img': new HtmlTagDefinition({ isVoid: true }),
    'input': new HtmlTagDefinition({ isVoid: true }),
    'param': new HtmlTagDefinition({ isVoid: true }),
    'hr': new HtmlTagDefinition({ isVoid: true }),
    'br': new HtmlTagDefinition({ isVoid: true }),
    'source': new HtmlTagDefinition({ isVoid: true }),
    'track': new HtmlTagDefinition({ isVoid: true }),
    'wbr': new HtmlTagDefinition({ isVoid: true }),
    'p': new HtmlTagDefinition({
        closedByChildren: [
            'address', 'article', 'aside', 'blockquote', 'div', 'dl', 'fieldset', 'footer', 'form',
            'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'hgroup', 'hr',
            'main', 'nav', 'ol', 'p', 'pre', 'section', 'table', 'ul'
        ],
        closedByParent: true
    }),
    'thead': new HtmlTagDefinition({ closedByChildren: ['tbody', 'tfoot'] }),
    'tbody': new HtmlTagDefinition({ closedByChildren: ['tbody', 'tfoot'], closedByParent: true }),
    'tfoot': new HtmlTagDefinition({ closedByChildren: ['tbody'], closedByParent: true }),
    'tr': new HtmlTagDefinition({
        closedByChildren: ['tr'],
        requiredParents: ['tbody', 'tfoot', 'thead'],
        closedByParent: true
    }),
    'td': new HtmlTagDefinition({ closedByChildren: ['td', 'th'], closedByParent: true }),
    'th': new HtmlTagDefinition({ closedByChildren: ['td', 'th'], closedByParent: true }),
    'col': new HtmlTagDefinition({ requiredParents: ['colgroup'], isVoid: true }),
    'svg': new HtmlTagDefinition({ implicitNamespacePrefix: 'svg' }),
    'math': new HtmlTagDefinition({ implicitNamespacePrefix: 'math' }),
    'li': new HtmlTagDefinition({ closedByChildren: ['li'], closedByParent: true }),
    'dt': new HtmlTagDefinition({ closedByChildren: ['dt', 'dd'] }),
    'dd': new HtmlTagDefinition({ closedByChildren: ['dt', 'dd'], closedByParent: true }),
    'rb': new HtmlTagDefinition({ closedByChildren: ['rb', 'rt', 'rtc', 'rp'], closedByParent: true }),
    'rt': new HtmlTagDefinition({ closedByChildren: ['rb', 'rt', 'rtc', 'rp'], closedByParent: true }),
    'rtc': new HtmlTagDefinition({ closedByChildren: ['rb', 'rtc', 'rp'], closedByParent: true }),
    'rp': new HtmlTagDefinition({ closedByChildren: ['rb', 'rt', 'rtc', 'rp'], closedByParent: true }),
    'optgroup': new HtmlTagDefinition({ closedByChildren: ['optgroup'], closedByParent: true }),
    'option': new HtmlTagDefinition({ closedByChildren: ['option', 'optgroup'], closedByParent: true }),
    'pre': new HtmlTagDefinition({ ignoreFirstLf: true }),
    'listing': new HtmlTagDefinition({ ignoreFirstLf: true }),
    'style': new HtmlTagDefinition({ contentType: TagContentType.RAW_TEXT }),
    'script': new HtmlTagDefinition({ contentType: TagContentType.RAW_TEXT }),
    'title': new HtmlTagDefinition({ contentType: TagContentType.ESCAPABLE_RAW_TEXT }),
    'textarea': new HtmlTagDefinition({ contentType: TagContentType.ESCAPABLE_RAW_TEXT, ignoreFirstLf: true }),
};
var _DEFAULT_TAG_DEFINITION = new HtmlTagDefinition();
/**
 * @param {?} tagName
 * @return {?}
 */
function getHtmlTagDefinition(tagName) {
    return TAG_DEFINITIONS[tagName.toLowerCase()] || _DEFAULT_TAG_DEFINITION;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _SELECTOR_REGEXP = new RegExp('(\\:not\\()|' +
    '([-\\w]+)|' +
    '(?:\\.([-\\w]+))|' +
    // "-" should appear first in the regexp below as FF31 parses "[.-\w]" as a range
    '(?:\\[([-.\\w*]+)(?:=([\"\']?)([^\\]\"\']*)\\5)?\\])|' +
    // "[name="value"]",
    // "[name='value']"
    '(\\))|' +
    '(\\s*,\\s*)', // ","
'g');
/**
 * A css selector contains an element name,
 * css classes and attribute/value pairs with the purpose
 * of selecting subsets out of them.
 */
var CssSelector = (function () {
    function CssSelector() {
        this.element = null;
        this.classNames = [];
        this.attrs = [];
        this.notSelectors = [];
    }
    /**
     * @param {?} selector
     * @return {?}
     */
    CssSelector.parse = function (selector) {
        var /** @type {?} */ results = [];
        var /** @type {?} */ _addResult = function (res, cssSel) {
            if (cssSel.notSelectors.length > 0 && !cssSel.element && cssSel.classNames.length == 0 &&
                cssSel.attrs.length == 0) {
                cssSel.element = '*';
            }
            res.push(cssSel);
        };
        var /** @type {?} */ cssSelector = new CssSelector();
        var /** @type {?} */ match;
        var /** @type {?} */ current = cssSelector;
        var /** @type {?} */ inNot = false;
        _SELECTOR_REGEXP.lastIndex = 0;
        while (match = _SELECTOR_REGEXP.exec(selector)) {
            if (match[1]) {
                if (inNot) {
                    throw new Error('Nesting :not is not allowed in a selector');
                }
                inNot = true;
                current = new CssSelector();
                cssSelector.notSelectors.push(current);
            }
            if (match[2]) {
                current.setElement(match[2]);
            }
            if (match[3]) {
                current.addClassName(match[3]);
            }
            if (match[4]) {
                current.addAttribute(match[4], match[6]);
            }
            if (match[7]) {
                inNot = false;
                current = cssSelector;
            }
            if (match[8]) {
                if (inNot) {
                    throw new Error('Multiple selectors in :not are not supported');
                }
                _addResult(results, cssSelector);
                cssSelector = current = new CssSelector();
            }
        }
        _addResult(results, cssSelector);
        return results;
    };
    /**
     * @return {?}
     */
    CssSelector.prototype.isElementSelector = function () {
        return this.hasElementSelector() && this.classNames.length == 0 && this.attrs.length == 0 &&
            this.notSelectors.length === 0;
    };
    /**
     * @return {?}
     */
    CssSelector.prototype.hasElementSelector = function () { return !!this.element; };
    /**
     * @param {?=} element
     * @return {?}
     */
    CssSelector.prototype.setElement = function (element) {
        if (element === void 0) { element = null; }
        this.element = element;
    };
    /**
     * Gets a template string for an element that matches the selector.
     * @return {?}
     */
    CssSelector.prototype.getMatchingElementTemplate = function () {
        var /** @type {?} */ tagName = this.element || 'div';
        var /** @type {?} */ classAttr = this.classNames.length > 0 ? " class=\"" + this.classNames.join(' ') + "\"" : '';
        var /** @type {?} */ attrs = '';
        for (var /** @type {?} */ i = 0; i < this.attrs.length; i += 2) {
            var /** @type {?} */ attrName = this.attrs[i];
            var /** @type {?} */ attrValue = this.attrs[i + 1] !== '' ? "=\"" + this.attrs[i + 1] + "\"" : '';
            attrs += " " + attrName + attrValue;
        }
        return getHtmlTagDefinition(tagName).isVoid ? "<" + tagName + classAttr + attrs + "/>" :
            "<" + tagName + classAttr + attrs + "></" + tagName + ">";
    };
    /**
     * @param {?} name
     * @param {?=} value
     * @return {?}
     */
    CssSelector.prototype.addAttribute = function (name, value) {
        if (value === void 0) { value = ''; }
        this.attrs.push(name, value && value.toLowerCase() || '');
    };
    /**
     * @param {?} name
     * @return {?}
     */
    CssSelector.prototype.addClassName = function (name) { this.classNames.push(name.toLowerCase()); };
    /**
     * @return {?}
     */
    CssSelector.prototype.toString = function () {
        var /** @type {?} */ res = this.element || '';
        if (this.classNames) {
            this.classNames.forEach(function (klass) { return res += "." + klass; });
        }
        if (this.attrs) {
            for (var /** @type {?} */ i = 0; i < this.attrs.length; i += 2) {
                var /** @type {?} */ name = this.attrs[i];
                var /** @type {?} */ value = this.attrs[i + 1];
                res += "[" + name + (value ? '=' + value : '') + "]";
            }
        }
        this.notSelectors.forEach(function (notSelector) { return res += ":not(" + notSelector + ")"; });
        return res;
    };
    return CssSelector;
}());
/**
 * Reads a list of CssSelectors and allows to calculate which ones
 * are contained in a given CssSelector.
 */
var SelectorMatcher = (function () {
    function SelectorMatcher() {
        this._elementMap = new Map();
        this._elementPartialMap = new Map();
        this._classMap = new Map();
        this._classPartialMap = new Map();
        this._attrValueMap = new Map();
        this._attrValuePartialMap = new Map();
        this._listContexts = [];
    }
    /**
     * @param {?} notSelectors
     * @return {?}
     */
    SelectorMatcher.createNotMatcher = function (notSelectors) {
        var /** @type {?} */ notMatcher = new SelectorMatcher();
        notMatcher.addSelectables(notSelectors, null);
        return notMatcher;
    };
    /**
     * @param {?} cssSelectors
     * @param {?=} callbackCtxt
     * @return {?}
     */
    SelectorMatcher.prototype.addSelectables = function (cssSelectors, callbackCtxt) {
        var /** @type {?} */ listContext = ((null));
        if (cssSelectors.length > 1) {
            listContext = new SelectorListContext(cssSelectors);
            this._listContexts.push(listContext);
        }
        for (var /** @type {?} */ i = 0; i < cssSelectors.length; i++) {
            this._addSelectable(cssSelectors[i], callbackCtxt, listContext);
        }
    };
    /**
     * Add an object that can be found later on by calling `match`.
     * @param {?} cssSelector A css selector
     * @param {?} callbackCtxt An opaque object that will be given to the callback of the `match` function
     * @param {?} listContext
     * @return {?}
     */
    SelectorMatcher.prototype._addSelectable = function (cssSelector, callbackCtxt, listContext) {
        var /** @type {?} */ matcher = this;
        var /** @type {?} */ element = cssSelector.element;
        var /** @type {?} */ classNames = cssSelector.classNames;
        var /** @type {?} */ attrs = cssSelector.attrs;
        var /** @type {?} */ selectable = new SelectorContext(cssSelector, callbackCtxt, listContext);
        if (element) {
            var /** @type {?} */ isTerminal = attrs.length === 0 && classNames.length === 0;
            if (isTerminal) {
                this._addTerminal(matcher._elementMap, element, selectable);
            }
            else {
                matcher = this._addPartial(matcher._elementPartialMap, element);
            }
        }
        if (classNames) {
            for (var /** @type {?} */ i = 0; i < classNames.length; i++) {
                var /** @type {?} */ isTerminal = attrs.length === 0 && i === classNames.length - 1;
                var /** @type {?} */ className = classNames[i];
                if (isTerminal) {
                    this._addTerminal(matcher._classMap, className, selectable);
                }
                else {
                    matcher = this._addPartial(matcher._classPartialMap, className);
                }
            }
        }
        if (attrs) {
            for (var /** @type {?} */ i = 0; i < attrs.length; i += 2) {
                var /** @type {?} */ isTerminal = i === attrs.length - 2;
                var /** @type {?} */ name = attrs[i];
                var /** @type {?} */ value = attrs[i + 1];
                if (isTerminal) {
                    var /** @type {?} */ terminalMap = matcher._attrValueMap;
                    var /** @type {?} */ terminalValuesMap = terminalMap.get(name);
                    if (!terminalValuesMap) {
                        terminalValuesMap = new Map();
                        terminalMap.set(name, terminalValuesMap);
                    }
                    this._addTerminal(terminalValuesMap, value, selectable);
                }
                else {
                    var /** @type {?} */ partialMap = matcher._attrValuePartialMap;
                    var /** @type {?} */ partialValuesMap = partialMap.get(name);
                    if (!partialValuesMap) {
                        partialValuesMap = new Map();
                        partialMap.set(name, partialValuesMap);
                    }
                    matcher = this._addPartial(partialValuesMap, value);
                }
            }
        }
    };
    /**
     * @param {?} map
     * @param {?} name
     * @param {?} selectable
     * @return {?}
     */
    SelectorMatcher.prototype._addTerminal = function (map, name, selectable) {
        var /** @type {?} */ terminalList = map.get(name);
        if (!terminalList) {
            terminalList = [];
            map.set(name, terminalList);
        }
        terminalList.push(selectable);
    };
    /**
     * @param {?} map
     * @param {?} name
     * @return {?}
     */
    SelectorMatcher.prototype._addPartial = function (map, name) {
        var /** @type {?} */ matcher = map.get(name);
        if (!matcher) {
            matcher = new SelectorMatcher();
            map.set(name, matcher);
        }
        return matcher;
    };
    /**
     * Find the objects that have been added via `addSelectable`
     * whose css selector is contained in the given css selector.
     * @param {?} cssSelector A css selector
     * @param {?} matchedCallback This callback will be called with the object handed into `addSelectable`
     * @return {?} boolean true if a match was found
     */
    SelectorMatcher.prototype.match = function (cssSelector, matchedCallback) {
        var /** @type {?} */ result = false;
        var /** @type {?} */ element = ((cssSelector.element));
        var /** @type {?} */ classNames = cssSelector.classNames;
        var /** @type {?} */ attrs = cssSelector.attrs;
        for (var /** @type {?} */ i = 0; i < this._listContexts.length; i++) {
            this._listContexts[i].alreadyMatched = false;
        }
        result = this._matchTerminal(this._elementMap, element, cssSelector, matchedCallback) || result;
        result = this._matchPartial(this._elementPartialMap, element, cssSelector, matchedCallback) ||
            result;
        if (classNames) {
            for (var /** @type {?} */ i = 0; i < classNames.length; i++) {
                var /** @type {?} */ className = classNames[i];
                result =
                    this._matchTerminal(this._classMap, className, cssSelector, matchedCallback) || result;
                result =
                    this._matchPartial(this._classPartialMap, className, cssSelector, matchedCallback) ||
                        result;
            }
        }
        if (attrs) {
            for (var /** @type {?} */ i = 0; i < attrs.length; i += 2) {
                var /** @type {?} */ name = attrs[i];
                var /** @type {?} */ value = attrs[i + 1];
                var /** @type {?} */ terminalValuesMap = ((this._attrValueMap.get(name)));
                if (value) {
                    result =
                        this._matchTerminal(terminalValuesMap, '', cssSelector, matchedCallback) || result;
                }
                result =
                    this._matchTerminal(terminalValuesMap, value, cssSelector, matchedCallback) || result;
                var /** @type {?} */ partialValuesMap = ((this._attrValuePartialMap.get(name)));
                if (value) {
                    result = this._matchPartial(partialValuesMap, '', cssSelector, matchedCallback) || result;
                }
                result =
                    this._matchPartial(partialValuesMap, value, cssSelector, matchedCallback) || result;
            }
        }
        return result;
    };
    /**
     * \@internal
     * @param {?} map
     * @param {?} name
     * @param {?} cssSelector
     * @param {?} matchedCallback
     * @return {?}
     */
    SelectorMatcher.prototype._matchTerminal = function (map, name, cssSelector, matchedCallback) {
        if (!map || typeof name !== 'string') {
            return false;
        }
        var /** @type {?} */ selectables = map.get(name) || [];
        var /** @type {?} */ starSelectables = ((map.get('*')));
        if (starSelectables) {
            selectables = selectables.concat(starSelectables);
        }
        if (selectables.length === 0) {
            return false;
        }
        var /** @type {?} */ selectable;
        var /** @type {?} */ result = false;
        for (var /** @type {?} */ i = 0; i < selectables.length; i++) {
            selectable = selectables[i];
            result = selectable.finalize(cssSelector, matchedCallback) || result;
        }
        return result;
    };
    /**
     * \@internal
     * @param {?} map
     * @param {?} name
     * @param {?} cssSelector
     * @param {?} matchedCallback
     * @return {?}
     */
    SelectorMatcher.prototype._matchPartial = function (map, name, cssSelector, matchedCallback) {
        if (!map || typeof name !== 'string') {
            return false;
        }
        var /** @type {?} */ nestedSelector = map.get(name);
        if (!nestedSelector) {
            return false;
        }
        // TODO(perf): get rid of recursion and measure again
        // TODO(perf): don't pass the whole selector into the recursion,
        // but only the not processed parts
        return nestedSelector.match(cssSelector, matchedCallback);
    };
    return SelectorMatcher;
}());
var SelectorListContext = (function () {
    /**
     * @param {?} selectors
     */
    function SelectorListContext(selectors) {
        this.selectors = selectors;
        this.alreadyMatched = false;
    }
    return SelectorListContext;
}());
var SelectorContext = (function () {
    /**
     * @param {?} selector
     * @param {?} cbContext
     * @param {?} listContext
     */
    function SelectorContext(selector, cbContext, listContext) {
        this.selector = selector;
        this.cbContext = cbContext;
        this.listContext = listContext;
        this.notSelectors = selector.notSelectors;
    }
    /**
     * @param {?} cssSelector
     * @param {?} callback
     * @return {?}
     */
    SelectorContext.prototype.finalize = function (cssSelector, callback) {
        var /** @type {?} */ result = true;
        if (this.notSelectors.length > 0 && (!this.listContext || !this.listContext.alreadyMatched)) {
            var /** @type {?} */ notMatcher = SelectorMatcher.createNotMatcher(this.notSelectors);
            result = !notMatcher.match(cssSelector, null);
        }
        if (result && callback && (!this.listContext || !this.listContext.alreadyMatched)) {
            if (this.listContext) {
                this.listContext.alreadyMatched = true;
            }
            callback(this.selector, this.cbContext);
        }
        return result;
    };
    return SelectorContext;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var MODULE_SUFFIX = '';
var DASH_CASE_REGEXP = /-+([a-z0-9])/g;
/**
 * @param {?} input
 * @return {?}
 */
/**
 * @param {?} input
 * @return {?}
 */
function dashCaseToCamelCase(input) {
    return input.replace(DASH_CASE_REGEXP, function () {
        var m = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            m[_i] = arguments[_i];
        }
        return m[1].toUpperCase();
    });
}
/**
 * @param {?} input
 * @param {?} defaultValues
 * @return {?}
 */
function splitAtColon(input, defaultValues) {
    return _splitAt(input, ':', defaultValues);
}
/**
 * @param {?} input
 * @param {?} defaultValues
 * @return {?}
 */
function splitAtPeriod(input, defaultValues) {
    return _splitAt(input, '.', defaultValues);
}
/**
 * @param {?} input
 * @param {?} character
 * @param {?} defaultValues
 * @return {?}
 */
function _splitAt(input, character, defaultValues) {
    var /** @type {?} */ characterIndex = input.indexOf(character);
    if (characterIndex == -1)
        return defaultValues;
    return [input.slice(0, characterIndex).trim(), input.slice(characterIndex + 1).trim()];
}
/**
 * @param {?} value
 * @param {?} visitor
 * @param {?} context
 * @return {?}
 */
function visitValue(value, visitor, context) {
    if (Array.isArray(value)) {
        return visitor.visitArray(/** @type {?} */ (value), context);
    }
    if (isStrictStringMap(value)) {
        return visitor.visitStringMap(/** @type {?} */ (value), context);
    }
    if (value == null || typeof value == 'string' || typeof value == 'number' ||
        typeof value == 'boolean') {
        return visitor.visitPrimitive(value, context);
    }
    return visitor.visitOther(value, context);
}
/**
 * @param {?} val
 * @return {?}
 */
function isDefined(val) {
    return val !== null && val !== undefined;
}
/**
 * @template T
 * @param {?} val
 * @return {?}
 */
function noUndefined(val) {
    return val === undefined ? ((null)) : val;
}
var ValueTransformer = (function () {
    function ValueTransformer() {
    }
    /**
     * @param {?} arr
     * @param {?} context
     * @return {?}
     */
    ValueTransformer.prototype.visitArray = function (arr, context) {
        var _this = this;
        return arr.map(function (value) { return visitValue(value, _this, context); });
    };
    /**
     * @param {?} map
     * @param {?} context
     * @return {?}
     */
    ValueTransformer.prototype.visitStringMap = function (map, context) {
        var _this = this;
        var /** @type {?} */ result = {};
        Object.keys(map).forEach(function (key) { result[key] = visitValue(map[key], _this, context); });
        return result;
    };
    /**
     * @param {?} value
     * @param {?} context
     * @return {?}
     */
    ValueTransformer.prototype.visitPrimitive = function (value, context) { return value; };
    /**
     * @param {?} value
     * @param {?} context
     * @return {?}
     */
    ValueTransformer.prototype.visitOther = function (value, context) { return value; };
    return ValueTransformer;
}());
var SyncAsync = {
    assertSync: function (value) {
        if (Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_51" /* isPromise */])(value)) {
            throw new Error("Illegal state: value cannot be a promise");
        }
        return value;
    },
    then: function (value, cb) { return Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_51" /* isPromise */])(value) ? value.then(cb) : cb(value); },
    all: function (syncAsyncValues) {
        return syncAsyncValues.some(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_51" /* isPromise */]) ? Promise.all(syncAsyncValues) : (syncAsyncValues);
    }
};
/**
 * @param {?} msg
 * @param {?=} parseErrors
 * @return {?}
 */
function syntaxError(msg, parseErrors) {
    var /** @type {?} */ error = Error(msg);
    ((error))[ERROR_SYNTAX_ERROR] = true;
    if (parseErrors)
        ((error))[ERROR_PARSE_ERRORS] = parseErrors;
    return error;
}
var ERROR_SYNTAX_ERROR = 'ngSyntaxError';
var ERROR_PARSE_ERRORS = 'ngParseErrors';
/**
 * @param {?} error
 * @return {?}
 */
function isSyntaxError(error) {
    return ((error))[ERROR_SYNTAX_ERROR];
}
/**
 * @param {?} error
 * @return {?}
 */
function getParseErrors(error) {
    return ((error))[ERROR_PARSE_ERRORS] || [];
}
/**
 * @param {?} s
 * @return {?}
 */
function escapeRegExp(s) {
    return s.replace(/([.*+?^=!:${}()|[\]\/\\])/g, '\\$1');
}
var STRING_MAP_PROTO = Object.getPrototypeOf({});
/**
 * @param {?} obj
 * @return {?}
 */
function isStrictStringMap(obj) {
    return typeof obj === 'object' && obj !== null && Object.getPrototypeOf(obj) === STRING_MAP_PROTO;
}
/**
 * @param {?} str
 * @return {?}
 */
function utf8Encode(str) {
    var /** @type {?} */ encoded = '';
    for (var /** @type {?} */ index = 0; index < str.length; index++) {
        var /** @type {?} */ codePoint = str.charCodeAt(index);
        // decode surrogate
        // see https://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae
        if (codePoint >= 0xd800 && codePoint <= 0xdbff && str.length > (index + 1)) {
            var /** @type {?} */ low = str.charCodeAt(index + 1);
            if (low >= 0xdc00 && low <= 0xdfff) {
                index++;
                codePoint = ((codePoint - 0xd800) << 10) + low - 0xdc00 + 0x10000;
            }
        }
        if (codePoint <= 0x7f) {
            encoded += String.fromCharCode(codePoint);
        }
        else if (codePoint <= 0x7ff) {
            encoded += String.fromCharCode(((codePoint >> 6) & 0x1F) | 0xc0, (codePoint & 0x3f) | 0x80);
        }
        else if (codePoint <= 0xffff) {
            encoded += String.fromCharCode((codePoint >> 12) | 0xe0, ((codePoint >> 6) & 0x3f) | 0x80, (codePoint & 0x3f) | 0x80);
        }
        else if (codePoint <= 0x1fffff) {
            encoded += String.fromCharCode(((codePoint >> 18) & 0x07) | 0xf0, ((codePoint >> 12) & 0x3f) | 0x80, ((codePoint >> 6) & 0x3f) | 0x80, (codePoint & 0x3f) | 0x80);
        }
    }
    return encoded;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
// group 0: "[prop] or (event) or @trigger"
// group 1: "prop" from "[prop]"
// group 2: "event" from "(event)"
// group 3: "@trigger" from "@trigger"
var HOST_REG_EXP = /^(?:(?:\[([^\]]+)\])|(?:\(([^\)]+)\)))|(\@[-\w]+)$/;
/**
 * @param {?} name
 * @return {?}
 */
function _sanitizeIdentifier(name) {
    return name.replace(/\W/g, '_');
}
var _anonymousTypeIndex = 0;
/**
 * @param {?} compileIdentifier
 * @return {?}
 */
function identifierName(compileIdentifier) {
    if (!compileIdentifier || !compileIdentifier.reference) {
        return null;
    }
    var /** @type {?} */ ref = compileIdentifier.reference;
    if (ref instanceof StaticSymbol) {
        return ref.name;
    }
    if (ref['__anonymousType']) {
        return ref['__anonymousType'];
    }
    var /** @type {?} */ identifier = Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(ref);
    if (identifier.indexOf('(') >= 0) {
        // case: anonymous functions!
        identifier = "anonymous_" + _anonymousTypeIndex++;
        ref['__anonymousType'] = identifier;
    }
    else {
        identifier = _sanitizeIdentifier(identifier);
    }
    return identifier;
}
/**
 * @param {?} compileIdentifier
 * @return {?}
 */
function identifierModuleUrl(compileIdentifier) {
    var /** @type {?} */ ref = compileIdentifier.reference;
    if (ref instanceof StaticSymbol) {
        return ref.filePath;
    }
    // Runtime type
    return "./" + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(ref);
}
/**
 * @param {?} compType
 * @param {?} embeddedTemplateIndex
 * @return {?}
 */
function viewClassName(compType, embeddedTemplateIndex) {
    return "View_" + identifierName({ reference: compType }) + "_" + embeddedTemplateIndex;
}
/**
 * @param {?} compType
 * @return {?}
 */
function rendererTypeName(compType) {
    return "RenderType_" + identifierName({ reference: compType });
}
/**
 * @param {?} compType
 * @return {?}
 */
function hostViewClassName(compType) {
    return "HostView_" + identifierName({ reference: compType });
}
/**
 * @param {?} compType
 * @return {?}
 */
function componentFactoryName(compType) {
    return identifierName({ reference: compType }) + "NgFactory";
}
var CompileSummaryKind = {};
CompileSummaryKind.Pipe = 0;
CompileSummaryKind.Directive = 1;
CompileSummaryKind.NgModule = 2;
CompileSummaryKind.Injectable = 3;
CompileSummaryKind[CompileSummaryKind.Pipe] = "Pipe";
CompileSummaryKind[CompileSummaryKind.Directive] = "Directive";
CompileSummaryKind[CompileSummaryKind.NgModule] = "NgModule";
CompileSummaryKind[CompileSummaryKind.Injectable] = "Injectable";
/**
 * @param {?} token
 * @return {?}
 */
function tokenName(token) {
    return token.value != null ? _sanitizeIdentifier(token.value) : identifierName(token.identifier);
}
/**
 * @param {?} token
 * @return {?}
 */
function tokenReference(token) {
    if (token.identifier != null) {
        return token.identifier.reference;
    }
    else {
        return token.value;
    }
}
/**
 * Metadata about a stylesheet
 */
var CompileStylesheetMetadata = (function () {
    /**
     * @param {?=} __0
     */
    function CompileStylesheetMetadata(_a) {
        var _b = _a === void 0 ? {} : _a, moduleUrl = _b.moduleUrl, styles = _b.styles, styleUrls = _b.styleUrls;
        this.moduleUrl = moduleUrl || null;
        this.styles = _normalizeArray(styles);
        this.styleUrls = _normalizeArray(styleUrls);
    }
    return CompileStylesheetMetadata;
}());
/**
 * Metadata regarding compilation of a template.
 */
var CompileTemplateMetadata = (function () {
    /**
     * @param {?} __0
     */
    function CompileTemplateMetadata(_a) {
        var encapsulation = _a.encapsulation, template = _a.template, templateUrl = _a.templateUrl, styles = _a.styles, styleUrls = _a.styleUrls, externalStylesheets = _a.externalStylesheets, animations = _a.animations, ngContentSelectors = _a.ngContentSelectors, interpolation = _a.interpolation, isInline = _a.isInline, preserveWhitespaces = _a.preserveWhitespaces;
        this.encapsulation = encapsulation;
        this.template = template;
        this.templateUrl = templateUrl;
        this.styles = _normalizeArray(styles);
        this.styleUrls = _normalizeArray(styleUrls);
        this.externalStylesheets = _normalizeArray(externalStylesheets);
        this.animations = animations ? flatten(animations) : [];
        this.ngContentSelectors = ngContentSelectors || [];
        if (interpolation && interpolation.length != 2) {
            throw new Error("'interpolation' should have a start and an end symbol.");
        }
        this.interpolation = interpolation;
        this.isInline = isInline;
        this.preserveWhitespaces = preserveWhitespaces;
    }
    /**
     * @return {?}
     */
    CompileTemplateMetadata.prototype.toSummary = function () {
        return {
            ngContentSelectors: this.ngContentSelectors,
            encapsulation: this.encapsulation,
        };
    };
    return CompileTemplateMetadata;
}());
/**
 * Metadata regarding compilation of a directive.
 */
var CompileDirectiveMetadata = (function () {
    /**
     * @param {?} __0
     */
    function CompileDirectiveMetadata(_a) {
        var isHost = _a.isHost, type = _a.type, isComponent = _a.isComponent, selector = _a.selector, exportAs = _a.exportAs, changeDetection = _a.changeDetection, inputs = _a.inputs, outputs = _a.outputs, hostListeners = _a.hostListeners, hostProperties = _a.hostProperties, hostAttributes = _a.hostAttributes, providers = _a.providers, viewProviders = _a.viewProviders, queries = _a.queries, viewQueries = _a.viewQueries, entryComponents = _a.entryComponents, template = _a.template, componentViewType = _a.componentViewType, rendererType = _a.rendererType, componentFactory = _a.componentFactory;
        this.isHost = !!isHost;
        this.type = type;
        this.isComponent = isComponent;
        this.selector = selector;
        this.exportAs = exportAs;
        this.changeDetection = changeDetection;
        this.inputs = inputs;
        this.outputs = outputs;
        this.hostListeners = hostListeners;
        this.hostProperties = hostProperties;
        this.hostAttributes = hostAttributes;
        this.providers = _normalizeArray(providers);
        this.viewProviders = _normalizeArray(viewProviders);
        this.queries = _normalizeArray(queries);
        this.viewQueries = _normalizeArray(viewQueries);
        this.entryComponents = _normalizeArray(entryComponents);
        this.template = template;
        this.componentViewType = componentViewType;
        this.rendererType = rendererType;
        this.componentFactory = componentFactory;
    }
    /**
     * @param {?} __0
     * @return {?}
     */
    CompileDirectiveMetadata.create = function (_a) {
        var isHost = _a.isHost, type = _a.type, isComponent = _a.isComponent, selector = _a.selector, exportAs = _a.exportAs, changeDetection = _a.changeDetection, inputs = _a.inputs, outputs = _a.outputs, host = _a.host, providers = _a.providers, viewProviders = _a.viewProviders, queries = _a.queries, viewQueries = _a.viewQueries, entryComponents = _a.entryComponents, template = _a.template, componentViewType = _a.componentViewType, rendererType = _a.rendererType, componentFactory = _a.componentFactory;
        var /** @type {?} */ hostListeners = {};
        var /** @type {?} */ hostProperties = {};
        var /** @type {?} */ hostAttributes = {};
        if (host != null) {
            Object.keys(host).forEach(function (key) {
                var /** @type {?} */ value = host[key];
                var /** @type {?} */ matches = key.match(HOST_REG_EXP);
                if (matches === null) {
                    hostAttributes[key] = value;
                }
                else if (matches[1] != null) {
                    hostProperties[matches[1]] = value;
                }
                else if (matches[2] != null) {
                    hostListeners[matches[2]] = value;
                }
            });
        }
        var /** @type {?} */ inputsMap = {};
        if (inputs != null) {
            inputs.forEach(function (bindConfig) {
                // canonical syntax: `dirProp: elProp`
                // if there is no `:`, use dirProp = elProp
                var /** @type {?} */ parts = splitAtColon(bindConfig, [bindConfig, bindConfig]);
                inputsMap[parts[0]] = parts[1];
            });
        }
        var /** @type {?} */ outputsMap = {};
        if (outputs != null) {
            outputs.forEach(function (bindConfig) {
                // canonical syntax: `dirProp: elProp`
                // if there is no `:`, use dirProp = elProp
                var /** @type {?} */ parts = splitAtColon(bindConfig, [bindConfig, bindConfig]);
                outputsMap[parts[0]] = parts[1];
            });
        }
        return new CompileDirectiveMetadata({
            isHost: isHost,
            type: type,
            isComponent: !!isComponent, selector: selector, exportAs: exportAs, changeDetection: changeDetection,
            inputs: inputsMap,
            outputs: outputsMap,
            hostListeners: hostListeners,
            hostProperties: hostProperties,
            hostAttributes: hostAttributes,
            providers: providers,
            viewProviders: viewProviders,
            queries: queries,
            viewQueries: viewQueries,
            entryComponents: entryComponents,
            template: template,
            componentViewType: componentViewType,
            rendererType: rendererType,
            componentFactory: componentFactory,
        });
    };
    /**
     * @return {?}
     */
    CompileDirectiveMetadata.prototype.toSummary = function () {
        return {
            summaryKind: CompileSummaryKind.Directive,
            type: this.type,
            isComponent: this.isComponent,
            selector: this.selector,
            exportAs: this.exportAs,
            inputs: this.inputs,
            outputs: this.outputs,
            hostListeners: this.hostListeners,
            hostProperties: this.hostProperties,
            hostAttributes: this.hostAttributes,
            providers: this.providers,
            viewProviders: this.viewProviders,
            queries: this.queries,
            viewQueries: this.viewQueries,
            entryComponents: this.entryComponents,
            changeDetection: this.changeDetection,
            template: this.template && this.template.toSummary(),
            componentViewType: this.componentViewType,
            rendererType: this.rendererType,
            componentFactory: this.componentFactory
        };
    };
    return CompileDirectiveMetadata;
}());
/**
 * Construct {\@link CompileDirectiveMetadata} from {\@link ComponentTypeMetadata} and a selector.
 * @param {?} hostTypeReference
 * @param {?} compMeta
 * @param {?} hostViewType
 * @return {?}
 */
function createHostComponentMeta(hostTypeReference, compMeta, hostViewType) {
    var /** @type {?} */ template = CssSelector.parse(/** @type {?} */ ((compMeta.selector)))[0].getMatchingElementTemplate();
    return CompileDirectiveMetadata.create({
        isHost: true,
        type: { reference: hostTypeReference, diDeps: [], lifecycleHooks: [] },
        template: new CompileTemplateMetadata({
            encapsulation: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_15" /* ViewEncapsulation */].None,
            template: template,
            templateUrl: '',
            styles: [],
            styleUrls: [],
            ngContentSelectors: [],
            animations: [],
            isInline: true,
            externalStylesheets: [],
            interpolation: null,
            preserveWhitespaces: false,
        }),
        exportAs: null,
        changeDetection: __WEBPACK_IMPORTED_MODULE_1__angular_core__["j" /* ChangeDetectionStrategy */].Default,
        inputs: [],
        outputs: [],
        host: {},
        isComponent: true,
        selector: '*',
        providers: [],
        viewProviders: [],
        queries: [],
        viewQueries: [],
        componentViewType: hostViewType,
        rendererType: { id: '__Host__', encapsulation: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_15" /* ViewEncapsulation */].None, styles: [], data: {} },
        entryComponents: [],
        componentFactory: null
    });
}
var CompilePipeMetadata = (function () {
    /**
     * @param {?} __0
     */
    function CompilePipeMetadata(_a) {
        var type = _a.type, name = _a.name, pure = _a.pure;
        this.type = type;
        this.name = name;
        this.pure = !!pure;
    }
    /**
     * @return {?}
     */
    CompilePipeMetadata.prototype.toSummary = function () {
        return {
            summaryKind: CompileSummaryKind.Pipe,
            type: this.type,
            name: this.name,
            pure: this.pure
        };
    };
    return CompilePipeMetadata;
}());
/**
 * Metadata regarding compilation of a module.
 */
var CompileNgModuleMetadata = (function () {
    /**
     * @param {?} __0
     */
    function CompileNgModuleMetadata(_a) {
        var type = _a.type, providers = _a.providers, declaredDirectives = _a.declaredDirectives, exportedDirectives = _a.exportedDirectives, declaredPipes = _a.declaredPipes, exportedPipes = _a.exportedPipes, entryComponents = _a.entryComponents, bootstrapComponents = _a.bootstrapComponents, importedModules = _a.importedModules, exportedModules = _a.exportedModules, schemas = _a.schemas, transitiveModule = _a.transitiveModule, id = _a.id;
        this.type = type || null;
        this.declaredDirectives = _normalizeArray(declaredDirectives);
        this.exportedDirectives = _normalizeArray(exportedDirectives);
        this.declaredPipes = _normalizeArray(declaredPipes);
        this.exportedPipes = _normalizeArray(exportedPipes);
        this.providers = _normalizeArray(providers);
        this.entryComponents = _normalizeArray(entryComponents);
        this.bootstrapComponents = _normalizeArray(bootstrapComponents);
        this.importedModules = _normalizeArray(importedModules);
        this.exportedModules = _normalizeArray(exportedModules);
        this.schemas = _normalizeArray(schemas);
        this.id = id || null;
        this.transitiveModule = transitiveModule || null;
    }
    /**
     * @return {?}
     */
    CompileNgModuleMetadata.prototype.toSummary = function () {
        var /** @type {?} */ module = ((this.transitiveModule));
        return {
            summaryKind: CompileSummaryKind.NgModule,
            type: this.type,
            entryComponents: module.entryComponents,
            providers: module.providers,
            modules: module.modules,
            exportedDirectives: module.exportedDirectives,
            exportedPipes: module.exportedPipes
        };
    };
    return CompileNgModuleMetadata;
}());
var TransitiveCompileNgModuleMetadata = (function () {
    function TransitiveCompileNgModuleMetadata() {
        this.directivesSet = new Set();
        this.directives = [];
        this.exportedDirectivesSet = new Set();
        this.exportedDirectives = [];
        this.pipesSet = new Set();
        this.pipes = [];
        this.exportedPipesSet = new Set();
        this.exportedPipes = [];
        this.modulesSet = new Set();
        this.modules = [];
        this.entryComponentsSet = new Set();
        this.entryComponents = [];
        this.providers = [];
    }
    /**
     * @param {?} provider
     * @param {?} module
     * @return {?}
     */
    TransitiveCompileNgModuleMetadata.prototype.addProvider = function (provider, module) {
        this.providers.push({ provider: provider, module: module });
    };
    /**
     * @param {?} id
     * @return {?}
     */
    TransitiveCompileNgModuleMetadata.prototype.addDirective = function (id) {
        if (!this.directivesSet.has(id.reference)) {
            this.directivesSet.add(id.reference);
            this.directives.push(id);
        }
    };
    /**
     * @param {?} id
     * @return {?}
     */
    TransitiveCompileNgModuleMetadata.prototype.addExportedDirective = function (id) {
        if (!this.exportedDirectivesSet.has(id.reference)) {
            this.exportedDirectivesSet.add(id.reference);
            this.exportedDirectives.push(id);
        }
    };
    /**
     * @param {?} id
     * @return {?}
     */
    TransitiveCompileNgModuleMetadata.prototype.addPipe = function (id) {
        if (!this.pipesSet.has(id.reference)) {
            this.pipesSet.add(id.reference);
            this.pipes.push(id);
        }
    };
    /**
     * @param {?} id
     * @return {?}
     */
    TransitiveCompileNgModuleMetadata.prototype.addExportedPipe = function (id) {
        if (!this.exportedPipesSet.has(id.reference)) {
            this.exportedPipesSet.add(id.reference);
            this.exportedPipes.push(id);
        }
    };
    /**
     * @param {?} id
     * @return {?}
     */
    TransitiveCompileNgModuleMetadata.prototype.addModule = function (id) {
        if (!this.modulesSet.has(id.reference)) {
            this.modulesSet.add(id.reference);
            this.modules.push(id);
        }
    };
    /**
     * @param {?} ec
     * @return {?}
     */
    TransitiveCompileNgModuleMetadata.prototype.addEntryComponent = function (ec) {
        if (!this.entryComponentsSet.has(ec.componentType)) {
            this.entryComponentsSet.add(ec.componentType);
            this.entryComponents.push(ec);
        }
    };
    return TransitiveCompileNgModuleMetadata;
}());
/**
 * @param {?} obj
 * @return {?}
 */
function _normalizeArray(obj) {
    return obj || [];
}
var ProviderMeta = (function () {
    /**
     * @param {?} token
     * @param {?} __1
     */
    function ProviderMeta(token, _a) {
        var useClass = _a.useClass, useValue = _a.useValue, useExisting = _a.useExisting, useFactory = _a.useFactory, deps = _a.deps, multi = _a.multi;
        this.token = token;
        this.useClass = useClass || null;
        this.useValue = useValue;
        this.useExisting = useExisting;
        this.useFactory = useFactory || null;
        this.dependencies = deps || null;
        this.multi = !!multi;
    }
    return ProviderMeta;
}());
/**
 * @template T
 * @param {?} list
 * @return {?}
 */
function flatten(list) {
    return list.reduce(function (flat, item) {
        var /** @type {?} */ flatItem = Array.isArray(item) ? flatten(item) : item;
        return ((flat)).concat(flatItem);
    }, []);
}
/**
 * @param {?} url
 * @return {?}
 */
function sourceUrl(url) {
    // Note: We need 3 "/" so that ng shows up as a separate domain
    // in the chrome dev tools.
    return url.replace(/(\w+:\/\/[\w:-]+)?(\/+)?/, 'ng:///');
}
/**
 * @param {?} ngModuleType
 * @param {?} compMeta
 * @param {?} templateMeta
 * @return {?}
 */
function templateSourceUrl(ngModuleType, compMeta, templateMeta) {
    var /** @type {?} */ url;
    if (templateMeta.isInline) {
        if (compMeta.type.reference instanceof StaticSymbol) {
            // Note: a .ts file might contain multiple components with inline templates,
            // so we need to give them unique urls, as these will be used for sourcemaps.
            url = compMeta.type.reference.filePath + "." + compMeta.type.reference.name + ".html";
        }
        else {
            url = identifierName(ngModuleType) + "/" + identifierName(compMeta.type) + ".html";
        }
    }
    else {
        url = ((templateMeta.templateUrl));
    }
    // always prepend ng:// to make angular resources easy to find and not clobber
    // user resources.
    return sourceUrl(url);
}
/**
 * @param {?} meta
 * @param {?} id
 * @return {?}
 */
function sharedStylesheetJitUrl(meta, id) {
    var /** @type {?} */ pathParts = ((meta.moduleUrl)).split(/\/\\/g);
    var /** @type {?} */ baseName = pathParts[pathParts.length - 1];
    return sourceUrl("css/" + id + baseName + ".ngstyle.js");
}
/**
 * @param {?} moduleMeta
 * @return {?}
 */
function ngModuleJitUrl(moduleMeta) {
    return sourceUrl(identifierName(moduleMeta.type) + "/module.ngfactory.js");
}
/**
 * @param {?} ngModuleType
 * @param {?} compMeta
 * @return {?}
 */
function templateJitUrl(ngModuleType, compMeta) {
    return sourceUrl(identifierName(ngModuleType) + "/" + identifierName(compMeta.type) + ".ngfactory.js");
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Provides access to reflection data about symbols that the compiler needs.
 * @abstract
 */
var CompileReflector = (function () {
    function CompileReflector() {
    }
    /**
     * @abstract
     * @param {?} typeOrFunc
     * @return {?}
     */
    CompileReflector.prototype.parameters = function (typeOrFunc) { };
    /**
     * @abstract
     * @param {?} typeOrFunc
     * @return {?}
     */
    CompileReflector.prototype.annotations = function (typeOrFunc) { };
    /**
     * @abstract
     * @param {?} typeOrFunc
     * @return {?}
     */
    CompileReflector.prototype.propMetadata = function (typeOrFunc) { };
    /**
     * @abstract
     * @param {?} type
     * @param {?} lcProperty
     * @return {?}
     */
    CompileReflector.prototype.hasLifecycleHook = function (type, lcProperty) { };
    /**
     * @abstract
     * @param {?} type
     * @param {?} cmpMetadata
     * @return {?}
     */
    CompileReflector.prototype.componentModuleUrl = function (type, cmpMetadata) { };
    /**
     * @abstract
     * @param {?} ref
     * @return {?}
     */
    CompileReflector.prototype.resolveExternalReference = function (ref) { };
    return CompileReflector;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var CompilerConfig = (function () {
    /**
     * @param {?=} __0
     */
    function CompilerConfig(_a) {
        var _b = _a === void 0 ? {} : _a, _c = _b.defaultEncapsulation, defaultEncapsulation = _c === void 0 ? __WEBPACK_IMPORTED_MODULE_1__angular_core__["_15" /* ViewEncapsulation */].Emulated : _c, _d = _b.useJit, useJit = _d === void 0 ? true : _d, missingTranslation = _b.missingTranslation, enableLegacyTemplate = _b.enableLegacyTemplate, preserveWhitespaces = _b.preserveWhitespaces;
        this.defaultEncapsulation = defaultEncapsulation;
        this.useJit = !!useJit;
        this.missingTranslation = missingTranslation || null;
        this.enableLegacyTemplate = enableLegacyTemplate !== false;
        this.preserveWhitespaces = preserveWhitespacesDefault(noUndefined(preserveWhitespaces));
    }
    return CompilerConfig;
}());
/**
 * @param {?} preserveWhitespacesOption
 * @param {?=} defaultSetting
 * @return {?}
 */
function preserveWhitespacesDefault(preserveWhitespacesOption, defaultSetting) {
    if (defaultSetting === void 0) { defaultSetting = true; }
    return preserveWhitespacesOption === null ? defaultSetting : preserveWhitespacesOption;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ParserError = (function () {
    /**
     * @param {?} message
     * @param {?} input
     * @param {?} errLocation
     * @param {?=} ctxLocation
     */
    function ParserError(message, input, errLocation, ctxLocation) {
        this.input = input;
        this.errLocation = errLocation;
        this.ctxLocation = ctxLocation;
        this.message = "Parser Error: " + message + " " + errLocation + " [" + input + "] in " + ctxLocation;
    }
    return ParserError;
}());
var ParseSpan = (function () {
    /**
     * @param {?} start
     * @param {?} end
     */
    function ParseSpan(start, end) {
        this.start = start;
        this.end = end;
    }
    return ParseSpan;
}());
var AST = (function () {
    /**
     * @param {?} span
     */
    function AST(span) {
        this.span = span;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    AST.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return null;
    };
    /**
     * @return {?}
     */
    AST.prototype.toString = function () { return 'AST'; };
    return AST;
}());
/**
 * Represents a quoted expression of the form:
 *
 * quote = prefix `:` uninterpretedExpression
 * prefix = identifier
 * uninterpretedExpression = arbitrary string
 *
 * A quoted expression is meant to be pre-processed by an AST transformer that
 * converts it into another AST that no longer contains quoted expressions.
 * It is meant to allow third-party developers to extend Angular template
 * expression language. The `uninterpretedExpression` part of the quote is
 * therefore not interpreted by the Angular's own expression parser.
 */
var Quote = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](Quote, _super);
    /**
     * @param {?} span
     * @param {?} prefix
     * @param {?} uninterpretedExpression
     * @param {?} location
     */
    function Quote(span, prefix, uninterpretedExpression, location) {
        var _this = _super.call(this, span) || this;
        _this.prefix = prefix;
        _this.uninterpretedExpression = uninterpretedExpression;
        _this.location = location;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    Quote.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitQuote(this, context);
    };
    /**
     * @return {?}
     */
    Quote.prototype.toString = function () { return 'Quote'; };
    return Quote;
}(AST));
var EmptyExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](EmptyExpr, _super);
    function EmptyExpr() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    EmptyExpr.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        // do nothing
    };
    return EmptyExpr;
}(AST));
var ImplicitReceiver = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ImplicitReceiver, _super);
    function ImplicitReceiver() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    ImplicitReceiver.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitImplicitReceiver(this, context);
    };
    return ImplicitReceiver;
}(AST));
/**
 * Multiple expressions separated by a semicolon.
 */
var Chain = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](Chain, _super);
    /**
     * @param {?} span
     * @param {?} expressions
     */
    function Chain(span, expressions) {
        var _this = _super.call(this, span) || this;
        _this.expressions = expressions;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    Chain.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitChain(this, context);
    };
    return Chain;
}(AST));
var Conditional = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](Conditional, _super);
    /**
     * @param {?} span
     * @param {?} condition
     * @param {?} trueExp
     * @param {?} falseExp
     */
    function Conditional(span, condition, trueExp, falseExp) {
        var _this = _super.call(this, span) || this;
        _this.condition = condition;
        _this.trueExp = trueExp;
        _this.falseExp = falseExp;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    Conditional.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitConditional(this, context);
    };
    return Conditional;
}(AST));
var PropertyRead = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](PropertyRead, _super);
    /**
     * @param {?} span
     * @param {?} receiver
     * @param {?} name
     */
    function PropertyRead(span, receiver, name) {
        var _this = _super.call(this, span) || this;
        _this.receiver = receiver;
        _this.name = name;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    PropertyRead.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitPropertyRead(this, context);
    };
    return PropertyRead;
}(AST));
var PropertyWrite = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](PropertyWrite, _super);
    /**
     * @param {?} span
     * @param {?} receiver
     * @param {?} name
     * @param {?} value
     */
    function PropertyWrite(span, receiver, name, value) {
        var _this = _super.call(this, span) || this;
        _this.receiver = receiver;
        _this.name = name;
        _this.value = value;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    PropertyWrite.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitPropertyWrite(this, context);
    };
    return PropertyWrite;
}(AST));
var SafePropertyRead = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](SafePropertyRead, _super);
    /**
     * @param {?} span
     * @param {?} receiver
     * @param {?} name
     */
    function SafePropertyRead(span, receiver, name) {
        var _this = _super.call(this, span) || this;
        _this.receiver = receiver;
        _this.name = name;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    SafePropertyRead.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitSafePropertyRead(this, context);
    };
    return SafePropertyRead;
}(AST));
var KeyedRead = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](KeyedRead, _super);
    /**
     * @param {?} span
     * @param {?} obj
     * @param {?} key
     */
    function KeyedRead(span, obj, key) {
        var _this = _super.call(this, span) || this;
        _this.obj = obj;
        _this.key = key;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    KeyedRead.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitKeyedRead(this, context);
    };
    return KeyedRead;
}(AST));
var KeyedWrite = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](KeyedWrite, _super);
    /**
     * @param {?} span
     * @param {?} obj
     * @param {?} key
     * @param {?} value
     */
    function KeyedWrite(span, obj, key, value) {
        var _this = _super.call(this, span) || this;
        _this.obj = obj;
        _this.key = key;
        _this.value = value;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    KeyedWrite.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitKeyedWrite(this, context);
    };
    return KeyedWrite;
}(AST));
var BindingPipe = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](BindingPipe, _super);
    /**
     * @param {?} span
     * @param {?} exp
     * @param {?} name
     * @param {?} args
     */
    function BindingPipe(span, exp, name, args) {
        var _this = _super.call(this, span) || this;
        _this.exp = exp;
        _this.name = name;
        _this.args = args;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    BindingPipe.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitPipe(this, context);
    };
    return BindingPipe;
}(AST));
var LiteralPrimitive = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](LiteralPrimitive, _super);
    /**
     * @param {?} span
     * @param {?} value
     */
    function LiteralPrimitive(span, value) {
        var _this = _super.call(this, span) || this;
        _this.value = value;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    LiteralPrimitive.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitLiteralPrimitive(this, context);
    };
    return LiteralPrimitive;
}(AST));
var LiteralArray = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](LiteralArray, _super);
    /**
     * @param {?} span
     * @param {?} expressions
     */
    function LiteralArray(span, expressions) {
        var _this = _super.call(this, span) || this;
        _this.expressions = expressions;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    LiteralArray.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitLiteralArray(this, context);
    };
    return LiteralArray;
}(AST));
var LiteralMap = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](LiteralMap, _super);
    /**
     * @param {?} span
     * @param {?} keys
     * @param {?} values
     */
    function LiteralMap(span, keys, values) {
        var _this = _super.call(this, span) || this;
        _this.keys = keys;
        _this.values = values;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    LiteralMap.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitLiteralMap(this, context);
    };
    return LiteralMap;
}(AST));
var Interpolation = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](Interpolation, _super);
    /**
     * @param {?} span
     * @param {?} strings
     * @param {?} expressions
     */
    function Interpolation(span, strings, expressions) {
        var _this = _super.call(this, span) || this;
        _this.strings = strings;
        _this.expressions = expressions;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    Interpolation.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitInterpolation(this, context);
    };
    return Interpolation;
}(AST));
var Binary = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](Binary, _super);
    /**
     * @param {?} span
     * @param {?} operation
     * @param {?} left
     * @param {?} right
     */
    function Binary(span, operation, left, right) {
        var _this = _super.call(this, span) || this;
        _this.operation = operation;
        _this.left = left;
        _this.right = right;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    Binary.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitBinary(this, context);
    };
    return Binary;
}(AST));
var PrefixNot = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](PrefixNot, _super);
    /**
     * @param {?} span
     * @param {?} expression
     */
    function PrefixNot(span, expression) {
        var _this = _super.call(this, span) || this;
        _this.expression = expression;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    PrefixNot.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitPrefixNot(this, context);
    };
    return PrefixNot;
}(AST));
var NonNullAssert = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](NonNullAssert, _super);
    /**
     * @param {?} span
     * @param {?} expression
     */
    function NonNullAssert(span, expression) {
        var _this = _super.call(this, span) || this;
        _this.expression = expression;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    NonNullAssert.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitNonNullAssert(this, context);
    };
    return NonNullAssert;
}(AST));
var MethodCall = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](MethodCall, _super);
    /**
     * @param {?} span
     * @param {?} receiver
     * @param {?} name
     * @param {?} args
     */
    function MethodCall(span, receiver, name, args) {
        var _this = _super.call(this, span) || this;
        _this.receiver = receiver;
        _this.name = name;
        _this.args = args;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    MethodCall.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitMethodCall(this, context);
    };
    return MethodCall;
}(AST));
var SafeMethodCall = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](SafeMethodCall, _super);
    /**
     * @param {?} span
     * @param {?} receiver
     * @param {?} name
     * @param {?} args
     */
    function SafeMethodCall(span, receiver, name, args) {
        var _this = _super.call(this, span) || this;
        _this.receiver = receiver;
        _this.name = name;
        _this.args = args;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    SafeMethodCall.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitSafeMethodCall(this, context);
    };
    return SafeMethodCall;
}(AST));
var FunctionCall = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](FunctionCall, _super);
    /**
     * @param {?} span
     * @param {?} target
     * @param {?} args
     */
    function FunctionCall(span, target, args) {
        var _this = _super.call(this, span) || this;
        _this.target = target;
        _this.args = args;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    FunctionCall.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return visitor.visitFunctionCall(this, context);
    };
    return FunctionCall;
}(AST));
var ASTWithSource = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ASTWithSource, _super);
    /**
     * @param {?} ast
     * @param {?} source
     * @param {?} location
     * @param {?} errors
     */
    function ASTWithSource(ast, source, location, errors) {
        var _this = _super.call(this, new ParseSpan(0, source == null ? 0 : source.length)) || this;
        _this.ast = ast;
        _this.source = source;
        _this.location = location;
        _this.errors = errors;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    ASTWithSource.prototype.visit = function (visitor, context) {
        if (context === void 0) { context = null; }
        return this.ast.visit(visitor, context);
    };
    /**
     * @return {?}
     */
    ASTWithSource.prototype.toString = function () { return this.source + " in " + this.location; };
    return ASTWithSource;
}(AST));
var TemplateBinding = (function () {
    /**
     * @param {?} span
     * @param {?} key
     * @param {?} keyIsVar
     * @param {?} name
     * @param {?} expression
     */
    function TemplateBinding(span, key, keyIsVar, name, expression) {
        this.span = span;
        this.key = key;
        this.keyIsVar = keyIsVar;
        this.name = name;
        this.expression = expression;
    }
    return TemplateBinding;
}());
var NullAstVisitor = (function () {
    function NullAstVisitor() {
    }
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitBinary = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitChain = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitConditional = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitFunctionCall = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitImplicitReceiver = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitInterpolation = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitKeyedRead = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitKeyedWrite = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitLiteralArray = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitLiteralMap = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitLiteralPrimitive = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitMethodCall = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitPipe = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitPrefixNot = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitNonNullAssert = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitPropertyRead = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitPropertyWrite = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitQuote = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitSafeMethodCall = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    NullAstVisitor.prototype.visitSafePropertyRead = function (ast, context) { };
    return NullAstVisitor;
}());
var RecursiveAstVisitor = (function () {
    function RecursiveAstVisitor() {
    }
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitBinary = function (ast, context) {
        ast.left.visit(this);
        ast.right.visit(this);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitChain = function (ast, context) { return this.visitAll(ast.expressions, context); };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitConditional = function (ast, context) {
        ast.condition.visit(this);
        ast.trueExp.visit(this);
        ast.falseExp.visit(this);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitPipe = function (ast, context) {
        ast.exp.visit(this);
        this.visitAll(ast.args, context);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitFunctionCall = function (ast, context) {
        ((ast.target)).visit(this);
        this.visitAll(ast.args, context);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitImplicitReceiver = function (ast, context) { return null; };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitInterpolation = function (ast, context) {
        return this.visitAll(ast.expressions, context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitKeyedRead = function (ast, context) {
        ast.obj.visit(this);
        ast.key.visit(this);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitKeyedWrite = function (ast, context) {
        ast.obj.visit(this);
        ast.key.visit(this);
        ast.value.visit(this);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitLiteralArray = function (ast, context) {
        return this.visitAll(ast.expressions, context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitLiteralMap = function (ast, context) { return this.visitAll(ast.values, context); };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitLiteralPrimitive = function (ast, context) { return null; };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitMethodCall = function (ast, context) {
        ast.receiver.visit(this);
        return this.visitAll(ast.args, context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitPrefixNot = function (ast, context) {
        ast.expression.visit(this);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitNonNullAssert = function (ast, context) {
        ast.expression.visit(this);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitPropertyRead = function (ast, context) {
        ast.receiver.visit(this);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitPropertyWrite = function (ast, context) {
        ast.receiver.visit(this);
        ast.value.visit(this);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitSafePropertyRead = function (ast, context) {
        ast.receiver.visit(this);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitSafeMethodCall = function (ast, context) {
        ast.receiver.visit(this);
        return this.visitAll(ast.args, context);
    };
    /**
     * @param {?} asts
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitAll = function (asts, context) {
        var _this = this;
        asts.forEach(function (ast) { return ast.visit(_this, context); });
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor.prototype.visitQuote = function (ast, context) { return null; };
    return RecursiveAstVisitor;
}());
var AstTransformer = (function () {
    function AstTransformer() {
    }
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitImplicitReceiver = function (ast, context) { return ast; };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitInterpolation = function (ast, context) {
        return new Interpolation(ast.span, ast.strings, this.visitAll(ast.expressions));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitLiteralPrimitive = function (ast, context) {
        return new LiteralPrimitive(ast.span, ast.value);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitPropertyRead = function (ast, context) {
        return new PropertyRead(ast.span, ast.receiver.visit(this), ast.name);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitPropertyWrite = function (ast, context) {
        return new PropertyWrite(ast.span, ast.receiver.visit(this), ast.name, ast.value.visit(this));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitSafePropertyRead = function (ast, context) {
        return new SafePropertyRead(ast.span, ast.receiver.visit(this), ast.name);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitMethodCall = function (ast, context) {
        return new MethodCall(ast.span, ast.receiver.visit(this), ast.name, this.visitAll(ast.args));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitSafeMethodCall = function (ast, context) {
        return new SafeMethodCall(ast.span, ast.receiver.visit(this), ast.name, this.visitAll(ast.args));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitFunctionCall = function (ast, context) {
        return new FunctionCall(ast.span, /** @type {?} */ ((ast.target)).visit(this), this.visitAll(ast.args));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitLiteralArray = function (ast, context) {
        return new LiteralArray(ast.span, this.visitAll(ast.expressions));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitLiteralMap = function (ast, context) {
        return new LiteralMap(ast.span, ast.keys, this.visitAll(ast.values));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitBinary = function (ast, context) {
        return new Binary(ast.span, ast.operation, ast.left.visit(this), ast.right.visit(this));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitPrefixNot = function (ast, context) {
        return new PrefixNot(ast.span, ast.expression.visit(this));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitNonNullAssert = function (ast, context) {
        return new NonNullAssert(ast.span, ast.expression.visit(this));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitConditional = function (ast, context) {
        return new Conditional(ast.span, ast.condition.visit(this), ast.trueExp.visit(this), ast.falseExp.visit(this));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitPipe = function (ast, context) {
        return new BindingPipe(ast.span, ast.exp.visit(this), ast.name, this.visitAll(ast.args));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitKeyedRead = function (ast, context) {
        return new KeyedRead(ast.span, ast.obj.visit(this), ast.key.visit(this));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitKeyedWrite = function (ast, context) {
        return new KeyedWrite(ast.span, ast.obj.visit(this), ast.key.visit(this), ast.value.visit(this));
    };
    /**
     * @param {?} asts
     * @return {?}
     */
    AstTransformer.prototype.visitAll = function (asts) {
        var /** @type {?} */ res = new Array(asts.length);
        for (var /** @type {?} */ i = 0; i < asts.length; ++i) {
            res[i] = asts[i].visit(this);
        }
        return res;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitChain = function (ast, context) {
        return new Chain(ast.span, this.visitAll(ast.expressions));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer.prototype.visitQuote = function (ast, context) {
        return new Quote(ast.span, ast.prefix, ast.uninterpretedExpression, ast.location);
    };
    return AstTransformer;
}());
/**
 * @param {?} ast
 * @param {?} visitor
 * @param {?=} context
 * @return {?}
 */
function visitAstChildren(ast, visitor, context) {
    /**
     * @param {?} ast
     * @return {?}
     */
    function visit(ast) {
        visitor.visit && visitor.visit(ast, context) || ast.visit(visitor, context);
    }
    /**
     * @template T
     * @param {?} asts
     * @return {?}
     */
    function visitAll(asts) { asts.forEach(visit); }
    ast.visit({
        /**
         * @param {?} ast
         * @return {?}
         */
        visitBinary: function (ast) {
            visit(ast.left);
            visit(ast.right);
        },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitChain: function (ast) { visitAll(ast.expressions); },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitConditional: function (ast) {
            visit(ast.condition);
            visit(ast.trueExp);
            visit(ast.falseExp);
        },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitFunctionCall: function (ast) {
            if (ast.target) {
                visit(ast.target);
            }
            visitAll(ast.args);
        },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitImplicitReceiver: function (ast) { },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitInterpolation: function (ast) { visitAll(ast.expressions); },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitKeyedRead: function (ast) {
            visit(ast.obj);
            visit(ast.key);
        },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitKeyedWrite: function (ast) {
            visit(ast.obj);
            visit(ast.key);
            visit(ast.obj);
        },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitLiteralArray: function (ast) { visitAll(ast.expressions); },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitLiteralMap: function (ast) { },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitLiteralPrimitive: function (ast) { },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitMethodCall: function (ast) {
            visit(ast.receiver);
            visitAll(ast.args);
        },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitPipe: function (ast) {
            visit(ast.exp);
            visitAll(ast.args);
        },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitPrefixNot: function (ast) { visit(ast.expression); },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitNonNullAssert: function (ast) { visit(ast.expression); },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitPropertyRead: function (ast) { visit(ast.receiver); },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitPropertyWrite: function (ast) {
            visit(ast.receiver);
            visit(ast.value);
        },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitQuote: function (ast) { },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitSafeMethodCall: function (ast) {
            visit(ast.receiver);
            visitAll(ast.args);
        },
        /**
         * @param {?} ast
         * @return {?}
         */
        visitSafePropertyRead: function (ast) { visit(ast.receiver); },
    });
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var $EOF = 0;
var $TAB = 9;
var $LF = 10;
var $VTAB = 11;
var $FF = 12;
var $CR = 13;
var $SPACE = 32;
var $BANG = 33;
var $DQ = 34;
var $HASH = 35;
var $$ = 36;
var $PERCENT = 37;
var $AMPERSAND = 38;
var $SQ = 39;
var $LPAREN = 40;
var $RPAREN = 41;
var $STAR = 42;
var $PLUS = 43;
var $COMMA = 44;
var $MINUS = 45;
var $PERIOD = 46;
var $SLASH = 47;
var $COLON = 58;
var $SEMICOLON = 59;
var $LT = 60;
var $EQ = 61;
var $GT = 62;
var $QUESTION = 63;
var $0 = 48;
var $9 = 57;
var $A = 65;
var $E = 69;
var $F = 70;
var $X = 88;
var $Z = 90;
var $LBRACKET = 91;
var $BACKSLASH = 92;
var $RBRACKET = 93;
var $CARET = 94;
var $_ = 95;
var $a = 97;
var $e = 101;
var $f = 102;
var $n = 110;
var $r = 114;
var $t = 116;
var $u = 117;
var $v = 118;
var $x = 120;
var $z = 122;
var $LBRACE = 123;
var $BAR = 124;
var $RBRACE = 125;
var $NBSP = 160;
var $BT = 96;
/**
 * @param {?} code
 * @return {?}
 */
function isWhitespace(code) {
    return (code >= $TAB && code <= $SPACE) || (code == $NBSP);
}
/**
 * @param {?} code
 * @return {?}
 */
function isDigit(code) {
    return $0 <= code && code <= $9;
}
/**
 * @param {?} code
 * @return {?}
 */
function isAsciiLetter(code) {
    return code >= $a && code <= $z || code >= $A && code <= $Z;
}
/**
 * @param {?} code
 * @return {?}
 */
function isAsciiHexDigit(code) {
    return code >= $a && code <= $f || code >= $A && code <= $F || isDigit(code);
}
/**
 * A replacement for \@Injectable to be used in the compiler, so that
 * we don't try to evaluate the metadata in the compiler during AoT.
 * This decorator is enough to make the compiler work with the ReflectiveInjector though.
 * \@Annotation
 * @return {?}
 */
function CompilerInjectable() {
    return function (x) { return x; };
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} identifier
 * @param {?} value
 * @return {?}
 */
function assertArrayOfStrings(identifier, value) {
    if (!Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_22" /* isDevMode */])() || value == null) {
        return;
    }
    if (!Array.isArray(value)) {
        throw new Error("Expected '" + identifier + "' to be an array of strings.");
    }
    for (var /** @type {?} */ i = 0; i < value.length; i += 1) {
        if (typeof value[i] !== 'string') {
            throw new Error("Expected '" + identifier + "' to be an array of strings.");
        }
    }
}
var INTERPOLATION_BLACKLIST_REGEXPS = [
    /^\s*$/,
    /[<>]/,
    /^[{}]$/,
    /&(#|[a-z])/i,
    /^\/\//,
];
/**
 * @param {?} identifier
 * @param {?} value
 * @return {?}
 */
function assertInterpolationSymbols(identifier, value) {
    if (value != null && !(Array.isArray(value) && value.length == 2)) {
        throw new Error("Expected '" + identifier + "' to be an array, [start, end].");
    }
    else if (Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_22" /* isDevMode */])() && value != null) {
        var /** @type {?} */ start_1 = (value[0]);
        var /** @type {?} */ end_1 = (value[1]);
        // black list checking
        INTERPOLATION_BLACKLIST_REGEXPS.forEach(function (regexp) {
            if (regexp.test(start_1) || regexp.test(end_1)) {
                throw new Error("['" + start_1 + "', '" + end_1 + "'] contains unusable interpolation symbol.");
            }
        });
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var InterpolationConfig = (function () {
    /**
     * @param {?} start
     * @param {?} end
     */
    function InterpolationConfig(start, end) {
        this.start = start;
        this.end = end;
    }
    /**
     * @param {?} markers
     * @return {?}
     */
    InterpolationConfig.fromArray = function (markers) {
        if (!markers) {
            return DEFAULT_INTERPOLATION_CONFIG;
        }
        assertInterpolationSymbols('interpolation', markers);
        return new InterpolationConfig(markers[0], markers[1]);
    };
    return InterpolationConfig;
}());
var DEFAULT_INTERPOLATION_CONFIG = new InterpolationConfig('{{', '}}');
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var TokenType = {};
TokenType.Character = 0;
TokenType.Identifier = 1;
TokenType.Keyword = 2;
TokenType.String = 3;
TokenType.Operator = 4;
TokenType.Number = 5;
TokenType.Error = 6;
TokenType[TokenType.Character] = "Character";
TokenType[TokenType.Identifier] = "Identifier";
TokenType[TokenType.Keyword] = "Keyword";
TokenType[TokenType.String] = "String";
TokenType[TokenType.Operator] = "Operator";
TokenType[TokenType.Number] = "Number";
TokenType[TokenType.Error] = "Error";
var KEYWORDS = ['var', 'let', 'as', 'null', 'undefined', 'true', 'false', 'if', 'else', 'this'];
var Lexer = (function () {
    function Lexer() {
    }
    /**
     * @param {?} text
     * @return {?}
     */
    Lexer.prototype.tokenize = function (text) {
        var /** @type {?} */ scanner = new _Scanner(text);
        var /** @type {?} */ tokens = [];
        var /** @type {?} */ token = scanner.scanToken();
        while (token != null) {
            tokens.push(token);
            token = scanner.scanToken();
        }
        return tokens;
    };
    return Lexer;
}());
Lexer.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
Lexer.ctorParameters = function () { return []; };
var Token = (function () {
    /**
     * @param {?} index
     * @param {?} type
     * @param {?} numValue
     * @param {?} strValue
     */
    function Token(index, type, numValue, strValue) {
        this.index = index;
        this.type = type;
        this.numValue = numValue;
        this.strValue = strValue;
    }
    /**
     * @param {?} code
     * @return {?}
     */
    Token.prototype.isCharacter = function (code) {
        return this.type == TokenType.Character && this.numValue == code;
    };
    /**
     * @return {?}
     */
    Token.prototype.isNumber = function () { return this.type == TokenType.Number; };
    /**
     * @return {?}
     */
    Token.prototype.isString = function () { return this.type == TokenType.String; };
    /**
     * @param {?} operater
     * @return {?}
     */
    Token.prototype.isOperator = function (operater) {
        return this.type == TokenType.Operator && this.strValue == operater;
    };
    /**
     * @return {?}
     */
    Token.prototype.isIdentifier = function () { return this.type == TokenType.Identifier; };
    /**
     * @return {?}
     */
    Token.prototype.isKeyword = function () { return this.type == TokenType.Keyword; };
    /**
     * @return {?}
     */
    Token.prototype.isKeywordLet = function () { return this.type == TokenType.Keyword && this.strValue == 'let'; };
    /**
     * @return {?}
     */
    Token.prototype.isKeywordAs = function () { return this.type == TokenType.Keyword && this.strValue == 'as'; };
    /**
     * @return {?}
     */
    Token.prototype.isKeywordNull = function () { return this.type == TokenType.Keyword && this.strValue == 'null'; };
    /**
     * @return {?}
     */
    Token.prototype.isKeywordUndefined = function () {
        return this.type == TokenType.Keyword && this.strValue == 'undefined';
    };
    /**
     * @return {?}
     */
    Token.prototype.isKeywordTrue = function () { return this.type == TokenType.Keyword && this.strValue == 'true'; };
    /**
     * @return {?}
     */
    Token.prototype.isKeywordFalse = function () { return this.type == TokenType.Keyword && this.strValue == 'false'; };
    /**
     * @return {?}
     */
    Token.prototype.isKeywordThis = function () { return this.type == TokenType.Keyword && this.strValue == 'this'; };
    /**
     * @return {?}
     */
    Token.prototype.isError = function () { return this.type == TokenType.Error; };
    /**
     * @return {?}
     */
    Token.prototype.toNumber = function () { return this.type == TokenType.Number ? this.numValue : -1; };
    /**
     * @return {?}
     */
    Token.prototype.toString = function () {
        switch (this.type) {
            case TokenType.Character:
            case TokenType.Identifier:
            case TokenType.Keyword:
            case TokenType.Operator:
            case TokenType.String:
            case TokenType.Error:
                return this.strValue;
            case TokenType.Number:
                return this.numValue.toString();
            default:
                return null;
        }
    };
    return Token;
}());
/**
 * @param {?} index
 * @param {?} code
 * @return {?}
 */
function newCharacterToken(index, code) {
    return new Token(index, TokenType.Character, code, String.fromCharCode(code));
}
/**
 * @param {?} index
 * @param {?} text
 * @return {?}
 */
function newIdentifierToken(index, text) {
    return new Token(index, TokenType.Identifier, 0, text);
}
/**
 * @param {?} index
 * @param {?} text
 * @return {?}
 */
function newKeywordToken(index, text) {
    return new Token(index, TokenType.Keyword, 0, text);
}
/**
 * @param {?} index
 * @param {?} text
 * @return {?}
 */
function newOperatorToken(index, text) {
    return new Token(index, TokenType.Operator, 0, text);
}
/**
 * @param {?} index
 * @param {?} text
 * @return {?}
 */
function newStringToken(index, text) {
    return new Token(index, TokenType.String, 0, text);
}
/**
 * @param {?} index
 * @param {?} n
 * @return {?}
 */
function newNumberToken(index, n) {
    return new Token(index, TokenType.Number, n, '');
}
/**
 * @param {?} index
 * @param {?} message
 * @return {?}
 */
function newErrorToken(index, message) {
    return new Token(index, TokenType.Error, 0, message);
}
var EOF = new Token(-1, TokenType.Character, 0, '');
var _Scanner = (function () {
    /**
     * @param {?} input
     */
    function _Scanner(input) {
        this.input = input;
        this.peek = 0;
        this.index = -1;
        this.length = input.length;
        this.advance();
    }
    /**
     * @return {?}
     */
    _Scanner.prototype.advance = function () {
        this.peek = ++this.index >= this.length ? $EOF : this.input.charCodeAt(this.index);
    };
    /**
     * @return {?}
     */
    _Scanner.prototype.scanToken = function () {
        var /** @type {?} */ input = this.input, /** @type {?} */ length = this.length;
        var /** @type {?} */ peek = this.peek, /** @type {?} */ index = this.index;
        // Skip whitespace.
        while (peek <= $SPACE) {
            if (++index >= length) {
                peek = $EOF;
                break;
            }
            else {
                peek = input.charCodeAt(index);
            }
        }
        this.peek = peek;
        this.index = index;
        if (index >= length) {
            return null;
        }
        // Handle identifiers and numbers.
        if (isIdentifierStart(peek))
            return this.scanIdentifier();
        if (isDigit(peek))
            return this.scanNumber(index);
        var /** @type {?} */ start = index;
        switch (peek) {
            case $PERIOD:
                this.advance();
                return isDigit(this.peek) ? this.scanNumber(start) :
                    newCharacterToken(start, $PERIOD);
            case $LPAREN:
            case $RPAREN:
            case $LBRACE:
            case $RBRACE:
            case $LBRACKET:
            case $RBRACKET:
            case $COMMA:
            case $COLON:
            case $SEMICOLON:
                return this.scanCharacter(start, peek);
            case $SQ:
            case $DQ:
                return this.scanString();
            case $HASH:
            case $PLUS:
            case $MINUS:
            case $STAR:
            case $SLASH:
            case $PERCENT:
            case $CARET:
                return this.scanOperator(start, String.fromCharCode(peek));
            case $QUESTION:
                return this.scanComplexOperator(start, '?', $PERIOD, '.');
            case $LT:
            case $GT:
                return this.scanComplexOperator(start, String.fromCharCode(peek), $EQ, '=');
            case $BANG:
            case $EQ:
                return this.scanComplexOperator(start, String.fromCharCode(peek), $EQ, '=', $EQ, '=');
            case $AMPERSAND:
                return this.scanComplexOperator(start, '&', $AMPERSAND, '&');
            case $BAR:
                return this.scanComplexOperator(start, '|', $BAR, '|');
            case $NBSP:
                while (isWhitespace(this.peek))
                    this.advance();
                return this.scanToken();
        }
        this.advance();
        return this.error("Unexpected character [" + String.fromCharCode(peek) + "]", 0);
    };
    /**
     * @param {?} start
     * @param {?} code
     * @return {?}
     */
    _Scanner.prototype.scanCharacter = function (start, code) {
        this.advance();
        return newCharacterToken(start, code);
    };
    /**
     * @param {?} start
     * @param {?} str
     * @return {?}
     */
    _Scanner.prototype.scanOperator = function (start, str) {
        this.advance();
        return newOperatorToken(start, str);
    };
    /**
     * Tokenize a 2/3 char long operator
     *
     * @param {?} start start index in the expression
     * @param {?} one first symbol (always part of the operator)
     * @param {?} twoCode code point for the second symbol
     * @param {?} two second symbol (part of the operator when the second code point matches)
     * @param {?=} threeCode code point for the third symbol
     * @param {?=} three third symbol (part of the operator when provided and matches source expression)
     * @return {?}
     */
    _Scanner.prototype.scanComplexOperator = function (start, one, twoCode, two, threeCode, three) {
        this.advance();
        var /** @type {?} */ str = one;
        if (this.peek == twoCode) {
            this.advance();
            str += two;
        }
        if (threeCode != null && this.peek == threeCode) {
            this.advance();
            str += three;
        }
        return newOperatorToken(start, str);
    };
    /**
     * @return {?}
     */
    _Scanner.prototype.scanIdentifier = function () {
        var /** @type {?} */ start = this.index;
        this.advance();
        while (isIdentifierPart(this.peek))
            this.advance();
        var /** @type {?} */ str = this.input.substring(start, this.index);
        return KEYWORDS.indexOf(str) > -1 ? newKeywordToken(start, str) :
            newIdentifierToken(start, str);
    };
    /**
     * @param {?} start
     * @return {?}
     */
    _Scanner.prototype.scanNumber = function (start) {
        var /** @type {?} */ simple = (this.index === start);
        this.advance(); // Skip initial digit.
        while (true) {
            if (isDigit(this.peek)) {
                // Do nothing.
            }
            else if (this.peek == $PERIOD) {
                simple = false;
            }
            else if (isExponentStart(this.peek)) {
                this.advance();
                if (isExponentSign(this.peek))
                    this.advance();
                if (!isDigit(this.peek))
                    return this.error('Invalid exponent', -1);
                simple = false;
            }
            else {
                break;
            }
            this.advance();
        }
        var /** @type {?} */ str = this.input.substring(start, this.index);
        var /** @type {?} */ value = simple ? parseIntAutoRadix(str) : parseFloat(str);
        return newNumberToken(start, value);
    };
    /**
     * @return {?}
     */
    _Scanner.prototype.scanString = function () {
        var /** @type {?} */ start = this.index;
        var /** @type {?} */ quote = this.peek;
        this.advance(); // Skip initial quote.
        var /** @type {?} */ buffer = '';
        var /** @type {?} */ marker = this.index;
        var /** @type {?} */ input = this.input;
        while (this.peek != quote) {
            if (this.peek == $BACKSLASH) {
                buffer += input.substring(marker, this.index);
                this.advance();
                var /** @type {?} */ unescapedCode = void 0;
                // Workaround for TS2.1-introduced type strictness
                this.peek = this.peek;
                if (this.peek == $u) {
                    // 4 character hex code for unicode character.
                    var /** @type {?} */ hex = input.substring(this.index + 1, this.index + 5);
                    if (/^[0-9a-f]+$/i.test(hex)) {
                        unescapedCode = parseInt(hex, 16);
                    }
                    else {
                        return this.error("Invalid unicode escape [\\u" + hex + "]", 0);
                    }
                    for (var /** @type {?} */ i = 0; i < 5; i++) {
                        this.advance();
                    }
                }
                else {
                    unescapedCode = unescape(this.peek);
                    this.advance();
                }
                buffer += String.fromCharCode(unescapedCode);
                marker = this.index;
            }
            else if (this.peek == $EOF) {
                return this.error('Unterminated quote', 0);
            }
            else {
                this.advance();
            }
        }
        var /** @type {?} */ last = input.substring(marker, this.index);
        this.advance(); // Skip terminating quote.
        return newStringToken(start, buffer + last);
    };
    /**
     * @param {?} message
     * @param {?} offset
     * @return {?}
     */
    _Scanner.prototype.error = function (message, offset) {
        var /** @type {?} */ position = this.index + offset;
        return newErrorToken(position, "Lexer Error: " + message + " at column " + position + " in expression [" + this.input + "]");
    };
    return _Scanner;
}());
/**
 * @param {?} code
 * @return {?}
 */
function isIdentifierStart(code) {
    return ($a <= code && code <= $z) || ($A <= code && code <= $Z) ||
        (code == $_) || (code == $$);
}
/**
 * @param {?} input
 * @return {?}
 */
function isIdentifier(input) {
    if (input.length == 0)
        return false;
    var /** @type {?} */ scanner = new _Scanner(input);
    if (!isIdentifierStart(scanner.peek))
        return false;
    scanner.advance();
    while (scanner.peek !== $EOF) {
        if (!isIdentifierPart(scanner.peek))
            return false;
        scanner.advance();
    }
    return true;
}
/**
 * @param {?} code
 * @return {?}
 */
function isIdentifierPart(code) {
    return isAsciiLetter(code) || isDigit(code) || (code == $_) ||
        (code == $$);
}
/**
 * @param {?} code
 * @return {?}
 */
function isExponentStart(code) {
    return code == $e || code == $E;
}
/**
 * @param {?} code
 * @return {?}
 */
function isExponentSign(code) {
    return code == $MINUS || code == $PLUS;
}
/**
 * @param {?} code
 * @return {?}
 */
function isQuote(code) {
    return code === $SQ || code === $DQ || code === $BT;
}
/**
 * @param {?} code
 * @return {?}
 */
function unescape(code) {
    switch (code) {
        case $n:
            return $LF;
        case $f:
            return $FF;
        case $r:
            return $CR;
        case $t:
            return $TAB;
        case $v:
            return $VTAB;
        default:
            return code;
    }
}
/**
 * @param {?} text
 * @return {?}
 */
function parseIntAutoRadix(text) {
    var /** @type {?} */ result = parseInt(text);
    if (isNaN(result)) {
        throw new Error('Invalid integer literal when parsing ' + text);
    }
    return result;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var SplitInterpolation = (function () {
    /**
     * @param {?} strings
     * @param {?} expressions
     * @param {?} offsets
     */
    function SplitInterpolation(strings, expressions, offsets) {
        this.strings = strings;
        this.expressions = expressions;
        this.offsets = offsets;
    }
    return SplitInterpolation;
}());
var TemplateBindingParseResult = (function () {
    /**
     * @param {?} templateBindings
     * @param {?} warnings
     * @param {?} errors
     */
    function TemplateBindingParseResult(templateBindings, warnings, errors) {
        this.templateBindings = templateBindings;
        this.warnings = warnings;
        this.errors = errors;
    }
    return TemplateBindingParseResult;
}());
/**
 * @param {?} config
 * @return {?}
 */
function _createInterpolateRegExp(config) {
    var /** @type {?} */ pattern = escapeRegExp(config.start) + '([\\s\\S]*?)' + escapeRegExp(config.end);
    return new RegExp(pattern, 'g');
}
var Parser = (function () {
    /**
     * @param {?} _lexer
     */
    function Parser(_lexer) {
        this._lexer = _lexer;
        this.errors = [];
    }
    /**
     * @param {?} input
     * @param {?} location
     * @param {?=} interpolationConfig
     * @return {?}
     */
    Parser.prototype.parseAction = function (input, location, interpolationConfig) {
        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }
        this._checkNoInterpolation(input, location, interpolationConfig);
        var /** @type {?} */ sourceToLex = this._stripComments(input);
        var /** @type {?} */ tokens = this._lexer.tokenize(this._stripComments(input));
        var /** @type {?} */ ast = new _ParseAST(input, location, tokens, sourceToLex.length, true, this.errors, input.length - sourceToLex.length)
            .parseChain();
        return new ASTWithSource(ast, input, location, this.errors);
    };
    /**
     * @param {?} input
     * @param {?} location
     * @param {?=} interpolationConfig
     * @return {?}
     */
    Parser.prototype.parseBinding = function (input, location, interpolationConfig) {
        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }
        var /** @type {?} */ ast = this._parseBindingAst(input, location, interpolationConfig);
        return new ASTWithSource(ast, input, location, this.errors);
    };
    /**
     * @param {?} input
     * @param {?} location
     * @param {?=} interpolationConfig
     * @return {?}
     */
    Parser.prototype.parseSimpleBinding = function (input, location, interpolationConfig) {
        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }
        var /** @type {?} */ ast = this._parseBindingAst(input, location, interpolationConfig);
        var /** @type {?} */ errors = SimpleExpressionChecker.check(ast);
        if (errors.length > 0) {
            this._reportError("Host binding expression cannot contain " + errors.join(' '), input, location);
        }
        return new ASTWithSource(ast, input, location, this.errors);
    };
    /**
     * @param {?} message
     * @param {?} input
     * @param {?} errLocation
     * @param {?=} ctxLocation
     * @return {?}
     */
    Parser.prototype._reportError = function (message, input, errLocation, ctxLocation) {
        this.errors.push(new ParserError(message, input, errLocation, ctxLocation));
    };
    /**
     * @param {?} input
     * @param {?} location
     * @param {?} interpolationConfig
     * @return {?}
     */
    Parser.prototype._parseBindingAst = function (input, location, interpolationConfig) {
        // Quotes expressions use 3rd-party expression language. We don't want to use
        // our lexer or parser for that, so we check for that ahead of time.
        var /** @type {?} */ quote = this._parseQuote(input, location);
        if (quote != null) {
            return quote;
        }
        this._checkNoInterpolation(input, location, interpolationConfig);
        var /** @type {?} */ sourceToLex = this._stripComments(input);
        var /** @type {?} */ tokens = this._lexer.tokenize(sourceToLex);
        return new _ParseAST(input, location, tokens, sourceToLex.length, false, this.errors, input.length - sourceToLex.length)
            .parseChain();
    };
    /**
     * @param {?} input
     * @param {?} location
     * @return {?}
     */
    Parser.prototype._parseQuote = function (input, location) {
        if (input == null)
            return null;
        var /** @type {?} */ prefixSeparatorIndex = input.indexOf(':');
        if (prefixSeparatorIndex == -1)
            return null;
        var /** @type {?} */ prefix = input.substring(0, prefixSeparatorIndex).trim();
        if (!isIdentifier(prefix))
            return null;
        var /** @type {?} */ uninterpretedExpression = input.substring(prefixSeparatorIndex + 1);
        return new Quote(new ParseSpan(0, input.length), prefix, uninterpretedExpression, location);
    };
    /**
     * @param {?} prefixToken
     * @param {?} input
     * @param {?} location
     * @return {?}
     */
    Parser.prototype.parseTemplateBindings = function (prefixToken, input, location) {
        var /** @type {?} */ tokens = this._lexer.tokenize(input);
        if (prefixToken) {
            // Prefix the tokens with the tokens from prefixToken but have them take no space (0 index).
            var /** @type {?} */ prefixTokens = this._lexer.tokenize(prefixToken).map(function (t) {
                t.index = 0;
                return t;
            });
            tokens.unshift.apply(tokens, prefixTokens);
        }
        return new _ParseAST(input, location, tokens, input.length, false, this.errors, 0)
            .parseTemplateBindings();
    };
    /**
     * @param {?} input
     * @param {?} location
     * @param {?=} interpolationConfig
     * @return {?}
     */
    Parser.prototype.parseInterpolation = function (input, location, interpolationConfig) {
        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }
        var /** @type {?} */ split = this.splitInterpolation(input, location, interpolationConfig);
        if (split == null)
            return null;
        var /** @type {?} */ expressions = [];
        for (var /** @type {?} */ i = 0; i < split.expressions.length; ++i) {
            var /** @type {?} */ expressionText = split.expressions[i];
            var /** @type {?} */ sourceToLex = this._stripComments(expressionText);
            var /** @type {?} */ tokens = this._lexer.tokenize(sourceToLex);
            var /** @type {?} */ ast = new _ParseAST(input, location, tokens, sourceToLex.length, false, this.errors, split.offsets[i] + (expressionText.length - sourceToLex.length))
                .parseChain();
            expressions.push(ast);
        }
        return new ASTWithSource(new Interpolation(new ParseSpan(0, input == null ? 0 : input.length), split.strings, expressions), input, location, this.errors);
    };
    /**
     * @param {?} input
     * @param {?} location
     * @param {?=} interpolationConfig
     * @return {?}
     */
    Parser.prototype.splitInterpolation = function (input, location, interpolationConfig) {
        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }
        var /** @type {?} */ regexp = _createInterpolateRegExp(interpolationConfig);
        var /** @type {?} */ parts = input.split(regexp);
        if (parts.length <= 1) {
            return null;
        }
        var /** @type {?} */ strings = [];
        var /** @type {?} */ expressions = [];
        var /** @type {?} */ offsets = [];
        var /** @type {?} */ offset = 0;
        for (var /** @type {?} */ i = 0; i < parts.length; i++) {
            var /** @type {?} */ part = parts[i];
            if (i % 2 === 0) {
                // fixed string
                strings.push(part);
                offset += part.length;
            }
            else if (part.trim().length > 0) {
                offset += interpolationConfig.start.length;
                expressions.push(part);
                offsets.push(offset);
                offset += part.length + interpolationConfig.end.length;
            }
            else {
                this._reportError('Blank expressions are not allowed in interpolated strings', input, "at column " + this._findInterpolationErrorColumn(parts, i, interpolationConfig) + " in", location);
                expressions.push('$implict');
                offsets.push(offset);
            }
        }
        return new SplitInterpolation(strings, expressions, offsets);
    };
    /**
     * @param {?} input
     * @param {?} location
     * @return {?}
     */
    Parser.prototype.wrapLiteralPrimitive = function (input, location) {
        return new ASTWithSource(new LiteralPrimitive(new ParseSpan(0, input == null ? 0 : input.length), input), input, location, this.errors);
    };
    /**
     * @param {?} input
     * @return {?}
     */
    Parser.prototype._stripComments = function (input) {
        var /** @type {?} */ i = this._commentStart(input);
        return i != null ? input.substring(0, i).trim() : input;
    };
    /**
     * @param {?} input
     * @return {?}
     */
    Parser.prototype._commentStart = function (input) {
        var /** @type {?} */ outerQuote = null;
        for (var /** @type {?} */ i = 0; i < input.length - 1; i++) {
            var /** @type {?} */ char = input.charCodeAt(i);
            var /** @type {?} */ nextChar = input.charCodeAt(i + 1);
            if (char === $SLASH && nextChar == $SLASH && outerQuote == null)
                return i;
            if (outerQuote === char) {
                outerQuote = null;
            }
            else if (outerQuote == null && isQuote(char)) {
                outerQuote = char;
            }
        }
        return null;
    };
    /**
     * @param {?} input
     * @param {?} location
     * @param {?} interpolationConfig
     * @return {?}
     */
    Parser.prototype._checkNoInterpolation = function (input, location, interpolationConfig) {
        var /** @type {?} */ regexp = _createInterpolateRegExp(interpolationConfig);
        var /** @type {?} */ parts = input.split(regexp);
        if (parts.length > 1) {
            this._reportError("Got interpolation (" + interpolationConfig.start + interpolationConfig.end + ") where expression was expected", input, "at column " + this._findInterpolationErrorColumn(parts, 1, interpolationConfig) + " in", location);
        }
    };
    /**
     * @param {?} parts
     * @param {?} partInErrIdx
     * @param {?} interpolationConfig
     * @return {?}
     */
    Parser.prototype._findInterpolationErrorColumn = function (parts, partInErrIdx, interpolationConfig) {
        var /** @type {?} */ errLocation = '';
        for (var /** @type {?} */ j = 0; j < partInErrIdx; j++) {
            errLocation += j % 2 === 0 ?
                parts[j] :
                "" + interpolationConfig.start + parts[j] + interpolationConfig.end;
        }
        return errLocation.length;
    };
    return Parser;
}());
Parser.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
Parser.ctorParameters = function () { return [
    { type: Lexer, },
]; };
var _ParseAST = (function () {
    /**
     * @param {?} input
     * @param {?} location
     * @param {?} tokens
     * @param {?} inputLength
     * @param {?} parseAction
     * @param {?} errors
     * @param {?} offset
     */
    function _ParseAST(input, location, tokens, inputLength, parseAction, errors, offset) {
        this.input = input;
        this.location = location;
        this.tokens = tokens;
        this.inputLength = inputLength;
        this.parseAction = parseAction;
        this.errors = errors;
        this.offset = offset;
        this.rparensExpected = 0;
        this.rbracketsExpected = 0;
        this.rbracesExpected = 0;
        this.index = 0;
    }
    /**
     * @param {?} offset
     * @return {?}
     */
    _ParseAST.prototype.peek = function (offset) {
        var /** @type {?} */ i = this.index + offset;
        return i < this.tokens.length ? this.tokens[i] : EOF;
    };
    Object.defineProperty(_ParseAST.prototype, "next", {
        /**
         * @return {?}
         */
        get: function () { return this.peek(0); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(_ParseAST.prototype, "inputIndex", {
        /**
         * @return {?}
         */
        get: function () {
            return (this.index < this.tokens.length) ? this.next.index + this.offset :
                this.inputLength + this.offset;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} start
     * @return {?}
     */
    _ParseAST.prototype.span = function (start) { return new ParseSpan(start, this.inputIndex); };
    /**
     * @return {?}
     */
    _ParseAST.prototype.advance = function () { this.index++; };
    /**
     * @param {?} code
     * @return {?}
     */
    _ParseAST.prototype.optionalCharacter = function (code) {
        if (this.next.isCharacter(code)) {
            this.advance();
            return true;
        }
        else {
            return false;
        }
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.peekKeywordLet = function () { return this.next.isKeywordLet(); };
    /**
     * @return {?}
     */
    _ParseAST.prototype.peekKeywordAs = function () { return this.next.isKeywordAs(); };
    /**
     * @param {?} code
     * @return {?}
     */
    _ParseAST.prototype.expectCharacter = function (code) {
        if (this.optionalCharacter(code))
            return;
        this.error("Missing expected " + String.fromCharCode(code));
    };
    /**
     * @param {?} op
     * @return {?}
     */
    _ParseAST.prototype.optionalOperator = function (op) {
        if (this.next.isOperator(op)) {
            this.advance();
            return true;
        }
        else {
            return false;
        }
    };
    /**
     * @param {?} operator
     * @return {?}
     */
    _ParseAST.prototype.expectOperator = function (operator) {
        if (this.optionalOperator(operator))
            return;
        this.error("Missing expected operator " + operator);
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.expectIdentifierOrKeyword = function () {
        var /** @type {?} */ n = this.next;
        if (!n.isIdentifier() && !n.isKeyword()) {
            this.error("Unexpected token " + n + ", expected identifier or keyword");
            return '';
        }
        this.advance();
        return (n.toString());
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.expectIdentifierOrKeywordOrString = function () {
        var /** @type {?} */ n = this.next;
        if (!n.isIdentifier() && !n.isKeyword() && !n.isString()) {
            this.error("Unexpected token " + n + ", expected identifier, keyword, or string");
            return '';
        }
        this.advance();
        return (n.toString());
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parseChain = function () {
        var /** @type {?} */ exprs = [];
        var /** @type {?} */ start = this.inputIndex;
        while (this.index < this.tokens.length) {
            var /** @type {?} */ expr = this.parsePipe();
            exprs.push(expr);
            if (this.optionalCharacter($SEMICOLON)) {
                if (!this.parseAction) {
                    this.error('Binding expression cannot contain chained expression');
                }
                while (this.optionalCharacter($SEMICOLON)) {
                } // read all semicolons
            }
            else if (this.index < this.tokens.length) {
                this.error("Unexpected token '" + this.next + "'");
            }
        }
        if (exprs.length == 0)
            return new EmptyExpr(this.span(start));
        if (exprs.length == 1)
            return exprs[0];
        return new Chain(this.span(start), exprs);
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parsePipe = function () {
        var /** @type {?} */ result = this.parseExpression();
        if (this.optionalOperator('|')) {
            if (this.parseAction) {
                this.error('Cannot have a pipe in an action expression');
            }
            do {
                var /** @type {?} */ name = this.expectIdentifierOrKeyword();
                var /** @type {?} */ args = [];
                while (this.optionalCharacter($COLON)) {
                    args.push(this.parseExpression());
                }
                result = new BindingPipe(this.span(result.span.start), result, name, args);
            } while (this.optionalOperator('|'));
        }
        return result;
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parseExpression = function () { return this.parseConditional(); };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parseConditional = function () {
        var /** @type {?} */ start = this.inputIndex;
        var /** @type {?} */ result = this.parseLogicalOr();
        if (this.optionalOperator('?')) {
            var /** @type {?} */ yes = this.parsePipe();
            var /** @type {?} */ no = void 0;
            if (!this.optionalCharacter($COLON)) {
                var /** @type {?} */ end = this.inputIndex;
                var /** @type {?} */ expression = this.input.substring(start, end);
                this.error("Conditional expression " + expression + " requires all 3 expressions");
                no = new EmptyExpr(this.span(start));
            }
            else {
                no = this.parsePipe();
            }
            return new Conditional(this.span(start), result, yes, no);
        }
        else {
            return result;
        }
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parseLogicalOr = function () {
        // '||'
        var /** @type {?} */ result = this.parseLogicalAnd();
        while (this.optionalOperator('||')) {
            var /** @type {?} */ right = this.parseLogicalAnd();
            result = new Binary(this.span(result.span.start), '||', result, right);
        }
        return result;
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parseLogicalAnd = function () {
        // '&&'
        var /** @type {?} */ result = this.parseEquality();
        while (this.optionalOperator('&&')) {
            var /** @type {?} */ right = this.parseEquality();
            result = new Binary(this.span(result.span.start), '&&', result, right);
        }
        return result;
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parseEquality = function () {
        // '==','!=','===','!=='
        var /** @type {?} */ result = this.parseRelational();
        while (this.next.type == TokenType.Operator) {
            var /** @type {?} */ operator = this.next.strValue;
            switch (operator) {
                case '==':
                case '===':
                case '!=':
                case '!==':
                    this.advance();
                    var /** @type {?} */ right = this.parseRelational();
                    result = new Binary(this.span(result.span.start), operator, result, right);
                    continue;
            }
            break;
        }
        return result;
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parseRelational = function () {
        // '<', '>', '<=', '>='
        var /** @type {?} */ result = this.parseAdditive();
        while (this.next.type == TokenType.Operator) {
            var /** @type {?} */ operator = this.next.strValue;
            switch (operator) {
                case '<':
                case '>':
                case '<=':
                case '>=':
                    this.advance();
                    var /** @type {?} */ right = this.parseAdditive();
                    result = new Binary(this.span(result.span.start), operator, result, right);
                    continue;
            }
            break;
        }
        return result;
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parseAdditive = function () {
        // '+', '-'
        var /** @type {?} */ result = this.parseMultiplicative();
        while (this.next.type == TokenType.Operator) {
            var /** @type {?} */ operator = this.next.strValue;
            switch (operator) {
                case '+':
                case '-':
                    this.advance();
                    var /** @type {?} */ right = this.parseMultiplicative();
                    result = new Binary(this.span(result.span.start), operator, result, right);
                    continue;
            }
            break;
        }
        return result;
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parseMultiplicative = function () {
        // '*', '%', '/'
        var /** @type {?} */ result = this.parsePrefix();
        while (this.next.type == TokenType.Operator) {
            var /** @type {?} */ operator = this.next.strValue;
            switch (operator) {
                case '*':
                case '%':
                case '/':
                    this.advance();
                    var /** @type {?} */ right = this.parsePrefix();
                    result = new Binary(this.span(result.span.start), operator, result, right);
                    continue;
            }
            break;
        }
        return result;
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parsePrefix = function () {
        if (this.next.type == TokenType.Operator) {
            var /** @type {?} */ start = this.inputIndex;
            var /** @type {?} */ operator = this.next.strValue;
            var /** @type {?} */ result = void 0;
            switch (operator) {
                case '+':
                    this.advance();
                    return this.parsePrefix();
                case '-':
                    this.advance();
                    result = this.parsePrefix();
                    return new Binary(this.span(start), operator, new LiteralPrimitive(new ParseSpan(start, start), 0), result);
                case '!':
                    this.advance();
                    result = this.parsePrefix();
                    return new PrefixNot(this.span(start), result);
            }
        }
        return this.parseCallChain();
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parseCallChain = function () {
        var /** @type {?} */ result = this.parsePrimary();
        while (true) {
            if (this.optionalCharacter($PERIOD)) {
                result = this.parseAccessMemberOrMethodCall(result, false);
            }
            else if (this.optionalOperator('?.')) {
                result = this.parseAccessMemberOrMethodCall(result, true);
            }
            else if (this.optionalCharacter($LBRACKET)) {
                this.rbracketsExpected++;
                var /** @type {?} */ key = this.parsePipe();
                this.rbracketsExpected--;
                this.expectCharacter($RBRACKET);
                if (this.optionalOperator('=')) {
                    var /** @type {?} */ value = this.parseConditional();
                    result = new KeyedWrite(this.span(result.span.start), result, key, value);
                }
                else {
                    result = new KeyedRead(this.span(result.span.start), result, key);
                }
            }
            else if (this.optionalCharacter($LPAREN)) {
                this.rparensExpected++;
                var /** @type {?} */ args = this.parseCallArguments();
                this.rparensExpected--;
                this.expectCharacter($RPAREN);
                result = new FunctionCall(this.span(result.span.start), result, args);
            }
            else if (this.optionalOperator('!')) {
                result = new NonNullAssert(this.span(result.span.start), result);
            }
            else {
                return result;
            }
        }
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parsePrimary = function () {
        var /** @type {?} */ start = this.inputIndex;
        if (this.optionalCharacter($LPAREN)) {
            this.rparensExpected++;
            var /** @type {?} */ result = this.parsePipe();
            this.rparensExpected--;
            this.expectCharacter($RPAREN);
            return result;
        }
        else if (this.next.isKeywordNull()) {
            this.advance();
            return new LiteralPrimitive(this.span(start), null);
        }
        else if (this.next.isKeywordUndefined()) {
            this.advance();
            return new LiteralPrimitive(this.span(start), void 0);
        }
        else if (this.next.isKeywordTrue()) {
            this.advance();
            return new LiteralPrimitive(this.span(start), true);
        }
        else if (this.next.isKeywordFalse()) {
            this.advance();
            return new LiteralPrimitive(this.span(start), false);
        }
        else if (this.next.isKeywordThis()) {
            this.advance();
            return new ImplicitReceiver(this.span(start));
        }
        else if (this.optionalCharacter($LBRACKET)) {
            this.rbracketsExpected++;
            var /** @type {?} */ elements = this.parseExpressionList($RBRACKET);
            this.rbracketsExpected--;
            this.expectCharacter($RBRACKET);
            return new LiteralArray(this.span(start), elements);
        }
        else if (this.next.isCharacter($LBRACE)) {
            return this.parseLiteralMap();
        }
        else if (this.next.isIdentifier()) {
            return this.parseAccessMemberOrMethodCall(new ImplicitReceiver(this.span(start)), false);
        }
        else if (this.next.isNumber()) {
            var /** @type {?} */ value = this.next.toNumber();
            this.advance();
            return new LiteralPrimitive(this.span(start), value);
        }
        else if (this.next.isString()) {
            var /** @type {?} */ literalValue = this.next.toString();
            this.advance();
            return new LiteralPrimitive(this.span(start), literalValue);
        }
        else if (this.index >= this.tokens.length) {
            this.error("Unexpected end of expression: " + this.input);
            return new EmptyExpr(this.span(start));
        }
        else {
            this.error("Unexpected token " + this.next);
            return new EmptyExpr(this.span(start));
        }
    };
    /**
     * @param {?} terminator
     * @return {?}
     */
    _ParseAST.prototype.parseExpressionList = function (terminator) {
        var /** @type {?} */ result = [];
        if (!this.next.isCharacter(terminator)) {
            do {
                result.push(this.parsePipe());
            } while (this.optionalCharacter($COMMA));
        }
        return result;
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parseLiteralMap = function () {
        var /** @type {?} */ keys = [];
        var /** @type {?} */ values = [];
        var /** @type {?} */ start = this.inputIndex;
        this.expectCharacter($LBRACE);
        if (!this.optionalCharacter($RBRACE)) {
            this.rbracesExpected++;
            do {
                var /** @type {?} */ quoted = this.next.isString();
                var /** @type {?} */ key = this.expectIdentifierOrKeywordOrString();
                keys.push({ key: key, quoted: quoted });
                this.expectCharacter($COLON);
                values.push(this.parsePipe());
            } while (this.optionalCharacter($COMMA));
            this.rbracesExpected--;
            this.expectCharacter($RBRACE);
        }
        return new LiteralMap(this.span(start), keys, values);
    };
    /**
     * @param {?} receiver
     * @param {?=} isSafe
     * @return {?}
     */
    _ParseAST.prototype.parseAccessMemberOrMethodCall = function (receiver, isSafe) {
        if (isSafe === void 0) { isSafe = false; }
        var /** @type {?} */ start = receiver.span.start;
        var /** @type {?} */ id = this.expectIdentifierOrKeyword();
        if (this.optionalCharacter($LPAREN)) {
            this.rparensExpected++;
            var /** @type {?} */ args = this.parseCallArguments();
            this.expectCharacter($RPAREN);
            this.rparensExpected--;
            var /** @type {?} */ span = this.span(start);
            return isSafe ? new SafeMethodCall(span, receiver, id, args) :
                new MethodCall(span, receiver, id, args);
        }
        else {
            if (isSafe) {
                if (this.optionalOperator('=')) {
                    this.error('The \'?.\' operator cannot be used in the assignment');
                    return new EmptyExpr(this.span(start));
                }
                else {
                    return new SafePropertyRead(this.span(start), receiver, id);
                }
            }
            else {
                if (this.optionalOperator('=')) {
                    if (!this.parseAction) {
                        this.error('Bindings cannot contain assignments');
                        return new EmptyExpr(this.span(start));
                    }
                    var /** @type {?} */ value = this.parseConditional();
                    return new PropertyWrite(this.span(start), receiver, id, value);
                }
                else {
                    return new PropertyRead(this.span(start), receiver, id);
                }
            }
        }
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parseCallArguments = function () {
        if (this.next.isCharacter($RPAREN))
            return [];
        var /** @type {?} */ positionals = [];
        do {
            positionals.push(this.parsePipe());
        } while (this.optionalCharacter($COMMA));
        return (positionals);
    };
    /**
     * An identifier, a keyword, a string with an optional `-` inbetween.
     * @return {?}
     */
    _ParseAST.prototype.expectTemplateBindingKey = function () {
        var /** @type {?} */ result = '';
        var /** @type {?} */ operatorFound = false;
        do {
            result += this.expectIdentifierOrKeywordOrString();
            operatorFound = this.optionalOperator('-');
            if (operatorFound) {
                result += '-';
            }
        } while (operatorFound);
        return result.toString();
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.parseTemplateBindings = function () {
        var /** @type {?} */ bindings = [];
        var /** @type {?} */ prefix = ((null));
        var /** @type {?} */ warnings = [];
        while (this.index < this.tokens.length) {
            var /** @type {?} */ start = this.inputIndex;
            var /** @type {?} */ keyIsVar = this.peekKeywordLet();
            if (keyIsVar) {
                this.advance();
            }
            var /** @type {?} */ rawKey = this.expectTemplateBindingKey();
            var /** @type {?} */ key = rawKey;
            if (!keyIsVar) {
                if (prefix == null) {
                    prefix = key;
                }
                else {
                    key = prefix + key[0].toUpperCase() + key.substring(1);
                }
            }
            this.optionalCharacter($COLON);
            var /** @type {?} */ name = ((null));
            var /** @type {?} */ expression = ((null));
            if (keyIsVar) {
                if (this.optionalOperator('=')) {
                    name = this.expectTemplateBindingKey();
                }
                else {
                    name = '\$implicit';
                }
            }
            else if (this.peekKeywordAs()) {
                var /** @type {?} */ letStart = this.inputIndex;
                this.advance(); // consume `as`
                name = rawKey;
                key = this.expectTemplateBindingKey(); // read local var name
                keyIsVar = true;
            }
            else if (this.next !== EOF && !this.peekKeywordLet()) {
                var /** @type {?} */ start_2 = this.inputIndex;
                var /** @type {?} */ ast = this.parsePipe();
                var /** @type {?} */ source = this.input.substring(start_2 - this.offset, this.inputIndex - this.offset);
                expression = new ASTWithSource(ast, source, this.location, this.errors);
            }
            bindings.push(new TemplateBinding(this.span(start), key, keyIsVar, name, expression));
            if (this.peekKeywordAs() && !keyIsVar) {
                var /** @type {?} */ letStart = this.inputIndex;
                this.advance(); // consume `as`
                var /** @type {?} */ letName = this.expectTemplateBindingKey(); // read local var name
                bindings.push(new TemplateBinding(this.span(letStart), letName, true, key, /** @type {?} */ ((null))));
            }
            if (!this.optionalCharacter($SEMICOLON)) {
                this.optionalCharacter($COMMA);
            }
        }
        return new TemplateBindingParseResult(bindings, warnings, this.errors);
    };
    /**
     * @param {?} message
     * @param {?=} index
     * @return {?}
     */
    _ParseAST.prototype.error = function (message, index) {
        if (index === void 0) { index = null; }
        this.errors.push(new ParserError(message, this.input, this.locationText(index), this.location));
        this.skip();
    };
    /**
     * @param {?=} index
     * @return {?}
     */
    _ParseAST.prototype.locationText = function (index) {
        if (index === void 0) { index = null; }
        if (index == null)
            index = this.index;
        return (index < this.tokens.length) ? "at column " + (this.tokens[index].index + 1) + " in" :
            "at the end of the expression";
    };
    /**
     * @return {?}
     */
    _ParseAST.prototype.skip = function () {
        var /** @type {?} */ n = this.next;
        while (this.index < this.tokens.length && !n.isCharacter($SEMICOLON) &&
            (this.rparensExpected <= 0 || !n.isCharacter($RPAREN)) &&
            (this.rbracesExpected <= 0 || !n.isCharacter($RBRACE)) &&
            (this.rbracketsExpected <= 0 || !n.isCharacter($RBRACKET))) {
            if (this.next.isError()) {
                this.errors.push(new ParserError(/** @type {?} */ ((this.next.toString())), this.input, this.locationText(), this.location));
            }
            this.advance();
            n = this.next;
        }
    };
    return _ParseAST;
}());
var SimpleExpressionChecker = (function () {
    function SimpleExpressionChecker() {
        this.errors = [];
    }
    /**
     * @param {?} ast
     * @return {?}
     */
    SimpleExpressionChecker.check = function (ast) {
        var /** @type {?} */ s = new SimpleExpressionChecker();
        ast.visit(s);
        return s.errors;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitImplicitReceiver = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitInterpolation = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitLiteralPrimitive = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitPropertyRead = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitPropertyWrite = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitSafePropertyRead = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitMethodCall = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitSafeMethodCall = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitFunctionCall = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitLiteralArray = function (ast, context) { this.visitAll(ast.expressions); };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitLiteralMap = function (ast, context) { this.visitAll(ast.values); };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitBinary = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitPrefixNot = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitNonNullAssert = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitConditional = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitPipe = function (ast, context) { this.errors.push('pipes'); };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitKeyedRead = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitKeyedWrite = function (ast, context) { };
    /**
     * @param {?} asts
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitAll = function (asts) {
        var _this = this;
        return asts.map(function (node) { return node.visit(_this); });
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitChain = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    SimpleExpressionChecker.prototype.visitQuote = function (ast, context) { };
    return SimpleExpressionChecker;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ParseLocation = (function () {
    /**
     * @param {?} file
     * @param {?} offset
     * @param {?} line
     * @param {?} col
     */
    function ParseLocation(file, offset, line, col) {
        this.file = file;
        this.offset = offset;
        this.line = line;
        this.col = col;
    }
    /**
     * @return {?}
     */
    ParseLocation.prototype.toString = function () {
        return this.offset != null ? this.file.url + "@" + this.line + ":" + this.col : this.file.url;
    };
    /**
     * @param {?} delta
     * @return {?}
     */
    ParseLocation.prototype.moveBy = function (delta) {
        var /** @type {?} */ source = this.file.content;
        var /** @type {?} */ len = source.length;
        var /** @type {?} */ offset = this.offset;
        var /** @type {?} */ line = this.line;
        var /** @type {?} */ col = this.col;
        while (offset > 0 && delta < 0) {
            offset--;
            delta++;
            var /** @type {?} */ ch = source.charCodeAt(offset);
            if (ch == $LF) {
                line--;
                var /** @type {?} */ priorLine = source.substr(0, offset - 1).lastIndexOf(String.fromCharCode($LF));
                col = priorLine > 0 ? offset - priorLine : offset;
            }
            else {
                col--;
            }
        }
        while (offset < len && delta > 0) {
            var /** @type {?} */ ch = source.charCodeAt(offset);
            offset++;
            delta--;
            if (ch == $LF) {
                line++;
                col = 0;
            }
            else {
                col++;
            }
        }
        return new ParseLocation(this.file, offset, line, col);
    };
    /**
     * @param {?} maxChars
     * @param {?} maxLines
     * @return {?}
     */
    ParseLocation.prototype.getContext = function (maxChars, maxLines) {
        var /** @type {?} */ content = this.file.content;
        var /** @type {?} */ startOffset = this.offset;
        if (startOffset != null) {
            if (startOffset > content.length - 1) {
                startOffset = content.length - 1;
            }
            var /** @type {?} */ endOffset = startOffset;
            var /** @type {?} */ ctxChars = 0;
            var /** @type {?} */ ctxLines = 0;
            while (ctxChars < maxChars && startOffset > 0) {
                startOffset--;
                ctxChars++;
                if (content[startOffset] == '\n') {
                    if (++ctxLines == maxLines) {
                        break;
                    }
                }
            }
            ctxChars = 0;
            ctxLines = 0;
            while (ctxChars < maxChars && endOffset < content.length - 1) {
                endOffset++;
                ctxChars++;
                if (content[endOffset] == '\n') {
                    if (++ctxLines == maxLines) {
                        break;
                    }
                }
            }
            return {
                before: content.substring(startOffset, this.offset),
                after: content.substring(this.offset, endOffset + 1),
            };
        }
        return null;
    };
    return ParseLocation;
}());
var ParseSourceFile = (function () {
    /**
     * @param {?} content
     * @param {?} url
     */
    function ParseSourceFile(content, url) {
        this.content = content;
        this.url = url;
    }
    return ParseSourceFile;
}());
var ParseSourceSpan = (function () {
    /**
     * @param {?} start
     * @param {?} end
     * @param {?=} details
     */
    function ParseSourceSpan(start, end, details) {
        if (details === void 0) { details = null; }
        this.start = start;
        this.end = end;
        this.details = details;
    }
    /**
     * @return {?}
     */
    ParseSourceSpan.prototype.toString = function () {
        return this.start.file.content.substring(this.start.offset, this.end.offset);
    };
    return ParseSourceSpan;
}());
var ParseErrorLevel = {};
ParseErrorLevel.WARNING = 0;
ParseErrorLevel.ERROR = 1;
ParseErrorLevel[ParseErrorLevel.WARNING] = "WARNING";
ParseErrorLevel[ParseErrorLevel.ERROR] = "ERROR";
var ParseError = (function () {
    /**
     * @param {?} span
     * @param {?} msg
     * @param {?=} level
     */
    function ParseError(span, msg, level) {
        if (level === void 0) { level = ParseErrorLevel.ERROR; }
        this.span = span;
        this.msg = msg;
        this.level = level;
    }
    /**
     * @return {?}
     */
    ParseError.prototype.contextualMessage = function () {
        var /** @type {?} */ ctx = this.span.start.getContext(100, 3);
        return ctx ? " (\"" + ctx.before + "[" + ParseErrorLevel[this.level] + " ->]" + ctx.after + "\")" : '';
    };
    /**
     * @return {?}
     */
    ParseError.prototype.toString = function () {
        var /** @type {?} */ details = this.span.details ? ", " + this.span.details : '';
        return "" + this.msg + this.contextualMessage() + ": " + this.span.start + details;
    };
    return ParseError;
}());
/**
 * @param {?} kind
 * @param {?} type
 * @return {?}
 */
function typeSourceSpan(kind, type) {
    var /** @type {?} */ moduleUrl = identifierModuleUrl(type);
    var /** @type {?} */ sourceFileName = moduleUrl != null ? "in " + kind + " " + identifierName(type) + " in " + moduleUrl :
        "in " + kind + " " + identifierName(type);
    var /** @type {?} */ sourceFile = new ParseSourceFile('', sourceFileName);
    return new ParseSourceSpan(new ParseLocation(sourceFile, -1, -1, -1), new ParseLocation(sourceFile, -1, -1, -1));
}
/**
 * A path is an ordered set of elements. Typically a path is to  a
 * particular offset in a source file. The head of the list is the top
 * most node. The tail is the node that contains the offset directly.
 *
 * For example, the expresion `a + b + c` might have an ast that looks
 * like:
 *     +
 *    / \
 *   a   +
 *      / \
 *     b   c
 *
 * The path to the node at offset 9 would be `['+' at 1-10, '+' at 7-10,
 * 'c' at 9-10]` and the path the node at offset 1 would be
 * `['+' at 1-10, 'a' at 1-2]`.
 */
var AstPath = (function () {
    /**
     * @param {?} path
     * @param {?=} position
     */
    function AstPath(path, position) {
        if (position === void 0) { position = -1; }
        this.path = path;
        this.position = position;
    }
    Object.defineProperty(AstPath.prototype, "empty", {
        /**
         * @return {?}
         */
        get: function () { return !this.path || !this.path.length; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AstPath.prototype, "head", {
        /**
         * @return {?}
         */
        get: function () { return this.path[0]; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AstPath.prototype, "tail", {
        /**
         * @return {?}
         */
        get: function () { return this.path[this.path.length - 1]; },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} node
     * @return {?}
     */
    AstPath.prototype.parentOf = function (node) {
        return node && this.path[this.path.indexOf(node) - 1];
    };
    /**
     * @param {?} node
     * @return {?}
     */
    AstPath.prototype.childOf = function (node) { return this.path[this.path.indexOf(node) + 1]; };
    /**
     * @template N
     * @param {?} ctor
     * @return {?}
     */
    AstPath.prototype.first = function (ctor) {
        for (var /** @type {?} */ i = this.path.length - 1; i >= 0; i--) {
            var /** @type {?} */ item = this.path[i];
            if (item instanceof ctor)
                return (item);
        }
    };
    /**
     * @param {?} node
     * @return {?}
     */
    AstPath.prototype.push = function (node) { this.path.push(node); };
    /**
     * @return {?}
     */
    AstPath.prototype.pop = function () { return ((this.path.pop())); };
    return AstPath;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var Text = (function () {
    /**
     * @param {?} value
     * @param {?} sourceSpan
     */
    function Text(value, sourceSpan) {
        this.value = value;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    Text.prototype.visit = function (visitor, context) { return visitor.visitText(this, context); };
    return Text;
}());
var Expansion = (function () {
    /**
     * @param {?} switchValue
     * @param {?} type
     * @param {?} cases
     * @param {?} sourceSpan
     * @param {?} switchValueSourceSpan
     */
    function Expansion(switchValue, type, cases, sourceSpan, switchValueSourceSpan) {
        this.switchValue = switchValue;
        this.type = type;
        this.cases = cases;
        this.sourceSpan = sourceSpan;
        this.switchValueSourceSpan = switchValueSourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    Expansion.prototype.visit = function (visitor, context) { return visitor.visitExpansion(this, context); };
    return Expansion;
}());
var ExpansionCase = (function () {
    /**
     * @param {?} value
     * @param {?} expression
     * @param {?} sourceSpan
     * @param {?} valueSourceSpan
     * @param {?} expSourceSpan
     */
    function ExpansionCase(value, expression, sourceSpan, valueSourceSpan, expSourceSpan) {
        this.value = value;
        this.expression = expression;
        this.sourceSpan = sourceSpan;
        this.valueSourceSpan = valueSourceSpan;
        this.expSourceSpan = expSourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ExpansionCase.prototype.visit = function (visitor, context) { return visitor.visitExpansionCase(this, context); };
    return ExpansionCase;
}());
var Attribute$1 = (function () {
    /**
     * @param {?} name
     * @param {?} value
     * @param {?} sourceSpan
     * @param {?=} valueSpan
     */
    function Attribute$1(name, value, sourceSpan, valueSpan) {
        this.name = name;
        this.value = value;
        this.sourceSpan = sourceSpan;
        this.valueSpan = valueSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    Attribute$1.prototype.visit = function (visitor, context) { return visitor.visitAttribute(this, context); };
    return Attribute$1;
}());
var Element = (function () {
    /**
     * @param {?} name
     * @param {?} attrs
     * @param {?} children
     * @param {?} sourceSpan
     * @param {?=} startSourceSpan
     * @param {?=} endSourceSpan
     */
    function Element(name, attrs, children, sourceSpan, startSourceSpan, endSourceSpan) {
        if (startSourceSpan === void 0) { startSourceSpan = null; }
        if (endSourceSpan === void 0) { endSourceSpan = null; }
        this.name = name;
        this.attrs = attrs;
        this.children = children;
        this.sourceSpan = sourceSpan;
        this.startSourceSpan = startSourceSpan;
        this.endSourceSpan = endSourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    Element.prototype.visit = function (visitor, context) { return visitor.visitElement(this, context); };
    return Element;
}());
var Comment = (function () {
    /**
     * @param {?} value
     * @param {?} sourceSpan
     */
    function Comment(value, sourceSpan) {
        this.value = value;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    Comment.prototype.visit = function (visitor, context) { return visitor.visitComment(this, context); };
    return Comment;
}());
/**
 * @param {?} visitor
 * @param {?} nodes
 * @param {?=} context
 * @return {?}
 */
function visitAll(visitor, nodes, context) {
    if (context === void 0) { context = null; }
    var /** @type {?} */ result = [];
    var /** @type {?} */ visit = visitor.visit ?
        function (ast) { return ((visitor.visit))(ast, context) || ast.visit(visitor, context); } :
        function (ast) { return ast.visit(visitor, context); };
    nodes.forEach(function (ast) {
        var /** @type {?} */ astResult = visit(ast);
        if (astResult) {
            result.push(astResult);
        }
    });
    return result;
}
var RecursiveVisitor = (function () {
    function RecursiveVisitor() {
    }
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveVisitor.prototype.visitElement = function (ast, context) {
        this.visitChildren(context, function (visit) {
            visit(ast.attrs);
            visit(ast.children);
        });
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveVisitor.prototype.visitAttribute = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveVisitor.prototype.visitText = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveVisitor.prototype.visitComment = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveVisitor.prototype.visitExpansion = function (ast, context) {
        return this.visitChildren(context, function (visit) { visit(ast.cases); });
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveVisitor.prototype.visitExpansionCase = function (ast, context) { };
    /**
     * @template T
     * @param {?} context
     * @param {?} cb
     * @return {?}
     */
    RecursiveVisitor.prototype.visitChildren = function (context, cb) {
        var /** @type {?} */ results = [];
        var /** @type {?} */ t = this;
        /**
         * @template T
         * @param {?} children
         * @return {?}
         */
        function visit(children) {
            if (children)
                results.push(visitAll(t, children, context));
        }
        cb(visit);
        return [].concat.apply([], results);
    };
    return RecursiveVisitor;
}());
/**
 * @param {?} ast
 * @return {?}
 */
function spanOf(ast) {
    var /** @type {?} */ start = ast.sourceSpan.start.offset;
    var /** @type {?} */ end = ast.sourceSpan.end.offset;
    if (ast instanceof Element) {
        if (ast.endSourceSpan) {
            end = ast.endSourceSpan.end.offset;
        }
        else if (ast.children && ast.children.length) {
            end = spanOf(ast.children[ast.children.length - 1]).end;
        }
    }
    return { start: start, end: end };
}
/**
 * @param {?} nodes
 * @param {?} position
 * @return {?}
 */
function findNode(nodes, position) {
    var /** @type {?} */ path = [];
    var /** @type {?} */ visitor = new (function (_super) {
        __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](class_1, _super);
        function class_1() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        /**
         * @param {?} ast
         * @param {?} context
         * @return {?}
         */
        class_1.prototype.visit = function (ast, context) {
            var /** @type {?} */ span = spanOf(ast);
            if (span.start <= position && position < span.end) {
                path.push(ast);
            }
            else {
                // Returning a value here will result in the children being skipped.
                return true;
            }
        };
        return class_1;
    }(RecursiveVisitor));
    visitAll(visitor, nodes);
    return new AstPath(path, position);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var TokenType$1 = {};
TokenType$1.TAG_OPEN_START = 0;
TokenType$1.TAG_OPEN_END = 1;
TokenType$1.TAG_OPEN_END_VOID = 2;
TokenType$1.TAG_CLOSE = 3;
TokenType$1.TEXT = 4;
TokenType$1.ESCAPABLE_RAW_TEXT = 5;
TokenType$1.RAW_TEXT = 6;
TokenType$1.COMMENT_START = 7;
TokenType$1.COMMENT_END = 8;
TokenType$1.CDATA_START = 9;
TokenType$1.CDATA_END = 10;
TokenType$1.ATTR_NAME = 11;
TokenType$1.ATTR_VALUE = 12;
TokenType$1.DOC_TYPE = 13;
TokenType$1.EXPANSION_FORM_START = 14;
TokenType$1.EXPANSION_CASE_VALUE = 15;
TokenType$1.EXPANSION_CASE_EXP_START = 16;
TokenType$1.EXPANSION_CASE_EXP_END = 17;
TokenType$1.EXPANSION_FORM_END = 18;
TokenType$1.EOF = 19;
TokenType$1[TokenType$1.TAG_OPEN_START] = "TAG_OPEN_START";
TokenType$1[TokenType$1.TAG_OPEN_END] = "TAG_OPEN_END";
TokenType$1[TokenType$1.TAG_OPEN_END_VOID] = "TAG_OPEN_END_VOID";
TokenType$1[TokenType$1.TAG_CLOSE] = "TAG_CLOSE";
TokenType$1[TokenType$1.TEXT] = "TEXT";
TokenType$1[TokenType$1.ESCAPABLE_RAW_TEXT] = "ESCAPABLE_RAW_TEXT";
TokenType$1[TokenType$1.RAW_TEXT] = "RAW_TEXT";
TokenType$1[TokenType$1.COMMENT_START] = "COMMENT_START";
TokenType$1[TokenType$1.COMMENT_END] = "COMMENT_END";
TokenType$1[TokenType$1.CDATA_START] = "CDATA_START";
TokenType$1[TokenType$1.CDATA_END] = "CDATA_END";
TokenType$1[TokenType$1.ATTR_NAME] = "ATTR_NAME";
TokenType$1[TokenType$1.ATTR_VALUE] = "ATTR_VALUE";
TokenType$1[TokenType$1.DOC_TYPE] = "DOC_TYPE";
TokenType$1[TokenType$1.EXPANSION_FORM_START] = "EXPANSION_FORM_START";
TokenType$1[TokenType$1.EXPANSION_CASE_VALUE] = "EXPANSION_CASE_VALUE";
TokenType$1[TokenType$1.EXPANSION_CASE_EXP_START] = "EXPANSION_CASE_EXP_START";
TokenType$1[TokenType$1.EXPANSION_CASE_EXP_END] = "EXPANSION_CASE_EXP_END";
TokenType$1[TokenType$1.EXPANSION_FORM_END] = "EXPANSION_FORM_END";
TokenType$1[TokenType$1.EOF] = "EOF";
var Token$1 = (function () {
    /**
     * @param {?} type
     * @param {?} parts
     * @param {?} sourceSpan
     */
    function Token$1(type, parts, sourceSpan) {
        this.type = type;
        this.parts = parts;
        this.sourceSpan = sourceSpan;
    }
    return Token$1;
}());
var TokenError = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](TokenError, _super);
    /**
     * @param {?} errorMsg
     * @param {?} tokenType
     * @param {?} span
     */
    function TokenError(errorMsg, tokenType, span) {
        var _this = _super.call(this, span, errorMsg) || this;
        _this.tokenType = tokenType;
        return _this;
    }
    return TokenError;
}(ParseError));
var TokenizeResult = (function () {
    /**
     * @param {?} tokens
     * @param {?} errors
     */
    function TokenizeResult(tokens, errors) {
        this.tokens = tokens;
        this.errors = errors;
    }
    return TokenizeResult;
}());
/**
 * @param {?} source
 * @param {?} url
 * @param {?} getTagDefinition
 * @param {?=} tokenizeExpansionForms
 * @param {?=} interpolationConfig
 * @return {?}
 */
function tokenize(source, url, getTagDefinition, tokenizeExpansionForms, interpolationConfig) {
    if (tokenizeExpansionForms === void 0) { tokenizeExpansionForms = false; }
    if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }
    return new _Tokenizer(new ParseSourceFile(source, url), getTagDefinition, tokenizeExpansionForms, interpolationConfig)
        .tokenize();
}
var _CR_OR_CRLF_REGEXP = /\r\n?/g;
/**
 * @param {?} charCode
 * @return {?}
 */
function _unexpectedCharacterErrorMsg(charCode) {
    var /** @type {?} */ char = charCode === $EOF ? 'EOF' : String.fromCharCode(charCode);
    return "Unexpected character \"" + char + "\"";
}
/**
 * @param {?} entitySrc
 * @return {?}
 */
function _unknownEntityErrorMsg(entitySrc) {
    return "Unknown entity \"" + entitySrc + "\" - use the \"&#<decimal>;\" or  \"&#x<hex>;\" syntax";
}
var _ControlFlowError = (function () {
    /**
     * @param {?} error
     */
    function _ControlFlowError(error) {
        this.error = error;
    }
    return _ControlFlowError;
}());
var _Tokenizer = (function () {
    /**
     * @param {?} _file The html source
     * @param {?} _getTagDefinition
     * @param {?} _tokenizeIcu Whether to tokenize ICU messages (considered as text nodes when false)
     * @param {?=} _interpolationConfig
     */
    function _Tokenizer(_file, _getTagDefinition, _tokenizeIcu, _interpolationConfig) {
        if (_interpolationConfig === void 0) { _interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }
        this._file = _file;
        this._getTagDefinition = _getTagDefinition;
        this._tokenizeIcu = _tokenizeIcu;
        this._interpolationConfig = _interpolationConfig;
        this._peek = -1;
        this._nextPeek = -1;
        this._index = -1;
        this._line = 0;
        this._column = -1;
        this._expansionCaseStack = [];
        this._inInterpolation = false;
        this.tokens = [];
        this.errors = [];
        this._input = _file.content;
        this._length = _file.content.length;
        this._advance();
    }
    /**
     * @param {?} content
     * @return {?}
     */
    _Tokenizer.prototype._processCarriageReturns = function (content) {
        // http://www.w3.org/TR/html5/syntax.html#preprocessing-the-input-stream
        // In order to keep the original position in the source, we can not
        // pre-process it.
        // Instead CRs are processed right before instantiating the tokens.
        return content.replace(_CR_OR_CRLF_REGEXP, '\n');
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype.tokenize = function () {
        while (this._peek !== $EOF) {
            var /** @type {?} */ start = this._getLocation();
            try {
                if (this._attemptCharCode($LT)) {
                    if (this._attemptCharCode($BANG)) {
                        if (this._attemptCharCode($LBRACKET)) {
                            this._consumeCdata(start);
                        }
                        else if (this._attemptCharCode($MINUS)) {
                            this._consumeComment(start);
                        }
                        else {
                            this._consumeDocType(start);
                        }
                    }
                    else if (this._attemptCharCode($SLASH)) {
                        this._consumeTagClose(start);
                    }
                    else {
                        this._consumeTagOpen(start);
                    }
                }
                else if (!(this._tokenizeIcu && this._tokenizeExpansionForm())) {
                    this._consumeText();
                }
            }
            catch (e) {
                if (e instanceof _ControlFlowError) {
                    this.errors.push(e.error);
                }
                else {
                    throw e;
                }
            }
        }
        this._beginToken(TokenType$1.EOF);
        this._endToken([]);
        return new TokenizeResult(mergeTextTokens(this.tokens), this.errors);
    };
    /**
     * \@internal
     * @return {?}
     */
    _Tokenizer.prototype._tokenizeExpansionForm = function () {
        if (isExpansionFormStart(this._input, this._index, this._interpolationConfig)) {
            this._consumeExpansionFormStart();
            return true;
        }
        if (isExpansionCaseStart(this._peek) && this._isInExpansionForm()) {
            this._consumeExpansionCaseStart();
            return true;
        }
        if (this._peek === $RBRACE) {
            if (this._isInExpansionCase()) {
                this._consumeExpansionCaseEnd();
                return true;
            }
            if (this._isInExpansionForm()) {
                this._consumeExpansionFormEnd();
                return true;
            }
        }
        return false;
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._getLocation = function () {
        return new ParseLocation(this._file, this._index, this._line, this._column);
    };
    /**
     * @param {?=} start
     * @param {?=} end
     * @return {?}
     */
    _Tokenizer.prototype._getSpan = function (start, end) {
        if (start === void 0) { start = this._getLocation(); }
        if (end === void 0) { end = this._getLocation(); }
        return new ParseSourceSpan(start, end);
    };
    /**
     * @param {?} type
     * @param {?=} start
     * @return {?}
     */
    _Tokenizer.prototype._beginToken = function (type, start) {
        if (start === void 0) { start = this._getLocation(); }
        this._currentTokenStart = start;
        this._currentTokenType = type;
    };
    /**
     * @param {?} parts
     * @param {?=} end
     * @return {?}
     */
    _Tokenizer.prototype._endToken = function (parts, end) {
        if (end === void 0) { end = this._getLocation(); }
        var /** @type {?} */ token = new Token$1(this._currentTokenType, parts, new ParseSourceSpan(this._currentTokenStart, end));
        this.tokens.push(token);
        this._currentTokenStart = ((null));
        this._currentTokenType = ((null));
        return token;
    };
    /**
     * @param {?} msg
     * @param {?} span
     * @return {?}
     */
    _Tokenizer.prototype._createError = function (msg, span) {
        if (this._isInExpansionForm()) {
            msg += " (Do you have an unescaped \"{\" in your template? Use \"{{ '{' }}\") to escape it.)";
        }
        var /** @type {?} */ error = new TokenError(msg, this._currentTokenType, span);
        this._currentTokenStart = ((null));
        this._currentTokenType = ((null));
        return new _ControlFlowError(error);
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._advance = function () {
        if (this._index >= this._length) {
            throw this._createError(_unexpectedCharacterErrorMsg($EOF), this._getSpan());
        }
        if (this._peek === $LF) {
            this._line++;
            this._column = 0;
        }
        else if (this._peek !== $LF && this._peek !== $CR) {
            this._column++;
        }
        this._index++;
        this._peek = this._index >= this._length ? $EOF : this._input.charCodeAt(this._index);
        this._nextPeek =
            this._index + 1 >= this._length ? $EOF : this._input.charCodeAt(this._index + 1);
    };
    /**
     * @param {?} charCode
     * @return {?}
     */
    _Tokenizer.prototype._attemptCharCode = function (charCode) {
        if (this._peek === charCode) {
            this._advance();
            return true;
        }
        return false;
    };
    /**
     * @param {?} charCode
     * @return {?}
     */
    _Tokenizer.prototype._attemptCharCodeCaseInsensitive = function (charCode) {
        if (compareCharCodeCaseInsensitive(this._peek, charCode)) {
            this._advance();
            return true;
        }
        return false;
    };
    /**
     * @param {?} charCode
     * @return {?}
     */
    _Tokenizer.prototype._requireCharCode = function (charCode) {
        var /** @type {?} */ location = this._getLocation();
        if (!this._attemptCharCode(charCode)) {
            throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan(location, location));
        }
    };
    /**
     * @param {?} chars
     * @return {?}
     */
    _Tokenizer.prototype._attemptStr = function (chars) {
        var /** @type {?} */ len = chars.length;
        if (this._index + len > this._length) {
            return false;
        }
        var /** @type {?} */ initialPosition = this._savePosition();
        for (var /** @type {?} */ i = 0; i < len; i++) {
            if (!this._attemptCharCode(chars.charCodeAt(i))) {
                // If attempting to parse the string fails, we want to reset the parser
                // to where it was before the attempt
                this._restorePosition(initialPosition);
                return false;
            }
        }
        return true;
    };
    /**
     * @param {?} chars
     * @return {?}
     */
    _Tokenizer.prototype._attemptStrCaseInsensitive = function (chars) {
        for (var /** @type {?} */ i = 0; i < chars.length; i++) {
            if (!this._attemptCharCodeCaseInsensitive(chars.charCodeAt(i))) {
                return false;
            }
        }
        return true;
    };
    /**
     * @param {?} chars
     * @return {?}
     */
    _Tokenizer.prototype._requireStr = function (chars) {
        var /** @type {?} */ location = this._getLocation();
        if (!this._attemptStr(chars)) {
            throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan(location));
        }
    };
    /**
     * @param {?} predicate
     * @return {?}
     */
    _Tokenizer.prototype._attemptCharCodeUntilFn = function (predicate) {
        while (!predicate(this._peek)) {
            this._advance();
        }
    };
    /**
     * @param {?} predicate
     * @param {?} len
     * @return {?}
     */
    _Tokenizer.prototype._requireCharCodeUntilFn = function (predicate, len) {
        var /** @type {?} */ start = this._getLocation();
        this._attemptCharCodeUntilFn(predicate);
        if (this._index - start.offset < len) {
            throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan(start, start));
        }
    };
    /**
     * @param {?} char
     * @return {?}
     */
    _Tokenizer.prototype._attemptUntilChar = function (char) {
        while (this._peek !== char) {
            this._advance();
        }
    };
    /**
     * @param {?} decodeEntities
     * @return {?}
     */
    _Tokenizer.prototype._readChar = function (decodeEntities) {
        if (decodeEntities && this._peek === $AMPERSAND) {
            return this._decodeEntity();
        }
        else {
            var /** @type {?} */ index = this._index;
            this._advance();
            return this._input[index];
        }
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._decodeEntity = function () {
        var /** @type {?} */ start = this._getLocation();
        this._advance();
        if (this._attemptCharCode($HASH)) {
            var /** @type {?} */ isHex = this._attemptCharCode($x) || this._attemptCharCode($X);
            var /** @type {?} */ numberStart = this._getLocation().offset;
            this._attemptCharCodeUntilFn(isDigitEntityEnd);
            if (this._peek != $SEMICOLON) {
                throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan());
            }
            this._advance();
            var /** @type {?} */ strNum = this._input.substring(numberStart, this._index - 1);
            try {
                var /** @type {?} */ charCode = parseInt(strNum, isHex ? 16 : 10);
                return String.fromCharCode(charCode);
            }
            catch (e) {
                var /** @type {?} */ entity = this._input.substring(start.offset + 1, this._index - 1);
                throw this._createError(_unknownEntityErrorMsg(entity), this._getSpan(start));
            }
        }
        else {
            var /** @type {?} */ startPosition = this._savePosition();
            this._attemptCharCodeUntilFn(isNamedEntityEnd);
            if (this._peek != $SEMICOLON) {
                this._restorePosition(startPosition);
                return '&';
            }
            this._advance();
            var /** @type {?} */ name = this._input.substring(start.offset + 1, this._index - 1);
            var /** @type {?} */ char = NAMED_ENTITIES[name];
            if (!char) {
                throw this._createError(_unknownEntityErrorMsg(name), this._getSpan(start));
            }
            return char;
        }
    };
    /**
     * @param {?} decodeEntities
     * @param {?} firstCharOfEnd
     * @param {?} attemptEndRest
     * @return {?}
     */
    _Tokenizer.prototype._consumeRawText = function (decodeEntities, firstCharOfEnd, attemptEndRest) {
        var /** @type {?} */ tagCloseStart;
        var /** @type {?} */ textStart = this._getLocation();
        this._beginToken(decodeEntities ? TokenType$1.ESCAPABLE_RAW_TEXT : TokenType$1.RAW_TEXT, textStart);
        var /** @type {?} */ parts = [];
        while (true) {
            tagCloseStart = this._getLocation();
            if (this._attemptCharCode(firstCharOfEnd) && attemptEndRest()) {
                break;
            }
            if (this._index > tagCloseStart.offset) {
                // add the characters consumed by the previous if statement to the output
                parts.push(this._input.substring(tagCloseStart.offset, this._index));
            }
            while (this._peek !== firstCharOfEnd) {
                parts.push(this._readChar(decodeEntities));
            }
        }
        return this._endToken([this._processCarriageReturns(parts.join(''))], tagCloseStart);
    };
    /**
     * @param {?} start
     * @return {?}
     */
    _Tokenizer.prototype._consumeComment = function (start) {
        var _this = this;
        this._beginToken(TokenType$1.COMMENT_START, start);
        this._requireCharCode($MINUS);
        this._endToken([]);
        var /** @type {?} */ textToken = this._consumeRawText(false, $MINUS, function () { return _this._attemptStr('->'); });
        this._beginToken(TokenType$1.COMMENT_END, textToken.sourceSpan.end);
        this._endToken([]);
    };
    /**
     * @param {?} start
     * @return {?}
     */
    _Tokenizer.prototype._consumeCdata = function (start) {
        var _this = this;
        this._beginToken(TokenType$1.CDATA_START, start);
        this._requireStr('CDATA[');
        this._endToken([]);
        var /** @type {?} */ textToken = this._consumeRawText(false, $RBRACKET, function () { return _this._attemptStr(']>'); });
        this._beginToken(TokenType$1.CDATA_END, textToken.sourceSpan.end);
        this._endToken([]);
    };
    /**
     * @param {?} start
     * @return {?}
     */
    _Tokenizer.prototype._consumeDocType = function (start) {
        this._beginToken(TokenType$1.DOC_TYPE, start);
        this._attemptUntilChar($GT);
        this._advance();
        this._endToken([this._input.substring(start.offset + 2, this._index - 1)]);
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._consumePrefixAndName = function () {
        var /** @type {?} */ nameOrPrefixStart = this._index;
        var /** @type {?} */ prefix = ((null));
        while (this._peek !== $COLON && !isPrefixEnd(this._peek)) {
            this._advance();
        }
        var /** @type {?} */ nameStart;
        if (this._peek === $COLON) {
            this._advance();
            prefix = this._input.substring(nameOrPrefixStart, this._index - 1);
            nameStart = this._index;
        }
        else {
            nameStart = nameOrPrefixStart;
        }
        this._requireCharCodeUntilFn(isNameEnd, this._index === nameStart ? 1 : 0);
        var /** @type {?} */ name = this._input.substring(nameStart, this._index);
        return [prefix, name];
    };
    /**
     * @param {?} start
     * @return {?}
     */
    _Tokenizer.prototype._consumeTagOpen = function (start) {
        var /** @type {?} */ savedPos = this._savePosition();
        var /** @type {?} */ tagName;
        var /** @type {?} */ lowercaseTagName;
        try {
            if (!isAsciiLetter(this._peek)) {
                throw this._createError(_unexpectedCharacterErrorMsg(this._peek), this._getSpan());
            }
            var /** @type {?} */ nameStart = this._index;
            this._consumeTagOpenStart(start);
            tagName = this._input.substring(nameStart, this._index);
            lowercaseTagName = tagName.toLowerCase();
            this._attemptCharCodeUntilFn(isNotWhitespace);
            while (this._peek !== $SLASH && this._peek !== $GT) {
                this._consumeAttributeName();
                this._attemptCharCodeUntilFn(isNotWhitespace);
                if (this._attemptCharCode($EQ)) {
                    this._attemptCharCodeUntilFn(isNotWhitespace);
                    this._consumeAttributeValue();
                }
                this._attemptCharCodeUntilFn(isNotWhitespace);
            }
            this._consumeTagOpenEnd();
        }
        catch (e) {
            if (e instanceof _ControlFlowError) {
                // When the start tag is invalid, assume we want a "<"
                this._restorePosition(savedPos);
                // Back to back text tokens are merged at the end
                this._beginToken(TokenType$1.TEXT, start);
                this._endToken(['<']);
                return;
            }
            throw e;
        }
        var /** @type {?} */ contentTokenType = this._getTagDefinition(tagName).contentType;
        if (contentTokenType === TagContentType.RAW_TEXT) {
            this._consumeRawTextWithTagClose(lowercaseTagName, false);
        }
        else if (contentTokenType === TagContentType.ESCAPABLE_RAW_TEXT) {
            this._consumeRawTextWithTagClose(lowercaseTagName, true);
        }
    };
    /**
     * @param {?} lowercaseTagName
     * @param {?} decodeEntities
     * @return {?}
     */
    _Tokenizer.prototype._consumeRawTextWithTagClose = function (lowercaseTagName, decodeEntities) {
        var _this = this;
        var /** @type {?} */ textToken = this._consumeRawText(decodeEntities, $LT, function () {
            if (!_this._attemptCharCode($SLASH))
                return false;
            _this._attemptCharCodeUntilFn(isNotWhitespace);
            if (!_this._attemptStrCaseInsensitive(lowercaseTagName))
                return false;
            _this._attemptCharCodeUntilFn(isNotWhitespace);
            return _this._attemptCharCode($GT);
        });
        this._beginToken(TokenType$1.TAG_CLOSE, textToken.sourceSpan.end);
        this._endToken([/** @type {?} */ ((null)), lowercaseTagName]);
    };
    /**
     * @param {?} start
     * @return {?}
     */
    _Tokenizer.prototype._consumeTagOpenStart = function (start) {
        this._beginToken(TokenType$1.TAG_OPEN_START, start);
        var /** @type {?} */ parts = this._consumePrefixAndName();
        this._endToken(parts);
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._consumeAttributeName = function () {
        this._beginToken(TokenType$1.ATTR_NAME);
        var /** @type {?} */ prefixAndName = this._consumePrefixAndName();
        this._endToken(prefixAndName);
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._consumeAttributeValue = function () {
        this._beginToken(TokenType$1.ATTR_VALUE);
        var /** @type {?} */ value;
        if (this._peek === $SQ || this._peek === $DQ) {
            var /** @type {?} */ quoteChar = this._peek;
            this._advance();
            var /** @type {?} */ parts = [];
            while (this._peek !== quoteChar) {
                parts.push(this._readChar(true));
            }
            value = parts.join('');
            this._advance();
        }
        else {
            var /** @type {?} */ valueStart = this._index;
            this._requireCharCodeUntilFn(isNameEnd, 1);
            value = this._input.substring(valueStart, this._index);
        }
        this._endToken([this._processCarriageReturns(value)]);
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._consumeTagOpenEnd = function () {
        var /** @type {?} */ tokenType = this._attemptCharCode($SLASH) ? TokenType$1.TAG_OPEN_END_VOID : TokenType$1.TAG_OPEN_END;
        this._beginToken(tokenType);
        this._requireCharCode($GT);
        this._endToken([]);
    };
    /**
     * @param {?} start
     * @return {?}
     */
    _Tokenizer.prototype._consumeTagClose = function (start) {
        this._beginToken(TokenType$1.TAG_CLOSE, start);
        this._attemptCharCodeUntilFn(isNotWhitespace);
        var /** @type {?} */ prefixAndName = this._consumePrefixAndName();
        this._attemptCharCodeUntilFn(isNotWhitespace);
        this._requireCharCode($GT);
        this._endToken(prefixAndName);
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._consumeExpansionFormStart = function () {
        this._beginToken(TokenType$1.EXPANSION_FORM_START, this._getLocation());
        this._requireCharCode($LBRACE);
        this._endToken([]);
        this._expansionCaseStack.push(TokenType$1.EXPANSION_FORM_START);
        this._beginToken(TokenType$1.RAW_TEXT, this._getLocation());
        var /** @type {?} */ condition = this._readUntil($COMMA);
        this._endToken([condition], this._getLocation());
        this._requireCharCode($COMMA);
        this._attemptCharCodeUntilFn(isNotWhitespace);
        this._beginToken(TokenType$1.RAW_TEXT, this._getLocation());
        var /** @type {?} */ type = this._readUntil($COMMA);
        this._endToken([type], this._getLocation());
        this._requireCharCode($COMMA);
        this._attemptCharCodeUntilFn(isNotWhitespace);
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._consumeExpansionCaseStart = function () {
        this._beginToken(TokenType$1.EXPANSION_CASE_VALUE, this._getLocation());
        var /** @type {?} */ value = this._readUntil($LBRACE).trim();
        this._endToken([value], this._getLocation());
        this._attemptCharCodeUntilFn(isNotWhitespace);
        this._beginToken(TokenType$1.EXPANSION_CASE_EXP_START, this._getLocation());
        this._requireCharCode($LBRACE);
        this._endToken([], this._getLocation());
        this._attemptCharCodeUntilFn(isNotWhitespace);
        this._expansionCaseStack.push(TokenType$1.EXPANSION_CASE_EXP_START);
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._consumeExpansionCaseEnd = function () {
        this._beginToken(TokenType$1.EXPANSION_CASE_EXP_END, this._getLocation());
        this._requireCharCode($RBRACE);
        this._endToken([], this._getLocation());
        this._attemptCharCodeUntilFn(isNotWhitespace);
        this._expansionCaseStack.pop();
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._consumeExpansionFormEnd = function () {
        this._beginToken(TokenType$1.EXPANSION_FORM_END, this._getLocation());
        this._requireCharCode($RBRACE);
        this._endToken([]);
        this._expansionCaseStack.pop();
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._consumeText = function () {
        var /** @type {?} */ start = this._getLocation();
        this._beginToken(TokenType$1.TEXT, start);
        var /** @type {?} */ parts = [];
        do {
            if (this._interpolationConfig && this._attemptStr(this._interpolationConfig.start)) {
                parts.push(this._interpolationConfig.start);
                this._inInterpolation = true;
            }
            else if (this._interpolationConfig && this._inInterpolation &&
                this._attemptStr(this._interpolationConfig.end)) {
                parts.push(this._interpolationConfig.end);
                this._inInterpolation = false;
            }
            else {
                parts.push(this._readChar(true));
            }
        } while (!this._isTextEnd());
        this._endToken([this._processCarriageReturns(parts.join(''))]);
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._isTextEnd = function () {
        if (this._peek === $LT || this._peek === $EOF) {
            return true;
        }
        if (this._tokenizeIcu && !this._inInterpolation) {
            if (isExpansionFormStart(this._input, this._index, this._interpolationConfig)) {
                // start of an expansion form
                return true;
            }
            if (this._peek === $RBRACE && this._isInExpansionCase()) {
                // end of and expansion case
                return true;
            }
        }
        return false;
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._savePosition = function () {
        return [this._peek, this._index, this._column, this._line, this.tokens.length];
    };
    /**
     * @param {?} char
     * @return {?}
     */
    _Tokenizer.prototype._readUntil = function (char) {
        var /** @type {?} */ start = this._index;
        this._attemptUntilChar(char);
        return this._input.substring(start, this._index);
    };
    /**
     * @param {?} position
     * @return {?}
     */
    _Tokenizer.prototype._restorePosition = function (position) {
        this._peek = position[0];
        this._index = position[1];
        this._column = position[2];
        this._line = position[3];
        var /** @type {?} */ nbTokens = position[4];
        if (nbTokens < this.tokens.length) {
            // remove any extra tokens
            this.tokens = this.tokens.slice(0, nbTokens);
        }
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._isInExpansionCase = function () {
        return this._expansionCaseStack.length > 0 &&
            this._expansionCaseStack[this._expansionCaseStack.length - 1] ===
                TokenType$1.EXPANSION_CASE_EXP_START;
    };
    /**
     * @return {?}
     */
    _Tokenizer.prototype._isInExpansionForm = function () {
        return this._expansionCaseStack.length > 0 &&
            this._expansionCaseStack[this._expansionCaseStack.length - 1] ===
                TokenType$1.EXPANSION_FORM_START;
    };
    return _Tokenizer;
}());
/**
 * @param {?} code
 * @return {?}
 */
function isNotWhitespace(code) {
    return !isWhitespace(code) || code === $EOF;
}
/**
 * @param {?} code
 * @return {?}
 */
function isNameEnd(code) {
    return isWhitespace(code) || code === $GT || code === $SLASH ||
        code === $SQ || code === $DQ || code === $EQ;
}
/**
 * @param {?} code
 * @return {?}
 */
function isPrefixEnd(code) {
    return (code < $a || $z < code) && (code < $A || $Z < code) &&
        (code < $0 || code > $9);
}
/**
 * @param {?} code
 * @return {?}
 */
function isDigitEntityEnd(code) {
    return code == $SEMICOLON || code == $EOF || !isAsciiHexDigit(code);
}
/**
 * @param {?} code
 * @return {?}
 */
function isNamedEntityEnd(code) {
    return code == $SEMICOLON || code == $EOF || !isAsciiLetter(code);
}
/**
 * @param {?} input
 * @param {?} offset
 * @param {?} interpolationConfig
 * @return {?}
 */
function isExpansionFormStart(input, offset, interpolationConfig) {
    var /** @type {?} */ isInterpolationStart = interpolationConfig ? input.indexOf(interpolationConfig.start, offset) == offset : false;
    return input.charCodeAt(offset) == $LBRACE && !isInterpolationStart;
}
/**
 * @param {?} peek
 * @return {?}
 */
function isExpansionCaseStart(peek) {
    return peek === $EQ || isAsciiLetter(peek) || isDigit(peek);
}
/**
 * @param {?} code1
 * @param {?} code2
 * @return {?}
 */
function compareCharCodeCaseInsensitive(code1, code2) {
    return toUpperCaseCharCode(code1) == toUpperCaseCharCode(code2);
}
/**
 * @param {?} code
 * @return {?}
 */
function toUpperCaseCharCode(code) {
    return code >= $a && code <= $z ? code - $a + $A : code;
}
/**
 * @param {?} srcTokens
 * @return {?}
 */
function mergeTextTokens(srcTokens) {
    var /** @type {?} */ dstTokens = [];
    var /** @type {?} */ lastDstToken = undefined;
    for (var /** @type {?} */ i = 0; i < srcTokens.length; i++) {
        var /** @type {?} */ token = srcTokens[i];
        if (lastDstToken && lastDstToken.type == TokenType$1.TEXT && token.type == TokenType$1.TEXT) {
            lastDstToken.parts[0] += token.parts[0];
            lastDstToken.sourceSpan.end = token.sourceSpan.end;
        }
        else {
            lastDstToken = token;
            dstTokens.push(lastDstToken);
        }
    }
    return dstTokens;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var TreeError = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](TreeError, _super);
    /**
     * @param {?} elementName
     * @param {?} span
     * @param {?} msg
     */
    function TreeError(elementName, span, msg) {
        var _this = _super.call(this, span, msg) || this;
        _this.elementName = elementName;
        return _this;
    }
    /**
     * @param {?} elementName
     * @param {?} span
     * @param {?} msg
     * @return {?}
     */
    TreeError.create = function (elementName, span, msg) {
        return new TreeError(elementName, span, msg);
    };
    return TreeError;
}(ParseError));
var ParseTreeResult = (function () {
    /**
     * @param {?} rootNodes
     * @param {?} errors
     */
    function ParseTreeResult(rootNodes, errors) {
        this.rootNodes = rootNodes;
        this.errors = errors;
    }
    return ParseTreeResult;
}());
var Parser$1 = (function () {
    /**
     * @param {?} getTagDefinition
     */
    function Parser$1(getTagDefinition) {
        this.getTagDefinition = getTagDefinition;
    }
    /**
     * @param {?} source
     * @param {?} url
     * @param {?=} parseExpansionForms
     * @param {?=} interpolationConfig
     * @return {?}
     */
    Parser$1.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {
        if (parseExpansionForms === void 0) { parseExpansionForms = false; }
        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }
        var /** @type {?} */ tokensAndErrors = tokenize(source, url, this.getTagDefinition, parseExpansionForms, interpolationConfig);
        var /** @type {?} */ treeAndErrors = new _TreeBuilder(tokensAndErrors.tokens, this.getTagDefinition).build();
        return new ParseTreeResult(treeAndErrors.rootNodes, ((tokensAndErrors.errors)).concat(treeAndErrors.errors));
    };
    return Parser$1;
}());
var _TreeBuilder = (function () {
    /**
     * @param {?} tokens
     * @param {?} getTagDefinition
     */
    function _TreeBuilder(tokens, getTagDefinition) {
        this.tokens = tokens;
        this.getTagDefinition = getTagDefinition;
        this._index = -1;
        this._rootNodes = [];
        this._errors = [];
        this._elementStack = [];
        this._advance();
    }
    /**
     * @return {?}
     */
    _TreeBuilder.prototype.build = function () {
        while (this._peek.type !== TokenType$1.EOF) {
            if (this._peek.type === TokenType$1.TAG_OPEN_START) {
                this._consumeStartTag(this._advance());
            }
            else if (this._peek.type === TokenType$1.TAG_CLOSE) {
                this._consumeEndTag(this._advance());
            }
            else if (this._peek.type === TokenType$1.CDATA_START) {
                this._closeVoidElement();
                this._consumeCdata(this._advance());
            }
            else if (this._peek.type === TokenType$1.COMMENT_START) {
                this._closeVoidElement();
                this._consumeComment(this._advance());
            }
            else if (this._peek.type === TokenType$1.TEXT || this._peek.type === TokenType$1.RAW_TEXT ||
                this._peek.type === TokenType$1.ESCAPABLE_RAW_TEXT) {
                this._closeVoidElement();
                this._consumeText(this._advance());
            }
            else if (this._peek.type === TokenType$1.EXPANSION_FORM_START) {
                this._consumeExpansion(this._advance());
            }
            else {
                // Skip all other tokens...
                this._advance();
            }
        }
        return new ParseTreeResult(this._rootNodes, this._errors);
    };
    /**
     * @return {?}
     */
    _TreeBuilder.prototype._advance = function () {
        var /** @type {?} */ prev = this._peek;
        if (this._index < this.tokens.length - 1) {
            // Note: there is always an EOF token at the end
            this._index++;
        }
        this._peek = this.tokens[this._index];
        return prev;
    };
    /**
     * @param {?} type
     * @return {?}
     */
    _TreeBuilder.prototype._advanceIf = function (type) {
        if (this._peek.type === type) {
            return this._advance();
        }
        return null;
    };
    /**
     * @param {?} startToken
     * @return {?}
     */
    _TreeBuilder.prototype._consumeCdata = function (startToken) {
        this._consumeText(this._advance());
        this._advanceIf(TokenType$1.CDATA_END);
    };
    /**
     * @param {?} token
     * @return {?}
     */
    _TreeBuilder.prototype._consumeComment = function (token) {
        var /** @type {?} */ text = this._advanceIf(TokenType$1.RAW_TEXT);
        this._advanceIf(TokenType$1.COMMENT_END);
        var /** @type {?} */ value = text != null ? text.parts[0].trim() : null;
        this._addToParent(new Comment(value, token.sourceSpan));
    };
    /**
     * @param {?} token
     * @return {?}
     */
    _TreeBuilder.prototype._consumeExpansion = function (token) {
        var /** @type {?} */ switchValue = this._advance();
        var /** @type {?} */ type = this._advance();
        var /** @type {?} */ cases = [];
        // read =
        while (this._peek.type === TokenType$1.EXPANSION_CASE_VALUE) {
            var /** @type {?} */ expCase = this._parseExpansionCase();
            if (!expCase)
                return; // error
            cases.push(expCase);
        }
        // read the final }
        if (this._peek.type !== TokenType$1.EXPANSION_FORM_END) {
            this._errors.push(TreeError.create(null, this._peek.sourceSpan, "Invalid ICU message. Missing '}'."));
            return;
        }
        var /** @type {?} */ sourceSpan = new ParseSourceSpan(token.sourceSpan.start, this._peek.sourceSpan.end);
        this._addToParent(new Expansion(switchValue.parts[0], type.parts[0], cases, sourceSpan, switchValue.sourceSpan));
        this._advance();
    };
    /**
     * @return {?}
     */
    _TreeBuilder.prototype._parseExpansionCase = function () {
        var /** @type {?} */ value = this._advance();
        // read {
        if (this._peek.type !== TokenType$1.EXPANSION_CASE_EXP_START) {
            this._errors.push(TreeError.create(null, this._peek.sourceSpan, "Invalid ICU message. Missing '{'."));
            return null;
        }
        // read until }
        var /** @type {?} */ start = this._advance();
        var /** @type {?} */ exp = this._collectExpansionExpTokens(start);
        if (!exp)
            return null;
        var /** @type {?} */ end = this._advance();
        exp.push(new Token$1(TokenType$1.EOF, [], end.sourceSpan));
        // parse everything in between { and }
        var /** @type {?} */ parsedExp = new _TreeBuilder(exp, this.getTagDefinition).build();
        if (parsedExp.errors.length > 0) {
            this._errors = this._errors.concat(/** @type {?} */ (parsedExp.errors));
            return null;
        }
        var /** @type {?} */ sourceSpan = new ParseSourceSpan(value.sourceSpan.start, end.sourceSpan.end);
        var /** @type {?} */ expSourceSpan = new ParseSourceSpan(start.sourceSpan.start, end.sourceSpan.end);
        return new ExpansionCase(value.parts[0], parsedExp.rootNodes, sourceSpan, value.sourceSpan, expSourceSpan);
    };
    /**
     * @param {?} start
     * @return {?}
     */
    _TreeBuilder.prototype._collectExpansionExpTokens = function (start) {
        var /** @type {?} */ exp = [];
        var /** @type {?} */ expansionFormStack = [TokenType$1.EXPANSION_CASE_EXP_START];
        while (true) {
            if (this._peek.type === TokenType$1.EXPANSION_FORM_START ||
                this._peek.type === TokenType$1.EXPANSION_CASE_EXP_START) {
                expansionFormStack.push(this._peek.type);
            }
            if (this._peek.type === TokenType$1.EXPANSION_CASE_EXP_END) {
                if (lastOnStack(expansionFormStack, TokenType$1.EXPANSION_CASE_EXP_START)) {
                    expansionFormStack.pop();
                    if (expansionFormStack.length == 0)
                        return exp;
                }
                else {
                    this._errors.push(TreeError.create(null, start.sourceSpan, "Invalid ICU message. Missing '}'."));
                    return null;
                }
            }
            if (this._peek.type === TokenType$1.EXPANSION_FORM_END) {
                if (lastOnStack(expansionFormStack, TokenType$1.EXPANSION_FORM_START)) {
                    expansionFormStack.pop();
                }
                else {
                    this._errors.push(TreeError.create(null, start.sourceSpan, "Invalid ICU message. Missing '}'."));
                    return null;
                }
            }
            if (this._peek.type === TokenType$1.EOF) {
                this._errors.push(TreeError.create(null, start.sourceSpan, "Invalid ICU message. Missing '}'."));
                return null;
            }
            exp.push(this._advance());
        }
    };
    /**
     * @param {?} token
     * @return {?}
     */
    _TreeBuilder.prototype._consumeText = function (token) {
        var /** @type {?} */ text = token.parts[0];
        if (text.length > 0 && text[0] == '\n') {
            var /** @type {?} */ parent = this._getParentElement();
            if (parent != null && parent.children.length == 0 &&
                this.getTagDefinition(parent.name).ignoreFirstLf) {
                text = text.substring(1);
            }
        }
        if (text.length > 0) {
            this._addToParent(new Text(text, token.sourceSpan));
        }
    };
    /**
     * @return {?}
     */
    _TreeBuilder.prototype._closeVoidElement = function () {
        var /** @type {?} */ el = this._getParentElement();
        if (el && this.getTagDefinition(el.name).isVoid) {
            this._elementStack.pop();
        }
    };
    /**
     * @param {?} startTagToken
     * @return {?}
     */
    _TreeBuilder.prototype._consumeStartTag = function (startTagToken) {
        var /** @type {?} */ prefix = startTagToken.parts[0];
        var /** @type {?} */ name = startTagToken.parts[1];
        var /** @type {?} */ attrs = [];
        while (this._peek.type === TokenType$1.ATTR_NAME) {
            attrs.push(this._consumeAttr(this._advance()));
        }
        var /** @type {?} */ fullName = this._getElementFullName(prefix, name, this._getParentElement());
        var /** @type {?} */ selfClosing = false;
        // Note: There could have been a tokenizer error
        // so that we don't get a token for the end tag...
        if (this._peek.type === TokenType$1.TAG_OPEN_END_VOID) {
            this._advance();
            selfClosing = true;
            var /** @type {?} */ tagDef = this.getTagDefinition(fullName);
            if (!(tagDef.canSelfClose || getNsPrefix(fullName) !== null || tagDef.isVoid)) {
                this._errors.push(TreeError.create(fullName, startTagToken.sourceSpan, "Only void and foreign elements can be self closed \"" + startTagToken.parts[1] + "\""));
            }
        }
        else if (this._peek.type === TokenType$1.TAG_OPEN_END) {
            this._advance();
            selfClosing = false;
        }
        var /** @type {?} */ end = this._peek.sourceSpan.start;
        var /** @type {?} */ span = new ParseSourceSpan(startTagToken.sourceSpan.start, end);
        var /** @type {?} */ el = new Element(fullName, attrs, [], span, span, undefined);
        this._pushElement(el);
        if (selfClosing) {
            this._popElement(fullName);
            el.endSourceSpan = span;
        }
    };
    /**
     * @param {?} el
     * @return {?}
     */
    _TreeBuilder.prototype._pushElement = function (el) {
        var /** @type {?} */ parentEl = this._getParentElement();
        if (parentEl && this.getTagDefinition(parentEl.name).isClosedByChild(el.name)) {
            this._elementStack.pop();
        }
        var /** @type {?} */ tagDef = this.getTagDefinition(el.name);
        var _a = this._getParentElementSkippingContainers(), parent = _a.parent, container = _a.container;
        if (parent && tagDef.requireExtraParent(parent.name)) {
            var /** @type {?} */ newParent = new Element(tagDef.parentToAdd, [], [], el.sourceSpan, el.startSourceSpan, el.endSourceSpan);
            this._insertBeforeContainer(parent, container, newParent);
        }
        this._addToParent(el);
        this._elementStack.push(el);
    };
    /**
     * @param {?} endTagToken
     * @return {?}
     */
    _TreeBuilder.prototype._consumeEndTag = function (endTagToken) {
        var /** @type {?} */ fullName = this._getElementFullName(endTagToken.parts[0], endTagToken.parts[1], this._getParentElement());
        if (this._getParentElement()) {
            ((this._getParentElement())).endSourceSpan = endTagToken.sourceSpan;
        }
        if (this.getTagDefinition(fullName).isVoid) {
            this._errors.push(TreeError.create(fullName, endTagToken.sourceSpan, "Void elements do not have end tags \"" + endTagToken.parts[1] + "\""));
        }
        else if (!this._popElement(fullName)) {
            var /** @type {?} */ errMsg = "Unexpected closing tag \"" + fullName + "\". It may happen when the tag has already been closed by another tag. For more info see https://www.w3.org/TR/html5/syntax.html#closing-elements-that-have-implied-end-tags";
            this._errors.push(TreeError.create(fullName, endTagToken.sourceSpan, errMsg));
        }
    };
    /**
     * @param {?} fullName
     * @return {?}
     */
    _TreeBuilder.prototype._popElement = function (fullName) {
        for (var /** @type {?} */ stackIndex = this._elementStack.length - 1; stackIndex >= 0; stackIndex--) {
            var /** @type {?} */ el = this._elementStack[stackIndex];
            if (el.name == fullName) {
                this._elementStack.splice(stackIndex, this._elementStack.length - stackIndex);
                return true;
            }
            if (!this.getTagDefinition(el.name).closedByParent) {
                return false;
            }
        }
        return false;
    };
    /**
     * @param {?} attrName
     * @return {?}
     */
    _TreeBuilder.prototype._consumeAttr = function (attrName) {
        var /** @type {?} */ fullName = mergeNsAndName(attrName.parts[0], attrName.parts[1]);
        var /** @type {?} */ end = attrName.sourceSpan.end;
        var /** @type {?} */ value = '';
        var /** @type {?} */ valueSpan = ((undefined));
        if (this._peek.type === TokenType$1.ATTR_VALUE) {
            var /** @type {?} */ valueToken = this._advance();
            value = valueToken.parts[0];
            end = valueToken.sourceSpan.end;
            valueSpan = valueToken.sourceSpan;
        }
        return new Attribute$1(fullName, value, new ParseSourceSpan(attrName.sourceSpan.start, end), valueSpan);
    };
    /**
     * @return {?}
     */
    _TreeBuilder.prototype._getParentElement = function () {
        return this._elementStack.length > 0 ? this._elementStack[this._elementStack.length - 1] : null;
    };
    /**
     * Returns the parent in the DOM and the container.
     *
     * `<ng-container>` elements are skipped as they are not rendered as DOM element.
     * @return {?}
     */
    _TreeBuilder.prototype._getParentElementSkippingContainers = function () {
        var /** @type {?} */ container = null;
        for (var /** @type {?} */ i = this._elementStack.length - 1; i >= 0; i--) {
            if (!isNgContainer(this._elementStack[i].name)) {
                return { parent: this._elementStack[i], container: container };
            }
            container = this._elementStack[i];
        }
        return { parent: null, container: container };
    };
    /**
     * @param {?} node
     * @return {?}
     */
    _TreeBuilder.prototype._addToParent = function (node) {
        var /** @type {?} */ parent = this._getParentElement();
        if (parent != null) {
            parent.children.push(node);
        }
        else {
            this._rootNodes.push(node);
        }
    };
    /**
     * Insert a node between the parent and the container.
     * When no container is given, the node is appended as a child of the parent.
     * Also updates the element stack accordingly.
     *
     * \@internal
     * @param {?} parent
     * @param {?} container
     * @param {?} node
     * @return {?}
     */
    _TreeBuilder.prototype._insertBeforeContainer = function (parent, container, node) {
        if (!container) {
            this._addToParent(node);
            this._elementStack.push(node);
        }
        else {
            if (parent) {
                // replace the container with the new node in the children
                var /** @type {?} */ index = parent.children.indexOf(container);
                parent.children[index] = node;
            }
            else {
                this._rootNodes.push(node);
            }
            node.children.push(container);
            this._elementStack.splice(this._elementStack.indexOf(container), 0, node);
        }
    };
    /**
     * @param {?} prefix
     * @param {?} localName
     * @param {?} parentElement
     * @return {?}
     */
    _TreeBuilder.prototype._getElementFullName = function (prefix, localName, parentElement) {
        if (prefix == null) {
            prefix = ((this.getTagDefinition(localName).implicitNamespacePrefix));
            if (prefix == null && parentElement != null) {
                prefix = getNsPrefix(parentElement.name);
            }
        }
        return mergeNsAndName(prefix, localName);
    };
    return _TreeBuilder;
}());
/**
 * @param {?} stack
 * @param {?} element
 * @return {?}
 */
function lastOnStack(stack, element) {
    return stack.length > 0 && stack[stack.length - 1] === element;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} message
 * @return {?}
 */
function digest(message) {
    return message.id || sha1(serializeNodes(message.nodes).join('') + ("[" + message.meaning + "]"));
}
/**
 * @param {?} message
 * @return {?}
 */
function decimalDigest(message) {
    if (message.id) {
        return message.id;
    }
    var /** @type {?} */ visitor = new _SerializerIgnoreIcuExpVisitor();
    var /** @type {?} */ parts = message.nodes.map(function (a) { return a.visit(visitor, null); });
    return computeMsgId(parts.join(''), message.meaning);
}
/**
 * Serialize the i18n ast to something xml-like in order to generate an UID.
 *
 * The visitor is also used in the i18n parser tests
 *
 * \@internal
 */
var _SerializerVisitor = (function () {
    function _SerializerVisitor() {
    }
    /**
     * @param {?} text
     * @param {?} context
     * @return {?}
     */
    _SerializerVisitor.prototype.visitText = function (text, context) { return text.value; };
    /**
     * @param {?} container
     * @param {?} context
     * @return {?}
     */
    _SerializerVisitor.prototype.visitContainer = function (container, context) {
        var _this = this;
        return "[" + container.children.map(function (child) { return child.visit(_this); }).join(', ') + "]";
    };
    /**
     * @param {?} icu
     * @param {?} context
     * @return {?}
     */
    _SerializerVisitor.prototype.visitIcu = function (icu, context) {
        var _this = this;
        var /** @type {?} */ strCases = Object.keys(icu.cases).map(function (k) { return k + " {" + icu.cases[k].visit(_this) + "}"; });
        return "{" + icu.expression + ", " + icu.type + ", " + strCases.join(', ') + "}";
    };
    /**
     * @param {?} ph
     * @param {?} context
     * @return {?}
     */
    _SerializerVisitor.prototype.visitTagPlaceholder = function (ph, context) {
        var _this = this;
        return ph.isVoid ?
            "<ph tag name=\"" + ph.startName + "\"/>" :
            "<ph tag name=\"" + ph.startName + "\">" + ph.children.map(function (child) { return child.visit(_this); }).join(', ') + "</ph name=\"" + ph.closeName + "\">";
    };
    /**
     * @param {?} ph
     * @param {?} context
     * @return {?}
     */
    _SerializerVisitor.prototype.visitPlaceholder = function (ph, context) {
        return ph.value ? "<ph name=\"" + ph.name + "\">" + ph.value + "</ph>" : "<ph name=\"" + ph.name + "\"/>";
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    _SerializerVisitor.prototype.visitIcuPlaceholder = function (ph, context) {
        return "<ph icu name=\"" + ph.name + "\">" + ph.value.visit(this) + "</ph>";
    };
    return _SerializerVisitor;
}());
var serializerVisitor = new _SerializerVisitor();
/**
 * @param {?} nodes
 * @return {?}
 */
function serializeNodes(nodes) {
    return nodes.map(function (a) { return a.visit(serializerVisitor, null); });
}
/**
 * Serialize the i18n ast to something xml-like in order to generate an UID.
 *
 * Ignore the ICU expressions so that message IDs stays identical if only the expression changes.
 *
 * \@internal
 */
var _SerializerIgnoreIcuExpVisitor = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](_SerializerIgnoreIcuExpVisitor, _super);
    function _SerializerIgnoreIcuExpVisitor() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @param {?} icu
     * @param {?} context
     * @return {?}
     */
    _SerializerIgnoreIcuExpVisitor.prototype.visitIcu = function (icu, context) {
        var _this = this;
        var /** @type {?} */ strCases = Object.keys(icu.cases).map(function (k) { return k + " {" + icu.cases[k].visit(_this) + "}"; });
        // Do not take the expression into account
        return "{" + icu.type + ", " + strCases.join(', ') + "}";
    };
    return _SerializerIgnoreIcuExpVisitor;
}(_SerializerVisitor));
/**
 * Compute the SHA1 of the given string
 *
 * see http://csrc.nist.gov/publications/fips/fips180-4/fips-180-4.pdf
 *
 * WARNING: this function has not been designed not tested with security in mind.
 *          DO NOT USE IT IN A SECURITY SENSITIVE CONTEXT.
 * @param {?} str
 * @return {?}
 */
function sha1(str) {
    var /** @type {?} */ utf8 = utf8Encode(str);
    var /** @type {?} */ words32 = stringToWords32(utf8, Endian.Big);
    var /** @type {?} */ len = utf8.length * 8;
    var /** @type {?} */ w = new Array(80);
    var _a = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0], a = _a[0], b = _a[1], c = _a[2], d = _a[3], e = _a[4];
    words32[len >> 5] |= 0x80 << (24 - len % 32);
    words32[((len + 64 >> 9) << 4) + 15] = len;
    for (var /** @type {?} */ i = 0; i < words32.length; i += 16) {
        var _b = [a, b, c, d, e], h0 = _b[0], h1 = _b[1], h2 = _b[2], h3 = _b[3], h4 = _b[4];
        for (var /** @type {?} */ j = 0; j < 80; j++) {
            if (j < 16) {
                w[j] = words32[i + j];
            }
            else {
                w[j] = rol32(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);
            }
            var _c = fk(j, b, c, d), f = _c[0], k = _c[1];
            var /** @type {?} */ temp = [rol32(a, 5), f, e, k, w[j]].reduce(add32);
            _d = [d, c, rol32(b, 30), a, temp], e = _d[0], d = _d[1], c = _d[2], b = _d[3], a = _d[4];
        }
        _e = [add32(a, h0), add32(b, h1), add32(c, h2), add32(d, h3), add32(e, h4)], a = _e[0], b = _e[1], c = _e[2], d = _e[3], e = _e[4];
    }
    return byteStringToHexString(words32ToByteString([a, b, c, d, e]));
    var _d, _e;
}
/**
 * @param {?} index
 * @param {?} b
 * @param {?} c
 * @param {?} d
 * @return {?}
 */
function fk(index, b, c, d) {
    if (index < 20) {
        return [(b & c) | (~b & d), 0x5a827999];
    }
    if (index < 40) {
        return [b ^ c ^ d, 0x6ed9eba1];
    }
    if (index < 60) {
        return [(b & c) | (b & d) | (c & d), 0x8f1bbcdc];
    }
    return [b ^ c ^ d, 0xca62c1d6];
}
/**
 * Compute the fingerprint of the given string
 *
 * The output is 64 bit number encoded as a decimal string
 *
 * based on:
 * https://github.com/google/closure-compiler/blob/master/src/com/google/javascript/jscomp/GoogleJsMessageIdGenerator.java
 * @param {?} str
 * @return {?}
 */
function fingerprint(str) {
    var /** @type {?} */ utf8 = utf8Encode(str);
    var _a = [hash32(utf8, 0), hash32(utf8, 102072)], hi = _a[0], lo = _a[1];
    if (hi == 0 && (lo == 0 || lo == 1)) {
        hi = hi ^ 0x130f9bef;
        lo = lo ^ -0x6b5f56d8;
    }
    return [hi, lo];
}
/**
 * @param {?} msg
 * @param {?} meaning
 * @return {?}
 */
function computeMsgId(msg, meaning) {
    var _a = fingerprint(msg), hi = _a[0], lo = _a[1];
    if (meaning) {
        var _b = fingerprint(meaning), him = _b[0], lom = _b[1];
        _c = add64(rol64([hi, lo], 1), [him, lom]), hi = _c[0], lo = _c[1];
    }
    return byteStringToDecString(words32ToByteString([hi & 0x7fffffff, lo]));
    var _c;
}
/**
 * @param {?} str
 * @param {?} c
 * @return {?}
 */
function hash32(str, c) {
    var _a = [0x9e3779b9, 0x9e3779b9], a = _a[0], b = _a[1];
    var /** @type {?} */ i;
    var /** @type {?} */ len = str.length;
    for (i = 0; i + 12 <= len; i += 12) {
        a = add32(a, wordAt(str, i, Endian.Little));
        b = add32(b, wordAt(str, i + 4, Endian.Little));
        c = add32(c, wordAt(str, i + 8, Endian.Little));
        _b = mix([a, b, c]), a = _b[0], b = _b[1], c = _b[2];
    }
    a = add32(a, wordAt(str, i, Endian.Little));
    b = add32(b, wordAt(str, i + 4, Endian.Little));
    // the first byte of c is reserved for the length
    c = add32(c, len);
    c = add32(c, wordAt(str, i + 8, Endian.Little) << 8);
    return mix([a, b, c])[2];
    var _b;
}
/**
 * @param {?} __0
 * @return {?}
 */
function mix(_a) {
    var a = _a[0], b = _a[1], c = _a[2];
    a = sub32(a, b);
    a = sub32(a, c);
    a ^= c >>> 13;
    b = sub32(b, c);
    b = sub32(b, a);
    b ^= a << 8;
    c = sub32(c, a);
    c = sub32(c, b);
    c ^= b >>> 13;
    a = sub32(a, b);
    a = sub32(a, c);
    a ^= c >>> 12;
    b = sub32(b, c);
    b = sub32(b, a);
    b ^= a << 16;
    c = sub32(c, a);
    c = sub32(c, b);
    c ^= b >>> 5;
    a = sub32(a, b);
    a = sub32(a, c);
    a ^= c >>> 3;
    b = sub32(b, c);
    b = sub32(b, a);
    b ^= a << 10;
    c = sub32(c, a);
    c = sub32(c, b);
    c ^= b >>> 15;
    return [a, b, c];
}
var Endian = {};
Endian.Little = 0;
Endian.Big = 1;
Endian[Endian.Little] = "Little";
Endian[Endian.Big] = "Big";
/**
 * @param {?} a
 * @param {?} b
 * @return {?}
 */
function add32(a, b) {
    return add32to64(a, b)[1];
}
/**
 * @param {?} a
 * @param {?} b
 * @return {?}
 */
function add32to64(a, b) {
    var /** @type {?} */ low = (a & 0xffff) + (b & 0xffff);
    var /** @type {?} */ high = (a >>> 16) + (b >>> 16) + (low >>> 16);
    return [high >>> 16, (high << 16) | (low & 0xffff)];
}
/**
 * @param {?} __0
 * @param {?} __1
 * @return {?}
 */
function add64(_a, _b) {
    var ah = _a[0], al = _a[1];
    var bh = _b[0], bl = _b[1];
    var _c = add32to64(al, bl), carry = _c[0], l = _c[1];
    var /** @type {?} */ h = add32(add32(ah, bh), carry);
    return [h, l];
}
/**
 * @param {?} a
 * @param {?} b
 * @return {?}
 */
function sub32(a, b) {
    var /** @type {?} */ low = (a & 0xffff) - (b & 0xffff);
    var /** @type {?} */ high = (a >> 16) - (b >> 16) + (low >> 16);
    return (high << 16) | (low & 0xffff);
}
/**
 * @param {?} a
 * @param {?} count
 * @return {?}
 */
function rol32(a, count) {
    return (a << count) | (a >>> (32 - count));
}
/**
 * @param {?} __0
 * @param {?} count
 * @return {?}
 */
function rol64(_a, count) {
    var hi = _a[0], lo = _a[1];
    var /** @type {?} */ h = (hi << count) | (lo >>> (32 - count));
    var /** @type {?} */ l = (lo << count) | (hi >>> (32 - count));
    return [h, l];
}
/**
 * @param {?} str
 * @param {?} endian
 * @return {?}
 */
function stringToWords32(str, endian) {
    var /** @type {?} */ words32 = Array((str.length + 3) >>> 2);
    for (var /** @type {?} */ i = 0; i < words32.length; i++) {
        words32[i] = wordAt(str, i * 4, endian);
    }
    return words32;
}
/**
 * @param {?} str
 * @param {?} index
 * @return {?}
 */
function byteAt(str, index) {
    return index >= str.length ? 0 : str.charCodeAt(index) & 0xff;
}
/**
 * @param {?} str
 * @param {?} index
 * @param {?} endian
 * @return {?}
 */
function wordAt(str, index, endian) {
    var /** @type {?} */ word = 0;
    if (endian === Endian.Big) {
        for (var /** @type {?} */ i = 0; i < 4; i++) {
            word += byteAt(str, index + i) << (24 - 8 * i);
        }
    }
    else {
        for (var /** @type {?} */ i = 0; i < 4; i++) {
            word += byteAt(str, index + i) << 8 * i;
        }
    }
    return word;
}
/**
 * @param {?} words32
 * @return {?}
 */
function words32ToByteString(words32) {
    return words32.reduce(function (str, word) { return str + word32ToByteString(word); }, '');
}
/**
 * @param {?} word
 * @return {?}
 */
function word32ToByteString(word) {
    var /** @type {?} */ str = '';
    for (var /** @type {?} */ i = 0; i < 4; i++) {
        str += String.fromCharCode((word >>> 8 * (3 - i)) & 0xff);
    }
    return str;
}
/**
 * @param {?} str
 * @return {?}
 */
function byteStringToHexString(str) {
    var /** @type {?} */ hex = '';
    for (var /** @type {?} */ i = 0; i < str.length; i++) {
        var /** @type {?} */ b = byteAt(str, i);
        hex += (b >>> 4).toString(16) + (b & 0x0f).toString(16);
    }
    return hex.toLowerCase();
}
/**
 * @param {?} str
 * @return {?}
 */
function byteStringToDecString(str) {
    var /** @type {?} */ decimal = '';
    var /** @type {?} */ toThePower = '1';
    for (var /** @type {?} */ i = str.length - 1; i >= 0; i--) {
        decimal = addBigInt(decimal, numberTimesBigInt(byteAt(str, i), toThePower));
        toThePower = numberTimesBigInt(256, toThePower);
    }
    return decimal.split('').reverse().join('');
}
/**
 * @param {?} x
 * @param {?} y
 * @return {?}
 */
function addBigInt(x, y) {
    var /** @type {?} */ sum = '';
    var /** @type {?} */ len = Math.max(x.length, y.length);
    for (var /** @type {?} */ i = 0, /** @type {?} */ carry = 0; i < len || carry; i++) {
        var /** @type {?} */ tmpSum = carry + +(x[i] || 0) + +(y[i] || 0);
        if (tmpSum >= 10) {
            carry = 1;
            sum += tmpSum - 10;
        }
        else {
            carry = 0;
            sum += tmpSum;
        }
    }
    return sum;
}
/**
 * @param {?} num
 * @param {?} b
 * @return {?}
 */
function numberTimesBigInt(num, b) {
    var /** @type {?} */ product = '';
    var /** @type {?} */ bToThePower = b;
    for (; num !== 0; num = num >>> 1) {
        if (num & 1)
            product = addBigInt(product, bToThePower);
        bToThePower = addBigInt(bToThePower, bToThePower);
    }
    return product;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var Message = (function () {
    /**
     * @param {?} nodes message AST
     * @param {?} placeholders maps placeholder names to static content
     * @param {?} placeholderToMessage maps placeholder names to messages (used for nested ICU messages)
     * @param {?} meaning
     * @param {?} description
     * @param {?} id
     */
    function Message(nodes, placeholders, placeholderToMessage, meaning, description, id) {
        this.nodes = nodes;
        this.placeholders = placeholders;
        this.placeholderToMessage = placeholderToMessage;
        this.meaning = meaning;
        this.description = description;
        this.id = id;
        if (nodes.length) {
            this.sources = [{
                    filePath: nodes[0].sourceSpan.start.file.url,
                    startLine: nodes[0].sourceSpan.start.line + 1,
                    startCol: nodes[0].sourceSpan.start.col + 1,
                    endLine: nodes[nodes.length - 1].sourceSpan.end.line + 1,
                    endCol: nodes[0].sourceSpan.start.col + 1
                }];
        }
        else {
            this.sources = [];
        }
    }
    return Message;
}());
var Text$1 = (function () {
    /**
     * @param {?} value
     * @param {?} sourceSpan
     */
    function Text$1(value, sourceSpan) {
        this.value = value;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    Text$1.prototype.visit = function (visitor, context) { return visitor.visitText(this, context); };
    return Text$1;
}());
var Container = (function () {
    /**
     * @param {?} children
     * @param {?} sourceSpan
     */
    function Container(children, sourceSpan) {
        this.children = children;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    Container.prototype.visit = function (visitor, context) { return visitor.visitContainer(this, context); };
    return Container;
}());
var Icu = (function () {
    /**
     * @param {?} expression
     * @param {?} type
     * @param {?} cases
     * @param {?} sourceSpan
     */
    function Icu(expression, type, cases, sourceSpan) {
        this.expression = expression;
        this.type = type;
        this.cases = cases;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    Icu.prototype.visit = function (visitor, context) { return visitor.visitIcu(this, context); };
    return Icu;
}());
var TagPlaceholder = (function () {
    /**
     * @param {?} tag
     * @param {?} attrs
     * @param {?} startName
     * @param {?} closeName
     * @param {?} children
     * @param {?} isVoid
     * @param {?} sourceSpan
     */
    function TagPlaceholder(tag, attrs, startName, closeName, children, isVoid, sourceSpan) {
        this.tag = tag;
        this.attrs = attrs;
        this.startName = startName;
        this.closeName = closeName;
        this.children = children;
        this.isVoid = isVoid;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    TagPlaceholder.prototype.visit = function (visitor, context) { return visitor.visitTagPlaceholder(this, context); };
    return TagPlaceholder;
}());
var Placeholder = (function () {
    /**
     * @param {?} value
     * @param {?} name
     * @param {?} sourceSpan
     */
    function Placeholder(value, name, sourceSpan) {
        this.value = value;
        this.name = name;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    Placeholder.prototype.visit = function (visitor, context) { return visitor.visitPlaceholder(this, context); };
    return Placeholder;
}());
var IcuPlaceholder = (function () {
    /**
     * @param {?} value
     * @param {?} name
     * @param {?} sourceSpan
     */
    function IcuPlaceholder(value, name, sourceSpan) {
        this.value = value;
        this.name = name;
        this.sourceSpan = sourceSpan;
    }
    /**
     * @param {?} visitor
     * @param {?=} context
     * @return {?}
     */
    IcuPlaceholder.prototype.visit = function (visitor, context) { return visitor.visitIcuPlaceholder(this, context); };
    return IcuPlaceholder;
}());
var CloneVisitor = (function () {
    function CloneVisitor() {
    }
    /**
     * @param {?} text
     * @param {?=} context
     * @return {?}
     */
    CloneVisitor.prototype.visitText = function (text, context) { return new Text$1(text.value, text.sourceSpan); };
    /**
     * @param {?} container
     * @param {?=} context
     * @return {?}
     */
    CloneVisitor.prototype.visitContainer = function (container, context) {
        var _this = this;
        var /** @type {?} */ children = container.children.map(function (n) { return n.visit(_this, context); });
        return new Container(children, container.sourceSpan);
    };
    /**
     * @param {?} icu
     * @param {?=} context
     * @return {?}
     */
    CloneVisitor.prototype.visitIcu = function (icu, context) {
        var _this = this;
        var /** @type {?} */ cases = {};
        Object.keys(icu.cases).forEach(function (key) { return cases[key] = icu.cases[key].visit(_this, context); });
        var /** @type {?} */ msg = new Icu(icu.expression, icu.type, cases, icu.sourceSpan);
        msg.expressionPlaceholder = icu.expressionPlaceholder;
        return msg;
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    CloneVisitor.prototype.visitTagPlaceholder = function (ph, context) {
        var _this = this;
        var /** @type {?} */ children = ph.children.map(function (n) { return n.visit(_this, context); });
        return new TagPlaceholder(ph.tag, ph.attrs, ph.startName, ph.closeName, children, ph.isVoid, ph.sourceSpan);
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    CloneVisitor.prototype.visitPlaceholder = function (ph, context) {
        return new Placeholder(ph.value, ph.name, ph.sourceSpan);
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    CloneVisitor.prototype.visitIcuPlaceholder = function (ph, context) {
        return new IcuPlaceholder(ph.value, ph.name, ph.sourceSpan);
    };
    return CloneVisitor;
}());
var RecurseVisitor = (function () {
    function RecurseVisitor() {
    }
    /**
     * @param {?} text
     * @param {?=} context
     * @return {?}
     */
    RecurseVisitor.prototype.visitText = function (text, context) { };
    /**
     * @param {?} container
     * @param {?=} context
     * @return {?}
     */
    RecurseVisitor.prototype.visitContainer = function (container, context) {
        var _this = this;
        container.children.forEach(function (child) { return child.visit(_this); });
    };
    /**
     * @param {?} icu
     * @param {?=} context
     * @return {?}
     */
    RecurseVisitor.prototype.visitIcu = function (icu, context) {
        var _this = this;
        Object.keys(icu.cases).forEach(function (k) { icu.cases[k].visit(_this); });
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    RecurseVisitor.prototype.visitTagPlaceholder = function (ph, context) {
        var _this = this;
        ph.children.forEach(function (child) { return child.visit(_this); });
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    RecurseVisitor.prototype.visitPlaceholder = function (ph, context) { };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    RecurseVisitor.prototype.visitIcuPlaceholder = function (ph, context) { };
    return RecurseVisitor;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var TAG_TO_PLACEHOLDER_NAMES = {
    'A': 'LINK',
    'B': 'BOLD_TEXT',
    'BR': 'LINE_BREAK',
    'EM': 'EMPHASISED_TEXT',
    'H1': 'HEADING_LEVEL1',
    'H2': 'HEADING_LEVEL2',
    'H3': 'HEADING_LEVEL3',
    'H4': 'HEADING_LEVEL4',
    'H5': 'HEADING_LEVEL5',
    'H6': 'HEADING_LEVEL6',
    'HR': 'HORIZONTAL_RULE',
    'I': 'ITALIC_TEXT',
    'LI': 'LIST_ITEM',
    'LINK': 'MEDIA_LINK',
    'OL': 'ORDERED_LIST',
    'P': 'PARAGRAPH',
    'Q': 'QUOTATION',
    'S': 'STRIKETHROUGH_TEXT',
    'SMALL': 'SMALL_TEXT',
    'SUB': 'SUBSTRIPT',
    'SUP': 'SUPERSCRIPT',
    'TBODY': 'TABLE_BODY',
    'TD': 'TABLE_CELL',
    'TFOOT': 'TABLE_FOOTER',
    'TH': 'TABLE_HEADER_CELL',
    'THEAD': 'TABLE_HEADER',
    'TR': 'TABLE_ROW',
    'TT': 'MONOSPACED_TEXT',
    'U': 'UNDERLINED_TEXT',
    'UL': 'UNORDERED_LIST',
};
/**
 * Creates unique names for placeholder with different content.
 *
 * Returns the same placeholder name when the content is identical.
 *
 * \@internal
 */
var PlaceholderRegistry = (function () {
    function PlaceholderRegistry() {
        this._placeHolderNameCounts = {};
        this._signatureToName = {};
    }
    /**
     * @param {?} tag
     * @param {?} attrs
     * @param {?} isVoid
     * @return {?}
     */
    PlaceholderRegistry.prototype.getStartTagPlaceholderName = function (tag, attrs, isVoid) {
        var /** @type {?} */ signature = this._hashTag(tag, attrs, isVoid);
        if (this._signatureToName[signature]) {
            return this._signatureToName[signature];
        }
        var /** @type {?} */ upperTag = tag.toUpperCase();
        var /** @type {?} */ baseName = TAG_TO_PLACEHOLDER_NAMES[upperTag] || "TAG_" + upperTag;
        var /** @type {?} */ name = this._generateUniqueName(isVoid ? baseName : "START_" + baseName);
        this._signatureToName[signature] = name;
        return name;
    };
    /**
     * @param {?} tag
     * @return {?}
     */
    PlaceholderRegistry.prototype.getCloseTagPlaceholderName = function (tag) {
        var /** @type {?} */ signature = this._hashClosingTag(tag);
        if (this._signatureToName[signature]) {
            return this._signatureToName[signature];
        }
        var /** @type {?} */ upperTag = tag.toUpperCase();
        var /** @type {?} */ baseName = TAG_TO_PLACEHOLDER_NAMES[upperTag] || "TAG_" + upperTag;
        var /** @type {?} */ name = this._generateUniqueName("CLOSE_" + baseName);
        this._signatureToName[signature] = name;
        return name;
    };
    /**
     * @param {?} name
     * @param {?} content
     * @return {?}
     */
    PlaceholderRegistry.prototype.getPlaceholderName = function (name, content) {
        var /** @type {?} */ upperName = name.toUpperCase();
        var /** @type {?} */ signature = "PH: " + upperName + "=" + content;
        if (this._signatureToName[signature]) {
            return this._signatureToName[signature];
        }
        var /** @type {?} */ uniqueName = this._generateUniqueName(upperName);
        this._signatureToName[signature] = uniqueName;
        return uniqueName;
    };
    /**
     * @param {?} name
     * @return {?}
     */
    PlaceholderRegistry.prototype.getUniquePlaceholder = function (name) {
        return this._generateUniqueName(name.toUpperCase());
    };
    /**
     * @param {?} tag
     * @param {?} attrs
     * @param {?} isVoid
     * @return {?}
     */
    PlaceholderRegistry.prototype._hashTag = function (tag, attrs, isVoid) {
        var /** @type {?} */ start = "<" + tag;
        var /** @type {?} */ strAttrs = Object.keys(attrs).sort().map(function (name) { return " " + name + "=" + attrs[name]; }).join('');
        var /** @type {?} */ end = isVoid ? '/>' : "></" + tag + ">";
        return start + strAttrs + end;
    };
    /**
     * @param {?} tag
     * @return {?}
     */
    PlaceholderRegistry.prototype._hashClosingTag = function (tag) { return this._hashTag("/" + tag, {}, false); };
    /**
     * @param {?} base
     * @return {?}
     */
    PlaceholderRegistry.prototype._generateUniqueName = function (base) {
        var /** @type {?} */ seen = this._placeHolderNameCounts.hasOwnProperty(base);
        if (!seen) {
            this._placeHolderNameCounts[base] = 1;
            return base;
        }
        var /** @type {?} */ id = this._placeHolderNameCounts[base];
        this._placeHolderNameCounts[base] = id + 1;
        return base + "_" + id;
    };
    return PlaceholderRegistry;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _expParser = new Parser(new Lexer());
/**
 * Returns a function converting html nodes to an i18n Message given an interpolationConfig
 * @param {?} interpolationConfig
 * @return {?}
 */
function createI18nMessageFactory(interpolationConfig) {
    var /** @type {?} */ visitor = new _I18nVisitor(_expParser, interpolationConfig);
    return function (nodes, meaning, description, id) { return visitor.toI18nMessage(nodes, meaning, description, id); };
}
var _I18nVisitor = (function () {
    /**
     * @param {?} _expressionParser
     * @param {?} _interpolationConfig
     */
    function _I18nVisitor(_expressionParser, _interpolationConfig) {
        this._expressionParser = _expressionParser;
        this._interpolationConfig = _interpolationConfig;
    }
    /**
     * @param {?} nodes
     * @param {?} meaning
     * @param {?} description
     * @param {?} id
     * @return {?}
     */
    _I18nVisitor.prototype.toI18nMessage = function (nodes, meaning, description, id) {
        this._isIcu = nodes.length == 1 && nodes[0] instanceof Expansion;
        this._icuDepth = 0;
        this._placeholderRegistry = new PlaceholderRegistry();
        this._placeholderToContent = {};
        this._placeholderToMessage = {};
        var /** @type {?} */ i18nodes = visitAll(this, nodes, {});
        return new Message(i18nodes, this._placeholderToContent, this._placeholderToMessage, meaning, description, id);
    };
    /**
     * @param {?} el
     * @param {?} context
     * @return {?}
     */
    _I18nVisitor.prototype.visitElement = function (el, context) {
        var /** @type {?} */ children = visitAll(this, el.children);
        var /** @type {?} */ attrs = {};
        el.attrs.forEach(function (attr) {
            // Do not visit the attributes, translatable ones are top-level ASTs
            attrs[attr.name] = attr.value;
        });
        var /** @type {?} */ isVoid = getHtmlTagDefinition(el.name).isVoid;
        var /** @type {?} */ startPhName = this._placeholderRegistry.getStartTagPlaceholderName(el.name, attrs, isVoid);
        this._placeholderToContent[startPhName] = ((el.sourceSpan)).toString();
        var /** @type {?} */ closePhName = '';
        if (!isVoid) {
            closePhName = this._placeholderRegistry.getCloseTagPlaceholderName(el.name);
            this._placeholderToContent[closePhName] = "</" + el.name + ">";
        }
        return new TagPlaceholder(el.name, attrs, startPhName, closePhName, children, isVoid, /** @type {?} */ ((el.sourceSpan)));
    };
    /**
     * @param {?} attribute
     * @param {?} context
     * @return {?}
     */
    _I18nVisitor.prototype.visitAttribute = function (attribute, context) {
        return this._visitTextWithInterpolation(attribute.value, attribute.sourceSpan);
    };
    /**
     * @param {?} text
     * @param {?} context
     * @return {?}
     */
    _I18nVisitor.prototype.visitText = function (text, context) {
        return this._visitTextWithInterpolation(text.value, /** @type {?} */ ((text.sourceSpan)));
    };
    /**
     * @param {?} comment
     * @param {?} context
     * @return {?}
     */
    _I18nVisitor.prototype.visitComment = function (comment, context) { return null; };
    /**
     * @param {?} icu
     * @param {?} context
     * @return {?}
     */
    _I18nVisitor.prototype.visitExpansion = function (icu, context) {
        var _this = this;
        this._icuDepth++;
        var /** @type {?} */ i18nIcuCases = {};
        var /** @type {?} */ i18nIcu = new Icu(icu.switchValue, icu.type, i18nIcuCases, icu.sourceSpan);
        icu.cases.forEach(function (caze) {
            i18nIcuCases[caze.value] = new Container(caze.expression.map(function (node) { return node.visit(_this, {}); }), caze.expSourceSpan);
        });
        this._icuDepth--;
        if (this._isIcu || this._icuDepth > 0) {
            // Returns an ICU node when:
            // - the message (vs a part of the message) is an ICU message, or
            // - the ICU message is nested.
            var /** @type {?} */ expPh = this._placeholderRegistry.getUniquePlaceholder("VAR_" + icu.type);
            i18nIcu.expressionPlaceholder = expPh;
            this._placeholderToContent[expPh] = icu.switchValue;
            return i18nIcu;
        }
        // Else returns a placeholder
        // ICU placeholders should not be replaced with their original content but with the their
        // translations. We need to create a new visitor (they are not re-entrant) to compute the
        // message id.
        // TODO(vicb): add a html.Node -> i18n.Message cache to avoid having to re-create the msg
        var /** @type {?} */ phName = this._placeholderRegistry.getPlaceholderName('ICU', icu.sourceSpan.toString());
        var /** @type {?} */ visitor = new _I18nVisitor(this._expressionParser, this._interpolationConfig);
        this._placeholderToMessage[phName] = visitor.toI18nMessage([icu], '', '', '');
        return new IcuPlaceholder(i18nIcu, phName, icu.sourceSpan);
    };
    /**
     * @param {?} icuCase
     * @param {?} context
     * @return {?}
     */
    _I18nVisitor.prototype.visitExpansionCase = function (icuCase, context) {
        throw new Error('Unreachable code');
    };
    /**
     * @param {?} text
     * @param {?} sourceSpan
     * @return {?}
     */
    _I18nVisitor.prototype._visitTextWithInterpolation = function (text, sourceSpan) {
        var /** @type {?} */ splitInterpolation = this._expressionParser.splitInterpolation(text, sourceSpan.start.toString(), this._interpolationConfig);
        if (!splitInterpolation) {
            // No expression, return a single text
            return new Text$1(text, sourceSpan);
        }
        // Return a group of text + expressions
        var /** @type {?} */ nodes = [];
        var /** @type {?} */ container = new Container(nodes, sourceSpan);
        var _a = this._interpolationConfig, sDelimiter = _a.start, eDelimiter = _a.end;
        for (var /** @type {?} */ i = 0; i < splitInterpolation.strings.length - 1; i++) {
            var /** @type {?} */ expression = splitInterpolation.expressions[i];
            var /** @type {?} */ baseName = _extractPlaceholderName(expression) || 'INTERPOLATION';
            var /** @type {?} */ phName = this._placeholderRegistry.getPlaceholderName(baseName, expression);
            if (splitInterpolation.strings[i].length) {
                // No need to add empty strings
                nodes.push(new Text$1(splitInterpolation.strings[i], sourceSpan));
            }
            nodes.push(new Placeholder(expression, phName, sourceSpan));
            this._placeholderToContent[phName] = sDelimiter + expression + eDelimiter;
        }
        // The last index contains no expression
        var /** @type {?} */ lastStringIdx = splitInterpolation.strings.length - 1;
        if (splitInterpolation.strings[lastStringIdx].length) {
            nodes.push(new Text$1(splitInterpolation.strings[lastStringIdx], sourceSpan));
        }
        return container;
    };
    return _I18nVisitor;
}());
var _CUSTOM_PH_EXP = /\/\/[\s\S]*i18n[\s\S]*\([\s\S]*ph[\s\S]*=[\s\S]*("|')([\s\S]*?)\1[\s\S]*\)/g;
/**
 * @param {?} input
 * @return {?}
 */
function _extractPlaceholderName(input) {
    return input.split(_CUSTOM_PH_EXP)[2];
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * An i18n error.
 */
var I18nError = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](I18nError, _super);
    /**
     * @param {?} span
     * @param {?} msg
     */
    function I18nError(span, msg) {
        return _super.call(this, span, msg) || this;
    }
    return I18nError;
}(ParseError));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _I18N_ATTR = 'i18n';
var _I18N_ATTR_PREFIX = 'i18n-';
var _I18N_COMMENT_PREFIX_REGEXP = /^i18n:?/;
var MEANING_SEPARATOR = '|';
var ID_SEPARATOR = '@@';
/**
 * Extract translatable messages from an html AST
 * @param {?} nodes
 * @param {?} interpolationConfig
 * @param {?} implicitTags
 * @param {?} implicitAttrs
 * @return {?}
 */
function extractMessages(nodes, interpolationConfig, implicitTags, implicitAttrs) {
    var /** @type {?} */ visitor = new _Visitor(implicitTags, implicitAttrs);
    return visitor.extract(nodes, interpolationConfig);
}
/**
 * @param {?} nodes
 * @param {?} translations
 * @param {?} interpolationConfig
 * @param {?} implicitTags
 * @param {?} implicitAttrs
 * @return {?}
 */
function mergeTranslations(nodes, translations, interpolationConfig, implicitTags, implicitAttrs) {
    var /** @type {?} */ visitor = new _Visitor(implicitTags, implicitAttrs);
    return visitor.merge(nodes, translations, interpolationConfig);
}
var ExtractionResult = (function () {
    /**
     * @param {?} messages
     * @param {?} errors
     */
    function ExtractionResult(messages, errors) {
        this.messages = messages;
        this.errors = errors;
    }
    return ExtractionResult;
}());
var _VisitorMode = {};
_VisitorMode.Extract = 0;
_VisitorMode.Merge = 1;
_VisitorMode[_VisitorMode.Extract] = "Extract";
_VisitorMode[_VisitorMode.Merge] = "Merge";
/**
 * This Visitor is used:
 * 1. to extract all the translatable strings from an html AST (see `extract()`),
 * 2. to replace the translatable strings with the actual translations (see `merge()`)
 *
 * \@internal
 */
var _Visitor = (function () {
    /**
     * @param {?} _implicitTags
     * @param {?} _implicitAttrs
     */
    function _Visitor(_implicitTags, _implicitAttrs) {
        this._implicitTags = _implicitTags;
        this._implicitAttrs = _implicitAttrs;
    }
    /**
     * Extracts the messages from the tree
     * @param {?} nodes
     * @param {?} interpolationConfig
     * @return {?}
     */
    _Visitor.prototype.extract = function (nodes, interpolationConfig) {
        var _this = this;
        this._init(_VisitorMode.Extract, interpolationConfig);
        nodes.forEach(function (node) { return node.visit(_this, null); });
        if (this._inI18nBlock) {
            this._reportError(nodes[nodes.length - 1], 'Unclosed block');
        }
        return new ExtractionResult(this._messages, this._errors);
    };
    /**
     * Returns a tree where all translatable nodes are translated
     * @param {?} nodes
     * @param {?} translations
     * @param {?} interpolationConfig
     * @return {?}
     */
    _Visitor.prototype.merge = function (nodes, translations, interpolationConfig) {
        this._init(_VisitorMode.Merge, interpolationConfig);
        this._translations = translations;
        // Construct a single fake root element
        var /** @type {?} */ wrapper = new Element('wrapper', [], nodes, /** @type {?} */ ((undefined)), undefined, undefined);
        var /** @type {?} */ translatedNode = wrapper.visit(this, null);
        if (this._inI18nBlock) {
            this._reportError(nodes[nodes.length - 1], 'Unclosed block');
        }
        return new ParseTreeResult(translatedNode.children, this._errors);
    };
    /**
     * @param {?} icuCase
     * @param {?} context
     * @return {?}
     */
    _Visitor.prototype.visitExpansionCase = function (icuCase, context) {
        // Parse cases for translatable html attributes
        var /** @type {?} */ expression = visitAll(this, icuCase.expression, context);
        if (this._mode === _VisitorMode.Merge) {
            return new ExpansionCase(icuCase.value, expression, icuCase.sourceSpan, icuCase.valueSourceSpan, icuCase.expSourceSpan);
        }
    };
    /**
     * @param {?} icu
     * @param {?} context
     * @return {?}
     */
    _Visitor.prototype.visitExpansion = function (icu, context) {
        this._mayBeAddBlockChildren(icu);
        var /** @type {?} */ wasInIcu = this._inIcu;
        if (!this._inIcu) {
            // nested ICU messages should not be extracted but top-level translated as a whole
            if (this._isInTranslatableSection) {
                this._addMessage([icu]);
            }
            this._inIcu = true;
        }
        var /** @type {?} */ cases = visitAll(this, icu.cases, context);
        if (this._mode === _VisitorMode.Merge) {
            icu = new Expansion(icu.switchValue, icu.type, cases, icu.sourceSpan, icu.switchValueSourceSpan);
        }
        this._inIcu = wasInIcu;
        return icu;
    };
    /**
     * @param {?} comment
     * @param {?} context
     * @return {?}
     */
    _Visitor.prototype.visitComment = function (comment, context) {
        var /** @type {?} */ isOpening = _isOpeningComment(comment);
        if (isOpening && this._isInTranslatableSection) {
            this._reportError(comment, 'Could not start a block inside a translatable section');
            return;
        }
        var /** @type {?} */ isClosing = _isClosingComment(comment);
        if (isClosing && !this._inI18nBlock) {
            this._reportError(comment, 'Trying to close an unopened block');
            return;
        }
        if (!this._inI18nNode && !this._inIcu) {
            if (!this._inI18nBlock) {
                if (isOpening) {
                    this._inI18nBlock = true;
                    this._blockStartDepth = this._depth;
                    this._blockChildren = [];
                    this._blockMeaningAndDesc = ((comment.value)).replace(_I18N_COMMENT_PREFIX_REGEXP, '').trim();
                    this._openTranslatableSection(comment);
                }
            }
            else {
                if (isClosing) {
                    if (this._depth == this._blockStartDepth) {
                        this._closeTranslatableSection(comment, this._blockChildren);
                        this._inI18nBlock = false;
                        var /** @type {?} */ message = ((this._addMessage(this._blockChildren, this._blockMeaningAndDesc)));
                        // merge attributes in sections
                        var /** @type {?} */ nodes = this._translateMessage(comment, message);
                        return visitAll(this, nodes);
                    }
                    else {
                        this._reportError(comment, 'I18N blocks should not cross element boundaries');
                        return;
                    }
                }
            }
        }
    };
    /**
     * @param {?} text
     * @param {?} context
     * @return {?}
     */
    _Visitor.prototype.visitText = function (text, context) {
        if (this._isInTranslatableSection) {
            this._mayBeAddBlockChildren(text);
        }
        return text;
    };
    /**
     * @param {?} el
     * @param {?} context
     * @return {?}
     */
    _Visitor.prototype.visitElement = function (el, context) {
        var _this = this;
        this._mayBeAddBlockChildren(el);
        this._depth++;
        var /** @type {?} */ wasInI18nNode = this._inI18nNode;
        var /** @type {?} */ wasInImplicitNode = this._inImplicitNode;
        var /** @type {?} */ childNodes = [];
        var /** @type {?} */ translatedChildNodes = ((undefined));
        // Extract:
        // - top level nodes with the (implicit) "i18n" attribute if not already in a section
        // - ICU messages
        var /** @type {?} */ i18nAttr = _getI18nAttr(el);
        var /** @type {?} */ i18nMeta = i18nAttr ? i18nAttr.value : '';
        var /** @type {?} */ isImplicit = this._implicitTags.some(function (tag) { return el.name === tag; }) && !this._inIcu &&
            !this._isInTranslatableSection;
        var /** @type {?} */ isTopLevelImplicit = !wasInImplicitNode && isImplicit;
        this._inImplicitNode = wasInImplicitNode || isImplicit;
        if (!this._isInTranslatableSection && !this._inIcu) {
            if (i18nAttr || isTopLevelImplicit) {
                this._inI18nNode = true;
                var /** @type {?} */ message = ((this._addMessage(el.children, i18nMeta)));
                translatedChildNodes = this._translateMessage(el, message);
            }
            if (this._mode == _VisitorMode.Extract) {
                var /** @type {?} */ isTranslatable = i18nAttr || isTopLevelImplicit;
                if (isTranslatable)
                    this._openTranslatableSection(el);
                visitAll(this, el.children);
                if (isTranslatable)
                    this._closeTranslatableSection(el, el.children);
            }
        }
        else {
            if (i18nAttr || isTopLevelImplicit) {
                this._reportError(el, 'Could not mark an element as translatable inside a translatable section');
            }
            if (this._mode == _VisitorMode.Extract) {
                // Descend into child nodes for extraction
                visitAll(this, el.children);
            }
        }
        if (this._mode === _VisitorMode.Merge) {
            var /** @type {?} */ visitNodes = translatedChildNodes || el.children;
            visitNodes.forEach(function (child) {
                var /** @type {?} */ visited = child.visit(_this, context);
                if (visited && !_this._isInTranslatableSection) {
                    // Do not add the children from translatable sections (= i18n blocks here)
                    // They will be added later in this loop when the block closes (i.e. on `<!-- /i18n -->`)
                    childNodes = childNodes.concat(visited);
                }
            });
        }
        this._visitAttributesOf(el);
        this._depth--;
        this._inI18nNode = wasInI18nNode;
        this._inImplicitNode = wasInImplicitNode;
        if (this._mode === _VisitorMode.Merge) {
            var /** @type {?} */ translatedAttrs = this._translateAttributes(el);
            return new Element(el.name, translatedAttrs, childNodes, el.sourceSpan, el.startSourceSpan, el.endSourceSpan);
        }
        return null;
    };
    /**
     * @param {?} attribute
     * @param {?} context
     * @return {?}
     */
    _Visitor.prototype.visitAttribute = function (attribute, context) {
        throw new Error('unreachable code');
    };
    /**
     * @param {?} mode
     * @param {?} interpolationConfig
     * @return {?}
     */
    _Visitor.prototype._init = function (mode, interpolationConfig) {
        this._mode = mode;
        this._inI18nBlock = false;
        this._inI18nNode = false;
        this._depth = 0;
        this._inIcu = false;
        this._msgCountAtSectionStart = undefined;
        this._errors = [];
        this._messages = [];
        this._inImplicitNode = false;
        this._createI18nMessage = createI18nMessageFactory(interpolationConfig);
    };
    /**
     * @param {?} el
     * @return {?}
     */
    _Visitor.prototype._visitAttributesOf = function (el) {
        var _this = this;
        var /** @type {?} */ explicitAttrNameToValue = {};
        var /** @type {?} */ implicitAttrNames = this._implicitAttrs[el.name] || [];
        el.attrs.filter(function (attr) { return attr.name.startsWith(_I18N_ATTR_PREFIX); })
            .forEach(function (attr) { return explicitAttrNameToValue[attr.name.slice(_I18N_ATTR_PREFIX.length)] =
            attr.value; });
        el.attrs.forEach(function (attr) {
            if (attr.name in explicitAttrNameToValue) {
                _this._addMessage([attr], explicitAttrNameToValue[attr.name]);
            }
            else if (implicitAttrNames.some(function (name) { return attr.name === name; })) {
                _this._addMessage([attr]);
            }
        });
    };
    /**
     * @param {?} ast
     * @param {?=} msgMeta
     * @return {?}
     */
    _Visitor.prototype._addMessage = function (ast, msgMeta) {
        if (ast.length == 0 ||
            ast.length == 1 && ast[0] instanceof Attribute$1 && !((ast[0])).value) {
            // Do not create empty messages
            return null;
        }
        var _a = _parseMessageMeta(msgMeta), meaning = _a.meaning, description = _a.description, id = _a.id;
        var /** @type {?} */ message = this._createI18nMessage(ast, meaning, description, id);
        this._messages.push(message);
        return message;
    };
    /**
     * @param {?} el
     * @param {?} message
     * @return {?}
     */
    _Visitor.prototype._translateMessage = function (el, message) {
        if (message && this._mode === _VisitorMode.Merge) {
            var /** @type {?} */ nodes = this._translations.get(message);
            if (nodes) {
                return nodes;
            }
            this._reportError(el, "Translation unavailable for message id=\"" + this._translations.digest(message) + "\"");
        }
        return [];
    };
    /**
     * @param {?} el
     * @return {?}
     */
    _Visitor.prototype._translateAttributes = function (el) {
        var _this = this;
        var /** @type {?} */ attributes = el.attrs;
        var /** @type {?} */ i18nParsedMessageMeta = {};
        attributes.forEach(function (attr) {
            if (attr.name.startsWith(_I18N_ATTR_PREFIX)) {
                i18nParsedMessageMeta[attr.name.slice(_I18N_ATTR_PREFIX.length)] =
                    _parseMessageMeta(attr.value);
            }
        });
        var /** @type {?} */ translatedAttributes = [];
        attributes.forEach(function (attr) {
            if (attr.name === _I18N_ATTR || attr.name.startsWith(_I18N_ATTR_PREFIX)) {
                // strip i18n specific attributes
                return;
            }
            if (attr.value && attr.value != '' && i18nParsedMessageMeta.hasOwnProperty(attr.name)) {
                var _a = i18nParsedMessageMeta[attr.name], meaning = _a.meaning, description = _a.description, id = _a.id;
                var /** @type {?} */ message = _this._createI18nMessage([attr], meaning, description, id);
                var /** @type {?} */ nodes = _this._translations.get(message);
                if (nodes) {
                    if (nodes.length == 0) {
                        translatedAttributes.push(new Attribute$1(attr.name, '', attr.sourceSpan));
                    }
                    else if (nodes[0] instanceof Text) {
                        var /** @type {?} */ value = ((nodes[0])).value;
                        translatedAttributes.push(new Attribute$1(attr.name, value, attr.sourceSpan));
                    }
                    else {
                        _this._reportError(el, "Unexpected translation for attribute \"" + attr.name + "\" (id=\"" + (id || _this._translations.digest(message)) + "\")");
                    }
                }
                else {
                    _this._reportError(el, "Translation unavailable for attribute \"" + attr.name + "\" (id=\"" + (id || _this._translations.digest(message)) + "\")");
                }
            }
            else {
                translatedAttributes.push(attr);
            }
        });
        return translatedAttributes;
    };
    /**
     * Add the node as a child of the block when:
     * - we are in a block,
     * - we are not inside a ICU message (those are handled separately),
     * - the node is a "direct child" of the block
     * @param {?} node
     * @return {?}
     */
    _Visitor.prototype._mayBeAddBlockChildren = function (node) {
        if (this._inI18nBlock && !this._inIcu && this._depth == this._blockStartDepth) {
            this._blockChildren.push(node);
        }
    };
    /**
     * Marks the start of a section, see `_closeTranslatableSection`
     * @param {?} node
     * @return {?}
     */
    _Visitor.prototype._openTranslatableSection = function (node) {
        if (this._isInTranslatableSection) {
            this._reportError(node, 'Unexpected section start');
        }
        else {
            this._msgCountAtSectionStart = this._messages.length;
        }
    };
    Object.defineProperty(_Visitor.prototype, "_isInTranslatableSection", {
        /**
         * A translatable section could be:
         * - the content of translatable element,
         * - nodes between `<!-- i18n -->` and `<!-- /i18n -->` comments
         * @return {?}
         */
        get: function () {
            return this._msgCountAtSectionStart !== void 0;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Terminates a section.
     *
     * If a section has only one significant children (comments not significant) then we should not
     * keep the message from this children:
     *
     * `<p i18n="meaning|description">{ICU message}</p>` would produce two messages:
     * - one for the <p> content with meaning and description,
     * - another one for the ICU message.
     *
     * In this case the last message is discarded as it contains less information (the AST is
     * otherwise identical).
     *
     * Note that we should still keep messages extracted from attributes inside the section (ie in the
     * ICU message here)
     * @param {?} node
     * @param {?} directChildren
     * @return {?}
     */
    _Visitor.prototype._closeTranslatableSection = function (node, directChildren) {
        if (!this._isInTranslatableSection) {
            this._reportError(node, 'Unexpected section end');
            return;
        }
        var /** @type {?} */ startIndex = this._msgCountAtSectionStart;
        var /** @type {?} */ significantChildren = directChildren.reduce(function (count, node) { return count + (node instanceof Comment ? 0 : 1); }, 0);
        if (significantChildren == 1) {
            for (var /** @type {?} */ i = this._messages.length - 1; i >= ((startIndex)); i--) {
                var /** @type {?} */ ast = this._messages[i].nodes;
                if (!(ast.length == 1 && ast[0] instanceof Text$1)) {
                    this._messages.splice(i, 1);
                    break;
                }
            }
        }
        this._msgCountAtSectionStart = undefined;
    };
    /**
     * @param {?} node
     * @param {?} msg
     * @return {?}
     */
    _Visitor.prototype._reportError = function (node, msg) {
        this._errors.push(new I18nError(/** @type {?} */ ((node.sourceSpan)), msg));
    };
    return _Visitor;
}());
/**
 * @param {?} n
 * @return {?}
 */
function _isOpeningComment(n) {
    return !!(n instanceof Comment && n.value && n.value.startsWith('i18n'));
}
/**
 * @param {?} n
 * @return {?}
 */
function _isClosingComment(n) {
    return !!(n instanceof Comment && n.value && n.value === '/i18n');
}
/**
 * @param {?} p
 * @return {?}
 */
function _getI18nAttr(p) {
    return p.attrs.find(function (attr) { return attr.name === _I18N_ATTR; }) || null;
}
/**
 * @param {?=} i18n
 * @return {?}
 */
function _parseMessageMeta(i18n) {
    if (!i18n)
        return { meaning: '', description: '', id: '' };
    var /** @type {?} */ idIndex = i18n.indexOf(ID_SEPARATOR);
    var /** @type {?} */ descIndex = i18n.indexOf(MEANING_SEPARATOR);
    var _a = (idIndex > -1) ? [i18n.slice(0, idIndex), i18n.slice(idIndex + 2)] : [i18n, ''], meaningAndDesc = _a[0], id = _a[1];
    var _b = (descIndex > -1) ?
        [meaningAndDesc.slice(0, descIndex), meaningAndDesc.slice(descIndex + 1)] :
        ['', meaningAndDesc], meaning = _b[0], description = _b[1];
    return { meaning: meaning, description: description, id: id };
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var XmlTagDefinition = (function () {
    function XmlTagDefinition() {
        this.closedByParent = false;
        this.contentType = TagContentType.PARSABLE_DATA;
        this.isVoid = false;
        this.ignoreFirstLf = false;
        this.canSelfClose = true;
    }
    /**
     * @param {?} currentParent
     * @return {?}
     */
    XmlTagDefinition.prototype.requireExtraParent = function (currentParent) { return false; };
    /**
     * @param {?} name
     * @return {?}
     */
    XmlTagDefinition.prototype.isClosedByChild = function (name) { return false; };
    return XmlTagDefinition;
}());
var _TAG_DEFINITION = new XmlTagDefinition();
/**
 * @param {?} tagName
 * @return {?}
 */
function getXmlTagDefinition(tagName) {
    return _TAG_DEFINITION;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var XmlParser = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](XmlParser, _super);
    function XmlParser() {
        return _super.call(this, getXmlTagDefinition) || this;
    }
    /**
     * @param {?} source
     * @param {?} url
     * @param {?=} parseExpansionForms
     * @return {?}
     */
    XmlParser.prototype.parse = function (source, url, parseExpansionForms) {
        if (parseExpansionForms === void 0) { parseExpansionForms = false; }
        return _super.prototype.parse.call(this, source, url, parseExpansionForms);
    };
    return XmlParser;
}(Parser$1));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @abstract
 */
var Serializer = (function () {
    function Serializer() {
    }
    /**
     * @abstract
     * @param {?} messages
     * @param {?} locale
     * @return {?}
     */
    Serializer.prototype.write = function (messages, locale) { };
    /**
     * @abstract
     * @param {?} content
     * @param {?} url
     * @return {?}
     */
    Serializer.prototype.load = function (content, url) { };
    /**
     * @abstract
     * @param {?} message
     * @return {?}
     */
    Serializer.prototype.digest = function (message) { };
    /**
     * @param {?} message
     * @return {?}
     */
    Serializer.prototype.createNameMapper = function (message) { return null; };
    return Serializer;
}());
/**
 * A simple mapper that take a function to transform an internal name to a public name
 */
var SimplePlaceholderMapper = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](SimplePlaceholderMapper, _super);
    /**
     * @param {?} message
     * @param {?} mapName
     */
    function SimplePlaceholderMapper(message, mapName) {
        var _this = _super.call(this) || this;
        _this.mapName = mapName;
        _this.internalToPublic = {};
        _this.publicToNextId = {};
        _this.publicToInternal = {};
        message.nodes.forEach(function (node) { return node.visit(_this); });
        return _this;
    }
    /**
     * @param {?} internalName
     * @return {?}
     */
    SimplePlaceholderMapper.prototype.toPublicName = function (internalName) {
        return this.internalToPublic.hasOwnProperty(internalName) ?
            this.internalToPublic[internalName] :
            null;
    };
    /**
     * @param {?} publicName
     * @return {?}
     */
    SimplePlaceholderMapper.prototype.toInternalName = function (publicName) {
        return this.publicToInternal.hasOwnProperty(publicName) ? this.publicToInternal[publicName] :
            null;
    };
    /**
     * @param {?} text
     * @param {?=} context
     * @return {?}
     */
    SimplePlaceholderMapper.prototype.visitText = function (text, context) { return null; };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    SimplePlaceholderMapper.prototype.visitTagPlaceholder = function (ph, context) {
        this.visitPlaceholderName(ph.startName);
        _super.prototype.visitTagPlaceholder.call(this, ph, context);
        this.visitPlaceholderName(ph.closeName);
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    SimplePlaceholderMapper.prototype.visitPlaceholder = function (ph, context) { this.visitPlaceholderName(ph.name); };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    SimplePlaceholderMapper.prototype.visitIcuPlaceholder = function (ph, context) {
        this.visitPlaceholderName(ph.name);
    };
    /**
     * @param {?} internalName
     * @return {?}
     */
    SimplePlaceholderMapper.prototype.visitPlaceholderName = function (internalName) {
        if (!internalName || this.internalToPublic.hasOwnProperty(internalName)) {
            return;
        }
        var /** @type {?} */ publicName = this.mapName(internalName);
        if (this.publicToInternal.hasOwnProperty(publicName)) {
            // Create a new XMB when it has already been used
            var /** @type {?} */ nextId = this.publicToNextId[publicName];
            this.publicToNextId[publicName] = nextId + 1;
            publicName = publicName + "_" + nextId;
        }
        else {
            this.publicToNextId[publicName] = 1;
        }
        this.internalToPublic[internalName] = publicName;
        this.publicToInternal[publicName] = internalName;
    };
    return SimplePlaceholderMapper;
}(RecurseVisitor));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _Visitor$1 = (function () {
    function _Visitor$1() {
    }
    /**
     * @param {?} tag
     * @return {?}
     */
    _Visitor$1.prototype.visitTag = function (tag) {
        var _this = this;
        var /** @type {?} */ strAttrs = this._serializeAttributes(tag.attrs);
        if (tag.children.length == 0) {
            return "<" + tag.name + strAttrs + "/>";
        }
        var /** @type {?} */ strChildren = tag.children.map(function (node) { return node.visit(_this); });
        return "<" + tag.name + strAttrs + ">" + strChildren.join('') + "</" + tag.name + ">";
    };
    /**
     * @param {?} text
     * @return {?}
     */
    _Visitor$1.prototype.visitText = function (text) { return text.value; };
    /**
     * @param {?} decl
     * @return {?}
     */
    _Visitor$1.prototype.visitDeclaration = function (decl) {
        return "<?xml" + this._serializeAttributes(decl.attrs) + " ?>";
    };
    /**
     * @param {?} attrs
     * @return {?}
     */
    _Visitor$1.prototype._serializeAttributes = function (attrs) {
        var /** @type {?} */ strAttrs = Object.keys(attrs).map(function (name) { return name + "=\"" + attrs[name] + "\""; }).join(' ');
        return strAttrs.length > 0 ? ' ' + strAttrs : '';
    };
    /**
     * @param {?} doctype
     * @return {?}
     */
    _Visitor$1.prototype.visitDoctype = function (doctype) {
        return "<!DOCTYPE " + doctype.rootTag + " [\n" + doctype.dtd + "\n]>";
    };
    return _Visitor$1;
}());
var _visitor = new _Visitor$1();
/**
 * @param {?} nodes
 * @return {?}
 */
function serialize(nodes) {
    return nodes.map(function (node) { return node.visit(_visitor); }).join('');
}
var Declaration = (function () {
    /**
     * @param {?} unescapedAttrs
     */
    function Declaration(unescapedAttrs) {
        var _this = this;
        this.attrs = {};
        Object.keys(unescapedAttrs).forEach(function (k) {
            _this.attrs[k] = _escapeXml(unescapedAttrs[k]);
        });
    }
    /**
     * @param {?} visitor
     * @return {?}
     */
    Declaration.prototype.visit = function (visitor) { return visitor.visitDeclaration(this); };
    return Declaration;
}());
var Doctype = (function () {
    /**
     * @param {?} rootTag
     * @param {?} dtd
     */
    function Doctype(rootTag, dtd) {
        this.rootTag = rootTag;
        this.dtd = dtd;
    }
    /**
     * @param {?} visitor
     * @return {?}
     */
    Doctype.prototype.visit = function (visitor) { return visitor.visitDoctype(this); };
    return Doctype;
}());
var Tag = (function () {
    /**
     * @param {?} name
     * @param {?=} unescapedAttrs
     * @param {?=} children
     */
    function Tag(name, unescapedAttrs, children) {
        if (unescapedAttrs === void 0) { unescapedAttrs = {}; }
        if (children === void 0) { children = []; }
        var _this = this;
        this.name = name;
        this.children = children;
        this.attrs = {};
        Object.keys(unescapedAttrs).forEach(function (k) {
            _this.attrs[k] = _escapeXml(unescapedAttrs[k]);
        });
    }
    /**
     * @param {?} visitor
     * @return {?}
     */
    Tag.prototype.visit = function (visitor) { return visitor.visitTag(this); };
    return Tag;
}());
var Text$2 = (function () {
    /**
     * @param {?} unescapedValue
     */
    function Text$2(unescapedValue) {
        this.value = _escapeXml(unescapedValue);
    }
    /**
     * @param {?} visitor
     * @return {?}
     */
    Text$2.prototype.visit = function (visitor) { return visitor.visitText(this); };
    return Text$2;
}());
var CR = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](CR, _super);
    /**
     * @param {?=} ws
     */
    function CR(ws) {
        if (ws === void 0) { ws = 0; }
        return _super.call(this, "\n" + new Array(ws + 1).join(' ')) || this;
    }
    return CR;
}(Text$2));
var _ESCAPED_CHARS = [
    [/&/g, '&amp;'],
    [/"/g, '&quot;'],
    [/'/g, '&apos;'],
    [/</g, '&lt;'],
    [/>/g, '&gt;'],
];
/**
 * @param {?} text
 * @return {?}
 */
function _escapeXml(text) {
    return _ESCAPED_CHARS.reduce(function (text, entry) { return text.replace(entry[0], entry[1]); }, text);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _VERSION = '1.2';
var _XMLNS = 'urn:oasis:names:tc:xliff:document:1.2';
// TODO(vicb): make this a param (s/_/-/)
var _DEFAULT_SOURCE_LANG = 'en';
var _PLACEHOLDER_TAG = 'x';
var _FILE_TAG = 'file';
var _SOURCE_TAG = 'source';
var _TARGET_TAG = 'target';
var _UNIT_TAG = 'trans-unit';
var _CONTEXT_GROUP_TAG = 'context-group';
var _CONTEXT_TAG = 'context';
var Xliff = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](Xliff, _super);
    function Xliff() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @param {?} messages
     * @param {?} locale
     * @return {?}
     */
    Xliff.prototype.write = function (messages, locale) {
        var /** @type {?} */ visitor = new _WriteVisitor();
        var /** @type {?} */ transUnits = [];
        messages.forEach(function (message) {
            var /** @type {?} */ contextTags = [];
            message.sources.forEach(function (source) {
                var /** @type {?} */ contextGroupTag = new Tag(_CONTEXT_GROUP_TAG, { purpose: 'location' });
                contextGroupTag.children.push(new CR(10), new Tag(_CONTEXT_TAG, { 'context-type': 'sourcefile' }, [new Text$2(source.filePath)]), new CR(10), new Tag(_CONTEXT_TAG, { 'context-type': 'linenumber' }, [new Text$2("" + source.startLine)]), new CR(8));
                contextTags.push(new CR(8), contextGroupTag);
            });
            var /** @type {?} */ transUnit = new Tag(_UNIT_TAG, { id: message.id, datatype: 'html' });
            (_a = transUnit.children).push.apply(_a, [new CR(8), new Tag(_SOURCE_TAG, {}, visitor.serialize(message.nodes))].concat(contextTags));
            if (message.description) {
                transUnit.children.push(new CR(8), new Tag('note', { priority: '1', from: 'description' }, [new Text$2(message.description)]));
            }
            if (message.meaning) {
                transUnit.children.push(new CR(8), new Tag('note', { priority: '1', from: 'meaning' }, [new Text$2(message.meaning)]));
            }
            transUnit.children.push(new CR(6));
            transUnits.push(new CR(6), transUnit);
            var _a;
        });
        var /** @type {?} */ body = new Tag('body', {}, transUnits.concat([new CR(4)]));
        var /** @type {?} */ file = new Tag('file', {
            'source-language': locale || _DEFAULT_SOURCE_LANG,
            datatype: 'plaintext',
            original: 'ng2.template',
        }, [new CR(4), body, new CR(2)]);
        var /** @type {?} */ xliff = new Tag('xliff', { version: _VERSION, xmlns: _XMLNS }, [new CR(2), file, new CR()]);
        return serialize([
            new Declaration({ version: '1.0', encoding: 'UTF-8' }), new CR(), xliff, new CR()
        ]);
    };
    /**
     * @param {?} content
     * @param {?} url
     * @return {?}
     */
    Xliff.prototype.load = function (content, url) {
        // xliff to xml nodes
        var /** @type {?} */ xliffParser = new XliffParser();
        var _a = xliffParser.parse(content, url), locale = _a.locale, msgIdToHtml = _a.msgIdToHtml, errors = _a.errors;
        // xml nodes to i18n nodes
        var /** @type {?} */ i18nNodesByMsgId = {};
        var /** @type {?} */ converter = new XmlToI18n();
        Object.keys(msgIdToHtml).forEach(function (msgId) {
            var _a = converter.convert(msgIdToHtml[msgId], url), i18nNodes = _a.i18nNodes, e = _a.errors;
            errors.push.apply(errors, e);
            i18nNodesByMsgId[msgId] = i18nNodes;
        });
        if (errors.length) {
            throw new Error("xliff parse errors:\n" + errors.join('\n'));
        }
        return { locale: /** @type {?} */ ((locale)), i18nNodesByMsgId: i18nNodesByMsgId };
    };
    /**
     * @param {?} message
     * @return {?}
     */
    Xliff.prototype.digest = function (message) { return digest(message); };
    return Xliff;
}(Serializer));
var _WriteVisitor = (function () {
    function _WriteVisitor() {
    }
    /**
     * @param {?} text
     * @param {?=} context
     * @return {?}
     */
    _WriteVisitor.prototype.visitText = function (text, context) { return [new Text$2(text.value)]; };
    /**
     * @param {?} container
     * @param {?=} context
     * @return {?}
     */
    _WriteVisitor.prototype.visitContainer = function (container, context) {
        var _this = this;
        var /** @type {?} */ nodes = [];
        container.children.forEach(function (node) { return nodes.push.apply(nodes, node.visit(_this)); });
        return nodes;
    };
    /**
     * @param {?} icu
     * @param {?=} context
     * @return {?}
     */
    _WriteVisitor.prototype.visitIcu = function (icu, context) {
        var _this = this;
        var /** @type {?} */ nodes = [new Text$2("{" + icu.expressionPlaceholder + ", " + icu.type + ", ")];
        Object.keys(icu.cases).forEach(function (c) {
            nodes.push.apply(nodes, [new Text$2(c + " {")].concat(icu.cases[c].visit(_this), [new Text$2("} ")]));
        });
        nodes.push(new Text$2("}"));
        return nodes;
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    _WriteVisitor.prototype.visitTagPlaceholder = function (ph, context) {
        var /** @type {?} */ ctype = getCtypeForTag(ph.tag);
        var /** @type {?} */ startTagPh = new Tag(_PLACEHOLDER_TAG, { id: ph.startName, ctype: ctype });
        if (ph.isVoid) {
            // void tags have no children nor closing tags
            return [startTagPh];
        }
        var /** @type {?} */ closeTagPh = new Tag(_PLACEHOLDER_TAG, { id: ph.closeName, ctype: ctype });
        return [startTagPh].concat(this.serialize(ph.children), [closeTagPh]);
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    _WriteVisitor.prototype.visitPlaceholder = function (ph, context) {
        return [new Tag(_PLACEHOLDER_TAG, { id: ph.name })];
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    _WriteVisitor.prototype.visitIcuPlaceholder = function (ph, context) {
        return [new Tag(_PLACEHOLDER_TAG, { id: ph.name })];
    };
    /**
     * @param {?} nodes
     * @return {?}
     */
    _WriteVisitor.prototype.serialize = function (nodes) {
        var _this = this;
        return [].concat.apply([], nodes.map(function (node) { return node.visit(_this); }));
    };
    return _WriteVisitor;
}());
var XliffParser = (function () {
    function XliffParser() {
        this._locale = null;
    }
    /**
     * @param {?} xliff
     * @param {?} url
     * @return {?}
     */
    XliffParser.prototype.parse = function (xliff, url) {
        this._unitMlString = null;
        this._msgIdToHtml = {};
        var /** @type {?} */ xml = new XmlParser().parse(xliff, url, false);
        this._errors = xml.errors;
        visitAll(this, xml.rootNodes, null);
        return {
            msgIdToHtml: this._msgIdToHtml,
            errors: this._errors,
            locale: this._locale,
        };
    };
    /**
     * @param {?} element
     * @param {?} context
     * @return {?}
     */
    XliffParser.prototype.visitElement = function (element, context) {
        switch (element.name) {
            case _UNIT_TAG:
                this._unitMlString = ((null));
                var /** @type {?} */ idAttr = element.attrs.find(function (attr) { return attr.name === 'id'; });
                if (!idAttr) {
                    this._addError(element, "<" + _UNIT_TAG + "> misses the \"id\" attribute");
                }
                else {
                    var /** @type {?} */ id = idAttr.value;
                    if (this._msgIdToHtml.hasOwnProperty(id)) {
                        this._addError(element, "Duplicated translations for msg " + id);
                    }
                    else {
                        visitAll(this, element.children, null);
                        if (typeof this._unitMlString === 'string') {
                            this._msgIdToHtml[id] = this._unitMlString;
                        }
                        else {
                            this._addError(element, "Message " + id + " misses a translation");
                        }
                    }
                }
                break;
            case _SOURCE_TAG:
                // ignore source message
                break;
            case _TARGET_TAG:
                var /** @type {?} */ innerTextStart = ((element.startSourceSpan)).end.offset;
                var /** @type {?} */ innerTextEnd = ((element.endSourceSpan)).start.offset;
                var /** @type {?} */ content = ((element.startSourceSpan)).start.file.content;
                var /** @type {?} */ innerText = content.slice(innerTextStart, innerTextEnd);
                this._unitMlString = innerText;
                break;
            case _FILE_TAG:
                var /** @type {?} */ localeAttr = element.attrs.find(function (attr) { return attr.name === 'target-language'; });
                if (localeAttr) {
                    this._locale = localeAttr.value;
                }
                visitAll(this, element.children, null);
                break;
            default:
                // TODO(vicb): assert file structure, xliff version
                // For now only recurse on unhandled nodes
                visitAll(this, element.children, null);
        }
    };
    /**
     * @param {?} attribute
     * @param {?} context
     * @return {?}
     */
    XliffParser.prototype.visitAttribute = function (attribute, context) { };
    /**
     * @param {?} text
     * @param {?} context
     * @return {?}
     */
    XliffParser.prototype.visitText = function (text, context) { };
    /**
     * @param {?} comment
     * @param {?} context
     * @return {?}
     */
    XliffParser.prototype.visitComment = function (comment, context) { };
    /**
     * @param {?} expansion
     * @param {?} context
     * @return {?}
     */
    XliffParser.prototype.visitExpansion = function (expansion, context) { };
    /**
     * @param {?} expansionCase
     * @param {?} context
     * @return {?}
     */
    XliffParser.prototype.visitExpansionCase = function (expansionCase, context) { };
    /**
     * @param {?} node
     * @param {?} message
     * @return {?}
     */
    XliffParser.prototype._addError = function (node, message) {
        this._errors.push(new I18nError(/** @type {?} */ ((node.sourceSpan)), message));
    };
    return XliffParser;
}());
var XmlToI18n = (function () {
    function XmlToI18n() {
    }
    /**
     * @param {?} message
     * @param {?} url
     * @return {?}
     */
    XmlToI18n.prototype.convert = function (message, url) {
        var /** @type {?} */ xmlIcu = new XmlParser().parse(message, url, true);
        this._errors = xmlIcu.errors;
        var /** @type {?} */ i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ?
            [] :
            visitAll(this, xmlIcu.rootNodes);
        return {
            i18nNodes: i18nNodes,
            errors: this._errors,
        };
    };
    /**
     * @param {?} text
     * @param {?} context
     * @return {?}
     */
    XmlToI18n.prototype.visitText = function (text, context) { return new Text$1(text.value, /** @type {?} */ ((text.sourceSpan))); };
    /**
     * @param {?} el
     * @param {?} context
     * @return {?}
     */
    XmlToI18n.prototype.visitElement = function (el, context) {
        if (el.name === _PLACEHOLDER_TAG) {
            var /** @type {?} */ nameAttr = el.attrs.find(function (attr) { return attr.name === 'id'; });
            if (nameAttr) {
                return new Placeholder('', nameAttr.value, /** @type {?} */ ((el.sourceSpan)));
            }
            this._addError(el, "<" + _PLACEHOLDER_TAG + "> misses the \"id\" attribute");
        }
        else {
            this._addError(el, "Unexpected tag");
        }
        return null;
    };
    /**
     * @param {?} icu
     * @param {?} context
     * @return {?}
     */
    XmlToI18n.prototype.visitExpansion = function (icu, context) {
        var /** @type {?} */ caseMap = {};
        visitAll(this, icu.cases).forEach(function (c) {
            caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);
        });
        return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);
    };
    /**
     * @param {?} icuCase
     * @param {?} context
     * @return {?}
     */
    XmlToI18n.prototype.visitExpansionCase = function (icuCase, context) {
        return {
            value: icuCase.value,
            nodes: visitAll(this, icuCase.expression),
        };
    };
    /**
     * @param {?} comment
     * @param {?} context
     * @return {?}
     */
    XmlToI18n.prototype.visitComment = function (comment, context) { };
    /**
     * @param {?} attribute
     * @param {?} context
     * @return {?}
     */
    XmlToI18n.prototype.visitAttribute = function (attribute, context) { };
    /**
     * @param {?} node
     * @param {?} message
     * @return {?}
     */
    XmlToI18n.prototype._addError = function (node, message) {
        this._errors.push(new I18nError(/** @type {?} */ ((node.sourceSpan)), message));
    };
    return XmlToI18n;
}());
/**
 * @param {?} tag
 * @return {?}
 */
function getCtypeForTag(tag) {
    switch (tag.toLowerCase()) {
        case 'br':
            return 'lb';
        case 'img':
            return 'image';
        default:
            return "x-" + tag;
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _VERSION$1 = '2.0';
var _XMLNS$1 = 'urn:oasis:names:tc:xliff:document:2.0';
// TODO(vicb): make this a param (s/_/-/)
var _DEFAULT_SOURCE_LANG$1 = 'en';
var _PLACEHOLDER_TAG$1 = 'ph';
var _PLACEHOLDER_SPANNING_TAG = 'pc';
var _XLIFF_TAG = 'xliff';
var _SOURCE_TAG$1 = 'source';
var _TARGET_TAG$1 = 'target';
var _UNIT_TAG$1 = 'unit';
var Xliff2 = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](Xliff2, _super);
    function Xliff2() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @param {?} messages
     * @param {?} locale
     * @return {?}
     */
    Xliff2.prototype.write = function (messages, locale) {
        var /** @type {?} */ visitor = new _WriteVisitor$1();
        var /** @type {?} */ units = [];
        messages.forEach(function (message) {
            var /** @type {?} */ unit = new Tag(_UNIT_TAG$1, { id: message.id });
            var /** @type {?} */ notes = new Tag('notes');
            if (message.description || message.meaning) {
                if (message.description) {
                    notes.children.push(new CR(8), new Tag('note', { category: 'description' }, [new Text$2(message.description)]));
                }
                if (message.meaning) {
                    notes.children.push(new CR(8), new Tag('note', { category: 'meaning' }, [new Text$2(message.meaning)]));
                }
            }
            message.sources.forEach(function (source) {
                notes.children.push(new CR(8), new Tag('note', { category: 'location' }, [
                    new Text$2(source.filePath + ":" + source.startLine + (source.endLine !== source.startLine ? ',' + source.endLine : ''))
                ]));
            });
            notes.children.push(new CR(6));
            unit.children.push(new CR(6), notes);
            var /** @type {?} */ segment = new Tag('segment');
            segment.children.push(new CR(8), new Tag(_SOURCE_TAG$1, {}, visitor.serialize(message.nodes)), new CR(6));
            unit.children.push(new CR(6), segment, new CR(4));
            units.push(new CR(4), unit);
        });
        var /** @type {?} */ file = new Tag('file', { 'original': 'ng.template', id: 'ngi18n' }, units.concat([new CR(2)]));
        var /** @type {?} */ xliff = new Tag(_XLIFF_TAG, { version: _VERSION$1, xmlns: _XMLNS$1, srcLang: locale || _DEFAULT_SOURCE_LANG$1 }, [new CR(2), file, new CR()]);
        return serialize([
            new Declaration({ version: '1.0', encoding: 'UTF-8' }), new CR(), xliff, new CR()
        ]);
    };
    /**
     * @param {?} content
     * @param {?} url
     * @return {?}
     */
    Xliff2.prototype.load = function (content, url) {
        // xliff to xml nodes
        var /** @type {?} */ xliff2Parser = new Xliff2Parser();
        var _a = xliff2Parser.parse(content, url), locale = _a.locale, msgIdToHtml = _a.msgIdToHtml, errors = _a.errors;
        // xml nodes to i18n nodes
        var /** @type {?} */ i18nNodesByMsgId = {};
        var /** @type {?} */ converter = new XmlToI18n$1();
        Object.keys(msgIdToHtml).forEach(function (msgId) {
            var _a = converter.convert(msgIdToHtml[msgId], url), i18nNodes = _a.i18nNodes, e = _a.errors;
            errors.push.apply(errors, e);
            i18nNodesByMsgId[msgId] = i18nNodes;
        });
        if (errors.length) {
            throw new Error("xliff2 parse errors:\n" + errors.join('\n'));
        }
        return { locale: /** @type {?} */ ((locale)), i18nNodesByMsgId: i18nNodesByMsgId };
    };
    /**
     * @param {?} message
     * @return {?}
     */
    Xliff2.prototype.digest = function (message) { return decimalDigest(message); };
    return Xliff2;
}(Serializer));
var _WriteVisitor$1 = (function () {
    function _WriteVisitor$1() {
    }
    /**
     * @param {?} text
     * @param {?=} context
     * @return {?}
     */
    _WriteVisitor$1.prototype.visitText = function (text, context) { return [new Text$2(text.value)]; };
    /**
     * @param {?} container
     * @param {?=} context
     * @return {?}
     */
    _WriteVisitor$1.prototype.visitContainer = function (container, context) {
        var _this = this;
        var /** @type {?} */ nodes = [];
        container.children.forEach(function (node) { return nodes.push.apply(nodes, node.visit(_this)); });
        return nodes;
    };
    /**
     * @param {?} icu
     * @param {?=} context
     * @return {?}
     */
    _WriteVisitor$1.prototype.visitIcu = function (icu, context) {
        var _this = this;
        var /** @type {?} */ nodes = [new Text$2("{" + icu.expressionPlaceholder + ", " + icu.type + ", ")];
        Object.keys(icu.cases).forEach(function (c) {
            nodes.push.apply(nodes, [new Text$2(c + " {")].concat(icu.cases[c].visit(_this), [new Text$2("} ")]));
        });
        nodes.push(new Text$2("}"));
        return nodes;
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    _WriteVisitor$1.prototype.visitTagPlaceholder = function (ph, context) {
        var _this = this;
        var /** @type {?} */ type = getTypeForTag(ph.tag);
        if (ph.isVoid) {
            var /** @type {?} */ tagPh = new Tag(_PLACEHOLDER_TAG$1, {
                id: (this._nextPlaceholderId++).toString(),
                equiv: ph.startName,
                type: type,
                disp: "<" + ph.tag + "/>",
            });
            return [tagPh];
        }
        var /** @type {?} */ tagPc = new Tag(_PLACEHOLDER_SPANNING_TAG, {
            id: (this._nextPlaceholderId++).toString(),
            equivStart: ph.startName,
            equivEnd: ph.closeName,
            type: type,
            dispStart: "<" + ph.tag + ">",
            dispEnd: "</" + ph.tag + ">",
        });
        var /** @type {?} */ nodes = [].concat.apply([], ph.children.map(function (node) { return node.visit(_this); }));
        if (nodes.length) {
            nodes.forEach(function (node) { return tagPc.children.push(node); });
        }
        else {
            tagPc.children.push(new Text$2(''));
        }
        return [tagPc];
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    _WriteVisitor$1.prototype.visitPlaceholder = function (ph, context) {
        var /** @type {?} */ idStr = (this._nextPlaceholderId++).toString();
        return [new Tag(_PLACEHOLDER_TAG$1, {
                id: idStr,
                equiv: ph.name,
                disp: "{{" + ph.value + "}}",
            })];
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    _WriteVisitor$1.prototype.visitIcuPlaceholder = function (ph, context) {
        var /** @type {?} */ cases = Object.keys(ph.value.cases).map(function (value) { return value + ' {...}'; }).join(' ');
        var /** @type {?} */ idStr = (this._nextPlaceholderId++).toString();
        return [new Tag(_PLACEHOLDER_TAG$1, { id: idStr, equiv: ph.name, disp: "{" + ph.value.expression + ", " + ph.value.type + ", " + cases + "}" })];
    };
    /**
     * @param {?} nodes
     * @return {?}
     */
    _WriteVisitor$1.prototype.serialize = function (nodes) {
        var _this = this;
        this._nextPlaceholderId = 0;
        return [].concat.apply([], nodes.map(function (node) { return node.visit(_this); }));
    };
    return _WriteVisitor$1;
}());
var Xliff2Parser = (function () {
    function Xliff2Parser() {
        this._locale = null;
    }
    /**
     * @param {?} xliff
     * @param {?} url
     * @return {?}
     */
    Xliff2Parser.prototype.parse = function (xliff, url) {
        this._unitMlString = null;
        this._msgIdToHtml = {};
        var /** @type {?} */ xml = new XmlParser().parse(xliff, url, false);
        this._errors = xml.errors;
        visitAll(this, xml.rootNodes, null);
        return {
            msgIdToHtml: this._msgIdToHtml,
            errors: this._errors,
            locale: this._locale,
        };
    };
    /**
     * @param {?} element
     * @param {?} context
     * @return {?}
     */
    Xliff2Parser.prototype.visitElement = function (element, context) {
        switch (element.name) {
            case _UNIT_TAG$1:
                this._unitMlString = null;
                var /** @type {?} */ idAttr = element.attrs.find(function (attr) { return attr.name === 'id'; });
                if (!idAttr) {
                    this._addError(element, "<" + _UNIT_TAG$1 + "> misses the \"id\" attribute");
                }
                else {
                    var /** @type {?} */ id = idAttr.value;
                    if (this._msgIdToHtml.hasOwnProperty(id)) {
                        this._addError(element, "Duplicated translations for msg " + id);
                    }
                    else {
                        visitAll(this, element.children, null);
                        if (typeof this._unitMlString === 'string') {
                            this._msgIdToHtml[id] = this._unitMlString;
                        }
                        else {
                            this._addError(element, "Message " + id + " misses a translation");
                        }
                    }
                }
                break;
            case _SOURCE_TAG$1:
                // ignore source message
                break;
            case _TARGET_TAG$1:
                var /** @type {?} */ innerTextStart = ((element.startSourceSpan)).end.offset;
                var /** @type {?} */ innerTextEnd = ((element.endSourceSpan)).start.offset;
                var /** @type {?} */ content = ((element.startSourceSpan)).start.file.content;
                var /** @type {?} */ innerText = content.slice(innerTextStart, innerTextEnd);
                this._unitMlString = innerText;
                break;
            case _XLIFF_TAG:
                var /** @type {?} */ localeAttr = element.attrs.find(function (attr) { return attr.name === 'trgLang'; });
                if (localeAttr) {
                    this._locale = localeAttr.value;
                }
                var /** @type {?} */ versionAttr = element.attrs.find(function (attr) { return attr.name === 'version'; });
                if (versionAttr) {
                    var /** @type {?} */ version = versionAttr.value;
                    if (version !== '2.0') {
                        this._addError(element, "The XLIFF file version " + version + " is not compatible with XLIFF 2.0 serializer");
                    }
                    else {
                        visitAll(this, element.children, null);
                    }
                }
                break;
            default:
                visitAll(this, element.children, null);
        }
    };
    /**
     * @param {?} attribute
     * @param {?} context
     * @return {?}
     */
    Xliff2Parser.prototype.visitAttribute = function (attribute, context) { };
    /**
     * @param {?} text
     * @param {?} context
     * @return {?}
     */
    Xliff2Parser.prototype.visitText = function (text, context) { };
    /**
     * @param {?} comment
     * @param {?} context
     * @return {?}
     */
    Xliff2Parser.prototype.visitComment = function (comment, context) { };
    /**
     * @param {?} expansion
     * @param {?} context
     * @return {?}
     */
    Xliff2Parser.prototype.visitExpansion = function (expansion, context) { };
    /**
     * @param {?} expansionCase
     * @param {?} context
     * @return {?}
     */
    Xliff2Parser.prototype.visitExpansionCase = function (expansionCase, context) { };
    /**
     * @param {?} node
     * @param {?} message
     * @return {?}
     */
    Xliff2Parser.prototype._addError = function (node, message) {
        this._errors.push(new I18nError(node.sourceSpan, message));
    };
    return Xliff2Parser;
}());
var XmlToI18n$1 = (function () {
    function XmlToI18n$1() {
    }
    /**
     * @param {?} message
     * @param {?} url
     * @return {?}
     */
    XmlToI18n$1.prototype.convert = function (message, url) {
        var /** @type {?} */ xmlIcu = new XmlParser().parse(message, url, true);
        this._errors = xmlIcu.errors;
        var /** @type {?} */ i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ?
            [] : [].concat.apply([], visitAll(this, xmlIcu.rootNodes));
        return {
            i18nNodes: i18nNodes,
            errors: this._errors,
        };
    };
    /**
     * @param {?} text
     * @param {?} context
     * @return {?}
     */
    XmlToI18n$1.prototype.visitText = function (text, context) { return new Text$1(text.value, text.sourceSpan); };
    /**
     * @param {?} el
     * @param {?} context
     * @return {?}
     */
    XmlToI18n$1.prototype.visitElement = function (el, context) {
        var _this = this;
        switch (el.name) {
            case _PLACEHOLDER_TAG$1:
                var /** @type {?} */ nameAttr = el.attrs.find(function (attr) { return attr.name === 'equiv'; });
                if (nameAttr) {
                    return [new Placeholder('', nameAttr.value, el.sourceSpan)];
                }
                this._addError(el, "<" + _PLACEHOLDER_TAG$1 + "> misses the \"equiv\" attribute");
                break;
            case _PLACEHOLDER_SPANNING_TAG:
                var /** @type {?} */ startAttr = el.attrs.find(function (attr) { return attr.name === 'equivStart'; });
                var /** @type {?} */ endAttr = el.attrs.find(function (attr) { return attr.name === 'equivEnd'; });
                if (!startAttr) {
                    this._addError(el, "<" + _PLACEHOLDER_TAG$1 + "> misses the \"equivStart\" attribute");
                }
                else if (!endAttr) {
                    this._addError(el, "<" + _PLACEHOLDER_TAG$1 + "> misses the \"equivEnd\" attribute");
                }
                else {
                    var /** @type {?} */ startId = startAttr.value;
                    var /** @type {?} */ endId = endAttr.value;
                    var /** @type {?} */ nodes = [];
                    return nodes.concat.apply(nodes, [new Placeholder('', startId, el.sourceSpan)].concat(el.children.map(function (node) { return node.visit(_this, null); }), [new Placeholder('', endId, el.sourceSpan)]));
                }
                break;
            default:
                this._addError(el, "Unexpected tag");
        }
        return null;
    };
    /**
     * @param {?} icu
     * @param {?} context
     * @return {?}
     */
    XmlToI18n$1.prototype.visitExpansion = function (icu, context) {
        var /** @type {?} */ caseMap = {};
        visitAll(this, icu.cases).forEach(function (c) {
            caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);
        });
        return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);
    };
    /**
     * @param {?} icuCase
     * @param {?} context
     * @return {?}
     */
    XmlToI18n$1.prototype.visitExpansionCase = function (icuCase, context) {
        return {
            value: icuCase.value,
            nodes: [].concat.apply([], visitAll(this, icuCase.expression)),
        };
    };
    /**
     * @param {?} comment
     * @param {?} context
     * @return {?}
     */
    XmlToI18n$1.prototype.visitComment = function (comment, context) { };
    /**
     * @param {?} attribute
     * @param {?} context
     * @return {?}
     */
    XmlToI18n$1.prototype.visitAttribute = function (attribute, context) { };
    /**
     * @param {?} node
     * @param {?} message
     * @return {?}
     */
    XmlToI18n$1.prototype._addError = function (node, message) {
        this._errors.push(new I18nError(node.sourceSpan, message));
    };
    return XmlToI18n$1;
}());
/**
 * @param {?} tag
 * @return {?}
 */
function getTypeForTag(tag) {
    switch (tag.toLowerCase()) {
        case 'br':
        case 'b':
        case 'i':
        case 'u':
            return 'fmt';
        case 'img':
            return 'image';
        case 'a':
            return 'link';
        default:
            return 'other';
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _MESSAGES_TAG = 'messagebundle';
var _MESSAGE_TAG = 'msg';
var _PLACEHOLDER_TAG$2 = 'ph';
var _EXEMPLE_TAG = 'ex';
var _SOURCE_TAG$2 = 'source';
var _DOCTYPE = "<!ELEMENT messagebundle (msg)*>\n<!ATTLIST messagebundle class CDATA #IMPLIED>\n\n<!ELEMENT msg (#PCDATA|ph|source)*>\n<!ATTLIST msg id CDATA #IMPLIED>\n<!ATTLIST msg seq CDATA #IMPLIED>\n<!ATTLIST msg name CDATA #IMPLIED>\n<!ATTLIST msg desc CDATA #IMPLIED>\n<!ATTLIST msg meaning CDATA #IMPLIED>\n<!ATTLIST msg obsolete (obsolete) #IMPLIED>\n<!ATTLIST msg xml:space (default|preserve) \"default\">\n<!ATTLIST msg is_hidden CDATA #IMPLIED>\n\n<!ELEMENT source (#PCDATA)>\n\n<!ELEMENT ph (#PCDATA|ex)*>\n<!ATTLIST ph name CDATA #REQUIRED>\n\n<!ELEMENT ex (#PCDATA)>";
var Xmb = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](Xmb, _super);
    function Xmb() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @param {?} messages
     * @param {?} locale
     * @return {?}
     */
    Xmb.prototype.write = function (messages, locale) {
        var /** @type {?} */ exampleVisitor = new ExampleVisitor();
        var /** @type {?} */ visitor = new _Visitor$2();
        var /** @type {?} */ rootNode = new Tag(_MESSAGES_TAG);
        messages.forEach(function (message) {
            var /** @type {?} */ attrs = { id: message.id };
            if (message.description) {
                attrs['desc'] = message.description;
            }
            if (message.meaning) {
                attrs['meaning'] = message.meaning;
            }
            var /** @type {?} */ sourceTags = [];
            message.sources.forEach(function (source) {
                sourceTags.push(new Tag(_SOURCE_TAG$2, {}, [
                    new Text$2(source.filePath + ":" + source.startLine + (source.endLine !== source.startLine ? ',' + source.endLine : ''))
                ]));
            });
            rootNode.children.push(new CR(2), new Tag(_MESSAGE_TAG, attrs, sourceTags.concat(visitor.serialize(message.nodes))));
        });
        rootNode.children.push(new CR());
        return serialize([
            new Declaration({ version: '1.0', encoding: 'UTF-8' }),
            new CR(),
            new Doctype(_MESSAGES_TAG, _DOCTYPE),
            new CR(),
            exampleVisitor.addDefaultExamples(rootNode),
            new CR(),
        ]);
    };
    /**
     * @param {?} content
     * @param {?} url
     * @return {?}
     */
    Xmb.prototype.load = function (content, url) {
        throw new Error('Unsupported');
    };
    /**
     * @param {?} message
     * @return {?}
     */
    Xmb.prototype.digest = function (message) { return digest$1(message); };
    /**
     * @param {?} message
     * @return {?}
     */
    Xmb.prototype.createNameMapper = function (message) {
        return new SimplePlaceholderMapper(message, toPublicName);
    };
    return Xmb;
}(Serializer));
var _Visitor$2 = (function () {
    function _Visitor$2() {
    }
    /**
     * @param {?} text
     * @param {?=} context
     * @return {?}
     */
    _Visitor$2.prototype.visitText = function (text, context) { return [new Text$2(text.value)]; };
    /**
     * @param {?} container
     * @param {?} context
     * @return {?}
     */
    _Visitor$2.prototype.visitContainer = function (container, context) {
        var _this = this;
        var /** @type {?} */ nodes = [];
        container.children.forEach(function (node) { return nodes.push.apply(nodes, node.visit(_this)); });
        return nodes;
    };
    /**
     * @param {?} icu
     * @param {?=} context
     * @return {?}
     */
    _Visitor$2.prototype.visitIcu = function (icu, context) {
        var _this = this;
        var /** @type {?} */ nodes = [new Text$2("{" + icu.expressionPlaceholder + ", " + icu.type + ", ")];
        Object.keys(icu.cases).forEach(function (c) {
            nodes.push.apply(nodes, [new Text$2(c + " {")].concat(icu.cases[c].visit(_this), [new Text$2("} ")]));
        });
        nodes.push(new Text$2("}"));
        return nodes;
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    _Visitor$2.prototype.visitTagPlaceholder = function (ph, context) {
        var /** @type {?} */ startEx = new Tag(_EXEMPLE_TAG, {}, [new Text$2("<" + ph.tag + ">")]);
        var /** @type {?} */ startTagPh = new Tag(_PLACEHOLDER_TAG$2, { name: ph.startName }, [startEx]);
        if (ph.isVoid) {
            // void tags have no children nor closing tags
            return [startTagPh];
        }
        var /** @type {?} */ closeEx = new Tag(_EXEMPLE_TAG, {}, [new Text$2("</" + ph.tag + ">")]);
        var /** @type {?} */ closeTagPh = new Tag(_PLACEHOLDER_TAG$2, { name: ph.closeName }, [closeEx]);
        return [startTagPh].concat(this.serialize(ph.children), [closeTagPh]);
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    _Visitor$2.prototype.visitPlaceholder = function (ph, context) {
        return [new Tag(_PLACEHOLDER_TAG$2, { name: ph.name })];
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    _Visitor$2.prototype.visitIcuPlaceholder = function (ph, context) {
        return [new Tag(_PLACEHOLDER_TAG$2, { name: ph.name })];
    };
    /**
     * @param {?} nodes
     * @return {?}
     */
    _Visitor$2.prototype.serialize = function (nodes) {
        var _this = this;
        return [].concat.apply([], nodes.map(function (node) { return node.visit(_this); }));
    };
    return _Visitor$2;
}());
/**
 * @param {?} message
 * @return {?}
 */
function digest$1(message) {
    return decimalDigest(message);
}
var ExampleVisitor = (function () {
    function ExampleVisitor() {
    }
    /**
     * @param {?} node
     * @return {?}
     */
    ExampleVisitor.prototype.addDefaultExamples = function (node) {
        node.visit(this);
        return node;
    };
    /**
     * @param {?} tag
     * @return {?}
     */
    ExampleVisitor.prototype.visitTag = function (tag) {
        var _this = this;
        if (tag.name === _PLACEHOLDER_TAG$2) {
            if (!tag.children || tag.children.length == 0) {
                var /** @type {?} */ exText = new Text$2(tag.attrs['name'] || '...');
                tag.children = [new Tag(_EXEMPLE_TAG, {}, [exText])];
            }
        }
        else if (tag.children) {
            tag.children.forEach(function (node) { return node.visit(_this); });
        }
    };
    /**
     * @param {?} text
     * @return {?}
     */
    ExampleVisitor.prototype.visitText = function (text) { };
    /**
     * @param {?} decl
     * @return {?}
     */
    ExampleVisitor.prototype.visitDeclaration = function (decl) { };
    /**
     * @param {?} doctype
     * @return {?}
     */
    ExampleVisitor.prototype.visitDoctype = function (doctype) { };
    return ExampleVisitor;
}());
/**
 * @param {?} internalName
 * @return {?}
 */
function toPublicName(internalName) {
    return internalName.toUpperCase().replace(/[^A-Z0-9_]/g, '_');
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _TRANSLATIONS_TAG = 'translationbundle';
var _TRANSLATION_TAG = 'translation';
var _PLACEHOLDER_TAG$3 = 'ph';
var Xtb = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](Xtb, _super);
    function Xtb() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @param {?} messages
     * @param {?} locale
     * @return {?}
     */
    Xtb.prototype.write = function (messages, locale) { throw new Error('Unsupported'); };
    /**
     * @param {?} content
     * @param {?} url
     * @return {?}
     */
    Xtb.prototype.load = function (content, url) {
        // xtb to xml nodes
        var /** @type {?} */ xtbParser = new XtbParser();
        var _a = xtbParser.parse(content, url), locale = _a.locale, msgIdToHtml = _a.msgIdToHtml, errors = _a.errors;
        // xml nodes to i18n nodes
        var /** @type {?} */ i18nNodesByMsgId = {};
        var /** @type {?} */ converter = new XmlToI18n$2();
        // Because we should be able to load xtb files that rely on features not supported by angular,
        // we need to delay the conversion of html to i18n nodes so that non angular messages are not
        // converted
        Object.keys(msgIdToHtml).forEach(function (msgId) {
            var /** @type {?} */ valueFn = function () {
                var _a = converter.convert(msgIdToHtml[msgId], url), i18nNodes = _a.i18nNodes, errors = _a.errors;
                if (errors.length) {
                    throw new Error("xtb parse errors:\n" + errors.join('\n'));
                }
                return i18nNodes;
            };
            createLazyProperty(i18nNodesByMsgId, msgId, valueFn);
        });
        if (errors.length) {
            throw new Error("xtb parse errors:\n" + errors.join('\n'));
        }
        return { locale: /** @type {?} */ ((locale)), i18nNodesByMsgId: i18nNodesByMsgId };
    };
    /**
     * @param {?} message
     * @return {?}
     */
    Xtb.prototype.digest = function (message) { return digest$1(message); };
    /**
     * @param {?} message
     * @return {?}
     */
    Xtb.prototype.createNameMapper = function (message) {
        return new SimplePlaceholderMapper(message, toPublicName);
    };
    return Xtb;
}(Serializer));
/**
 * @param {?} messages
 * @param {?} id
 * @param {?} valueFn
 * @return {?}
 */
function createLazyProperty(messages, id, valueFn) {
    Object.defineProperty(messages, id, {
        configurable: true,
        enumerable: true,
        get: function () {
            var /** @type {?} */ value = valueFn();
            Object.defineProperty(messages, id, { enumerable: true, value: value });
            return value;
        },
        set: function (_) { throw new Error('Could not overwrite an XTB translation'); },
    });
}
var XtbParser = (function () {
    function XtbParser() {
        this._locale = null;
    }
    /**
     * @param {?} xtb
     * @param {?} url
     * @return {?}
     */
    XtbParser.prototype.parse = function (xtb, url) {
        this._bundleDepth = 0;
        this._msgIdToHtml = {};
        // We can not parse the ICU messages at this point as some messages might not originate
        // from Angular that could not be lex'd.
        var /** @type {?} */ xml = new XmlParser().parse(xtb, url, false);
        this._errors = xml.errors;
        visitAll(this, xml.rootNodes);
        return {
            msgIdToHtml: this._msgIdToHtml,
            errors: this._errors,
            locale: this._locale,
        };
    };
    /**
     * @param {?} element
     * @param {?} context
     * @return {?}
     */
    XtbParser.prototype.visitElement = function (element, context) {
        switch (element.name) {
            case _TRANSLATIONS_TAG:
                this._bundleDepth++;
                if (this._bundleDepth > 1) {
                    this._addError(element, "<" + _TRANSLATIONS_TAG + "> elements can not be nested");
                }
                var /** @type {?} */ langAttr = element.attrs.find(function (attr) { return attr.name === 'lang'; });
                if (langAttr) {
                    this._locale = langAttr.value;
                }
                visitAll(this, element.children, null);
                this._bundleDepth--;
                break;
            case _TRANSLATION_TAG:
                var /** @type {?} */ idAttr = element.attrs.find(function (attr) { return attr.name === 'id'; });
                if (!idAttr) {
                    this._addError(element, "<" + _TRANSLATION_TAG + "> misses the \"id\" attribute");
                }
                else {
                    var /** @type {?} */ id = idAttr.value;
                    if (this._msgIdToHtml.hasOwnProperty(id)) {
                        this._addError(element, "Duplicated translations for msg " + id);
                    }
                    else {
                        var /** @type {?} */ innerTextStart = ((element.startSourceSpan)).end.offset;
                        var /** @type {?} */ innerTextEnd = ((element.endSourceSpan)).start.offset;
                        var /** @type {?} */ content = ((element.startSourceSpan)).start.file.content;
                        var /** @type {?} */ innerText = content.slice(/** @type {?} */ ((innerTextStart)), /** @type {?} */ ((innerTextEnd)));
                        this._msgIdToHtml[id] = innerText;
                    }
                }
                break;
            default:
                this._addError(element, 'Unexpected tag');
        }
    };
    /**
     * @param {?} attribute
     * @param {?} context
     * @return {?}
     */
    XtbParser.prototype.visitAttribute = function (attribute, context) { };
    /**
     * @param {?} text
     * @param {?} context
     * @return {?}
     */
    XtbParser.prototype.visitText = function (text, context) { };
    /**
     * @param {?} comment
     * @param {?} context
     * @return {?}
     */
    XtbParser.prototype.visitComment = function (comment, context) { };
    /**
     * @param {?} expansion
     * @param {?} context
     * @return {?}
     */
    XtbParser.prototype.visitExpansion = function (expansion, context) { };
    /**
     * @param {?} expansionCase
     * @param {?} context
     * @return {?}
     */
    XtbParser.prototype.visitExpansionCase = function (expansionCase, context) { };
    /**
     * @param {?} node
     * @param {?} message
     * @return {?}
     */
    XtbParser.prototype._addError = function (node, message) {
        this._errors.push(new I18nError(/** @type {?} */ ((node.sourceSpan)), message));
    };
    return XtbParser;
}());
var XmlToI18n$2 = (function () {
    function XmlToI18n$2() {
    }
    /**
     * @param {?} message
     * @param {?} url
     * @return {?}
     */
    XmlToI18n$2.prototype.convert = function (message, url) {
        var /** @type {?} */ xmlIcu = new XmlParser().parse(message, url, true);
        this._errors = xmlIcu.errors;
        var /** @type {?} */ i18nNodes = this._errors.length > 0 || xmlIcu.rootNodes.length == 0 ?
            [] :
            visitAll(this, xmlIcu.rootNodes);
        return {
            i18nNodes: i18nNodes,
            errors: this._errors,
        };
    };
    /**
     * @param {?} text
     * @param {?} context
     * @return {?}
     */
    XmlToI18n$2.prototype.visitText = function (text, context) { return new Text$1(text.value, /** @type {?} */ ((text.sourceSpan))); };
    /**
     * @param {?} icu
     * @param {?} context
     * @return {?}
     */
    XmlToI18n$2.prototype.visitExpansion = function (icu, context) {
        var /** @type {?} */ caseMap = {};
        visitAll(this, icu.cases).forEach(function (c) {
            caseMap[c.value] = new Container(c.nodes, icu.sourceSpan);
        });
        return new Icu(icu.switchValue, icu.type, caseMap, icu.sourceSpan);
    };
    /**
     * @param {?} icuCase
     * @param {?} context
     * @return {?}
     */
    XmlToI18n$2.prototype.visitExpansionCase = function (icuCase, context) {
        return {
            value: icuCase.value,
            nodes: visitAll(this, icuCase.expression),
        };
    };
    /**
     * @param {?} el
     * @param {?} context
     * @return {?}
     */
    XmlToI18n$2.prototype.visitElement = function (el, context) {
        if (el.name === _PLACEHOLDER_TAG$3) {
            var /** @type {?} */ nameAttr = el.attrs.find(function (attr) { return attr.name === 'name'; });
            if (nameAttr) {
                return new Placeholder('', nameAttr.value, /** @type {?} */ ((el.sourceSpan)));
            }
            this._addError(el, "<" + _PLACEHOLDER_TAG$3 + "> misses the \"name\" attribute");
        }
        else {
            this._addError(el, "Unexpected tag");
        }
        return null;
    };
    /**
     * @param {?} comment
     * @param {?} context
     * @return {?}
     */
    XmlToI18n$2.prototype.visitComment = function (comment, context) { };
    /**
     * @param {?} attribute
     * @param {?} context
     * @return {?}
     */
    XmlToI18n$2.prototype.visitAttribute = function (attribute, context) { };
    /**
     * @param {?} node
     * @param {?} message
     * @return {?}
     */
    XmlToI18n$2.prototype._addError = function (node, message) {
        this._errors.push(new I18nError(/** @type {?} */ ((node.sourceSpan)), message));
    };
    return XmlToI18n$2;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var HtmlParser = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](HtmlParser, _super);
    function HtmlParser() {
        return _super.call(this, getHtmlTagDefinition) || this;
    }
    /**
     * @param {?} source
     * @param {?} url
     * @param {?=} parseExpansionForms
     * @param {?=} interpolationConfig
     * @return {?}
     */
    HtmlParser.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {
        if (parseExpansionForms === void 0) { parseExpansionForms = false; }
        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }
        return _super.prototype.parse.call(this, source, url, parseExpansionForms, interpolationConfig);
    };
    return HtmlParser;
}(Parser$1));
HtmlParser.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
HtmlParser.ctorParameters = function () { return []; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A container for translated messages
 */
var TranslationBundle = (function () {
    /**
     * @param {?=} _i18nNodesByMsgId
     * @param {?=} locale
     * @param {?=} digest
     * @param {?=} mapperFactory
     * @param {?=} missingTranslationStrategy
     * @param {?=} console
     */
    function TranslationBundle(_i18nNodesByMsgId, locale, digest, mapperFactory, missingTranslationStrategy, console) {
        if (_i18nNodesByMsgId === void 0) { _i18nNodesByMsgId = {}; }
        if (missingTranslationStrategy === void 0) { missingTranslationStrategy = __WEBPACK_IMPORTED_MODULE_1__angular_core__["I" /* MissingTranslationStrategy */].Warning; }
        this._i18nNodesByMsgId = _i18nNodesByMsgId;
        this.digest = digest;
        this.mapperFactory = mapperFactory;
        this._i18nToHtml = new I18nToHtmlVisitor(_i18nNodesByMsgId, locale, digest, mapperFactory, missingTranslationStrategy, console);
    }
    /**
     * @param {?} content
     * @param {?} url
     * @param {?} serializer
     * @param {?} missingTranslationStrategy
     * @param {?=} console
     * @return {?}
     */
    TranslationBundle.load = function (content, url, serializer, missingTranslationStrategy, console) {
        var _a = serializer.load(content, url), locale = _a.locale, i18nNodesByMsgId = _a.i18nNodesByMsgId;
        var /** @type {?} */ digestFn = function (m) { return serializer.digest(m); };
        var /** @type {?} */ mapperFactory = function (m) { return ((serializer.createNameMapper(m))); };
        return new TranslationBundle(i18nNodesByMsgId, locale, digestFn, mapperFactory, missingTranslationStrategy, console);
    };
    /**
     * @param {?} srcMsg
     * @return {?}
     */
    TranslationBundle.prototype.get = function (srcMsg) {
        var /** @type {?} */ html = this._i18nToHtml.convert(srcMsg);
        if (html.errors.length) {
            throw new Error(html.errors.join('\n'));
        }
        return html.nodes;
    };
    /**
     * @param {?} srcMsg
     * @return {?}
     */
    TranslationBundle.prototype.has = function (srcMsg) { return this.digest(srcMsg) in this._i18nNodesByMsgId; };
    return TranslationBundle;
}());
var I18nToHtmlVisitor = (function () {
    /**
     * @param {?=} _i18nNodesByMsgId
     * @param {?=} _locale
     * @param {?=} _digest
     * @param {?=} _mapperFactory
     * @param {?=} _missingTranslationStrategy
     * @param {?=} _console
     */
    function I18nToHtmlVisitor(_i18nNodesByMsgId, _locale, _digest, _mapperFactory, _missingTranslationStrategy, _console) {
        if (_i18nNodesByMsgId === void 0) { _i18nNodesByMsgId = {}; }
        this._i18nNodesByMsgId = _i18nNodesByMsgId;
        this._locale = _locale;
        this._digest = _digest;
        this._mapperFactory = _mapperFactory;
        this._missingTranslationStrategy = _missingTranslationStrategy;
        this._console = _console;
        this._contextStack = [];
        this._errors = [];
    }
    /**
     * @param {?} srcMsg
     * @return {?}
     */
    I18nToHtmlVisitor.prototype.convert = function (srcMsg) {
        this._contextStack.length = 0;
        this._errors.length = 0;
        // i18n to text
        var /** @type {?} */ text = this._convertToText(srcMsg);
        // text to html
        var /** @type {?} */ url = srcMsg.nodes[0].sourceSpan.start.file.url;
        var /** @type {?} */ html = new HtmlParser().parse(text, url, true);
        return {
            nodes: html.rootNodes,
            errors: this._errors.concat(html.errors),
        };
    };
    /**
     * @param {?} text
     * @param {?=} context
     * @return {?}
     */
    I18nToHtmlVisitor.prototype.visitText = function (text, context) { return text.value; };
    /**
     * @param {?} container
     * @param {?=} context
     * @return {?}
     */
    I18nToHtmlVisitor.prototype.visitContainer = function (container, context) {
        var _this = this;
        return container.children.map(function (n) { return n.visit(_this); }).join('');
    };
    /**
     * @param {?} icu
     * @param {?=} context
     * @return {?}
     */
    I18nToHtmlVisitor.prototype.visitIcu = function (icu, context) {
        var _this = this;
        var /** @type {?} */ cases = Object.keys(icu.cases).map(function (k) { return k + " {" + icu.cases[k].visit(_this) + "}"; });
        // TODO(vicb): Once all format switch to using expression placeholders
        // we should throw when the placeholder is not in the source message
        var /** @type {?} */ exp = this._srcMsg.placeholders.hasOwnProperty(icu.expression) ?
            this._srcMsg.placeholders[icu.expression] :
            icu.expression;
        return "{" + exp + ", " + icu.type + ", " + cases.join(' ') + "}";
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    I18nToHtmlVisitor.prototype.visitPlaceholder = function (ph, context) {
        var /** @type {?} */ phName = this._mapper(ph.name);
        if (this._srcMsg.placeholders.hasOwnProperty(phName)) {
            return this._srcMsg.placeholders[phName];
        }
        if (this._srcMsg.placeholderToMessage.hasOwnProperty(phName)) {
            return this._convertToText(this._srcMsg.placeholderToMessage[phName]);
        }
        this._addError(ph, "Unknown placeholder \"" + ph.name + "\"");
        return '';
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    I18nToHtmlVisitor.prototype.visitTagPlaceholder = function (ph, context) {
        var _this = this;
        var /** @type {?} */ tag = "" + ph.tag;
        var /** @type {?} */ attrs = Object.keys(ph.attrs).map(function (name) { return name + "=\"" + ph.attrs[name] + "\""; }).join(' ');
        if (ph.isVoid) {
            return "<" + tag + " " + attrs + "/>";
        }
        var /** @type {?} */ children = ph.children.map(function (c) { return c.visit(_this); }).join('');
        return "<" + tag + " " + attrs + ">" + children + "</" + tag + ">";
    };
    /**
     * @param {?} ph
     * @param {?=} context
     * @return {?}
     */
    I18nToHtmlVisitor.prototype.visitIcuPlaceholder = function (ph, context) {
        // An ICU placeholder references the source message to be serialized
        return this._convertToText(this._srcMsg.placeholderToMessage[ph.name]);
    };
    /**
     * Convert a source message to a translated text string:
     * - text nodes are replaced with their translation,
     * - placeholders are replaced with their content,
     * - ICU nodes are converted to ICU expressions.
     * @param {?} srcMsg
     * @return {?}
     */
    I18nToHtmlVisitor.prototype._convertToText = function (srcMsg) {
        var _this = this;
        var /** @type {?} */ id = this._digest(srcMsg);
        var /** @type {?} */ mapper = this._mapperFactory ? this._mapperFactory(srcMsg) : null;
        var /** @type {?} */ nodes;
        this._contextStack.push({ msg: this._srcMsg, mapper: this._mapper });
        this._srcMsg = srcMsg;
        if (this._i18nNodesByMsgId.hasOwnProperty(id)) {
            // When there is a translation use its nodes as the source
            // And create a mapper to convert serialized placeholder names to internal names
            nodes = this._i18nNodesByMsgId[id];
            this._mapper = function (name) { return mapper ? ((mapper.toInternalName(name))) : name; };
        }
        else {
            // When no translation has been found
            // - report an error / a warning / nothing,
            // - use the nodes from the original message
            // - placeholders are already internal and need no mapper
            if (this._missingTranslationStrategy === __WEBPACK_IMPORTED_MODULE_1__angular_core__["I" /* MissingTranslationStrategy */].Error) {
                var /** @type {?} */ ctx = this._locale ? " for locale \"" + this._locale + "\"" : '';
                this._addError(srcMsg.nodes[0], "Missing translation for message \"" + id + "\"" + ctx);
            }
            else if (this._console &&
                this._missingTranslationStrategy === __WEBPACK_IMPORTED_MODULE_1__angular_core__["I" /* MissingTranslationStrategy */].Warning) {
                var /** @type {?} */ ctx = this._locale ? " for locale \"" + this._locale + "\"" : '';
                this._console.warn("Missing translation for message \"" + id + "\"" + ctx);
            }
            nodes = srcMsg.nodes;
            this._mapper = function (name) { return name; };
        }
        var /** @type {?} */ text = nodes.map(function (node) { return node.visit(_this); }).join('');
        var /** @type {?} */ context = ((this._contextStack.pop()));
        this._srcMsg = context.msg;
        this._mapper = context.mapper;
        return text;
    };
    /**
     * @param {?} el
     * @param {?} msg
     * @return {?}
     */
    I18nToHtmlVisitor.prototype._addError = function (el, msg) {
        this._errors.push(new I18nError(el.sourceSpan, msg));
    };
    return I18nToHtmlVisitor;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var I18NHtmlParser = (function () {
    /**
     * @param {?} _htmlParser
     * @param {?=} translations
     * @param {?=} translationsFormat
     * @param {?=} missingTranslation
     * @param {?=} console
     */
    function I18NHtmlParser(_htmlParser, translations, translationsFormat, missingTranslation, console) {
        if (missingTranslation === void 0) { missingTranslation = __WEBPACK_IMPORTED_MODULE_1__angular_core__["I" /* MissingTranslationStrategy */].Warning; }
        this._htmlParser = _htmlParser;
        if (translations) {
            var serializer = createSerializer(translationsFormat);
            this._translationBundle =
                TranslationBundle.load(translations, 'i18n', serializer, missingTranslation, console);
        }
        else {
            this._translationBundle =
                new TranslationBundle({}, null, digest, undefined, missingTranslation, console);
        }
    }
    /**
     * @param {?} source
     * @param {?} url
     * @param {?=} parseExpansionForms
     * @param {?=} interpolationConfig
     * @return {?}
     */
    I18NHtmlParser.prototype.parse = function (source, url, parseExpansionForms, interpolationConfig) {
        if (parseExpansionForms === void 0) { parseExpansionForms = false; }
        if (interpolationConfig === void 0) { interpolationConfig = DEFAULT_INTERPOLATION_CONFIG; }
        var /** @type {?} */ parseResult = this._htmlParser.parse(source, url, parseExpansionForms, interpolationConfig);
        if (parseResult.errors.length) {
            return new ParseTreeResult(parseResult.rootNodes, parseResult.errors);
        }
        return mergeTranslations(parseResult.rootNodes, this._translationBundle, interpolationConfig, [], {});
    };
    return I18NHtmlParser;
}());
/**
 * @param {?=} format
 * @return {?}
 */
function createSerializer(format) {
    format = (format || 'xlf').toLowerCase();
    switch (format) {
        case 'xmb':
            return new Xmb();
        case 'xtb':
            return new Xtb();
        case 'xliff2':
        case 'xlf2':
            return new Xliff2();
        case 'xliff':
        case 'xlf':
        default:
            return new Xliff();
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var CORE = '@angular/core';
var Identifiers = (function () {
    function Identifiers() {
    }
    return Identifiers;
}());
Identifiers.ANALYZE_FOR_ENTRY_COMPONENTS = {
    name: 'ANALYZE_FOR_ENTRY_COMPONENTS',
    moduleName: CORE,
    runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["a" /* ANALYZE_FOR_ENTRY_COMPONENTS */]
};
Identifiers.ElementRef = { name: 'ElementRef', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["u" /* ElementRef */] };
Identifiers.NgModuleRef = { name: 'NgModuleRef', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["N" /* NgModuleRef */] };
Identifiers.ViewContainerRef = { name: 'ViewContainerRef', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_14" /* ViewContainerRef */] };
Identifiers.ChangeDetectorRef = {
    name: 'ChangeDetectorRef',
    moduleName: CORE,
    runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["k" /* ChangeDetectorRef */]
};
Identifiers.QueryList = { name: 'QueryList', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["X" /* QueryList */] };
Identifiers.TemplateRef = { name: 'TemplateRef', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_8" /* TemplateRef */] };
Identifiers.CodegenComponentFactoryResolver = {
    name: 'CodegenComponentFactoryResolver',
    moduleName: CORE,
    runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_32" /* CodegenComponentFactoryResolver */]
};
Identifiers.ComponentFactoryResolver = {
    name: 'ComponentFactoryResolver',
    moduleName: CORE,
    runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["p" /* ComponentFactoryResolver */]
};
Identifiers.ComponentFactory = { name: 'ComponentFactory', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["o" /* ComponentFactory */] };
Identifiers.ComponentRef = { name: 'ComponentRef', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["q" /* ComponentRef */] };
Identifiers.NgModuleFactory = { name: 'NgModuleFactory', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["M" /* NgModuleFactory */] };
Identifiers.createModuleFactory = {
    name: 'cmf',
    moduleName: CORE,
    runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_40" /* cmf */],
};
Identifiers.moduleDef = {
    name: 'mod',
    moduleName: CORE,
    runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_52" /* mod */],
};
Identifiers.moduleProviderDef = {
    name: 'mpd',
    moduleName: CORE,
    runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_53" /* mpd */],
};
Identifiers.RegisterModuleFactoryFn = {
    name: 'registerModuleFactory',
    moduleName: CORE,
    runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_62" /* registerModuleFactory */],
};
Identifiers.Injector = { name: 'Injector', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["D" /* Injector */] };
Identifiers.ViewEncapsulation = {
    name: 'ViewEncapsulation',
    moduleName: CORE,
    runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_15" /* ViewEncapsulation */]
};
Identifiers.ChangeDetectionStrategy = {
    name: 'ChangeDetectionStrategy',
    moduleName: CORE,
    runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["j" /* ChangeDetectionStrategy */]
};
Identifiers.SecurityContext = {
    name: 'SecurityContext',
    moduleName: CORE,
    runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_3" /* SecurityContext */],
};
Identifiers.LOCALE_ID = { name: 'LOCALE_ID', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["H" /* LOCALE_ID */] };
Identifiers.TRANSLATIONS_FORMAT = {
    name: 'TRANSLATIONS_FORMAT',
    moduleName: CORE,
    runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_7" /* TRANSLATIONS_FORMAT */]
};
Identifiers.inlineInterpolate = {
    name: 'inlineInterpolate',
    moduleName: CORE,
    runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_47" /* inlineInterpolate */]
};
Identifiers.interpolate = { name: 'interpolate', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_48" /* interpolate */] };
Identifiers.EMPTY_ARRAY = { name: 'EMPTY_ARRAY', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_34" /* EMPTY_ARRAY */] };
Identifiers.EMPTY_MAP = { name: 'EMPTY_MAP', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_35" /* EMPTY_MAP */] };
Identifiers.Renderer = { name: 'Renderer', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["Z" /* Renderer */] };
Identifiers.viewDef = { name: 'vid', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_66" /* vid */] };
Identifiers.elementDef = { name: 'eld', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_43" /* eld */] };
Identifiers.anchorDef = { name: 'and', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_38" /* and */] };
Identifiers.textDef = { name: 'ted', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_64" /* ted */] };
Identifiers.directiveDef = { name: 'did', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_42" /* did */] };
Identifiers.providerDef = { name: 'prd', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_60" /* prd */] };
Identifiers.queryDef = { name: 'qud', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_61" /* qud */] };
Identifiers.pureArrayDef = { name: 'pad', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_56" /* pad */] };
Identifiers.pureObjectDef = { name: 'pod', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_58" /* pod */] };
Identifiers.purePipeDef = { name: 'ppd', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_59" /* ppd */] };
Identifiers.pipeDef = { name: 'pid', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_57" /* pid */] };
Identifiers.nodeValue = { name: 'nov', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_55" /* nov */] };
Identifiers.ngContentDef = { name: 'ncd', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_54" /* ncd */] };
Identifiers.unwrapValue = { name: 'unv', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_65" /* unv */] };
Identifiers.createRendererType2 = { name: 'crt', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_41" /* crt */] };
Identifiers.RendererType2 = {
    name: 'RendererType2',
    moduleName: CORE,
    // type only
    runtime: null
};
Identifiers.ViewDefinition = {
    name: 'ViewDefinition',
    moduleName: CORE,
    // type only
    runtime: null
};
Identifiers.createComponentFactory = { name: 'ccf', moduleName: CORE, runtime: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_39" /* ccf */] };
/**
 * @param {?} reference
 * @return {?}
 */
function createTokenForReference(reference) {
    return { identifier: { reference: reference } };
}
/**
 * @param {?} reflector
 * @param {?} reference
 * @return {?}
 */
function createTokenForExternalReference(reflector, reference) {
    return createTokenForReference(reflector.resolveExternalReference(reference));
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var PRESERVE_WS_ATTR_NAME = 'ngPreserveWhitespaces';
var SKIP_WS_TRIM_TAGS = new Set(['pre', 'template', 'textarea', 'script', 'style']);
// Equivalent to \s with \u00a0 (non-breaking space) excluded.
// Based on https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp
var WS_CHARS = ' \f\n\r\t\v\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff';
var NO_WS_REGEXP = new RegExp("[^" + WS_CHARS + "]");
var WS_REPLACE_REGEXP = new RegExp("[" + WS_CHARS + "]{2,}", 'g');
/**
 * @param {?} attrs
 * @return {?}
 */
function hasPreserveWhitespacesAttr(attrs) {
    return attrs.some(function (attr) { return attr.name === PRESERVE_WS_ATTR_NAME; });
}
/**
 * Angular Dart introduced &ngsp; as a placeholder for non-removable space, see:
 * https://github.com/dart-lang/angular/blob/0bb611387d29d65b5af7f9d2515ab571fd3fbee4/_tests/test/compiler/preserve_whitespace_test.dart#L25-L32
 * In Angular Dart &ngsp; is converted to the 0xE500 PUA (Private Use Areas) unicode character
 * and later on replaced by a space. We are re-implementing the same idea here.
 * @param {?} value
 * @return {?}
 */
function replaceNgsp(value) {
    // lexer is replacing the &ngsp; pseudo-entity with NGSP_UNICODE
    return value.replace(new RegExp(NGSP_UNICODE, 'g'), ' ');
}
/**
 * This visitor can walk HTML parse tree and remove / trim text nodes using the following rules:
 * - consider spaces, tabs and new lines as whitespace characters;
 * - drop text nodes consisting of whitespace characters only;
 * - for all other text nodes replace consecutive whitespace characters with one space;
 * - convert &ngsp; pseudo-entity to a single space;
 *
 * Removal and trimming of whitespaces have positive performance impact (less code to generate
 * while compiling templates, faster view creation). At the same time it can be "destructive"
 * in some cases (whitespaces can influence layout). Because of the potential of breaking layout
 * this visitor is not activated by default in Angular 4 and people need to explicitly opt-in for
 * whitespace removal. The default option for whitespace removal will be revisited post Angular 5
 * and might be changed to "on" by default.
 */
var WhitespaceVisitor = (function () {
    function WhitespaceVisitor() {
    }
    /**
     * @param {?} element
     * @param {?} context
     * @return {?}
     */
    WhitespaceVisitor.prototype.visitElement = function (element, context) {
        if (SKIP_WS_TRIM_TAGS.has(element.name) || hasPreserveWhitespacesAttr(element.attrs)) {
            // don't descent into elements where we need to preserve whitespaces
            // but still visit all attributes to eliminate one used as a market to preserve WS
            return new Element(element.name, visitAll(this, element.attrs), element.children, element.sourceSpan, element.startSourceSpan, element.endSourceSpan);
        }
        return new Element(element.name, element.attrs, visitAll(this, element.children), element.sourceSpan, element.startSourceSpan, element.endSourceSpan);
    };
    /**
     * @param {?} attribute
     * @param {?} context
     * @return {?}
     */
    WhitespaceVisitor.prototype.visitAttribute = function (attribute, context) {
        return attribute.name !== PRESERVE_WS_ATTR_NAME ? attribute : null;
    };
    /**
     * @param {?} text
     * @param {?} context
     * @return {?}
     */
    WhitespaceVisitor.prototype.visitText = function (text, context) {
        var /** @type {?} */ isNotBlank = text.value.match(NO_WS_REGEXP);
        if (isNotBlank) {
            return new Text(replaceNgsp(text.value).replace(WS_REPLACE_REGEXP, ' '), text.sourceSpan);
        }
        return null;
    };
    /**
     * @param {?} comment
     * @param {?} context
     * @return {?}
     */
    WhitespaceVisitor.prototype.visitComment = function (comment, context) { return comment; };
    /**
     * @param {?} expansion
     * @param {?} context
     * @return {?}
     */
    WhitespaceVisitor.prototype.visitExpansion = function (expansion, context) { return expansion; };
    /**
     * @param {?} expansionCase
     * @param {?} context
     * @return {?}
     */
    WhitespaceVisitor.prototype.visitExpansionCase = function (expansionCase, context) { return expansionCase; };
    return WhitespaceVisitor;
}());
/**
 * @param {?} htmlAstWithErrors
 * @return {?}
 */
function removeWhitespaces(htmlAstWithErrors) {
    return new ParseTreeResult(visitAll(new WhitespaceVisitor(), htmlAstWithErrors.rootNodes), htmlAstWithErrors.errors);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
// http://cldr.unicode.org/index/cldr-spec/plural-rules
var PLURAL_CASES = ['zero', 'one', 'two', 'few', 'many', 'other'];
/**
 * Expands special forms into elements.
 *
 * For example,
 *
 * ```
 * { messages.length, plural,
 *   =0 {zero}
 *   =1 {one}
 *   other {more than one}
 * }
 * ```
 *
 * will be expanded into
 *
 * ```
 * <ng-container [ngPlural]="messages.length">
 *   <ng-template ngPluralCase="=0">zero</ng-template>
 *   <ng-template ngPluralCase="=1">one</ng-template>
 *   <ng-template ngPluralCase="other">more than one</ng-template>
 * </ng-container>
 * ```
 * @param {?} nodes
 * @return {?}
 */
function expandNodes(nodes) {
    var /** @type {?} */ expander = new _Expander();
    return new ExpansionResult(visitAll(expander, nodes), expander.isExpanded, expander.errors);
}
var ExpansionResult = (function () {
    /**
     * @param {?} nodes
     * @param {?} expanded
     * @param {?} errors
     */
    function ExpansionResult(nodes, expanded, errors) {
        this.nodes = nodes;
        this.expanded = expanded;
        this.errors = errors;
    }
    return ExpansionResult;
}());
var ExpansionError = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ExpansionError, _super);
    /**
     * @param {?} span
     * @param {?} errorMsg
     */
    function ExpansionError(span, errorMsg) {
        return _super.call(this, span, errorMsg) || this;
    }
    return ExpansionError;
}(ParseError));
/**
 * Expand expansion forms (plural, select) to directives
 *
 * \@internal
 */
var _Expander = (function () {
    function _Expander() {
        this.isExpanded = false;
        this.errors = [];
    }
    /**
     * @param {?} element
     * @param {?} context
     * @return {?}
     */
    _Expander.prototype.visitElement = function (element, context) {
        return new Element(element.name, element.attrs, visitAll(this, element.children), element.sourceSpan, element.startSourceSpan, element.endSourceSpan);
    };
    /**
     * @param {?} attribute
     * @param {?} context
     * @return {?}
     */
    _Expander.prototype.visitAttribute = function (attribute, context) { return attribute; };
    /**
     * @param {?} text
     * @param {?} context
     * @return {?}
     */
    _Expander.prototype.visitText = function (text, context) { return text; };
    /**
     * @param {?} comment
     * @param {?} context
     * @return {?}
     */
    _Expander.prototype.visitComment = function (comment, context) { return comment; };
    /**
     * @param {?} icu
     * @param {?} context
     * @return {?}
     */
    _Expander.prototype.visitExpansion = function (icu, context) {
        this.isExpanded = true;
        return icu.type == 'plural' ? _expandPluralForm(icu, this.errors) :
            _expandDefaultForm(icu, this.errors);
    };
    /**
     * @param {?} icuCase
     * @param {?} context
     * @return {?}
     */
    _Expander.prototype.visitExpansionCase = function (icuCase, context) {
        throw new Error('Should not be reached');
    };
    return _Expander;
}());
/**
 * @param {?} ast
 * @param {?} errors
 * @return {?}
 */
function _expandPluralForm(ast, errors) {
    var /** @type {?} */ children = ast.cases.map(function (c) {
        if (PLURAL_CASES.indexOf(c.value) == -1 && !c.value.match(/^=\d+$/)) {
            errors.push(new ExpansionError(c.valueSourceSpan, "Plural cases should be \"=<number>\" or one of " + PLURAL_CASES.join(", ")));
        }
        var /** @type {?} */ expansionResult = expandNodes(c.expression);
        errors.push.apply(errors, expansionResult.errors);
        return new Element("ng-template", [new Attribute$1('ngPluralCase', "" + c.value, c.valueSourceSpan)], expansionResult.nodes, c.sourceSpan, c.sourceSpan, c.sourceSpan);
    });
    var /** @type {?} */ switchAttr = new Attribute$1('[ngPlural]', ast.switchValue, ast.switchValueSourceSpan);
    return new Element('ng-container', [switchAttr], children, ast.sourceSpan, ast.sourceSpan, ast.sourceSpan);
}
/**
 * @param {?} ast
 * @param {?} errors
 * @return {?}
 */
function _expandDefaultForm(ast, errors) {
    var /** @type {?} */ children = ast.cases.map(function (c) {
        var /** @type {?} */ expansionResult = expandNodes(c.expression);
        errors.push.apply(errors, expansionResult.errors);
        if (c.value === 'other') {
            // other is the default case when no values match
            return new Element("ng-template", [new Attribute$1('ngSwitchDefault', '', c.valueSourceSpan)], expansionResult.nodes, c.sourceSpan, c.sourceSpan, c.sourceSpan);
        }
        return new Element("ng-template", [new Attribute$1('ngSwitchCase', "" + c.value, c.valueSourceSpan)], expansionResult.nodes, c.sourceSpan, c.sourceSpan, c.sourceSpan);
    });
    var /** @type {?} */ switchAttr = new Attribute$1('[ngSwitch]', ast.switchValue, ast.switchValueSourceSpan);
    return new Element('ng-container', [switchAttr], children, ast.sourceSpan, ast.sourceSpan, ast.sourceSpan);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ProviderError = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ProviderError, _super);
    /**
     * @param {?} message
     * @param {?} span
     */
    function ProviderError(message, span) {
        return _super.call(this, span, message) || this;
    }
    return ProviderError;
}(ParseError));
var ProviderViewContext = (function () {
    /**
     * @param {?} reflector
     * @param {?} component
     */
    function ProviderViewContext(reflector, component) {
        var _this = this;
        this.reflector = reflector;
        this.component = component;
        this.errors = [];
        this.viewQueries = _getViewQueries(component);
        this.viewProviders = new Map();
        component.viewProviders.forEach(function (provider) {
            if (_this.viewProviders.get(tokenReference(provider.token)) == null) {
                _this.viewProviders.set(tokenReference(provider.token), true);
            }
        });
    }
    return ProviderViewContext;
}());
var ProviderElementContext = (function () {
    /**
     * @param {?} viewContext
     * @param {?} _parent
     * @param {?} _isViewRoot
     * @param {?} _directiveAsts
     * @param {?} attrs
     * @param {?} refs
     * @param {?} isTemplate
     * @param {?} contentQueryStartId
     * @param {?} _sourceSpan
     */
    function ProviderElementContext(viewContext, _parent, _isViewRoot, _directiveAsts, attrs, refs, isTemplate, contentQueryStartId, _sourceSpan) {
        var _this = this;
        this.viewContext = viewContext;
        this._parent = _parent;
        this._isViewRoot = _isViewRoot;
        this._directiveAsts = _directiveAsts;
        this._sourceSpan = _sourceSpan;
        this._transformedProviders = new Map();
        this._seenProviders = new Map();
        this._hasViewContainer = false;
        this._queriedTokens = new Map();
        this._attrs = {};
        attrs.forEach(function (attrAst) { return _this._attrs[attrAst.name] = attrAst.value; });
        var directivesMeta = _directiveAsts.map(function (directiveAst) { return directiveAst.directive; });
        this._allProviders =
            _resolveProvidersFromDirectives(directivesMeta, _sourceSpan, viewContext.errors);
        this._contentQueries = _getContentQueries(contentQueryStartId, directivesMeta);
        Array.from(this._allProviders.values()).forEach(function (provider) {
            _this._addQueryReadsTo(provider.token, provider.token, _this._queriedTokens);
        });
        if (isTemplate) {
            var templateRefId = createTokenForExternalReference(this.viewContext.reflector, Identifiers.TemplateRef);
            this._addQueryReadsTo(templateRefId, templateRefId, this._queriedTokens);
        }
        refs.forEach(function (refAst) {
            var defaultQueryValue = refAst.value ||
                createTokenForExternalReference(_this.viewContext.reflector, Identifiers.ElementRef);
            _this._addQueryReadsTo({ value: refAst.name }, defaultQueryValue, _this._queriedTokens);
        });
        if (this._queriedTokens.get(this.viewContext.reflector.resolveExternalReference(Identifiers.ViewContainerRef))) {
            this._hasViewContainer = true;
        }
        // create the providers that we know are eager first
        Array.from(this._allProviders.values()).forEach(function (provider) {
            var eager = provider.eager || _this._queriedTokens.get(tokenReference(provider.token));
            if (eager) {
                _this._getOrCreateLocalProvider(provider.providerType, provider.token, true);
            }
        });
    }
    /**
     * @return {?}
     */
    ProviderElementContext.prototype.afterElement = function () {
        var _this = this;
        // collect lazy providers
        Array.from(this._allProviders.values()).forEach(function (provider) {
            _this._getOrCreateLocalProvider(provider.providerType, provider.token, false);
        });
    };
    Object.defineProperty(ProviderElementContext.prototype, "transformProviders", {
        /**
         * @return {?}
         */
        get: function () {
            // Note: Maps keep their insertion order.
            var /** @type {?} */ lazyProviders = [];
            var /** @type {?} */ eagerProviders = [];
            this._transformedProviders.forEach(function (provider) {
                if (provider.eager) {
                    eagerProviders.push(provider);
                }
                else {
                    lazyProviders.push(provider);
                }
            });
            return lazyProviders.concat(eagerProviders);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ProviderElementContext.prototype, "transformedDirectiveAsts", {
        /**
         * @return {?}
         */
        get: function () {
            var /** @type {?} */ sortedProviderTypes = this.transformProviders.map(function (provider) { return provider.token.identifier; });
            var /** @type {?} */ sortedDirectives = this._directiveAsts.slice();
            sortedDirectives.sort(function (dir1, dir2) { return sortedProviderTypes.indexOf(dir1.directive.type) -
                sortedProviderTypes.indexOf(dir2.directive.type); });
            return sortedDirectives;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ProviderElementContext.prototype, "transformedHasViewContainer", {
        /**
         * @return {?}
         */
        get: function () { return this._hasViewContainer; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ProviderElementContext.prototype, "queryMatches", {
        /**
         * @return {?}
         */
        get: function () {
            var /** @type {?} */ allMatches = [];
            this._queriedTokens.forEach(function (matches) { allMatches.push.apply(allMatches, matches); });
            return allMatches;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} token
     * @param {?} defaultValue
     * @param {?} queryReadTokens
     * @return {?}
     */
    ProviderElementContext.prototype._addQueryReadsTo = function (token, defaultValue, queryReadTokens) {
        this._getQueriesFor(token).forEach(function (query) {
            var /** @type {?} */ queryValue = query.meta.read || defaultValue;
            var /** @type {?} */ tokenRef = tokenReference(queryValue);
            var /** @type {?} */ queryMatches = queryReadTokens.get(tokenRef);
            if (!queryMatches) {
                queryMatches = [];
                queryReadTokens.set(tokenRef, queryMatches);
            }
            queryMatches.push({ queryId: query.queryId, value: queryValue });
        });
    };
    /**
     * @param {?} token
     * @return {?}
     */
    ProviderElementContext.prototype._getQueriesFor = function (token) {
        var /** @type {?} */ result = [];
        var /** @type {?} */ currentEl = this;
        var /** @type {?} */ distance = 0;
        var /** @type {?} */ queries;
        while (currentEl !== null) {
            queries = currentEl._contentQueries.get(tokenReference(token));
            if (queries) {
                result.push.apply(result, queries.filter(function (query) { return query.meta.descendants || distance <= 1; }));
            }
            if (currentEl._directiveAsts.length > 0) {
                distance++;
            }
            currentEl = currentEl._parent;
        }
        queries = this.viewContext.viewQueries.get(tokenReference(token));
        if (queries) {
            result.push.apply(result, queries);
        }
        return result;
    };
    /**
     * @param {?} requestingProviderType
     * @param {?} token
     * @param {?} eager
     * @return {?}
     */
    ProviderElementContext.prototype._getOrCreateLocalProvider = function (requestingProviderType, token, eager) {
        var _this = this;
        var /** @type {?} */ resolvedProvider = this._allProviders.get(tokenReference(token));
        if (!resolvedProvider || ((requestingProviderType === ProviderAstType.Directive ||
            requestingProviderType === ProviderAstType.PublicService) &&
            resolvedProvider.providerType === ProviderAstType.PrivateService) ||
            ((requestingProviderType === ProviderAstType.PrivateService ||
                requestingProviderType === ProviderAstType.PublicService) &&
                resolvedProvider.providerType === ProviderAstType.Builtin)) {
            return null;
        }
        var /** @type {?} */ transformedProviderAst = this._transformedProviders.get(tokenReference(token));
        if (transformedProviderAst) {
            return transformedProviderAst;
        }
        if (this._seenProviders.get(tokenReference(token)) != null) {
            this.viewContext.errors.push(new ProviderError("Cannot instantiate cyclic dependency! " + tokenName(token), this._sourceSpan));
            return null;
        }
        this._seenProviders.set(tokenReference(token), true);
        var /** @type {?} */ transformedProviders = resolvedProvider.providers.map(function (provider) {
            var /** @type {?} */ transformedUseValue = provider.useValue;
            var /** @type {?} */ transformedUseExisting = ((provider.useExisting));
            var /** @type {?} */ transformedDeps = ((undefined));
            if (provider.useExisting != null) {
                var /** @type {?} */ existingDiDep = ((_this._getDependency(resolvedProvider.providerType, { token: provider.useExisting }, eager)));
                if (existingDiDep.token != null) {
                    transformedUseExisting = existingDiDep.token;
                }
                else {
                    transformedUseExisting = ((null));
                    transformedUseValue = existingDiDep.value;
                }
            }
            else if (provider.useFactory) {
                var /** @type {?} */ deps = provider.deps || provider.useFactory.diDeps;
                transformedDeps =
                    deps.map(function (dep) { return ((_this._getDependency(resolvedProvider.providerType, dep, eager))); });
            }
            else if (provider.useClass) {
                var /** @type {?} */ deps = provider.deps || provider.useClass.diDeps;
                transformedDeps =
                    deps.map(function (dep) { return ((_this._getDependency(resolvedProvider.providerType, dep, eager))); });
            }
            return _transformProvider(provider, {
                useExisting: transformedUseExisting,
                useValue: transformedUseValue,
                deps: transformedDeps
            });
        });
        transformedProviderAst =
            _transformProviderAst(resolvedProvider, { eager: eager, providers: transformedProviders });
        this._transformedProviders.set(tokenReference(token), transformedProviderAst);
        return transformedProviderAst;
    };
    /**
     * @param {?} requestingProviderType
     * @param {?} dep
     * @param {?=} eager
     * @return {?}
     */
    ProviderElementContext.prototype._getLocalDependency = function (requestingProviderType, dep, eager) {
        if (eager === void 0) { eager = false; }
        if (dep.isAttribute) {
            var /** @type {?} */ attrValue = this._attrs[((dep.token)).value];
            return { isValue: true, value: attrValue == null ? null : attrValue };
        }
        if (dep.token != null) {
            // access builtints
            if ((requestingProviderType === ProviderAstType.Directive ||
                requestingProviderType === ProviderAstType.Component)) {
                if (tokenReference(dep.token) ===
                    this.viewContext.reflector.resolveExternalReference(Identifiers.Renderer) ||
                    tokenReference(dep.token) ===
                        this.viewContext.reflector.resolveExternalReference(Identifiers.ElementRef) ||
                    tokenReference(dep.token) ===
                        this.viewContext.reflector.resolveExternalReference(Identifiers.ChangeDetectorRef) ||
                    tokenReference(dep.token) ===
                        this.viewContext.reflector.resolveExternalReference(Identifiers.TemplateRef)) {
                    return dep;
                }
                if (tokenReference(dep.token) ===
                    this.viewContext.reflector.resolveExternalReference(Identifiers.ViewContainerRef)) {
                    this._hasViewContainer = true;
                }
            }
            // access the injector
            if (tokenReference(dep.token) ===
                this.viewContext.reflector.resolveExternalReference(Identifiers.Injector)) {
                return dep;
            }
            // access providers
            if (this._getOrCreateLocalProvider(requestingProviderType, dep.token, eager) != null) {
                return dep;
            }
        }
        return null;
    };
    /**
     * @param {?} requestingProviderType
     * @param {?} dep
     * @param {?=} eager
     * @return {?}
     */
    ProviderElementContext.prototype._getDependency = function (requestingProviderType, dep, eager) {
        if (eager === void 0) { eager = false; }
        var /** @type {?} */ currElement = this;
        var /** @type {?} */ currEager = eager;
        var /** @type {?} */ result = null;
        if (!dep.isSkipSelf) {
            result = this._getLocalDependency(requestingProviderType, dep, eager);
        }
        if (dep.isSelf) {
            if (!result && dep.isOptional) {
                result = { isValue: true, value: null };
            }
        }
        else {
            // check parent elements
            while (!result && currElement._parent) {
                var /** @type {?} */ prevElement = currElement;
                currElement = currElement._parent;
                if (prevElement._isViewRoot) {
                    currEager = false;
                }
                result = currElement._getLocalDependency(ProviderAstType.PublicService, dep, currEager);
            }
            // check @Host restriction
            if (!result) {
                if (!dep.isHost || this.viewContext.component.isHost ||
                    this.viewContext.component.type.reference === tokenReference(/** @type {?} */ ((dep.token))) ||
                    this.viewContext.viewProviders.get(tokenReference(/** @type {?} */ ((dep.token)))) != null) {
                    result = dep;
                }
                else {
                    result = dep.isOptional ? result = { isValue: true, value: null } : null;
                }
            }
        }
        if (!result) {
            this.viewContext.errors.push(new ProviderError("No provider for " + tokenName(/** @type {?} */ ((dep.token))), this._sourceSpan));
        }
        return result;
    };
    return ProviderElementContext;
}());
var NgModuleProviderAnalyzer = (function () {
    /**
     * @param {?} reflector
     * @param {?} ngModule
     * @param {?} extraProviders
     * @param {?} sourceSpan
     */
    function NgModuleProviderAnalyzer(reflector, ngModule, extraProviders, sourceSpan) {
        var _this = this;
        this.reflector = reflector;
        this._transformedProviders = new Map();
        this._seenProviders = new Map();
        this._errors = [];
        this._allProviders = new Map();
        ngModule.transitiveModule.modules.forEach(function (ngModuleType) {
            var ngModuleProvider = { token: { identifier: ngModuleType }, useClass: ngModuleType };
            _resolveProviders([ngModuleProvider], ProviderAstType.PublicService, true, sourceSpan, _this._errors, _this._allProviders);
        });
        _resolveProviders(ngModule.transitiveModule.providers.map(function (entry) { return entry.provider; }).concat(extraProviders), ProviderAstType.PublicService, false, sourceSpan, this._errors, this._allProviders);
    }
    /**
     * @return {?}
     */
    NgModuleProviderAnalyzer.prototype.parse = function () {
        var _this = this;
        Array.from(this._allProviders.values()).forEach(function (provider) {
            _this._getOrCreateLocalProvider(provider.token, provider.eager);
        });
        if (this._errors.length > 0) {
            var /** @type {?} */ errorString = this._errors.join('\n');
            throw new Error("Provider parse errors:\n" + errorString);
        }
        // Note: Maps keep their insertion order.
        var /** @type {?} */ lazyProviders = [];
        var /** @type {?} */ eagerProviders = [];
        this._transformedProviders.forEach(function (provider) {
            if (provider.eager) {
                eagerProviders.push(provider);
            }
            else {
                lazyProviders.push(provider);
            }
        });
        return lazyProviders.concat(eagerProviders);
    };
    /**
     * @param {?} token
     * @param {?} eager
     * @return {?}
     */
    NgModuleProviderAnalyzer.prototype._getOrCreateLocalProvider = function (token, eager) {
        var _this = this;
        var /** @type {?} */ resolvedProvider = this._allProviders.get(tokenReference(token));
        if (!resolvedProvider) {
            return null;
        }
        var /** @type {?} */ transformedProviderAst = this._transformedProviders.get(tokenReference(token));
        if (transformedProviderAst) {
            return transformedProviderAst;
        }
        if (this._seenProviders.get(tokenReference(token)) != null) {
            this._errors.push(new ProviderError("Cannot instantiate cyclic dependency! " + tokenName(token), resolvedProvider.sourceSpan));
            return null;
        }
        this._seenProviders.set(tokenReference(token), true);
        var /** @type {?} */ transformedProviders = resolvedProvider.providers.map(function (provider) {
            var /** @type {?} */ transformedUseValue = provider.useValue;
            var /** @type {?} */ transformedUseExisting = ((provider.useExisting));
            var /** @type {?} */ transformedDeps = ((undefined));
            if (provider.useExisting != null) {
                var /** @type {?} */ existingDiDep = _this._getDependency({ token: provider.useExisting }, eager, resolvedProvider.sourceSpan);
                if (existingDiDep.token != null) {
                    transformedUseExisting = existingDiDep.token;
                }
                else {
                    transformedUseExisting = ((null));
                    transformedUseValue = existingDiDep.value;
                }
            }
            else if (provider.useFactory) {
                var /** @type {?} */ deps = provider.deps || provider.useFactory.diDeps;
                transformedDeps =
                    deps.map(function (dep) { return _this._getDependency(dep, eager, resolvedProvider.sourceSpan); });
            }
            else if (provider.useClass) {
                var /** @type {?} */ deps = provider.deps || provider.useClass.diDeps;
                transformedDeps =
                    deps.map(function (dep) { return _this._getDependency(dep, eager, resolvedProvider.sourceSpan); });
            }
            return _transformProvider(provider, {
                useExisting: transformedUseExisting,
                useValue: transformedUseValue,
                deps: transformedDeps
            });
        });
        transformedProviderAst =
            _transformProviderAst(resolvedProvider, { eager: eager, providers: transformedProviders });
        this._transformedProviders.set(tokenReference(token), transformedProviderAst);
        return transformedProviderAst;
    };
    /**
     * @param {?} dep
     * @param {?=} eager
     * @param {?=} requestorSourceSpan
     * @return {?}
     */
    NgModuleProviderAnalyzer.prototype._getDependency = function (dep, eager, requestorSourceSpan) {
        if (eager === void 0) { eager = false; }
        var /** @type {?} */ foundLocal = false;
        if (!dep.isSkipSelf && dep.token != null) {
            // access the injector
            if (tokenReference(dep.token) ===
                this.reflector.resolveExternalReference(Identifiers.Injector) ||
                tokenReference(dep.token) ===
                    this.reflector.resolveExternalReference(Identifiers.ComponentFactoryResolver)) {
                foundLocal = true;
                // access providers
            }
            else if (this._getOrCreateLocalProvider(dep.token, eager) != null) {
                foundLocal = true;
            }
        }
        var /** @type {?} */ result = dep;
        if (dep.isSelf && !foundLocal) {
            if (dep.isOptional) {
                result = { isValue: true, value: null };
            }
            else {
                this._errors.push(new ProviderError("No provider for " + tokenName(/** @type {?} */ ((dep.token))), requestorSourceSpan));
            }
        }
        return result;
    };
    return NgModuleProviderAnalyzer;
}());
/**
 * @param {?} provider
 * @param {?} __1
 * @return {?}
 */
function _transformProvider(provider, _a) {
    var useExisting = _a.useExisting, useValue = _a.useValue, deps = _a.deps;
    return {
        token: provider.token,
        useClass: provider.useClass,
        useExisting: useExisting,
        useFactory: provider.useFactory,
        useValue: useValue,
        deps: deps,
        multi: provider.multi
    };
}
/**
 * @param {?} provider
 * @param {?} __1
 * @return {?}
 */
function _transformProviderAst(provider, _a) {
    var eager = _a.eager, providers = _a.providers;
    return new ProviderAst(provider.token, provider.multiProvider, provider.eager || eager, providers, provider.providerType, provider.lifecycleHooks, provider.sourceSpan);
}
/**
 * @param {?} directives
 * @param {?} sourceSpan
 * @param {?} targetErrors
 * @return {?}
 */
function _resolveProvidersFromDirectives(directives, sourceSpan, targetErrors) {
    var /** @type {?} */ providersByToken = new Map();
    directives.forEach(function (directive) {
        var /** @type {?} */ dirProvider = { token: { identifier: directive.type }, useClass: directive.type };
        _resolveProviders([dirProvider], directive.isComponent ? ProviderAstType.Component : ProviderAstType.Directive, true, sourceSpan, targetErrors, providersByToken);
    });
    // Note: directives need to be able to overwrite providers of a component!
    var /** @type {?} */ directivesWithComponentFirst = directives.filter(function (dir) { return dir.isComponent; }).concat(directives.filter(function (dir) { return !dir.isComponent; }));
    directivesWithComponentFirst.forEach(function (directive) {
        _resolveProviders(directive.providers, ProviderAstType.PublicService, false, sourceSpan, targetErrors, providersByToken);
        _resolveProviders(directive.viewProviders, ProviderAstType.PrivateService, false, sourceSpan, targetErrors, providersByToken);
    });
    return providersByToken;
}
/**
 * @param {?} providers
 * @param {?} providerType
 * @param {?} eager
 * @param {?} sourceSpan
 * @param {?} targetErrors
 * @param {?} targetProvidersByToken
 * @return {?}
 */
function _resolveProviders(providers, providerType, eager, sourceSpan, targetErrors, targetProvidersByToken) {
    providers.forEach(function (provider) {
        var /** @type {?} */ resolvedProvider = targetProvidersByToken.get(tokenReference(provider.token));
        if (resolvedProvider != null && !!resolvedProvider.multiProvider !== !!provider.multi) {
            targetErrors.push(new ProviderError("Mixing multi and non multi provider is not possible for token " + tokenName(resolvedProvider.token), sourceSpan));
        }
        if (!resolvedProvider) {
            var /** @type {?} */ lifecycleHooks = provider.token.identifier &&
                ((provider.token.identifier)).lifecycleHooks ?
                ((provider.token.identifier)).lifecycleHooks :
                [];
            var /** @type {?} */ isUseValue = !(provider.useClass || provider.useExisting || provider.useFactory);
            resolvedProvider = new ProviderAst(provider.token, !!provider.multi, eager || isUseValue, [provider], providerType, lifecycleHooks, sourceSpan);
            targetProvidersByToken.set(tokenReference(provider.token), resolvedProvider);
        }
        else {
            if (!provider.multi) {
                resolvedProvider.providers.length = 0;
            }
            resolvedProvider.providers.push(provider);
        }
    });
}
/**
 * @param {?} component
 * @return {?}
 */
function _getViewQueries(component) {
    // Note: queries start with id 1 so we can use the number in a Bloom filter!
    var /** @type {?} */ viewQueryId = 1;
    var /** @type {?} */ viewQueries = new Map();
    if (component.viewQueries) {
        component.viewQueries.forEach(function (query) { return _addQueryToTokenMap(viewQueries, { meta: query, queryId: viewQueryId++ }); });
    }
    return viewQueries;
}
/**
 * @param {?} contentQueryStartId
 * @param {?} directives
 * @return {?}
 */
function _getContentQueries(contentQueryStartId, directives) {
    var /** @type {?} */ contentQueryId = contentQueryStartId;
    var /** @type {?} */ contentQueries = new Map();
    directives.forEach(function (directive, directiveIndex) {
        if (directive.queries) {
            directive.queries.forEach(function (query) { return _addQueryToTokenMap(contentQueries, { meta: query, queryId: contentQueryId++ }); });
        }
    });
    return contentQueries;
}
/**
 * @param {?} map
 * @param {?} query
 * @return {?}
 */
function _addQueryToTokenMap(map, query) {
    query.meta.selectors.forEach(function (token) {
        var /** @type {?} */ entry = map.get(tokenReference(token));
        if (!entry) {
            entry = [];
            map.set(tokenReference(token), entry);
        }
        entry.push(query);
    });
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @abstract
 */
var ElementSchemaRegistry = (function () {
    function ElementSchemaRegistry() {
    }
    /**
     * @abstract
     * @param {?} tagName
     * @param {?} propName
     * @param {?} schemaMetas
     * @return {?}
     */
    ElementSchemaRegistry.prototype.hasProperty = function (tagName, propName, schemaMetas) { };
    /**
     * @abstract
     * @param {?} tagName
     * @param {?} schemaMetas
     * @return {?}
     */
    ElementSchemaRegistry.prototype.hasElement = function (tagName, schemaMetas) { };
    /**
     * @abstract
     * @param {?} elementName
     * @param {?} propName
     * @param {?} isAttribute
     * @return {?}
     */
    ElementSchemaRegistry.prototype.securityContext = function (elementName, propName, isAttribute) { };
    /**
     * @abstract
     * @return {?}
     */
    ElementSchemaRegistry.prototype.allKnownElementNames = function () { };
    /**
     * @abstract
     * @param {?} propName
     * @return {?}
     */
    ElementSchemaRegistry.prototype.getMappedPropName = function (propName) { };
    /**
     * @abstract
     * @return {?}
     */
    ElementSchemaRegistry.prototype.getDefaultComponentElementName = function () { };
    /**
     * @abstract
     * @param {?} name
     * @return {?}
     */
    ElementSchemaRegistry.prototype.validateProperty = function (name) { };
    /**
     * @abstract
     * @param {?} name
     * @return {?}
     */
    ElementSchemaRegistry.prototype.validateAttribute = function (name) { };
    /**
     * @abstract
     * @param {?} propName
     * @return {?}
     */
    ElementSchemaRegistry.prototype.normalizeAnimationStyleProperty = function (propName) { };
    /**
     * @abstract
     * @param {?} camelCaseProp
     * @param {?} userProvidedProp
     * @param {?} val
     * @return {?}
     */
    ElementSchemaRegistry.prototype.normalizeAnimationStyleValue = function (camelCaseProp, userProvidedProp, val) { };
    return ElementSchemaRegistry;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var StyleWithImports = (function () {
    /**
     * @param {?} style
     * @param {?} styleUrls
     */
    function StyleWithImports(style$$1, styleUrls) {
        this.style = style$$1;
        this.styleUrls = styleUrls;
    }
    return StyleWithImports;
}());
/**
 * @param {?} url
 * @return {?}
 */
function isStyleUrlResolvable(url) {
    if (url == null || url.length === 0 || url[0] == '/')
        return false;
    var /** @type {?} */ schemeMatch = url.match(URL_WITH_SCHEMA_REGEXP);
    return schemeMatch === null || schemeMatch[1] == 'package' || schemeMatch[1] == 'asset';
}
/**
 * Rewrites stylesheets by resolving and removing the \@import urls that
 * are either relative or don't have a `package:` scheme
 * @param {?} resolver
 * @param {?} baseUrl
 * @param {?} cssText
 * @return {?}
 */
function extractStyleUrls(resolver, baseUrl, cssText) {
    var /** @type {?} */ foundUrls = [];
    var /** @type {?} */ modifiedCssText = cssText.replace(CSS_COMMENT_REGEXP, '').replace(CSS_IMPORT_REGEXP, function () {
        var m = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            m[_i] = arguments[_i];
        }
        var /** @type {?} */ url = m[1] || m[2];
        if (!isStyleUrlResolvable(url)) {
            // Do not attempt to resolve non-package absolute URLs with URI scheme
            return m[0];
        }
        foundUrls.push(resolver.resolve(baseUrl, url));
        return '';
    });
    return new StyleWithImports(modifiedCssText, foundUrls);
}
var CSS_IMPORT_REGEXP = /@import\s+(?:url\()?\s*(?:(?:['"]([^'"]*))|([^;\)\s]*))[^;]*;?/g;
var CSS_COMMENT_REGEXP = /\/\*[\s\S]+?\*\//g;
var URL_WITH_SCHEMA_REGEXP = /^([^:/?#]+):/;
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var PROPERTY_PARTS_SEPARATOR = '.';
var ATTRIBUTE_PREFIX = 'attr';
var CLASS_PREFIX = 'class';
var STYLE_PREFIX = 'style';
var ANIMATE_PROP_PREFIX = 'animate-';
var BoundPropertyType = {};
BoundPropertyType.DEFAULT = 0;
BoundPropertyType.LITERAL_ATTR = 1;
BoundPropertyType.ANIMATION = 2;
BoundPropertyType[BoundPropertyType.DEFAULT] = "DEFAULT";
BoundPropertyType[BoundPropertyType.LITERAL_ATTR] = "LITERAL_ATTR";
BoundPropertyType[BoundPropertyType.ANIMATION] = "ANIMATION";
/**
 * Represents a parsed property.
 */
var BoundProperty = (function () {
    /**
     * @param {?} name
     * @param {?} expression
     * @param {?} type
     * @param {?} sourceSpan
     */
    function BoundProperty(name, expression, type, sourceSpan) {
        this.name = name;
        this.expression = expression;
        this.type = type;
        this.sourceSpan = sourceSpan;
    }
    Object.defineProperty(BoundProperty.prototype, "isLiteral", {
        /**
         * @return {?}
         */
        get: function () { return this.type === BoundPropertyType.LITERAL_ATTR; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BoundProperty.prototype, "isAnimation", {
        /**
         * @return {?}
         */
        get: function () { return this.type === BoundPropertyType.ANIMATION; },
        enumerable: true,
        configurable: true
    });
    return BoundProperty;
}());
/**
 * Parses bindings in templates and in the directive host area.
 */
var BindingParser = (function () {
    /**
     * @param {?} _exprParser
     * @param {?} _interpolationConfig
     * @param {?} _schemaRegistry
     * @param {?} pipes
     * @param {?} _targetErrors
     */
    function BindingParser(_exprParser, _interpolationConfig, _schemaRegistry, pipes, _targetErrors) {
        var _this = this;
        this._exprParser = _exprParser;
        this._interpolationConfig = _interpolationConfig;
        this._schemaRegistry = _schemaRegistry;
        this._targetErrors = _targetErrors;
        this.pipesByName = new Map();
        this._usedPipes = new Map();
        pipes.forEach(function (pipe) { return _this.pipesByName.set(pipe.name, pipe); });
    }
    /**
     * @return {?}
     */
    BindingParser.prototype.getUsedPipes = function () { return Array.from(this._usedPipes.values()); };
    /**
     * @param {?} dirMeta
     * @param {?} elementSelector
     * @param {?} sourceSpan
     * @return {?}
     */
    BindingParser.prototype.createDirectiveHostPropertyAsts = function (dirMeta, elementSelector, sourceSpan) {
        var _this = this;
        if (dirMeta.hostProperties) {
            var /** @type {?} */ boundProps_1 = [];
            Object.keys(dirMeta.hostProperties).forEach(function (propName) {
                var /** @type {?} */ expression = dirMeta.hostProperties[propName];
                if (typeof expression === 'string') {
                    _this.parsePropertyBinding(propName, expression, true, sourceSpan, [], boundProps_1);
                }
                else {
                    _this._reportError("Value of the host property binding \"" + propName + "\" needs to be a string representing an expression but got \"" + expression + "\" (" + typeof expression + ")", sourceSpan);
                }
            });
            return boundProps_1.map(function (prop) { return _this.createElementPropertyAst(elementSelector, prop); });
        }
        return null;
    };
    /**
     * @param {?} dirMeta
     * @param {?} sourceSpan
     * @return {?}
     */
    BindingParser.prototype.createDirectiveHostEventAsts = function (dirMeta, sourceSpan) {
        var _this = this;
        if (dirMeta.hostListeners) {
            var /** @type {?} */ targetEventAsts_1 = [];
            Object.keys(dirMeta.hostListeners).forEach(function (propName) {
                var /** @type {?} */ expression = dirMeta.hostListeners[propName];
                if (typeof expression === 'string') {
                    _this.parseEvent(propName, expression, sourceSpan, [], targetEventAsts_1);
                }
                else {
                    _this._reportError("Value of the host listener \"" + propName + "\" needs to be a string representing an expression but got \"" + expression + "\" (" + typeof expression + ")", sourceSpan);
                }
            });
            return targetEventAsts_1;
        }
        return null;
    };
    /**
     * @param {?} value
     * @param {?} sourceSpan
     * @return {?}
     */
    BindingParser.prototype.parseInterpolation = function (value, sourceSpan) {
        var /** @type {?} */ sourceInfo = sourceSpan.start.toString();
        try {
            var /** @type {?} */ ast = ((this._exprParser.parseInterpolation(value, sourceInfo, this._interpolationConfig)));
            if (ast)
                this._reportExpressionParserErrors(ast.errors, sourceSpan);
            this._checkPipes(ast, sourceSpan);
            return ast;
        }
        catch (e) {
            this._reportError("" + e, sourceSpan);
            return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);
        }
    };
    /**
     * @param {?} prefixToken
     * @param {?} value
     * @param {?} sourceSpan
     * @param {?} targetMatchableAttrs
     * @param {?} targetProps
     * @param {?} targetVars
     * @return {?}
     */
    BindingParser.prototype.parseInlineTemplateBinding = function (prefixToken, value, sourceSpan, targetMatchableAttrs, targetProps, targetVars) {
        var /** @type {?} */ bindings = this._parseTemplateBindings(prefixToken, value, sourceSpan);
        for (var /** @type {?} */ i = 0; i < bindings.length; i++) {
            var /** @type {?} */ binding = bindings[i];
            if (binding.keyIsVar) {
                targetVars.push(new VariableAst(binding.key, binding.name, sourceSpan));
            }
            else if (binding.expression) {
                this._parsePropertyAst(binding.key, binding.expression, sourceSpan, targetMatchableAttrs, targetProps);
            }
            else {
                targetMatchableAttrs.push([binding.key, '']);
                this.parseLiteralAttr(binding.key, null, sourceSpan, targetMatchableAttrs, targetProps);
            }
        }
    };
    /**
     * @param {?} prefixToken
     * @param {?} value
     * @param {?} sourceSpan
     * @return {?}
     */
    BindingParser.prototype._parseTemplateBindings = function (prefixToken, value, sourceSpan) {
        var _this = this;
        var /** @type {?} */ sourceInfo = sourceSpan.start.toString();
        try {
            var /** @type {?} */ bindingsResult = this._exprParser.parseTemplateBindings(prefixToken, value, sourceInfo);
            this._reportExpressionParserErrors(bindingsResult.errors, sourceSpan);
            bindingsResult.templateBindings.forEach(function (binding) {
                if (binding.expression) {
                    _this._checkPipes(binding.expression, sourceSpan);
                }
            });
            bindingsResult.warnings.forEach(function (warning) { _this._reportError(warning, sourceSpan, ParseErrorLevel.WARNING); });
            return bindingsResult.templateBindings;
        }
        catch (e) {
            this._reportError("" + e, sourceSpan);
            return [];
        }
    };
    /**
     * @param {?} name
     * @param {?} value
     * @param {?} sourceSpan
     * @param {?} targetMatchableAttrs
     * @param {?} targetProps
     * @return {?}
     */
    BindingParser.prototype.parseLiteralAttr = function (name, value, sourceSpan, targetMatchableAttrs, targetProps) {
        if (_isAnimationLabel(name)) {
            name = name.substring(1);
            if (value) {
                this._reportError("Assigning animation triggers via @prop=\"exp\" attributes with an expression is invalid." +
                    " Use property bindings (e.g. [@prop]=\"exp\") or use an attribute without a value (e.g. @prop) instead.", sourceSpan, ParseErrorLevel.ERROR);
            }
            this._parseAnimation(name, value, sourceSpan, targetMatchableAttrs, targetProps);
        }
        else {
            targetProps.push(new BoundProperty(name, this._exprParser.wrapLiteralPrimitive(value, ''), BoundPropertyType.LITERAL_ATTR, sourceSpan));
        }
    };
    /**
     * @param {?} name
     * @param {?} expression
     * @param {?} isHost
     * @param {?} sourceSpan
     * @param {?} targetMatchableAttrs
     * @param {?} targetProps
     * @return {?}
     */
    BindingParser.prototype.parsePropertyBinding = function (name, expression, isHost, sourceSpan, targetMatchableAttrs, targetProps) {
        var /** @type {?} */ isAnimationProp = false;
        if (name.startsWith(ANIMATE_PROP_PREFIX)) {
            isAnimationProp = true;
            name = name.substring(ANIMATE_PROP_PREFIX.length);
        }
        else if (_isAnimationLabel(name)) {
            isAnimationProp = true;
            name = name.substring(1);
        }
        if (isAnimationProp) {
            this._parseAnimation(name, expression, sourceSpan, targetMatchableAttrs, targetProps);
        }
        else {
            this._parsePropertyAst(name, this._parseBinding(expression, isHost, sourceSpan), sourceSpan, targetMatchableAttrs, targetProps);
        }
    };
    /**
     * @param {?} name
     * @param {?} value
     * @param {?} sourceSpan
     * @param {?} targetMatchableAttrs
     * @param {?} targetProps
     * @return {?}
     */
    BindingParser.prototype.parsePropertyInterpolation = function (name, value, sourceSpan, targetMatchableAttrs, targetProps) {
        var /** @type {?} */ expr = this.parseInterpolation(value, sourceSpan);
        if (expr) {
            this._parsePropertyAst(name, expr, sourceSpan, targetMatchableAttrs, targetProps);
            return true;
        }
        return false;
    };
    /**
     * @param {?} name
     * @param {?} ast
     * @param {?} sourceSpan
     * @param {?} targetMatchableAttrs
     * @param {?} targetProps
     * @return {?}
     */
    BindingParser.prototype._parsePropertyAst = function (name, ast, sourceSpan, targetMatchableAttrs, targetProps) {
        targetMatchableAttrs.push([name, /** @type {?} */ ((ast.source))]);
        targetProps.push(new BoundProperty(name, ast, BoundPropertyType.DEFAULT, sourceSpan));
    };
    /**
     * @param {?} name
     * @param {?} expression
     * @param {?} sourceSpan
     * @param {?} targetMatchableAttrs
     * @param {?} targetProps
     * @return {?}
     */
    BindingParser.prototype._parseAnimation = function (name, expression, sourceSpan, targetMatchableAttrs, targetProps) {
        // This will occur when a @trigger is not paired with an expression.
        // For animations it is valid to not have an expression since */void
        // states will be applied by angular when the element is attached/detached
        var /** @type {?} */ ast = this._parseBinding(expression || 'undefined', false, sourceSpan);
        targetMatchableAttrs.push([name, /** @type {?} */ ((ast.source))]);
        targetProps.push(new BoundProperty(name, ast, BoundPropertyType.ANIMATION, sourceSpan));
    };
    /**
     * @param {?} value
     * @param {?} isHostBinding
     * @param {?} sourceSpan
     * @return {?}
     */
    BindingParser.prototype._parseBinding = function (value, isHostBinding, sourceSpan) {
        var /** @type {?} */ sourceInfo = sourceSpan.start.toString();
        try {
            var /** @type {?} */ ast = isHostBinding ?
                this._exprParser.parseSimpleBinding(value, sourceInfo, this._interpolationConfig) :
                this._exprParser.parseBinding(value, sourceInfo, this._interpolationConfig);
            if (ast)
                this._reportExpressionParserErrors(ast.errors, sourceSpan);
            this._checkPipes(ast, sourceSpan);
            return ast;
        }
        catch (e) {
            this._reportError("" + e, sourceSpan);
            return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);
        }
    };
    /**
     * @param {?} elementSelector
     * @param {?} boundProp
     * @return {?}
     */
    BindingParser.prototype.createElementPropertyAst = function (elementSelector, boundProp) {
        if (boundProp.isAnimation) {
            return new BoundElementPropertyAst(boundProp.name, PropertyBindingType.Animation, __WEBPACK_IMPORTED_MODULE_1__angular_core__["_3" /* SecurityContext */].NONE, boundProp.expression, null, boundProp.sourceSpan);
        }
        var /** @type {?} */ unit = null;
        var /** @type {?} */ bindingType = ((undefined));
        var /** @type {?} */ boundPropertyName = null;
        var /** @type {?} */ parts = boundProp.name.split(PROPERTY_PARTS_SEPARATOR);
        var /** @type {?} */ securityContexts = ((undefined));
        // Check check for special cases (prefix style, attr, class)
        if (parts.length > 1) {
            if (parts[0] == ATTRIBUTE_PREFIX) {
                boundPropertyName = parts[1];
                this._validatePropertyOrAttributeName(boundPropertyName, boundProp.sourceSpan, true);
                securityContexts = calcPossibleSecurityContexts(this._schemaRegistry, elementSelector, boundPropertyName, true);
                var /** @type {?} */ nsSeparatorIdx = boundPropertyName.indexOf(':');
                if (nsSeparatorIdx > -1) {
                    var /** @type {?} */ ns = boundPropertyName.substring(0, nsSeparatorIdx);
                    var /** @type {?} */ name = boundPropertyName.substring(nsSeparatorIdx + 1);
                    boundPropertyName = mergeNsAndName(ns, name);
                }
                bindingType = PropertyBindingType.Attribute;
            }
            else if (parts[0] == CLASS_PREFIX) {
                boundPropertyName = parts[1];
                bindingType = PropertyBindingType.Class;
                securityContexts = [__WEBPACK_IMPORTED_MODULE_1__angular_core__["_3" /* SecurityContext */].NONE];
            }
            else if (parts[0] == STYLE_PREFIX) {
                unit = parts.length > 2 ? parts[2] : null;
                boundPropertyName = parts[1];
                bindingType = PropertyBindingType.Style;
                securityContexts = [__WEBPACK_IMPORTED_MODULE_1__angular_core__["_3" /* SecurityContext */].STYLE];
            }
        }
        // If not a special case, use the full property name
        if (boundPropertyName === null) {
            boundPropertyName = this._schemaRegistry.getMappedPropName(boundProp.name);
            securityContexts = calcPossibleSecurityContexts(this._schemaRegistry, elementSelector, boundPropertyName, false);
            bindingType = PropertyBindingType.Property;
            this._validatePropertyOrAttributeName(boundPropertyName, boundProp.sourceSpan, false);
        }
        return new BoundElementPropertyAst(boundPropertyName, bindingType, securityContexts[0], boundProp.expression, unit, boundProp.sourceSpan);
    };
    /**
     * @param {?} name
     * @param {?} expression
     * @param {?} sourceSpan
     * @param {?} targetMatchableAttrs
     * @param {?} targetEvents
     * @return {?}
     */
    BindingParser.prototype.parseEvent = function (name, expression, sourceSpan, targetMatchableAttrs, targetEvents) {
        if (_isAnimationLabel(name)) {
            name = name.substr(1);
            this._parseAnimationEvent(name, expression, sourceSpan, targetEvents);
        }
        else {
            this._parseEvent(name, expression, sourceSpan, targetMatchableAttrs, targetEvents);
        }
    };
    /**
     * @param {?} name
     * @param {?} expression
     * @param {?} sourceSpan
     * @param {?} targetEvents
     * @return {?}
     */
    BindingParser.prototype._parseAnimationEvent = function (name, expression, sourceSpan, targetEvents) {
        var /** @type {?} */ matches = splitAtPeriod(name, [name, '']);
        var /** @type {?} */ eventName = matches[0];
        var /** @type {?} */ phase = matches[1].toLowerCase();
        if (phase) {
            switch (phase) {
                case 'start':
                case 'done':
                    var /** @type {?} */ ast = this._parseAction(expression, sourceSpan);
                    targetEvents.push(new BoundEventAst(eventName, null, phase, ast, sourceSpan));
                    break;
                default:
                    this._reportError("The provided animation output phase value \"" + phase + "\" for \"@" + eventName + "\" is not supported (use start or done)", sourceSpan);
                    break;
            }
        }
        else {
            this._reportError("The animation trigger output event (@" + eventName + ") is missing its phase value name (start or done are currently supported)", sourceSpan);
        }
    };
    /**
     * @param {?} name
     * @param {?} expression
     * @param {?} sourceSpan
     * @param {?} targetMatchableAttrs
     * @param {?} targetEvents
     * @return {?}
     */
    BindingParser.prototype._parseEvent = function (name, expression, sourceSpan, targetMatchableAttrs, targetEvents) {
        // long format: 'target: eventName'
        var _a = splitAtColon(name, [/** @type {?} */ ((null)), name]), target = _a[0], eventName = _a[1];
        var /** @type {?} */ ast = this._parseAction(expression, sourceSpan);
        targetMatchableAttrs.push([/** @type {?} */ ((name)), /** @type {?} */ ((ast.source))]);
        targetEvents.push(new BoundEventAst(eventName, target, null, ast, sourceSpan));
        // Don't detect directives for event names for now,
        // so don't add the event name to the matchableAttrs
    };
    /**
     * @param {?} value
     * @param {?} sourceSpan
     * @return {?}
     */
    BindingParser.prototype._parseAction = function (value, sourceSpan) {
        var /** @type {?} */ sourceInfo = sourceSpan.start.toString();
        try {
            var /** @type {?} */ ast = this._exprParser.parseAction(value, sourceInfo, this._interpolationConfig);
            if (ast) {
                this._reportExpressionParserErrors(ast.errors, sourceSpan);
            }
            if (!ast || ast.ast instanceof EmptyExpr) {
                this._reportError("Empty expressions are not allowed", sourceSpan);
                return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);
            }
            this._checkPipes(ast, sourceSpan);
            return ast;
        }
        catch (e) {
            this._reportError("" + e, sourceSpan);
            return this._exprParser.wrapLiteralPrimitive('ERROR', sourceInfo);
        }
    };
    /**
     * @param {?} message
     * @param {?} sourceSpan
     * @param {?=} level
     * @return {?}
     */
    BindingParser.prototype._reportError = function (message, sourceSpan, level) {
        if (level === void 0) { level = ParseErrorLevel.ERROR; }
        this._targetErrors.push(new ParseError(sourceSpan, message, level));
    };
    /**
     * @param {?} errors
     * @param {?} sourceSpan
     * @return {?}
     */
    BindingParser.prototype._reportExpressionParserErrors = function (errors, sourceSpan) {
        for (var _i = 0, errors_1 = errors; _i < errors_1.length; _i++) {
            var error = errors_1[_i];
            this._reportError(error.message, sourceSpan);
        }
    };
    /**
     * @param {?} ast
     * @param {?} sourceSpan
     * @return {?}
     */
    BindingParser.prototype._checkPipes = function (ast, sourceSpan) {
        var _this = this;
        if (ast) {
            var /** @type {?} */ collector = new PipeCollector();
            ast.visit(collector);
            collector.pipes.forEach(function (ast, pipeName) {
                var /** @type {?} */ pipeMeta = _this.pipesByName.get(pipeName);
                if (!pipeMeta) {
                    _this._reportError("The pipe '" + pipeName + "' could not be found", new ParseSourceSpan(sourceSpan.start.moveBy(ast.span.start), sourceSpan.start.moveBy(ast.span.end)));
                }
                else {
                    _this._usedPipes.set(pipeName, pipeMeta);
                }
            });
        }
    };
    /**
     * @param {?} propName the name of the property / attribute
     * @param {?} sourceSpan
     * @param {?} isAttr true when binding to an attribute
     * @return {?}
     */
    BindingParser.prototype._validatePropertyOrAttributeName = function (propName, sourceSpan, isAttr) {
        var /** @type {?} */ report = isAttr ? this._schemaRegistry.validateAttribute(propName) :
            this._schemaRegistry.validateProperty(propName);
        if (report.error) {
            this._reportError(/** @type {?} */ ((report.msg)), sourceSpan, ParseErrorLevel.ERROR);
        }
    };
    return BindingParser;
}());
var PipeCollector = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](PipeCollector, _super);
    function PipeCollector() {
        var _this = _super.apply(this, arguments) || this;
        _this.pipes = new Map();
        return _this;
    }
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    PipeCollector.prototype.visitPipe = function (ast, context) {
        this.pipes.set(ast.name, ast);
        ast.exp.visit(this);
        this.visitAll(ast.args, context);
        return null;
    };
    return PipeCollector;
}(RecursiveAstVisitor));
/**
 * @param {?} name
 * @return {?}
 */
function _isAnimationLabel(name) {
    return name[0] == '@';
}
/**
 * @param {?} registry
 * @param {?} selector
 * @param {?} propName
 * @param {?} isAttribute
 * @return {?}
 */
function calcPossibleSecurityContexts(registry, selector, propName, isAttribute) {
    var /** @type {?} */ ctxs = [];
    CssSelector.parse(selector).forEach(function (selector) {
        var /** @type {?} */ elementNames = selector.element ? [selector.element] : registry.allKnownElementNames();
        var /** @type {?} */ notElementNames = new Set(selector.notSelectors.filter(function (selector) { return selector.isElementSelector(); })
            .map(function (selector) { return selector.element; }));
        var /** @type {?} */ possibleElementNames = elementNames.filter(function (elementName) { return !notElementNames.has(elementName); });
        ctxs.push.apply(ctxs, possibleElementNames.map(function (elementName) { return registry.securityContext(elementName, propName, isAttribute); }));
    });
    return ctxs.length === 0 ? [__WEBPACK_IMPORTED_MODULE_1__angular_core__["_3" /* SecurityContext */].NONE] : Array.from(new Set(ctxs)).sort();
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var NG_CONTENT_SELECT_ATTR = 'select';
var LINK_ELEMENT = 'link';
var LINK_STYLE_REL_ATTR = 'rel';
var LINK_STYLE_HREF_ATTR = 'href';
var LINK_STYLE_REL_VALUE = 'stylesheet';
var STYLE_ELEMENT = 'style';
var SCRIPT_ELEMENT = 'script';
var NG_NON_BINDABLE_ATTR = 'ngNonBindable';
var NG_PROJECT_AS = 'ngProjectAs';
/**
 * @param {?} ast
 * @return {?}
 */
function preparseElement(ast) {
    var /** @type {?} */ selectAttr = ((null));
    var /** @type {?} */ hrefAttr = ((null));
    var /** @type {?} */ relAttr = ((null));
    var /** @type {?} */ nonBindable = false;
    var /** @type {?} */ projectAs = ((null));
    ast.attrs.forEach(function (attr) {
        var /** @type {?} */ lcAttrName = attr.name.toLowerCase();
        if (lcAttrName == NG_CONTENT_SELECT_ATTR) {
            selectAttr = attr.value;
        }
        else if (lcAttrName == LINK_STYLE_HREF_ATTR) {
            hrefAttr = attr.value;
        }
        else if (lcAttrName == LINK_STYLE_REL_ATTR) {
            relAttr = attr.value;
        }
        else if (attr.name == NG_NON_BINDABLE_ATTR) {
            nonBindable = true;
        }
        else if (attr.name == NG_PROJECT_AS) {
            if (attr.value.length > 0) {
                projectAs = attr.value;
            }
        }
    });
    selectAttr = normalizeNgContentSelect(selectAttr);
    var /** @type {?} */ nodeName = ast.name.toLowerCase();
    var /** @type {?} */ type = PreparsedElementType.OTHER;
    if (isNgContent(nodeName)) {
        type = PreparsedElementType.NG_CONTENT;
    }
    else if (nodeName == STYLE_ELEMENT) {
        type = PreparsedElementType.STYLE;
    }
    else if (nodeName == SCRIPT_ELEMENT) {
        type = PreparsedElementType.SCRIPT;
    }
    else if (nodeName == LINK_ELEMENT && relAttr == LINK_STYLE_REL_VALUE) {
        type = PreparsedElementType.STYLESHEET;
    }
    return new PreparsedElement(type, selectAttr, hrefAttr, nonBindable, projectAs);
}
var PreparsedElementType = {};
PreparsedElementType.NG_CONTENT = 0;
PreparsedElementType.STYLE = 1;
PreparsedElementType.STYLESHEET = 2;
PreparsedElementType.SCRIPT = 3;
PreparsedElementType.OTHER = 4;
PreparsedElementType[PreparsedElementType.NG_CONTENT] = "NG_CONTENT";
PreparsedElementType[PreparsedElementType.STYLE] = "STYLE";
PreparsedElementType[PreparsedElementType.STYLESHEET] = "STYLESHEET";
PreparsedElementType[PreparsedElementType.SCRIPT] = "SCRIPT";
PreparsedElementType[PreparsedElementType.OTHER] = "OTHER";
var PreparsedElement = (function () {
    /**
     * @param {?} type
     * @param {?} selectAttr
     * @param {?} hrefAttr
     * @param {?} nonBindable
     * @param {?} projectAs
     */
    function PreparsedElement(type, selectAttr, hrefAttr, nonBindable, projectAs) {
        this.type = type;
        this.selectAttr = selectAttr;
        this.hrefAttr = hrefAttr;
        this.nonBindable = nonBindable;
        this.projectAs = projectAs;
    }
    return PreparsedElement;
}());
/**
 * @param {?} selectAttr
 * @return {?}
 */
function normalizeNgContentSelect(selectAttr) {
    if (selectAttr === null || selectAttr.length === 0) {
        return '*';
    }
    return selectAttr;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var BIND_NAME_REGEXP = /^(?:(?:(?:(bind-)|(let-)|(ref-|#)|(on-)|(bindon-)|(@))(.+))|\[\(([^\)]+)\)\]|\[([^\]]+)\]|\(([^\)]+)\))$/;
// Group 1 = "bind-"
var KW_BIND_IDX = 1;
// Group 2 = "let-"
var KW_LET_IDX = 2;
// Group 3 = "ref-/#"
var KW_REF_IDX = 3;
// Group 4 = "on-"
var KW_ON_IDX = 4;
// Group 5 = "bindon-"
var KW_BINDON_IDX = 5;
// Group 6 = "@"
var KW_AT_IDX = 6;
// Group 7 = the identifier after "bind-", "let-", "ref-/#", "on-", "bindon-" or "@"
var IDENT_KW_IDX = 7;
// Group 8 = identifier inside [()]
var IDENT_BANANA_BOX_IDX = 8;
// Group 9 = identifier inside []
var IDENT_PROPERTY_IDX = 9;
// Group 10 = identifier inside ()
var IDENT_EVENT_IDX = 10;
// deprecated in 4.x
var TEMPLATE_ELEMENT = 'template';
// deprecated in 4.x
var TEMPLATE_ATTR = 'template';
var TEMPLATE_ATTR_PREFIX = '*';
var CLASS_ATTR = 'class';
var TEXT_CSS_SELECTOR = CssSelector.parse('*')[0];
var TEMPLATE_ELEMENT_DEPRECATION_WARNING = 'The <template> element is deprecated. Use <ng-template> instead';
var TEMPLATE_ATTR_DEPRECATION_WARNING = 'The template attribute is deprecated. Use an ng-template element instead.';
var warningCounts = {};
/**
 * @param {?} warnings
 * @return {?}
 */
function warnOnlyOnce(warnings) {
    return function (error) {
        if (warnings.indexOf(error.msg) !== -1) {
            warningCounts[error.msg] = (warningCounts[error.msg] || 0) + 1;
            return warningCounts[error.msg] <= 1;
        }
        return true;
    };
}
/**
 * Provides an array of {\@link TemplateAstVisitor}s which will be used to transform
 * parsed templates before compilation is invoked, allowing custom expression syntax
 * and other advanced transformations.
 *
 * This is currently an internal-only feature and not meant for general use.
 */
var TEMPLATE_TRANSFORMS = new __WEBPACK_IMPORTED_MODULE_1__angular_core__["C" /* InjectionToken */]('TemplateTransforms');
var TemplateParseError = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](TemplateParseError, _super);
    /**
     * @param {?} message
     * @param {?} span
     * @param {?} level
     */
    function TemplateParseError(message, span, level) {
        return _super.call(this, span, message, level) || this;
    }
    return TemplateParseError;
}(ParseError));
var TemplateParseResult = (function () {
    /**
     * @param {?=} templateAst
     * @param {?=} usedPipes
     * @param {?=} errors
     */
    function TemplateParseResult(templateAst, usedPipes, errors) {
        this.templateAst = templateAst;
        this.usedPipes = usedPipes;
        this.errors = errors;
    }
    return TemplateParseResult;
}());
var TemplateParser = (function () {
    /**
     * @param {?} _config
     * @param {?} _reflector
     * @param {?} _exprParser
     * @param {?} _schemaRegistry
     * @param {?} _htmlParser
     * @param {?} _console
     * @param {?} transforms
     */
    function TemplateParser(_config, _reflector, _exprParser, _schemaRegistry, _htmlParser, _console, transforms) {
        this._config = _config;
        this._reflector = _reflector;
        this._exprParser = _exprParser;
        this._schemaRegistry = _schemaRegistry;
        this._htmlParser = _htmlParser;
        this._console = _console;
        this.transforms = transforms;
    }
    /**
     * @param {?} component
     * @param {?} template
     * @param {?} directives
     * @param {?} pipes
     * @param {?} schemas
     * @param {?} templateUrl
     * @param {?} preserveWhitespaces
     * @return {?}
     */
    TemplateParser.prototype.parse = function (component, template, directives, pipes, schemas, templateUrl, preserveWhitespaces) {
        var /** @type {?} */ result = this.tryParse(component, template, directives, pipes, schemas, templateUrl, preserveWhitespaces);
        var /** @type {?} */ warnings = ((result.errors)).filter(function (error) { return error.level === ParseErrorLevel.WARNING; })
            .filter(warnOnlyOnce([TEMPLATE_ATTR_DEPRECATION_WARNING, TEMPLATE_ELEMENT_DEPRECATION_WARNING]));
        var /** @type {?} */ errors = ((result.errors)).filter(function (error) { return error.level === ParseErrorLevel.ERROR; });
        if (warnings.length > 0) {
            this._console.warn("Template parse warnings:\n" + warnings.join('\n'));
        }
        if (errors.length > 0) {
            var /** @type {?} */ errorString = errors.join('\n');
            throw syntaxError("Template parse errors:\n" + errorString, errors);
        }
        return { template: /** @type {?} */ ((result.templateAst)), pipes: /** @type {?} */ ((result.usedPipes)) };
    };
    /**
     * @param {?} component
     * @param {?} template
     * @param {?} directives
     * @param {?} pipes
     * @param {?} schemas
     * @param {?} templateUrl
     * @param {?} preserveWhitespaces
     * @return {?}
     */
    TemplateParser.prototype.tryParse = function (component, template, directives, pipes, schemas, templateUrl, preserveWhitespaces) {
        var /** @type {?} */ htmlParseResult = ((this._htmlParser)).parse(template, templateUrl, true, this.getInterpolationConfig(component));
        if (!preserveWhitespaces) {
            htmlParseResult = removeWhitespaces(htmlParseResult);
        }
        return this.tryParseHtml(this.expandHtml(htmlParseResult), component, directives, pipes, schemas);
    };
    /**
     * @param {?} htmlAstWithErrors
     * @param {?} component
     * @param {?} directives
     * @param {?} pipes
     * @param {?} schemas
     * @return {?}
     */
    TemplateParser.prototype.tryParseHtml = function (htmlAstWithErrors, component, directives, pipes, schemas) {
        var /** @type {?} */ result;
        var /** @type {?} */ errors = htmlAstWithErrors.errors;
        var /** @type {?} */ usedPipes = [];
        if (htmlAstWithErrors.rootNodes.length > 0) {
            var /** @type {?} */ uniqDirectives = removeSummaryDuplicates(directives);
            var /** @type {?} */ uniqPipes = removeSummaryDuplicates(pipes);
            var /** @type {?} */ providerViewContext = new ProviderViewContext(this._reflector, component);
            var /** @type {?} */ interpolationConfig = ((undefined));
            if (component.template && component.template.interpolation) {
                interpolationConfig = {
                    start: component.template.interpolation[0],
                    end: component.template.interpolation[1]
                };
            }
            var /** @type {?} */ bindingParser = new BindingParser(this._exprParser, /** @type {?} */ ((interpolationConfig)), this._schemaRegistry, uniqPipes, errors);
            var /** @type {?} */ parseVisitor = new TemplateParseVisitor(this._reflector, this._config, providerViewContext, uniqDirectives, bindingParser, this._schemaRegistry, schemas, errors);
            result = visitAll(parseVisitor, htmlAstWithErrors.rootNodes, EMPTY_ELEMENT_CONTEXT);
            errors.push.apply(errors, providerViewContext.errors);
            usedPipes.push.apply(usedPipes, bindingParser.getUsedPipes());
        }
        else {
            result = [];
        }
        this._assertNoReferenceDuplicationOnTemplate(result, errors);
        if (errors.length > 0) {
            return new TemplateParseResult(result, usedPipes, errors);
        }
        if (this.transforms) {
            this.transforms.forEach(function (transform) { result = templateVisitAll(transform, result); });
        }
        return new TemplateParseResult(result, usedPipes, errors);
    };
    /**
     * @param {?} htmlAstWithErrors
     * @param {?=} forced
     * @return {?}
     */
    TemplateParser.prototype.expandHtml = function (htmlAstWithErrors, forced) {
        if (forced === void 0) { forced = false; }
        var /** @type {?} */ errors = htmlAstWithErrors.errors;
        if (errors.length == 0 || forced) {
            // Transform ICU messages to angular directives
            var /** @type {?} */ expandedHtmlAst = expandNodes(htmlAstWithErrors.rootNodes);
            errors.push.apply(errors, expandedHtmlAst.errors);
            htmlAstWithErrors = new ParseTreeResult(expandedHtmlAst.nodes, errors);
        }
        return htmlAstWithErrors;
    };
    /**
     * @param {?} component
     * @return {?}
     */
    TemplateParser.prototype.getInterpolationConfig = function (component) {
        if (component.template) {
            return InterpolationConfig.fromArray(component.template.interpolation);
        }
        return undefined;
    };
    /**
     * \@internal
     * @param {?} result
     * @param {?} errors
     * @return {?}
     */
    TemplateParser.prototype._assertNoReferenceDuplicationOnTemplate = function (result, errors) {
        var /** @type {?} */ existingReferences = [];
        result.filter(function (element) { return !!((element)).references; })
            .forEach(function (element) { return ((element)).references.forEach(function (reference) {
            var /** @type {?} */ name = reference.name;
            if (existingReferences.indexOf(name) < 0) {
                existingReferences.push(name);
            }
            else {
                var /** @type {?} */ error = new TemplateParseError("Reference \"#" + name + "\" is defined several times", reference.sourceSpan, ParseErrorLevel.ERROR);
                errors.push(error);
            }
        }); });
    };
    return TemplateParser;
}());
TemplateParser.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
TemplateParser.ctorParameters = function () { return [
    { type: CompilerConfig, },
    { type: CompileReflector, },
    { type: Parser, },
    { type: ElementSchemaRegistry, },
    { type: I18NHtmlParser, },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_33" /* Console */], },
    { type: Array, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["Q" /* Optional */] }, { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */], args: [TEMPLATE_TRANSFORMS,] },] },
]; };
var TemplateParseVisitor = (function () {
    /**
     * @param {?} reflector
     * @param {?} config
     * @param {?} providerViewContext
     * @param {?} directives
     * @param {?} _bindingParser
     * @param {?} _schemaRegistry
     * @param {?} _schemas
     * @param {?} _targetErrors
     */
    function TemplateParseVisitor(reflector, config, providerViewContext, directives, _bindingParser, _schemaRegistry, _schemas, _targetErrors) {
        var _this = this;
        this.reflector = reflector;
        this.config = config;
        this.providerViewContext = providerViewContext;
        this._bindingParser = _bindingParser;
        this._schemaRegistry = _schemaRegistry;
        this._schemas = _schemas;
        this._targetErrors = _targetErrors;
        this.selectorMatcher = new SelectorMatcher();
        this.directivesIndex = new Map();
        this.ngContentCount = 0;
        // Note: queries start with id 1 so we can use the number in a Bloom filter!
        this.contentQueryStartId = providerViewContext.component.viewQueries.length + 1;
        directives.forEach(function (directive, index) {
            var selector = CssSelector.parse(directive.selector);
            _this.selectorMatcher.addSelectables(selector, directive);
            _this.directivesIndex.set(directive, index);
        });
    }
    /**
     * @param {?} expansion
     * @param {?} context
     * @return {?}
     */
    TemplateParseVisitor.prototype.visitExpansion = function (expansion, context) { return null; };
    /**
     * @param {?} expansionCase
     * @param {?} context
     * @return {?}
     */
    TemplateParseVisitor.prototype.visitExpansionCase = function (expansionCase, context) { return null; };
    /**
     * @param {?} text
     * @param {?} parent
     * @return {?}
     */
    TemplateParseVisitor.prototype.visitText = function (text, parent) {
        var /** @type {?} */ ngContentIndex = ((parent.findNgContentIndex(TEXT_CSS_SELECTOR)));
        var /** @type {?} */ valueNoNgsp = replaceNgsp(text.value);
        var /** @type {?} */ expr = this._bindingParser.parseInterpolation(valueNoNgsp, /** @type {?} */ ((text.sourceSpan)));
        return expr ? new BoundTextAst(expr, ngContentIndex, /** @type {?} */ ((text.sourceSpan))) :
            new TextAst(valueNoNgsp, ngContentIndex, /** @type {?} */ ((text.sourceSpan)));
    };
    /**
     * @param {?} attribute
     * @param {?} context
     * @return {?}
     */
    TemplateParseVisitor.prototype.visitAttribute = function (attribute, context) {
        return new AttrAst(attribute.name, attribute.value, attribute.sourceSpan);
    };
    /**
     * @param {?} comment
     * @param {?} context
     * @return {?}
     */
    TemplateParseVisitor.prototype.visitComment = function (comment, context) { return null; };
    /**
     * @param {?} element
     * @param {?} parent
     * @return {?}
     */
    TemplateParseVisitor.prototype.visitElement = function (element, parent) {
        var _this = this;
        var /** @type {?} */ queryStartIndex = this.contentQueryStartId;
        var /** @type {?} */ nodeName = element.name;
        var /** @type {?} */ preparsedElement = preparseElement(element);
        if (preparsedElement.type === PreparsedElementType.SCRIPT ||
            preparsedElement.type === PreparsedElementType.STYLE) {
            // Skipping <script> for security reasons
            // Skipping <style> as we already processed them
            // in the StyleCompiler
            return null;
        }
        if (preparsedElement.type === PreparsedElementType.STYLESHEET &&
            isStyleUrlResolvable(preparsedElement.hrefAttr)) {
            // Skipping stylesheets with either relative urls or package scheme as we already processed
            // them in the StyleCompiler
            return null;
        }
        var /** @type {?} */ matchableAttrs = [];
        var /** @type {?} */ elementOrDirectiveProps = [];
        var /** @type {?} */ elementOrDirectiveRefs = [];
        var /** @type {?} */ elementVars = [];
        var /** @type {?} */ events = [];
        var /** @type {?} */ templateElementOrDirectiveProps = [];
        var /** @type {?} */ templateMatchableAttrs = [];
        var /** @type {?} */ templateElementVars = [];
        var /** @type {?} */ hasInlineTemplates = false;
        var /** @type {?} */ attrs = [];
        var /** @type {?} */ isTemplateElement = isTemplate(element, this.config.enableLegacyTemplate, function (m, span) { return _this._reportError(m, span, ParseErrorLevel.WARNING); });
        element.attrs.forEach(function (attr) {
            var /** @type {?} */ hasBinding = _this._parseAttr(isTemplateElement, attr, matchableAttrs, elementOrDirectiveProps, events, elementOrDirectiveRefs, elementVars);
            var /** @type {?} */ templateBindingsSource;
            var /** @type {?} */ prefixToken;
            var /** @type {?} */ normalizedName = _this._normalizeAttributeName(attr.name);
            if (_this.config.enableLegacyTemplate && normalizedName == TEMPLATE_ATTR) {
                _this._reportError(TEMPLATE_ATTR_DEPRECATION_WARNING, attr.sourceSpan, ParseErrorLevel.WARNING);
                templateBindingsSource = attr.value;
            }
            else if (normalizedName.startsWith(TEMPLATE_ATTR_PREFIX)) {
                templateBindingsSource = attr.value;
                prefixToken = normalizedName.substring(TEMPLATE_ATTR_PREFIX.length) + ':';
            }
            var /** @type {?} */ hasTemplateBinding = templateBindingsSource != null;
            if (hasTemplateBinding) {
                if (hasInlineTemplates) {
                    _this._reportError("Can't have multiple template bindings on one element. Use only one attribute named 'template' or prefixed with *", attr.sourceSpan);
                }
                hasInlineTemplates = true;
                _this._bindingParser.parseInlineTemplateBinding(/** @type {?} */ ((prefixToken)), /** @type {?} */ ((templateBindingsSource)), attr.sourceSpan, templateMatchableAttrs, templateElementOrDirectiveProps, templateElementVars);
            }
            if (!hasBinding && !hasTemplateBinding) {
                // don't include the bindings as attributes as well in the AST
                attrs.push(_this.visitAttribute(attr, null));
                matchableAttrs.push([attr.name, attr.value]);
            }
        });
        var /** @type {?} */ elementCssSelector = createElementCssSelector(nodeName, matchableAttrs);
        var _a = this._parseDirectives(this.selectorMatcher, elementCssSelector), directiveMetas = _a.directives, matchElement = _a.matchElement;
        var /** @type {?} */ references = [];
        var /** @type {?} */ boundDirectivePropNames = new Set();
        var /** @type {?} */ directiveAsts = this._createDirectiveAsts(isTemplateElement, element.name, directiveMetas, elementOrDirectiveProps, elementOrDirectiveRefs, /** @type {?} */ ((element.sourceSpan)), references, boundDirectivePropNames);
        var /** @type {?} */ elementProps = this._createElementPropertyAsts(element.name, elementOrDirectiveProps, boundDirectivePropNames);
        var /** @type {?} */ isViewRoot = parent.isTemplateElement || hasInlineTemplates;
        var /** @type {?} */ providerContext = new ProviderElementContext(this.providerViewContext, /** @type {?} */ ((parent.providerContext)), isViewRoot, directiveAsts, attrs, references, isTemplateElement, queryStartIndex, /** @type {?} */ ((element.sourceSpan)));
        var /** @type {?} */ children = visitAll(preparsedElement.nonBindable ? NON_BINDABLE_VISITOR : this, element.children, ElementContext.create(isTemplateElement, directiveAsts, isTemplateElement ? ((parent.providerContext)) : providerContext));
        providerContext.afterElement();
        // Override the actual selector when the `ngProjectAs` attribute is provided
        var /** @type {?} */ projectionSelector = preparsedElement.projectAs != null ?
            CssSelector.parse(preparsedElement.projectAs)[0] :
            elementCssSelector;
        var /** @type {?} */ ngContentIndex = ((parent.findNgContentIndex(projectionSelector)));
        var /** @type {?} */ parsedElement;
        if (preparsedElement.type === PreparsedElementType.NG_CONTENT) {
            if (element.children && !element.children.every(_isEmptyTextNode)) {
                this._reportError("<ng-content> element cannot have content.", /** @type {?} */ ((element.sourceSpan)));
            }
            parsedElement = new NgContentAst(this.ngContentCount++, hasInlineTemplates ? ((null)) : ngContentIndex, /** @type {?} */ ((element.sourceSpan)));
        }
        else if (isTemplateElement) {
            this._assertAllEventsPublishedByDirectives(directiveAsts, events);
            this._assertNoComponentsNorElementBindingsOnTemplate(directiveAsts, elementProps, /** @type {?} */ ((element.sourceSpan)));
            parsedElement = new EmbeddedTemplateAst(attrs, events, references, elementVars, providerContext.transformedDirectiveAsts, providerContext.transformProviders, providerContext.transformedHasViewContainer, providerContext.queryMatches, children, hasInlineTemplates ? ((null)) : ngContentIndex, /** @type {?} */ ((element.sourceSpan)));
        }
        else {
            this._assertElementExists(matchElement, element);
            this._assertOnlyOneComponent(directiveAsts, /** @type {?} */ ((element.sourceSpan)));
            var /** @type {?} */ ngContentIndex_1 = hasInlineTemplates ? null : parent.findNgContentIndex(projectionSelector);
            parsedElement = new ElementAst(nodeName, attrs, elementProps, events, references, providerContext.transformedDirectiveAsts, providerContext.transformProviders, providerContext.transformedHasViewContainer, providerContext.queryMatches, children, hasInlineTemplates ? null : ngContentIndex_1, element.sourceSpan, element.endSourceSpan || null);
        }
        if (hasInlineTemplates) {
            var /** @type {?} */ templateQueryStartIndex = this.contentQueryStartId;
            var /** @type {?} */ templateSelector = createElementCssSelector(TEMPLATE_ELEMENT, templateMatchableAttrs);
            var templateDirectiveMetas = this._parseDirectives(this.selectorMatcher, templateSelector).directives;
            var /** @type {?} */ templateBoundDirectivePropNames = new Set();
            var /** @type {?} */ templateDirectiveAsts = this._createDirectiveAsts(true, element.name, templateDirectiveMetas, templateElementOrDirectiveProps, [], /** @type {?} */ ((element.sourceSpan)), [], templateBoundDirectivePropNames);
            var /** @type {?} */ templateElementProps = this._createElementPropertyAsts(element.name, templateElementOrDirectiveProps, templateBoundDirectivePropNames);
            this._assertNoComponentsNorElementBindingsOnTemplate(templateDirectiveAsts, templateElementProps, /** @type {?} */ ((element.sourceSpan)));
            var /** @type {?} */ templateProviderContext = new ProviderElementContext(this.providerViewContext, /** @type {?} */ ((parent.providerContext)), parent.isTemplateElement, templateDirectiveAsts, [], [], true, templateQueryStartIndex, /** @type {?} */ ((element.sourceSpan)));
            templateProviderContext.afterElement();
            parsedElement = new EmbeddedTemplateAst([], [], [], templateElementVars, templateProviderContext.transformedDirectiveAsts, templateProviderContext.transformProviders, templateProviderContext.transformedHasViewContainer, templateProviderContext.queryMatches, [parsedElement], ngContentIndex, /** @type {?} */ ((element.sourceSpan)));
        }
        return parsedElement;
    };
    /**
     * @param {?} isTemplateElement
     * @param {?} attr
     * @param {?} targetMatchableAttrs
     * @param {?} targetProps
     * @param {?} targetEvents
     * @param {?} targetRefs
     * @param {?} targetVars
     * @return {?}
     */
    TemplateParseVisitor.prototype._parseAttr = function (isTemplateElement, attr, targetMatchableAttrs, targetProps, targetEvents, targetRefs, targetVars) {
        var /** @type {?} */ name = this._normalizeAttributeName(attr.name);
        var /** @type {?} */ value = attr.value;
        var /** @type {?} */ srcSpan = attr.sourceSpan;
        var /** @type {?} */ bindParts = name.match(BIND_NAME_REGEXP);
        var /** @type {?} */ hasBinding = false;
        if (bindParts !== null) {
            hasBinding = true;
            if (bindParts[KW_BIND_IDX] != null) {
                this._bindingParser.parsePropertyBinding(bindParts[IDENT_KW_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);
            }
            else if (bindParts[KW_LET_IDX]) {
                if (isTemplateElement) {
                    var /** @type {?} */ identifier = bindParts[IDENT_KW_IDX];
                    this._parseVariable(identifier, value, srcSpan, targetVars);
                }
                else {
                    this._reportError("\"let-\" is only supported on template elements.", srcSpan);
                }
            }
            else if (bindParts[KW_REF_IDX]) {
                var /** @type {?} */ identifier = bindParts[IDENT_KW_IDX];
                this._parseReference(identifier, value, srcSpan, targetRefs);
            }
            else if (bindParts[KW_ON_IDX]) {
                this._bindingParser.parseEvent(bindParts[IDENT_KW_IDX], value, srcSpan, targetMatchableAttrs, targetEvents);
            }
            else if (bindParts[KW_BINDON_IDX]) {
                this._bindingParser.parsePropertyBinding(bindParts[IDENT_KW_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);
                this._parseAssignmentEvent(bindParts[IDENT_KW_IDX], value, srcSpan, targetMatchableAttrs, targetEvents);
            }
            else if (bindParts[KW_AT_IDX]) {
                this._bindingParser.parseLiteralAttr(name, value, srcSpan, targetMatchableAttrs, targetProps);
            }
            else if (bindParts[IDENT_BANANA_BOX_IDX]) {
                this._bindingParser.parsePropertyBinding(bindParts[IDENT_BANANA_BOX_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);
                this._parseAssignmentEvent(bindParts[IDENT_BANANA_BOX_IDX], value, srcSpan, targetMatchableAttrs, targetEvents);
            }
            else if (bindParts[IDENT_PROPERTY_IDX]) {
                this._bindingParser.parsePropertyBinding(bindParts[IDENT_PROPERTY_IDX], value, false, srcSpan, targetMatchableAttrs, targetProps);
            }
            else if (bindParts[IDENT_EVENT_IDX]) {
                this._bindingParser.parseEvent(bindParts[IDENT_EVENT_IDX], value, srcSpan, targetMatchableAttrs, targetEvents);
            }
        }
        else {
            hasBinding = this._bindingParser.parsePropertyInterpolation(name, value, srcSpan, targetMatchableAttrs, targetProps);
        }
        if (!hasBinding) {
            this._bindingParser.parseLiteralAttr(name, value, srcSpan, targetMatchableAttrs, targetProps);
        }
        return hasBinding;
    };
    /**
     * @param {?} attrName
     * @return {?}
     */
    TemplateParseVisitor.prototype._normalizeAttributeName = function (attrName) {
        return /^data-/i.test(attrName) ? attrName.substring(5) : attrName;
    };
    /**
     * @param {?} identifier
     * @param {?} value
     * @param {?} sourceSpan
     * @param {?} targetVars
     * @return {?}
     */
    TemplateParseVisitor.prototype._parseVariable = function (identifier, value, sourceSpan, targetVars) {
        if (identifier.indexOf('-') > -1) {
            this._reportError("\"-\" is not allowed in variable names", sourceSpan);
        }
        targetVars.push(new VariableAst(identifier, value, sourceSpan));
    };
    /**
     * @param {?} identifier
     * @param {?} value
     * @param {?} sourceSpan
     * @param {?} targetRefs
     * @return {?}
     */
    TemplateParseVisitor.prototype._parseReference = function (identifier, value, sourceSpan, targetRefs) {
        if (identifier.indexOf('-') > -1) {
            this._reportError("\"-\" is not allowed in reference names", sourceSpan);
        }
        targetRefs.push(new ElementOrDirectiveRef(identifier, value, sourceSpan));
    };
    /**
     * @param {?} name
     * @param {?} expression
     * @param {?} sourceSpan
     * @param {?} targetMatchableAttrs
     * @param {?} targetEvents
     * @return {?}
     */
    TemplateParseVisitor.prototype._parseAssignmentEvent = function (name, expression, sourceSpan, targetMatchableAttrs, targetEvents) {
        this._bindingParser.parseEvent(name + "Change", expression + "=$event", sourceSpan, targetMatchableAttrs, targetEvents);
    };
    /**
     * @param {?} selectorMatcher
     * @param {?} elementCssSelector
     * @return {?}
     */
    TemplateParseVisitor.prototype._parseDirectives = function (selectorMatcher, elementCssSelector) {
        var _this = this;
        // Need to sort the directives so that we get consistent results throughout,
        // as selectorMatcher uses Maps inside.
        // Also deduplicate directives as they might match more than one time!
        var /** @type {?} */ directives = new Array(this.directivesIndex.size);
        // Whether any directive selector matches on the element name
        var /** @type {?} */ matchElement = false;
        selectorMatcher.match(elementCssSelector, function (selector, directive) {
            directives[((_this.directivesIndex.get(directive)))] = directive;
            matchElement = matchElement || selector.hasElementSelector();
        });
        return {
            directives: directives.filter(function (dir) { return !!dir; }),
            matchElement: matchElement,
        };
    };
    /**
     * @param {?} isTemplateElement
     * @param {?} elementName
     * @param {?} directives
     * @param {?} props
     * @param {?} elementOrDirectiveRefs
     * @param {?} elementSourceSpan
     * @param {?} targetReferences
     * @param {?} targetBoundDirectivePropNames
     * @return {?}
     */
    TemplateParseVisitor.prototype._createDirectiveAsts = function (isTemplateElement, elementName, directives, props, elementOrDirectiveRefs, elementSourceSpan, targetReferences, targetBoundDirectivePropNames) {
        var _this = this;
        var /** @type {?} */ matchedReferences = new Set();
        var /** @type {?} */ component = ((null));
        var /** @type {?} */ directiveAsts = directives.map(function (directive) {
            var /** @type {?} */ sourceSpan = new ParseSourceSpan(elementSourceSpan.start, elementSourceSpan.end, "Directive " + identifierName(directive.type));
            if (directive.isComponent) {
                component = directive;
            }
            var /** @type {?} */ directiveProperties = [];
            var /** @type {?} */ hostProperties = ((_this._bindingParser.createDirectiveHostPropertyAsts(directive, elementName, sourceSpan)));
            // Note: We need to check the host properties here as well,
            // as we don't know the element name in the DirectiveWrapperCompiler yet.
            hostProperties = _this._checkPropertiesInSchema(elementName, hostProperties);
            var /** @type {?} */ hostEvents = ((_this._bindingParser.createDirectiveHostEventAsts(directive, sourceSpan)));
            _this._createDirectivePropertyAsts(directive.inputs, props, directiveProperties, targetBoundDirectivePropNames);
            elementOrDirectiveRefs.forEach(function (elOrDirRef) {
                if ((elOrDirRef.value.length === 0 && directive.isComponent) ||
                    (elOrDirRef.isReferenceToDirective(directive))) {
                    targetReferences.push(new ReferenceAst(elOrDirRef.name, createTokenForReference(directive.type.reference), elOrDirRef.sourceSpan));
                    matchedReferences.add(elOrDirRef.name);
                }
            });
            var /** @type {?} */ contentQueryStartId = _this.contentQueryStartId;
            _this.contentQueryStartId += directive.queries.length;
            return new DirectiveAst(directive, directiveProperties, hostProperties, hostEvents, contentQueryStartId, sourceSpan);
        });
        elementOrDirectiveRefs.forEach(function (elOrDirRef) {
            if (elOrDirRef.value.length > 0) {
                if (!matchedReferences.has(elOrDirRef.name)) {
                    _this._reportError("There is no directive with \"exportAs\" set to \"" + elOrDirRef.value + "\"", elOrDirRef.sourceSpan);
                }
            }
            else if (!component) {
                var /** @type {?} */ refToken = ((null));
                if (isTemplateElement) {
                    refToken = createTokenForExternalReference(_this.reflector, Identifiers.TemplateRef);
                }
                targetReferences.push(new ReferenceAst(elOrDirRef.name, refToken, elOrDirRef.sourceSpan));
            }
        });
        return directiveAsts;
    };
    /**
     * @param {?} directiveProperties
     * @param {?} boundProps
     * @param {?} targetBoundDirectiveProps
     * @param {?} targetBoundDirectivePropNames
     * @return {?}
     */
    TemplateParseVisitor.prototype._createDirectivePropertyAsts = function (directiveProperties, boundProps, targetBoundDirectiveProps, targetBoundDirectivePropNames) {
        if (directiveProperties) {
            var /** @type {?} */ boundPropsByName_1 = new Map();
            boundProps.forEach(function (boundProp) {
                var /** @type {?} */ prevValue = boundPropsByName_1.get(boundProp.name);
                if (!prevValue || prevValue.isLiteral) {
                    // give [a]="b" a higher precedence than a="b" on the same element
                    boundPropsByName_1.set(boundProp.name, boundProp);
                }
            });
            Object.keys(directiveProperties).forEach(function (dirProp) {
                var /** @type {?} */ elProp = directiveProperties[dirProp];
                var /** @type {?} */ boundProp = boundPropsByName_1.get(elProp);
                // Bindings are optional, so this binding only needs to be set up if an expression is given.
                if (boundProp) {
                    targetBoundDirectivePropNames.add(boundProp.name);
                    if (!isEmptyExpression(boundProp.expression)) {
                        targetBoundDirectiveProps.push(new BoundDirectivePropertyAst(dirProp, boundProp.name, boundProp.expression, boundProp.sourceSpan));
                    }
                }
            });
        }
    };
    /**
     * @param {?} elementName
     * @param {?} props
     * @param {?} boundDirectivePropNames
     * @return {?}
     */
    TemplateParseVisitor.prototype._createElementPropertyAsts = function (elementName, props, boundDirectivePropNames) {
        var _this = this;
        var /** @type {?} */ boundElementProps = [];
        props.forEach(function (prop) {
            if (!prop.isLiteral && !boundDirectivePropNames.has(prop.name)) {
                boundElementProps.push(_this._bindingParser.createElementPropertyAst(elementName, prop));
            }
        });
        return this._checkPropertiesInSchema(elementName, boundElementProps);
    };
    /**
     * @param {?} directives
     * @return {?}
     */
    TemplateParseVisitor.prototype._findComponentDirectives = function (directives) {
        return directives.filter(function (directive) { return directive.directive.isComponent; });
    };
    /**
     * @param {?} directives
     * @return {?}
     */
    TemplateParseVisitor.prototype._findComponentDirectiveNames = function (directives) {
        return this._findComponentDirectives(directives)
            .map(function (directive) { return ((identifierName(directive.directive.type))); });
    };
    /**
     * @param {?} directives
     * @param {?} sourceSpan
     * @return {?}
     */
    TemplateParseVisitor.prototype._assertOnlyOneComponent = function (directives, sourceSpan) {
        var /** @type {?} */ componentTypeNames = this._findComponentDirectiveNames(directives);
        if (componentTypeNames.length > 1) {
            this._reportError("More than one component matched on this element.\n" +
                "Make sure that only one component's selector can match a given element.\n" +
                ("Conflicting components: " + componentTypeNames.join(',')), sourceSpan);
        }
    };
    /**
     * Make sure that non-angular tags conform to the schemas.
     *
     * Note: An element is considered an angular tag when at least one directive selector matches the
     * tag name.
     *
     * @param {?} matchElement Whether any directive has matched on the tag name
     * @param {?} element the html element
     * @return {?}
     */
    TemplateParseVisitor.prototype._assertElementExists = function (matchElement, element) {
        var /** @type {?} */ elName = element.name.replace(/^:xhtml:/, '');
        if (!matchElement && !this._schemaRegistry.hasElement(elName, this._schemas)) {
            var /** @type {?} */ errorMsg = "'" + elName + "' is not a known element:\n";
            errorMsg +=
                "1. If '" + elName + "' is an Angular component, then verify that it is part of this module.\n";
            if (elName.indexOf('-') > -1) {
                errorMsg +=
                    "2. If '" + elName + "' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the '@NgModule.schemas' of this component to suppress this message.";
            }
            else {
                errorMsg +=
                    "2. To allow any element add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.";
            }
            this._reportError(errorMsg, /** @type {?} */ ((element.sourceSpan)));
        }
    };
    /**
     * @param {?} directives
     * @param {?} elementProps
     * @param {?} sourceSpan
     * @return {?}
     */
    TemplateParseVisitor.prototype._assertNoComponentsNorElementBindingsOnTemplate = function (directives, elementProps, sourceSpan) {
        var _this = this;
        var /** @type {?} */ componentTypeNames = this._findComponentDirectiveNames(directives);
        if (componentTypeNames.length > 0) {
            this._reportError("Components on an embedded template: " + componentTypeNames.join(','), sourceSpan);
        }
        elementProps.forEach(function (prop) {
            _this._reportError("Property binding " + prop.name + " not used by any directive on an embedded template. Make sure that the property name is spelled correctly and all directives are listed in the \"@NgModule.declarations\".", sourceSpan);
        });
    };
    /**
     * @param {?} directives
     * @param {?} events
     * @return {?}
     */
    TemplateParseVisitor.prototype._assertAllEventsPublishedByDirectives = function (directives, events) {
        var _this = this;
        var /** @type {?} */ allDirectiveEvents = new Set();
        directives.forEach(function (directive) {
            Object.keys(directive.directive.outputs).forEach(function (k) {
                var /** @type {?} */ eventName = directive.directive.outputs[k];
                allDirectiveEvents.add(eventName);
            });
        });
        events.forEach(function (event) {
            if (event.target != null || !allDirectiveEvents.has(event.name)) {
                _this._reportError("Event binding " + event.fullName + " not emitted by any directive on an embedded template. Make sure that the event name is spelled correctly and all directives are listed in the \"@NgModule.declarations\".", event.sourceSpan);
            }
        });
    };
    /**
     * @param {?} elementName
     * @param {?} boundProps
     * @return {?}
     */
    TemplateParseVisitor.prototype._checkPropertiesInSchema = function (elementName, boundProps) {
        var _this = this;
        // Note: We can't filter out empty expressions before this method,
        // as we still want to validate them!
        return boundProps.filter(function (boundProp) {
            if (boundProp.type === PropertyBindingType.Property &&
                !_this._schemaRegistry.hasProperty(elementName, boundProp.name, _this._schemas)) {
                var /** @type {?} */ errorMsg = "Can't bind to '" + boundProp.name + "' since it isn't a known property of '" + elementName + "'.";
                if (elementName.startsWith('ng-')) {
                    errorMsg +=
                        "\n1. If '" + boundProp.name + "' is an Angular directive, then add 'CommonModule' to the '@NgModule.imports' of this component." +
                            "\n2. To allow any property add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.";
                }
                else if (elementName.indexOf('-') > -1) {
                    errorMsg +=
                        "\n1. If '" + elementName + "' is an Angular component and it has '" + boundProp.name + "' input, then verify that it is part of this module." +
                            ("\n2. If '" + elementName + "' is a Web Component then add 'CUSTOM_ELEMENTS_SCHEMA' to the '@NgModule.schemas' of this component to suppress this message.") +
                            "\n3. To allow any property add 'NO_ERRORS_SCHEMA' to the '@NgModule.schemas' of this component.";
                }
                _this._reportError(errorMsg, boundProp.sourceSpan);
            }
            return !isEmptyExpression(boundProp.value);
        });
    };
    /**
     * @param {?} message
     * @param {?} sourceSpan
     * @param {?=} level
     * @return {?}
     */
    TemplateParseVisitor.prototype._reportError = function (message, sourceSpan, level) {
        if (level === void 0) { level = ParseErrorLevel.ERROR; }
        this._targetErrors.push(new ParseError(sourceSpan, message, level));
    };
    return TemplateParseVisitor;
}());
var NonBindableVisitor = (function () {
    function NonBindableVisitor() {
    }
    /**
     * @param {?} ast
     * @param {?} parent
     * @return {?}
     */
    NonBindableVisitor.prototype.visitElement = function (ast, parent) {
        var /** @type {?} */ preparsedElement = preparseElement(ast);
        if (preparsedElement.type === PreparsedElementType.SCRIPT ||
            preparsedElement.type === PreparsedElementType.STYLE ||
            preparsedElement.type === PreparsedElementType.STYLESHEET) {
            // Skipping <script> for security reasons
            // Skipping <style> and stylesheets as we already processed them
            // in the StyleCompiler
            return null;
        }
        var /** @type {?} */ attrNameAndValues = ast.attrs.map(function (attr) { return [attr.name, attr.value]; });
        var /** @type {?} */ selector = createElementCssSelector(ast.name, attrNameAndValues);
        var /** @type {?} */ ngContentIndex = parent.findNgContentIndex(selector);
        var /** @type {?} */ children = visitAll(this, ast.children, EMPTY_ELEMENT_CONTEXT);
        return new ElementAst(ast.name, visitAll(this, ast.attrs), [], [], [], [], [], false, [], children, ngContentIndex, ast.sourceSpan, ast.endSourceSpan);
    };
    /**
     * @param {?} comment
     * @param {?} context
     * @return {?}
     */
    NonBindableVisitor.prototype.visitComment = function (comment, context) { return null; };
    /**
     * @param {?} attribute
     * @param {?} context
     * @return {?}
     */
    NonBindableVisitor.prototype.visitAttribute = function (attribute, context) {
        return new AttrAst(attribute.name, attribute.value, attribute.sourceSpan);
    };
    /**
     * @param {?} text
     * @param {?} parent
     * @return {?}
     */
    NonBindableVisitor.prototype.visitText = function (text, parent) {
        var /** @type {?} */ ngContentIndex = ((parent.findNgContentIndex(TEXT_CSS_SELECTOR)));
        return new TextAst(text.value, ngContentIndex, /** @type {?} */ ((text.sourceSpan)));
    };
    /**
     * @param {?} expansion
     * @param {?} context
     * @return {?}
     */
    NonBindableVisitor.prototype.visitExpansion = function (expansion, context) { return expansion; };
    /**
     * @param {?} expansionCase
     * @param {?} context
     * @return {?}
     */
    NonBindableVisitor.prototype.visitExpansionCase = function (expansionCase, context) { return expansionCase; };
    return NonBindableVisitor;
}());
/**
 * A reference to an element or directive in a template. E.g., the reference in this template:
 *
 * <div #myMenu="coolMenu">
 *
 * would be {name: 'myMenu', value: 'coolMenu', sourceSpan: ...}
 */
var ElementOrDirectiveRef = (function () {
    /**
     * @param {?} name
     * @param {?} value
     * @param {?} sourceSpan
     */
    function ElementOrDirectiveRef(name, value, sourceSpan) {
        this.name = name;
        this.value = value;
        this.sourceSpan = sourceSpan;
    }
    /**
     * Gets whether this is a reference to the given directive.
     * @param {?} directive
     * @return {?}
     */
    ElementOrDirectiveRef.prototype.isReferenceToDirective = function (directive) {
        return splitExportAs(directive.exportAs).indexOf(this.value) !== -1;
    };
    return ElementOrDirectiveRef;
}());
/**
 * Splits a raw, potentially comma-delimted `exportAs` value into an array of names.
 * @param {?} exportAs
 * @return {?}
 */
function splitExportAs(exportAs) {
    return exportAs ? exportAs.split(',').map(function (e) { return e.trim(); }) : [];
}
/**
 * @param {?} classAttrValue
 * @return {?}
 */
function splitClasses(classAttrValue) {
    return classAttrValue.trim().split(/\s+/g);
}
var ElementContext = (function () {
    /**
     * @param {?} isTemplateElement
     * @param {?} _ngContentIndexMatcher
     * @param {?} _wildcardNgContentIndex
     * @param {?} providerContext
     */
    function ElementContext(isTemplateElement, _ngContentIndexMatcher, _wildcardNgContentIndex, providerContext) {
        this.isTemplateElement = isTemplateElement;
        this._ngContentIndexMatcher = _ngContentIndexMatcher;
        this._wildcardNgContentIndex = _wildcardNgContentIndex;
        this.providerContext = providerContext;
    }
    /**
     * @param {?} isTemplateElement
     * @param {?} directives
     * @param {?} providerContext
     * @return {?}
     */
    ElementContext.create = function (isTemplateElement, directives, providerContext) {
        var /** @type {?} */ matcher = new SelectorMatcher();
        var /** @type {?} */ wildcardNgContentIndex = ((null));
        var /** @type {?} */ component = directives.find(function (directive) { return directive.directive.isComponent; });
        if (component) {
            var /** @type {?} */ ngContentSelectors = ((component.directive.template)).ngContentSelectors;
            for (var /** @type {?} */ i = 0; i < ngContentSelectors.length; i++) {
                var /** @type {?} */ selector = ngContentSelectors[i];
                if (selector === '*') {
                    wildcardNgContentIndex = i;
                }
                else {
                    matcher.addSelectables(CssSelector.parse(ngContentSelectors[i]), i);
                }
            }
        }
        return new ElementContext(isTemplateElement, matcher, wildcardNgContentIndex, providerContext);
    };
    /**
     * @param {?} selector
     * @return {?}
     */
    ElementContext.prototype.findNgContentIndex = function (selector) {
        var /** @type {?} */ ngContentIndices = [];
        this._ngContentIndexMatcher.match(selector, function (selector, ngContentIndex) { ngContentIndices.push(ngContentIndex); });
        ngContentIndices.sort();
        if (this._wildcardNgContentIndex != null) {
            ngContentIndices.push(this._wildcardNgContentIndex);
        }
        return ngContentIndices.length > 0 ? ngContentIndices[0] : null;
    };
    return ElementContext;
}());
/**
 * @param {?} elementName
 * @param {?} attributes
 * @return {?}
 */
function createElementCssSelector(elementName, attributes) {
    var /** @type {?} */ cssSelector = new CssSelector();
    var /** @type {?} */ elNameNoNs = splitNsName(elementName)[1];
    cssSelector.setElement(elNameNoNs);
    for (var /** @type {?} */ i = 0; i < attributes.length; i++) {
        var /** @type {?} */ attrName = attributes[i][0];
        var /** @type {?} */ attrNameNoNs = splitNsName(attrName)[1];
        var /** @type {?} */ attrValue = attributes[i][1];
        cssSelector.addAttribute(attrNameNoNs, attrValue);
        if (attrName.toLowerCase() == CLASS_ATTR) {
            var /** @type {?} */ classes = splitClasses(attrValue);
            classes.forEach(function (className) { return cssSelector.addClassName(className); });
        }
    }
    return cssSelector;
}
var EMPTY_ELEMENT_CONTEXT = new ElementContext(true, new SelectorMatcher(), null, null);
var NON_BINDABLE_VISITOR = new NonBindableVisitor();
/**
 * @param {?} node
 * @return {?}
 */
function _isEmptyTextNode(node) {
    return node instanceof Text && node.value.trim().length == 0;
}
/**
 * @template T
 * @param {?} items
 * @return {?}
 */
function removeSummaryDuplicates(items) {
    var /** @type {?} */ map = new Map();
    items.forEach(function (item) {
        if (!map.get(item.type.reference)) {
            map.set(item.type.reference, item);
        }
    });
    return Array.from(map.values());
}
/**
 * @param {?} ast
 * @return {?}
 */
function isEmptyExpression(ast) {
    if (ast instanceof ASTWithSource) {
        ast = ast.ast;
    }
    return ast instanceof EmptyExpr;
}
/**
 * @param {?} el
 * @param {?} enableLegacyTemplate
 * @param {?} reportDeprecation
 * @return {?}
 */
function isTemplate(el, enableLegacyTemplate, reportDeprecation) {
    if (isNgTemplate(el.name))
        return true;
    var /** @type {?} */ tagNoNs = splitNsName(el.name)[1];
    // `<template>` is HTML and case insensitive
    if (tagNoNs.toLowerCase() === TEMPLATE_ELEMENT) {
        if (enableLegacyTemplate && tagNoNs.toLowerCase() === TEMPLATE_ELEMENT) {
            reportDeprecation(TEMPLATE_ELEMENT_DEPRECATION_WARNING, /** @type {?} */ ((el.sourceSpan)));
            return true;
        }
    }
    return false;
}
/**
 * An interface for retrieving documents by URL that the compiler uses
 * to load templates.
 */
var ResourceLoader = (function () {
    function ResourceLoader() {
    }
    /**
     * @param {?} url
     * @return {?}
     */
    ResourceLoader.prototype.get = function (url) { return ''; };
    return ResourceLoader;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Create a {\@link UrlResolver} with no package prefix.
 * @return {?}
 */
function createUrlResolverWithoutPackagePrefix() {
    return new UrlResolver();
}
/**
 * @return {?}
 */
function createOfflineCompileUrlResolver() {
    return new UrlResolver('.');
}
/**
 * A default provider for {\@link PACKAGE_ROOT_URL} that maps to '/'.
 */
var DEFAULT_PACKAGE_URL_PROVIDER = {
    provide: __WEBPACK_IMPORTED_MODULE_1__angular_core__["S" /* PACKAGE_ROOT_URL */],
    useValue: '/'
};
/**
 * Used by the {\@link Compiler} when resolving HTML and CSS template URLs.
 *
 * This class can be overridden by the application developer to create custom behavior.
 *
 * See {\@link Compiler}
 *
 * ## Example
 *
 * {\@example compiler/ts/url_resolver/url_resolver.ts region='url_resolver'}
 *
 * \@security When compiling templates at runtime, you must
 * ensure that the entire template comes from a trusted source.
 * Attacker-controlled data introduced by a template could expose your
 * application to XSS risks. For more detail, see the [Security Guide](http://g.co/ng/security).
 */
var UrlResolver = (function () {
    /**
     * @param {?=} _packagePrefix
     */
    function UrlResolver(_packagePrefix) {
        if (_packagePrefix === void 0) { _packagePrefix = null; }
        this._packagePrefix = _packagePrefix;
    }
    /**
     * Resolves the `url` given the `baseUrl`:
     * - when the `url` is null, the `baseUrl` is returned,
     * - if `url` is relative ('path/to/here', './path/to/here'), the resolved url is a combination of
     * `baseUrl` and `url`,
     * - if `url` is absolute (it has a scheme: 'http://', 'https://' or start with '/'), the `url` is
     * returned as is (ignoring the `baseUrl`)
     * @param {?} baseUrl
     * @param {?} url
     * @return {?}
     */
    UrlResolver.prototype.resolve = function (baseUrl, url) {
        var /** @type {?} */ resolvedUrl = url;
        if (baseUrl != null && baseUrl.length > 0) {
            resolvedUrl = _resolveUrl(baseUrl, resolvedUrl);
        }
        var /** @type {?} */ resolvedParts = _split(resolvedUrl);
        var /** @type {?} */ prefix = this._packagePrefix;
        if (prefix != null && resolvedParts != null &&
            resolvedParts[_ComponentIndex.Scheme] == 'package') {
            var /** @type {?} */ path = resolvedParts[_ComponentIndex.Path];
            prefix = prefix.replace(/\/+$/, '');
            path = path.replace(/^\/+/, '');
            return prefix + "/" + path;
        }
        return resolvedUrl;
    };
    return UrlResolver;
}());
UrlResolver.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
UrlResolver.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */], args: [__WEBPACK_IMPORTED_MODULE_1__angular_core__["S" /* PACKAGE_ROOT_URL */],] },] },
]; };
/**
 * Extract the scheme of a URL.
 * @param {?} url
 * @return {?}
 */
function getUrlScheme(url) {
    var /** @type {?} */ match = _split(url);
    return (match && match[_ComponentIndex.Scheme]) || '';
}
/**
 * Builds a URI string from already-encoded parts.
 *
 * No encoding is performed.  Any component may be omitted as either null or
 * undefined.
 *
 * @param {?=} opt_scheme The scheme such as 'http'.
 * @param {?=} opt_userInfo The user name before the '\@'.
 * @param {?=} opt_domain The domain such as 'www.google.com', already
 *     URI-encoded.
 * @param {?=} opt_port The port number.
 * @param {?=} opt_path The path, already URI-encoded.  If it is not
 *     empty, it must begin with a slash.
 * @param {?=} opt_queryData The URI-encoded query data.
 * @param {?=} opt_fragment The URI-encoded fragment identifier.
 * @return {?} The fully combined URI.
 */
function _buildFromEncodedParts(opt_scheme, opt_userInfo, opt_domain, opt_port, opt_path, opt_queryData, opt_fragment) {
    var /** @type {?} */ out = [];
    if (opt_scheme != null) {
        out.push(opt_scheme + ':');
    }
    if (opt_domain != null) {
        out.push('//');
        if (opt_userInfo != null) {
            out.push(opt_userInfo + '@');
        }
        out.push(opt_domain);
        if (opt_port != null) {
            out.push(':' + opt_port);
        }
    }
    if (opt_path != null) {
        out.push(opt_path);
    }
    if (opt_queryData != null) {
        out.push('?' + opt_queryData);
    }
    if (opt_fragment != null) {
        out.push('#' + opt_fragment);
    }
    return out.join('');
}
/**
 * A regular expression for breaking a URI into its component parts.
 *
 * {\@link http://www.gbiv.com/protocols/uri/rfc/rfc3986.html#RFC2234} says
 * As the "first-match-wins" algorithm is identical to the "greedy"
 * disambiguation method used by POSIX regular expressions, it is natural and
 * commonplace to use a regular expression for parsing the potential five
 * components of a URI reference.
 *
 * The following line is the regular expression for breaking-down a
 * well-formed URI reference into its components.
 *
 * <pre>
 * ^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?
 *  12            3  4          5       6  7        8 9
 * </pre>
 *
 * The numbers in the second line above are only to assist readability; they
 * indicate the reference points for each subexpression (i.e., each paired
 * parenthesis). We refer to the value matched for subexpression <n> as $<n>.
 * For example, matching the above expression to
 * <pre>
 *     http://www.ics.uci.edu/pub/ietf/uri/#Related
 * </pre>
 * results in the following subexpression matches:
 * <pre>
 *    $1 = http:
 *    $2 = http
 *    $3 = //www.ics.uci.edu
 *    $4 = www.ics.uci.edu
 *    $5 = /pub/ietf/uri/
 *    $6 = <undefined>
 *    $7 = <undefined>
 *    $8 = #Related
 *    $9 = Related
 * </pre>
 * where <undefined> indicates that the component is not present, as is the
 * case for the query component in the above example. Therefore, we can
 * determine the value of the five components as
 * <pre>
 *    scheme    = $2
 *    authority = $4
 *    path      = $5
 *    query     = $7
 *    fragment  = $9
 * </pre>
 *
 * The regular expression has been modified slightly to expose the
 * userInfo, domain, and port separately from the authority.
 * The modified version yields
 * <pre>
 *    $1 = http              scheme
 *    $2 = <undefined>       userInfo -\
 *    $3 = www.ics.uci.edu   domain     | authority
 *    $4 = <undefined>       port     -/
 *    $5 = /pub/ietf/uri/    path
 *    $6 = <undefined>       query without ?
 *    $7 = Related           fragment without #
 * </pre>
 * \@internal
 */
var _splitRe = new RegExp('^' +
    '(?:' +
    '([^:/?#.]+)' +
    // used by other URL parts such as :,
    // ?, /, #, and .
    ':)?' +
    '(?://' +
    '(?:([^/?#]*)@)?' +
    '([\\w\\d\\-\\u0100-\\uffff.%]*)' +
    // digits, dashes, dots, percent
    // escapes, and unicode characters.
    '(?::([0-9]+))?' +
    ')?' +
    '([^?#]+)?' +
    '(?:\\?([^#]*))?' +
    '(?:#(.*))?' +
    '$');
var _ComponentIndex = {};
_ComponentIndex.Scheme = 1;
_ComponentIndex.UserInfo = 2;
_ComponentIndex.Domain = 3;
_ComponentIndex.Port = 4;
_ComponentIndex.Path = 5;
_ComponentIndex.QueryData = 6;
_ComponentIndex.Fragment = 7;
_ComponentIndex[_ComponentIndex.Scheme] = "Scheme";
_ComponentIndex[_ComponentIndex.UserInfo] = "UserInfo";
_ComponentIndex[_ComponentIndex.Domain] = "Domain";
_ComponentIndex[_ComponentIndex.Port] = "Port";
_ComponentIndex[_ComponentIndex.Path] = "Path";
_ComponentIndex[_ComponentIndex.QueryData] = "QueryData";
_ComponentIndex[_ComponentIndex.Fragment] = "Fragment";
/**
 * Splits a URI into its component parts.
 *
 * Each component can be accessed via the component indices; for example:
 * <pre>
 * goog.uri.utils.split(someStr)[goog.uri.utils.CompontentIndex.QUERY_DATA];
 * </pre>
 *
 * @param {?} uri The URI string to examine.
 * @return {?} Each component still URI-encoded.
 *     Each component that is present will contain the encoded value, whereas
 *     components that are not present will be undefined or empty, depending
 *     on the browser's regular expression implementation.  Never null, since
 *     arbitrary strings may still look like path names.
 */
function _split(uri) {
    return ((uri.match(_splitRe)));
}
/**
 * Removes dot segments in given path component, as described in
 * RFC 3986, section 5.2.4.
 *
 * @param {?} path A non-empty path component.
 * @return {?} Path component with removed dot segments.
 */
function _removeDotSegments(path) {
    if (path == '/')
        return '/';
    var /** @type {?} */ leadingSlash = path[0] == '/' ? '/' : '';
    var /** @type {?} */ trailingSlash = path[path.length - 1] === '/' ? '/' : '';
    var /** @type {?} */ segments = path.split('/');
    var /** @type {?} */ out = [];
    var /** @type {?} */ up = 0;
    for (var /** @type {?} */ pos = 0; pos < segments.length; pos++) {
        var /** @type {?} */ segment = segments[pos];
        switch (segment) {
            case '':
            case '.':
                break;
            case '..':
                if (out.length > 0) {
                    out.pop();
                }
                else {
                    up++;
                }
                break;
            default:
                out.push(segment);
        }
    }
    if (leadingSlash == '') {
        while (up-- > 0) {
            out.unshift('..');
        }
        if (out.length === 0)
            out.push('.');
    }
    return leadingSlash + out.join('/') + trailingSlash;
}
/**
 * Takes an array of the parts from split and canonicalizes the path part
 * and then joins all the parts.
 * @param {?} parts
 * @return {?}
 */
function _joinAndCanonicalizePath(parts) {
    var /** @type {?} */ path = parts[_ComponentIndex.Path];
    path = path == null ? '' : _removeDotSegments(path);
    parts[_ComponentIndex.Path] = path;
    return _buildFromEncodedParts(parts[_ComponentIndex.Scheme], parts[_ComponentIndex.UserInfo], parts[_ComponentIndex.Domain], parts[_ComponentIndex.Port], path, parts[_ComponentIndex.QueryData], parts[_ComponentIndex.Fragment]);
}
/**
 * Resolves a URL.
 * @param {?} base The URL acting as the base URL.
 * @param {?} url
 * @return {?}
 */
function _resolveUrl(base, url) {
    var /** @type {?} */ parts = _split(encodeURI(url));
    var /** @type {?} */ baseParts = _split(base);
    if (parts[_ComponentIndex.Scheme] != null) {
        return _joinAndCanonicalizePath(parts);
    }
    else {
        parts[_ComponentIndex.Scheme] = baseParts[_ComponentIndex.Scheme];
    }
    for (var /** @type {?} */ i = _ComponentIndex.Scheme; i <= _ComponentIndex.Port; i++) {
        if (parts[i] == null) {
            parts[i] = baseParts[i];
        }
    }
    if (parts[_ComponentIndex.Path][0] == '/') {
        return _joinAndCanonicalizePath(parts);
    }
    var /** @type {?} */ path = baseParts[_ComponentIndex.Path];
    if (path == null)
        path = '/';
    var /** @type {?} */ index = path.lastIndexOf('/');
    path = path.substring(0, index + 1) + parts[_ComponentIndex.Path];
    parts[_ComponentIndex.Path] = path;
    return _joinAndCanonicalizePath(parts);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var DirectiveNormalizer = (function () {
    /**
     * @param {?} _resourceLoader
     * @param {?} _urlResolver
     * @param {?} _htmlParser
     * @param {?} _config
     */
    function DirectiveNormalizer(_resourceLoader, _urlResolver, _htmlParser, _config) {
        this._resourceLoader = _resourceLoader;
        this._urlResolver = _urlResolver;
        this._htmlParser = _htmlParser;
        this._config = _config;
        this._resourceLoaderCache = new Map();
    }
    /**
     * @return {?}
     */
    DirectiveNormalizer.prototype.clearCache = function () { this._resourceLoaderCache.clear(); };
    /**
     * @param {?} normalizedDirective
     * @return {?}
     */
    DirectiveNormalizer.prototype.clearCacheFor = function (normalizedDirective) {
        var _this = this;
        if (!normalizedDirective.isComponent) {
            return;
        }
        var /** @type {?} */ template = ((normalizedDirective.template));
        this._resourceLoaderCache.delete(/** @type {?} */ ((template.templateUrl)));
        template.externalStylesheets.forEach(function (stylesheet) { _this._resourceLoaderCache.delete(/** @type {?} */ ((stylesheet.moduleUrl))); });
    };
    /**
     * @param {?} url
     * @return {?}
     */
    DirectiveNormalizer.prototype._fetch = function (url) {
        var /** @type {?} */ result = this._resourceLoaderCache.get(url);
        if (!result) {
            result = this._resourceLoader.get(url);
            this._resourceLoaderCache.set(url, result);
        }
        return result;
    };
    /**
     * @param {?} prenormData
     * @return {?}
     */
    DirectiveNormalizer.prototype.normalizeTemplate = function (prenormData) {
        var _this = this;
        if (isDefined(prenormData.template)) {
            if (isDefined(prenormData.templateUrl)) {
                throw syntaxError("'" + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(prenormData.componentType) + "' component cannot define both template and templateUrl");
            }
            if (typeof prenormData.template !== 'string') {
                throw syntaxError("The template specified for component " + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(prenormData.componentType) + " is not a string");
            }
        }
        else if (isDefined(prenormData.templateUrl)) {
            if (typeof prenormData.templateUrl !== 'string') {
                throw syntaxError("The templateUrl specified for component " + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(prenormData.componentType) + " is not a string");
            }
        }
        else {
            throw syntaxError("No template specified for component " + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(prenormData.componentType));
        }
        if (isDefined(prenormData.preserveWhitespaces) &&
            typeof prenormData.preserveWhitespaces !== 'boolean') {
            throw syntaxError("The preserveWhitespaces option for component " + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(prenormData.componentType) + " must be a boolean");
        }
        return SyncAsync.then(this.normalizeTemplateOnly(prenormData), function (result) { return _this.normalizeExternalStylesheets(result); });
    };
    /**
     * @param {?} prenomData
     * @return {?}
     */
    DirectiveNormalizer.prototype.normalizeTemplateOnly = function (prenomData) {
        var _this = this;
        var /** @type {?} */ template;
        var /** @type {?} */ templateUrl;
        if (prenomData.template != null) {
            template = prenomData.template;
            templateUrl = prenomData.moduleUrl;
        }
        else {
            templateUrl = this._urlResolver.resolve(prenomData.moduleUrl, /** @type {?} */ ((prenomData.templateUrl)));
            template = this._fetch(templateUrl);
        }
        return SyncAsync.then(template, function (template) { return _this.normalizeLoadedTemplate(prenomData, template, templateUrl); });
    };
    /**
     * @param {?} prenormData
     * @param {?} template
     * @param {?} templateAbsUrl
     * @return {?}
     */
    DirectiveNormalizer.prototype.normalizeLoadedTemplate = function (prenormData, template, templateAbsUrl) {
        var /** @type {?} */ isInline = !!prenormData.template;
        var /** @type {?} */ interpolationConfig = InterpolationConfig.fromArray(/** @type {?} */ ((prenormData.interpolation)));
        var /** @type {?} */ rootNodesAndErrors = this._htmlParser.parse(template, templateSourceUrl({ reference: prenormData.ngModuleType }, { type: { reference: prenormData.componentType } }, { isInline: isInline, templateUrl: templateAbsUrl }), true, interpolationConfig);
        if (rootNodesAndErrors.errors.length > 0) {
            var /** @type {?} */ errorString = rootNodesAndErrors.errors.join('\n');
            throw syntaxError("Template parse errors:\n" + errorString);
        }
        var /** @type {?} */ templateMetadataStyles = this.normalizeStylesheet(new CompileStylesheetMetadata({
            styles: prenormData.styles,
            styleUrls: prenormData.styleUrls,
            moduleUrl: prenormData.moduleUrl
        }));
        var /** @type {?} */ visitor = new TemplatePreparseVisitor();
        visitAll(visitor, rootNodesAndErrors.rootNodes);
        var /** @type {?} */ templateStyles = this.normalizeStylesheet(new CompileStylesheetMetadata({ styles: visitor.styles, styleUrls: visitor.styleUrls, moduleUrl: templateAbsUrl }));
        var /** @type {?} */ encapsulation = prenormData.encapsulation;
        if (encapsulation == null) {
            encapsulation = this._config.defaultEncapsulation;
        }
        var /** @type {?} */ styles = templateMetadataStyles.styles.concat(templateStyles.styles);
        var /** @type {?} */ styleUrls = templateMetadataStyles.styleUrls.concat(templateStyles.styleUrls);
        if (encapsulation === __WEBPACK_IMPORTED_MODULE_1__angular_core__["_15" /* ViewEncapsulation */].Emulated && styles.length === 0 &&
            styleUrls.length === 0) {
            encapsulation = __WEBPACK_IMPORTED_MODULE_1__angular_core__["_15" /* ViewEncapsulation */].None;
        }
        return new CompileTemplateMetadata({
            encapsulation: encapsulation,
            template: template,
            templateUrl: templateAbsUrl, styles: styles, styleUrls: styleUrls,
            ngContentSelectors: visitor.ngContentSelectors,
            animations: prenormData.animations,
            interpolation: prenormData.interpolation, isInline: isInline,
            externalStylesheets: [],
            preserveWhitespaces: preserveWhitespacesDefault(prenormData.preserveWhitespaces, this._config.preserveWhitespaces),
        });
    };
    /**
     * @param {?} templateMeta
     * @return {?}
     */
    DirectiveNormalizer.prototype.normalizeExternalStylesheets = function (templateMeta) {
        return SyncAsync.then(this._loadMissingExternalStylesheets(templateMeta.styleUrls), function (externalStylesheets) { return new CompileTemplateMetadata({
            encapsulation: templateMeta.encapsulation,
            template: templateMeta.template,
            templateUrl: templateMeta.templateUrl,
            styles: templateMeta.styles,
            styleUrls: templateMeta.styleUrls,
            externalStylesheets: externalStylesheets,
            ngContentSelectors: templateMeta.ngContentSelectors,
            animations: templateMeta.animations,
            interpolation: templateMeta.interpolation,
            isInline: templateMeta.isInline,
            preserveWhitespaces: templateMeta.preserveWhitespaces,
        }); });
    };
    /**
     * @param {?} styleUrls
     * @param {?=} loadedStylesheets
     * @return {?}
     */
    DirectiveNormalizer.prototype._loadMissingExternalStylesheets = function (styleUrls, loadedStylesheets) {
        var _this = this;
        if (loadedStylesheets === void 0) { loadedStylesheets = new Map(); }
        return SyncAsync.then(SyncAsync.all(styleUrls.filter(function (styleUrl) { return !loadedStylesheets.has(styleUrl); })
            .map(function (styleUrl) { return SyncAsync.then(_this._fetch(styleUrl), function (loadedStyle) {
            var /** @type {?} */ stylesheet = _this.normalizeStylesheet(new CompileStylesheetMetadata({ styles: [loadedStyle], moduleUrl: styleUrl }));
            loadedStylesheets.set(styleUrl, stylesheet);
            return _this._loadMissingExternalStylesheets(stylesheet.styleUrls, loadedStylesheets);
        }); })), function (_) { return Array.from(loadedStylesheets.values()); });
    };
    /**
     * @param {?} stylesheet
     * @return {?}
     */
    DirectiveNormalizer.prototype.normalizeStylesheet = function (stylesheet) {
        var _this = this;
        var /** @type {?} */ moduleUrl = ((stylesheet.moduleUrl));
        var /** @type {?} */ allStyleUrls = stylesheet.styleUrls.filter(isStyleUrlResolvable)
            .map(function (url) { return _this._urlResolver.resolve(moduleUrl, url); });
        var /** @type {?} */ allStyles = stylesheet.styles.map(function (style$$1) {
            var /** @type {?} */ styleWithImports = extractStyleUrls(_this._urlResolver, moduleUrl, style$$1);
            allStyleUrls.push.apply(allStyleUrls, styleWithImports.styleUrls);
            return styleWithImports.style;
        });
        return new CompileStylesheetMetadata({ styles: allStyles, styleUrls: allStyleUrls, moduleUrl: moduleUrl });
    };
    return DirectiveNormalizer;
}());
DirectiveNormalizer.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
DirectiveNormalizer.ctorParameters = function () { return [
    { type: ResourceLoader, },
    { type: UrlResolver, },
    { type: HtmlParser, },
    { type: CompilerConfig, },
]; };
var TemplatePreparseVisitor = (function () {
    function TemplatePreparseVisitor() {
        this.ngContentSelectors = [];
        this.styles = [];
        this.styleUrls = [];
        this.ngNonBindableStackCount = 0;
    }
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    TemplatePreparseVisitor.prototype.visitElement = function (ast, context) {
        var /** @type {?} */ preparsedElement = preparseElement(ast);
        switch (preparsedElement.type) {
            case PreparsedElementType.NG_CONTENT:
                if (this.ngNonBindableStackCount === 0) {
                    this.ngContentSelectors.push(preparsedElement.selectAttr);
                }
                break;
            case PreparsedElementType.STYLE:
                var /** @type {?} */ textContent_1 = '';
                ast.children.forEach(function (child) {
                    if (child instanceof Text) {
                        textContent_1 += child.value;
                    }
                });
                this.styles.push(textContent_1);
                break;
            case PreparsedElementType.STYLESHEET:
                this.styleUrls.push(preparsedElement.hrefAttr);
                break;
            default:
                break;
        }
        if (preparsedElement.nonBindable) {
            this.ngNonBindableStackCount++;
        }
        visitAll(this, ast.children);
        if (preparsedElement.nonBindable) {
            this.ngNonBindableStackCount--;
        }
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    TemplatePreparseVisitor.prototype.visitExpansion = function (ast, context) { visitAll(this, ast.cases); };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    TemplatePreparseVisitor.prototype.visitExpansionCase = function (ast, context) {
        visitAll(this, ast.expression);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    TemplatePreparseVisitor.prototype.visitComment = function (ast, context) { return null; };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    TemplatePreparseVisitor.prototype.visitAttribute = function (ast, context) { return null; };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    TemplatePreparseVisitor.prototype.visitText = function (ast, context) { return null; };
    return TemplatePreparseVisitor;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var DirectiveResolver = (function () {
    /**
     * @param {?} _reflector
     */
    function DirectiveResolver(_reflector) {
        this._reflector = _reflector;
    }
    /**
     * @param {?} type
     * @return {?}
     */
    DirectiveResolver.prototype.isDirective = function (type) {
        var /** @type {?} */ typeMetadata = this._reflector.annotations(Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_25" /* resolveForwardRef */])(type));
        return typeMetadata && typeMetadata.some(isDirectiveMetadata);
    };
    /**
     * @param {?} type
     * @param {?=} throwIfNotFound
     * @return {?}
     */
    DirectiveResolver.prototype.resolve = function (type, throwIfNotFound) {
        if (throwIfNotFound === void 0) { throwIfNotFound = true; }
        var /** @type {?} */ typeMetadata = this._reflector.annotations(Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_25" /* resolveForwardRef */])(type));
        if (typeMetadata) {
            var /** @type {?} */ metadata = findLast(typeMetadata, isDirectiveMetadata);
            if (metadata) {
                var /** @type {?} */ propertyMetadata = this._reflector.propMetadata(type);
                return this._mergeWithPropertyMetadata(metadata, propertyMetadata, type);
            }
        }
        if (throwIfNotFound) {
            throw new Error("No Directive annotation found on " + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(type));
        }
        return null;
    };
    /**
     * @param {?} dm
     * @param {?} propertyMetadata
     * @param {?} directiveType
     * @return {?}
     */
    DirectiveResolver.prototype._mergeWithPropertyMetadata = function (dm, propertyMetadata, directiveType) {
        var /** @type {?} */ inputs = [];
        var /** @type {?} */ outputs = [];
        var /** @type {?} */ host = {};
        var /** @type {?} */ queries = {};
        Object.keys(propertyMetadata).forEach(function (propName) {
            var /** @type {?} */ input = findLast(propertyMetadata[propName], function (a) { return a instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */]; });
            if (input) {
                if (input.bindingPropertyName) {
                    inputs.push(propName + ": " + input.bindingPropertyName);
                }
                else {
                    inputs.push(propName);
                }
            }
            var /** @type {?} */ output = findLast(propertyMetadata[propName], function (a) { return a instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["R" /* Output */]; });
            if (output) {
                if (output.bindingPropertyName) {
                    outputs.push(propName + ": " + output.bindingPropertyName);
                }
                else {
                    outputs.push(propName);
                }
            }
            var /** @type {?} */ hostBindings = propertyMetadata[propName].filter(function (a) { return a && a instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["y" /* HostBinding */]; });
            hostBindings.forEach(function (hostBinding) {
                if (hostBinding.hostPropertyName) {
                    var /** @type {?} */ startWith = hostBinding.hostPropertyName[0];
                    if (startWith === '(') {
                        throw new Error("@HostBinding can not bind to events. Use @HostListener instead.");
                    }
                    else if (startWith === '[') {
                        throw new Error("@HostBinding parameter should be a property name, 'class.<name>', or 'attr.<name>'.");
                    }
                    host["[" + hostBinding.hostPropertyName + "]"] = propName;
                }
                else {
                    host["[" + propName + "]"] = propName;
                }
            });
            var /** @type {?} */ hostListeners = propertyMetadata[propName].filter(function (a) { return a && a instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["z" /* HostListener */]; });
            hostListeners.forEach(function (hostListener) {
                var /** @type {?} */ args = hostListener.args || [];
                host["(" + hostListener.eventName + ")"] = propName + "(" + args.join(',') + ")";
            });
            var /** @type {?} */ query = findLast(propertyMetadata[propName], function (a) { return a instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["W" /* Query */]; });
            if (query) {
                queries[propName] = query;
            }
        });
        return this._merge(dm, inputs, outputs, host, queries, directiveType);
    };
    /**
     * @param {?} def
     * @return {?}
     */
    DirectiveResolver.prototype._extractPublicName = function (def) { return splitAtColon(def, [/** @type {?} */ ((null)), def])[1].trim(); };
    /**
     * @param {?} bindings
     * @return {?}
     */
    DirectiveResolver.prototype._dedupeBindings = function (bindings) {
        var /** @type {?} */ names = new Set();
        var /** @type {?} */ reversedResult = [];
        // go last to first to allow later entries to overwrite previous entries
        for (var /** @type {?} */ i = bindings.length - 1; i >= 0; i--) {
            var /** @type {?} */ binding = bindings[i];
            var /** @type {?} */ name = this._extractPublicName(binding);
            if (!names.has(name)) {
                names.add(name);
                reversedResult.push(binding);
            }
        }
        return reversedResult.reverse();
    };
    /**
     * @param {?} directive
     * @param {?} inputs
     * @param {?} outputs
     * @param {?} host
     * @param {?} queries
     * @param {?} directiveType
     * @return {?}
     */
    DirectiveResolver.prototype._merge = function (directive, inputs, outputs, host, queries, directiveType) {
        var /** @type {?} */ mergedInputs = this._dedupeBindings(directive.inputs ? directive.inputs.concat(inputs) : inputs);
        var /** @type {?} */ mergedOutputs = this._dedupeBindings(directive.outputs ? directive.outputs.concat(outputs) : outputs);
        var /** @type {?} */ mergedHost = directive.host ? Object.assign({}, directive.host, host) : host;
        var /** @type {?} */ mergedQueries = directive.queries ? Object.assign({}, directive.queries, queries) : queries;
        if (directive instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["n" /* Component */]) {
            return new __WEBPACK_IMPORTED_MODULE_1__angular_core__["n" /* Component */]({
                selector: directive.selector,
                inputs: mergedInputs,
                outputs: mergedOutputs,
                host: mergedHost,
                exportAs: directive.exportAs,
                moduleId: directive.moduleId,
                queries: mergedQueries,
                changeDetection: directive.changeDetection,
                providers: directive.providers,
                viewProviders: directive.viewProviders,
                entryComponents: directive.entryComponents,
                template: directive.template,
                templateUrl: directive.templateUrl,
                styles: directive.styles,
                styleUrls: directive.styleUrls,
                encapsulation: directive.encapsulation,
                animations: directive.animations,
                interpolation: directive.interpolation,
                preserveWhitespaces: directive.preserveWhitespaces,
            });
        }
        else {
            return new __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */]({
                selector: directive.selector,
                inputs: mergedInputs,
                outputs: mergedOutputs,
                host: mergedHost,
                exportAs: directive.exportAs,
                queries: mergedQueries,
                providers: directive.providers
            });
        }
    };
    return DirectiveResolver;
}());
DirectiveResolver.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
DirectiveResolver.ctorParameters = function () { return [
    { type: CompileReflector, },
]; };
/**
 * @param {?} type
 * @return {?}
 */
function isDirectiveMetadata(type) {
    return type instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */];
}
/**
 * @template T
 * @param {?} arr
 * @param {?} condition
 * @return {?}
 */
function findLast(arr, condition) {
    for (var /** @type {?} */ i = arr.length - 1; i >= 0; i--) {
        if (condition(arr[i])) {
            return arr[i];
        }
    }
    return null;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var STRIP_SRC_FILE_SUFFIXES = /(\.ts|\.d\.ts|\.js|\.jsx|\.tsx)$/;
var GENERATED_FILE = /\.ngfactory\.|\.ngsummary\./;
var JIT_SUMMARY_FILE = /\.ngsummary\./;
var JIT_SUMMARY_NAME = /NgSummary$/;
/**
 * @param {?} filePath
 * @param {?=} forceSourceFile
 * @return {?}
 */
function ngfactoryFilePath(filePath, forceSourceFile) {
    if (forceSourceFile === void 0) { forceSourceFile = false; }
    var /** @type {?} */ urlWithSuffix = splitTypescriptSuffix(filePath, forceSourceFile);
    return urlWithSuffix[0] + ".ngfactory" + urlWithSuffix[1];
}
/**
 * @param {?} filePath
 * @return {?}
 */
function stripGeneratedFileSuffix(filePath) {
    return filePath.replace(GENERATED_FILE, '.');
}
/**
 * @param {?} filePath
 * @return {?}
 */
function isGeneratedFile(filePath) {
    return GENERATED_FILE.test(filePath);
}
/**
 * @param {?} path
 * @param {?=} forceSourceFile
 * @return {?}
 */
function splitTypescriptSuffix(path, forceSourceFile) {
    if (forceSourceFile === void 0) { forceSourceFile = false; }
    if (path.endsWith('.d.ts')) {
        return [path.slice(0, -5), forceSourceFile ? '.ts' : '.d.ts'];
    }
    var /** @type {?} */ lastDot = path.lastIndexOf('.');
    if (lastDot !== -1) {
        return [path.substring(0, lastDot), path.substring(lastDot)];
    }
    return [path, ''];
}
/**
 * @param {?} fileName
 * @return {?}
 */
function summaryFileName(fileName) {
    var /** @type {?} */ fileNameWithoutSuffix = fileName.replace(STRIP_SRC_FILE_SUFFIXES, '');
    return fileNameWithoutSuffix + ".ngsummary.json";
}
/**
 * @param {?} fileName
 * @param {?=} forceSourceFile
 * @return {?}
 */
function summaryForJitFileName(fileName, forceSourceFile) {
    if (forceSourceFile === void 0) { forceSourceFile = false; }
    var /** @type {?} */ urlWithSuffix = splitTypescriptSuffix(stripGeneratedFileSuffix(fileName), forceSourceFile);
    return urlWithSuffix[0] + ".ngsummary" + urlWithSuffix[1];
}
/**
 * @param {?} filePath
 * @return {?}
 */
function stripSummaryForJitFileSuffix(filePath) {
    return filePath.replace(JIT_SUMMARY_FILE, '.');
}
/**
 * @param {?} symbolName
 * @return {?}
 */
function summaryForJitName(symbolName) {
    return symbolName + "NgSummary";
}
/**
 * @param {?} symbolName
 * @return {?}
 */
function stripSummaryForJitNameSuffix(symbolName) {
    return symbolName.replace(JIT_SUMMARY_NAME, '');
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var LifecycleHooks = {};
LifecycleHooks.OnInit = 0;
LifecycleHooks.OnDestroy = 1;
LifecycleHooks.DoCheck = 2;
LifecycleHooks.OnChanges = 3;
LifecycleHooks.AfterContentInit = 4;
LifecycleHooks.AfterContentChecked = 5;
LifecycleHooks.AfterViewInit = 6;
LifecycleHooks.AfterViewChecked = 7;
LifecycleHooks[LifecycleHooks.OnInit] = "OnInit";
LifecycleHooks[LifecycleHooks.OnDestroy] = "OnDestroy";
LifecycleHooks[LifecycleHooks.DoCheck] = "DoCheck";
LifecycleHooks[LifecycleHooks.OnChanges] = "OnChanges";
LifecycleHooks[LifecycleHooks.AfterContentInit] = "AfterContentInit";
LifecycleHooks[LifecycleHooks.AfterContentChecked] = "AfterContentChecked";
LifecycleHooks[LifecycleHooks.AfterViewInit] = "AfterViewInit";
LifecycleHooks[LifecycleHooks.AfterViewChecked] = "AfterViewChecked";
var LIFECYCLE_HOOKS_VALUES = [
    LifecycleHooks.OnInit, LifecycleHooks.OnDestroy, LifecycleHooks.DoCheck, LifecycleHooks.OnChanges,
    LifecycleHooks.AfterContentInit, LifecycleHooks.AfterContentChecked, LifecycleHooks.AfterViewInit,
    LifecycleHooks.AfterViewChecked
];
/**
 * @param {?} reflector
 * @param {?} hook
 * @param {?} token
 * @return {?}
 */
function hasLifecycleHook(reflector, hook, token) {
    return reflector.hasLifecycleHook(token, getHookName(hook));
}
/**
 * @param {?} reflector
 * @param {?} token
 * @return {?}
 */
function getAllLifecycleHooks(reflector, token) {
    return LIFECYCLE_HOOKS_VALUES.filter(function (hook) { return hasLifecycleHook(reflector, hook, token); });
}
/**
 * @param {?} hook
 * @return {?}
 */
function getHookName(hook) {
    switch (hook) {
        case LifecycleHooks.OnInit:
            return 'ngOnInit';
        case LifecycleHooks.OnDestroy:
            return 'ngOnDestroy';
        case LifecycleHooks.DoCheck:
            return 'ngDoCheck';
        case LifecycleHooks.OnChanges:
            return 'ngOnChanges';
        case LifecycleHooks.AfterContentInit:
            return 'ngAfterContentInit';
        case LifecycleHooks.AfterContentChecked:
            return 'ngAfterContentChecked';
        case LifecycleHooks.AfterViewInit:
            return 'ngAfterViewInit';
        case LifecycleHooks.AfterViewChecked:
            return 'ngAfterViewChecked';
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} obj
 * @return {?}
 */
function _isNgModuleMetadata(obj) {
    return obj instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["L" /* NgModule */];
}
/**
 * Resolves types to {\@link NgModule}.
 */
var NgModuleResolver = (function () {
    /**
     * @param {?} _reflector
     */
    function NgModuleResolver(_reflector) {
        this._reflector = _reflector;
    }
    /**
     * @param {?} type
     * @return {?}
     */
    NgModuleResolver.prototype.isNgModule = function (type) { return this._reflector.annotations(type).some(_isNgModuleMetadata); };
    /**
     * @param {?} type
     * @param {?=} throwIfNotFound
     * @return {?}
     */
    NgModuleResolver.prototype.resolve = function (type, throwIfNotFound) {
        if (throwIfNotFound === void 0) { throwIfNotFound = true; }
        var /** @type {?} */ ngModuleMeta = findLast(this._reflector.annotations(type), _isNgModuleMetadata);
        if (ngModuleMeta) {
            return ngModuleMeta;
        }
        else {
            if (throwIfNotFound) {
                throw new Error("No NgModule metadata found for '" + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(type) + "'.");
            }
            return null;
        }
    };
    return NgModuleResolver;
}());
NgModuleResolver.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
NgModuleResolver.ctorParameters = function () { return [
    { type: CompileReflector, },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} type
 * @return {?}
 */
function _isPipeMetadata(type) {
    return type instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */];
}
/**
 * Resolve a `Type` for {\@link Pipe}.
 *
 * This interface can be overridden by the application developer to create custom behavior.
 *
 * See {\@link Compiler}
 */
var PipeResolver = (function () {
    /**
     * @param {?} _reflector
     */
    function PipeResolver(_reflector) {
        this._reflector = _reflector;
    }
    /**
     * @param {?} type
     * @return {?}
     */
    PipeResolver.prototype.isPipe = function (type) {
        var /** @type {?} */ typeMetadata = this._reflector.annotations(Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_25" /* resolveForwardRef */])(type));
        return typeMetadata && typeMetadata.some(_isPipeMetadata);
    };
    /**
     * Return {\@link Pipe} for a given `Type`.
     * @param {?} type
     * @param {?=} throwIfNotFound
     * @return {?}
     */
    PipeResolver.prototype.resolve = function (type, throwIfNotFound) {
        if (throwIfNotFound === void 0) { throwIfNotFound = true; }
        var /** @type {?} */ metas = this._reflector.annotations(Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_25" /* resolveForwardRef */])(type));
        if (metas) {
            var /** @type {?} */ annotation = findLast(metas, _isPipeMetadata);
            if (annotation) {
                return annotation;
            }
        }
        if (throwIfNotFound) {
            throw new Error("No Pipe decorator found on " + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(type));
        }
        return null;
    };
    return PipeResolver;
}());
PipeResolver.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
PipeResolver.ctorParameters = function () { return [
    { type: CompileReflector, },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @abstract
 */
var SummaryResolver = (function () {
    function SummaryResolver() {
    }
    /**
     * @abstract
     * @param {?} fileName
     * @return {?}
     */
    SummaryResolver.prototype.isLibraryFile = function (fileName) { };
    /**
     * @abstract
     * @param {?} fileName
     * @return {?}
     */
    SummaryResolver.prototype.getLibraryFileName = function (fileName) { };
    /**
     * @abstract
     * @param {?} reference
     * @return {?}
     */
    SummaryResolver.prototype.resolveSummary = function (reference) { };
    /**
     * @abstract
     * @param {?} filePath
     * @return {?}
     */
    SummaryResolver.prototype.getSymbolsOf = function (filePath) { };
    /**
     * @abstract
     * @param {?} reference
     * @return {?}
     */
    SummaryResolver.prototype.getImportAs = function (reference) { };
    /**
     * @abstract
     * @param {?} summary
     * @return {?}
     */
    SummaryResolver.prototype.addSummary = function (summary) { };
    return SummaryResolver;
}());
var JitSummaryResolver = (function () {
    function JitSummaryResolver() {
        this._summaries = new Map();
    }
    /**
     * @param {?} fileName
     * @return {?}
     */
    JitSummaryResolver.prototype.isLibraryFile = function (fileName) { return false; };
    /**
     * @param {?} fileName
     * @return {?}
     */
    JitSummaryResolver.prototype.getLibraryFileName = function (fileName) { return null; };
    /**
     * @param {?} reference
     * @return {?}
     */
    JitSummaryResolver.prototype.resolveSummary = function (reference) {
        return this._summaries.get(reference) || null;
    };
    /**
     * @param {?} filePath
     * @return {?}
     */
    JitSummaryResolver.prototype.getSymbolsOf = function (filePath) { return []; };
    /**
     * @param {?} reference
     * @return {?}
     */
    JitSummaryResolver.prototype.getImportAs = function (reference) { return reference; };
    /**
     * @param {?} summary
     * @return {?}
     */
    JitSummaryResolver.prototype.addSummary = function (summary) { this._summaries.set(summary.symbol, summary); };
    return JitSummaryResolver;
}());
JitSummaryResolver.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
JitSummaryResolver.ctorParameters = function () { return []; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ERROR_COLLECTOR_TOKEN = new __WEBPACK_IMPORTED_MODULE_1__angular_core__["C" /* InjectionToken */]('ErrorCollector');
var CompileMetadataResolver = (function () {
    /**
     * @param {?} _config
     * @param {?} _ngModuleResolver
     * @param {?} _directiveResolver
     * @param {?} _pipeResolver
     * @param {?} _summaryResolver
     * @param {?} _schemaRegistry
     * @param {?} _directiveNormalizer
     * @param {?} _console
     * @param {?} _staticSymbolCache
     * @param {?} _reflector
     * @param {?=} _errorCollector
     */
    function CompileMetadataResolver(_config, _ngModuleResolver, _directiveResolver, _pipeResolver, _summaryResolver, _schemaRegistry, _directiveNormalizer, _console, _staticSymbolCache, _reflector, _errorCollector) {
        this._config = _config;
        this._ngModuleResolver = _ngModuleResolver;
        this._directiveResolver = _directiveResolver;
        this._pipeResolver = _pipeResolver;
        this._summaryResolver = _summaryResolver;
        this._schemaRegistry = _schemaRegistry;
        this._directiveNormalizer = _directiveNormalizer;
        this._console = _console;
        this._staticSymbolCache = _staticSymbolCache;
        this._reflector = _reflector;
        this._errorCollector = _errorCollector;
        this._nonNormalizedDirectiveCache = new Map();
        this._directiveCache = new Map();
        this._summaryCache = new Map();
        this._pipeCache = new Map();
        this._ngModuleCache = new Map();
        this._ngModuleOfTypes = new Map();
    }
    /**
     * @return {?}
     */
    CompileMetadataResolver.prototype.getReflector = function () { return this._reflector; };
    /**
     * @param {?} type
     * @return {?}
     */
    CompileMetadataResolver.prototype.clearCacheFor = function (type) {
        var /** @type {?} */ dirMeta = this._directiveCache.get(type);
        this._directiveCache.delete(type);
        this._nonNormalizedDirectiveCache.delete(type);
        this._summaryCache.delete(type);
        this._pipeCache.delete(type);
        this._ngModuleOfTypes.delete(type);
        // Clear all of the NgModule as they contain transitive information!
        this._ngModuleCache.clear();
        if (dirMeta) {
            this._directiveNormalizer.clearCacheFor(dirMeta);
        }
    };
    /**
     * @return {?}
     */
    CompileMetadataResolver.prototype.clearCache = function () {
        this._directiveCache.clear();
        this._nonNormalizedDirectiveCache.clear();
        this._summaryCache.clear();
        this._pipeCache.clear();
        this._ngModuleCache.clear();
        this._ngModuleOfTypes.clear();
        this._directiveNormalizer.clearCache();
    };
    /**
     * @param {?} baseType
     * @param {?} name
     * @return {?}
     */
    CompileMetadataResolver.prototype._createProxyClass = function (baseType, name) {
        var /** @type {?} */ delegate = null;
        var /** @type {?} */ proxyClass = (function () {
            if (!delegate) {
                throw new Error("Illegal state: Class " + name + " for type " + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(baseType) + " is not compiled yet!");
            }
            return delegate.apply(this, arguments);
        });
        proxyClass.setDelegate = function (d) {
            delegate = d;
            ((proxyClass)).prototype = d.prototype;
        };
        // Make stringify work correctly
        ((proxyClass)).overriddenName = name;
        return proxyClass;
    };
    /**
     * @param {?} dirType
     * @param {?} name
     * @return {?}
     */
    CompileMetadataResolver.prototype.getGeneratedClass = function (dirType, name) {
        if (dirType instanceof StaticSymbol) {
            return this._staticSymbolCache.get(ngfactoryFilePath(dirType.filePath), name);
        }
        else {
            return this._createProxyClass(dirType, name);
        }
    };
    /**
     * @param {?} dirType
     * @return {?}
     */
    CompileMetadataResolver.prototype.getComponentViewClass = function (dirType) {
        return this.getGeneratedClass(dirType, viewClassName(dirType, 0));
    };
    /**
     * @param {?} dirType
     * @return {?}
     */
    CompileMetadataResolver.prototype.getHostComponentViewClass = function (dirType) {
        return this.getGeneratedClass(dirType, hostViewClassName(dirType));
    };
    /**
     * @param {?} dirType
     * @return {?}
     */
    CompileMetadataResolver.prototype.getHostComponentType = function (dirType) {
        var /** @type {?} */ name = identifierName({ reference: dirType }) + "_Host";
        if (dirType instanceof StaticSymbol) {
            return this._staticSymbolCache.get(dirType.filePath, name);
        }
        else {
            var /** @type {?} */ HostClass = (function HostClass() { });
            HostClass.overriddenName = name;
            return HostClass;
        }
    };
    /**
     * @param {?} dirType
     * @return {?}
     */
    CompileMetadataResolver.prototype.getRendererType = function (dirType) {
        if (dirType instanceof StaticSymbol) {
            return this._staticSymbolCache.get(ngfactoryFilePath(dirType.filePath), rendererTypeName(dirType));
        }
        else {
            // returning an object as proxy,
            // that we fill later during runtime compilation.
            return ({});
        }
    };
    /**
     * @param {?} selector
     * @param {?} dirType
     * @param {?} inputs
     * @param {?} outputs
     * @return {?}
     */
    CompileMetadataResolver.prototype.getComponentFactory = function (selector, dirType, inputs, outputs) {
        if (dirType instanceof StaticSymbol) {
            return this._staticSymbolCache.get(ngfactoryFilePath(dirType.filePath), componentFactoryName(dirType));
        }
        else {
            var /** @type {?} */ hostView = this.getHostComponentViewClass(dirType);
            // Note: ngContentSelectors will be filled later once the template is
            // loaded.
            return Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_39" /* ccf */])(selector, dirType, /** @type {?} */ (hostView), inputs, outputs, []);
        }
    };
    /**
     * @param {?} factory
     * @param {?} ngContentSelectors
     * @return {?}
     */
    CompileMetadataResolver.prototype.initComponentFactory = function (factory, ngContentSelectors) {
        if (!(factory instanceof StaticSymbol)) {
            (_a = factory.ngContentSelectors).push.apply(_a, ngContentSelectors);
        }
        var _a;
    };
    /**
     * @param {?} type
     * @param {?} kind
     * @return {?}
     */
    CompileMetadataResolver.prototype._loadSummary = function (type, kind) {
        var /** @type {?} */ typeSummary = this._summaryCache.get(type);
        if (!typeSummary) {
            var /** @type {?} */ summary = this._summaryResolver.resolveSummary(type);
            typeSummary = summary ? summary.type : null;
            this._summaryCache.set(type, typeSummary || null);
        }
        return typeSummary && typeSummary.summaryKind === kind ? typeSummary : null;
    };
    /**
     * @param {?} ngModuleType
     * @param {?} directiveType
     * @param {?} isSync
     * @return {?}
     */
    CompileMetadataResolver.prototype.loadDirectiveMetadata = function (ngModuleType, directiveType, isSync) {
        var _this = this;
        if (this._directiveCache.has(directiveType)) {
            return null;
        }
        directiveType = Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_25" /* resolveForwardRef */])(directiveType);
        var _a = ((this.getNonNormalizedDirectiveMetadata(directiveType))), annotation = _a.annotation, metadata = _a.metadata;
        var /** @type {?} */ createDirectiveMetadata = function (templateMetadata) {
            var /** @type {?} */ normalizedDirMeta = new CompileDirectiveMetadata({
                isHost: false,
                type: metadata.type,
                isComponent: metadata.isComponent,
                selector: metadata.selector,
                exportAs: metadata.exportAs,
                changeDetection: metadata.changeDetection,
                inputs: metadata.inputs,
                outputs: metadata.outputs,
                hostListeners: metadata.hostListeners,
                hostProperties: metadata.hostProperties,
                hostAttributes: metadata.hostAttributes,
                providers: metadata.providers,
                viewProviders: metadata.viewProviders,
                queries: metadata.queries,
                viewQueries: metadata.viewQueries,
                entryComponents: metadata.entryComponents,
                componentViewType: metadata.componentViewType,
                rendererType: metadata.rendererType,
                componentFactory: metadata.componentFactory,
                template: templateMetadata
            });
            if (templateMetadata) {
                _this.initComponentFactory(/** @type {?} */ ((metadata.componentFactory)), templateMetadata.ngContentSelectors);
            }
            _this._directiveCache.set(directiveType, normalizedDirMeta);
            _this._summaryCache.set(directiveType, normalizedDirMeta.toSummary());
            return null;
        };
        if (metadata.isComponent) {
            var /** @type {?} */ template = ((metadata.template));
            var /** @type {?} */ templateMeta = this._directiveNormalizer.normalizeTemplate({
                ngModuleType: ngModuleType,
                componentType: directiveType,
                moduleUrl: this._reflector.componentModuleUrl(directiveType, annotation),
                encapsulation: template.encapsulation,
                template: template.template,
                templateUrl: template.templateUrl,
                styles: template.styles,
                styleUrls: template.styleUrls,
                animations: template.animations,
                interpolation: template.interpolation,
                preserveWhitespaces: template.preserveWhitespaces
            });
            if (Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_51" /* isPromise */])(templateMeta) && isSync) {
                this._reportError(componentStillLoadingError(directiveType), directiveType);
                return null;
            }
            return SyncAsync.then(templateMeta, createDirectiveMetadata);
        }
        else {
            // directive
            createDirectiveMetadata(null);
            return null;
        }
    };
    /**
     * @param {?} directiveType
     * @return {?}
     */
    CompileMetadataResolver.prototype.getNonNormalizedDirectiveMetadata = function (directiveType) {
        var _this = this;
        directiveType = Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_25" /* resolveForwardRef */])(directiveType);
        if (!directiveType) {
            return null;
        }
        var /** @type {?} */ cacheEntry = this._nonNormalizedDirectiveCache.get(directiveType);
        if (cacheEntry) {
            return cacheEntry;
        }
        var /** @type {?} */ dirMeta = this._directiveResolver.resolve(directiveType, false);
        if (!dirMeta) {
            return null;
        }
        var /** @type {?} */ nonNormalizedTemplateMetadata = ((undefined));
        if (dirMeta instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["n" /* Component */]) {
            // component
            assertArrayOfStrings('styles', dirMeta.styles);
            assertArrayOfStrings('styleUrls', dirMeta.styleUrls);
            assertInterpolationSymbols('interpolation', dirMeta.interpolation);
            var /** @type {?} */ animations = dirMeta.animations;
            nonNormalizedTemplateMetadata = new CompileTemplateMetadata({
                encapsulation: noUndefined(dirMeta.encapsulation),
                template: noUndefined(dirMeta.template),
                templateUrl: noUndefined(dirMeta.templateUrl),
                styles: dirMeta.styles || [],
                styleUrls: dirMeta.styleUrls || [],
                animations: animations || [],
                interpolation: noUndefined(dirMeta.interpolation),
                isInline: !!dirMeta.template,
                externalStylesheets: [],
                ngContentSelectors: [],
                preserveWhitespaces: noUndefined(dirMeta.preserveWhitespaces),
            });
        }
        var /** @type {?} */ changeDetectionStrategy = ((null));
        var /** @type {?} */ viewProviders = [];
        var /** @type {?} */ entryComponentMetadata = [];
        var /** @type {?} */ selector = dirMeta.selector;
        if (dirMeta instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["n" /* Component */]) {
            // Component
            changeDetectionStrategy = ((dirMeta.changeDetection));
            if (dirMeta.viewProviders) {
                viewProviders = this._getProvidersMetadata(dirMeta.viewProviders, entryComponentMetadata, "viewProviders for \"" + stringifyType(directiveType) + "\"", [], directiveType);
            }
            if (dirMeta.entryComponents) {
                entryComponentMetadata = flattenAndDedupeArray(dirMeta.entryComponents)
                    .map(function (type) { return ((_this._getEntryComponentMetadata(type))); })
                    .concat(entryComponentMetadata);
            }
            if (!selector) {
                selector = this._schemaRegistry.getDefaultComponentElementName();
            }
        }
        else {
            // Directive
            if (!selector) {
                this._reportError(syntaxError("Directive " + stringifyType(directiveType) + " has no selector, please add it!"), directiveType);
                selector = 'error';
            }
        }
        var /** @type {?} */ providers = [];
        if (dirMeta.providers != null) {
            providers = this._getProvidersMetadata(dirMeta.providers, entryComponentMetadata, "providers for \"" + stringifyType(directiveType) + "\"", [], directiveType);
        }
        var /** @type {?} */ queries = [];
        var /** @type {?} */ viewQueries = [];
        if (dirMeta.queries != null) {
            queries = this._getQueriesMetadata(dirMeta.queries, false, directiveType);
            viewQueries = this._getQueriesMetadata(dirMeta.queries, true, directiveType);
        }
        var /** @type {?} */ metadata = CompileDirectiveMetadata.create({
            isHost: false,
            selector: selector,
            exportAs: noUndefined(dirMeta.exportAs),
            isComponent: !!nonNormalizedTemplateMetadata,
            type: this._getTypeMetadata(directiveType),
            template: nonNormalizedTemplateMetadata,
            changeDetection: changeDetectionStrategy,
            inputs: dirMeta.inputs || [],
            outputs: dirMeta.outputs || [],
            host: dirMeta.host || {},
            providers: providers || [],
            viewProviders: viewProviders || [],
            queries: queries || [],
            viewQueries: viewQueries || [],
            entryComponents: entryComponentMetadata,
            componentViewType: nonNormalizedTemplateMetadata ? this.getComponentViewClass(directiveType) :
                null,
            rendererType: nonNormalizedTemplateMetadata ? this.getRendererType(directiveType) : null,
            componentFactory: null
        });
        if (nonNormalizedTemplateMetadata) {
            metadata.componentFactory =
                this.getComponentFactory(selector, directiveType, metadata.inputs, metadata.outputs);
        }
        cacheEntry = { metadata: metadata, annotation: dirMeta };
        this._nonNormalizedDirectiveCache.set(directiveType, cacheEntry);
        return cacheEntry;
    };
    /**
     * Gets the metadata for the given directive.
     * This assumes `loadNgModuleDirectiveAndPipeMetadata` has been called first.
     * @param {?} directiveType
     * @return {?}
     */
    CompileMetadataResolver.prototype.getDirectiveMetadata = function (directiveType) {
        var /** @type {?} */ dirMeta = ((this._directiveCache.get(directiveType)));
        if (!dirMeta) {
            this._reportError(syntaxError("Illegal state: getDirectiveMetadata can only be called after loadNgModuleDirectiveAndPipeMetadata for a module that declares it. Directive " + stringifyType(directiveType) + "."), directiveType);
        }
        return dirMeta;
    };
    /**
     * @param {?} dirType
     * @return {?}
     */
    CompileMetadataResolver.prototype.getDirectiveSummary = function (dirType) {
        var /** @type {?} */ dirSummary = (this._loadSummary(dirType, CompileSummaryKind.Directive));
        if (!dirSummary) {
            this._reportError(syntaxError("Illegal state: Could not load the summary for directive " + stringifyType(dirType) + "."), dirType);
        }
        return dirSummary;
    };
    /**
     * @param {?} type
     * @return {?}
     */
    CompileMetadataResolver.prototype.isDirective = function (type) {
        return !!this._loadSummary(type, CompileSummaryKind.Directive) ||
            this._directiveResolver.isDirective(type);
    };
    /**
     * @param {?} type
     * @return {?}
     */
    CompileMetadataResolver.prototype.isPipe = function (type) {
        return !!this._loadSummary(type, CompileSummaryKind.Pipe) ||
            this._pipeResolver.isPipe(type);
    };
    /**
     * @param {?} type
     * @return {?}
     */
    CompileMetadataResolver.prototype.isNgModule = function (type) {
        return !!this._loadSummary(type, CompileSummaryKind.NgModule) ||
            this._ngModuleResolver.isNgModule(type);
    };
    /**
     * @param {?} moduleType
     * @return {?}
     */
    CompileMetadataResolver.prototype.getNgModuleSummary = function (moduleType) {
        var /** @type {?} */ moduleSummary = (this._loadSummary(moduleType, CompileSummaryKind.NgModule));
        if (!moduleSummary) {
            var /** @type {?} */ moduleMeta = this.getNgModuleMetadata(moduleType, false);
            moduleSummary = moduleMeta ? moduleMeta.toSummary() : null;
            if (moduleSummary) {
                this._summaryCache.set(moduleType, moduleSummary);
            }
        }
        return moduleSummary;
    };
    /**
     * Loads the declared directives and pipes of an NgModule.
     * @param {?} moduleType
     * @param {?} isSync
     * @param {?=} throwIfNotFound
     * @return {?}
     */
    CompileMetadataResolver.prototype.loadNgModuleDirectiveAndPipeMetadata = function (moduleType, isSync, throwIfNotFound) {
        var _this = this;
        if (throwIfNotFound === void 0) { throwIfNotFound = true; }
        var /** @type {?} */ ngModule = this.getNgModuleMetadata(moduleType, throwIfNotFound);
        var /** @type {?} */ loading = [];
        if (ngModule) {
            ngModule.declaredDirectives.forEach(function (id) {
                var /** @type {?} */ promise = _this.loadDirectiveMetadata(moduleType, id.reference, isSync);
                if (promise) {
                    loading.push(promise);
                }
            });
            ngModule.declaredPipes.forEach(function (id) { return _this._loadPipeMetadata(id.reference); });
        }
        return Promise.all(loading);
    };
    /**
     * @param {?} moduleType
     * @param {?=} throwIfNotFound
     * @return {?}
     */
    CompileMetadataResolver.prototype.getNgModuleMetadata = function (moduleType, throwIfNotFound) {
        var _this = this;
        if (throwIfNotFound === void 0) { throwIfNotFound = true; }
        moduleType = Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_25" /* resolveForwardRef */])(moduleType);
        var /** @type {?} */ compileMeta = this._ngModuleCache.get(moduleType);
        if (compileMeta) {
            return compileMeta;
        }
        var /** @type {?} */ meta = this._ngModuleResolver.resolve(moduleType, throwIfNotFound);
        if (!meta) {
            return null;
        }
        var /** @type {?} */ declaredDirectives = [];
        var /** @type {?} */ exportedNonModuleIdentifiers = [];
        var /** @type {?} */ declaredPipes = [];
        var /** @type {?} */ importedModules = [];
        var /** @type {?} */ exportedModules = [];
        var /** @type {?} */ providers = [];
        var /** @type {?} */ entryComponents = [];
        var /** @type {?} */ bootstrapComponents = [];
        var /** @type {?} */ schemas = [];
        if (meta.imports) {
            flattenAndDedupeArray(meta.imports).forEach(function (importedType) {
                var /** @type {?} */ importedModuleType = ((undefined));
                if (isValidType(importedType)) {
                    importedModuleType = importedType;
                }
                else if (importedType && importedType.ngModule) {
                    var /** @type {?} */ moduleWithProviders = importedType;
                    importedModuleType = moduleWithProviders.ngModule;
                    if (moduleWithProviders.providers) {
                        providers.push.apply(providers, _this._getProvidersMetadata(moduleWithProviders.providers, entryComponents, "provider for the NgModule '" + stringifyType(importedModuleType) + "'", [], importedType));
                    }
                }
                if (importedModuleType) {
                    if (_this._checkSelfImport(moduleType, importedModuleType))
                        return;
                    var /** @type {?} */ importedModuleSummary = _this.getNgModuleSummary(importedModuleType);
                    if (!importedModuleSummary) {
                        _this._reportError(syntaxError("Unexpected " + _this._getTypeDescriptor(importedType) + " '" + stringifyType(importedType) + "' imported by the module '" + stringifyType(moduleType) + "'. Please add a @NgModule annotation."), moduleType);
                        return;
                    }
                    importedModules.push(importedModuleSummary);
                }
                else {
                    _this._reportError(syntaxError("Unexpected value '" + stringifyType(importedType) + "' imported by the module '" + stringifyType(moduleType) + "'"), moduleType);
                    return;
                }
            });
        }
        if (meta.exports) {
            flattenAndDedupeArray(meta.exports).forEach(function (exportedType) {
                if (!isValidType(exportedType)) {
                    _this._reportError(syntaxError("Unexpected value '" + stringifyType(exportedType) + "' exported by the module '" + stringifyType(moduleType) + "'"), moduleType);
                    return;
                }
                var /** @type {?} */ exportedModuleSummary = _this.getNgModuleSummary(exportedType);
                if (exportedModuleSummary) {
                    exportedModules.push(exportedModuleSummary);
                }
                else {
                    exportedNonModuleIdentifiers.push(_this._getIdentifierMetadata(exportedType));
                }
            });
        }
        // Note: This will be modified later, so we rely on
        // getting a new instance every time!
        var /** @type {?} */ transitiveModule = this._getTransitiveNgModuleMetadata(importedModules, exportedModules);
        if (meta.declarations) {
            flattenAndDedupeArray(meta.declarations).forEach(function (declaredType) {
                if (!isValidType(declaredType)) {
                    _this._reportError(syntaxError("Unexpected value '" + stringifyType(declaredType) + "' declared by the module '" + stringifyType(moduleType) + "'"), moduleType);
                    return;
                }
                var /** @type {?} */ declaredIdentifier = _this._getIdentifierMetadata(declaredType);
                if (_this.isDirective(declaredType)) {
                    transitiveModule.addDirective(declaredIdentifier);
                    declaredDirectives.push(declaredIdentifier);
                    _this._addTypeToModule(declaredType, moduleType);
                }
                else if (_this.isPipe(declaredType)) {
                    transitiveModule.addPipe(declaredIdentifier);
                    transitiveModule.pipes.push(declaredIdentifier);
                    declaredPipes.push(declaredIdentifier);
                    _this._addTypeToModule(declaredType, moduleType);
                }
                else {
                    _this._reportError(syntaxError("Unexpected " + _this._getTypeDescriptor(declaredType) + " '" + stringifyType(declaredType) + "' declared by the module '" + stringifyType(moduleType) + "'. Please add a @Pipe/@Directive/@Component annotation."), moduleType);
                    return;
                }
            });
        }
        var /** @type {?} */ exportedDirectives = [];
        var /** @type {?} */ exportedPipes = [];
        exportedNonModuleIdentifiers.forEach(function (exportedId) {
            if (transitiveModule.directivesSet.has(exportedId.reference)) {
                exportedDirectives.push(exportedId);
                transitiveModule.addExportedDirective(exportedId);
            }
            else if (transitiveModule.pipesSet.has(exportedId.reference)) {
                exportedPipes.push(exportedId);
                transitiveModule.addExportedPipe(exportedId);
            }
            else {
                _this._reportError(syntaxError("Can't export " + _this._getTypeDescriptor(exportedId.reference) + " " + stringifyType(exportedId.reference) + " from " + stringifyType(moduleType) + " as it was neither declared nor imported!"), moduleType);
                return;
            }
        });
        // The providers of the module have to go last
        // so that they overwrite any other provider we already added.
        if (meta.providers) {
            providers.push.apply(providers, this._getProvidersMetadata(meta.providers, entryComponents, "provider for the NgModule '" + stringifyType(moduleType) + "'", [], moduleType));
        }
        if (meta.entryComponents) {
            entryComponents.push.apply(entryComponents, flattenAndDedupeArray(meta.entryComponents)
                .map(function (type) { return ((_this._getEntryComponentMetadata(type))); }));
        }
        if (meta.bootstrap) {
            flattenAndDedupeArray(meta.bootstrap).forEach(function (type) {
                if (!isValidType(type)) {
                    _this._reportError(syntaxError("Unexpected value '" + stringifyType(type) + "' used in the bootstrap property of module '" + stringifyType(moduleType) + "'"), moduleType);
                    return;
                }
                bootstrapComponents.push(_this._getIdentifierMetadata(type));
            });
        }
        entryComponents.push.apply(entryComponents, bootstrapComponents.map(function (type) { return ((_this._getEntryComponentMetadata(type.reference))); }));
        if (meta.schemas) {
            schemas.push.apply(schemas, flattenAndDedupeArray(meta.schemas));
        }
        compileMeta = new CompileNgModuleMetadata({
            type: this._getTypeMetadata(moduleType),
            providers: providers,
            entryComponents: entryComponents,
            bootstrapComponents: bootstrapComponents,
            schemas: schemas,
            declaredDirectives: declaredDirectives,
            exportedDirectives: exportedDirectives,
            declaredPipes: declaredPipes,
            exportedPipes: exportedPipes,
            importedModules: importedModules,
            exportedModules: exportedModules,
            transitiveModule: transitiveModule,
            id: meta.id || null,
        });
        entryComponents.forEach(function (id) { return transitiveModule.addEntryComponent(id); });
        providers.forEach(function (provider) { return transitiveModule.addProvider(provider, /** @type {?} */ ((compileMeta)).type); });
        transitiveModule.addModule(compileMeta.type);
        this._ngModuleCache.set(moduleType, compileMeta);
        return compileMeta;
    };
    /**
     * @param {?} moduleType
     * @param {?} importedModuleType
     * @return {?}
     */
    CompileMetadataResolver.prototype._checkSelfImport = function (moduleType, importedModuleType) {
        if (moduleType === importedModuleType) {
            this._reportError(syntaxError("'" + stringifyType(moduleType) + "' module can't import itself"), moduleType);
            return true;
        }
        return false;
    };
    /**
     * @param {?} type
     * @return {?}
     */
    CompileMetadataResolver.prototype._getTypeDescriptor = function (type) {
        if (this.isDirective(type)) {
            return 'directive';
        }
        if (this.isPipe(type)) {
            return 'pipe';
        }
        if (this.isNgModule(type)) {
            return 'module';
        }
        if (((type)).provide) {
            return 'provider';
        }
        return 'value';
    };
    /**
     * @param {?} type
     * @param {?} moduleType
     * @return {?}
     */
    CompileMetadataResolver.prototype._addTypeToModule = function (type, moduleType) {
        var /** @type {?} */ oldModule = this._ngModuleOfTypes.get(type);
        if (oldModule && oldModule !== moduleType) {
            this._reportError(syntaxError("Type " + stringifyType(type) + " is part of the declarations of 2 modules: " + stringifyType(oldModule) + " and " + stringifyType(moduleType) + "! " +
                ("Please consider moving " + stringifyType(type) + " to a higher module that imports " + stringifyType(oldModule) + " and " + stringifyType(moduleType) + ". ") +
                ("You can also create a new NgModule that exports and includes " + stringifyType(type) + " then import that NgModule in " + stringifyType(oldModule) + " and " + stringifyType(moduleType) + ".")), moduleType);
            return;
        }
        this._ngModuleOfTypes.set(type, moduleType);
    };
    /**
     * @param {?} importedModules
     * @param {?} exportedModules
     * @return {?}
     */
    CompileMetadataResolver.prototype._getTransitiveNgModuleMetadata = function (importedModules, exportedModules) {
        // collect `providers` / `entryComponents` from all imported and all exported modules
        var /** @type {?} */ result = new TransitiveCompileNgModuleMetadata();
        var /** @type {?} */ modulesByToken = new Map();
        importedModules.concat(exportedModules).forEach(function (modSummary) {
            modSummary.modules.forEach(function (mod) { return result.addModule(mod); });
            modSummary.entryComponents.forEach(function (comp) { return result.addEntryComponent(comp); });
            var /** @type {?} */ addedTokens = new Set();
            modSummary.providers.forEach(function (entry) {
                var /** @type {?} */ tokenRef = tokenReference(entry.provider.token);
                var /** @type {?} */ prevModules = modulesByToken.get(tokenRef);
                if (!prevModules) {
                    prevModules = new Set();
                    modulesByToken.set(tokenRef, prevModules);
                }
                var /** @type {?} */ moduleRef = entry.module.reference;
                // Note: the providers of one module may still contain multiple providers
                // per token (e.g. for multi providers), and we need to preserve these.
                if (addedTokens.has(tokenRef) || !prevModules.has(moduleRef)) {
                    prevModules.add(moduleRef);
                    addedTokens.add(tokenRef);
                    result.addProvider(entry.provider, entry.module);
                }
            });
        });
        exportedModules.forEach(function (modSummary) {
            modSummary.exportedDirectives.forEach(function (id) { return result.addExportedDirective(id); });
            modSummary.exportedPipes.forEach(function (id) { return result.addExportedPipe(id); });
        });
        importedModules.forEach(function (modSummary) {
            modSummary.exportedDirectives.forEach(function (id) { return result.addDirective(id); });
            modSummary.exportedPipes.forEach(function (id) { return result.addPipe(id); });
        });
        return result;
    };
    /**
     * @param {?} type
     * @return {?}
     */
    CompileMetadataResolver.prototype._getIdentifierMetadata = function (type) {
        type = Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_25" /* resolveForwardRef */])(type);
        return { reference: type };
    };
    /**
     * @param {?} type
     * @return {?}
     */
    CompileMetadataResolver.prototype.isInjectable = function (type) {
        var /** @type {?} */ annotations = this._reflector.annotations(type);
        // Note: We need an exact check here as @Component / @Directive / ... inherit
        // from @CompilerInjectable!
        return annotations.some(function (ann) { return ann.constructor === __WEBPACK_IMPORTED_MODULE_1__angular_core__["B" /* Injectable */]; });
    };
    /**
     * @param {?} type
     * @return {?}
     */
    CompileMetadataResolver.prototype.getInjectableSummary = function (type) {
        return {
            summaryKind: CompileSummaryKind.Injectable,
            type: this._getTypeMetadata(type, null, false)
        };
    };
    /**
     * @param {?} type
     * @param {?=} dependencies
     * @return {?}
     */
    CompileMetadataResolver.prototype._getInjectableMetadata = function (type, dependencies) {
        if (dependencies === void 0) { dependencies = null; }
        var /** @type {?} */ typeSummary = this._loadSummary(type, CompileSummaryKind.Injectable);
        if (typeSummary) {
            return typeSummary.type;
        }
        return this._getTypeMetadata(type, dependencies);
    };
    /**
     * @param {?} type
     * @param {?=} dependencies
     * @param {?=} throwOnUnknownDeps
     * @return {?}
     */
    CompileMetadataResolver.prototype._getTypeMetadata = function (type, dependencies, throwOnUnknownDeps) {
        if (dependencies === void 0) { dependencies = null; }
        if (throwOnUnknownDeps === void 0) { throwOnUnknownDeps = true; }
        var /** @type {?} */ identifier = this._getIdentifierMetadata(type);
        return {
            reference: identifier.reference,
            diDeps: this._getDependenciesMetadata(identifier.reference, dependencies, throwOnUnknownDeps),
            lifecycleHooks: getAllLifecycleHooks(this._reflector, identifier.reference),
        };
    };
    /**
     * @param {?} factory
     * @param {?=} dependencies
     * @return {?}
     */
    CompileMetadataResolver.prototype._getFactoryMetadata = function (factory, dependencies) {
        if (dependencies === void 0) { dependencies = null; }
        factory = Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_25" /* resolveForwardRef */])(factory);
        return { reference: factory, diDeps: this._getDependenciesMetadata(factory, dependencies) };
    };
    /**
     * Gets the metadata for the given pipe.
     * This assumes `loadNgModuleDirectiveAndPipeMetadata` has been called first.
     * @param {?} pipeType
     * @return {?}
     */
    CompileMetadataResolver.prototype.getPipeMetadata = function (pipeType) {
        var /** @type {?} */ pipeMeta = this._pipeCache.get(pipeType);
        if (!pipeMeta) {
            this._reportError(syntaxError("Illegal state: getPipeMetadata can only be called after loadNgModuleDirectiveAndPipeMetadata for a module that declares it. Pipe " + stringifyType(pipeType) + "."), pipeType);
        }
        return pipeMeta || null;
    };
    /**
     * @param {?} pipeType
     * @return {?}
     */
    CompileMetadataResolver.prototype.getPipeSummary = function (pipeType) {
        var /** @type {?} */ pipeSummary = (this._loadSummary(pipeType, CompileSummaryKind.Pipe));
        if (!pipeSummary) {
            this._reportError(syntaxError("Illegal state: Could not load the summary for pipe " + stringifyType(pipeType) + "."), pipeType);
        }
        return pipeSummary;
    };
    /**
     * @param {?} pipeType
     * @return {?}
     */
    CompileMetadataResolver.prototype.getOrLoadPipeMetadata = function (pipeType) {
        var /** @type {?} */ pipeMeta = this._pipeCache.get(pipeType);
        if (!pipeMeta) {
            pipeMeta = this._loadPipeMetadata(pipeType);
        }
        return pipeMeta;
    };
    /**
     * @param {?} pipeType
     * @return {?}
     */
    CompileMetadataResolver.prototype._loadPipeMetadata = function (pipeType) {
        pipeType = Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_25" /* resolveForwardRef */])(pipeType);
        var /** @type {?} */ pipeAnnotation = ((this._pipeResolver.resolve(pipeType)));
        var /** @type {?} */ pipeMeta = new CompilePipeMetadata({
            type: this._getTypeMetadata(pipeType),
            name: pipeAnnotation.name,
            pure: !!pipeAnnotation.pure
        });
        this._pipeCache.set(pipeType, pipeMeta);
        this._summaryCache.set(pipeType, pipeMeta.toSummary());
        return pipeMeta;
    };
    /**
     * @param {?} typeOrFunc
     * @param {?} dependencies
     * @param {?=} throwOnUnknownDeps
     * @return {?}
     */
    CompileMetadataResolver.prototype._getDependenciesMetadata = function (typeOrFunc, dependencies, throwOnUnknownDeps) {
        var _this = this;
        if (throwOnUnknownDeps === void 0) { throwOnUnknownDeps = true; }
        var /** @type {?} */ hasUnknownDeps = false;
        var /** @type {?} */ params = dependencies || this._reflector.parameters(typeOrFunc) || [];
        var /** @type {?} */ dependenciesMetadata = params.map(function (param) {
            var /** @type {?} */ isAttribute = false;
            var /** @type {?} */ isHost = false;
            var /** @type {?} */ isSelf = false;
            var /** @type {?} */ isSkipSelf = false;
            var /** @type {?} */ isOptional = false;
            var /** @type {?} */ token = null;
            if (Array.isArray(param)) {
                param.forEach(function (paramEntry) {
                    if (paramEntry instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["x" /* Host */]) {
                        isHost = true;
                    }
                    else if (paramEntry instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["_4" /* Self */]) {
                        isSelf = true;
                    }
                    else if (paramEntry instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["_5" /* SkipSelf */]) {
                        isSkipSelf = true;
                    }
                    else if (paramEntry instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["Q" /* Optional */]) {
                        isOptional = true;
                    }
                    else if (paramEntry instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["g" /* Attribute */]) {
                        isAttribute = true;
                        token = paramEntry.attributeName;
                    }
                    else if (paramEntry instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */]) {
                        token = paramEntry.token;
                    }
                    else if (paramEntry instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["C" /* InjectionToken */]) {
                        token = paramEntry;
                    }
                    else if (isValidType(paramEntry) && token == null) {
                        token = paramEntry;
                    }
                });
            }
            else {
                token = param;
            }
            if (token == null) {
                hasUnknownDeps = true;
                return ((null));
            }
            return {
                isAttribute: isAttribute,
                isHost: isHost,
                isSelf: isSelf,
                isSkipSelf: isSkipSelf,
                isOptional: isOptional,
                token: _this._getTokenMetadata(token)
            };
        });
        if (hasUnknownDeps) {
            var /** @type {?} */ depsTokens = dependenciesMetadata.map(function (dep) { return dep ? stringifyType(dep.token) : '?'; }).join(', ');
            var /** @type {?} */ message = "Can't resolve all parameters for " + stringifyType(typeOrFunc) + ": (" + depsTokens + ").";
            if (throwOnUnknownDeps) {
                this._reportError(syntaxError(message), typeOrFunc);
            }
            else {
                this._console.warn("Warning: " + message + " This will become an error in Angular v5.x");
            }
        }
        return dependenciesMetadata;
    };
    /**
     * @param {?} token
     * @return {?}
     */
    CompileMetadataResolver.prototype._getTokenMetadata = function (token) {
        token = Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_25" /* resolveForwardRef */])(token);
        var /** @type {?} */ compileToken;
        if (typeof token === 'string') {
            compileToken = { value: token };
        }
        else {
            compileToken = { identifier: { reference: token } };
        }
        return compileToken;
    };
    /**
     * @param {?} providers
     * @param {?} targetEntryComponents
     * @param {?=} debugInfo
     * @param {?=} compileProviders
     * @param {?=} type
     * @return {?}
     */
    CompileMetadataResolver.prototype._getProvidersMetadata = function (providers, targetEntryComponents, debugInfo, compileProviders, type) {
        var _this = this;
        if (compileProviders === void 0) { compileProviders = []; }
        providers.forEach(function (provider, providerIdx) {
            if (Array.isArray(provider)) {
                _this._getProvidersMetadata(provider, targetEntryComponents, debugInfo, compileProviders);
            }
            else {
                provider = Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_25" /* resolveForwardRef */])(provider);
                var /** @type {?} */ providerMeta = ((undefined));
                if (provider && typeof provider === 'object' && provider.hasOwnProperty('provide')) {
                    _this._validateProvider(provider);
                    providerMeta = new ProviderMeta(provider.provide, provider);
                }
                else if (isValidType(provider)) {
                    providerMeta = new ProviderMeta(provider, { useClass: provider });
                }
                else if (provider === void 0) {
                    _this._reportError(syntaxError("Encountered undefined provider! Usually this means you have a circular dependencies (might be caused by using 'barrel' index.ts files."));
                    return;
                }
                else {
                    var /** @type {?} */ providersInfo = ((providers.reduce(function (soFar, seenProvider, seenProviderIdx) {
                        if (seenProviderIdx < providerIdx) {
                            soFar.push("" + stringifyType(seenProvider));
                        }
                        else if (seenProviderIdx == providerIdx) {
                            soFar.push("?" + stringifyType(seenProvider) + "?");
                        }
                        else if (seenProviderIdx == providerIdx + 1) {
                            soFar.push('...');
                        }
                        return soFar;
                    }, [])))
                        .join(', ');
                    _this._reportError(syntaxError("Invalid " + (debugInfo ? debugInfo : 'provider') + " - only instances of Provider and Type are allowed, got: [" + providersInfo + "]"), type);
                    return;
                }
                if (providerMeta.token ===
                    _this._reflector.resolveExternalReference(Identifiers.ANALYZE_FOR_ENTRY_COMPONENTS)) {
                    targetEntryComponents.push.apply(targetEntryComponents, _this._getEntryComponentsFromProvider(providerMeta, type));
                }
                else {
                    compileProviders.push(_this.getProviderMetadata(providerMeta));
                }
            }
        });
        return compileProviders;
    };
    /**
     * @param {?} provider
     * @return {?}
     */
    CompileMetadataResolver.prototype._validateProvider = function (provider) {
        if (provider.hasOwnProperty('useClass') && provider.useClass == null) {
            this._reportError(syntaxError("Invalid provider for " + stringifyType(provider.provide) + ". useClass cannot be " + provider.useClass + ".\n           Usually it happens when:\n           1. There's a circular dependency (might be caused by using index.ts (barrel) files).\n           2. Class was used before it was declared. Use forwardRef in this case."));
        }
    };
    /**
     * @param {?} provider
     * @param {?=} type
     * @return {?}
     */
    CompileMetadataResolver.prototype._getEntryComponentsFromProvider = function (provider, type) {
        var _this = this;
        var /** @type {?} */ components = [];
        var /** @type {?} */ collectedIdentifiers = [];
        if (provider.useFactory || provider.useExisting || provider.useClass) {
            this._reportError(syntaxError("The ANALYZE_FOR_ENTRY_COMPONENTS token only supports useValue!"), type);
            return [];
        }
        if (!provider.multi) {
            this._reportError(syntaxError("The ANALYZE_FOR_ENTRY_COMPONENTS token only supports 'multi = true'!"), type);
            return [];
        }
        extractIdentifiers(provider.useValue, collectedIdentifiers);
        collectedIdentifiers.forEach(function (identifier) {
            var /** @type {?} */ entry = _this._getEntryComponentMetadata(identifier.reference, false);
            if (entry) {
                components.push(entry);
            }
        });
        return components;
    };
    /**
     * @param {?} dirType
     * @param {?=} throwIfNotFound
     * @return {?}
     */
    CompileMetadataResolver.prototype._getEntryComponentMetadata = function (dirType, throwIfNotFound) {
        if (throwIfNotFound === void 0) { throwIfNotFound = true; }
        var /** @type {?} */ dirMeta = this.getNonNormalizedDirectiveMetadata(dirType);
        if (dirMeta && dirMeta.metadata.isComponent) {
            return { componentType: dirType, componentFactory: /** @type {?} */ ((dirMeta.metadata.componentFactory)) };
        }
        var /** @type {?} */ dirSummary = (this._loadSummary(dirType, CompileSummaryKind.Directive));
        if (dirSummary && dirSummary.isComponent) {
            return { componentType: dirType, componentFactory: /** @type {?} */ ((dirSummary.componentFactory)) };
        }
        if (throwIfNotFound) {
            throw syntaxError(dirType.name + " cannot be used as an entry component.");
        }
        return null;
    };
    /**
     * @param {?} provider
     * @return {?}
     */
    CompileMetadataResolver.prototype.getProviderMetadata = function (provider) {
        var /** @type {?} */ compileDeps = ((undefined));
        var /** @type {?} */ compileTypeMetadata = ((null));
        var /** @type {?} */ compileFactoryMetadata = ((null));
        var /** @type {?} */ token = this._getTokenMetadata(provider.token);
        if (provider.useClass) {
            compileTypeMetadata = this._getInjectableMetadata(provider.useClass, provider.dependencies);
            compileDeps = compileTypeMetadata.diDeps;
            if (provider.token === provider.useClass) {
                // use the compileTypeMetadata as it contains information about lifecycleHooks...
                token = { identifier: compileTypeMetadata };
            }
        }
        else if (provider.useFactory) {
            compileFactoryMetadata = this._getFactoryMetadata(provider.useFactory, provider.dependencies);
            compileDeps = compileFactoryMetadata.diDeps;
        }
        return {
            token: token,
            useClass: compileTypeMetadata,
            useValue: provider.useValue,
            useFactory: compileFactoryMetadata,
            useExisting: provider.useExisting ? this._getTokenMetadata(provider.useExisting) : undefined,
            deps: compileDeps,
            multi: provider.multi
        };
    };
    /**
     * @param {?} queries
     * @param {?} isViewQuery
     * @param {?} directiveType
     * @return {?}
     */
    CompileMetadataResolver.prototype._getQueriesMetadata = function (queries, isViewQuery, directiveType) {
        var _this = this;
        var /** @type {?} */ res = [];
        Object.keys(queries).forEach(function (propertyName) {
            var /** @type {?} */ query = queries[propertyName];
            if (query.isViewQuery === isViewQuery) {
                res.push(_this._getQueryMetadata(query, propertyName, directiveType));
            }
        });
        return res;
    };
    /**
     * @param {?} selector
     * @return {?}
     */
    CompileMetadataResolver.prototype._queryVarBindings = function (selector) { return selector.split(/\s*,\s*/); };
    /**
     * @param {?} q
     * @param {?} propertyName
     * @param {?} typeOrFunc
     * @return {?}
     */
    CompileMetadataResolver.prototype._getQueryMetadata = function (q, propertyName, typeOrFunc) {
        var _this = this;
        var /** @type {?} */ selectors;
        if (typeof q.selector === 'string') {
            selectors =
                this._queryVarBindings(q.selector).map(function (varName) { return _this._getTokenMetadata(varName); });
        }
        else {
            if (!q.selector) {
                this._reportError(syntaxError("Can't construct a query for the property \"" + propertyName + "\" of \"" + stringifyType(typeOrFunc) + "\" since the query selector wasn't defined."), typeOrFunc);
                selectors = [];
            }
            else {
                selectors = [this._getTokenMetadata(q.selector)];
            }
        }
        return {
            selectors: selectors,
            first: q.first,
            descendants: q.descendants, propertyName: propertyName,
            read: q.read ? this._getTokenMetadata(q.read) : ((null))
        };
    };
    /**
     * @param {?} error
     * @param {?=} type
     * @param {?=} otherType
     * @return {?}
     */
    CompileMetadataResolver.prototype._reportError = function (error, type, otherType) {
        if (this._errorCollector) {
            this._errorCollector(error, type);
            if (otherType) {
                this._errorCollector(error, otherType);
            }
        }
        else {
            throw error;
        }
    };
    return CompileMetadataResolver;
}());
CompileMetadataResolver.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
CompileMetadataResolver.ctorParameters = function () { return [
    { type: CompilerConfig, },
    { type: NgModuleResolver, },
    { type: DirectiveResolver, },
    { type: PipeResolver, },
    { type: SummaryResolver, },
    { type: ElementSchemaRegistry, },
    { type: DirectiveNormalizer, },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_33" /* Console */], },
    { type: StaticSymbolCache, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["Q" /* Optional */] },] },
    { type: CompileReflector, },
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["Q" /* Optional */] }, { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */], args: [ERROR_COLLECTOR_TOKEN,] },] },
]; };
/**
 * @param {?} tree
 * @param {?=} out
 * @return {?}
 */
function flattenArray(tree, out) {
    if (out === void 0) { out = []; }
    if (tree) {
        for (var /** @type {?} */ i = 0; i < tree.length; i++) {
            var /** @type {?} */ item = Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_25" /* resolveForwardRef */])(tree[i]);
            if (Array.isArray(item)) {
                flattenArray(item, out);
            }
            else {
                out.push(item);
            }
        }
    }
    return out;
}
/**
 * @param {?} array
 * @return {?}
 */
function dedupeArray(array) {
    if (array) {
        return Array.from(new Set(array));
    }
    return [];
}
/**
 * @param {?} tree
 * @return {?}
 */
function flattenAndDedupeArray(tree) {
    return dedupeArray(flattenArray(tree));
}
/**
 * @param {?} value
 * @return {?}
 */
function isValidType(value) {
    return (value instanceof StaticSymbol) || (value instanceof __WEBPACK_IMPORTED_MODULE_1__angular_core__["_10" /* Type */]);
}
/**
 * @param {?} value
 * @param {?} targetIdentifiers
 * @return {?}
 */
function extractIdentifiers(value, targetIdentifiers) {
    visitValue(value, new _CompileValueConverter(), targetIdentifiers);
}
var _CompileValueConverter = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](_CompileValueConverter, _super);
    function _CompileValueConverter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @param {?} value
     * @param {?} targetIdentifiers
     * @return {?}
     */
    _CompileValueConverter.prototype.visitOther = function (value, targetIdentifiers) {
        targetIdentifiers.push({ reference: value });
    };
    return _CompileValueConverter;
}(ValueTransformer));
/**
 * @param {?} type
 * @return {?}
 */
function stringifyType(type) {
    if (type instanceof StaticSymbol) {
        return type.name + " in " + type.filePath;
    }
    else {
        return Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(type);
    }
}
/**
 * Indicates that a component is still being loaded in a synchronous compile.
 * @param {?} compType
 * @return {?}
 */
function componentStillLoadingError(compType) {
    var /** @type {?} */ error = Error("Can't compile synchronously as " + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(compType) + " is still being loaded!");
    ((error))[__WEBPACK_IMPORTED_MODULE_1__angular_core__["_36" /* ERROR_COMPONENT_TYPE */]] = compType;
    return error;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var TypeModifier = {};
TypeModifier.Const = 0;
TypeModifier[TypeModifier.Const] = "Const";
/**
 * @abstract
 */
var Type$1 = (function () {
    /**
     * @param {?=} modifiers
     */
    function Type$1(modifiers) {
        if (modifiers === void 0) { modifiers = null; }
        this.modifiers = modifiers;
        if (!modifiers) {
            this.modifiers = [];
        }
    }
    /**
     * @abstract
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    Type$1.prototype.visitType = function (visitor, context) { };
    /**
     * @param {?} modifier
     * @return {?}
     */
    Type$1.prototype.hasModifier = function (modifier) { return ((this.modifiers)).indexOf(modifier) !== -1; };
    return Type$1;
}());
var BuiltinTypeName = {};
BuiltinTypeName.Dynamic = 0;
BuiltinTypeName.Bool = 1;
BuiltinTypeName.String = 2;
BuiltinTypeName.Int = 3;
BuiltinTypeName.Number = 4;
BuiltinTypeName.Function = 5;
BuiltinTypeName.Inferred = 6;
BuiltinTypeName[BuiltinTypeName.Dynamic] = "Dynamic";
BuiltinTypeName[BuiltinTypeName.Bool] = "Bool";
BuiltinTypeName[BuiltinTypeName.String] = "String";
BuiltinTypeName[BuiltinTypeName.Int] = "Int";
BuiltinTypeName[BuiltinTypeName.Number] = "Number";
BuiltinTypeName[BuiltinTypeName.Function] = "Function";
BuiltinTypeName[BuiltinTypeName.Inferred] = "Inferred";
var BuiltinType = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](BuiltinType, _super);
    /**
     * @param {?} name
     * @param {?=} modifiers
     */
    function BuiltinType(name, modifiers) {
        if (modifiers === void 0) { modifiers = null; }
        var _this = _super.call(this, modifiers) || this;
        _this.name = name;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    BuiltinType.prototype.visitType = function (visitor, context) {
        return visitor.visitBuiltintType(this, context);
    };
    return BuiltinType;
}(Type$1));
var ExpressionType = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ExpressionType, _super);
    /**
     * @param {?} value
     * @param {?=} modifiers
     */
    function ExpressionType(value, modifiers) {
        if (modifiers === void 0) { modifiers = null; }
        var _this = _super.call(this, modifiers) || this;
        _this.value = value;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ExpressionType.prototype.visitType = function (visitor, context) {
        return visitor.visitExpressionType(this, context);
    };
    return ExpressionType;
}(Type$1));
var ArrayType = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ArrayType, _super);
    /**
     * @param {?} of
     * @param {?=} modifiers
     */
    function ArrayType(of, modifiers) {
        if (modifiers === void 0) { modifiers = null; }
        var _this = _super.call(this, modifiers) || this;
        _this.of = of;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ArrayType.prototype.visitType = function (visitor, context) {
        return visitor.visitArrayType(this, context);
    };
    return ArrayType;
}(Type$1));
var MapType = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](MapType, _super);
    /**
     * @param {?} valueType
     * @param {?=} modifiers
     */
    function MapType(valueType, modifiers) {
        if (modifiers === void 0) { modifiers = null; }
        var _this = _super.call(this, modifiers) || this;
        _this.valueType = valueType || null;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    MapType.prototype.visitType = function (visitor, context) { return visitor.visitMapType(this, context); };
    return MapType;
}(Type$1));
var DYNAMIC_TYPE = new BuiltinType(BuiltinTypeName.Dynamic);
var INFERRED_TYPE = new BuiltinType(BuiltinTypeName.Inferred);
var BOOL_TYPE = new BuiltinType(BuiltinTypeName.Bool);
var INT_TYPE = new BuiltinType(BuiltinTypeName.Int);
var NUMBER_TYPE = new BuiltinType(BuiltinTypeName.Number);
var STRING_TYPE = new BuiltinType(BuiltinTypeName.String);
var FUNCTION_TYPE = new BuiltinType(BuiltinTypeName.Function);
var BinaryOperator = {};
BinaryOperator.Equals = 0;
BinaryOperator.NotEquals = 1;
BinaryOperator.Identical = 2;
BinaryOperator.NotIdentical = 3;
BinaryOperator.Minus = 4;
BinaryOperator.Plus = 5;
BinaryOperator.Divide = 6;
BinaryOperator.Multiply = 7;
BinaryOperator.Modulo = 8;
BinaryOperator.And = 9;
BinaryOperator.Or = 10;
BinaryOperator.Lower = 11;
BinaryOperator.LowerEquals = 12;
BinaryOperator.Bigger = 13;
BinaryOperator.BiggerEquals = 14;
BinaryOperator[BinaryOperator.Equals] = "Equals";
BinaryOperator[BinaryOperator.NotEquals] = "NotEquals";
BinaryOperator[BinaryOperator.Identical] = "Identical";
BinaryOperator[BinaryOperator.NotIdentical] = "NotIdentical";
BinaryOperator[BinaryOperator.Minus] = "Minus";
BinaryOperator[BinaryOperator.Plus] = "Plus";
BinaryOperator[BinaryOperator.Divide] = "Divide";
BinaryOperator[BinaryOperator.Multiply] = "Multiply";
BinaryOperator[BinaryOperator.Modulo] = "Modulo";
BinaryOperator[BinaryOperator.And] = "And";
BinaryOperator[BinaryOperator.Or] = "Or";
BinaryOperator[BinaryOperator.Lower] = "Lower";
BinaryOperator[BinaryOperator.LowerEquals] = "LowerEquals";
BinaryOperator[BinaryOperator.Bigger] = "Bigger";
BinaryOperator[BinaryOperator.BiggerEquals] = "BiggerEquals";
/**
 * @abstract
 */
var Expression = (function () {
    /**
     * @param {?} type
     * @param {?=} sourceSpan
     */
    function Expression(type, sourceSpan) {
        this.type = type || null;
        this.sourceSpan = sourceSpan || null;
    }
    /**
     * @abstract
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    Expression.prototype.visitExpression = function (visitor, context) { };
    /**
     * @param {?} name
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.prop = function (name, sourceSpan) {
        return new ReadPropExpr(this, name, null, sourceSpan);
    };
    /**
     * @param {?} index
     * @param {?=} type
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.key = function (index, type, sourceSpan) {
        return new ReadKeyExpr(this, index, type, sourceSpan);
    };
    /**
     * @param {?} name
     * @param {?} params
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.callMethod = function (name, params, sourceSpan) {
        return new InvokeMethodExpr(this, name, params, null, sourceSpan);
    };
    /**
     * @param {?} params
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.callFn = function (params, sourceSpan) {
        return new InvokeFunctionExpr(this, params, null, sourceSpan);
    };
    /**
     * @param {?} params
     * @param {?=} type
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.instantiate = function (params, type, sourceSpan) {
        return new InstantiateExpr(this, params, type, sourceSpan);
    };
    /**
     * @param {?} trueCase
     * @param {?=} falseCase
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.conditional = function (trueCase, falseCase, sourceSpan) {
        if (falseCase === void 0) { falseCase = null; }
        return new ConditionalExpr(this, trueCase, falseCase, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.equals = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.Equals, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.notEquals = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.NotEquals, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.identical = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.Identical, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.notIdentical = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.NotIdentical, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.minus = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.Minus, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.plus = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.Plus, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.divide = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.Divide, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.multiply = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.Multiply, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.modulo = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.Modulo, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.and = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.And, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.or = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.Or, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.lower = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.Lower, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.lowerEquals = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.LowerEquals, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.bigger = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.Bigger, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?} rhs
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.biggerEquals = function (rhs, sourceSpan) {
        return new BinaryOperatorExpr(BinaryOperator.BiggerEquals, this, rhs, null, sourceSpan);
    };
    /**
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.isBlank = function (sourceSpan) {
        // Note: We use equals by purpose here to compare to null and undefined in JS.
        // We use the typed null to allow strictNullChecks to narrow types.
        return this.equals(TYPED_NULL_EXPR, sourceSpan);
    };
    /**
     * @param {?} type
     * @param {?=} sourceSpan
     * @return {?}
     */
    Expression.prototype.cast = function (type, sourceSpan) {
        return new CastExpr(this, type, sourceSpan);
    };
    /**
     * @return {?}
     */
    Expression.prototype.toStmt = function () { return new ExpressionStatement(this, null); };
    return Expression;
}());
var BuiltinVar = {};
BuiltinVar.This = 0;
BuiltinVar.Super = 1;
BuiltinVar.CatchError = 2;
BuiltinVar.CatchStack = 3;
BuiltinVar[BuiltinVar.This] = "This";
BuiltinVar[BuiltinVar.Super] = "Super";
BuiltinVar[BuiltinVar.CatchError] = "CatchError";
BuiltinVar[BuiltinVar.CatchStack] = "CatchStack";
var ReadVarExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ReadVarExpr, _super);
    /**
     * @param {?} name
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function ReadVarExpr(name, type, sourceSpan) {
        var _this = _super.call(this, type, sourceSpan) || this;
        if (typeof name === 'string') {
            _this.name = name;
            _this.builtin = null;
        }
        else {
            _this.name = null;
            _this.builtin = name;
        }
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ReadVarExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitReadVarExpr(this, context);
    };
    /**
     * @param {?} value
     * @return {?}
     */
    ReadVarExpr.prototype.set = function (value) {
        if (!this.name) {
            throw new Error("Built in variable " + this.builtin + " can not be assigned to.");
        }
        return new WriteVarExpr(this.name, value, null, this.sourceSpan);
    };
    return ReadVarExpr;
}(Expression));
var WriteVarExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](WriteVarExpr, _super);
    /**
     * @param {?} name
     * @param {?} value
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function WriteVarExpr(name, value, type, sourceSpan) {
        var _this = _super.call(this, type || value.type, sourceSpan) || this;
        _this.name = name;
        _this.value = value;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    WriteVarExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitWriteVarExpr(this, context);
    };
    /**
     * @param {?=} type
     * @param {?=} modifiers
     * @return {?}
     */
    WriteVarExpr.prototype.toDeclStmt = function (type, modifiers) {
        return new DeclareVarStmt(this.name, this.value, type, modifiers, this.sourceSpan);
    };
    return WriteVarExpr;
}(Expression));
var WriteKeyExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](WriteKeyExpr, _super);
    /**
     * @param {?} receiver
     * @param {?} index
     * @param {?} value
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function WriteKeyExpr(receiver, index, value, type, sourceSpan) {
        var _this = _super.call(this, type || value.type, sourceSpan) || this;
        _this.receiver = receiver;
        _this.index = index;
        _this.value = value;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    WriteKeyExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitWriteKeyExpr(this, context);
    };
    return WriteKeyExpr;
}(Expression));
var WritePropExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](WritePropExpr, _super);
    /**
     * @param {?} receiver
     * @param {?} name
     * @param {?} value
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function WritePropExpr(receiver, name, value, type, sourceSpan) {
        var _this = _super.call(this, type || value.type, sourceSpan) || this;
        _this.receiver = receiver;
        _this.name = name;
        _this.value = value;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    WritePropExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitWritePropExpr(this, context);
    };
    return WritePropExpr;
}(Expression));
var BuiltinMethod = {};
BuiltinMethod.ConcatArray = 0;
BuiltinMethod.SubscribeObservable = 1;
BuiltinMethod.Bind = 2;
BuiltinMethod[BuiltinMethod.ConcatArray] = "ConcatArray";
BuiltinMethod[BuiltinMethod.SubscribeObservable] = "SubscribeObservable";
BuiltinMethod[BuiltinMethod.Bind] = "Bind";
var InvokeMethodExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](InvokeMethodExpr, _super);
    /**
     * @param {?} receiver
     * @param {?} method
     * @param {?} args
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function InvokeMethodExpr(receiver, method, args, type, sourceSpan) {
        var _this = _super.call(this, type, sourceSpan) || this;
        _this.receiver = receiver;
        _this.args = args;
        if (typeof method === 'string') {
            _this.name = method;
            _this.builtin = null;
        }
        else {
            _this.name = null;
            _this.builtin = method;
        }
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    InvokeMethodExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitInvokeMethodExpr(this, context);
    };
    return InvokeMethodExpr;
}(Expression));
var InvokeFunctionExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](InvokeFunctionExpr, _super);
    /**
     * @param {?} fn
     * @param {?} args
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function InvokeFunctionExpr(fn, args, type, sourceSpan) {
        var _this = _super.call(this, type, sourceSpan) || this;
        _this.fn = fn;
        _this.args = args;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    InvokeFunctionExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitInvokeFunctionExpr(this, context);
    };
    return InvokeFunctionExpr;
}(Expression));
var InstantiateExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](InstantiateExpr, _super);
    /**
     * @param {?} classExpr
     * @param {?} args
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function InstantiateExpr(classExpr, args, type, sourceSpan) {
        var _this = _super.call(this, type, sourceSpan) || this;
        _this.classExpr = classExpr;
        _this.args = args;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    InstantiateExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitInstantiateExpr(this, context);
    };
    return InstantiateExpr;
}(Expression));
var LiteralExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](LiteralExpr, _super);
    /**
     * @param {?} value
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function LiteralExpr(value, type, sourceSpan) {
        var _this = _super.call(this, type, sourceSpan) || this;
        _this.value = value;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    LiteralExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitLiteralExpr(this, context);
    };
    return LiteralExpr;
}(Expression));
var ExternalExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ExternalExpr, _super);
    /**
     * @param {?} value
     * @param {?=} type
     * @param {?=} typeParams
     * @param {?=} sourceSpan
     */
    function ExternalExpr(value, type, typeParams, sourceSpan) {
        if (typeParams === void 0) { typeParams = null; }
        var _this = _super.call(this, type, sourceSpan) || this;
        _this.value = value;
        _this.typeParams = typeParams;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ExternalExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitExternalExpr(this, context);
    };
    return ExternalExpr;
}(Expression));
var ExternalReference = (function () {
    /**
     * @param {?} moduleName
     * @param {?} name
     * @param {?} runtime
     */
    function ExternalReference(moduleName, name, runtime) {
        this.moduleName = moduleName;
        this.name = name;
        this.runtime = runtime;
    }
    return ExternalReference;
}());
var ConditionalExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ConditionalExpr, _super);
    /**
     * @param {?} condition
     * @param {?} trueCase
     * @param {?=} falseCase
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function ConditionalExpr(condition, trueCase, falseCase, type, sourceSpan) {
        if (falseCase === void 0) { falseCase = null; }
        var _this = _super.call(this, type || trueCase.type, sourceSpan) || this;
        _this.condition = condition;
        _this.falseCase = falseCase;
        _this.trueCase = trueCase;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ConditionalExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitConditionalExpr(this, context);
    };
    return ConditionalExpr;
}(Expression));
var NotExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](NotExpr, _super);
    /**
     * @param {?} condition
     * @param {?=} sourceSpan
     */
    function NotExpr(condition, sourceSpan) {
        var _this = _super.call(this, BOOL_TYPE, sourceSpan) || this;
        _this.condition = condition;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    NotExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitNotExpr(this, context);
    };
    return NotExpr;
}(Expression));
var AssertNotNull = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](AssertNotNull, _super);
    /**
     * @param {?} condition
     * @param {?=} sourceSpan
     */
    function AssertNotNull(condition, sourceSpan) {
        var _this = _super.call(this, condition.type, sourceSpan) || this;
        _this.condition = condition;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    AssertNotNull.prototype.visitExpression = function (visitor, context) {
        return visitor.visitAssertNotNullExpr(this, context);
    };
    return AssertNotNull;
}(Expression));
var CastExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](CastExpr, _super);
    /**
     * @param {?} value
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function CastExpr(value, type, sourceSpan) {
        var _this = _super.call(this, type, sourceSpan) || this;
        _this.value = value;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    CastExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitCastExpr(this, context);
    };
    return CastExpr;
}(Expression));
var FnParam = (function () {
    /**
     * @param {?} name
     * @param {?=} type
     */
    function FnParam(name, type) {
        if (type === void 0) { type = null; }
        this.name = name;
        this.type = type;
    }
    return FnParam;
}());
var FunctionExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](FunctionExpr, _super);
    /**
     * @param {?} params
     * @param {?} statements
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function FunctionExpr(params, statements, type, sourceSpan) {
        var _this = _super.call(this, type, sourceSpan) || this;
        _this.params = params;
        _this.statements = statements;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    FunctionExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitFunctionExpr(this, context);
    };
    /**
     * @param {?} name
     * @param {?=} modifiers
     * @return {?}
     */
    FunctionExpr.prototype.toDeclStmt = function (name, modifiers) {
        if (modifiers === void 0) { modifiers = null; }
        return new DeclareFunctionStmt(name, this.params, this.statements, this.type, modifiers, this.sourceSpan);
    };
    return FunctionExpr;
}(Expression));
var BinaryOperatorExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](BinaryOperatorExpr, _super);
    /**
     * @param {?} operator
     * @param {?} lhs
     * @param {?} rhs
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function BinaryOperatorExpr(operator, lhs, rhs, type, sourceSpan) {
        var _this = _super.call(this, type || lhs.type, sourceSpan) || this;
        _this.operator = operator;
        _this.rhs = rhs;
        _this.lhs = lhs;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    BinaryOperatorExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitBinaryOperatorExpr(this, context);
    };
    return BinaryOperatorExpr;
}(Expression));
var ReadPropExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ReadPropExpr, _super);
    /**
     * @param {?} receiver
     * @param {?} name
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function ReadPropExpr(receiver, name, type, sourceSpan) {
        var _this = _super.call(this, type, sourceSpan) || this;
        _this.receiver = receiver;
        _this.name = name;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ReadPropExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitReadPropExpr(this, context);
    };
    /**
     * @param {?} value
     * @return {?}
     */
    ReadPropExpr.prototype.set = function (value) {
        return new WritePropExpr(this.receiver, this.name, value, null, this.sourceSpan);
    };
    return ReadPropExpr;
}(Expression));
var ReadKeyExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ReadKeyExpr, _super);
    /**
     * @param {?} receiver
     * @param {?} index
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function ReadKeyExpr(receiver, index, type, sourceSpan) {
        var _this = _super.call(this, type, sourceSpan) || this;
        _this.receiver = receiver;
        _this.index = index;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ReadKeyExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitReadKeyExpr(this, context);
    };
    /**
     * @param {?} value
     * @return {?}
     */
    ReadKeyExpr.prototype.set = function (value) {
        return new WriteKeyExpr(this.receiver, this.index, value, null, this.sourceSpan);
    };
    return ReadKeyExpr;
}(Expression));
var LiteralArrayExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](LiteralArrayExpr, _super);
    /**
     * @param {?} entries
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function LiteralArrayExpr(entries, type, sourceSpan) {
        var _this = _super.call(this, type, sourceSpan) || this;
        _this.entries = entries;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    LiteralArrayExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitLiteralArrayExpr(this, context);
    };
    return LiteralArrayExpr;
}(Expression));
var LiteralMapEntry = (function () {
    /**
     * @param {?} key
     * @param {?} value
     * @param {?} quoted
     */
    function LiteralMapEntry(key, value, quoted) {
        this.key = key;
        this.value = value;
        this.quoted = quoted;
    }
    return LiteralMapEntry;
}());
var LiteralMapExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](LiteralMapExpr, _super);
    /**
     * @param {?} entries
     * @param {?=} type
     * @param {?=} sourceSpan
     */
    function LiteralMapExpr(entries, type, sourceSpan) {
        var _this = _super.call(this, type, sourceSpan) || this;
        _this.entries = entries;
        _this.valueType = null;
        if (type) {
            _this.valueType = type.valueType;
        }
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    LiteralMapExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitLiteralMapExpr(this, context);
    };
    return LiteralMapExpr;
}(Expression));
var CommaExpr = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](CommaExpr, _super);
    /**
     * @param {?} parts
     * @param {?=} sourceSpan
     */
    function CommaExpr(parts, sourceSpan) {
        var _this = _super.call(this, parts[parts.length - 1].type, sourceSpan) || this;
        _this.parts = parts;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    CommaExpr.prototype.visitExpression = function (visitor, context) {
        return visitor.visitCommaExpr(this, context);
    };
    return CommaExpr;
}(Expression));
var THIS_EXPR = new ReadVarExpr(BuiltinVar.This, null, null);
var SUPER_EXPR = new ReadVarExpr(BuiltinVar.Super, null, null);
var CATCH_ERROR_VAR = new ReadVarExpr(BuiltinVar.CatchError, null, null);
var CATCH_STACK_VAR = new ReadVarExpr(BuiltinVar.CatchStack, null, null);
var NULL_EXPR = new LiteralExpr(null, null, null);
var TYPED_NULL_EXPR = new LiteralExpr(null, INFERRED_TYPE, null);
var StmtModifier = {};
StmtModifier.Final = 0;
StmtModifier.Private = 1;
StmtModifier.Exported = 2;
StmtModifier[StmtModifier.Final] = "Final";
StmtModifier[StmtModifier.Private] = "Private";
StmtModifier[StmtModifier.Exported] = "Exported";
/**
 * @abstract
 */
var Statement = (function () {
    /**
     * @param {?=} modifiers
     * @param {?=} sourceSpan
     */
    function Statement(modifiers, sourceSpan) {
        this.modifiers = modifiers || [];
        this.sourceSpan = sourceSpan || null;
    }
    /**
     * @abstract
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    Statement.prototype.visitStatement = function (visitor, context) { };
    /**
     * @param {?} modifier
     * @return {?}
     */
    Statement.prototype.hasModifier = function (modifier) { return ((this.modifiers)).indexOf(modifier) !== -1; };
    return Statement;
}());
var DeclareVarStmt = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](DeclareVarStmt, _super);
    /**
     * @param {?} name
     * @param {?} value
     * @param {?=} type
     * @param {?=} modifiers
     * @param {?=} sourceSpan
     */
    function DeclareVarStmt(name, value, type, modifiers, sourceSpan) {
        if (modifiers === void 0) { modifiers = null; }
        var _this = _super.call(this, modifiers, sourceSpan) || this;
        _this.name = name;
        _this.value = value;
        _this.type = type || value.type;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    DeclareVarStmt.prototype.visitStatement = function (visitor, context) {
        return visitor.visitDeclareVarStmt(this, context);
    };
    return DeclareVarStmt;
}(Statement));
var DeclareFunctionStmt = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](DeclareFunctionStmt, _super);
    /**
     * @param {?} name
     * @param {?} params
     * @param {?} statements
     * @param {?=} type
     * @param {?=} modifiers
     * @param {?=} sourceSpan
     */
    function DeclareFunctionStmt(name, params, statements, type, modifiers, sourceSpan) {
        if (modifiers === void 0) { modifiers = null; }
        var _this = _super.call(this, modifiers, sourceSpan) || this;
        _this.name = name;
        _this.params = params;
        _this.statements = statements;
        _this.type = type || null;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    DeclareFunctionStmt.prototype.visitStatement = function (visitor, context) {
        return visitor.visitDeclareFunctionStmt(this, context);
    };
    return DeclareFunctionStmt;
}(Statement));
var ExpressionStatement = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ExpressionStatement, _super);
    /**
     * @param {?} expr
     * @param {?=} sourceSpan
     */
    function ExpressionStatement(expr, sourceSpan) {
        var _this = _super.call(this, null, sourceSpan) || this;
        _this.expr = expr;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ExpressionStatement.prototype.visitStatement = function (visitor, context) {
        return visitor.visitExpressionStmt(this, context);
    };
    return ExpressionStatement;
}(Statement));
var ReturnStatement = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ReturnStatement, _super);
    /**
     * @param {?} value
     * @param {?=} sourceSpan
     */
    function ReturnStatement(value, sourceSpan) {
        var _this = _super.call(this, null, sourceSpan) || this;
        _this.value = value;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ReturnStatement.prototype.visitStatement = function (visitor, context) {
        return visitor.visitReturnStmt(this, context);
    };
    return ReturnStatement;
}(Statement));
var AbstractClassPart = (function () {
    /**
     * @param {?} type
     * @param {?} modifiers
     */
    function AbstractClassPart(type, modifiers) {
        this.modifiers = modifiers;
        if (!modifiers) {
            this.modifiers = [];
        }
        this.type = type || null;
    }
    /**
     * @param {?} modifier
     * @return {?}
     */
    AbstractClassPart.prototype.hasModifier = function (modifier) { return ((this.modifiers)).indexOf(modifier) !== -1; };
    return AbstractClassPart;
}());
var ClassMethod = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ClassMethod, _super);
    /**
     * @param {?} name
     * @param {?} params
     * @param {?} body
     * @param {?=} type
     * @param {?=} modifiers
     */
    function ClassMethod(name, params, body, type, modifiers) {
        if (modifiers === void 0) { modifiers = null; }
        var _this = _super.call(this, type, modifiers) || this;
        _this.name = name;
        _this.params = params;
        _this.body = body;
        return _this;
    }
    return ClassMethod;
}(AbstractClassPart));
var ClassGetter = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ClassGetter, _super);
    /**
     * @param {?} name
     * @param {?} body
     * @param {?=} type
     * @param {?=} modifiers
     */
    function ClassGetter(name, body, type, modifiers) {
        if (modifiers === void 0) { modifiers = null; }
        var _this = _super.call(this, type, modifiers) || this;
        _this.name = name;
        _this.body = body;
        return _this;
    }
    return ClassGetter;
}(AbstractClassPart));
var ClassStmt = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ClassStmt, _super);
    /**
     * @param {?} name
     * @param {?} parent
     * @param {?} fields
     * @param {?} getters
     * @param {?} constructorMethod
     * @param {?} methods
     * @param {?=} modifiers
     * @param {?=} sourceSpan
     */
    function ClassStmt(name, parent, fields, getters, constructorMethod, methods, modifiers, sourceSpan) {
        if (modifiers === void 0) { modifiers = null; }
        var _this = _super.call(this, modifiers, sourceSpan) || this;
        _this.name = name;
        _this.parent = parent;
        _this.fields = fields;
        _this.getters = getters;
        _this.constructorMethod = constructorMethod;
        _this.methods = methods;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ClassStmt.prototype.visitStatement = function (visitor, context) {
        return visitor.visitDeclareClassStmt(this, context);
    };
    return ClassStmt;
}(Statement));
var IfStmt = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](IfStmt, _super);
    /**
     * @param {?} condition
     * @param {?} trueCase
     * @param {?=} falseCase
     * @param {?=} sourceSpan
     */
    function IfStmt(condition, trueCase, falseCase, sourceSpan) {
        if (falseCase === void 0) { falseCase = []; }
        var _this = _super.call(this, null, sourceSpan) || this;
        _this.condition = condition;
        _this.trueCase = trueCase;
        _this.falseCase = falseCase;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    IfStmt.prototype.visitStatement = function (visitor, context) {
        return visitor.visitIfStmt(this, context);
    };
    return IfStmt;
}(Statement));
var CommentStmt = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](CommentStmt, _super);
    /**
     * @param {?} comment
     * @param {?=} sourceSpan
     */
    function CommentStmt(comment, sourceSpan) {
        var _this = _super.call(this, null, sourceSpan) || this;
        _this.comment = comment;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    CommentStmt.prototype.visitStatement = function (visitor, context) {
        return visitor.visitCommentStmt(this, context);
    };
    return CommentStmt;
}(Statement));
var TryCatchStmt = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](TryCatchStmt, _super);
    /**
     * @param {?} bodyStmts
     * @param {?} catchStmts
     * @param {?=} sourceSpan
     */
    function TryCatchStmt(bodyStmts, catchStmts, sourceSpan) {
        var _this = _super.call(this, null, sourceSpan) || this;
        _this.bodyStmts = bodyStmts;
        _this.catchStmts = catchStmts;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    TryCatchStmt.prototype.visitStatement = function (visitor, context) {
        return visitor.visitTryCatchStmt(this, context);
    };
    return TryCatchStmt;
}(Statement));
var ThrowStmt = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ThrowStmt, _super);
    /**
     * @param {?} error
     * @param {?=} sourceSpan
     */
    function ThrowStmt(error, sourceSpan) {
        var _this = _super.call(this, null, sourceSpan) || this;
        _this.error = error;
        return _this;
    }
    /**
     * @param {?} visitor
     * @param {?} context
     * @return {?}
     */
    ThrowStmt.prototype.visitStatement = function (visitor, context) {
        return visitor.visitThrowStmt(this, context);
    };
    return ThrowStmt;
}(Statement));
var AstTransformer$1 = (function () {
    function AstTransformer$1() {
    }
    /**
     * @param {?} expr
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.transformExpr = function (expr, context) { return expr; };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.transformStmt = function (stmt, context) { return stmt; };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitReadVarExpr = function (ast, context) { return this.transformExpr(ast, context); };
    /**
     * @param {?} expr
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitWriteVarExpr = function (expr, context) {
        return this.transformExpr(new WriteVarExpr(expr.name, expr.value.visitExpression(this, context), expr.type, expr.sourceSpan), context);
    };
    /**
     * @param {?} expr
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitWriteKeyExpr = function (expr, context) {
        return this.transformExpr(new WriteKeyExpr(expr.receiver.visitExpression(this, context), expr.index.visitExpression(this, context), expr.value.visitExpression(this, context), expr.type, expr.sourceSpan), context);
    };
    /**
     * @param {?} expr
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitWritePropExpr = function (expr, context) {
        return this.transformExpr(new WritePropExpr(expr.receiver.visitExpression(this, context), expr.name, expr.value.visitExpression(this, context), expr.type, expr.sourceSpan), context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitInvokeMethodExpr = function (ast, context) {
        var /** @type {?} */ method = ast.builtin || ast.name;
        return this.transformExpr(new InvokeMethodExpr(ast.receiver.visitExpression(this, context), /** @type {?} */ ((method)), this.visitAllExpressions(ast.args, context), ast.type, ast.sourceSpan), context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitInvokeFunctionExpr = function (ast, context) {
        return this.transformExpr(new InvokeFunctionExpr(ast.fn.visitExpression(this, context), this.visitAllExpressions(ast.args, context), ast.type, ast.sourceSpan), context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitInstantiateExpr = function (ast, context) {
        return this.transformExpr(new InstantiateExpr(ast.classExpr.visitExpression(this, context), this.visitAllExpressions(ast.args, context), ast.type, ast.sourceSpan), context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitLiteralExpr = function (ast, context) { return this.transformExpr(ast, context); };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitExternalExpr = function (ast, context) {
        return this.transformExpr(ast, context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitConditionalExpr = function (ast, context) {
        return this.transformExpr(new ConditionalExpr(ast.condition.visitExpression(this, context), ast.trueCase.visitExpression(this, context), /** @type {?} */ ((ast.falseCase)).visitExpression(this, context), ast.type, ast.sourceSpan), context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitNotExpr = function (ast, context) {
        return this.transformExpr(new NotExpr(ast.condition.visitExpression(this, context), ast.sourceSpan), context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitAssertNotNullExpr = function (ast, context) {
        return this.transformExpr(new AssertNotNull(ast.condition.visitExpression(this, context), ast.sourceSpan), context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitCastExpr = function (ast, context) {
        return this.transformExpr(new CastExpr(ast.value.visitExpression(this, context), ast.type, ast.sourceSpan), context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitFunctionExpr = function (ast, context) {
        return this.transformExpr(new FunctionExpr(ast.params, this.visitAllStatements(ast.statements, context), ast.type, ast.sourceSpan), context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitBinaryOperatorExpr = function (ast, context) {
        return this.transformExpr(new BinaryOperatorExpr(ast.operator, ast.lhs.visitExpression(this, context), ast.rhs.visitExpression(this, context), ast.type, ast.sourceSpan), context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitReadPropExpr = function (ast, context) {
        return this.transformExpr(new ReadPropExpr(ast.receiver.visitExpression(this, context), ast.name, ast.type, ast.sourceSpan), context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitReadKeyExpr = function (ast, context) {
        return this.transformExpr(new ReadKeyExpr(ast.receiver.visitExpression(this, context), ast.index.visitExpression(this, context), ast.type, ast.sourceSpan), context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitLiteralArrayExpr = function (ast, context) {
        return this.transformExpr(new LiteralArrayExpr(this.visitAllExpressions(ast.entries, context), ast.type, ast.sourceSpan), context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitLiteralMapExpr = function (ast, context) {
        var _this = this;
        var /** @type {?} */ entries = ast.entries.map(function (entry) { return new LiteralMapEntry(entry.key, entry.value.visitExpression(_this, context), entry.quoted); });
        var /** @type {?} */ mapType = new MapType(ast.valueType, null);
        return this.transformExpr(new LiteralMapExpr(entries, mapType, ast.sourceSpan), context);
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitCommaExpr = function (ast, context) {
        return this.transformExpr(new CommaExpr(this.visitAllExpressions(ast.parts, context), ast.sourceSpan), context);
    };
    /**
     * @param {?} exprs
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitAllExpressions = function (exprs, context) {
        var _this = this;
        return exprs.map(function (expr) { return expr.visitExpression(_this, context); });
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitDeclareVarStmt = function (stmt, context) {
        return this.transformStmt(new DeclareVarStmt(stmt.name, stmt.value.visitExpression(this, context), stmt.type, stmt.modifiers, stmt.sourceSpan), context);
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitDeclareFunctionStmt = function (stmt, context) {
        return this.transformStmt(new DeclareFunctionStmt(stmt.name, stmt.params, this.visitAllStatements(stmt.statements, context), stmt.type, stmt.modifiers, stmt.sourceSpan), context);
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitExpressionStmt = function (stmt, context) {
        return this.transformStmt(new ExpressionStatement(stmt.expr.visitExpression(this, context), stmt.sourceSpan), context);
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitReturnStmt = function (stmt, context) {
        return this.transformStmt(new ReturnStatement(stmt.value.visitExpression(this, context), stmt.sourceSpan), context);
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitDeclareClassStmt = function (stmt, context) {
        var _this = this;
        var /** @type {?} */ parent = ((stmt.parent)).visitExpression(this, context);
        var /** @type {?} */ getters = stmt.getters.map(function (getter) { return new ClassGetter(getter.name, _this.visitAllStatements(getter.body, context), getter.type, getter.modifiers); });
        var /** @type {?} */ ctorMethod = stmt.constructorMethod &&
            new ClassMethod(stmt.constructorMethod.name, stmt.constructorMethod.params, this.visitAllStatements(stmt.constructorMethod.body, context), stmt.constructorMethod.type, stmt.constructorMethod.modifiers);
        var /** @type {?} */ methods = stmt.methods.map(function (method) { return new ClassMethod(method.name, method.params, _this.visitAllStatements(method.body, context), method.type, method.modifiers); });
        return this.transformStmt(new ClassStmt(stmt.name, parent, stmt.fields, getters, ctorMethod, methods, stmt.modifiers, stmt.sourceSpan), context);
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitIfStmt = function (stmt, context) {
        return this.transformStmt(new IfStmt(stmt.condition.visitExpression(this, context), this.visitAllStatements(stmt.trueCase, context), this.visitAllStatements(stmt.falseCase, context), stmt.sourceSpan), context);
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitTryCatchStmt = function (stmt, context) {
        return this.transformStmt(new TryCatchStmt(this.visitAllStatements(stmt.bodyStmts, context), this.visitAllStatements(stmt.catchStmts, context), stmt.sourceSpan), context);
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitThrowStmt = function (stmt, context) {
        return this.transformStmt(new ThrowStmt(stmt.error.visitExpression(this, context), stmt.sourceSpan), context);
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitCommentStmt = function (stmt, context) {
        return this.transformStmt(stmt, context);
    };
    /**
     * @param {?} stmts
     * @param {?} context
     * @return {?}
     */
    AstTransformer$1.prototype.visitAllStatements = function (stmts, context) {
        var _this = this;
        return stmts.map(function (stmt) { return stmt.visitStatement(_this, context); });
    };
    return AstTransformer$1;
}());
var RecursiveAstVisitor$1 = (function () {
    function RecursiveAstVisitor$1() {
    }
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitReadVarExpr = function (ast, context) { return ast; };
    /**
     * @param {?} expr
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitWriteVarExpr = function (expr, context) {
        expr.value.visitExpression(this, context);
        return expr;
    };
    /**
     * @param {?} expr
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitWriteKeyExpr = function (expr, context) {
        expr.receiver.visitExpression(this, context);
        expr.index.visitExpression(this, context);
        expr.value.visitExpression(this, context);
        return expr;
    };
    /**
     * @param {?} expr
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitWritePropExpr = function (expr, context) {
        expr.receiver.visitExpression(this, context);
        expr.value.visitExpression(this, context);
        return expr;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitInvokeMethodExpr = function (ast, context) {
        ast.receiver.visitExpression(this, context);
        this.visitAllExpressions(ast.args, context);
        return ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitInvokeFunctionExpr = function (ast, context) {
        ast.fn.visitExpression(this, context);
        this.visitAllExpressions(ast.args, context);
        return ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitInstantiateExpr = function (ast, context) {
        ast.classExpr.visitExpression(this, context);
        this.visitAllExpressions(ast.args, context);
        return ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitLiteralExpr = function (ast, context) { return ast; };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitExternalExpr = function (ast, context) { return ast; };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitConditionalExpr = function (ast, context) {
        ast.condition.visitExpression(this, context);
        ast.trueCase.visitExpression(this, context); /** @type {?} */
        ((ast.falseCase)).visitExpression(this, context);
        return ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitNotExpr = function (ast, context) {
        ast.condition.visitExpression(this, context);
        return ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitAssertNotNullExpr = function (ast, context) {
        ast.condition.visitExpression(this, context);
        return ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitCastExpr = function (ast, context) {
        ast.value.visitExpression(this, context);
        return ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitFunctionExpr = function (ast, context) {
        this.visitAllStatements(ast.statements, context);
        return ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitBinaryOperatorExpr = function (ast, context) {
        ast.lhs.visitExpression(this, context);
        ast.rhs.visitExpression(this, context);
        return ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitReadPropExpr = function (ast, context) {
        ast.receiver.visitExpression(this, context);
        return ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitReadKeyExpr = function (ast, context) {
        ast.receiver.visitExpression(this, context);
        ast.index.visitExpression(this, context);
        return ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitLiteralArrayExpr = function (ast, context) {
        this.visitAllExpressions(ast.entries, context);
        return ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitLiteralMapExpr = function (ast, context) {
        var _this = this;
        ast.entries.forEach(function (entry) { return entry.value.visitExpression(_this, context); });
        return ast;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitCommaExpr = function (ast, context) {
        this.visitAllExpressions(ast.parts, context);
    };
    /**
     * @param {?} exprs
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitAllExpressions = function (exprs, context) {
        var _this = this;
        exprs.forEach(function (expr) { return expr.visitExpression(_this, context); });
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitDeclareVarStmt = function (stmt, context) {
        stmt.value.visitExpression(this, context);
        return stmt;
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitDeclareFunctionStmt = function (stmt, context) {
        this.visitAllStatements(stmt.statements, context);
        return stmt;
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitExpressionStmt = function (stmt, context) {
        stmt.expr.visitExpression(this, context);
        return stmt;
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitReturnStmt = function (stmt, context) {
        stmt.value.visitExpression(this, context);
        return stmt;
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitDeclareClassStmt = function (stmt, context) {
        var _this = this;
        ((stmt.parent)).visitExpression(this, context);
        stmt.getters.forEach(function (getter) { return _this.visitAllStatements(getter.body, context); });
        if (stmt.constructorMethod) {
            this.visitAllStatements(stmt.constructorMethod.body, context);
        }
        stmt.methods.forEach(function (method) { return _this.visitAllStatements(method.body, context); });
        return stmt;
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitIfStmt = function (stmt, context) {
        stmt.condition.visitExpression(this, context);
        this.visitAllStatements(stmt.trueCase, context);
        this.visitAllStatements(stmt.falseCase, context);
        return stmt;
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitTryCatchStmt = function (stmt, context) {
        this.visitAllStatements(stmt.bodyStmts, context);
        this.visitAllStatements(stmt.catchStmts, context);
        return stmt;
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitThrowStmt = function (stmt, context) {
        stmt.error.visitExpression(this, context);
        return stmt;
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitCommentStmt = function (stmt, context) { return stmt; };
    /**
     * @param {?} stmts
     * @param {?} context
     * @return {?}
     */
    RecursiveAstVisitor$1.prototype.visitAllStatements = function (stmts, context) {
        var _this = this;
        stmts.forEach(function (stmt) { return stmt.visitStatement(_this, context); });
    };
    return RecursiveAstVisitor$1;
}());
/**
 * @param {?} stmts
 * @return {?}
 */
function findReadVarNames(stmts) {
    var /** @type {?} */ visitor = new _ReadVarVisitor();
    visitor.visitAllStatements(stmts, null);
    return visitor.varNames;
}
var _ReadVarVisitor = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](_ReadVarVisitor, _super);
    function _ReadVarVisitor() {
        var _this = _super.apply(this, arguments) || this;
        _this.varNames = new Set();
        return _this;
    }
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    _ReadVarVisitor.prototype.visitDeclareFunctionStmt = function (stmt, context) {
        // Don't descend into nested functions
        return stmt;
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    _ReadVarVisitor.prototype.visitDeclareClassStmt = function (stmt, context) {
        // Don't descend into nested classes
        return stmt;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    _ReadVarVisitor.prototype.visitReadVarExpr = function (ast, context) {
        if (ast.name) {
            this.varNames.add(ast.name);
        }
        return null;
    };
    return _ReadVarVisitor;
}(RecursiveAstVisitor$1));
/**
 * @param {?} stmt
 * @param {?} sourceSpan
 * @return {?}
 */
function applySourceSpanToStatementIfNeeded(stmt, sourceSpan) {
    if (!sourceSpan) {
        return stmt;
    }
    var /** @type {?} */ transformer = new _ApplySourceSpanTransformer(sourceSpan);
    return stmt.visitStatement(transformer, null);
}
/**
 * @param {?} expr
 * @param {?} sourceSpan
 * @return {?}
 */
function applySourceSpanToExpressionIfNeeded(expr, sourceSpan) {
    if (!sourceSpan) {
        return expr;
    }
    var /** @type {?} */ transformer = new _ApplySourceSpanTransformer(sourceSpan);
    return expr.visitExpression(transformer, null);
}
var _ApplySourceSpanTransformer = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](_ApplySourceSpanTransformer, _super);
    /**
     * @param {?} sourceSpan
     */
    function _ApplySourceSpanTransformer(sourceSpan) {
        var _this = _super.call(this) || this;
        _this.sourceSpan = sourceSpan;
        return _this;
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    _ApplySourceSpanTransformer.prototype._clone = function (obj) {
        var /** @type {?} */ clone = Object.create(obj.constructor.prototype);
        for (var /** @type {?} */ prop in obj) {
            clone[prop] = obj[prop];
        }
        return clone;
    };
    /**
     * @param {?} expr
     * @param {?} context
     * @return {?}
     */
    _ApplySourceSpanTransformer.prototype.transformExpr = function (expr, context) {
        if (!expr.sourceSpan) {
            expr = this._clone(expr);
            expr.sourceSpan = this.sourceSpan;
        }
        return expr;
    };
    /**
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    _ApplySourceSpanTransformer.prototype.transformStmt = function (stmt, context) {
        if (!stmt.sourceSpan) {
            stmt = this._clone(stmt);
            stmt.sourceSpan = this.sourceSpan;
        }
        return stmt;
    };
    return _ApplySourceSpanTransformer;
}(AstTransformer$1));
/**
 * @param {?} name
 * @param {?=} type
 * @param {?=} sourceSpan
 * @return {?}
 */
function variable(name, type, sourceSpan) {
    return new ReadVarExpr(name, type, sourceSpan);
}
/**
 * @param {?} id
 * @param {?=} typeParams
 * @param {?=} sourceSpan
 * @return {?}
 */
function importExpr(id, typeParams, sourceSpan) {
    if (typeParams === void 0) { typeParams = null; }
    return new ExternalExpr(id, null, typeParams, sourceSpan);
}
/**
 * @param {?} id
 * @param {?=} typeParams
 * @param {?=} typeModifiers
 * @return {?}
 */
function importType(id, typeParams, typeModifiers) {
    if (typeParams === void 0) { typeParams = null; }
    if (typeModifiers === void 0) { typeModifiers = null; }
    return id != null ? expressionType(importExpr(id, typeParams, null), typeModifiers) : null;
}
/**
 * @param {?} expr
 * @param {?=} typeModifiers
 * @return {?}
 */
function expressionType(expr, typeModifiers) {
    if (typeModifiers === void 0) { typeModifiers = null; }
    return expr != null ? ((new ExpressionType(expr, typeModifiers))) : null;
}
/**
 * @param {?} values
 * @param {?=} type
 * @param {?=} sourceSpan
 * @return {?}
 */
function literalArr(values, type, sourceSpan) {
    return new LiteralArrayExpr(values, type, sourceSpan);
}
/**
 * @param {?} values
 * @param {?=} type
 * @return {?}
 */
function literalMap(values, type) {
    if (type === void 0) { type = null; }
    return new LiteralMapExpr(values.map(function (e) { return new LiteralMapEntry(e.key, e.value, e.quoted); }), type, null);
}
/**
 * @param {?} expr
 * @param {?=} sourceSpan
 * @return {?}
 */
function not(expr, sourceSpan) {
    return new NotExpr(expr, sourceSpan);
}
/**
 * @param {?} expr
 * @param {?=} sourceSpan
 * @return {?}
 */
function assertNotNull(expr, sourceSpan) {
    return new AssertNotNull(expr, sourceSpan);
}
/**
 * @param {?} params
 * @param {?} body
 * @param {?=} type
 * @param {?=} sourceSpan
 * @return {?}
 */
function fn(params, body, type, sourceSpan) {
    return new FunctionExpr(params, body, type, sourceSpan);
}
/**
 * @param {?} value
 * @param {?=} type
 * @param {?=} sourceSpan
 * @return {?}
 */
function literal(value, type, sourceSpan) {
    return new LiteralExpr(value, type, sourceSpan);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var QUOTED_KEYS = '$quoted$';
/**
 * @param {?} ctx
 * @param {?} value
 * @param {?=} type
 * @return {?}
 */
function convertValueToOutputAst(ctx, value, type) {
    if (type === void 0) { type = null; }
    return visitValue(value, new _ValueOutputAstTransformer(ctx), type);
}
var _ValueOutputAstTransformer = (function () {
    /**
     * @param {?} ctx
     */
    function _ValueOutputAstTransformer(ctx) {
        this.ctx = ctx;
    }
    /**
     * @param {?} arr
     * @param {?} type
     * @return {?}
     */
    _ValueOutputAstTransformer.prototype.visitArray = function (arr, type) {
        var _this = this;
        return literalArr(arr.map(function (value) { return visitValue(value, _this, null); }), type);
    };
    /**
     * @param {?} map
     * @param {?} type
     * @return {?}
     */
    _ValueOutputAstTransformer.prototype.visitStringMap = function (map, type) {
        var _this = this;
        var /** @type {?} */ entries = [];
        var /** @type {?} */ quotedSet = new Set(map && map[QUOTED_KEYS]);
        Object.keys(map).forEach(function (key) {
            entries.push(new LiteralMapEntry(key, visitValue(map[key], _this, null), quotedSet.has(key)));
        });
        return new LiteralMapExpr(entries, type);
    };
    /**
     * @param {?} value
     * @param {?} type
     * @return {?}
     */
    _ValueOutputAstTransformer.prototype.visitPrimitive = function (value, type) { return literal(value, type); };
    /**
     * @param {?} value
     * @param {?} type
     * @return {?}
     */
    _ValueOutputAstTransformer.prototype.visitOther = function (value, type) {
        if (value instanceof Expression) {
            return value;
        }
        else {
            return this.ctx.importExpr(value);
        }
    };
    return _ValueOutputAstTransformer;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} ctx
 * @param {?} providerAst
 * @return {?}
 */
function providerDef(ctx, providerAst) {
    var /** @type {?} */ flags = 0;
    if (!providerAst.eager) {
        flags |= 4096 /* LazyProvider */;
    }
    if (providerAst.providerType === ProviderAstType.PrivateService) {
        flags |= 8192 /* PrivateProvider */;
    }
    providerAst.lifecycleHooks.forEach(function (lifecycleHook) {
        // for regular providers, we only support ngOnDestroy
        if (lifecycleHook === LifecycleHooks.OnDestroy ||
            providerAst.providerType === ProviderAstType.Directive ||
            providerAst.providerType === ProviderAstType.Component) {
            flags |= lifecycleHookToNodeFlag(lifecycleHook);
        }
    });
    var _a = providerAst.multiProvider ?
        multiProviderDef(ctx, flags, providerAst.providers) :
        singleProviderDef(ctx, flags, providerAst.providerType, providerAst.providers[0]), providerExpr = _a.providerExpr, providerFlags = _a.flags, depsExpr = _a.depsExpr;
    return {
        providerExpr: providerExpr,
        flags: providerFlags, depsExpr: depsExpr,
        tokenExpr: tokenExpr(ctx, providerAst.token),
    };
}
/**
 * @param {?} ctx
 * @param {?} flags
 * @param {?} providers
 * @return {?}
 */
function multiProviderDef(ctx, flags, providers) {
    var /** @type {?} */ allDepDefs = [];
    var /** @type {?} */ allParams = [];
    var /** @type {?} */ exprs = providers.map(function (provider, providerIndex) {
        var /** @type {?} */ expr;
        if (provider.useClass) {
            var /** @type {?} */ depExprs = convertDeps(providerIndex, provider.deps || provider.useClass.diDeps);
            expr = ctx.importExpr(provider.useClass.reference).instantiate(depExprs);
        }
        else if (provider.useFactory) {
            var /** @type {?} */ depExprs = convertDeps(providerIndex, provider.deps || provider.useFactory.diDeps);
            expr = ctx.importExpr(provider.useFactory.reference).callFn(depExprs);
        }
        else if (provider.useExisting) {
            var /** @type {?} */ depExprs = convertDeps(providerIndex, [{ token: provider.useExisting }]);
            expr = depExprs[0];
        }
        else {
            expr = convertValueToOutputAst(ctx, provider.useValue);
        }
        return expr;
    });
    var /** @type {?} */ providerExpr = fn(allParams, [new ReturnStatement(literalArr(exprs))], INFERRED_TYPE);
    return {
        providerExpr: providerExpr,
        flags: flags | 1024 /* TypeFactoryProvider */,
        depsExpr: literalArr(allDepDefs)
    };
    /**
     * @param {?} providerIndex
     * @param {?} deps
     * @return {?}
     */
    function convertDeps(providerIndex, deps) {
        return deps.map(function (dep, depIndex) {
            var /** @type {?} */ paramName = "p" + providerIndex + "_" + depIndex;
            allParams.push(new FnParam(paramName, DYNAMIC_TYPE));
            allDepDefs.push(depDef(ctx, dep));
            return variable(paramName);
        });
    }
}
/**
 * @param {?} ctx
 * @param {?} flags
 * @param {?} providerType
 * @param {?} providerMeta
 * @return {?}
 */
function singleProviderDef(ctx, flags, providerType, providerMeta) {
    var /** @type {?} */ providerExpr;
    var /** @type {?} */ deps;
    if (providerType === ProviderAstType.Directive || providerType === ProviderAstType.Component) {
        providerExpr = ctx.importExpr(/** @type {?} */ ((providerMeta.useClass)).reference);
        flags |= 16384 /* TypeDirective */;
        deps = providerMeta.deps || ((providerMeta.useClass)).diDeps;
    }
    else {
        if (providerMeta.useClass) {
            providerExpr = ctx.importExpr(providerMeta.useClass.reference);
            flags |= 512 /* TypeClassProvider */;
            deps = providerMeta.deps || providerMeta.useClass.diDeps;
        }
        else if (providerMeta.useFactory) {
            providerExpr = ctx.importExpr(providerMeta.useFactory.reference);
            flags |= 1024 /* TypeFactoryProvider */;
            deps = providerMeta.deps || providerMeta.useFactory.diDeps;
        }
        else if (providerMeta.useExisting) {
            providerExpr = NULL_EXPR;
            flags |= 2048 /* TypeUseExistingProvider */;
            deps = [{ token: providerMeta.useExisting }];
        }
        else {
            providerExpr = convertValueToOutputAst(ctx, providerMeta.useValue);
            flags |= 256 /* TypeValueProvider */;
            deps = [];
        }
    }
    var /** @type {?} */ depsExpr = literalArr(deps.map(function (dep) { return depDef(ctx, dep); }));
    return { providerExpr: providerExpr, flags: flags, depsExpr: depsExpr };
}
/**
 * @param {?} ctx
 * @param {?} tokenMeta
 * @return {?}
 */
function tokenExpr(ctx, tokenMeta) {
    return tokenMeta.identifier ? ctx.importExpr(tokenMeta.identifier.reference) :
        literal(tokenMeta.value);
}
/**
 * @param {?} ctx
 * @param {?} dep
 * @return {?}
 */
function depDef(ctx, dep) {
    // Note: the following fields have already been normalized out by provider_analyzer:
    // - isAttribute, isSelf, isHost
    var /** @type {?} */ expr = dep.isValue ? convertValueToOutputAst(ctx, dep.value) : tokenExpr(ctx, /** @type {?} */ ((dep.token)));
    var /** @type {?} */ flags = 0;
    if (dep.isSkipSelf) {
        flags |= 1 /* SkipSelf */;
    }
    if (dep.isOptional) {
        flags |= 2 /* Optional */;
    }
    if (dep.isValue) {
        flags |= 8 /* Value */;
    }
    return flags === 0 /* None */ ? expr : literalArr([literal(flags), expr]);
}
/**
 * @param {?} lifecycleHook
 * @return {?}
 */
function lifecycleHookToNodeFlag(lifecycleHook) {
    var /** @type {?} */ nodeFlag = 0;
    switch (lifecycleHook) {
        case LifecycleHooks.AfterContentChecked:
            nodeFlag = 2097152 /* AfterContentChecked */;
            break;
        case LifecycleHooks.AfterContentInit:
            nodeFlag = 1048576 /* AfterContentInit */;
            break;
        case LifecycleHooks.AfterViewChecked:
            nodeFlag = 8388608 /* AfterViewChecked */;
            break;
        case LifecycleHooks.AfterViewInit:
            nodeFlag = 4194304 /* AfterViewInit */;
            break;
        case LifecycleHooks.DoCheck:
            nodeFlag = 262144 /* DoCheck */;
            break;
        case LifecycleHooks.OnChanges:
            nodeFlag = 524288 /* OnChanges */;
            break;
        case LifecycleHooks.OnDestroy:
            nodeFlag = 131072 /* OnDestroy */;
            break;
        case LifecycleHooks.OnInit:
            nodeFlag = 65536 /* OnInit */;
            break;
    }
    return nodeFlag;
}
/**
 * @param {?} reflector
 * @param {?} ctx
 * @param {?} flags
 * @param {?} entryComponents
 * @return {?}
 */
function componentFactoryResolverProviderDef(reflector, ctx, flags, entryComponents) {
    var /** @type {?} */ entryComponentFactories = entryComponents.map(function (entryComponent) { return ctx.importExpr(entryComponent.componentFactory); });
    var /** @type {?} */ token = createTokenForExternalReference(reflector, Identifiers.ComponentFactoryResolver);
    var /** @type {?} */ classMeta = {
        diDeps: [
            { isValue: true, value: literalArr(entryComponentFactories) },
            { token: token, isSkipSelf: true, isOptional: true },
            { token: createTokenForExternalReference(reflector, Identifiers.NgModuleRef) },
        ],
        lifecycleHooks: [],
        reference: reflector.resolveExternalReference(Identifiers.CodegenComponentFactoryResolver)
    };
    var _a = singleProviderDef(ctx, flags, ProviderAstType.PrivateService, {
        token: token,
        multi: false,
        useClass: classMeta,
    }), providerExpr = _a.providerExpr, providerFlags = _a.flags, depsExpr = _a.depsExpr;
    return { providerExpr: providerExpr, flags: providerFlags, depsExpr: depsExpr, tokenExpr: tokenExpr(ctx, token) };
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var NgModuleCompileResult = (function () {
    /**
     * @param {?} ngModuleFactoryVar
     */
    function NgModuleCompileResult(ngModuleFactoryVar) {
        this.ngModuleFactoryVar = ngModuleFactoryVar;
    }
    return NgModuleCompileResult;
}());
var LOG_VAR = variable('_l');
var NgModuleCompiler = (function () {
    /**
     * @param {?} reflector
     */
    function NgModuleCompiler(reflector) {
        this.reflector = reflector;
    }
    /**
     * @param {?} ctx
     * @param {?} ngModuleMeta
     * @param {?} extraProviders
     * @return {?}
     */
    NgModuleCompiler.prototype.compile = function (ctx, ngModuleMeta, extraProviders) {
        var /** @type {?} */ sourceSpan = typeSourceSpan('NgModule', ngModuleMeta.type);
        var /** @type {?} */ entryComponentFactories = ngModuleMeta.transitiveModule.entryComponents;
        var /** @type {?} */ bootstrapComponents = ngModuleMeta.bootstrapComponents;
        var /** @type {?} */ providerParser = new NgModuleProviderAnalyzer(this.reflector, ngModuleMeta, extraProviders, sourceSpan);
        var /** @type {?} */ providerDefs = [componentFactoryResolverProviderDef(this.reflector, ctx, 0 /* None */, entryComponentFactories)]
            .concat(providerParser.parse().map(function (provider) { return providerDef(ctx, provider); }))
            .map(function (_a) {
            var providerExpr = _a.providerExpr, depsExpr = _a.depsExpr, flags = _a.flags, tokenExpr = _a.tokenExpr;
            return importExpr(Identifiers.moduleProviderDef).callFn([
                literal(flags), tokenExpr, providerExpr, depsExpr
            ]);
        });
        var /** @type {?} */ ngModuleDef = importExpr(Identifiers.moduleDef).callFn([literalArr(providerDefs)]);
        var /** @type {?} */ ngModuleDefFactory = fn([new FnParam(/** @type {?} */ ((LOG_VAR.name)))], [new ReturnStatement(ngModuleDef)], INFERRED_TYPE);
        var /** @type {?} */ ngModuleFactoryVar = identifierName(ngModuleMeta.type) + "NgFactory";
        this._createNgModuleFactory(ctx, ngModuleMeta.type.reference, importExpr(Identifiers.createModuleFactory).callFn([
            ctx.importExpr(ngModuleMeta.type.reference),
            literalArr(bootstrapComponents.map(function (id) { return ctx.importExpr(id.reference); })),
            ngModuleDefFactory
        ]));
        if (ngModuleMeta.id) {
            var /** @type {?} */ registerFactoryStmt = importExpr(Identifiers.RegisterModuleFactoryFn)
                .callFn([literal(ngModuleMeta.id), variable(ngModuleFactoryVar)])
                .toStmt();
            ctx.statements.push(registerFactoryStmt);
        }
        return new NgModuleCompileResult(ngModuleFactoryVar);
    };
    /**
     * @param {?} ctx
     * @param {?} ngModuleReference
     * @return {?}
     */
    NgModuleCompiler.prototype.createStub = function (ctx, ngModuleReference) {
        this._createNgModuleFactory(ctx, ngModuleReference, NULL_EXPR);
    };
    /**
     * @param {?} ctx
     * @param {?} reference
     * @param {?} value
     * @return {?}
     */
    NgModuleCompiler.prototype._createNgModuleFactory = function (ctx, reference, value) {
        var /** @type {?} */ ngModuleFactoryVar = identifierName({ reference: reference }) + "NgFactory";
        var /** @type {?} */ ngModuleFactoryStmt = variable(ngModuleFactoryVar)
            .set(value)
            .toDeclStmt(importType(Identifiers.NgModuleFactory, [/** @type {?} */ ((expressionType(ctx.importExpr(reference))))], [TypeModifier.Const]), [StmtModifier.Final, StmtModifier.Exported]);
        ctx.statements.push(ngModuleFactoryStmt);
    };
    return NgModuleCompiler;
}());
NgModuleCompiler.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
NgModuleCompiler.ctorParameters = function () { return [
    { type: CompileReflector, },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
// https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit
var VERSION$1 = 3;
var JS_B64_PREFIX = '# sourceMappingURL=data:application/json;base64,';
var SourceMapGenerator = (function () {
    /**
     * @param {?=} file
     */
    function SourceMapGenerator(file) {
        if (file === void 0) { file = null; }
        this.file = file;
        this.sourcesContent = new Map();
        this.lines = [];
        this.lastCol0 = 0;
        this.hasMappings = false;
    }
    /**
     * @param {?} url
     * @param {?=} content
     * @return {?}
     */
    SourceMapGenerator.prototype.addSource = function (url, content) {
        if (content === void 0) { content = null; }
        if (!this.sourcesContent.has(url)) {
            this.sourcesContent.set(url, content);
        }
        return this;
    };
    /**
     * @return {?}
     */
    SourceMapGenerator.prototype.addLine = function () {
        this.lines.push([]);
        this.lastCol0 = 0;
        return this;
    };
    /**
     * @param {?} col0
     * @param {?=} sourceUrl
     * @param {?=} sourceLine0
     * @param {?=} sourceCol0
     * @return {?}
     */
    SourceMapGenerator.prototype.addMapping = function (col0, sourceUrl, sourceLine0, sourceCol0) {
        if (!this.currentLine) {
            throw new Error("A line must be added before mappings can be added");
        }
        if (sourceUrl != null && !this.sourcesContent.has(sourceUrl)) {
            throw new Error("Unknown source file \"" + sourceUrl + "\"");
        }
        if (col0 == null) {
            throw new Error("The column in the generated code must be provided");
        }
        if (col0 < this.lastCol0) {
            throw new Error("Mapping should be added in output order");
        }
        if (sourceUrl && (sourceLine0 == null || sourceCol0 == null)) {
            throw new Error("The source location must be provided when a source url is provided");
        }
        this.hasMappings = true;
        this.lastCol0 = col0;
        this.currentLine.push({ col0: col0, sourceUrl: sourceUrl, sourceLine0: sourceLine0, sourceCol0: sourceCol0 });
        return this;
    };
    Object.defineProperty(SourceMapGenerator.prototype, "currentLine", {
        /**
         * @return {?}
         */
        get: function () { return this.lines.slice(-1)[0]; },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    SourceMapGenerator.prototype.toJSON = function () {
        var _this = this;
        if (!this.hasMappings) {
            return null;
        }
        var /** @type {?} */ sourcesIndex = new Map();
        var /** @type {?} */ sources = [];
        var /** @type {?} */ sourcesContent = [];
        Array.from(this.sourcesContent.keys()).forEach(function (url, i) {
            sourcesIndex.set(url, i);
            sources.push(url);
            sourcesContent.push(_this.sourcesContent.get(url) || null);
        });
        var /** @type {?} */ mappings = '';
        var /** @type {?} */ lastCol0 = 0;
        var /** @type {?} */ lastSourceIndex = 0;
        var /** @type {?} */ lastSourceLine0 = 0;
        var /** @type {?} */ lastSourceCol0 = 0;
        this.lines.forEach(function (segments) {
            lastCol0 = 0;
            mappings += segments
                .map(function (segment) {
                // zero-based starting column of the line in the generated code
                var /** @type {?} */ segAsStr = toBase64VLQ(segment.col0 - lastCol0);
                lastCol0 = segment.col0;
                if (segment.sourceUrl != null) {
                    // zero-based index into the sources list
                    segAsStr +=
                        toBase64VLQ(/** @type {?} */ ((sourcesIndex.get(segment.sourceUrl))) - lastSourceIndex);
                    lastSourceIndex = ((sourcesIndex.get(segment.sourceUrl)));
                    // the zero-based starting line in the original source
                    segAsStr += toBase64VLQ(/** @type {?} */ ((segment.sourceLine0)) - lastSourceLine0);
                    lastSourceLine0 = ((segment.sourceLine0));
                    // the zero-based starting column in the original source
                    segAsStr += toBase64VLQ(/** @type {?} */ ((segment.sourceCol0)) - lastSourceCol0);
                    lastSourceCol0 = ((segment.sourceCol0));
                }
                return segAsStr;
            })
                .join(',');
            mappings += ';';
        });
        mappings = mappings.slice(0, -1);
        return {
            'file': this.file || '',
            'version': VERSION$1,
            'sourceRoot': '',
            'sources': sources,
            'sourcesContent': sourcesContent,
            'mappings': mappings,
        };
    };
    /**
     * @return {?}
     */
    SourceMapGenerator.prototype.toJsComment = function () {
        return this.hasMappings ? '//' + JS_B64_PREFIX + toBase64String(JSON.stringify(this, null, 0)) :
            '';
    };
    return SourceMapGenerator;
}());
/**
 * @param {?} value
 * @return {?}
 */
function toBase64String(value) {
    var /** @type {?} */ b64 = '';
    value = utf8Encode(value);
    for (var /** @type {?} */ i = 0; i < value.length;) {
        var /** @type {?} */ i1 = value.charCodeAt(i++);
        var /** @type {?} */ i2 = value.charCodeAt(i++);
        var /** @type {?} */ i3 = value.charCodeAt(i++);
        b64 += toBase64Digit(i1 >> 2);
        b64 += toBase64Digit(((i1 & 3) << 4) | (isNaN(i2) ? 0 : i2 >> 4));
        b64 += isNaN(i2) ? '=' : toBase64Digit(((i2 & 15) << 2) | (i3 >> 6));
        b64 += isNaN(i2) || isNaN(i3) ? '=' : toBase64Digit(i3 & 63);
    }
    return b64;
}
/**
 * @param {?} value
 * @return {?}
 */
function toBase64VLQ(value) {
    value = value < 0 ? ((-value) << 1) + 1 : value << 1;
    var /** @type {?} */ out = '';
    do {
        var /** @type {?} */ digit = value & 31;
        value = value >> 5;
        if (value > 0) {
            digit = digit | 32;
        }
        out += toBase64Digit(digit);
    } while (value > 0);
    return out;
}
var B64_DIGITS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';
/**
 * @param {?} value
 * @return {?}
 */
function toBase64Digit(value) {
    if (value < 0 || value >= 64) {
        throw new Error("Can only encode value in the range [0, 63]");
    }
    return B64_DIGITS[value];
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _SINGLE_QUOTE_ESCAPE_STRING_RE = /'|\\|\n|\r|\$/g;
var _LEGAL_IDENTIFIER_RE = /^[$A-Z_][0-9A-Z_$]*$/i;
var _INDENT_WITH = '  ';
var CATCH_ERROR_VAR$1 = variable('error', null, null);
var CATCH_STACK_VAR$1 = variable('stack', null, null);
/**
 * @abstract
 */
var _EmittedLine = (function () {
    /**
     * @param {?} indent
     */
    function _EmittedLine(indent) {
        this.indent = indent;
        this.partsLength = 0;
        this.parts = [];
        this.srcSpans = [];
    }
    return _EmittedLine;
}());
var EmitterVisitorContext = (function () {
    /**
     * @param {?} _indent
     */
    function EmitterVisitorContext(_indent) {
        this._indent = _indent;
        this._classes = [];
        this._preambleLineCount = 0;
        this._lines = [new _EmittedLine(_indent)];
    }
    /**
     * @return {?}
     */
    EmitterVisitorContext.createRoot = function () { return new EmitterVisitorContext(0); };
    Object.defineProperty(EmitterVisitorContext.prototype, "_currentLine", {
        /**
         * @return {?}
         */
        get: function () { return this._lines[this._lines.length - 1]; },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?=} from
     * @param {?=} lastPart
     * @return {?}
     */
    EmitterVisitorContext.prototype.println = function (from, lastPart) {
        if (lastPart === void 0) { lastPart = ''; }
        this.print(from || null, lastPart, true);
    };
    /**
     * @return {?}
     */
    EmitterVisitorContext.prototype.lineIsEmpty = function () { return this._currentLine.parts.length === 0; };
    /**
     * @return {?}
     */
    EmitterVisitorContext.prototype.lineLength = function () {
        return this._currentLine.indent * _INDENT_WITH.length + this._currentLine.partsLength;
    };
    /**
     * @param {?} from
     * @param {?} part
     * @param {?=} newLine
     * @return {?}
     */
    EmitterVisitorContext.prototype.print = function (from, part, newLine) {
        if (newLine === void 0) { newLine = false; }
        if (part.length > 0) {
            this._currentLine.parts.push(part);
            this._currentLine.partsLength += part.length;
            this._currentLine.srcSpans.push(from && from.sourceSpan || null);
        }
        if (newLine) {
            this._lines.push(new _EmittedLine(this._indent));
        }
    };
    /**
     * @return {?}
     */
    EmitterVisitorContext.prototype.removeEmptyLastLine = function () {
        if (this.lineIsEmpty()) {
            this._lines.pop();
        }
    };
    /**
     * @return {?}
     */
    EmitterVisitorContext.prototype.incIndent = function () {
        this._indent++;
        if (this.lineIsEmpty()) {
            this._currentLine.indent = this._indent;
        }
    };
    /**
     * @return {?}
     */
    EmitterVisitorContext.prototype.decIndent = function () {
        this._indent--;
        if (this.lineIsEmpty()) {
            this._currentLine.indent = this._indent;
        }
    };
    /**
     * @param {?} clazz
     * @return {?}
     */
    EmitterVisitorContext.prototype.pushClass = function (clazz) { this._classes.push(clazz); };
    /**
     * @return {?}
     */
    EmitterVisitorContext.prototype.popClass = function () { return ((this._classes.pop())); };
    Object.defineProperty(EmitterVisitorContext.prototype, "currentClass", {
        /**
         * @return {?}
         */
        get: function () {
            return this._classes.length > 0 ? this._classes[this._classes.length - 1] : null;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    EmitterVisitorContext.prototype.toSource = function () {
        return this.sourceLines
            .map(function (l) { return l.parts.length > 0 ? _createIndent(l.indent) + l.parts.join('') : ''; })
            .join('\n');
    };
    /**
     * @param {?} sourceFilePath
     * @param {?} genFilePath
     * @param {?=} startsAtLine
     * @return {?}
     */
    EmitterVisitorContext.prototype.toSourceMapGenerator = function (sourceFilePath, genFilePath, startsAtLine) {
        if (startsAtLine === void 0) { startsAtLine = 0; }
        var /** @type {?} */ map = new SourceMapGenerator(genFilePath);
        var /** @type {?} */ firstOffsetMapped = false;
        var /** @type {?} */ mapFirstOffsetIfNeeded = function () {
            if (!firstOffsetMapped) {
                // Add a single space so that tools won't try to load the file from disk.
                // Note: We are using virtual urls like `ng:///`, so we have to
                // provide a content here.
                map.addSource(sourceFilePath, ' ').addMapping(0, sourceFilePath, 0, 0);
                firstOffsetMapped = true;
            }
        };
        for (var /** @type {?} */ i = 0; i < startsAtLine; i++) {
            map.addLine();
            mapFirstOffsetIfNeeded();
        }
        this.sourceLines.forEach(function (line, lineIdx) {
            map.addLine();
            var /** @type {?} */ spans = line.srcSpans;
            var /** @type {?} */ parts = line.parts;
            var /** @type {?} */ col0 = line.indent * _INDENT_WITH.length;
            var /** @type {?} */ spanIdx = 0;
            // skip leading parts without source spans
            while (spanIdx < spans.length && !spans[spanIdx]) {
                col0 += parts[spanIdx].length;
                spanIdx++;
            }
            if (spanIdx < spans.length && lineIdx === 0 && col0 === 0) {
                firstOffsetMapped = true;
            }
            else {
                mapFirstOffsetIfNeeded();
            }
            while (spanIdx < spans.length) {
                var /** @type {?} */ span = ((spans[spanIdx]));
                var /** @type {?} */ source = span.start.file;
                var /** @type {?} */ sourceLine = span.start.line;
                var /** @type {?} */ sourceCol = span.start.col;
                map.addSource(source.url, source.content)
                    .addMapping(col0, source.url, sourceLine, sourceCol);
                col0 += parts[spanIdx].length;
                spanIdx++;
                // assign parts without span or the same span to the previous segment
                while (spanIdx < spans.length && (span === spans[spanIdx] || !spans[spanIdx])) {
                    col0 += parts[spanIdx].length;
                    spanIdx++;
                }
            }
        });
        return map;
    };
    /**
     * @param {?} count
     * @return {?}
     */
    EmitterVisitorContext.prototype.setPreambleLineCount = function (count) { return this._preambleLineCount = count; };
    /**
     * @param {?} line
     * @param {?} column
     * @return {?}
     */
    EmitterVisitorContext.prototype.spanOf = function (line, column) {
        var /** @type {?} */ emittedLine = this._lines[line - this._preambleLineCount];
        if (emittedLine) {
            var /** @type {?} */ columnsLeft = column - _createIndent(emittedLine.indent).length;
            for (var /** @type {?} */ partIndex = 0; partIndex < emittedLine.parts.length; partIndex++) {
                var /** @type {?} */ part = emittedLine.parts[partIndex];
                if (part.length > columnsLeft) {
                    return emittedLine.srcSpans[partIndex];
                }
                columnsLeft -= part.length;
            }
        }
        return null;
    };
    Object.defineProperty(EmitterVisitorContext.prototype, "sourceLines", {
        /**
         * @return {?}
         */
        get: function () {
            if (this._lines.length && this._lines[this._lines.length - 1].parts.length === 0) {
                return this._lines.slice(0, -1);
            }
            return this._lines;
        },
        enumerable: true,
        configurable: true
    });
    return EmitterVisitorContext;
}());
/**
 * @abstract
 */
var AbstractEmitterVisitor = (function () {
    /**
     * @param {?} _escapeDollarInStrings
     */
    function AbstractEmitterVisitor(_escapeDollarInStrings) {
        this._escapeDollarInStrings = _escapeDollarInStrings;
    }
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitExpressionStmt = function (stmt, ctx) {
        stmt.expr.visitExpression(this, ctx);
        ctx.println(stmt, ';');
        return null;
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitReturnStmt = function (stmt, ctx) {
        ctx.print(stmt, "return ");
        stmt.value.visitExpression(this, ctx);
        ctx.println(stmt, ';');
        return null;
    };
    /**
     * @abstract
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitCastExpr = function (ast, context) { };
    /**
     * @abstract
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitDeclareClassStmt = function (stmt, ctx) { };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitIfStmt = function (stmt, ctx) {
        ctx.print(stmt, "if (");
        stmt.condition.visitExpression(this, ctx);
        ctx.print(stmt, ") {");
        var /** @type {?} */ hasElseCase = stmt.falseCase != null && stmt.falseCase.length > 0;
        if (stmt.trueCase.length <= 1 && !hasElseCase) {
            ctx.print(stmt, " ");
            this.visitAllStatements(stmt.trueCase, ctx);
            ctx.removeEmptyLastLine();
            ctx.print(stmt, " ");
        }
        else {
            ctx.println();
            ctx.incIndent();
            this.visitAllStatements(stmt.trueCase, ctx);
            ctx.decIndent();
            if (hasElseCase) {
                ctx.println(stmt, "} else {");
                ctx.incIndent();
                this.visitAllStatements(stmt.falseCase, ctx);
                ctx.decIndent();
            }
        }
        ctx.println(stmt, "}");
        return null;
    };
    /**
     * @abstract
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitTryCatchStmt = function (stmt, ctx) { };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitThrowStmt = function (stmt, ctx) {
        ctx.print(stmt, "throw ");
        stmt.error.visitExpression(this, ctx);
        ctx.println(stmt, ";");
        return null;
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitCommentStmt = function (stmt, ctx) {
        var /** @type {?} */ lines = stmt.comment.split('\n');
        lines.forEach(function (line) { ctx.println(stmt, "// " + line); });
        return null;
    };
    /**
     * @abstract
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitDeclareVarStmt = function (stmt, ctx) { };
    /**
     * @param {?} expr
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitWriteVarExpr = function (expr, ctx) {
        var /** @type {?} */ lineWasEmpty = ctx.lineIsEmpty();
        if (!lineWasEmpty) {
            ctx.print(expr, '(');
        }
        ctx.print(expr, expr.name + " = ");
        expr.value.visitExpression(this, ctx);
        if (!lineWasEmpty) {
            ctx.print(expr, ')');
        }
        return null;
    };
    /**
     * @param {?} expr
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitWriteKeyExpr = function (expr, ctx) {
        var /** @type {?} */ lineWasEmpty = ctx.lineIsEmpty();
        if (!lineWasEmpty) {
            ctx.print(expr, '(');
        }
        expr.receiver.visitExpression(this, ctx);
        ctx.print(expr, "[");
        expr.index.visitExpression(this, ctx);
        ctx.print(expr, "] = ");
        expr.value.visitExpression(this, ctx);
        if (!lineWasEmpty) {
            ctx.print(expr, ')');
        }
        return null;
    };
    /**
     * @param {?} expr
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitWritePropExpr = function (expr, ctx) {
        var /** @type {?} */ lineWasEmpty = ctx.lineIsEmpty();
        if (!lineWasEmpty) {
            ctx.print(expr, '(');
        }
        expr.receiver.visitExpression(this, ctx);
        ctx.print(expr, "." + expr.name + " = ");
        expr.value.visitExpression(this, ctx);
        if (!lineWasEmpty) {
            ctx.print(expr, ')');
        }
        return null;
    };
    /**
     * @param {?} expr
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitInvokeMethodExpr = function (expr, ctx) {
        expr.receiver.visitExpression(this, ctx);
        var /** @type {?} */ name = expr.name;
        if (expr.builtin != null) {
            name = this.getBuiltinMethodName(expr.builtin);
            if (name == null) {
                // some builtins just mean to skip the call.
                return null;
            }
        }
        ctx.print(expr, "." + name + "(");
        this.visitAllExpressions(expr.args, ctx, ",");
        ctx.print(expr, ")");
        return null;
    };
    /**
     * @abstract
     * @param {?} method
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.getBuiltinMethodName = function (method) { };
    /**
     * @param {?} expr
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitInvokeFunctionExpr = function (expr, ctx) {
        expr.fn.visitExpression(this, ctx);
        ctx.print(expr, "(");
        this.visitAllExpressions(expr.args, ctx, ',');
        ctx.print(expr, ")");
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitReadVarExpr = function (ast, ctx) {
        var /** @type {?} */ varName = ((ast.name));
        if (ast.builtin != null) {
            switch (ast.builtin) {
                case BuiltinVar.Super:
                    varName = 'super';
                    break;
                case BuiltinVar.This:
                    varName = 'this';
                    break;
                case BuiltinVar.CatchError:
                    varName = ((CATCH_ERROR_VAR$1.name));
                    break;
                case BuiltinVar.CatchStack:
                    varName = ((CATCH_STACK_VAR$1.name));
                    break;
                default:
                    throw new Error("Unknown builtin variable " + ast.builtin);
            }
        }
        ctx.print(ast, varName);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitInstantiateExpr = function (ast, ctx) {
        ctx.print(ast, "new ");
        ast.classExpr.visitExpression(this, ctx);
        ctx.print(ast, "(");
        this.visitAllExpressions(ast.args, ctx, ',');
        ctx.print(ast, ")");
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitLiteralExpr = function (ast, ctx) {
        var /** @type {?} */ value = ast.value;
        if (typeof value === 'string') {
            ctx.print(ast, escapeIdentifier(value, this._escapeDollarInStrings));
        }
        else {
            ctx.print(ast, "" + value);
        }
        return null;
    };
    /**
     * @abstract
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitExternalExpr = function (ast, ctx) { };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitConditionalExpr = function (ast, ctx) {
        ctx.print(ast, "(");
        ast.condition.visitExpression(this, ctx);
        ctx.print(ast, '? ');
        ast.trueCase.visitExpression(this, ctx);
        ctx.print(ast, ': '); /** @type {?} */
        ((ast.falseCase)).visitExpression(this, ctx);
        ctx.print(ast, ")");
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitNotExpr = function (ast, ctx) {
        ctx.print(ast, '!');
        ast.condition.visitExpression(this, ctx);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitAssertNotNullExpr = function (ast, ctx) {
        ast.condition.visitExpression(this, ctx);
        return null;
    };
    /**
     * @abstract
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitFunctionExpr = function (ast, ctx) { };
    /**
     * @abstract
     * @param {?} stmt
     * @param {?} context
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitDeclareFunctionStmt = function (stmt, context) { };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitBinaryOperatorExpr = function (ast, ctx) {
        var /** @type {?} */ opStr;
        switch (ast.operator) {
            case BinaryOperator.Equals:
                opStr = '==';
                break;
            case BinaryOperator.Identical:
                opStr = '===';
                break;
            case BinaryOperator.NotEquals:
                opStr = '!=';
                break;
            case BinaryOperator.NotIdentical:
                opStr = '!==';
                break;
            case BinaryOperator.And:
                opStr = '&&';
                break;
            case BinaryOperator.Or:
                opStr = '||';
                break;
            case BinaryOperator.Plus:
                opStr = '+';
                break;
            case BinaryOperator.Minus:
                opStr = '-';
                break;
            case BinaryOperator.Divide:
                opStr = '/';
                break;
            case BinaryOperator.Multiply:
                opStr = '*';
                break;
            case BinaryOperator.Modulo:
                opStr = '%';
                break;
            case BinaryOperator.Lower:
                opStr = '<';
                break;
            case BinaryOperator.LowerEquals:
                opStr = '<=';
                break;
            case BinaryOperator.Bigger:
                opStr = '>';
                break;
            case BinaryOperator.BiggerEquals:
                opStr = '>=';
                break;
            default:
                throw new Error("Unknown operator " + ast.operator);
        }
        ctx.print(ast, "(");
        ast.lhs.visitExpression(this, ctx);
        ctx.print(ast, " " + opStr + " ");
        ast.rhs.visitExpression(this, ctx);
        ctx.print(ast, ")");
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitReadPropExpr = function (ast, ctx) {
        ast.receiver.visitExpression(this, ctx);
        ctx.print(ast, ".");
        ctx.print(ast, ast.name);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitReadKeyExpr = function (ast, ctx) {
        ast.receiver.visitExpression(this, ctx);
        ctx.print(ast, "[");
        ast.index.visitExpression(this, ctx);
        ctx.print(ast, "]");
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitLiteralArrayExpr = function (ast, ctx) {
        ctx.print(ast, "[");
        this.visitAllExpressions(ast.entries, ctx, ',');
        ctx.print(ast, "]");
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitLiteralMapExpr = function (ast, ctx) {
        var _this = this;
        ctx.print(ast, "{");
        this.visitAllObjects(function (entry) {
            ctx.print(ast, escapeIdentifier(entry.key, _this._escapeDollarInStrings, entry.quoted) + ":");
            entry.value.visitExpression(_this, ctx);
        }, ast.entries, ctx, ',');
        ctx.print(ast, "}");
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitCommaExpr = function (ast, ctx) {
        ctx.print(ast, '(');
        this.visitAllExpressions(ast.parts, ctx, ',');
        ctx.print(ast, ')');
        return null;
    };
    /**
     * @param {?} expressions
     * @param {?} ctx
     * @param {?} separator
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitAllExpressions = function (expressions, ctx, separator) {
        var _this = this;
        this.visitAllObjects(function (expr) { return expr.visitExpression(_this, ctx); }, expressions, ctx, separator);
    };
    /**
     * @template T
     * @param {?} handler
     * @param {?} expressions
     * @param {?} ctx
     * @param {?} separator
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitAllObjects = function (handler, expressions, ctx, separator) {
        var /** @type {?} */ incrementedIndent = false;
        for (var /** @type {?} */ i = 0; i < expressions.length; i++) {
            if (i > 0) {
                if (ctx.lineLength() > 80) {
                    ctx.print(null, separator, true);
                    if (!incrementedIndent) {
                        // continuation are marked with double indent.
                        ctx.incIndent();
                        ctx.incIndent();
                        incrementedIndent = true;
                    }
                }
                else {
                    ctx.print(null, separator, false);
                }
            }
            handler(expressions[i]);
        }
        if (incrementedIndent) {
            // continuation are marked with double indent.
            ctx.decIndent();
            ctx.decIndent();
        }
    };
    /**
     * @param {?} statements
     * @param {?} ctx
     * @return {?}
     */
    AbstractEmitterVisitor.prototype.visitAllStatements = function (statements, ctx) {
        var _this = this;
        statements.forEach(function (stmt) { return stmt.visitStatement(_this, ctx); });
    };
    return AbstractEmitterVisitor;
}());
/**
 * @param {?} input
 * @param {?} escapeDollar
 * @param {?=} alwaysQuote
 * @return {?}
 */
function escapeIdentifier(input, escapeDollar, alwaysQuote) {
    if (alwaysQuote === void 0) { alwaysQuote = true; }
    if (input == null) {
        return null;
    }
    var /** @type {?} */ body = input.replace(_SINGLE_QUOTE_ESCAPE_STRING_RE, function () {
        var match = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            match[_i] = arguments[_i];
        }
        if (match[0] == '$') {
            return escapeDollar ? '\\$' : '$';
        }
        else if (match[0] == '\n') {
            return '\\n';
        }
        else if (match[0] == '\r') {
            return '\\r';
        }
        else {
            return "\\" + match[0];
        }
    });
    var /** @type {?} */ requiresQuotes = alwaysQuote || !_LEGAL_IDENTIFIER_RE.test(body);
    return requiresQuotes ? "'" + body + "'" : body;
}
/**
 * @param {?} count
 * @return {?}
 */
function _createIndent(count) {
    var /** @type {?} */ res = '';
    for (var /** @type {?} */ i = 0; i < count; i++) {
        res += _INDENT_WITH;
    }
    return res;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} ast
 * @return {?}
 */
function debugOutputAstAsTypeScript(ast) {
    var /** @type {?} */ converter = new _TsEmitterVisitor();
    var /** @type {?} */ ctx = EmitterVisitorContext.createRoot();
    var /** @type {?} */ asts = Array.isArray(ast) ? ast : [ast];
    asts.forEach(function (ast) {
        if (ast instanceof Statement) {
            ast.visitStatement(converter, ctx);
        }
        else if (ast instanceof Expression) {
            ast.visitExpression(converter, ctx);
        }
        else if (ast instanceof Type$1) {
            ast.visitType(converter, ctx);
        }
        else {
            throw new Error("Don't know how to print debug info for " + ast);
        }
    });
    return ctx.toSource();
}
var TypeScriptEmitter = (function () {
    function TypeScriptEmitter() {
    }
    /**
     * @param {?} srcFilePath
     * @param {?} genFilePath
     * @param {?} stmts
     * @param {?=} preamble
     * @param {?=} emitSourceMaps
     * @return {?}
     */
    TypeScriptEmitter.prototype.emitStatementsAndContext = function (srcFilePath, genFilePath, stmts, preamble, emitSourceMaps) {
        if (preamble === void 0) { preamble = ''; }
        if (emitSourceMaps === void 0) { emitSourceMaps = true; }
        var /** @type {?} */ converter = new _TsEmitterVisitor();
        var /** @type {?} */ ctx = EmitterVisitorContext.createRoot();
        converter.visitAllStatements(stmts, ctx);
        var /** @type {?} */ preambleLines = preamble ? preamble.split('\n') : [];
        converter.reexports.forEach(function (reexports, exportedModuleName) {
            var /** @type {?} */ reexportsCode = reexports.map(function (reexport) { return reexport.name + " as " + reexport.as; }).join(',');
            preambleLines.push("export {" + reexportsCode + "} from '" + exportedModuleName + "';");
        });
        converter.importsWithPrefixes.forEach(function (prefix, importedModuleName) {
            // Note: can't write the real word for import as it screws up system.js auto detection...
            preambleLines.push("imp" +
                ("ort * as " + prefix + " from '" + importedModuleName + "';"));
        });
        var /** @type {?} */ sm = emitSourceMaps ?
            ctx.toSourceMapGenerator(srcFilePath, genFilePath, preambleLines.length).toJsComment() :
            '';
        var /** @type {?} */ lines = preambleLines.concat([ctx.toSource(), sm]);
        if (sm) {
            // always add a newline at the end, as some tools have bugs without it.
            lines.push('');
        }
        ctx.setPreambleLineCount(preambleLines.length);
        return { sourceText: lines.join('\n'), context: ctx };
    };
    /**
     * @param {?} srcFilePath
     * @param {?} genFilePath
     * @param {?} stmts
     * @param {?=} preamble
     * @return {?}
     */
    TypeScriptEmitter.prototype.emitStatements = function (srcFilePath, genFilePath, stmts, preamble) {
        if (preamble === void 0) { preamble = ''; }
        return this.emitStatementsAndContext(srcFilePath, genFilePath, stmts, preamble).sourceText;
    };
    return TypeScriptEmitter;
}());
var _TsEmitterVisitor = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](_TsEmitterVisitor, _super);
    function _TsEmitterVisitor() {
        var _this = _super.call(this, false) || this;
        _this.typeExpression = 0;
        _this.importsWithPrefixes = new Map();
        _this.reexports = new Map();
        return _this;
    }
    /**
     * @param {?} t
     * @param {?} ctx
     * @param {?=} defaultType
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitType = function (t, ctx, defaultType) {
        if (defaultType === void 0) { defaultType = 'any'; }
        if (t) {
            this.typeExpression++;
            t.visitType(this, ctx);
            this.typeExpression--;
        }
        else {
            ctx.print(null, defaultType);
        }
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitLiteralExpr = function (ast, ctx) {
        var /** @type {?} */ value = ast.value;
        if (value == null && ast.type != INFERRED_TYPE) {
            ctx.print(ast, "(" + value + " as any)");
            return null;
        }
        return _super.prototype.visitLiteralExpr.call(this, ast, ctx);
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitLiteralArrayExpr = function (ast, ctx) {
        if (ast.entries.length === 0) {
            ctx.print(ast, '(');
        }
        var /** @type {?} */ result = _super.prototype.visitLiteralArrayExpr.call(this, ast, ctx);
        if (ast.entries.length === 0) {
            ctx.print(ast, ' as any[])');
        }
        return result;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitExternalExpr = function (ast, ctx) {
        this._visitIdentifier(ast.value, ast.typeParams, ctx);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitAssertNotNullExpr = function (ast, ctx) {
        var /** @type {?} */ result = _super.prototype.visitAssertNotNullExpr.call(this, ast, ctx);
        ctx.print(ast, '!');
        return result;
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitDeclareVarStmt = function (stmt, ctx) {
        if (stmt.hasModifier(StmtModifier.Exported) && stmt.value instanceof ExternalExpr &&
            !stmt.type) {
            // check for a reexport
            var _a = stmt.value.value, name = _a.name, moduleName = _a.moduleName;
            if (moduleName) {
                var /** @type {?} */ reexports = this.reexports.get(moduleName);
                if (!reexports) {
                    reexports = [];
                    this.reexports.set(moduleName, reexports);
                }
                reexports.push({ name: /** @type {?} */ ((name)), as: stmt.name });
                return null;
            }
        }
        if (stmt.hasModifier(StmtModifier.Exported)) {
            ctx.print(stmt, "export ");
        }
        if (stmt.hasModifier(StmtModifier.Final)) {
            ctx.print(stmt, "const");
        }
        else {
            ctx.print(stmt, "var");
        }
        ctx.print(stmt, " " + stmt.name);
        this._printColonType(stmt.type, ctx);
        ctx.print(stmt, " = ");
        stmt.value.visitExpression(this, ctx);
        ctx.println(stmt, ";");
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitCastExpr = function (ast, ctx) {
        ctx.print(ast, "(<"); /** @type {?} */
        ((ast.type)).visitType(this, ctx);
        ctx.print(ast, ">");
        ast.value.visitExpression(this, ctx);
        ctx.print(ast, ")");
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitInstantiateExpr = function (ast, ctx) {
        ctx.print(ast, "new ");
        this.typeExpression++;
        ast.classExpr.visitExpression(this, ctx);
        this.typeExpression--;
        ctx.print(ast, "(");
        this.visitAllExpressions(ast.args, ctx, ',');
        ctx.print(ast, ")");
        return null;
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitDeclareClassStmt = function (stmt, ctx) {
        var _this = this;
        ctx.pushClass(stmt);
        if (stmt.hasModifier(StmtModifier.Exported)) {
            ctx.print(stmt, "export ");
        }
        ctx.print(stmt, "class " + stmt.name);
        if (stmt.parent != null) {
            ctx.print(stmt, " extends ");
            this.typeExpression++;
            stmt.parent.visitExpression(this, ctx);
            this.typeExpression--;
        }
        ctx.println(stmt, " {");
        ctx.incIndent();
        stmt.fields.forEach(function (field) { return _this._visitClassField(field, ctx); });
        if (stmt.constructorMethod != null) {
            this._visitClassConstructor(stmt, ctx);
        }
        stmt.getters.forEach(function (getter) { return _this._visitClassGetter(getter, ctx); });
        stmt.methods.forEach(function (method) { return _this._visitClassMethod(method, ctx); });
        ctx.decIndent();
        ctx.println(stmt, "}");
        ctx.popClass();
        return null;
    };
    /**
     * @param {?} field
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype._visitClassField = function (field, ctx) {
        if (field.hasModifier(StmtModifier.Private)) {
            // comment out as a workaround for #10967
            ctx.print(null, "/*private*/ ");
        }
        ctx.print(null, field.name);
        this._printColonType(field.type, ctx);
        ctx.println(null, ";");
    };
    /**
     * @param {?} getter
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype._visitClassGetter = function (getter, ctx) {
        if (getter.hasModifier(StmtModifier.Private)) {
            ctx.print(null, "private ");
        }
        ctx.print(null, "get " + getter.name + "()");
        this._printColonType(getter.type, ctx);
        ctx.println(null, " {");
        ctx.incIndent();
        this.visitAllStatements(getter.body, ctx);
        ctx.decIndent();
        ctx.println(null, "}");
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype._visitClassConstructor = function (stmt, ctx) {
        ctx.print(stmt, "constructor(");
        this._visitParams(stmt.constructorMethod.params, ctx);
        ctx.println(stmt, ") {");
        ctx.incIndent();
        this.visitAllStatements(stmt.constructorMethod.body, ctx);
        ctx.decIndent();
        ctx.println(stmt, "}");
    };
    /**
     * @param {?} method
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype._visitClassMethod = function (method, ctx) {
        if (method.hasModifier(StmtModifier.Private)) {
            ctx.print(null, "private ");
        }
        ctx.print(null, method.name + "(");
        this._visitParams(method.params, ctx);
        ctx.print(null, ")");
        this._printColonType(method.type, ctx, 'void');
        ctx.println(null, " {");
        ctx.incIndent();
        this.visitAllStatements(method.body, ctx);
        ctx.decIndent();
        ctx.println(null, "}");
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitFunctionExpr = function (ast, ctx) {
        ctx.print(ast, "(");
        this._visitParams(ast.params, ctx);
        ctx.print(ast, ")");
        this._printColonType(ast.type, ctx, 'void');
        ctx.println(ast, " => {");
        ctx.incIndent();
        this.visitAllStatements(ast.statements, ctx);
        ctx.decIndent();
        ctx.print(ast, "}");
        return null;
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitDeclareFunctionStmt = function (stmt, ctx) {
        if (stmt.hasModifier(StmtModifier.Exported)) {
            ctx.print(stmt, "export ");
        }
        ctx.print(stmt, "function " + stmt.name + "(");
        this._visitParams(stmt.params, ctx);
        ctx.print(stmt, ")");
        this._printColonType(stmt.type, ctx, 'void');
        ctx.println(stmt, " {");
        ctx.incIndent();
        this.visitAllStatements(stmt.statements, ctx);
        ctx.decIndent();
        ctx.println(stmt, "}");
        return null;
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitTryCatchStmt = function (stmt, ctx) {
        ctx.println(stmt, "try {");
        ctx.incIndent();
        this.visitAllStatements(stmt.bodyStmts, ctx);
        ctx.decIndent();
        ctx.println(stmt, "} catch (" + CATCH_ERROR_VAR$1.name + ") {");
        ctx.incIndent();
        var /** @type {?} */ catchStmts = [/** @type {?} */ (CATCH_STACK_VAR$1.set(CATCH_ERROR_VAR$1.prop('stack', null)).toDeclStmt(null, [
                StmtModifier.Final
            ]))].concat(stmt.catchStmts);
        this.visitAllStatements(catchStmts, ctx);
        ctx.decIndent();
        ctx.println(stmt, "}");
        return null;
    };
    /**
     * @param {?} type
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitBuiltintType = function (type, ctx) {
        var /** @type {?} */ typeStr;
        switch (type.name) {
            case BuiltinTypeName.Bool:
                typeStr = 'boolean';
                break;
            case BuiltinTypeName.Dynamic:
                typeStr = 'any';
                break;
            case BuiltinTypeName.Function:
                typeStr = 'Function';
                break;
            case BuiltinTypeName.Number:
                typeStr = 'number';
                break;
            case BuiltinTypeName.Int:
                typeStr = 'number';
                break;
            case BuiltinTypeName.String:
                typeStr = 'string';
                break;
            default:
                throw new Error("Unsupported builtin type " + type.name);
        }
        ctx.print(null, typeStr);
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitExpressionType = function (ast, ctx) {
        ast.value.visitExpression(this, ctx);
        return null;
    };
    /**
     * @param {?} type
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitArrayType = function (type, ctx) {
        this.visitType(type.of, ctx);
        ctx.print(null, "[]");
        return null;
    };
    /**
     * @param {?} type
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype.visitMapType = function (type, ctx) {
        ctx.print(null, "{[key: string]:");
        this.visitType(type.valueType, ctx);
        ctx.print(null, "}");
        return null;
    };
    /**
     * @param {?} method
     * @return {?}
     */
    _TsEmitterVisitor.prototype.getBuiltinMethodName = function (method) {
        var /** @type {?} */ name;
        switch (method) {
            case BuiltinMethod.ConcatArray:
                name = 'concat';
                break;
            case BuiltinMethod.SubscribeObservable:
                name = 'subscribe';
                break;
            case BuiltinMethod.Bind:
                name = 'bind';
                break;
            default:
                throw new Error("Unknown builtin method: " + method);
        }
        return name;
    };
    /**
     * @param {?} params
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype._visitParams = function (params, ctx) {
        var _this = this;
        this.visitAllObjects(function (param) {
            ctx.print(null, param.name);
            _this._printColonType(param.type, ctx);
        }, params, ctx, ',');
    };
    /**
     * @param {?} value
     * @param {?} typeParams
     * @param {?} ctx
     * @return {?}
     */
    _TsEmitterVisitor.prototype._visitIdentifier = function (value, typeParams, ctx) {
        var _this = this;
        var name = value.name, moduleName = value.moduleName;
        if (moduleName) {
            var /** @type {?} */ prefix = this.importsWithPrefixes.get(moduleName);
            if (prefix == null) {
                prefix = "i" + this.importsWithPrefixes.size;
                this.importsWithPrefixes.set(moduleName, prefix);
            }
            ctx.print(null, prefix + ".");
        }
        ctx.print(null, /** @type {?} */ ((name)));
        if (this.typeExpression > 0) {
            // If we are in a type expression that refers to a generic type then supply
            // the required type parameters. If there were not enough type parameters
            // supplied, supply any as the type. Outside a type expression the reference
            // should not supply type parameters and be treated as a simple value reference
            // to the constructor function itself.
            var /** @type {?} */ suppliedParameters = typeParams || [];
            if (suppliedParameters.length > 0) {
                ctx.print(null, "<");
                this.visitAllObjects(function (type) { return type.visitType(_this, ctx); }, /** @type {?} */ ((typeParams)), ctx, ',');
                ctx.print(null, ">");
            }
        }
    };
    /**
     * @param {?} type
     * @param {?} ctx
     * @param {?=} defaultType
     * @return {?}
     */
    _TsEmitterVisitor.prototype._printColonType = function (type, ctx, defaultType) {
        if (type !== INFERRED_TYPE) {
            ctx.print(null, ':');
            this.visitType(type, ctx, defaultType);
        }
    };
    return _TsEmitterVisitor;
}(AbstractEmitterVisitor));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Map from tagName|propertyName SecurityContext. Properties applying to all tags use '*'.
 */
var SECURITY_SCHEMA = {};
/**
 * @param {?} ctx
 * @param {?} specs
 * @return {?}
 */
function registerContext(ctx, specs) {
    for (var _i = 0, specs_1 = specs; _i < specs_1.length; _i++) {
        var spec = specs_1[_i];
        SECURITY_SCHEMA[spec.toLowerCase()] = ctx;
    }
}
// Case is insignificant below, all element and attribute names are lower-cased for lookup.
registerContext(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_3" /* SecurityContext */].HTML, [
    'iframe|srcdoc',
    '*|innerHTML',
    '*|outerHTML',
]);
registerContext(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_3" /* SecurityContext */].STYLE, ['*|style']);
// NB: no SCRIPT contexts here, they are never allowed due to the parser stripping them.
registerContext(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_3" /* SecurityContext */].URL, [
    '*|formAction', 'area|href', 'area|ping', 'audio|src', 'a|href',
    'a|ping', 'blockquote|cite', 'body|background', 'del|cite', 'form|action',
    'img|src', 'img|srcset', 'input|src', 'ins|cite', 'q|cite',
    'source|src', 'source|srcset', 'track|src', 'video|poster', 'video|src',
]);
registerContext(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_3" /* SecurityContext */].RESOURCE_URL, [
    'applet|code',
    'applet|codebase',
    'base|href',
    'embed|src',
    'frame|src',
    'head|profile',
    'html|manifest',
    'iframe|src',
    'link|href',
    'media|src',
    'object|codebase',
    'object|data',
    'script|src',
]);
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var BOOLEAN = 'boolean';
var NUMBER = 'number';
var STRING = 'string';
var OBJECT = 'object';
/**
 * This array represents the DOM schema. It encodes inheritance, properties, and events.
 *
 * ## Overview
 *
 * Each line represents one kind of element. The `element_inheritance` and properties are joined
 * using `element_inheritance|properties` syntax.
 *
 * ## Element Inheritance
 *
 * The `element_inheritance` can be further subdivided as `element1,element2,...^parentElement`.
 * Here the individual elements are separated by `,` (commas). Every element in the list
 * has identical properties.
 *
 * An `element` may inherit additional properties from `parentElement` If no `^parentElement` is
 * specified then `""` (blank) element is assumed.
 *
 * NOTE: The blank element inherits from root `[Element]` element, the super element of all
 * elements.
 *
 * NOTE an element prefix such as `:svg:` has no special meaning to the schema.
 *
 * ## Properties
 *
 * Each element has a set of properties separated by `,` (commas). Each property can be prefixed
 * by a special character designating its type:
 *
 * - (no prefix): property is a string.
 * - `*`: property represents an event.
 * - `!`: property is a boolean.
 * - `#`: property is a number.
 * - `%`: property is an object.
 *
 * ## Query
 *
 * The class creates an internal squas representation which allows to easily answer the query of
 * if a given property exist on a given element.
 *
 * NOTE: We don't yet support querying for types or events.
 * NOTE: This schema is auto extracted from `schema_extractor.ts` located in the test folder,
 *       see dom_element_schema_registry_spec.ts
 */
// =================================================================================================
// =================================================================================================
// =========== S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P   -  S T O P  ===========
// =================================================================================================
// =================================================================================================
//
//                       DO NOT EDIT THIS DOM SCHEMA WITHOUT A SECURITY REVIEW!
//
// Newly added properties must be security reviewed and assigned an appropriate SecurityContext in
// dom_security_schema.ts. Reach out to mprobst & rjamet for details.
//
// =================================================================================================
var SCHEMA = [
    '[Element]|textContent,%classList,className,id,innerHTML,*beforecopy,*beforecut,*beforepaste,*copy,*cut,*paste,*search,*selectstart,*webkitfullscreenchange,*webkitfullscreenerror,*wheel,outerHTML,#scrollLeft,#scrollTop,slot' +
        /* added manually to avoid breaking changes */
        ',*message,*mozfullscreenchange,*mozfullscreenerror,*mozpointerlockchange,*mozpointerlockerror,*webglcontextcreationerror,*webglcontextlost,*webglcontextrestored',
    '[HTMLElement]^[Element]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate',
    'abbr,address,article,aside,b,bdi,bdo,cite,code,dd,dfn,dt,em,figcaption,figure,footer,header,i,kbd,main,mark,nav,noscript,rb,rp,rt,rtc,ruby,s,samp,section,small,strong,sub,sup,u,var,wbr^[HTMLElement]|accessKey,contentEditable,dir,!draggable,!hidden,innerText,lang,*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,outerText,!spellcheck,%style,#tabIndex,title,!translate',
    'media^[HTMLElement]|!autoplay,!controls,%controlsList,%crossOrigin,#currentTime,!defaultMuted,#defaultPlaybackRate,!disableRemotePlayback,!loop,!muted,*encrypted,*waitingforkey,#playbackRate,preload,src,%srcObject,#volume',
    ':svg:^[HTMLElement]|*abort,*auxclick,*blur,*cancel,*canplay,*canplaythrough,*change,*click,*close,*contextmenu,*cuechange,*dblclick,*drag,*dragend,*dragenter,*dragleave,*dragover,*dragstart,*drop,*durationchange,*emptied,*ended,*error,*focus,*gotpointercapture,*input,*invalid,*keydown,*keypress,*keyup,*load,*loadeddata,*loadedmetadata,*loadstart,*lostpointercapture,*mousedown,*mouseenter,*mouseleave,*mousemove,*mouseout,*mouseover,*mouseup,*mousewheel,*pause,*play,*playing,*pointercancel,*pointerdown,*pointerenter,*pointerleave,*pointermove,*pointerout,*pointerover,*pointerup,*progress,*ratechange,*reset,*resize,*scroll,*seeked,*seeking,*select,*show,*stalled,*submit,*suspend,*timeupdate,*toggle,*volumechange,*waiting,%style,#tabIndex',
    ':svg:graphics^:svg:|',
    ':svg:animation^:svg:|*begin,*end,*repeat',
    ':svg:geometry^:svg:|',
    ':svg:componentTransferFunction^:svg:|',
    ':svg:gradient^:svg:|',
    ':svg:textContent^:svg:graphics|',
    ':svg:textPositioning^:svg:textContent|',
    'a^[HTMLElement]|charset,coords,download,hash,host,hostname,href,hreflang,name,password,pathname,ping,port,protocol,referrerPolicy,rel,rev,search,shape,target,text,type,username',
    'area^[HTMLElement]|alt,coords,download,hash,host,hostname,href,!noHref,password,pathname,ping,port,protocol,referrerPolicy,rel,search,shape,target,username',
    'audio^media|',
    'br^[HTMLElement]|clear',
    'base^[HTMLElement]|href,target',
    'body^[HTMLElement]|aLink,background,bgColor,link,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,text,vLink',
    'button^[HTMLElement]|!autofocus,!disabled,formAction,formEnctype,formMethod,!formNoValidate,formTarget,name,type,value',
    'canvas^[HTMLElement]|#height,#width',
    'content^[HTMLElement]|select',
    'dl^[HTMLElement]|!compact',
    'datalist^[HTMLElement]|',
    'details^[HTMLElement]|!open',
    'dialog^[HTMLElement]|!open,returnValue',
    'dir^[HTMLElement]|!compact',
    'div^[HTMLElement]|align',
    'embed^[HTMLElement]|align,height,name,src,type,width',
    'fieldset^[HTMLElement]|!disabled,name',
    'font^[HTMLElement]|color,face,size',
    'form^[HTMLElement]|acceptCharset,action,autocomplete,encoding,enctype,method,name,!noValidate,target',
    'frame^[HTMLElement]|frameBorder,longDesc,marginHeight,marginWidth,name,!noResize,scrolling,src',
    'frameset^[HTMLElement]|cols,*beforeunload,*blur,*error,*focus,*hashchange,*languagechange,*load,*message,*offline,*online,*pagehide,*pageshow,*popstate,*rejectionhandled,*resize,*scroll,*storage,*unhandledrejection,*unload,rows',
    'hr^[HTMLElement]|align,color,!noShade,size,width',
    'head^[HTMLElement]|',
    'h1,h2,h3,h4,h5,h6^[HTMLElement]|align',
    'html^[HTMLElement]|version',
    'iframe^[HTMLElement]|align,!allowFullscreen,frameBorder,height,longDesc,marginHeight,marginWidth,name,referrerPolicy,%sandbox,scrolling,src,srcdoc,width',
    'img^[HTMLElement]|align,alt,border,%crossOrigin,#height,#hspace,!isMap,longDesc,lowsrc,name,referrerPolicy,sizes,src,srcset,useMap,#vspace,#width',
    'input^[HTMLElement]|accept,align,alt,autocapitalize,autocomplete,!autofocus,!checked,!defaultChecked,defaultValue,dirName,!disabled,%files,formAction,formEnctype,formMethod,!formNoValidate,formTarget,#height,!incremental,!indeterminate,max,#maxLength,min,#minLength,!multiple,name,pattern,placeholder,!readOnly,!required,selectionDirection,#selectionEnd,#selectionStart,#size,src,step,type,useMap,value,%valueAsDate,#valueAsNumber,#width',
    'li^[HTMLElement]|type,#value',
    'label^[HTMLElement]|htmlFor',
    'legend^[HTMLElement]|align',
    'link^[HTMLElement]|as,charset,%crossOrigin,!disabled,href,hreflang,integrity,media,referrerPolicy,rel,%relList,rev,%sizes,target,type',
    'map^[HTMLElement]|name',
    'marquee^[HTMLElement]|behavior,bgColor,direction,height,#hspace,#loop,#scrollAmount,#scrollDelay,!trueSpeed,#vspace,width',
    'menu^[HTMLElement]|!compact',
    'meta^[HTMLElement]|content,httpEquiv,name,scheme',
    'meter^[HTMLElement]|#high,#low,#max,#min,#optimum,#value',
    'ins,del^[HTMLElement]|cite,dateTime',
    'ol^[HTMLElement]|!compact,!reversed,#start,type',
    'object^[HTMLElement]|align,archive,border,code,codeBase,codeType,data,!declare,height,#hspace,name,standby,type,useMap,#vspace,width',
    'optgroup^[HTMLElement]|!disabled,label',
    'option^[HTMLElement]|!defaultSelected,!disabled,label,!selected,text,value',
    'output^[HTMLElement]|defaultValue,%htmlFor,name,value',
    'p^[HTMLElement]|align',
    'param^[HTMLElement]|name,type,value,valueType',
    'picture^[HTMLElement]|',
    'pre^[HTMLElement]|#width',
    'progress^[HTMLElement]|#max,#value',
    'q,blockquote,cite^[HTMLElement]|',
    'script^[HTMLElement]|!async,charset,%crossOrigin,!defer,event,htmlFor,integrity,src,text,type',
    'select^[HTMLElement]|!autofocus,!disabled,#length,!multiple,name,!required,#selectedIndex,#size,value',
    'shadow^[HTMLElement]|',
    'slot^[HTMLElement]|name',
    'source^[HTMLElement]|media,sizes,src,srcset,type',
    'span^[HTMLElement]|',
    'style^[HTMLElement]|!disabled,media,type',
    'caption^[HTMLElement]|align',
    'th,td^[HTMLElement]|abbr,align,axis,bgColor,ch,chOff,#colSpan,headers,height,!noWrap,#rowSpan,scope,vAlign,width',
    'col,colgroup^[HTMLElement]|align,ch,chOff,#span,vAlign,width',
    'table^[HTMLElement]|align,bgColor,border,%caption,cellPadding,cellSpacing,frame,rules,summary,%tFoot,%tHead,width',
    'tr^[HTMLElement]|align,bgColor,ch,chOff,vAlign',
    'tfoot,thead,tbody^[HTMLElement]|align,ch,chOff,vAlign',
    'template^[HTMLElement]|',
    'textarea^[HTMLElement]|autocapitalize,!autofocus,#cols,defaultValue,dirName,!disabled,#maxLength,#minLength,name,placeholder,!readOnly,!required,#rows,selectionDirection,#selectionEnd,#selectionStart,value,wrap',
    'title^[HTMLElement]|text',
    'track^[HTMLElement]|!default,kind,label,src,srclang',
    'ul^[HTMLElement]|!compact,type',
    'unknown^[HTMLElement]|',
    'video^media|#height,poster,#width',
    ':svg:a^:svg:graphics|',
    ':svg:animate^:svg:animation|',
    ':svg:animateMotion^:svg:animation|',
    ':svg:animateTransform^:svg:animation|',
    ':svg:circle^:svg:geometry|',
    ':svg:clipPath^:svg:graphics|',
    ':svg:defs^:svg:graphics|',
    ':svg:desc^:svg:|',
    ':svg:discard^:svg:|',
    ':svg:ellipse^:svg:geometry|',
    ':svg:feBlend^:svg:|',
    ':svg:feColorMatrix^:svg:|',
    ':svg:feComponentTransfer^:svg:|',
    ':svg:feComposite^:svg:|',
    ':svg:feConvolveMatrix^:svg:|',
    ':svg:feDiffuseLighting^:svg:|',
    ':svg:feDisplacementMap^:svg:|',
    ':svg:feDistantLight^:svg:|',
    ':svg:feDropShadow^:svg:|',
    ':svg:feFlood^:svg:|',
    ':svg:feFuncA^:svg:componentTransferFunction|',
    ':svg:feFuncB^:svg:componentTransferFunction|',
    ':svg:feFuncG^:svg:componentTransferFunction|',
    ':svg:feFuncR^:svg:componentTransferFunction|',
    ':svg:feGaussianBlur^:svg:|',
    ':svg:feImage^:svg:|',
    ':svg:feMerge^:svg:|',
    ':svg:feMergeNode^:svg:|',
    ':svg:feMorphology^:svg:|',
    ':svg:feOffset^:svg:|',
    ':svg:fePointLight^:svg:|',
    ':svg:feSpecularLighting^:svg:|',
    ':svg:feSpotLight^:svg:|',
    ':svg:feTile^:svg:|',
    ':svg:feTurbulence^:svg:|',
    ':svg:filter^:svg:|',
    ':svg:foreignObject^:svg:graphics|',
    ':svg:g^:svg:graphics|',
    ':svg:image^:svg:graphics|',
    ':svg:line^:svg:geometry|',
    ':svg:linearGradient^:svg:gradient|',
    ':svg:mpath^:svg:|',
    ':svg:marker^:svg:|',
    ':svg:mask^:svg:|',
    ':svg:metadata^:svg:|',
    ':svg:path^:svg:geometry|',
    ':svg:pattern^:svg:|',
    ':svg:polygon^:svg:geometry|',
    ':svg:polyline^:svg:geometry|',
    ':svg:radialGradient^:svg:gradient|',
    ':svg:rect^:svg:geometry|',
    ':svg:svg^:svg:graphics|#currentScale,#zoomAndPan',
    ':svg:script^:svg:|type',
    ':svg:set^:svg:animation|',
    ':svg:stop^:svg:|',
    ':svg:style^:svg:|!disabled,media,title,type',
    ':svg:switch^:svg:graphics|',
    ':svg:symbol^:svg:|',
    ':svg:tspan^:svg:textPositioning|',
    ':svg:text^:svg:textPositioning|',
    ':svg:textPath^:svg:textContent|',
    ':svg:title^:svg:|',
    ':svg:use^:svg:graphics|',
    ':svg:view^:svg:|#zoomAndPan',
    'data^[HTMLElement]|value',
    'keygen^[HTMLElement]|!autofocus,challenge,!disabled,form,keytype,name',
    'menuitem^[HTMLElement]|type,label,icon,!disabled,!checked,radiogroup,!default',
    'summary^[HTMLElement]|',
    'time^[HTMLElement]|dateTime',
    ':svg:cursor^:svg:|',
];
var _ATTR_TO_PROP = {
    'class': 'className',
    'for': 'htmlFor',
    'formaction': 'formAction',
    'innerHtml': 'innerHTML',
    'readonly': 'readOnly',
    'tabindex': 'tabIndex',
};
var DomElementSchemaRegistry = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](DomElementSchemaRegistry, _super);
    function DomElementSchemaRegistry() {
        var _this = _super.call(this) || this;
        _this._schema = {};
        SCHEMA.forEach(function (encodedType) {
            var type = {};
            var _a = encodedType.split('|'), strType = _a[0], strProperties = _a[1];
            var properties = strProperties.split(',');
            var _b = strType.split('^'), typeNames = _b[0], superName = _b[1];
            typeNames.split(',').forEach(function (tag) { return _this._schema[tag.toLowerCase()] = type; });
            var superType = superName && _this._schema[superName.toLowerCase()];
            if (superType) {
                Object.keys(superType).forEach(function (prop) { type[prop] = superType[prop]; });
            }
            properties.forEach(function (property) {
                if (property.length > 0) {
                    switch (property[0]) {
                        case '*':
                            // We don't yet support events.
                            // If ever allowing to bind to events, GO THROUGH A SECURITY REVIEW, allowing events
                            // will
                            // almost certainly introduce bad XSS vulnerabilities.
                            // type[property.substring(1)] = EVENT;
                            break;
                        case '!':
                            type[property.substring(1)] = BOOLEAN;
                            break;
                        case '#':
                            type[property.substring(1)] = NUMBER;
                            break;
                        case '%':
                            type[property.substring(1)] = OBJECT;
                            break;
                        default:
                            type[property] = STRING;
                    }
                }
            });
        });
        return _this;
    }
    /**
     * @param {?} tagName
     * @param {?} propName
     * @param {?} schemaMetas
     * @return {?}
     */
    DomElementSchemaRegistry.prototype.hasProperty = function (tagName, propName, schemaMetas) {
        if (schemaMetas.some(function (schema) { return schema.name === __WEBPACK_IMPORTED_MODULE_1__angular_core__["K" /* NO_ERRORS_SCHEMA */].name; })) {
            return true;
        }
        if (tagName.indexOf('-') > -1) {
            if (isNgContainer(tagName) || isNgContent(tagName)) {
                return false;
            }
            if (schemaMetas.some(function (schema) { return schema.name === __WEBPACK_IMPORTED_MODULE_1__angular_core__["i" /* CUSTOM_ELEMENTS_SCHEMA */].name; })) {
                // Can't tell now as we don't know which properties a custom element will get
                // once it is instantiated
                return true;
            }
        }
        var /** @type {?} */ elementProperties = this._schema[tagName.toLowerCase()] || this._schema['unknown'];
        return !!elementProperties[propName];
    };
    /**
     * @param {?} tagName
     * @param {?} schemaMetas
     * @return {?}
     */
    DomElementSchemaRegistry.prototype.hasElement = function (tagName, schemaMetas) {
        if (schemaMetas.some(function (schema) { return schema.name === __WEBPACK_IMPORTED_MODULE_1__angular_core__["K" /* NO_ERRORS_SCHEMA */].name; })) {
            return true;
        }
        if (tagName.indexOf('-') > -1) {
            if (isNgContainer(tagName) || isNgContent(tagName)) {
                return true;
            }
            if (schemaMetas.some(function (schema) { return schema.name === __WEBPACK_IMPORTED_MODULE_1__angular_core__["i" /* CUSTOM_ELEMENTS_SCHEMA */].name; })) {
                // Allow any custom elements
                return true;
            }
        }
        return !!this._schema[tagName.toLowerCase()];
    };
    /**
     * securityContext returns the security context for the given property on the given DOM tag.
     *
     * Tag and property name are statically known and cannot change at runtime, i.e. it is not
     * possible to bind a value into a changing attribute or tag name.
     *
     * The filtering is white list based. All attributes in the schema above are assumed to have the
     * 'NONE' security context, i.e. that they are safe inert string values. Only specific well known
     * attack vectors are assigned their appropriate context.
     * @param {?} tagName
     * @param {?} propName
     * @param {?} isAttribute
     * @return {?}
     */
    DomElementSchemaRegistry.prototype.securityContext = function (tagName, propName, isAttribute) {
        if (isAttribute) {
            // NB: For security purposes, use the mapped property name, not the attribute name.
            propName = this.getMappedPropName(propName);
        }
        // Make sure comparisons are case insensitive, so that case differences between attribute and
        // property names do not have a security impact.
        tagName = tagName.toLowerCase();
        propName = propName.toLowerCase();
        var /** @type {?} */ ctx = SECURITY_SCHEMA[tagName + '|' + propName];
        if (ctx) {
            return ctx;
        }
        ctx = SECURITY_SCHEMA['*|' + propName];
        return ctx ? ctx : __WEBPACK_IMPORTED_MODULE_1__angular_core__["_3" /* SecurityContext */].NONE;
    };
    /**
     * @param {?} propName
     * @return {?}
     */
    DomElementSchemaRegistry.prototype.getMappedPropName = function (propName) { return _ATTR_TO_PROP[propName] || propName; };
    /**
     * @return {?}
     */
    DomElementSchemaRegistry.prototype.getDefaultComponentElementName = function () { return 'ng-component'; };
    /**
     * @param {?} name
     * @return {?}
     */
    DomElementSchemaRegistry.prototype.validateProperty = function (name) {
        if (name.toLowerCase().startsWith('on')) {
            var /** @type {?} */ msg = "Binding to event property '" + name + "' is disallowed for security reasons, " +
                ("please use (" + name.slice(2) + ")=...") +
                ("\nIf '" + name + "' is a directive input, make sure the directive is imported by the") +
                " current module.";
            return { error: true, msg: msg };
        }
        else {
            return { error: false };
        }
    };
    /**
     * @param {?} name
     * @return {?}
     */
    DomElementSchemaRegistry.prototype.validateAttribute = function (name) {
        if (name.toLowerCase().startsWith('on')) {
            var /** @type {?} */ msg = "Binding to event attribute '" + name + "' is disallowed for security reasons, " +
                ("please use (" + name.slice(2) + ")=...");
            return { error: true, msg: msg };
        }
        else {
            return { error: false };
        }
    };
    /**
     * @return {?}
     */
    DomElementSchemaRegistry.prototype.allKnownElementNames = function () { return Object.keys(this._schema); };
    /**
     * @param {?} propName
     * @return {?}
     */
    DomElementSchemaRegistry.prototype.normalizeAnimationStyleProperty = function (propName) {
        return dashCaseToCamelCase(propName);
    };
    /**
     * @param {?} camelCaseProp
     * @param {?} userProvidedProp
     * @param {?} val
     * @return {?}
     */
    DomElementSchemaRegistry.prototype.normalizeAnimationStyleValue = function (camelCaseProp, userProvidedProp, val) {
        var /** @type {?} */ unit = '';
        var /** @type {?} */ strVal = val.toString().trim();
        var /** @type {?} */ errorMsg = ((null));
        if (_isPixelDimensionStyle(camelCaseProp) && val !== 0 && val !== '0') {
            if (typeof val === 'number') {
                unit = 'px';
            }
            else {
                var /** @type {?} */ valAndSuffixMatch = val.match(/^[+-]?[\d\.]+([a-z]*)$/);
                if (valAndSuffixMatch && valAndSuffixMatch[1].length == 0) {
                    errorMsg = "Please provide a CSS unit value for " + userProvidedProp + ":" + val;
                }
            }
        }
        return { error: errorMsg, value: strVal + unit };
    };
    return DomElementSchemaRegistry;
}(ElementSchemaRegistry));
DomElementSchemaRegistry.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
DomElementSchemaRegistry.ctorParameters = function () { return []; };
/**
 * @param {?} prop
 * @return {?}
 */
function _isPixelDimensionStyle(prop) {
    switch (prop) {
        case 'width':
        case 'height':
        case 'minWidth':
        case 'minHeight':
        case 'maxWidth':
        case 'maxHeight':
        case 'left':
        case 'top':
        case 'bottom':
        case 'right':
        case 'fontSize':
        case 'outlineWidth':
        case 'outlineOffset':
        case 'paddingTop':
        case 'paddingLeft':
        case 'paddingBottom':
        case 'paddingRight':
        case 'marginTop':
        case 'marginLeft':
        case 'marginBottom':
        case 'marginRight':
        case 'borderRadius':
        case 'borderWidth':
        case 'borderTopWidth':
        case 'borderLeftWidth':
        case 'borderRightWidth':
        case 'borderBottomWidth':
        case 'textIndent':
            return true;
        default:
            return false;
    }
}
var ShadowCss = (function () {
    function ShadowCss() {
        this.strictStyling = true;
    }
    /**
     * @param {?} cssText
     * @param {?} selector
     * @param {?=} hostSelector
     * @return {?}
     */
    ShadowCss.prototype.shimCssText = function (cssText, selector, hostSelector) {
        if (hostSelector === void 0) { hostSelector = ''; }
        var /** @type {?} */ sourceMappingUrl = extractSourceMappingUrl(cssText);
        cssText = stripComments(cssText);
        cssText = this._insertDirectives(cssText);
        return this._scopeCssText(cssText, selector, hostSelector) + sourceMappingUrl;
    };
    /**
     * @param {?} cssText
     * @return {?}
     */
    ShadowCss.prototype._insertDirectives = function (cssText) {
        cssText = this._insertPolyfillDirectivesInCssText(cssText);
        return this._insertPolyfillRulesInCssText(cssText);
    };
    /**
     * @param {?} cssText
     * @return {?}
     */
    ShadowCss.prototype._insertPolyfillDirectivesInCssText = function (cssText) {
        // Difference with webcomponents.js: does not handle comments
        return cssText.replace(_cssContentNextSelectorRe, function () {
            var m = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                m[_i] = arguments[_i];
            }
            return m[2] + '{';
        });
    };
    /**
     * @param {?} cssText
     * @return {?}
     */
    ShadowCss.prototype._insertPolyfillRulesInCssText = function (cssText) {
        // Difference with webcomponents.js: does not handle comments
        return cssText.replace(_cssContentRuleRe, function () {
            var m = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                m[_i] = arguments[_i];
            }
            var /** @type {?} */ rule = m[0].replace(m[1], '').replace(m[2], '');
            return m[4] + rule;
        });
    };
    /**
     * @param {?} cssText
     * @param {?} scopeSelector
     * @param {?} hostSelector
     * @return {?}
     */
    ShadowCss.prototype._scopeCssText = function (cssText, scopeSelector, hostSelector) {
        var /** @type {?} */ unscopedRules = this._extractUnscopedRulesFromCssText(cssText);
        // replace :host and :host-context -shadowcsshost and -shadowcsshost respectively
        cssText = this._insertPolyfillHostInCssText(cssText);
        cssText = this._convertColonHost(cssText);
        cssText = this._convertColonHostContext(cssText);
        cssText = this._convertShadowDOMSelectors(cssText);
        if (scopeSelector) {
            cssText = this._scopeSelectors(cssText, scopeSelector, hostSelector);
        }
        cssText = cssText + '\n' + unscopedRules;
        return cssText.trim();
    };
    /**
     * @param {?} cssText
     * @return {?}
     */
    ShadowCss.prototype._extractUnscopedRulesFromCssText = function (cssText) {
        // Difference with webcomponents.js: does not handle comments
        var /** @type {?} */ r = '';
        var /** @type {?} */ m;
        _cssContentUnscopedRuleRe.lastIndex = 0;
        while ((m = _cssContentUnscopedRuleRe.exec(cssText)) !== null) {
            var /** @type {?} */ rule = m[0].replace(m[2], '').replace(m[1], m[4]);
            r += rule + '\n\n';
        }
        return r;
    };
    /**
     * @param {?} cssText
     * @return {?}
     */
    ShadowCss.prototype._convertColonHost = function (cssText) {
        return this._convertColonRule(cssText, _cssColonHostRe, this._colonHostPartReplacer);
    };
    /**
     * @param {?} cssText
     * @return {?}
     */
    ShadowCss.prototype._convertColonHostContext = function (cssText) {
        return this._convertColonRule(cssText, _cssColonHostContextRe, this._colonHostContextPartReplacer);
    };
    /**
     * @param {?} cssText
     * @param {?} regExp
     * @param {?} partReplacer
     * @return {?}
     */
    ShadowCss.prototype._convertColonRule = function (cssText, regExp, partReplacer) {
        // m[1] = :host(-context), m[2] = contents of (), m[3] rest of rule
        return cssText.replace(regExp, function () {
            var m = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                m[_i] = arguments[_i];
            }
            if (m[2]) {
                var /** @type {?} */ parts = m[2].split(',');
                var /** @type {?} */ r = [];
                for (var /** @type {?} */ i = 0; i < parts.length; i++) {
                    var /** @type {?} */ p = parts[i].trim();
                    if (!p)
                        break;
                    r.push(partReplacer(_polyfillHostNoCombinator, p, m[3]));
                }
                return r.join(',');
            }
            else {
                return _polyfillHostNoCombinator + m[3];
            }
        });
    };
    /**
     * @param {?} host
     * @param {?} part
     * @param {?} suffix
     * @return {?}
     */
    ShadowCss.prototype._colonHostContextPartReplacer = function (host, part, suffix) {
        if (part.indexOf(_polyfillHost) > -1) {
            return this._colonHostPartReplacer(host, part, suffix);
        }
        else {
            return host + part + suffix + ', ' + part + ' ' + host + suffix;
        }
    };
    /**
     * @param {?} host
     * @param {?} part
     * @param {?} suffix
     * @return {?}
     */
    ShadowCss.prototype._colonHostPartReplacer = function (host, part, suffix) {
        return host + part.replace(_polyfillHost, '') + suffix;
    };
    /**
     * @param {?} cssText
     * @return {?}
     */
    ShadowCss.prototype._convertShadowDOMSelectors = function (cssText) {
        return _shadowDOMSelectorsRe.reduce(function (result, pattern) { return result.replace(pattern, ' '); }, cssText);
    };
    /**
     * @param {?} cssText
     * @param {?} scopeSelector
     * @param {?} hostSelector
     * @return {?}
     */
    ShadowCss.prototype._scopeSelectors = function (cssText, scopeSelector, hostSelector) {
        var _this = this;
        return processRules(cssText, function (rule) {
            var /** @type {?} */ selector = rule.selector;
            var /** @type {?} */ content = rule.content;
            if (rule.selector[0] != '@') {
                selector =
                    _this._scopeSelector(rule.selector, scopeSelector, hostSelector, _this.strictStyling);
            }
            else if (rule.selector.startsWith('@media') || rule.selector.startsWith('@supports') ||
                rule.selector.startsWith('@page') || rule.selector.startsWith('@document')) {
                content = _this._scopeSelectors(rule.content, scopeSelector, hostSelector);
            }
            return new CssRule(selector, content);
        });
    };
    /**
     * @param {?} selector
     * @param {?} scopeSelector
     * @param {?} hostSelector
     * @param {?} strict
     * @return {?}
     */
    ShadowCss.prototype._scopeSelector = function (selector, scopeSelector, hostSelector, strict) {
        var _this = this;
        return selector.split(',')
            .map(function (part) { return part.trim().split(_shadowDeepSelectors); })
            .map(function (deepParts) {
            var shallowPart = deepParts[0], otherParts = deepParts.slice(1);
            var /** @type {?} */ applyScope = function (shallowPart) {
                if (_this._selectorNeedsScoping(shallowPart, scopeSelector)) {
                    return strict ?
                        _this._applyStrictSelectorScope(shallowPart, scopeSelector, hostSelector) :
                        _this._applySelectorScope(shallowPart, scopeSelector, hostSelector);
                }
                else {
                    return shallowPart;
                }
            };
            return [applyScope(shallowPart)].concat(otherParts).join(' ');
        })
            .join(', ');
    };
    /**
     * @param {?} selector
     * @param {?} scopeSelector
     * @return {?}
     */
    ShadowCss.prototype._selectorNeedsScoping = function (selector, scopeSelector) {
        var /** @type {?} */ re = this._makeScopeMatcher(scopeSelector);
        return !re.test(selector);
    };
    /**
     * @param {?} scopeSelector
     * @return {?}
     */
    ShadowCss.prototype._makeScopeMatcher = function (scopeSelector) {
        var /** @type {?} */ lre = /\[/g;
        var /** @type {?} */ rre = /\]/g;
        scopeSelector = scopeSelector.replace(lre, '\\[').replace(rre, '\\]');
        return new RegExp('^(' + scopeSelector + ')' + _selectorReSuffix, 'm');
    };
    /**
     * @param {?} selector
     * @param {?} scopeSelector
     * @param {?} hostSelector
     * @return {?}
     */
    ShadowCss.prototype._applySelectorScope = function (selector, scopeSelector, hostSelector) {
        // Difference from webcomponents.js: scopeSelector could not be an array
        return this._applySimpleSelectorScope(selector, scopeSelector, hostSelector);
    };
    /**
     * @param {?} selector
     * @param {?} scopeSelector
     * @param {?} hostSelector
     * @return {?}
     */
    ShadowCss.prototype._applySimpleSelectorScope = function (selector, scopeSelector, hostSelector) {
        // In Android browser, the lastIndex is not reset when the regex is used in String.replace()
        _polyfillHostRe.lastIndex = 0;
        if (_polyfillHostRe.test(selector)) {
            var /** @type {?} */ replaceBy_1 = this.strictStyling ? "[" + hostSelector + "]" : scopeSelector;
            return selector
                .replace(_polyfillHostNoCombinatorRe, function (hnc, selector) {
                return selector.replace(/([^:]*)(:*)(.*)/, function (_, before, colon, after) {
                    return before + replaceBy_1 + colon + after;
                });
            })
                .replace(_polyfillHostRe, replaceBy_1 + ' ');
        }
        return scopeSelector + ' ' + selector;
    };
    /**
     * @param {?} selector
     * @param {?} scopeSelector
     * @param {?} hostSelector
     * @return {?}
     */
    ShadowCss.prototype._applyStrictSelectorScope = function (selector, scopeSelector, hostSelector) {
        var _this = this;
        var /** @type {?} */ isRe = /\[is=([^\]]*)\]/g;
        scopeSelector = scopeSelector.replace(isRe, function (_) {
            var parts = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                parts[_i - 1] = arguments[_i];
            }
            return parts[0];
        });
        var /** @type {?} */ attrName = '[' + scopeSelector + ']';
        var /** @type {?} */ _scopeSelectorPart = function (p) {
            var /** @type {?} */ scopedP = p.trim();
            if (!scopedP) {
                return '';
            }
            if (p.indexOf(_polyfillHostNoCombinator) > -1) {
                scopedP = _this._applySimpleSelectorScope(p, scopeSelector, hostSelector);
            }
            else {
                // remove :host since it should be unnecessary
                var /** @type {?} */ t = p.replace(_polyfillHostRe, '');
                if (t.length > 0) {
                    var /** @type {?} */ matches = t.match(/([^:]*)(:*)(.*)/);
                    if (matches) {
                        scopedP = matches[1] + attrName + matches[2] + matches[3];
                    }
                }
            }
            return scopedP;
        };
        var /** @type {?} */ safeContent = new SafeSelector(selector);
        selector = safeContent.content();
        var /** @type {?} */ scopedSelector = '';
        var /** @type {?} */ startIndex = 0;
        var /** @type {?} */ res;
        var /** @type {?} */ sep = /( |>|\+|~(?!=))\s*/g;
        var /** @type {?} */ scopeAfter = selector.indexOf(_polyfillHostNoCombinator);
        while ((res = sep.exec(selector)) !== null) {
            var /** @type {?} */ separator = res[1];
            var /** @type {?} */ part = selector.slice(startIndex, res.index).trim();
            // if a selector appears before :host-context it should not be shimmed as it
            // matches on ancestor elements and not on elements in the host's shadow
            var /** @type {?} */ scopedPart = startIndex >= scopeAfter ? _scopeSelectorPart(part) : part;
            scopedSelector += scopedPart + " " + separator + " ";
            startIndex = sep.lastIndex;
        }
        scopedSelector += _scopeSelectorPart(selector.substring(startIndex));
        // replace the placeholders with their original values
        return safeContent.restore(scopedSelector);
    };
    /**
     * @param {?} selector
     * @return {?}
     */
    ShadowCss.prototype._insertPolyfillHostInCssText = function (selector) {
        return selector.replace(_colonHostContextRe, _polyfillHostContext)
            .replace(_colonHostRe, _polyfillHost);
    };
    return ShadowCss;
}());
var SafeSelector = (function () {
    /**
     * @param {?} selector
     */
    function SafeSelector(selector) {
        var _this = this;
        this.placeholders = [];
        this.index = 0;
        // Replaces attribute selectors with placeholders.
        // The WS in [attr="va lue"] would otherwise be interpreted as a selector separator.
        selector = selector.replace(/(\[[^\]]*\])/g, function (_, keep) {
            var replaceBy = "__ph-" + _this.index + "__";
            _this.placeholders.push(keep);
            _this.index++;
            return replaceBy;
        });
        // Replaces the expression in `:nth-child(2n + 1)` with a placeholder.
        // WS and "+" would otherwise be interpreted as selector separators.
        this._content = selector.replace(/(:nth-[-\w]+)(\([^)]+\))/g, function (_, pseudo, exp) {
            var replaceBy = "__ph-" + _this.index + "__";
            _this.placeholders.push(exp);
            _this.index++;
            return pseudo + replaceBy;
        });
    }
    /**
     * @param {?} content
     * @return {?}
     */
    SafeSelector.prototype.restore = function (content) {
        var _this = this;
        return content.replace(/__ph-(\d+)__/g, function (ph, index) { return _this.placeholders[+index]; });
    };
    /**
     * @return {?}
     */
    SafeSelector.prototype.content = function () { return this._content; };
    return SafeSelector;
}());
var _cssContentNextSelectorRe = /polyfill-next-selector[^}]*content:[\s]*?(['"])(.*?)\1[;\s]*}([^{]*?){/gim;
var _cssContentRuleRe = /(polyfill-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim;
var _cssContentUnscopedRuleRe = /(polyfill-unscoped-rule)[^}]*(content:[\s]*(['"])(.*?)\3)[;\s]*[^}]*}/gim;
var _polyfillHost = '-shadowcsshost';
// note: :host-context pre-processed to -shadowcsshostcontext.
var _polyfillHostContext = '-shadowcsscontext';
var _parenSuffix = ')(?:\\((' +
    '(?:\\([^)(]*\\)|[^)(]*)+?' +
    ')\\))?([^,{]*)';
var _cssColonHostRe = new RegExp('(' + _polyfillHost + _parenSuffix, 'gim');
var _cssColonHostContextRe = new RegExp('(' + _polyfillHostContext + _parenSuffix, 'gim');
var _polyfillHostNoCombinator = _polyfillHost + '-no-combinator';
var _polyfillHostNoCombinatorRe = /-shadowcsshost-no-combinator([^\s]*)/;
var _shadowDOMSelectorsRe = [
    /::shadow/g,
    /::content/g,
    // Deprecated selectors
    /\/shadow-deep\//g,
    /\/shadow\//g,
];
// The deep combinator is deprecated in the CSS spec
// Support for `>>>`, `deep`, `::ng-deep` is then also deprecated and will be removed in the future.
// see https://github.com/angular/angular/pull/17677
var _shadowDeepSelectors = /(?:>>>)|(?:\/deep\/)|(?:::ng-deep)/g;
var _selectorReSuffix = '([>\\s~+\[.,{:][\\s\\S]*)?$';
var _polyfillHostRe = /-shadowcsshost/gim;
var _colonHostRe = /:host/gim;
var _colonHostContextRe = /:host-context/gim;
var _commentRe = /\/\*\s*[\s\S]*?\*\//g;
/**
 * @param {?} input
 * @return {?}
 */
function stripComments(input) {
    return input.replace(_commentRe, '');
}
// all comments except inline source mapping
var _sourceMappingUrlRe = /\/\*\s*#\s*sourceMappingURL=[\s\S]+?\*\//;
/**
 * @param {?} input
 * @return {?}
 */
function extractSourceMappingUrl(input) {
    var /** @type {?} */ matcher = input.match(_sourceMappingUrlRe);
    return matcher ? matcher[0] : '';
}
var _ruleRe = /(\s*)([^;\{\}]+?)(\s*)((?:{%BLOCK%}?\s*;?)|(?:\s*;))/g;
var _curlyRe = /([{}])/g;
var OPEN_CURLY = '{';
var CLOSE_CURLY = '}';
var BLOCK_PLACEHOLDER = '%BLOCK%';
var CssRule = (function () {
    /**
     * @param {?} selector
     * @param {?} content
     */
    function CssRule(selector, content) {
        this.selector = selector;
        this.content = content;
    }
    return CssRule;
}());
/**
 * @param {?} input
 * @param {?} ruleCallback
 * @return {?}
 */
function processRules(input, ruleCallback) {
    var /** @type {?} */ inputWithEscapedBlocks = escapeBlocks(input);
    var /** @type {?} */ nextBlockIndex = 0;
    return inputWithEscapedBlocks.escapedString.replace(_ruleRe, function () {
        var m = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            m[_i] = arguments[_i];
        }
        var /** @type {?} */ selector = m[2];
        var /** @type {?} */ content = '';
        var /** @type {?} */ suffix = m[4];
        var /** @type {?} */ contentPrefix = '';
        if (suffix && suffix.startsWith('{' + BLOCK_PLACEHOLDER)) {
            content = inputWithEscapedBlocks.blocks[nextBlockIndex++];
            suffix = suffix.substring(BLOCK_PLACEHOLDER.length + 1);
            contentPrefix = '{';
        }
        var /** @type {?} */ rule = ruleCallback(new CssRule(selector, content));
        return "" + m[1] + rule.selector + m[3] + contentPrefix + rule.content + suffix;
    });
}
var StringWithEscapedBlocks = (function () {
    /**
     * @param {?} escapedString
     * @param {?} blocks
     */
    function StringWithEscapedBlocks(escapedString, blocks) {
        this.escapedString = escapedString;
        this.blocks = blocks;
    }
    return StringWithEscapedBlocks;
}());
/**
 * @param {?} input
 * @return {?}
 */
function escapeBlocks(input) {
    var /** @type {?} */ inputParts = input.split(_curlyRe);
    var /** @type {?} */ resultParts = [];
    var /** @type {?} */ escapedBlocks = [];
    var /** @type {?} */ bracketCount = 0;
    var /** @type {?} */ currentBlockParts = [];
    for (var /** @type {?} */ partIndex = 0; partIndex < inputParts.length; partIndex++) {
        var /** @type {?} */ part = inputParts[partIndex];
        if (part == CLOSE_CURLY) {
            bracketCount--;
        }
        if (bracketCount > 0) {
            currentBlockParts.push(part);
        }
        else {
            if (currentBlockParts.length > 0) {
                escapedBlocks.push(currentBlockParts.join(''));
                resultParts.push(BLOCK_PLACEHOLDER);
                currentBlockParts = [];
            }
            resultParts.push(part);
        }
        if (part == OPEN_CURLY) {
            bracketCount++;
        }
    }
    if (currentBlockParts.length > 0) {
        escapedBlocks.push(currentBlockParts.join(''));
        resultParts.push(BLOCK_PLACEHOLDER);
    }
    return new StringWithEscapedBlocks(resultParts.join(''), escapedBlocks);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var COMPONENT_VARIABLE = '%COMP%';
var HOST_ATTR = "_nghost-" + COMPONENT_VARIABLE;
var CONTENT_ATTR = "_ngcontent-" + COMPONENT_VARIABLE;
var StylesCompileDependency = (function () {
    /**
     * @param {?} name
     * @param {?} moduleUrl
     * @param {?} setValue
     */
    function StylesCompileDependency(name, moduleUrl, setValue) {
        this.name = name;
        this.moduleUrl = moduleUrl;
        this.setValue = setValue;
    }
    return StylesCompileDependency;
}());
var CompiledStylesheet = (function () {
    /**
     * @param {?} outputCtx
     * @param {?} stylesVar
     * @param {?} dependencies
     * @param {?} isShimmed
     * @param {?} meta
     */
    function CompiledStylesheet(outputCtx, stylesVar, dependencies, isShimmed, meta) {
        this.outputCtx = outputCtx;
        this.stylesVar = stylesVar;
        this.dependencies = dependencies;
        this.isShimmed = isShimmed;
        this.meta = meta;
    }
    return CompiledStylesheet;
}());
var StyleCompiler = (function () {
    /**
     * @param {?} _urlResolver
     */
    function StyleCompiler(_urlResolver) {
        this._urlResolver = _urlResolver;
        this._shadowCss = new ShadowCss();
    }
    /**
     * @param {?} outputCtx
     * @param {?} comp
     * @return {?}
     */
    StyleCompiler.prototype.compileComponent = function (outputCtx, comp) {
        var /** @type {?} */ template = ((comp.template));
        return this._compileStyles(outputCtx, comp, new CompileStylesheetMetadata({
            styles: template.styles,
            styleUrls: template.styleUrls,
            moduleUrl: identifierModuleUrl(comp.type)
        }), true);
    };
    /**
     * @param {?} outputCtx
     * @param {?} comp
     * @param {?} stylesheet
     * @return {?}
     */
    StyleCompiler.prototype.compileStyles = function (outputCtx, comp, stylesheet) {
        return this._compileStyles(outputCtx, comp, stylesheet, false);
    };
    /**
     * @param {?} comp
     * @return {?}
     */
    StyleCompiler.prototype.needsStyleShim = function (comp) {
        return ((comp.template)).encapsulation === __WEBPACK_IMPORTED_MODULE_1__angular_core__["_15" /* ViewEncapsulation */].Emulated;
    };
    /**
     * @param {?} outputCtx
     * @param {?} comp
     * @param {?} stylesheet
     * @param {?} isComponentStylesheet
     * @return {?}
     */
    StyleCompiler.prototype._compileStyles = function (outputCtx, comp, stylesheet, isComponentStylesheet) {
        var _this = this;
        var /** @type {?} */ shim = this.needsStyleShim(comp);
        var /** @type {?} */ styleExpressions = stylesheet.styles.map(function (plainStyle) { return literal(_this._shimIfNeeded(plainStyle, shim)); });
        var /** @type {?} */ dependencies = [];
        stylesheet.styleUrls.forEach(function (styleUrl) {
            var /** @type {?} */ exprIndex = styleExpressions.length;
            // Note: This placeholder will be filled later.
            styleExpressions.push(/** @type {?} */ ((null)));
            dependencies.push(new StylesCompileDependency(getStylesVarName(null), styleUrl, function (value) { return styleExpressions[exprIndex] = outputCtx.importExpr(value); }));
        });
        // styles variable contains plain strings and arrays of other styles arrays (recursive),
        // so we set its type to dynamic.
        var /** @type {?} */ stylesVar = getStylesVarName(isComponentStylesheet ? comp : null);
        var /** @type {?} */ stmt = variable(stylesVar)
            .set(literalArr(styleExpressions, new ArrayType(DYNAMIC_TYPE, [TypeModifier.Const])))
            .toDeclStmt(null, isComponentStylesheet ? [StmtModifier.Final] : [
            StmtModifier.Final, StmtModifier.Exported
        ]);
        outputCtx.statements.push(stmt);
        return new CompiledStylesheet(outputCtx, stylesVar, dependencies, shim, stylesheet);
    };
    /**
     * @param {?} style
     * @param {?} shim
     * @return {?}
     */
    StyleCompiler.prototype._shimIfNeeded = function (style$$1, shim) {
        return shim ? this._shadowCss.shimCssText(style$$1, CONTENT_ATTR, HOST_ATTR) : style$$1;
    };
    return StyleCompiler;
}());
StyleCompiler.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
StyleCompiler.ctorParameters = function () { return [
    { type: UrlResolver, },
]; };
/**
 * @param {?} component
 * @return {?}
 */
function getStylesVarName(component) {
    var /** @type {?} */ result = "styles";
    if (component) {
        result += "_" + identifierName(component.type);
    }
    return result;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var EventHandlerVars = (function () {
    function EventHandlerVars() {
    }
    return EventHandlerVars;
}());
EventHandlerVars.event = variable('$event');
var ConvertActionBindingResult = (function () {
    /**
     * @param {?} stmts
     * @param {?} allowDefault
     */
    function ConvertActionBindingResult(stmts, allowDefault) {
        this.stmts = stmts;
        this.allowDefault = allowDefault;
    }
    return ConvertActionBindingResult;
}());
/**
 * Converts the given expression AST into an executable output AST, assuming the expression is
 * used in an action binding (e.g. an event handler).
 * @param {?} localResolver
 * @param {?} implicitReceiver
 * @param {?} action
 * @param {?} bindingId
 * @return {?}
 */
function convertActionBinding(localResolver, implicitReceiver, action, bindingId) {
    if (!localResolver) {
        localResolver = new DefaultLocalResolver();
    }
    var /** @type {?} */ actionWithoutBuiltins = convertPropertyBindingBuiltins({
        createLiteralArrayConverter: function (argCount) {
            // Note: no caching for literal arrays in actions.
            return function (args) { return literalArr(args); };
        },
        createLiteralMapConverter: function (keys) {
            // Note: no caching for literal maps in actions.
            return function (values) {
                var /** @type {?} */ entries = keys.map(function (k, i) { return ({
                    key: k.key,
                    value: values[i],
                    quoted: k.quoted,
                }); });
                return literalMap(entries);
            };
        },
        createPipeConverter: function (name) {
            throw new Error("Illegal State: Actions are not allowed to contain pipes. Pipe: " + name);
        }
    }, action);
    var /** @type {?} */ visitor = new _AstToIrVisitor(localResolver, implicitReceiver, bindingId);
    var /** @type {?} */ actionStmts = [];
    flattenStatements(actionWithoutBuiltins.visit(visitor, _Mode.Statement), actionStmts);
    prependTemporaryDecls(visitor.temporaryCount, bindingId, actionStmts);
    var /** @type {?} */ lastIndex = actionStmts.length - 1;
    var /** @type {?} */ preventDefaultVar = ((null));
    if (lastIndex >= 0) {
        var /** @type {?} */ lastStatement = actionStmts[lastIndex];
        var /** @type {?} */ returnExpr = convertStmtIntoExpression(lastStatement);
        if (returnExpr) {
            // Note: We need to cast the result of the method call to dynamic,
            // as it might be a void method!
            preventDefaultVar = createPreventDefaultVar(bindingId);
            actionStmts[lastIndex] =
                preventDefaultVar.set(returnExpr.cast(DYNAMIC_TYPE).notIdentical(literal(false)))
                    .toDeclStmt(null, [StmtModifier.Final]);
        }
    }
    return new ConvertActionBindingResult(actionStmts, preventDefaultVar);
}
/**
 * @param {?} converterFactory
 * @param {?} ast
 * @return {?}
 */
function convertPropertyBindingBuiltins(converterFactory, ast) {
    return convertBuiltins(converterFactory, ast);
}
var ConvertPropertyBindingResult = (function () {
    /**
     * @param {?} stmts
     * @param {?} currValExpr
     */
    function ConvertPropertyBindingResult(stmts, currValExpr) {
        this.stmts = stmts;
        this.currValExpr = currValExpr;
    }
    return ConvertPropertyBindingResult;
}());
/**
 * Converts the given expression AST into an executable output AST, assuming the expression
 * is used in property binding. The expression has to be preprocessed via
 * `convertPropertyBindingBuiltins`.
 * @param {?} localResolver
 * @param {?} implicitReceiver
 * @param {?} expressionWithoutBuiltins
 * @param {?} bindingId
 * @return {?}
 */
function convertPropertyBinding(localResolver, implicitReceiver, expressionWithoutBuiltins, bindingId) {
    if (!localResolver) {
        localResolver = new DefaultLocalResolver();
    }
    var /** @type {?} */ currValExpr = createCurrValueExpr(bindingId);
    var /** @type {?} */ stmts = [];
    var /** @type {?} */ visitor = new _AstToIrVisitor(localResolver, implicitReceiver, bindingId);
    var /** @type {?} */ outputExpr = expressionWithoutBuiltins.visit(visitor, _Mode.Expression);
    if (visitor.temporaryCount) {
        for (var /** @type {?} */ i = 0; i < visitor.temporaryCount; i++) {
            stmts.push(temporaryDeclaration(bindingId, i));
        }
    }
    stmts.push(currValExpr.set(outputExpr).toDeclStmt(null, [StmtModifier.Final]));
    return new ConvertPropertyBindingResult(stmts, currValExpr);
}
/**
 * @param {?} converterFactory
 * @param {?} ast
 * @return {?}
 */
function convertBuiltins(converterFactory, ast) {
    var /** @type {?} */ visitor = new _BuiltinAstConverter(converterFactory);
    return ast.visit(visitor);
}
/**
 * @param {?} bindingId
 * @param {?} temporaryNumber
 * @return {?}
 */
function temporaryName(bindingId, temporaryNumber) {
    return "tmp_" + bindingId + "_" + temporaryNumber;
}
/**
 * @param {?} bindingId
 * @param {?} temporaryNumber
 * @return {?}
 */
function temporaryDeclaration(bindingId, temporaryNumber) {
    return new DeclareVarStmt(temporaryName(bindingId, temporaryNumber), NULL_EXPR);
}
/**
 * @param {?} temporaryCount
 * @param {?} bindingId
 * @param {?} statements
 * @return {?}
 */
function prependTemporaryDecls(temporaryCount, bindingId, statements) {
    for (var /** @type {?} */ i = temporaryCount - 1; i >= 0; i--) {
        statements.unshift(temporaryDeclaration(bindingId, i));
    }
}
var _Mode = {};
_Mode.Statement = 0;
_Mode.Expression = 1;
_Mode[_Mode.Statement] = "Statement";
_Mode[_Mode.Expression] = "Expression";
/**
 * @param {?} mode
 * @param {?} ast
 * @return {?}
 */
function ensureStatementMode(mode, ast) {
    if (mode !== _Mode.Statement) {
        throw new Error("Expected a statement, but saw " + ast);
    }
}
/**
 * @param {?} mode
 * @param {?} ast
 * @return {?}
 */
function ensureExpressionMode(mode, ast) {
    if (mode !== _Mode.Expression) {
        throw new Error("Expected an expression, but saw " + ast);
    }
}
/**
 * @param {?} mode
 * @param {?} expr
 * @return {?}
 */
function convertToStatementIfNeeded(mode, expr) {
    if (mode === _Mode.Statement) {
        return expr.toStmt();
    }
    else {
        return expr;
    }
}
var _BuiltinAstConverter = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](_BuiltinAstConverter, _super);
    /**
     * @param {?} _converterFactory
     */
    function _BuiltinAstConverter(_converterFactory) {
        var _this = _super.call(this) || this;
        _this._converterFactory = _converterFactory;
        return _this;
    }
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    _BuiltinAstConverter.prototype.visitPipe = function (ast, context) {
        var _this = this;
        var /** @type {?} */ args = [ast.exp].concat(ast.args).map(function (ast) { return ast.visit(_this, context); });
        return new BuiltinFunctionCall(ast.span, args, this._converterFactory.createPipeConverter(ast.name, args.length));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    _BuiltinAstConverter.prototype.visitLiteralArray = function (ast, context) {
        var _this = this;
        var /** @type {?} */ args = ast.expressions.map(function (ast) { return ast.visit(_this, context); });
        return new BuiltinFunctionCall(ast.span, args, this._converterFactory.createLiteralArrayConverter(ast.expressions.length));
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    _BuiltinAstConverter.prototype.visitLiteralMap = function (ast, context) {
        var _this = this;
        var /** @type {?} */ args = ast.values.map(function (ast) { return ast.visit(_this, context); });
        return new BuiltinFunctionCall(ast.span, args, this._converterFactory.createLiteralMapConverter(ast.keys));
    };
    return _BuiltinAstConverter;
}(AstTransformer));
var _AstToIrVisitor = (function () {
    /**
     * @param {?} _localResolver
     * @param {?} _implicitReceiver
     * @param {?} bindingId
     */
    function _AstToIrVisitor(_localResolver, _implicitReceiver, bindingId) {
        this._localResolver = _localResolver;
        this._implicitReceiver = _implicitReceiver;
        this.bindingId = bindingId;
        this._nodeMap = new Map();
        this._resultMap = new Map();
        this._currentTemporary = 0;
        this.temporaryCount = 0;
    }
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitBinary = function (ast, mode) {
        var /** @type {?} */ op;
        switch (ast.operation) {
            case '+':
                op = BinaryOperator.Plus;
                break;
            case '-':
                op = BinaryOperator.Minus;
                break;
            case '*':
                op = BinaryOperator.Multiply;
                break;
            case '/':
                op = BinaryOperator.Divide;
                break;
            case '%':
                op = BinaryOperator.Modulo;
                break;
            case '&&':
                op = BinaryOperator.And;
                break;
            case '||':
                op = BinaryOperator.Or;
                break;
            case '==':
                op = BinaryOperator.Equals;
                break;
            case '!=':
                op = BinaryOperator.NotEquals;
                break;
            case '===':
                op = BinaryOperator.Identical;
                break;
            case '!==':
                op = BinaryOperator.NotIdentical;
                break;
            case '<':
                op = BinaryOperator.Lower;
                break;
            case '>':
                op = BinaryOperator.Bigger;
                break;
            case '<=':
                op = BinaryOperator.LowerEquals;
                break;
            case '>=':
                op = BinaryOperator.BiggerEquals;
                break;
            default:
                throw new Error("Unsupported operation " + ast.operation);
        }
        return convertToStatementIfNeeded(mode, new BinaryOperatorExpr(op, this._visit(ast.left, _Mode.Expression), this._visit(ast.right, _Mode.Expression)));
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitChain = function (ast, mode) {
        ensureStatementMode(mode, ast);
        return this.visitAll(ast.expressions, mode);
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitConditional = function (ast, mode) {
        var /** @type {?} */ value = this._visit(ast.condition, _Mode.Expression);
        return convertToStatementIfNeeded(mode, value.conditional(this._visit(ast.trueExp, _Mode.Expression), this._visit(ast.falseExp, _Mode.Expression)));
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitPipe = function (ast, mode) {
        throw new Error("Illegal state: Pipes should have been converted into functions. Pipe: " + ast.name);
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitFunctionCall = function (ast, mode) {
        var /** @type {?} */ convertedArgs = this.visitAll(ast.args, _Mode.Expression);
        var /** @type {?} */ fnResult;
        if (ast instanceof BuiltinFunctionCall) {
            fnResult = ast.converter(convertedArgs);
        }
        else {
            fnResult = this._visit(/** @type {?} */ ((ast.target)), _Mode.Expression).callFn(convertedArgs);
        }
        return convertToStatementIfNeeded(mode, fnResult);
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitImplicitReceiver = function (ast, mode) {
        ensureExpressionMode(mode, ast);
        return this._implicitReceiver;
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitInterpolation = function (ast, mode) {
        ensureExpressionMode(mode, ast);
        var /** @type {?} */ args = [literal(ast.expressions.length)];
        for (var /** @type {?} */ i = 0; i < ast.strings.length - 1; i++) {
            args.push(literal(ast.strings[i]));
            args.push(this._visit(ast.expressions[i], _Mode.Expression));
        }
        args.push(literal(ast.strings[ast.strings.length - 1]));
        return ast.expressions.length <= 9 ?
            importExpr(Identifiers.inlineInterpolate).callFn(args) :
            importExpr(Identifiers.interpolate).callFn([args[0], literalArr(args.slice(1))]);
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitKeyedRead = function (ast, mode) {
        var /** @type {?} */ leftMostSafe = this.leftMostSafeNode(ast);
        if (leftMostSafe) {
            return this.convertSafeAccess(ast, leftMostSafe, mode);
        }
        else {
            return convertToStatementIfNeeded(mode, this._visit(ast.obj, _Mode.Expression).key(this._visit(ast.key, _Mode.Expression)));
        }
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitKeyedWrite = function (ast, mode) {
        var /** @type {?} */ obj = this._visit(ast.obj, _Mode.Expression);
        var /** @type {?} */ key = this._visit(ast.key, _Mode.Expression);
        var /** @type {?} */ value = this._visit(ast.value, _Mode.Expression);
        return convertToStatementIfNeeded(mode, obj.key(key).set(value));
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitLiteralArray = function (ast, mode) {
        throw new Error("Illegal State: literal arrays should have been converted into functions");
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitLiteralMap = function (ast, mode) {
        throw new Error("Illegal State: literal maps should have been converted into functions");
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitLiteralPrimitive = function (ast, mode) {
        return convertToStatementIfNeeded(mode, literal(ast.value));
    };
    /**
     * @param {?} name
     * @return {?}
     */
    _AstToIrVisitor.prototype._getLocal = function (name) { return this._localResolver.getLocal(name); };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitMethodCall = function (ast, mode) {
        var /** @type {?} */ leftMostSafe = this.leftMostSafeNode(ast);
        if (leftMostSafe) {
            return this.convertSafeAccess(ast, leftMostSafe, mode);
        }
        else {
            var /** @type {?} */ args = this.visitAll(ast.args, _Mode.Expression);
            var /** @type {?} */ result = null;
            var /** @type {?} */ receiver = this._visit(ast.receiver, _Mode.Expression);
            if (receiver === this._implicitReceiver) {
                var /** @type {?} */ varExpr = this._getLocal(ast.name);
                if (varExpr) {
                    result = varExpr.callFn(args);
                }
            }
            if (result == null) {
                result = receiver.callMethod(ast.name, args);
            }
            return convertToStatementIfNeeded(mode, result);
        }
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitPrefixNot = function (ast, mode) {
        return convertToStatementIfNeeded(mode, not(this._visit(ast.expression, _Mode.Expression)));
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitNonNullAssert = function (ast, mode) {
        return convertToStatementIfNeeded(mode, assertNotNull(this._visit(ast.expression, _Mode.Expression)));
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitPropertyRead = function (ast, mode) {
        var /** @type {?} */ leftMostSafe = this.leftMostSafeNode(ast);
        if (leftMostSafe) {
            return this.convertSafeAccess(ast, leftMostSafe, mode);
        }
        else {
            var /** @type {?} */ result = null;
            var /** @type {?} */ receiver = this._visit(ast.receiver, _Mode.Expression);
            if (receiver === this._implicitReceiver) {
                result = this._getLocal(ast.name);
            }
            if (result == null) {
                result = receiver.prop(ast.name);
            }
            return convertToStatementIfNeeded(mode, result);
        }
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitPropertyWrite = function (ast, mode) {
        var /** @type {?} */ receiver = this._visit(ast.receiver, _Mode.Expression);
        if (receiver === this._implicitReceiver) {
            var /** @type {?} */ varExpr = this._getLocal(ast.name);
            if (varExpr) {
                throw new Error('Cannot assign to a reference or variable!');
            }
        }
        return convertToStatementIfNeeded(mode, receiver.prop(ast.name).set(this._visit(ast.value, _Mode.Expression)));
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitSafePropertyRead = function (ast, mode) {
        return this.convertSafeAccess(ast, this.leftMostSafeNode(ast), mode);
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitSafeMethodCall = function (ast, mode) {
        return this.convertSafeAccess(ast, this.leftMostSafeNode(ast), mode);
    };
    /**
     * @param {?} asts
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitAll = function (asts, mode) {
        var _this = this;
        return asts.map(function (ast) { return _this._visit(ast, mode); });
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.visitQuote = function (ast, mode) {
        throw new Error("Quotes are not supported for evaluation!\n        Statement: " + ast.uninterpretedExpression + " located at " + ast.location);
    };
    /**
     * @param {?} ast
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype._visit = function (ast, mode) {
        var /** @type {?} */ result = this._resultMap.get(ast);
        if (result)
            return result;
        return (this._nodeMap.get(ast) || ast).visit(this, mode);
    };
    /**
     * @param {?} ast
     * @param {?} leftMostSafe
     * @param {?} mode
     * @return {?}
     */
    _AstToIrVisitor.prototype.convertSafeAccess = function (ast, leftMostSafe, mode) {
        // If the expression contains a safe access node on the left it needs to be converted to
        // an expression that guards the access to the member by checking the receiver for blank. As
        // execution proceeds from left to right, the left most part of the expression must be guarded
        // first but, because member access is left associative, the right side of the expression is at
        // the top of the AST. The desired result requires lifting a copy of the the left part of the
        // expression up to test it for blank before generating the unguarded version.
        // Consider, for example the following expression: a?.b.c?.d.e
        // This results in the ast:
        //         .
        //        / \
        //       ?.   e
        //      /  \
        //     .    d
        //    / \
        //   ?.  c
        //  /  \
        // a    b
        // The following tree should be generated:
        //
        //        /---- ? ----\
        //       /      |      \
        //     a   /--- ? ---\  null
        //        /     |     \
        //       .      .     null
        //      / \    / \
        //     .  c   .   e
        //    / \    / \
        //   a   b  ,   d
        //         / \
        //        .   c
        //       / \
        //      a   b
        //
        // Notice that the first guard condition is the left hand of the left most safe access node
        // which comes in as leftMostSafe to this routine.
        var /** @type {?} */ guardedExpression = this._visit(leftMostSafe.receiver, _Mode.Expression);
        var /** @type {?} */ temporary = ((undefined));
        if (this.needsTemporary(leftMostSafe.receiver)) {
            // If the expression has method calls or pipes then we need to save the result into a
            // temporary variable to avoid calling stateful or impure code more than once.
            temporary = this.allocateTemporary();
            // Preserve the result in the temporary variable
            guardedExpression = temporary.set(guardedExpression);
            // Ensure all further references to the guarded expression refer to the temporary instead.
            this._resultMap.set(leftMostSafe.receiver, temporary);
        }
        var /** @type {?} */ condition = guardedExpression.isBlank();
        // Convert the ast to an unguarded access to the receiver's member. The map will substitute
        // leftMostNode with its unguarded version in the call to `this.visit()`.
        if (leftMostSafe instanceof SafeMethodCall) {
            this._nodeMap.set(leftMostSafe, new MethodCall(leftMostSafe.span, leftMostSafe.receiver, leftMostSafe.name, leftMostSafe.args));
        }
        else {
            this._nodeMap.set(leftMostSafe, new PropertyRead(leftMostSafe.span, leftMostSafe.receiver, leftMostSafe.name));
        }
        // Recursively convert the node now without the guarded member access.
        var /** @type {?} */ access = this._visit(ast, _Mode.Expression);
        // Remove the mapping. This is not strictly required as the converter only traverses each node
        // once but is safer if the conversion is changed to traverse the nodes more than once.
        this._nodeMap.delete(leftMostSafe);
        // If we allocated a temporary, release it.
        if (temporary) {
            this.releaseTemporary(temporary);
        }
        // Produce the conditional
        return convertToStatementIfNeeded(mode, condition.conditional(literal(null), access));
    };
    /**
     * @param {?} ast
     * @return {?}
     */
    _AstToIrVisitor.prototype.leftMostSafeNode = function (ast) {
        var _this = this;
        var /** @type {?} */ visit = function (visitor, ast) {
            return (_this._nodeMap.get(ast) || ast).visit(visitor);
        };
        return ast.visit({
            /**
             * @param {?} ast
             * @return {?}
             */
            visitBinary: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitChain: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitConditional: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitFunctionCall: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitImplicitReceiver: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitInterpolation: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitKeyedRead: function (ast) { return visit(this, ast.obj); },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitKeyedWrite: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitLiteralArray: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitLiteralMap: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitLiteralPrimitive: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitMethodCall: function (ast) { return visit(this, ast.receiver); },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitPipe: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitPrefixNot: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitNonNullAssert: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitPropertyRead: function (ast) { return visit(this, ast.receiver); },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitPropertyWrite: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitQuote: function (ast) { return null; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitSafeMethodCall: function (ast) { return visit(this, ast.receiver) || ast; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitSafePropertyRead: function (ast) {
                return visit(this, ast.receiver) || ast;
            }
        });
    };
    /**
     * @param {?} ast
     * @return {?}
     */
    _AstToIrVisitor.prototype.needsTemporary = function (ast) {
        var _this = this;
        var /** @type {?} */ visit = function (visitor, ast) {
            return ast && (_this._nodeMap.get(ast) || ast).visit(visitor);
        };
        var /** @type {?} */ visitSome = function (visitor, ast) {
            return ast.some(function (ast) { return visit(visitor, ast); });
        };
        return ast.visit({
            /**
             * @param {?} ast
             * @return {?}
             */
            visitBinary: function (ast) { return visit(this, ast.left) || visit(this, ast.right); },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitChain: function (ast) { return false; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitConditional: function (ast) {
                return visit(this, ast.condition) || visit(this, ast.trueExp) ||
                    visit(this, ast.falseExp);
            },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitFunctionCall: function (ast) { return true; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitImplicitReceiver: function (ast) { return false; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitInterpolation: function (ast) { return visitSome(this, ast.expressions); },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitKeyedRead: function (ast) { return false; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitKeyedWrite: function (ast) { return false; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitLiteralArray: function (ast) { return true; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitLiteralMap: function (ast) { return true; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitLiteralPrimitive: function (ast) { return false; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitMethodCall: function (ast) { return true; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitPipe: function (ast) { return true; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitPrefixNot: function (ast) { return visit(this, ast.expression); },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitNonNullAssert: function (ast) { return visit(this, ast.expression); },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitPropertyRead: function (ast) { return false; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitPropertyWrite: function (ast) { return false; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitQuote: function (ast) { return false; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitSafeMethodCall: function (ast) { return true; },
            /**
             * @param {?} ast
             * @return {?}
             */
            visitSafePropertyRead: function (ast) { return false; }
        });
    };
    /**
     * @return {?}
     */
    _AstToIrVisitor.prototype.allocateTemporary = function () {
        var /** @type {?} */ tempNumber = this._currentTemporary++;
        this.temporaryCount = Math.max(this._currentTemporary, this.temporaryCount);
        return new ReadVarExpr(temporaryName(this.bindingId, tempNumber));
    };
    /**
     * @param {?} temporary
     * @return {?}
     */
    _AstToIrVisitor.prototype.releaseTemporary = function (temporary) {
        this._currentTemporary--;
        if (temporary.name != temporaryName(this.bindingId, this._currentTemporary)) {
            throw new Error("Temporary " + temporary.name + " released out of order");
        }
    };
    return _AstToIrVisitor;
}());
/**
 * @param {?} arg
 * @param {?} output
 * @return {?}
 */
function flattenStatements(arg, output) {
    if (Array.isArray(arg)) {
        ((arg)).forEach(function (entry) { return flattenStatements(entry, output); });
    }
    else {
        output.push(arg);
    }
}
var DefaultLocalResolver = (function () {
    function DefaultLocalResolver() {
    }
    /**
     * @param {?} name
     * @return {?}
     */
    DefaultLocalResolver.prototype.getLocal = function (name) {
        if (name === EventHandlerVars.event.name) {
            return EventHandlerVars.event;
        }
        return null;
    };
    return DefaultLocalResolver;
}());
/**
 * @param {?} bindingId
 * @return {?}
 */
function createCurrValueExpr(bindingId) {
    return variable("currVal_" + bindingId); // fix syntax highlighting: `
}
/**
 * @param {?} bindingId
 * @return {?}
 */
function createPreventDefaultVar(bindingId) {
    return variable("pd_" + bindingId);
}
/**
 * @param {?} stmt
 * @return {?}
 */
function convertStmtIntoExpression(stmt) {
    if (stmt instanceof ExpressionStatement) {
        return stmt.expr;
    }
    else if (stmt instanceof ReturnStatement) {
        return stmt.value;
    }
    return null;
}
var BuiltinFunctionCall = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](BuiltinFunctionCall, _super);
    /**
     * @param {?} span
     * @param {?} args
     * @param {?} converter
     */
    function BuiltinFunctionCall(span, args, converter) {
        var _this = _super.call(this, span, null, args) || this;
        _this.args = args;
        _this.converter = converter;
        return _this;
    }
    return BuiltinFunctionCall;
}(FunctionCall));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var CLASS_ATTR$1 = 'class';
var STYLE_ATTR = 'style';
var IMPLICIT_TEMPLATE_VAR = '\$implicit';
var ViewCompileResult = (function () {
    /**
     * @param {?} viewClassVar
     * @param {?} rendererTypeVar
     */
    function ViewCompileResult(viewClassVar, rendererTypeVar) {
        this.viewClassVar = viewClassVar;
        this.rendererTypeVar = rendererTypeVar;
    }
    return ViewCompileResult;
}());
var ViewCompiler = (function () {
    /**
     * @param {?} _reflector
     */
    function ViewCompiler(_reflector) {
        this._reflector = _reflector;
    }
    /**
     * @param {?} outputCtx
     * @param {?} component
     * @param {?} template
     * @param {?} styles
     * @param {?} usedPipes
     * @return {?}
     */
    ViewCompiler.prototype.compileComponent = function (outputCtx, component, template, styles, usedPipes) {
        var _this = this;
        var /** @type {?} */ embeddedViewCount = 0;
        var /** @type {?} */ staticQueryIds = findStaticQueryIds(template);
        var /** @type {?} */ renderComponentVarName = ((undefined));
        if (!component.isHost) {
            var /** @type {?} */ template_1 = ((component.template));
            var /** @type {?} */ customRenderData = [];
            if (template_1.animations && template_1.animations.length) {
                customRenderData.push(new LiteralMapEntry('animation', convertValueToOutputAst(outputCtx, template_1.animations), true));
            }
            var /** @type {?} */ renderComponentVar = variable(rendererTypeName(component.type.reference));
            renderComponentVarName = ((renderComponentVar.name));
            outputCtx.statements.push(renderComponentVar
                .set(importExpr(Identifiers.createRendererType2).callFn([new LiteralMapExpr([
                    new LiteralMapEntry('encapsulation', literal(template_1.encapsulation), false),
                    new LiteralMapEntry('styles', styles, false),
                    new LiteralMapEntry('data', new LiteralMapExpr(customRenderData), false)
                ])]))
                .toDeclStmt(importType(Identifiers.RendererType2), [StmtModifier.Final, StmtModifier.Exported]));
        }
        var /** @type {?} */ viewBuilderFactory = function (parent) {
            var /** @type {?} */ embeddedViewIndex = embeddedViewCount++;
            return new ViewBuilder(_this._reflector, outputCtx, parent, component, embeddedViewIndex, usedPipes, staticQueryIds, viewBuilderFactory);
        };
        var /** @type {?} */ visitor = viewBuilderFactory(null);
        visitor.visitAll([], template);
        (_a = outputCtx.statements).push.apply(_a, visitor.build());
        return new ViewCompileResult(visitor.viewName, renderComponentVarName);
        var _a;
    };
    return ViewCompiler;
}());
ViewCompiler.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
ViewCompiler.ctorParameters = function () { return [
    { type: CompileReflector, },
]; };
var LOG_VAR$1 = variable('_l');
var VIEW_VAR = variable('_v');
var CHECK_VAR = variable('_ck');
var COMP_VAR = variable('_co');
var EVENT_NAME_VAR = variable('en');
var ALLOW_DEFAULT_VAR = variable("ad");
var ViewBuilder = (function () {
    /**
     * @param {?} reflector
     * @param {?} outputCtx
     * @param {?} parent
     * @param {?} component
     * @param {?} embeddedViewIndex
     * @param {?} usedPipes
     * @param {?} staticQueryIds
     * @param {?} viewBuilderFactory
     */
    function ViewBuilder(reflector, outputCtx, parent, component, embeddedViewIndex, usedPipes, staticQueryIds, viewBuilderFactory) {
        this.reflector = reflector;
        this.outputCtx = outputCtx;
        this.parent = parent;
        this.component = component;
        this.embeddedViewIndex = embeddedViewIndex;
        this.usedPipes = usedPipes;
        this.staticQueryIds = staticQueryIds;
        this.viewBuilderFactory = viewBuilderFactory;
        this.nodes = [];
        this.purePipeNodeIndices = Object.create(null);
        this.refNodeIndices = Object.create(null);
        this.variables = [];
        this.children = [];
        // TODO(tbosch): The old view compiler used to use an `any` type
        // for the context in any embedded view. We keep this behaivor for now
        // to be able to introduce the new view compiler without too many errors.
        this.compType = this.embeddedViewIndex > 0 ?
            DYNAMIC_TYPE :
            expressionType(outputCtx.importExpr(this.component.type.reference));
    }
    Object.defineProperty(ViewBuilder.prototype, "viewName", {
        /**
         * @return {?}
         */
        get: function () {
            return viewClassName(this.component.type.reference, this.embeddedViewIndex);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} variables
     * @param {?} astNodes
     * @return {?}
     */
    ViewBuilder.prototype.visitAll = function (variables, astNodes) {
        var _this = this;
        this.variables = variables;
        // create the pipes for the pure pipes immediately, so that we know their indices.
        if (!this.parent) {
            this.usedPipes.forEach(function (pipe) {
                if (pipe.pure) {
                    _this.purePipeNodeIndices[pipe.name] = _this._createPipe(null, pipe);
                }
            });
        }
        if (!this.parent) {
            var /** @type {?} */ queryIds_1 = staticViewQueryIds(this.staticQueryIds);
            this.component.viewQueries.forEach(function (query, queryIndex) {
                // Note: queries start with id 1 so we can use the number in a Bloom filter!
                var /** @type {?} */ queryId = queryIndex + 1;
                var /** @type {?} */ bindingType = query.first ? 0 /* First */ : 1;
                var /** @type {?} */ flags = 134217728 /* TypeViewQuery */ | calcStaticDynamicQueryFlags(queryIds_1, queryId, query.first);
                _this.nodes.push(function () { return ({
                    sourceSpan: null,
                    nodeFlags: flags,
                    nodeDef: importExpr(Identifiers.queryDef).callFn([
                        literal(flags), literal(queryId),
                        new LiteralMapExpr([new LiteralMapEntry(query.propertyName, literal(bindingType), false)])
                    ])
                }); });
            });
        }
        templateVisitAll(this, astNodes);
        if (this.parent && (astNodes.length === 0 || needsAdditionalRootNode(astNodes))) {
            // if the view is an embedded view, then we need to add an additional root node in some cases
            this.nodes.push(function () { return ({
                sourceSpan: null,
                nodeFlags: 1 /* TypeElement */,
                nodeDef: importExpr(Identifiers.anchorDef).callFn([
                    literal(0 /* None */), NULL_EXPR, NULL_EXPR, literal(0)
                ])
            }); });
        }
    };
    /**
     * @param {?=} targetStatements
     * @return {?}
     */
    ViewBuilder.prototype.build = function (targetStatements) {
        if (targetStatements === void 0) { targetStatements = []; }
        this.children.forEach(function (child) { return child.build(targetStatements); });
        var _a = this._createNodeExpressions(), updateRendererStmts = _a.updateRendererStmts, updateDirectivesStmts = _a.updateDirectivesStmts, nodeDefExprs = _a.nodeDefExprs;
        var /** @type {?} */ updateRendererFn = this._createUpdateFn(updateRendererStmts);
        var /** @type {?} */ updateDirectivesFn = this._createUpdateFn(updateDirectivesStmts);
        var /** @type {?} */ viewFlags = 0;
        if (!this.parent && this.component.changeDetection === __WEBPACK_IMPORTED_MODULE_1__angular_core__["j" /* ChangeDetectionStrategy */].OnPush) {
            viewFlags |= 2 /* OnPush */;
        }
        var /** @type {?} */ viewFactory = new DeclareFunctionStmt(this.viewName, [new FnParam(/** @type {?} */ ((LOG_VAR$1.name)))], [new ReturnStatement(importExpr(Identifiers.viewDef).callFn([
                literal(viewFlags),
                literalArr(nodeDefExprs),
                updateDirectivesFn,
                updateRendererFn,
            ]))], importType(Identifiers.ViewDefinition), this.embeddedViewIndex === 0 ? [StmtModifier.Exported] : []);
        targetStatements.push(viewFactory);
        return targetStatements;
    };
    /**
     * @param {?} updateStmts
     * @return {?}
     */
    ViewBuilder.prototype._createUpdateFn = function (updateStmts) {
        var /** @type {?} */ updateFn;
        if (updateStmts.length > 0) {
            var /** @type {?} */ preStmts = [];
            if (!this.component.isHost && findReadVarNames(updateStmts).has(/** @type {?} */ ((COMP_VAR.name)))) {
                preStmts.push(COMP_VAR.set(VIEW_VAR.prop('component')).toDeclStmt(this.compType));
            }
            updateFn = fn([
                new FnParam(/** @type {?} */ ((CHECK_VAR.name)), INFERRED_TYPE),
                new FnParam(/** @type {?} */ ((VIEW_VAR.name)), INFERRED_TYPE)
            ], preStmts.concat(updateStmts), INFERRED_TYPE);
        }
        else {
            updateFn = NULL_EXPR;
        }
        return updateFn;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    ViewBuilder.prototype.visitNgContent = function (ast, context) {
        // ngContentDef(ngContentIndex: number, index: number): NodeDef;
        this.nodes.push(function () { return ({
            sourceSpan: ast.sourceSpan,
            nodeFlags: 8 /* TypeNgContent */,
            nodeDef: importExpr(Identifiers.ngContentDef).callFn([
                literal(ast.ngContentIndex), literal(ast.index)
            ])
        }); });
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    ViewBuilder.prototype.visitText = function (ast, context) {
        // Static text nodes have no check function
        var /** @type {?} */ checkIndex = -1;
        this.nodes.push(function () { return ({
            sourceSpan: ast.sourceSpan,
            nodeFlags: 2 /* TypeText */,
            nodeDef: importExpr(Identifiers.textDef).callFn([
                literal(checkIndex),
                literal(ast.ngContentIndex),
                literalArr([literal(ast.value)]),
            ])
        }); });
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    ViewBuilder.prototype.visitBoundText = function (ast, context) {
        var _this = this;
        var /** @type {?} */ nodeIndex = this.nodes.length;
        // reserve the space in the nodeDefs array
        this.nodes.push(/** @type {?} */ ((null)));
        var /** @type {?} */ astWithSource = (ast.value);
        var /** @type {?} */ inter = (astWithSource.ast);
        var /** @type {?} */ updateRendererExpressions = inter.expressions.map(function (expr, bindingIndex) { return _this._preprocessUpdateExpression({ nodeIndex: nodeIndex, bindingIndex: bindingIndex, sourceSpan: ast.sourceSpan, context: COMP_VAR, value: expr }); });
        // Check index is the same as the node index during compilation
        // They might only differ at runtime
        var /** @type {?} */ checkIndex = nodeIndex;
        this.nodes[nodeIndex] = function () { return ({
            sourceSpan: ast.sourceSpan,
            nodeFlags: 2 /* TypeText */,
            nodeDef: importExpr(Identifiers.textDef).callFn([
                literal(checkIndex),
                literal(ast.ngContentIndex),
                literalArr(inter.strings.map(function (s) { return literal(s); })),
            ]),
            updateRenderer: updateRendererExpressions
        }); };
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    ViewBuilder.prototype.visitEmbeddedTemplate = function (ast, context) {
        var _this = this;
        var /** @type {?} */ nodeIndex = this.nodes.length;
        // reserve the space in the nodeDefs array
        this.nodes.push(/** @type {?} */ ((null)));
        var _a = this._visitElementOrTemplate(nodeIndex, ast), flags = _a.flags, queryMatchesExpr = _a.queryMatchesExpr, hostEvents = _a.hostEvents;
        var /** @type {?} */ childVisitor = this.viewBuilderFactory(this);
        this.children.push(childVisitor);
        childVisitor.visitAll(ast.variables, ast.children);
        var /** @type {?} */ childCount = this.nodes.length - nodeIndex - 1;
        // anchorDef(
        //   flags: NodeFlags, matchedQueries: [string, QueryValueType][], ngContentIndex: number,
        //   childCount: number, handleEventFn?: ElementHandleEventFn, templateFactory?:
        //   ViewDefinitionFactory): NodeDef;
        this.nodes[nodeIndex] = function () { return ({
            sourceSpan: ast.sourceSpan,
            nodeFlags: 1 /* TypeElement */ | flags,
            nodeDef: importExpr(Identifiers.anchorDef).callFn([
                literal(flags),
                queryMatchesExpr,
                literal(ast.ngContentIndex),
                literal(childCount),
                _this._createElementHandleEventFn(nodeIndex, hostEvents),
                variable(childVisitor.viewName),
            ])
        }); };
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    ViewBuilder.prototype.visitElement = function (ast, context) {
        var _this = this;
        var /** @type {?} */ nodeIndex = this.nodes.length;
        // reserve the space in the nodeDefs array so we can add children
        this.nodes.push(/** @type {?} */ ((null)));
        // Using a null element name creates an anchor.
        var /** @type {?} */ elName = isNgContainer(ast.name) ? null : ast.name;
        var _a = this._visitElementOrTemplate(nodeIndex, ast), flags = _a.flags, usedEvents = _a.usedEvents, queryMatchesExpr = _a.queryMatchesExpr, dirHostBindings = _a.hostBindings, hostEvents = _a.hostEvents;
        var /** @type {?} */ inputDefs = [];
        var /** @type {?} */ updateRendererExpressions = [];
        var /** @type {?} */ outputDefs = [];
        if (elName) {
            var /** @type {?} */ hostBindings = ast.inputs
                .map(function (inputAst) { return ({
                context: /** @type {?} */ (COMP_VAR),
                inputAst: inputAst,
                dirAst: /** @type {?} */ (null),
            }); })
                .concat(dirHostBindings);
            if (hostBindings.length) {
                updateRendererExpressions =
                    hostBindings.map(function (hostBinding, bindingIndex) { return _this._preprocessUpdateExpression({
                        context: hostBinding.context,
                        nodeIndex: nodeIndex,
                        bindingIndex: bindingIndex,
                        sourceSpan: hostBinding.inputAst.sourceSpan,
                        value: hostBinding.inputAst.value
                    }); });
                inputDefs = hostBindings.map(function (hostBinding) { return elementBindingDef(hostBinding.inputAst, hostBinding.dirAst); });
            }
            outputDefs = usedEvents.map(function (_a) {
                var target = _a[0], eventName = _a[1];
                return literalArr([literal(target), literal(eventName)]);
            });
        }
        templateVisitAll(this, ast.children);
        var /** @type {?} */ childCount = this.nodes.length - nodeIndex - 1;
        var /** @type {?} */ compAst = ast.directives.find(function (dirAst) { return dirAst.directive.isComponent; });
        var /** @type {?} */ compRendererType = (NULL_EXPR);
        var /** @type {?} */ compView = (NULL_EXPR);
        if (compAst) {
            compView = this.outputCtx.importExpr(compAst.directive.componentViewType);
            compRendererType = this.outputCtx.importExpr(compAst.directive.rendererType);
        }
        // Check index is the same as the node index during compilation
        // They might only differ at runtime
        var /** @type {?} */ checkIndex = nodeIndex;
        this.nodes[nodeIndex] = function () { return ({
            sourceSpan: ast.sourceSpan,
            nodeFlags: 1 /* TypeElement */ | flags,
            nodeDef: importExpr(Identifiers.elementDef).callFn([
                literal(checkIndex),
                literal(flags),
                queryMatchesExpr,
                literal(ast.ngContentIndex),
                literal(childCount),
                literal(elName),
                elName ? fixedAttrsDef(ast) : NULL_EXPR,
                inputDefs.length ? literalArr(inputDefs) : NULL_EXPR,
                outputDefs.length ? literalArr(outputDefs) : NULL_EXPR,
                _this._createElementHandleEventFn(nodeIndex, hostEvents),
                compView,
                compRendererType,
            ]),
            updateRenderer: updateRendererExpressions
        }); };
    };
    /**
     * @param {?} nodeIndex
     * @param {?} ast
     * @return {?}
     */
    ViewBuilder.prototype._visitElementOrTemplate = function (nodeIndex, ast) {
        var _this = this;
        var /** @type {?} */ flags = 0;
        if (ast.hasViewContainer) {
            flags |= 16777216 /* EmbeddedViews */;
        }
        var /** @type {?} */ usedEvents = new Map();
        ast.outputs.forEach(function (event) {
            var _a = elementEventNameAndTarget(event, null), name = _a.name, target = _a.target;
            usedEvents.set(Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_44" /* elementEventFullName */])(target, name), [target, name]);
        });
        ast.directives.forEach(function (dirAst) {
            dirAst.hostEvents.forEach(function (event) {
                var _a = elementEventNameAndTarget(event, dirAst), name = _a.name, target = _a.target;
                usedEvents.set(Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_44" /* elementEventFullName */])(target, name), [target, name]);
            });
        });
        var /** @type {?} */ hostBindings = [];
        var /** @type {?} */ hostEvents = [];
        this._visitComponentFactoryResolverProvider(ast.directives);
        ast.providers.forEach(function (providerAst, providerIndex) {
            var /** @type {?} */ dirAst = ((undefined));
            var /** @type {?} */ dirIndex = ((undefined));
            ast.directives.forEach(function (localDirAst, i) {
                if (localDirAst.directive.type.reference === tokenReference(providerAst.token)) {
                    dirAst = localDirAst;
                    dirIndex = i;
                }
            });
            if (dirAst) {
                var _a = _this._visitDirective(providerAst, dirAst, dirIndex, nodeIndex, ast.references, ast.queryMatches, usedEvents, /** @type {?} */ ((_this.staticQueryIds.get(/** @type {?} */ (ast))))), dirHostBindings = _a.hostBindings, dirHostEvents = _a.hostEvents;
                hostBindings.push.apply(hostBindings, dirHostBindings);
                hostEvents.push.apply(hostEvents, dirHostEvents);
            }
            else {
                _this._visitProvider(providerAst, ast.queryMatches);
            }
        });
        var /** @type {?} */ queryMatchExprs = [];
        ast.queryMatches.forEach(function (match) {
            var /** @type {?} */ valueType = ((undefined));
            if (tokenReference(match.value) ===
                _this.reflector.resolveExternalReference(Identifiers.ElementRef)) {
                valueType = 0 /* ElementRef */;
            }
            else if (tokenReference(match.value) ===
                _this.reflector.resolveExternalReference(Identifiers.ViewContainerRef)) {
                valueType = 3 /* ViewContainerRef */;
            }
            else if (tokenReference(match.value) ===
                _this.reflector.resolveExternalReference(Identifiers.TemplateRef)) {
                valueType = 2 /* TemplateRef */;
            }
            if (valueType != null) {
                queryMatchExprs.push(literalArr([literal(match.queryId), literal(valueType)]));
            }
        });
        ast.references.forEach(function (ref) {
            var /** @type {?} */ valueType = ((undefined));
            if (!ref.value) {
                valueType = 1 /* RenderElement */;
            }
            else if (tokenReference(ref.value) ===
                _this.reflector.resolveExternalReference(Identifiers.TemplateRef)) {
                valueType = 2 /* TemplateRef */;
            }
            if (valueType != null) {
                _this.refNodeIndices[ref.name] = nodeIndex;
                queryMatchExprs.push(literalArr([literal(ref.name), literal(valueType)]));
            }
        });
        ast.outputs.forEach(function (outputAst) {
            hostEvents.push({ context: COMP_VAR, eventAst: outputAst, dirAst: /** @type {?} */ ((null)) });
        });
        return {
            flags: flags,
            usedEvents: Array.from(usedEvents.values()),
            queryMatchesExpr: queryMatchExprs.length ? literalArr(queryMatchExprs) : NULL_EXPR,
            hostBindings: hostBindings,
            hostEvents: hostEvents
        };
    };
    /**
     * @param {?} providerAst
     * @param {?} dirAst
     * @param {?} directiveIndex
     * @param {?} elementNodeIndex
     * @param {?} refs
     * @param {?} queryMatches
     * @param {?} usedEvents
     * @param {?} queryIds
     * @return {?}
     */
    ViewBuilder.prototype._visitDirective = function (providerAst, dirAst, directiveIndex, elementNodeIndex, refs, queryMatches, usedEvents, queryIds) {
        var _this = this;
        var /** @type {?} */ nodeIndex = this.nodes.length;
        // reserve the space in the nodeDefs array so we can add children
        this.nodes.push(/** @type {?} */ ((null)));
        dirAst.directive.queries.forEach(function (query, queryIndex) {
            var /** @type {?} */ queryId = dirAst.contentQueryStartId + queryIndex;
            var /** @type {?} */ flags = 67108864 /* TypeContentQuery */ | calcStaticDynamicQueryFlags(queryIds, queryId, query.first);
            var /** @type {?} */ bindingType = query.first ? 0 /* First */ : 1;
            _this.nodes.push(function () { return ({
                sourceSpan: dirAst.sourceSpan,
                nodeFlags: flags,
                nodeDef: importExpr(Identifiers.queryDef).callFn([
                    literal(flags), literal(queryId),
                    new LiteralMapExpr([new LiteralMapEntry(query.propertyName, literal(bindingType), false)])
                ]),
            }); });
        });
        // Note: the operation below might also create new nodeDefs,
        // but we don't want them to be a child of a directive,
        // as they might be a provider/pipe on their own.
        // I.e. we only allow queries as children of directives nodes.
        var /** @type {?} */ childCount = this.nodes.length - nodeIndex - 1;
        var _a = this._visitProviderOrDirective(providerAst, queryMatches), flags = _a.flags, queryMatchExprs = _a.queryMatchExprs, providerExpr = _a.providerExpr, depsExpr = _a.depsExpr;
        refs.forEach(function (ref) {
            if (ref.value && tokenReference(ref.value) === tokenReference(providerAst.token)) {
                _this.refNodeIndices[ref.name] = nodeIndex;
                queryMatchExprs.push(literalArr([literal(ref.name), literal(4 /* Provider */)]));
            }
        });
        if (dirAst.directive.isComponent) {
            flags |= 32768 /* Component */;
        }
        var /** @type {?} */ inputDefs = dirAst.inputs.map(function (inputAst, inputIndex) {
            var /** @type {?} */ mapValue = literalArr([literal(inputIndex), literal(inputAst.directiveName)]);
            // Note: it's important to not quote the key so that we can capture renames by minifiers!
            return new LiteralMapEntry(inputAst.directiveName, mapValue, false);
        });
        var /** @type {?} */ outputDefs = [];
        var /** @type {?} */ dirMeta = dirAst.directive;
        Object.keys(dirMeta.outputs).forEach(function (propName) {
            var /** @type {?} */ eventName = dirMeta.outputs[propName];
            if (usedEvents.has(eventName)) {
                // Note: it's important to not quote the key so that we can capture renames by minifiers!
                outputDefs.push(new LiteralMapEntry(propName, literal(eventName), false));
            }
        });
        var /** @type {?} */ updateDirectiveExpressions = [];
        if (dirAst.inputs.length || (flags & (262144 /* DoCheck */ | 65536 /* OnInit */)) > 0) {
            updateDirectiveExpressions =
                dirAst.inputs.map(function (input, bindingIndex) { return _this._preprocessUpdateExpression({
                    nodeIndex: nodeIndex,
                    bindingIndex: bindingIndex,
                    sourceSpan: input.sourceSpan,
                    context: COMP_VAR,
                    value: input.value
                }); });
        }
        var /** @type {?} */ dirContextExpr = importExpr(Identifiers.nodeValue).callFn([VIEW_VAR, literal(nodeIndex)]);
        var /** @type {?} */ hostBindings = dirAst.hostProperties.map(function (inputAst) { return ({
            context: dirContextExpr,
            dirAst: dirAst,
            inputAst: inputAst,
        }); });
        var /** @type {?} */ hostEvents = dirAst.hostEvents.map(function (hostEventAst) { return ({
            context: dirContextExpr,
            eventAst: hostEventAst, dirAst: dirAst,
        }); });
        // Check index is the same as the node index during compilation
        // They might only differ at runtime
        var /** @type {?} */ checkIndex = nodeIndex;
        this.nodes[nodeIndex] = function () { return ({
            sourceSpan: dirAst.sourceSpan,
            nodeFlags: 16384 /* TypeDirective */ | flags,
            nodeDef: importExpr(Identifiers.directiveDef).callFn([
                literal(checkIndex),
                literal(flags),
                queryMatchExprs.length ? literalArr(queryMatchExprs) : NULL_EXPR,
                literal(childCount),
                providerExpr,
                depsExpr,
                inputDefs.length ? new LiteralMapExpr(inputDefs) : NULL_EXPR,
                outputDefs.length ? new LiteralMapExpr(outputDefs) : NULL_EXPR,
            ]),
            updateDirectives: updateDirectiveExpressions,
            directive: dirAst.directive.type,
        }); };
        return { hostBindings: hostBindings, hostEvents: hostEvents };
    };
    /**
     * @param {?} providerAst
     * @param {?} queryMatches
     * @return {?}
     */
    ViewBuilder.prototype._visitProvider = function (providerAst, queryMatches) {
        this._addProviderNode(this._visitProviderOrDirective(providerAst, queryMatches));
    };
    /**
     * @param {?} directives
     * @return {?}
     */
    ViewBuilder.prototype._visitComponentFactoryResolverProvider = function (directives) {
        var /** @type {?} */ componentDirMeta = directives.find(function (dirAst) { return dirAst.directive.isComponent; });
        if (componentDirMeta && componentDirMeta.directive.entryComponents.length) {
            var _a = componentFactoryResolverProviderDef(this.reflector, this.outputCtx, 8192 /* PrivateProvider */, componentDirMeta.directive.entryComponents), providerExpr = _a.providerExpr, depsExpr = _a.depsExpr, flags = _a.flags, tokenExpr_1 = _a.tokenExpr;
            this._addProviderNode({
                providerExpr: providerExpr,
                depsExpr: depsExpr,
                flags: flags,
                tokenExpr: tokenExpr_1,
                queryMatchExprs: [],
                sourceSpan: componentDirMeta.sourceSpan
            });
        }
    };
    /**
     * @param {?} data
     * @return {?}
     */
    ViewBuilder.prototype._addProviderNode = function (data) {
        var /** @type {?} */ nodeIndex = this.nodes.length;
        // providerDef(
        //   flags: NodeFlags, matchedQueries: [string, QueryValueType][], token:any,
        //   value: any, deps: ([DepFlags, any] | any)[]): NodeDef;
        this.nodes.push(function () { return ({
            sourceSpan: data.sourceSpan,
            nodeFlags: data.flags,
            nodeDef: importExpr(Identifiers.providerDef).callFn([
                literal(data.flags),
                data.queryMatchExprs.length ? literalArr(data.queryMatchExprs) : NULL_EXPR,
                data.tokenExpr, data.providerExpr, data.depsExpr
            ])
        }); });
    };
    /**
     * @param {?} providerAst
     * @param {?} queryMatches
     * @return {?}
     */
    ViewBuilder.prototype._visitProviderOrDirective = function (providerAst, queryMatches) {
        var /** @type {?} */ flags = 0;
        var /** @type {?} */ queryMatchExprs = [];
        queryMatches.forEach(function (match) {
            if (tokenReference(match.value) === tokenReference(providerAst.token)) {
                queryMatchExprs.push(literalArr([literal(match.queryId), literal(4 /* Provider */)]));
            }
        });
        var _a = providerDef(this.outputCtx, providerAst), providerExpr = _a.providerExpr, depsExpr = _a.depsExpr, providerFlags = _a.flags, tokenExpr = _a.tokenExpr;
        return {
            flags: flags | providerFlags,
            queryMatchExprs: queryMatchExprs,
            providerExpr: providerExpr,
            depsExpr: depsExpr,
            tokenExpr: tokenExpr,
            sourceSpan: providerAst.sourceSpan
        };
    };
    /**
     * @param {?} name
     * @return {?}
     */
    ViewBuilder.prototype.getLocal = function (name) {
        if (name == EventHandlerVars.event.name) {
            return EventHandlerVars.event;
        }
        var /** @type {?} */ currViewExpr = VIEW_VAR;
        for (var /** @type {?} */ currBuilder = this; currBuilder; currBuilder = currBuilder.parent,
            currViewExpr = currViewExpr.prop('parent').cast(DYNAMIC_TYPE)) {
            // check references
            var /** @type {?} */ refNodeIndex = currBuilder.refNodeIndices[name];
            if (refNodeIndex != null) {
                return importExpr(Identifiers.nodeValue).callFn([currViewExpr, literal(refNodeIndex)]);
            }
            // check variables
            var /** @type {?} */ varAst = currBuilder.variables.find(function (varAst) { return varAst.name === name; });
            if (varAst) {
                var /** @type {?} */ varValue = varAst.value || IMPLICIT_TEMPLATE_VAR;
                return currViewExpr.prop('context').prop(varValue);
            }
        }
        return null;
    };
    /**
     * @param {?} sourceSpan
     * @param {?} argCount
     * @return {?}
     */
    ViewBuilder.prototype._createLiteralArrayConverter = function (sourceSpan, argCount) {
        if (argCount === 0) {
            var /** @type {?} */ valueExpr_1 = importExpr(Identifiers.EMPTY_ARRAY);
            return function () { return valueExpr_1; };
        }
        var /** @type {?} */ checkIndex = this.nodes.length;
        this.nodes.push(function () { return ({
            sourceSpan: sourceSpan,
            nodeFlags: 32 /* TypePureArray */,
            nodeDef: importExpr(Identifiers.pureArrayDef).callFn([
                literal(checkIndex),
                literal(argCount),
            ])
        }); });
        return function (args) { return callCheckStmt(checkIndex, args); };
    };
    /**
     * @param {?} sourceSpan
     * @param {?} keys
     * @return {?}
     */
    ViewBuilder.prototype._createLiteralMapConverter = function (sourceSpan, keys) {
        if (keys.length === 0) {
            var /** @type {?} */ valueExpr_2 = importExpr(Identifiers.EMPTY_MAP);
            return function () { return valueExpr_2; };
        }
        var /** @type {?} */ map = literalMap(keys.map(function (e, i) { return (Object.assign({}, e, { value: literal(i) })); }));
        var /** @type {?} */ checkIndex = this.nodes.length;
        this.nodes.push(function () { return ({
            sourceSpan: sourceSpan,
            nodeFlags: 64 /* TypePureObject */,
            nodeDef: importExpr(Identifiers.pureObjectDef).callFn([
                literal(checkIndex),
                map,
            ])
        }); });
        return function (args) { return callCheckStmt(checkIndex, args); };
    };
    /**
     * @param {?} expression
     * @param {?} name
     * @param {?} argCount
     * @return {?}
     */
    ViewBuilder.prototype._createPipeConverter = function (expression, name, argCount) {
        var /** @type {?} */ pipe = ((this.usedPipes.find(function (pipeSummary) { return pipeSummary.name === name; })));
        if (pipe.pure) {
            var /** @type {?} */ checkIndex_1 = this.nodes.length;
            this.nodes.push(function () { return ({
                sourceSpan: expression.sourceSpan,
                nodeFlags: 128 /* TypePurePipe */,
                nodeDef: importExpr(Identifiers.purePipeDef).callFn([
                    literal(checkIndex_1),
                    literal(argCount),
                ])
            }); });
            // find underlying pipe in the component view
            var /** @type {?} */ compViewExpr = VIEW_VAR;
            var /** @type {?} */ compBuilder = this;
            while (compBuilder.parent) {
                compBuilder = compBuilder.parent;
                compViewExpr = compViewExpr.prop('parent').cast(DYNAMIC_TYPE);
            }
            var /** @type {?} */ pipeNodeIndex = compBuilder.purePipeNodeIndices[name];
            var /** @type {?} */ pipeValueExpr_1 = importExpr(Identifiers.nodeValue).callFn([compViewExpr, literal(pipeNodeIndex)]);
            return function (args) { return callUnwrapValue(expression.nodeIndex, expression.bindingIndex, callCheckStmt(checkIndex_1, [pipeValueExpr_1].concat(args))); };
        }
        else {
            var /** @type {?} */ nodeIndex = this._createPipe(expression.sourceSpan, pipe);
            var /** @type {?} */ nodeValueExpr_1 = importExpr(Identifiers.nodeValue).callFn([VIEW_VAR, literal(nodeIndex)]);
            return function (args) { return callUnwrapValue(expression.nodeIndex, expression.bindingIndex, nodeValueExpr_1.callMethod('transform', args)); };
        }
    };
    /**
     * @param {?} sourceSpan
     * @param {?} pipe
     * @return {?}
     */
    ViewBuilder.prototype._createPipe = function (sourceSpan, pipe) {
        var _this = this;
        var /** @type {?} */ nodeIndex = this.nodes.length;
        var /** @type {?} */ flags = 0;
        pipe.type.lifecycleHooks.forEach(function (lifecycleHook) {
            // for pipes, we only support ngOnDestroy
            if (lifecycleHook === LifecycleHooks.OnDestroy) {
                flags |= lifecycleHookToNodeFlag(lifecycleHook);
            }
        });
        var /** @type {?} */ depExprs = pipe.type.diDeps.map(function (diDep) { return depDef(_this.outputCtx, diDep); });
        // function pipeDef(
        //   flags: NodeFlags, ctor: any, deps: ([DepFlags, any] | any)[]): NodeDef
        this.nodes.push(function () { return ({
            sourceSpan: sourceSpan,
            nodeFlags: 16 /* TypePipe */,
            nodeDef: importExpr(Identifiers.pipeDef).callFn([
                literal(flags), _this.outputCtx.importExpr(pipe.type.reference), literalArr(depExprs)
            ])
        }); });
        return nodeIndex;
    };
    /**
     * For the AST in `UpdateExpression.value`:
     * - create nodes for pipes, literal arrays and, literal maps,
     * - update the AST to replace pipes, literal arrays and, literal maps with calls to check fn.
     *
     * WARNING: This might create new nodeDefs (for pipes and literal arrays and literal maps)!
     * @param {?} expression
     * @return {?}
     */
    ViewBuilder.prototype._preprocessUpdateExpression = function (expression) {
        var _this = this;
        return {
            nodeIndex: expression.nodeIndex,
            bindingIndex: expression.bindingIndex,
            sourceSpan: expression.sourceSpan,
            context: expression.context,
            value: convertPropertyBindingBuiltins({
                createLiteralArrayConverter: function (argCount) { return _this._createLiteralArrayConverter(expression.sourceSpan, argCount); },
                createLiteralMapConverter: function (keys) { return _this._createLiteralMapConverter(expression.sourceSpan, keys); },
                createPipeConverter: function (name, argCount) { return _this._createPipeConverter(expression, name, argCount); }
            }, expression.value)
        };
    };
    /**
     * @return {?}
     */
    ViewBuilder.prototype._createNodeExpressions = function () {
        var /** @type {?} */ self = this;
        var /** @type {?} */ updateBindingCount = 0;
        var /** @type {?} */ updateRendererStmts = [];
        var /** @type {?} */ updateDirectivesStmts = [];
        var /** @type {?} */ nodeDefExprs = this.nodes.map(function (factory, nodeIndex) {
            var _a = factory(), nodeDef = _a.nodeDef, nodeFlags = _a.nodeFlags, updateDirectives = _a.updateDirectives, updateRenderer = _a.updateRenderer, sourceSpan = _a.sourceSpan;
            if (updateRenderer) {
                updateRendererStmts.push.apply(updateRendererStmts, createUpdateStatements(nodeIndex, sourceSpan, updateRenderer, false));
            }
            if (updateDirectives) {
                updateDirectivesStmts.push.apply(updateDirectivesStmts, createUpdateStatements(nodeIndex, sourceSpan, updateDirectives, (nodeFlags & (262144 /* DoCheck */ | 65536 /* OnInit */)) > 0));
            }
            // We use a comma expression to call the log function before
            // the nodeDef function, but still use the result of the nodeDef function
            // as the value.
            // Note: We only add the logger to elements / text nodes,
            // so we don't generate too much code.
            var /** @type {?} */ logWithNodeDef = nodeFlags & 3 /* CatRenderNode */ ?
                new CommaExpr([LOG_VAR$1.callFn([]).callFn([]), nodeDef]) :
                nodeDef;
            return applySourceSpanToExpressionIfNeeded(logWithNodeDef, sourceSpan);
        });
        return { updateRendererStmts: updateRendererStmts, updateDirectivesStmts: updateDirectivesStmts, nodeDefExprs: nodeDefExprs };
        /**
         * @param {?} nodeIndex
         * @param {?} sourceSpan
         * @param {?} expressions
         * @param {?} allowEmptyExprs
         * @return {?}
         */
        function createUpdateStatements(nodeIndex, sourceSpan, expressions, allowEmptyExprs) {
            var /** @type {?} */ updateStmts = [];
            var /** @type {?} */ exprs = expressions.map(function (_a) {
                var sourceSpan = _a.sourceSpan, context = _a.context, value = _a.value;
                var /** @type {?} */ bindingId = "" + updateBindingCount++;
                var /** @type {?} */ nameResolver = context === COMP_VAR ? self : null;
                var _b = convertPropertyBinding(nameResolver, context, value, bindingId), stmts = _b.stmts, currValExpr = _b.currValExpr;
                updateStmts.push.apply(updateStmts, stmts.map(function (stmt) { return applySourceSpanToStatementIfNeeded(stmt, sourceSpan); }));
                return applySourceSpanToExpressionIfNeeded(currValExpr, sourceSpan);
            });
            if (expressions.length || allowEmptyExprs) {
                updateStmts.push(applySourceSpanToStatementIfNeeded(callCheckStmt(nodeIndex, exprs).toStmt(), sourceSpan));
            }
            return updateStmts;
        }
    };
    /**
     * @param {?} nodeIndex
     * @param {?} handlers
     * @return {?}
     */
    ViewBuilder.prototype._createElementHandleEventFn = function (nodeIndex, handlers) {
        var _this = this;
        var /** @type {?} */ handleEventStmts = [];
        var /** @type {?} */ handleEventBindingCount = 0;
        handlers.forEach(function (_a) {
            var context = _a.context, eventAst = _a.eventAst, dirAst = _a.dirAst;
            var /** @type {?} */ bindingId = "" + handleEventBindingCount++;
            var /** @type {?} */ nameResolver = context === COMP_VAR ? _this : null;
            var _b = convertActionBinding(nameResolver, context, eventAst.handler, bindingId), stmts = _b.stmts, allowDefault = _b.allowDefault;
            var /** @type {?} */ trueStmts = stmts;
            if (allowDefault) {
                trueStmts.push(ALLOW_DEFAULT_VAR.set(allowDefault.and(ALLOW_DEFAULT_VAR)).toStmt());
            }
            var _c = elementEventNameAndTarget(eventAst, dirAst), eventTarget = _c.target, eventName = _c.name;
            var /** @type {?} */ fullEventName = Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_44" /* elementEventFullName */])(eventTarget, eventName);
            handleEventStmts.push(applySourceSpanToStatementIfNeeded(new IfStmt(literal(fullEventName).identical(EVENT_NAME_VAR), trueStmts), eventAst.sourceSpan));
        });
        var /** @type {?} */ handleEventFn;
        if (handleEventStmts.length > 0) {
            var /** @type {?} */ preStmts = [ALLOW_DEFAULT_VAR.set(literal(true)).toDeclStmt(BOOL_TYPE)];
            if (!this.component.isHost && findReadVarNames(handleEventStmts).has(/** @type {?} */ ((COMP_VAR.name)))) {
                preStmts.push(COMP_VAR.set(VIEW_VAR.prop('component')).toDeclStmt(this.compType));
            }
            handleEventFn = fn([
                new FnParam(/** @type {?} */ ((VIEW_VAR.name)), INFERRED_TYPE),
                new FnParam(/** @type {?} */ ((EVENT_NAME_VAR.name)), INFERRED_TYPE),
                new FnParam(/** @type {?} */ ((EventHandlerVars.event.name)), INFERRED_TYPE)
            ], preStmts.concat(handleEventStmts, [new ReturnStatement(ALLOW_DEFAULT_VAR)]), INFERRED_TYPE);
        }
        else {
            handleEventFn = NULL_EXPR;
        }
        return handleEventFn;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    ViewBuilder.prototype.visitDirective = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    ViewBuilder.prototype.visitDirectiveProperty = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    ViewBuilder.prototype.visitReference = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    ViewBuilder.prototype.visitVariable = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    ViewBuilder.prototype.visitEvent = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    ViewBuilder.prototype.visitElementProperty = function (ast, context) { };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    ViewBuilder.prototype.visitAttr = function (ast, context) { };
    return ViewBuilder;
}());
/**
 * @param {?} astNodes
 * @return {?}
 */
function needsAdditionalRootNode(astNodes) {
    var /** @type {?} */ lastAstNode = astNodes[astNodes.length - 1];
    if (lastAstNode instanceof EmbeddedTemplateAst) {
        return lastAstNode.hasViewContainer;
    }
    if (lastAstNode instanceof ElementAst) {
        if (isNgContainer(lastAstNode.name) && lastAstNode.children.length) {
            return needsAdditionalRootNode(lastAstNode.children);
        }
        return lastAstNode.hasViewContainer;
    }
    return lastAstNode instanceof NgContentAst;
}
/**
 * @param {?} inputAst
 * @param {?} dirAst
 * @return {?}
 */
function elementBindingDef(inputAst, dirAst) {
    switch (inputAst.type) {
        case PropertyBindingType.Attribute:
            return literalArr([
                literal(1 /* TypeElementAttribute */), literal(inputAst.name),
                literal(inputAst.securityContext)
            ]);
        case PropertyBindingType.Property:
            return literalArr([
                literal(8 /* TypeProperty */), literal(inputAst.name),
                literal(inputAst.securityContext)
            ]);
        case PropertyBindingType.Animation:
            var /** @type {?} */ bindingType = 8 /* TypeProperty */ |
                (dirAst && dirAst.directive.isComponent ? 32 /* SyntheticHostProperty */ :
                    16 /* SyntheticProperty */);
            return literalArr([
                literal(bindingType), literal('@' + inputAst.name), literal(inputAst.securityContext)
            ]);
        case PropertyBindingType.Class:
            return literalArr([literal(2 /* TypeElementClass */), literal(inputAst.name), NULL_EXPR]);
        case PropertyBindingType.Style:
            return literalArr([
                literal(4 /* TypeElementStyle */), literal(inputAst.name), literal(inputAst.unit)
            ]);
    }
}
/**
 * @param {?} elementAst
 * @return {?}
 */
function fixedAttrsDef(elementAst) {
    var /** @type {?} */ mapResult = Object.create(null);
    elementAst.attrs.forEach(function (attrAst) { mapResult[attrAst.name] = attrAst.value; });
    elementAst.directives.forEach(function (dirAst) {
        Object.keys(dirAst.directive.hostAttributes).forEach(function (name) {
            var /** @type {?} */ value = dirAst.directive.hostAttributes[name];
            var /** @type {?} */ prevValue = mapResult[name];
            mapResult[name] = prevValue != null ? mergeAttributeValue(name, prevValue, value) : value;
        });
    });
    // Note: We need to sort to get a defined output order
    // for tests and for caching generated artifacts...
    return literalArr(Object.keys(mapResult).sort().map(function (attrName) { return literalArr([literal(attrName), literal(mapResult[attrName])]); }));
}
/**
 * @param {?} attrName
 * @param {?} attrValue1
 * @param {?} attrValue2
 * @return {?}
 */
function mergeAttributeValue(attrName, attrValue1, attrValue2) {
    if (attrName == CLASS_ATTR$1 || attrName == STYLE_ATTR) {
        return attrValue1 + " " + attrValue2;
    }
    else {
        return attrValue2;
    }
}
/**
 * @param {?} nodeIndex
 * @param {?} exprs
 * @return {?}
 */
function callCheckStmt(nodeIndex, exprs) {
    if (exprs.length > 10) {
        return CHECK_VAR.callFn([VIEW_VAR, literal(nodeIndex), literal(1 /* Dynamic */), literalArr(exprs)]);
    }
    else {
        return CHECK_VAR.callFn([VIEW_VAR, literal(nodeIndex), literal(0 /* Inline */)].concat(exprs));
    }
}
/**
 * @param {?} nodeIndex
 * @param {?} bindingIdx
 * @param {?} expr
 * @return {?}
 */
function callUnwrapValue(nodeIndex, bindingIdx, expr) {
    return importExpr(Identifiers.unwrapValue).callFn([
        VIEW_VAR, literal(nodeIndex), literal(bindingIdx), expr
    ]);
}
/**
 * @param {?} nodes
 * @param {?=} result
 * @return {?}
 */
function findStaticQueryIds(nodes, result) {
    if (result === void 0) { result = new Map(); }
    nodes.forEach(function (node) {
        var /** @type {?} */ staticQueryIds = new Set();
        var /** @type {?} */ dynamicQueryIds = new Set();
        var /** @type {?} */ queryMatches = ((undefined));
        if (node instanceof ElementAst) {
            findStaticQueryIds(node.children, result);
            node.children.forEach(function (child) {
                var /** @type {?} */ childData = ((result.get(child)));
                childData.staticQueryIds.forEach(function (queryId) { return staticQueryIds.add(queryId); });
                childData.dynamicQueryIds.forEach(function (queryId) { return dynamicQueryIds.add(queryId); });
            });
            queryMatches = node.queryMatches;
        }
        else if (node instanceof EmbeddedTemplateAst) {
            findStaticQueryIds(node.children, result);
            node.children.forEach(function (child) {
                var /** @type {?} */ childData = ((result.get(child)));
                childData.staticQueryIds.forEach(function (queryId) { return dynamicQueryIds.add(queryId); });
                childData.dynamicQueryIds.forEach(function (queryId) { return dynamicQueryIds.add(queryId); });
            });
            queryMatches = node.queryMatches;
        }
        if (queryMatches) {
            queryMatches.forEach(function (match) { return staticQueryIds.add(match.queryId); });
        }
        dynamicQueryIds.forEach(function (queryId) { return staticQueryIds.delete(queryId); });
        result.set(node, { staticQueryIds: staticQueryIds, dynamicQueryIds: dynamicQueryIds });
    });
    return result;
}
/**
 * @param {?} nodeStaticQueryIds
 * @return {?}
 */
function staticViewQueryIds(nodeStaticQueryIds) {
    var /** @type {?} */ staticQueryIds = new Set();
    var /** @type {?} */ dynamicQueryIds = new Set();
    Array.from(nodeStaticQueryIds.values()).forEach(function (entry) {
        entry.staticQueryIds.forEach(function (queryId) { return staticQueryIds.add(queryId); });
        entry.dynamicQueryIds.forEach(function (queryId) { return dynamicQueryIds.add(queryId); });
    });
    dynamicQueryIds.forEach(function (queryId) { return staticQueryIds.delete(queryId); });
    return { staticQueryIds: staticQueryIds, dynamicQueryIds: dynamicQueryIds };
}
/**
 * @param {?} eventAst
 * @param {?} dirAst
 * @return {?}
 */
function elementEventNameAndTarget(eventAst, dirAst) {
    if (eventAst.isAnimation) {
        return {
            name: "@" + eventAst.name + "." + eventAst.phase,
            target: dirAst && dirAst.directive.isComponent ? 'component' : null
        };
    }
    else {
        return eventAst;
    }
}
/**
 * @param {?} queryIds
 * @param {?} queryId
 * @param {?} isFirst
 * @return {?}
 */
function calcStaticDynamicQueryFlags(queryIds, queryId, isFirst) {
    var /** @type {?} */ flags = 0;
    // Note: We only make queries static that query for a single item.
    // This is because of backwards compatibility with the old view compiler...
    if (isFirst && (queryIds.staticQueryIds.has(queryId) || !queryIds.dynamicQueryIds.has(queryId))) {
        flags |= 268435456 /* StaticQuery */;
    }
    else {
        flags |= 536870912 /* DynamicQuery */;
    }
    return flags;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var GeneratedFile = (function () {
    /**
     * @param {?} srcFileUrl
     * @param {?} genFileUrl
     * @param {?} sourceOrStmts
     */
    function GeneratedFile(srcFileUrl, genFileUrl, sourceOrStmts) {
        this.srcFileUrl = srcFileUrl;
        this.genFileUrl = genFileUrl;
        if (typeof sourceOrStmts === 'string') {
            this.source = sourceOrStmts;
            this.stmts = null;
        }
        else {
            this.source = null;
            this.stmts = sourceOrStmts;
        }
    }
    return GeneratedFile;
}());
/**
 * @param {?} file
 * @param {?=} preamble
 * @return {?}
 */
function toTypeScript(file, preamble) {
    if (preamble === void 0) { preamble = ''; }
    if (!file.stmts) {
        throw new Error("Illegal state: No stmts present on GeneratedFile " + file.genFileUrl);
    }
    return new TypeScriptEmitter().emitStatements(sourceUrl(file.srcFileUrl), file.genFileUrl, file.stmts, preamble);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} forJitCtx
 * @param {?} summaryResolver
 * @param {?} symbolResolver
 * @param {?} symbols
 * @param {?} types
 * @return {?}
 */
function serializeSummaries(forJitCtx, summaryResolver, symbolResolver, symbols, types) {
    var /** @type {?} */ toJsonSerializer = new ToJsonSerializer(symbolResolver, summaryResolver);
    var /** @type {?} */ forJitSerializer = new ForJitSerializer(forJitCtx, symbolResolver);
    // for symbols, we use everything except for the class metadata itself
    // (we keep the statics though), as the class metadata is contained in the
    // CompileTypeSummary.
    symbols.forEach(function (resolvedSymbol) { return toJsonSerializer.addOrMergeSummary({ symbol: resolvedSymbol.symbol, metadata: resolvedSymbol.metadata }); });
    // Add summaries that are referenced by the given symbols (transitively)
    // Note: the serializer.symbols array might be growing while
    // we execute the loop!
    for (var /** @type {?} */ processedIndex = 0; processedIndex < toJsonSerializer.symbols.length; processedIndex++) {
        var /** @type {?} */ symbol = toJsonSerializer.symbols[processedIndex];
        if (summaryResolver.isLibraryFile(symbol.filePath)) {
            var /** @type {?} */ summary = summaryResolver.resolveSummary(symbol);
            if (!summary) {
                // some symbols might originate from a plain typescript library
                // that just exported .d.ts and .metadata.json files, i.e. where no summary
                // files were created.
                var /** @type {?} */ resolvedSymbol = symbolResolver.resolveSymbol(symbol);
                if (resolvedSymbol) {
                    summary = { symbol: resolvedSymbol.symbol, metadata: resolvedSymbol.metadata };
                }
            }
            if (summary) {
                if (summary.type) {
                    forJitSerializer.addLibType(summary.type);
                }
                toJsonSerializer.addOrMergeSummary(summary);
            }
        }
    }
    // Add type summaries.
    // Note: We don't add the summaries of all referenced symbols as for the ResolvedSymbols,
    // as the type summaries already contain the transitive data that they require
    // (in a minimal way).
    types.forEach(function (_a) {
        var summary = _a.summary, metadata = _a.metadata;
        forJitSerializer.addSourceType(summary, metadata);
        toJsonSerializer.addOrMergeSummary({ symbol: summary.type.reference, metadata: null, type: summary });
        if (summary.summaryKind === CompileSummaryKind.NgModule) {
            var /** @type {?} */ ngModuleSummary = (summary);
            ngModuleSummary.exportedDirectives.concat(ngModuleSummary.exportedPipes).forEach(function (id) {
                var /** @type {?} */ symbol = id.reference;
                if (summaryResolver.isLibraryFile(symbol.filePath)) {
                    var /** @type {?} */ summary_1 = summaryResolver.resolveSummary(symbol);
                    if (summary_1) {
                        toJsonSerializer.addOrMergeSummary(summary_1);
                    }
                }
            });
        }
    });
    var _a = toJsonSerializer.serialize(), json = _a.json, exportAs = _a.exportAs;
    forJitSerializer.serialize(exportAs);
    return { json: json, exportAs: exportAs };
}
/**
 * @param {?} symbolCache
 * @param {?} json
 * @return {?}
 */
function deserializeSummaries(symbolCache, json) {
    var /** @type {?} */ deserializer = new FromJsonDeserializer(symbolCache);
    return deserializer.deserialize(json);
}
/**
 * @param {?} outputCtx
 * @param {?} reference
 * @return {?}
 */
function createForJitStub(outputCtx, reference) {
    return createSummaryForJitFunction(outputCtx, reference, NULL_EXPR);
}
/**
 * @param {?} outputCtx
 * @param {?} reference
 * @param {?} value
 * @return {?}
 */
function createSummaryForJitFunction(outputCtx, reference, value) {
    var /** @type {?} */ fnName = summaryForJitName(reference.name);
    outputCtx.statements.push(fn([], [new ReturnStatement(value)], new ArrayType(DYNAMIC_TYPE)).toDeclStmt(fnName, [
        StmtModifier.Final, StmtModifier.Exported
    ]));
}
var ToJsonSerializer = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ToJsonSerializer, _super);
    /**
     * @param {?} symbolResolver
     * @param {?} summaryResolver
     */
    function ToJsonSerializer(symbolResolver, summaryResolver) {
        var _this = _super.call(this) || this;
        _this.symbolResolver = symbolResolver;
        _this.summaryResolver = summaryResolver;
        // Note: This only contains symbols without members.
        _this.symbols = [];
        _this.indexBySymbol = new Map();
        _this.processedSummaryBySymbol = new Map();
        _this.processedSummaries = [];
        return _this;
    }
    /**
     * @param {?} summary
     * @return {?}
     */
    ToJsonSerializer.prototype.addOrMergeSummary = function (summary) {
        var /** @type {?} */ symbolMeta = summary.metadata;
        if (symbolMeta && symbolMeta.__symbolic === 'class') {
            // For classes, we keep everything except their class decorators.
            // We need to keep e.g. the ctor args, method names, method decorators
            // so that the class can be extended in another compilation unit.
            // We don't keep the class decorators as
            // 1) they refer to data
            //   that should not cause a rebuild of downstream compilation units
            //   (e.g. inline templates of @Component, or @NgModule.declarations)
            // 2) their data is already captured in TypeSummaries, e.g. DirectiveSummary.
            var /** @type {?} */ clone_1 = {};
            Object.keys(symbolMeta).forEach(function (propName) {
                if (propName !== 'decorators') {
                    clone_1[propName] = symbolMeta[propName];
                }
            });
            symbolMeta = clone_1;
        }
        var /** @type {?} */ processedSummary = this.processedSummaryBySymbol.get(summary.symbol);
        if (!processedSummary) {
            processedSummary = this.processValue({ symbol: summary.symbol });
            this.processedSummaries.push(processedSummary);
            this.processedSummaryBySymbol.set(summary.symbol, processedSummary);
        }
        // Note: == on purpose to compare with undefined!
        if (processedSummary.metadata == null && symbolMeta != null) {
            processedSummary.metadata = this.processValue(symbolMeta);
        }
        // Note: == on purpose to compare with undefined!
        if (processedSummary.type == null && summary.type != null) {
            processedSummary.type = this.processValue(summary.type);
        }
    };
    /**
     * @return {?}
     */
    ToJsonSerializer.prototype.serialize = function () {
        var _this = this;
        var /** @type {?} */ exportAs = [];
        var /** @type {?} */ json = JSON.stringify({
            summaries: this.processedSummaries,
            symbols: this.symbols.map(function (symbol, index) {
                symbol.assertNoMembers();
                var /** @type {?} */ importAs = ((undefined));
                if (_this.summaryResolver.isLibraryFile(symbol.filePath)) {
                    importAs = symbol.name + "_" + index;
                    exportAs.push({ symbol: symbol, exportAs: importAs });
                }
                return {
                    __symbol: index,
                    name: symbol.name,
                    // We convert the source filenames tinto output filenames,
                    // as the generated summary file will be used when the current
                    // compilation unit is used as a library
                    filePath: _this.summaryResolver.getLibraryFileName(symbol.filePath),
                    importAs: importAs
                };
            })
        });
        return { json: json, exportAs: exportAs };
    };
    /**
     * @param {?} value
     * @return {?}
     */
    ToJsonSerializer.prototype.processValue = function (value) { return visitValue(value, this, null); };
    /**
     * @param {?} value
     * @param {?} context
     * @return {?}
     */
    ToJsonSerializer.prototype.visitOther = function (value, context) {
        if (value instanceof StaticSymbol) {
            var /** @type {?} */ baseSymbol = this.symbolResolver.getStaticSymbol(value.filePath, value.name);
            var /** @type {?} */ index = this.indexBySymbol.get(baseSymbol);
            // Note: == on purpose to compare with undefined!
            if (index == null) {
                index = this.indexBySymbol.size;
                this.indexBySymbol.set(baseSymbol, index);
                this.symbols.push(baseSymbol);
            }
            return { __symbol: index, members: value.members };
        }
    };
    return ToJsonSerializer;
}(ValueTransformer));
var ForJitSerializer = (function () {
    /**
     * @param {?} outputCtx
     * @param {?} symbolResolver
     */
    function ForJitSerializer(outputCtx, symbolResolver) {
        this.outputCtx = outputCtx;
        this.symbolResolver = symbolResolver;
        this.data = new Map();
    }
    /**
     * @param {?} summary
     * @param {?} metadata
     * @return {?}
     */
    ForJitSerializer.prototype.addSourceType = function (summary, metadata) {
        this.data.set(summary.type.reference, { summary: summary, metadata: metadata, isLibrary: false });
    };
    /**
     * @param {?} summary
     * @return {?}
     */
    ForJitSerializer.prototype.addLibType = function (summary) {
        this.data.set(summary.type.reference, { summary: summary, metadata: null, isLibrary: true });
    };
    /**
     * @param {?} exportAs
     * @return {?}
     */
    ForJitSerializer.prototype.serialize = function (exportAs) {
        var _this = this;
        var /** @type {?} */ ngModuleSymbols = new Set();
        Array.from(this.data.values()).forEach(function (_a) {
            var summary = _a.summary, metadata = _a.metadata, isLibrary = _a.isLibrary;
            if (summary.summaryKind === CompileSummaryKind.NgModule) {
                // collect the symbols that refer to NgModule classes.
                // Note: we can't just rely on `summary.type.summaryKind` to determine this as
                // we don't add the summaries of all referenced symbols when we serialize type summaries.
                // See serializeSummaries for details.
                ngModuleSymbols.add(summary.type.reference);
                var /** @type {?} */ modSummary = (summary);
                modSummary.modules.forEach(function (mod) { ngModuleSymbols.add(mod.reference); });
            }
            if (!isLibrary) {
                var /** @type {?} */ fnName = summaryForJitName(summary.type.reference.name);
                createSummaryForJitFunction(_this.outputCtx, summary.type.reference, _this.serializeSummaryWithDeps(summary, /** @type {?} */ ((metadata))));
            }
        });
        exportAs.forEach(function (entry) {
            var /** @type {?} */ symbol = entry.symbol;
            if (ngModuleSymbols.has(symbol)) {
                var /** @type {?} */ jitExportAsName = summaryForJitName(entry.exportAs);
                _this.outputCtx.statements.push(variable(jitExportAsName).set(_this.serializeSummaryRef(symbol)).toDeclStmt(null, [
                    StmtModifier.Exported
                ]));
            }
        });
    };
    /**
     * @param {?} summary
     * @param {?} metadata
     * @return {?}
     */
    ForJitSerializer.prototype.serializeSummaryWithDeps = function (summary, metadata) {
        var _this = this;
        var /** @type {?} */ expressions = [this.serializeSummary(summary)];
        var /** @type {?} */ providers = [];
        if (metadata instanceof CompileNgModuleMetadata) {
            expressions.push.apply(expressions, 
            // For directives / pipes, we only add the declared ones,
            // and rely on transitively importing NgModules to get the transitive
            // summaries.
            metadata.declaredDirectives.concat(metadata.declaredPipes)
                .map(function (type) { return type.reference; })
                .concat(metadata.transitiveModule.modules.map(function (type) { return type.reference; })
                .filter(function (ref) { return ref !== metadata.type.reference; }))
                .map(function (ref) { return _this.serializeSummaryRef(ref); }));
            // Note: We don't use `NgModuleSummary.providers`, as that one is transitive,
            // and we already have transitive modules.
            providers = metadata.providers;
        }
        else if (summary.summaryKind === CompileSummaryKind.Directive) {
            var /** @type {?} */ dirSummary = (summary);
            providers = dirSummary.providers.concat(dirSummary.viewProviders);
        }
        // Note: We can't just refer to the `ngsummary.ts` files for `useClass` providers (as we do for
        // declaredDirectives / declaredPipes), as we allow
        // providers without ctor arguments to skip the `@Injectable` decorator,
        // i.e. we didn't generate .ngsummary.ts files for these.
        expressions.push.apply(expressions, providers.filter(function (provider) { return !!provider.useClass; }).map(function (provider) { return _this.serializeSummary(/** @type {?} */ ({
            summaryKind: CompileSummaryKind.Injectable, type: provider.useClass
        })); }));
        return literalArr(expressions);
    };
    /**
     * @param {?} typeSymbol
     * @return {?}
     */
    ForJitSerializer.prototype.serializeSummaryRef = function (typeSymbol) {
        var /** @type {?} */ jitImportedSymbol = this.symbolResolver.getStaticSymbol(summaryForJitFileName(typeSymbol.filePath), summaryForJitName(typeSymbol.name));
        return this.outputCtx.importExpr(jitImportedSymbol);
    };
    /**
     * @param {?} data
     * @return {?}
     */
    ForJitSerializer.prototype.serializeSummary = function (data) {
        var /** @type {?} */ outputCtx = this.outputCtx;
        var Transformer = (function () {
            function Transformer() {
            }
            /**
             * @param {?} arr
             * @param {?} context
             * @return {?}
             */
            Transformer.prototype.visitArray = function (arr, context) {
                var _this = this;
                return literalArr(arr.map(function (entry) { return visitValue(entry, _this, context); }));
            };
            /**
             * @param {?} map
             * @param {?} context
             * @return {?}
             */
            Transformer.prototype.visitStringMap = function (map, context) {
                var _this = this;
                return new LiteralMapExpr(Object.keys(map).map(function (key) { return new LiteralMapEntry(key, visitValue(map[key], _this, context), false); }));
            };
            /**
             * @param {?} value
             * @param {?} context
             * @return {?}
             */
            Transformer.prototype.visitPrimitive = function (value, context) { return literal(value); };
            /**
             * @param {?} value
             * @param {?} context
             * @return {?}
             */
            Transformer.prototype.visitOther = function (value, context) {
                if (value instanceof StaticSymbol) {
                    return outputCtx.importExpr(value);
                }
                else {
                    throw new Error("Illegal State: Encountered value " + value);
                }
            };
            return Transformer;
        }());
        return visitValue(data, new Transformer(), null);
    };
    return ForJitSerializer;
}());
var FromJsonDeserializer = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](FromJsonDeserializer, _super);
    /**
     * @param {?} symbolCache
     */
    function FromJsonDeserializer(symbolCache) {
        var _this = _super.call(this) || this;
        _this.symbolCache = symbolCache;
        return _this;
    }
    /**
     * @param {?} json
     * @return {?}
     */
    FromJsonDeserializer.prototype.deserialize = function (json) {
        var _this = this;
        var /** @type {?} */ data = JSON.parse(json);
        var /** @type {?} */ importAs = [];
        this.symbols = [];
        data.symbols.forEach(function (serializedSymbol) {
            var /** @type {?} */ symbol = _this.symbolCache.get(serializedSymbol.filePath, serializedSymbol.name);
            _this.symbols.push(symbol);
            if (serializedSymbol.importAs) {
                importAs.push({ symbol: symbol, importAs: serializedSymbol.importAs });
            }
        });
        var /** @type {?} */ summaries = visitValue(data.summaries, this, null);
        return { summaries: summaries, importAs: importAs };
    };
    /**
     * @param {?} map
     * @param {?} context
     * @return {?}
     */
    FromJsonDeserializer.prototype.visitStringMap = function (map, context) {
        if ('__symbol' in map) {
            var /** @type {?} */ baseSymbol = this.symbols[map['__symbol']];
            var /** @type {?} */ members = map['members'];
            return members.length ? this.symbolCache.get(baseSymbol.filePath, baseSymbol.name, members) :
                baseSymbol;
        }
        else {
            return _super.prototype.visitStringMap.call(this, map, context);
        }
    };
    return FromJsonDeserializer;
}(ValueTransformer));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var AotCompiler = (function () {
    /**
     * @param {?} _config
     * @param {?} _host
     * @param {?} _reflector
     * @param {?} _metadataResolver
     * @param {?} _templateParser
     * @param {?} _styleCompiler
     * @param {?} _viewCompiler
     * @param {?} _ngModuleCompiler
     * @param {?} _outputEmitter
     * @param {?} _summaryResolver
     * @param {?} _localeId
     * @param {?} _translationFormat
     * @param {?} _enableSummariesForJit
     * @param {?} _symbolResolver
     */
    function AotCompiler(_config, _host, _reflector, _metadataResolver, _templateParser, _styleCompiler, _viewCompiler, _ngModuleCompiler, _outputEmitter, _summaryResolver, _localeId, _translationFormat, _enableSummariesForJit, _symbolResolver) {
        this._config = _config;
        this._host = _host;
        this._reflector = _reflector;
        this._metadataResolver = _metadataResolver;
        this._templateParser = _templateParser;
        this._styleCompiler = _styleCompiler;
        this._viewCompiler = _viewCompiler;
        this._ngModuleCompiler = _ngModuleCompiler;
        this._outputEmitter = _outputEmitter;
        this._summaryResolver = _summaryResolver;
        this._localeId = _localeId;
        this._translationFormat = _translationFormat;
        this._enableSummariesForJit = _enableSummariesForJit;
        this._symbolResolver = _symbolResolver;
    }
    /**
     * @return {?}
     */
    AotCompiler.prototype.clearCache = function () { this._metadataResolver.clearCache(); };
    /**
     * @param {?} rootFiles
     * @return {?}
     */
    AotCompiler.prototype.analyzeModulesSync = function (rootFiles) {
        var _this = this;
        var /** @type {?} */ programSymbols = extractProgramSymbols(this._symbolResolver, rootFiles, this._host);
        var /** @type {?} */ analyzeResult = analyzeAndValidateNgModules(programSymbols, this._host, this._metadataResolver);
        analyzeResult.ngModules.forEach(function (ngModule) { return _this._metadataResolver.loadNgModuleDirectiveAndPipeMetadata(ngModule.type.reference, true); });
        return analyzeResult;
    };
    /**
     * @param {?} rootFiles
     * @return {?}
     */
    AotCompiler.prototype.analyzeModulesAsync = function (rootFiles) {
        var _this = this;
        var /** @type {?} */ programSymbols = extractProgramSymbols(this._symbolResolver, rootFiles, this._host);
        var /** @type {?} */ analyzeResult = analyzeAndValidateNgModules(programSymbols, this._host, this._metadataResolver);
        return Promise
            .all(analyzeResult.ngModules.map(function (ngModule) { return _this._metadataResolver.loadNgModuleDirectiveAndPipeMetadata(ngModule.type.reference, false); }))
            .then(function () { return analyzeResult; });
    };
    /**
     * @param {?} analyzeResult
     * @return {?}
     */
    AotCompiler.prototype.emitAllStubs = function (analyzeResult) {
        var _this = this;
        var files = analyzeResult.files;
        var /** @type {?} */ sourceModules = files.map(function (file) { return _this._compileStubFile(file.srcUrl, file.directives, file.pipes, file.ngModules, false); });
        return flatten(sourceModules);
    };
    /**
     * @param {?} analyzeResult
     * @return {?}
     */
    AotCompiler.prototype.emitPartialStubs = function (analyzeResult) {
        var _this = this;
        var files = analyzeResult.files;
        var /** @type {?} */ sourceModules = files.map(function (file) { return _this._compileStubFile(file.srcUrl, file.directives, file.pipes, file.ngModules, true); });
        return flatten(sourceModules);
    };
    /**
     * @param {?} analyzeResult
     * @return {?}
     */
    AotCompiler.prototype.emitAllImpls = function (analyzeResult) {
        var _this = this;
        var ngModuleByPipeOrDirective = analyzeResult.ngModuleByPipeOrDirective, files = analyzeResult.files;
        var /** @type {?} */ sourceModules = files.map(function (file) { return _this._compileImplFile(file.srcUrl, ngModuleByPipeOrDirective, file.directives, file.pipes, file.ngModules, file.injectables); });
        return flatten(sourceModules);
    };
    /**
     * @param {?} srcFileUrl
     * @param {?} directives
     * @param {?} pipes
     * @param {?} ngModules
     * @param {?} partial
     * @return {?}
     */
    AotCompiler.prototype._compileStubFile = function (srcFileUrl, directives, pipes, ngModules, partial) {
        var _this = this;
        // partial is true when we only need the files we are certain will produce a factory and/or
        // summary.
        // This is the normal case for `ngc` but if we assume libraryies are generating their own
        // factories
        // then we might need a factory for a file that re-exports a module or factory which we cannot
        // know
        // ahead of time so we need a stub generate for all non-.d.ts files. The .d.ts files do not need
        // to
        // be excluded here because they are excluded when the modules are analyzed. If a factory ends
        // up
        // not being needed, the factory file is not written in writeFile callback.
        var /** @type {?} */ fileSuffix = splitTypescriptSuffix(srcFileUrl, true)[1];
        var /** @type {?} */ generatedFiles = [];
        var /** @type {?} */ ngFactoryOutputCtx = this._createOutputContext(ngfactoryFilePath(srcFileUrl, true));
        var /** @type {?} */ jitSummaryOutputCtx = this._createOutputContext(summaryForJitFileName(srcFileUrl, true));
        // create exports that user code can reference
        ngModules.forEach(function (ngModuleReference) {
            _this._ngModuleCompiler.createStub(ngFactoryOutputCtx, ngModuleReference);
            createForJitStub(jitSummaryOutputCtx, ngModuleReference);
        });
        var /** @type {?} */ partialJitStubRequired = false;
        var /** @type {?} */ partialFactoryStubRequired = false;
        // create stubs for external stylesheets (always empty, as users should not import anything from
        // the generated code)
        directives.forEach(function (dirType) {
            var /** @type {?} */ compMeta = _this._metadataResolver.getDirectiveMetadata(/** @type {?} */ (dirType));
            partialJitStubRequired = true;
            if (!compMeta.isComponent) {
                return;
            } /** @type {?} */
            ((
            // Note: compMeta is a component and therefore template is non null.
            compMeta.template)).externalStylesheets.forEach(function (stylesheetMeta) {
                var /** @type {?} */ styleContext = _this._createOutputContext(_stylesModuleUrl(/** @type {?} */ ((stylesheetMeta.moduleUrl)), _this._styleCompiler.needsStyleShim(compMeta), fileSuffix));
                _createTypeReferenceStub(styleContext, Identifiers.ComponentFactory);
                generatedFiles.push(_this._codegenSourceModule(/** @type {?} */ ((stylesheetMeta.moduleUrl)), styleContext));
            });
            partialFactoryStubRequired = true;
        });
        // If we need all the stubs to be generated then insert an arbitrary reference into the stub
        if ((partialFactoryStubRequired || !partial) && ngFactoryOutputCtx.statements.length <= 0) {
            _createTypeReferenceStub(ngFactoryOutputCtx, Identifiers.ComponentFactory);
        }
        if ((partialJitStubRequired || !partial || (pipes && pipes.length > 0)) &&
            jitSummaryOutputCtx.statements.length <= 0) {
            _createTypeReferenceStub(jitSummaryOutputCtx, Identifiers.ComponentFactory);
        }
        // Note: we are creating stub ngfactory/ngsummary for all source files,
        // as the real calculation requires almost the same logic as producing the real content for
        // them. Our pipeline will filter out empty ones at the end. Because of this filter, however,
        // stub references to the reference type needs to be generated even if the user cannot
        // refer to type from the `.d.ts` file to prevent the file being elided from the emit.
        generatedFiles.push(this._codegenSourceModule(srcFileUrl, ngFactoryOutputCtx));
        if (this._enableSummariesForJit) {
            generatedFiles.push(this._codegenSourceModule(srcFileUrl, jitSummaryOutputCtx));
        }
        return generatedFiles;
    };
    /**
     * @param {?} srcFileUrl
     * @param {?} ngModuleByPipeOrDirective
     * @param {?} directives
     * @param {?} pipes
     * @param {?} ngModules
     * @param {?} injectables
     * @return {?}
     */
    AotCompiler.prototype._compileImplFile = function (srcFileUrl, ngModuleByPipeOrDirective, directives, pipes, ngModules, injectables) {
        var _this = this;
        var /** @type {?} */ fileSuffix = splitTypescriptSuffix(srcFileUrl, true)[1];
        var /** @type {?} */ generatedFiles = [];
        var /** @type {?} */ outputCtx = this._createOutputContext(ngfactoryFilePath(srcFileUrl, true));
        generatedFiles.push.apply(generatedFiles, this._createSummary(srcFileUrl, directives, pipes, ngModules, injectables, outputCtx));
        // compile all ng modules
        ngModules.forEach(function (ngModuleType) { return _this._compileModule(outputCtx, ngModuleType); });
        // compile components
        directives.forEach(function (dirType) {
            var /** @type {?} */ compMeta = _this._metadataResolver.getDirectiveMetadata(/** @type {?} */ (dirType));
            if (!compMeta.isComponent) {
                return;
            }
            var /** @type {?} */ ngModule = ngModuleByPipeOrDirective.get(dirType);
            if (!ngModule) {
                throw new Error("Internal Error: cannot determine the module for component " + identifierName(compMeta.type) + "!");
            }
            // compile styles
            var /** @type {?} */ componentStylesheet = _this._styleCompiler.compileComponent(outputCtx, compMeta); /** @type {?} */
            ((
            // Note: compMeta is a component and therefore template is non null.
            compMeta.template)).externalStylesheets.forEach(function (stylesheetMeta) {
                generatedFiles.push(_this._codegenStyles(/** @type {?} */ ((stylesheetMeta.moduleUrl)), compMeta, stylesheetMeta, fileSuffix));
            });
            // compile components
            var /** @type {?} */ compViewVars = _this._compileComponent(outputCtx, compMeta, ngModule, ngModule.transitiveModule.directives, componentStylesheet, fileSuffix);
            _this._compileComponentFactory(outputCtx, compMeta, ngModule, fileSuffix);
        });
        if (outputCtx.statements.length > 0) {
            var /** @type {?} */ srcModule = this._codegenSourceModule(srcFileUrl, outputCtx);
            generatedFiles.unshift(srcModule);
        }
        return generatedFiles;
    };
    /**
     * @param {?} srcFileUrl
     * @param {?} directives
     * @param {?} pipes
     * @param {?} ngModules
     * @param {?} injectables
     * @param {?} ngFactoryCtx
     * @return {?}
     */
    AotCompiler.prototype._createSummary = function (srcFileUrl, directives, pipes, ngModules, injectables, ngFactoryCtx) {
        var _this = this;
        var /** @type {?} */ symbolSummaries = this._symbolResolver.getSymbolsOf(srcFileUrl)
            .map(function (symbol) { return _this._symbolResolver.resolveSymbol(symbol); });
        var /** @type {?} */ typeData = ngModules.map(function (ref) { return ({
            summary: /** @type {?} */ ((_this._metadataResolver.getNgModuleSummary(ref))),
            metadata: /** @type {?} */ ((_this._metadataResolver.getNgModuleMetadata(ref)))
        }); }).concat(directives.map(function (ref) { return ({
            summary: /** @type {?} */ ((_this._metadataResolver.getDirectiveSummary(ref))),
            metadata: /** @type {?} */ ((_this._metadataResolver.getDirectiveMetadata(ref)))
        }); }), pipes.map(function (ref) { return ({
            summary: /** @type {?} */ ((_this._metadataResolver.getPipeSummary(ref))),
            metadata: /** @type {?} */ ((_this._metadataResolver.getPipeMetadata(ref)))
        }); }), injectables.map(function (ref) { return ({
            summary: /** @type {?} */ ((_this._metadataResolver.getInjectableSummary(ref))),
            metadata: /** @type {?} */ ((_this._metadataResolver.getInjectableSummary(ref))).type
        }); }));
        var /** @type {?} */ forJitOutputCtx = this._createOutputContext(summaryForJitFileName(srcFileUrl, true));
        var _a = serializeSummaries(forJitOutputCtx, this._summaryResolver, this._symbolResolver, symbolSummaries, typeData), json = _a.json, exportAs = _a.exportAs;
        exportAs.forEach(function (entry) {
            ngFactoryCtx.statements.push(variable(entry.exportAs).set(ngFactoryCtx.importExpr(entry.symbol)).toDeclStmt(null, [
                StmtModifier.Exported
            ]));
        });
        var /** @type {?} */ summaryJson = new GeneratedFile(srcFileUrl, summaryFileName(srcFileUrl), json);
        if (this._enableSummariesForJit) {
            return [summaryJson, this._codegenSourceModule(srcFileUrl, forJitOutputCtx)];
        }
        return [summaryJson];
    };
    /**
     * @param {?} outputCtx
     * @param {?} ngModuleType
     * @return {?}
     */
    AotCompiler.prototype._compileModule = function (outputCtx, ngModuleType) {
        var /** @type {?} */ ngModule = ((this._metadataResolver.getNgModuleMetadata(ngModuleType)));
        var /** @type {?} */ providers = [];
        if (this._localeId) {
            var /** @type {?} */ normalizedLocale = this._localeId.replace(/_/g, '-');
            providers.push({
                token: createTokenForExternalReference(this._reflector, Identifiers.LOCALE_ID),
                useValue: normalizedLocale,
            });
        }
        if (this._translationFormat) {
            providers.push({
                token: createTokenForExternalReference(this._reflector, Identifiers.TRANSLATIONS_FORMAT),
                useValue: this._translationFormat
            });
        }
        this._ngModuleCompiler.compile(outputCtx, ngModule, providers);
    };
    /**
     * @param {?} outputCtx
     * @param {?} compMeta
     * @param {?} ngModule
     * @param {?} fileSuffix
     * @return {?}
     */
    AotCompiler.prototype._compileComponentFactory = function (outputCtx, compMeta, ngModule, fileSuffix) {
        var /** @type {?} */ hostType = this._metadataResolver.getHostComponentType(compMeta.type.reference);
        var /** @type {?} */ hostMeta = createHostComponentMeta(hostType, compMeta, this._metadataResolver.getHostComponentViewClass(hostType));
        var /** @type {?} */ hostViewFactoryVar = this._compileComponent(outputCtx, hostMeta, ngModule, [compMeta.type], null, fileSuffix)
            .viewClassVar;
        var /** @type {?} */ compFactoryVar = componentFactoryName(compMeta.type.reference);
        var /** @type {?} */ inputsExprs = [];
        for (var /** @type {?} */ propName in compMeta.inputs) {
            var /** @type {?} */ templateName = compMeta.inputs[propName];
            // Don't quote so that the key gets minified...
            inputsExprs.push(new LiteralMapEntry(propName, literal(templateName), false));
        }
        var /** @type {?} */ outputsExprs = [];
        for (var /** @type {?} */ propName in compMeta.outputs) {
            var /** @type {?} */ templateName = compMeta.outputs[propName];
            // Don't quote so that the key gets minified...
            outputsExprs.push(new LiteralMapEntry(propName, literal(templateName), false));
        }
        outputCtx.statements.push(variable(compFactoryVar)
            .set(importExpr(Identifiers.createComponentFactory).callFn([
            literal(compMeta.selector), outputCtx.importExpr(compMeta.type.reference),
            variable(hostViewFactoryVar), new LiteralMapExpr(inputsExprs),
            new LiteralMapExpr(outputsExprs),
            literalArr(/** @type {?} */ ((compMeta.template)).ngContentSelectors.map(function (selector) { return literal(selector); }))
        ]))
            .toDeclStmt(importType(Identifiers.ComponentFactory, [/** @type {?} */ ((expressionType(outputCtx.importExpr(compMeta.type.reference))))], [TypeModifier.Const]), [StmtModifier.Final, StmtModifier.Exported]));
    };
    /**
     * @param {?} outputCtx
     * @param {?} compMeta
     * @param {?} ngModule
     * @param {?} directiveIdentifiers
     * @param {?} componentStyles
     * @param {?} fileSuffix
     * @return {?}
     */
    AotCompiler.prototype._compileComponent = function (outputCtx, compMeta, ngModule, directiveIdentifiers, componentStyles, fileSuffix) {
        var _this = this;
        var /** @type {?} */ directives = directiveIdentifiers.map(function (dir) { return _this._metadataResolver.getDirectiveSummary(dir.reference); });
        var /** @type {?} */ pipes = ngModule.transitiveModule.pipes.map(function (pipe) { return _this._metadataResolver.getPipeSummary(pipe.reference); });
        var /** @type {?} */ preserveWhitespaces = ((((compMeta)).template)).preserveWhitespaces;
        var _a = this._templateParser.parse(compMeta, /** @type {?} */ ((((compMeta.template)).template)), directives, pipes, ngModule.schemas, templateSourceUrl(ngModule.type, compMeta, /** @type {?} */ ((compMeta.template))), preserveWhitespaces), parsedTemplate = _a.template, usedPipes = _a.pipes;
        var /** @type {?} */ stylesExpr = componentStyles ? variable(componentStyles.stylesVar) : literalArr([]);
        var /** @type {?} */ viewResult = this._viewCompiler.compileComponent(outputCtx, compMeta, parsedTemplate, stylesExpr, usedPipes);
        if (componentStyles) {
            _resolveStyleStatements(this._symbolResolver, componentStyles, this._styleCompiler.needsStyleShim(compMeta), fileSuffix);
        }
        return viewResult;
    };
    /**
     * @param {?} genFilePath
     * @return {?}
     */
    AotCompiler.prototype._createOutputContext = function (genFilePath) {
        var _this = this;
        var /** @type {?} */ importExpr$$1 = function (symbol, typeParams) {
            if (typeParams === void 0) { typeParams = null; }
            if (!(symbol instanceof StaticSymbol)) {
                throw new Error("Internal error: unknown identifier " + JSON.stringify(symbol));
            }
            var /** @type {?} */ arity = _this._symbolResolver.getTypeArity(symbol) || 0;
            var _a = _this._symbolResolver.getImportAs(symbol) || symbol, filePath = _a.filePath, name = _a.name, members = _a.members;
            var /** @type {?} */ importModule = _this._symbolResolver.fileNameToModuleName(filePath, genFilePath);
            // It should be good enough to compare filePath to genFilePath and if they are equal
            // there is a self reference. However, ngfactory files generate to .ts but their
            // symbols have .d.ts so a simple compare is insufficient. They should be canonical
            // and is tracked by #17705.
            var /** @type {?} */ selfReference = _this._symbolResolver.fileNameToModuleName(genFilePath, genFilePath);
            var /** @type {?} */ moduleName = importModule === selfReference ? null : importModule;
            // If we are in a type expression that refers to a generic type then supply
            // the required type parameters. If there were not enough type parameters
            // supplied, supply any as the type. Outside a type expression the reference
            // should not supply type parameters and be treated as a simple value reference
            // to the constructor function itself.
            var /** @type {?} */ suppliedTypeParams = typeParams || [];
            var /** @type {?} */ missingTypeParamsCount = arity - suppliedTypeParams.length;
            var /** @type {?} */ allTypeParams = suppliedTypeParams.concat(new Array(missingTypeParamsCount).fill(DYNAMIC_TYPE));
            return members.reduce(function (expr, memberName) { return expr.prop(memberName); }, /** @type {?} */ (importExpr(new ExternalReference(moduleName, name, null), allTypeParams)));
        };
        return { statements: [], genFilePath: genFilePath, importExpr: importExpr$$1 };
    };
    /**
     * @param {?} srcFileUrl
     * @param {?} compMeta
     * @param {?} stylesheetMetadata
     * @param {?} fileSuffix
     * @return {?}
     */
    AotCompiler.prototype._codegenStyles = function (srcFileUrl, compMeta, stylesheetMetadata, fileSuffix) {
        var /** @type {?} */ outputCtx = this._createOutputContext(_stylesModuleUrl(/** @type {?} */ ((stylesheetMetadata.moduleUrl)), this._styleCompiler.needsStyleShim(compMeta), fileSuffix));
        var /** @type {?} */ compiledStylesheet = this._styleCompiler.compileStyles(outputCtx, compMeta, stylesheetMetadata);
        _resolveStyleStatements(this._symbolResolver, compiledStylesheet, this._styleCompiler.needsStyleShim(compMeta), fileSuffix);
        return this._codegenSourceModule(srcFileUrl, outputCtx);
    };
    /**
     * @param {?} srcFileUrl
     * @param {?} ctx
     * @return {?}
     */
    AotCompiler.prototype._codegenSourceModule = function (srcFileUrl, ctx) {
        return new GeneratedFile(srcFileUrl, ctx.genFilePath, ctx.statements);
    };
    return AotCompiler;
}());
/**
 * @param {?} outputCtx
 * @param {?} reference
 * @return {?}
 */
function _createTypeReferenceStub(outputCtx, reference) {
    outputCtx.statements.push(importExpr(reference).toStmt());
}
/**
 * @param {?} symbolResolver
 * @param {?} compileResult
 * @param {?} needsShim
 * @param {?} fileSuffix
 * @return {?}
 */
function _resolveStyleStatements(symbolResolver, compileResult, needsShim, fileSuffix) {
    compileResult.dependencies.forEach(function (dep) {
        dep.setValue(symbolResolver.getStaticSymbol(_stylesModuleUrl(dep.moduleUrl, needsShim, fileSuffix), dep.name));
    });
}
/**
 * @param {?} stylesheetUrl
 * @param {?} shim
 * @param {?} suffix
 * @return {?}
 */
function _stylesModuleUrl(stylesheetUrl, shim, suffix) {
    return "" + stylesheetUrl + (shim ? '.shim' : '') + ".ngstyle" + suffix;
}
/**
 * @param {?} programStaticSymbols
 * @param {?} host
 * @param {?} metadataResolver
 * @return {?}
 */
function analyzeNgModules(programStaticSymbols, host, metadataResolver) {
    var _a = _createNgModules(programStaticSymbols, host, metadataResolver), ngModules = _a.ngModules, symbolsMissingModule = _a.symbolsMissingModule;
    return _analyzeNgModules(programStaticSymbols, ngModules, symbolsMissingModule, metadataResolver);
}
/**
 * @param {?} programStaticSymbols
 * @param {?} host
 * @param {?} metadataResolver
 * @return {?}
 */
function analyzeAndValidateNgModules(programStaticSymbols, host, metadataResolver) {
    var /** @type {?} */ result = analyzeNgModules(programStaticSymbols, host, metadataResolver);
    if (result.symbolsMissingModule && result.symbolsMissingModule.length) {
        var /** @type {?} */ messages = result.symbolsMissingModule.map(function (s) { return "Cannot determine the module for class " + s.name + " in " + s.filePath + "! Add " + s.name + " to the NgModule to fix it."; });
        throw syntaxError(messages.join('\n'));
    }
    return result;
}
/**
 * @param {?} programSymbols
 * @param {?} ngModuleMetas
 * @param {?} symbolsMissingModule
 * @param {?} metadataResolver
 * @return {?}
 */
function _analyzeNgModules(programSymbols, ngModuleMetas, symbolsMissingModule, metadataResolver) {
    var /** @type {?} */ moduleMetasByRef = new Map();
    ngModuleMetas.forEach(function (ngModule) { return moduleMetasByRef.set(ngModule.type.reference, ngModule); });
    var /** @type {?} */ ngModuleByPipeOrDirective = new Map();
    var /** @type {?} */ ngModulesByFile = new Map();
    var /** @type {?} */ ngDirectivesByFile = new Map();
    var /** @type {?} */ ngPipesByFile = new Map();
    var /** @type {?} */ ngInjectablesByFile = new Map();
    var /** @type {?} */ filePaths = new Set();
    // Make sure we produce an analyzed file for each input file
    programSymbols.forEach(function (symbol) {
        var /** @type {?} */ filePath = symbol.filePath;
        filePaths.add(filePath);
        if (metadataResolver.isInjectable(symbol)) {
            ngInjectablesByFile.set(filePath, (ngInjectablesByFile.get(filePath) || []).concat(symbol));
        }
    });
    // Looping over all modules to construct:
    // - a map from file to modules `ngModulesByFile`,
    // - a map from file to directives `ngDirectivesByFile`,
    // - a map from file to pipes `ngPipesByFile`,
    // - a map from directive/pipe to module `ngModuleByPipeOrDirective`.
    ngModuleMetas.forEach(function (ngModuleMeta) {
        var /** @type {?} */ srcFileUrl = ngModuleMeta.type.reference.filePath;
        filePaths.add(srcFileUrl);
        ngModulesByFile.set(srcFileUrl, (ngModulesByFile.get(srcFileUrl) || []).concat(ngModuleMeta.type.reference));
        ngModuleMeta.declaredDirectives.forEach(function (dirIdentifier) {
            var /** @type {?} */ fileUrl = dirIdentifier.reference.filePath;
            filePaths.add(fileUrl);
            ngDirectivesByFile.set(fileUrl, (ngDirectivesByFile.get(fileUrl) || []).concat(dirIdentifier.reference));
            ngModuleByPipeOrDirective.set(dirIdentifier.reference, ngModuleMeta);
        });
        ngModuleMeta.declaredPipes.forEach(function (pipeIdentifier) {
            var /** @type {?} */ fileUrl = pipeIdentifier.reference.filePath;
            filePaths.add(fileUrl);
            ngPipesByFile.set(fileUrl, (ngPipesByFile.get(fileUrl) || []).concat(pipeIdentifier.reference));
            ngModuleByPipeOrDirective.set(pipeIdentifier.reference, ngModuleMeta);
        });
    });
    var /** @type {?} */ files = [];
    filePaths.forEach(function (srcUrl) {
        var /** @type {?} */ directives = ngDirectivesByFile.get(srcUrl) || [];
        var /** @type {?} */ pipes = ngPipesByFile.get(srcUrl) || [];
        var /** @type {?} */ ngModules = ngModulesByFile.get(srcUrl) || [];
        var /** @type {?} */ injectables = ngInjectablesByFile.get(srcUrl) || [];
        files.push({ srcUrl: srcUrl, directives: directives, pipes: pipes, ngModules: ngModules, injectables: injectables });
    });
    return {
        // map directive/pipe to module
        ngModuleByPipeOrDirective: ngModuleByPipeOrDirective,
        // list modules and directives for every source file
        files: files,
        ngModules: ngModuleMetas, symbolsMissingModule: symbolsMissingModule
    };
}
/**
 * @param {?} staticSymbolResolver
 * @param {?} files
 * @param {?} host
 * @return {?}
 */
function extractProgramSymbols(staticSymbolResolver, files, host) {
    var /** @type {?} */ staticSymbols = [];
    files.filter(function (fileName) { return host.isSourceFile(fileName); }).forEach(function (sourceFile) {
        staticSymbolResolver.getSymbolsOf(sourceFile).forEach(function (symbol) {
            var /** @type {?} */ resolvedSymbol = staticSymbolResolver.resolveSymbol(symbol);
            var /** @type {?} */ symbolMeta = resolvedSymbol.metadata;
            if (symbolMeta) {
                if (symbolMeta.__symbolic != 'error') {
                    // Ignore symbols that are only included to record error information.
                    staticSymbols.push(resolvedSymbol.symbol);
                }
            }
        });
    });
    return staticSymbols;
}
/**
 * @param {?} programStaticSymbols
 * @param {?} host
 * @param {?} metadataResolver
 * @return {?}
 */
function _createNgModules(programStaticSymbols, host, metadataResolver) {
    var /** @type {?} */ ngModules = new Map();
    var /** @type {?} */ programPipesAndDirectives = [];
    var /** @type {?} */ ngModulePipesAndDirective = new Set();
    var /** @type {?} */ addNgModule = function (staticSymbol) {
        if (ngModules.has(staticSymbol) || !host.isSourceFile(staticSymbol.filePath)) {
            return false;
        }
        var /** @type {?} */ ngModule = metadataResolver.getNgModuleMetadata(staticSymbol, false);
        if (ngModule) {
            ngModules.set(ngModule.type.reference, ngModule);
            ngModule.declaredDirectives.forEach(function (dir) { return ngModulePipesAndDirective.add(dir.reference); });
            ngModule.declaredPipes.forEach(function (pipe) { return ngModulePipesAndDirective.add(pipe.reference); });
            // For every input module add the list of transitively included modules
            ngModule.transitiveModule.modules.forEach(function (modMeta) { return addNgModule(modMeta.reference); });
        }
        return !!ngModule;
    };
    programStaticSymbols.forEach(function (staticSymbol) {
        if (!addNgModule(staticSymbol) &&
            (metadataResolver.isDirective(staticSymbol) || metadataResolver.isPipe(staticSymbol))) {
            programPipesAndDirectives.push(staticSymbol);
        }
    });
    // Throw an error if any of the program pipe or directives is not declared by a module
    var /** @type {?} */ symbolsMissingModule = programPipesAndDirectives.filter(function (s) { return !ngModulePipesAndDirective.has(s); });
    return { ngModules: Array.from(ngModules.values()), symbolsMissingModule: symbolsMissingModule };
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ANGULAR_CORE = '@angular/core';
var ANGULAR_ROUTER = '@angular/router';
var HIDDEN_KEY = /^\$.*\$$/;
var IGNORE = {
    __symbolic: 'ignore'
};
var USE_VALUE = 'useValue';
var PROVIDE = 'provide';
var REFERENCE_SET = new Set([USE_VALUE, 'useFactory', 'data']);
/**
 * @param {?} value
 * @return {?}
 */
function shouldIgnore(value) {
    return value && value.__symbolic == 'ignore';
}
/**
 * A static reflector implements enough of the Reflector API that is necessary to compile
 * templates statically.
 */
var StaticReflector = (function () {
    /**
     * @param {?} summaryResolver
     * @param {?} symbolResolver
     * @param {?=} knownMetadataClasses
     * @param {?=} knownMetadataFunctions
     * @param {?=} errorRecorder
     */
    function StaticReflector(summaryResolver, symbolResolver, knownMetadataClasses, knownMetadataFunctions, errorRecorder) {
        if (knownMetadataClasses === void 0) { knownMetadataClasses = []; }
        if (knownMetadataFunctions === void 0) { knownMetadataFunctions = []; }
        var _this = this;
        this.summaryResolver = summaryResolver;
        this.symbolResolver = symbolResolver;
        this.errorRecorder = errorRecorder;
        this.annotationCache = new Map();
        this.propertyCache = new Map();
        this.parameterCache = new Map();
        this.methodCache = new Map();
        this.conversionMap = new Map();
        this.annotationForParentClassWithSummaryKind = new Map();
        this.annotationNames = new Map();
        this.initializeConversionMap();
        knownMetadataClasses.forEach(function (kc) { return _this._registerDecoratorOrConstructor(_this.getStaticSymbol(kc.filePath, kc.name), kc.ctor); });
        knownMetadataFunctions.forEach(function (kf) { return _this._registerFunction(_this.getStaticSymbol(kf.filePath, kf.name), kf.fn); });
        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.Directive, [__WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */], __WEBPACK_IMPORTED_MODULE_1__angular_core__["n" /* Component */]]);
        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.Pipe, [__WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */]]);
        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.NgModule, [__WEBPACK_IMPORTED_MODULE_1__angular_core__["L" /* NgModule */]]);
        this.annotationForParentClassWithSummaryKind.set(CompileSummaryKind.Injectable, [__WEBPACK_IMPORTED_MODULE_1__angular_core__["B" /* Injectable */], __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */], __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */], __WEBPACK_IMPORTED_MODULE_1__angular_core__["n" /* Component */], __WEBPACK_IMPORTED_MODULE_1__angular_core__["L" /* NgModule */]]);
        this.annotationNames.set(__WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */], 'Directive');
        this.annotationNames.set(__WEBPACK_IMPORTED_MODULE_1__angular_core__["n" /* Component */], 'Component');
        this.annotationNames.set(__WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */], 'Pipe');
        this.annotationNames.set(__WEBPACK_IMPORTED_MODULE_1__angular_core__["L" /* NgModule */], 'NgModule');
        this.annotationNames.set(__WEBPACK_IMPORTED_MODULE_1__angular_core__["B" /* Injectable */], 'Injectable');
    }
    /**
     * @param {?} typeOrFunc
     * @return {?}
     */
    StaticReflector.prototype.componentModuleUrl = function (typeOrFunc) {
        var /** @type {?} */ staticSymbol = this.findSymbolDeclaration(typeOrFunc);
        return this.symbolResolver.getResourcePath(staticSymbol);
    };
    /**
     * @param {?} ref
     * @return {?}
     */
    StaticReflector.prototype.resolveExternalReference = function (ref) {
        var /** @type {?} */ importSymbol = this.getStaticSymbol(/** @type {?} */ ((ref.moduleName)), /** @type {?} */ ((ref.name)));
        var /** @type {?} */ rootSymbol = this.findDeclaration(/** @type {?} */ ((ref.moduleName)), /** @type {?} */ ((ref.name)));
        if (importSymbol != rootSymbol) {
            this.symbolResolver.recordImportAs(rootSymbol, importSymbol);
        }
        return rootSymbol;
    };
    /**
     * @param {?} moduleUrl
     * @param {?} name
     * @param {?=} containingFile
     * @return {?}
     */
    StaticReflector.prototype.findDeclaration = function (moduleUrl, name, containingFile) {
        return this.findSymbolDeclaration(this.symbolResolver.getSymbolByModule(moduleUrl, name, containingFile));
    };
    /**
     * @param {?} moduleUrl
     * @param {?} name
     * @return {?}
     */
    StaticReflector.prototype.tryFindDeclaration = function (moduleUrl, name) {
        var _this = this;
        return this.symbolResolver.ignoreErrorsFor(function () { return _this.findDeclaration(moduleUrl, name); });
    };
    /**
     * @param {?} symbol
     * @return {?}
     */
    StaticReflector.prototype.findSymbolDeclaration = function (symbol) {
        var /** @type {?} */ resolvedSymbol = this.symbolResolver.resolveSymbol(symbol);
        if (resolvedSymbol && resolvedSymbol.metadata instanceof StaticSymbol) {
            return this.findSymbolDeclaration(resolvedSymbol.metadata);
        }
        else {
            return symbol;
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    StaticReflector.prototype.annotations = function (type) {
        var _this = this;
        var /** @type {?} */ annotations = this.annotationCache.get(type);
        if (!annotations) {
            annotations = [];
            var /** @type {?} */ classMetadata = this.getTypeMetadata(type);
            var /** @type {?} */ parentType = this.findParentType(type, classMetadata);
            if (parentType) {
                var /** @type {?} */ parentAnnotations = this.annotations(parentType);
                annotations.push.apply(annotations, parentAnnotations);
            }
            var /** @type {?} */ ownAnnotations_1 = [];
            if (classMetadata['decorators']) {
                ownAnnotations_1 = this.simplify(type, classMetadata['decorators']);
                annotations.push.apply(annotations, ownAnnotations_1);
            }
            if (parentType && !this.summaryResolver.isLibraryFile(type.filePath) &&
                this.summaryResolver.isLibraryFile(parentType.filePath)) {
                var /** @type {?} */ summary = this.summaryResolver.resolveSummary(parentType);
                if (summary && summary.type) {
                    var /** @type {?} */ requiredAnnotationTypes = ((this.annotationForParentClassWithSummaryKind.get(/** @type {?} */ ((summary.type.summaryKind)))));
                    var /** @type {?} */ typeHasRequiredAnnotation = requiredAnnotationTypes.some(function (requiredType) { return ownAnnotations_1.some(function (ann) { return ann instanceof requiredType; }); });
                    if (!typeHasRequiredAnnotation) {
                        this.reportError(syntaxError("Class " + type.name + " in " + type.filePath + " extends from a " + CompileSummaryKind[((summary.type.summaryKind))] + " in another compilation unit without duplicating the decorator. " +
                            ("Please add a " + requiredAnnotationTypes.map(function (type) { return _this.annotationNames.get(type); }).join(' or ') + " decorator to the class.")), type);
                    }
                }
            }
            this.annotationCache.set(type, annotations.filter(function (ann) { return !!ann; }));
        }
        return annotations;
    };
    /**
     * @param {?} type
     * @return {?}
     */
    StaticReflector.prototype.propMetadata = function (type) {
        var _this = this;
        var /** @type {?} */ propMetadata = this.propertyCache.get(type);
        if (!propMetadata) {
            var /** @type {?} */ classMetadata = this.getTypeMetadata(type);
            propMetadata = {};
            var /** @type {?} */ parentType = this.findParentType(type, classMetadata);
            if (parentType) {
                var /** @type {?} */ parentPropMetadata_1 = this.propMetadata(parentType);
                Object.keys(parentPropMetadata_1).forEach(function (parentProp) {
                    ((propMetadata))[parentProp] = parentPropMetadata_1[parentProp];
                });
            }
            var /** @type {?} */ members_1 = classMetadata['members'] || {};
            Object.keys(members_1).forEach(function (propName) {
                var /** @type {?} */ propData = members_1[propName];
                var /** @type {?} */ prop = ((propData))
                    .find(function (a) { return a['__symbolic'] == 'property' || a['__symbolic'] == 'method'; });
                var /** @type {?} */ decorators = [];
                if (((propMetadata))[propName]) {
                    decorators.push.apply(decorators, ((propMetadata))[propName]);
                } /** @type {?} */
                ((propMetadata))[propName] = decorators;
                if (prop && prop['decorators']) {
                    decorators.push.apply(decorators, _this.simplify(type, prop['decorators']));
                }
            });
            this.propertyCache.set(type, propMetadata);
        }
        return propMetadata;
    };
    /**
     * @param {?} type
     * @return {?}
     */
    StaticReflector.prototype.parameters = function (type) {
        var _this = this;
        if (!(type instanceof StaticSymbol)) {
            this.reportError(new Error("parameters received " + JSON.stringify(type) + " which is not a StaticSymbol"), type);
            return [];
        }
        try {
            var /** @type {?} */ parameters_1 = this.parameterCache.get(type);
            if (!parameters_1) {
                var /** @type {?} */ classMetadata = this.getTypeMetadata(type);
                var /** @type {?} */ parentType = this.findParentType(type, classMetadata);
                var /** @type {?} */ members = classMetadata ? classMetadata['members'] : null;
                var /** @type {?} */ ctorData = members ? members['__ctor__'] : null;
                if (ctorData) {
                    var /** @type {?} */ ctor = ((ctorData)).find(function (a) { return a['__symbolic'] == 'constructor'; });
                    var /** @type {?} */ rawParameterTypes = (ctor['parameters']) || [];
                    var /** @type {?} */ parameterDecorators_1 = (this.simplify(type, ctor['parameterDecorators'] || []));
                    parameters_1 = [];
                    rawParameterTypes.forEach(function (rawParamType, index) {
                        var /** @type {?} */ nestedResult = [];
                        var /** @type {?} */ paramType = _this.trySimplify(type, rawParamType);
                        if (paramType)
                            nestedResult.push(paramType);
                        var /** @type {?} */ decorators = parameterDecorators_1 ? parameterDecorators_1[index] : null;
                        if (decorators) {
                            nestedResult.push.apply(nestedResult, decorators);
                        } /** @type {?} */
                        ((parameters_1)).push(nestedResult);
                    });
                }
                else if (parentType) {
                    parameters_1 = this.parameters(parentType);
                }
                if (!parameters_1) {
                    parameters_1 = [];
                }
                this.parameterCache.set(type, parameters_1);
            }
            return parameters_1;
        }
        catch (e) {
            console.error("Failed on type " + JSON.stringify(type) + " with error " + e);
            throw e;
        }
    };
    /**
     * @param {?} type
     * @return {?}
     */
    StaticReflector.prototype._methodNames = function (type) {
        var /** @type {?} */ methodNames = this.methodCache.get(type);
        if (!methodNames) {
            var /** @type {?} */ classMetadata = this.getTypeMetadata(type);
            methodNames = {};
            var /** @type {?} */ parentType = this.findParentType(type, classMetadata);
            if (parentType) {
                var /** @type {?} */ parentMethodNames_1 = this._methodNames(parentType);
                Object.keys(parentMethodNames_1).forEach(function (parentProp) {
                    ((methodNames))[parentProp] = parentMethodNames_1[parentProp];
                });
            }
            var /** @type {?} */ members_2 = classMetadata['members'] || {};
            Object.keys(members_2).forEach(function (propName) {
                var /** @type {?} */ propData = members_2[propName];
                var /** @type {?} */ isMethod = ((propData)).some(function (a) { return a['__symbolic'] == 'method'; }); /** @type {?} */
                ((methodNames))[propName] = ((methodNames))[propName] || isMethod;
            });
            this.methodCache.set(type, methodNames);
        }
        return methodNames;
    };
    /**
     * @param {?} type
     * @param {?} classMetadata
     * @return {?}
     */
    StaticReflector.prototype.findParentType = function (type, classMetadata) {
        var /** @type {?} */ parentType = this.trySimplify(type, classMetadata['extends']);
        if (parentType instanceof StaticSymbol) {
            return parentType;
        }
    };
    /**
     * @param {?} type
     * @param {?} lcProperty
     * @return {?}
     */
    StaticReflector.prototype.hasLifecycleHook = function (type, lcProperty) {
        if (!(type instanceof StaticSymbol)) {
            this.reportError(new Error("hasLifecycleHook received " + JSON.stringify(type) + " which is not a StaticSymbol"), type);
        }
        try {
            return !!this._methodNames(type)[lcProperty];
        }
        catch (e) {
            console.error("Failed on type " + JSON.stringify(type) + " with error " + e);
            throw e;
        }
    };
    /**
     * @param {?} type
     * @param {?} ctor
     * @return {?}
     */
    StaticReflector.prototype._registerDecoratorOrConstructor = function (type, ctor) {
        this.conversionMap.set(type, function (context, args) { return new (ctor.bind.apply(ctor, [void 0].concat(args)))(); });
    };
    /**
     * @param {?} type
     * @param {?} fn
     * @return {?}
     */
    StaticReflector.prototype._registerFunction = function (type, fn) {
        this.conversionMap.set(type, function (context, args) { return fn.apply(undefined, args); });
    };
    /**
     * @return {?}
     */
    StaticReflector.prototype.initializeConversionMap = function () {
        this.injectionToken = this.findDeclaration(ANGULAR_CORE, 'InjectionToken');
        this.opaqueToken = this.findDeclaration(ANGULAR_CORE, 'OpaqueToken');
        this.ROUTES = this.tryFindDeclaration(ANGULAR_ROUTER, 'ROUTES');
        this.ANALYZE_FOR_ENTRY_COMPONENTS =
            this.findDeclaration(ANGULAR_CORE, 'ANALYZE_FOR_ENTRY_COMPONENTS');
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Host'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["x" /* Host */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Injectable'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["B" /* Injectable */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Self'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["_4" /* Self */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'SkipSelf'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["_5" /* SkipSelf */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Inject'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Optional'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["Q" /* Optional */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Attribute'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["g" /* Attribute */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ContentChild'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["r" /* ContentChild */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ContentChildren'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["s" /* ContentChildren */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ViewChild'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["_12" /* ViewChild */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'ViewChildren'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["_13" /* ViewChildren */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Input'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["E" /* Input */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Output'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["R" /* Output */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Pipe'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["V" /* Pipe */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'HostBinding'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["y" /* HostBinding */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'HostListener'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["z" /* HostListener */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Directive'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["t" /* Directive */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Component'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["n" /* Component */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'NgModule'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["L" /* NgModule */]);
        // Note: Some metadata classes can be used directly with Provider.deps.
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Host'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["x" /* Host */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Self'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["_4" /* Self */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'SkipSelf'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["_5" /* SkipSelf */]);
        this._registerDecoratorOrConstructor(this.findDeclaration(ANGULAR_CORE, 'Optional'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["Q" /* Optional */]);
        this._registerFunction(this.findDeclaration(ANGULAR_CORE, 'trigger'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["_31" /* trigger */]);
        this._registerFunction(this.findDeclaration(ANGULAR_CORE, 'state'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["_28" /* state */]);
        this._registerFunction(this.findDeclaration(ANGULAR_CORE, 'transition'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["_30" /* transition */]);
        this._registerFunction(this.findDeclaration(ANGULAR_CORE, 'style'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["_29" /* style */]);
        this._registerFunction(this.findDeclaration(ANGULAR_CORE, 'animate'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["_17" /* animate */]);
        this._registerFunction(this.findDeclaration(ANGULAR_CORE, 'keyframes'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["_23" /* keyframes */]);
        this._registerFunction(this.findDeclaration(ANGULAR_CORE, 'sequence'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["_26" /* sequence */]);
        this._registerFunction(this.findDeclaration(ANGULAR_CORE, 'group'), __WEBPACK_IMPORTED_MODULE_1__angular_core__["_21" /* group */]);
    };
    /**
     * getStaticSymbol produces a Type whose metadata is known but whose implementation is not loaded.
     * All types passed to the StaticResolver should be pseudo-types returned by this method.
     *
     * @param {?} declarationFile the absolute path of the file where the symbol is declared
     * @param {?} name the name of the type.
     * @param {?=} members
     * @return {?}
     */
    StaticReflector.prototype.getStaticSymbol = function (declarationFile, name, members) {
        return this.symbolResolver.getStaticSymbol(declarationFile, name, members);
    };
    /**
     * @param {?} error
     * @param {?} context
     * @param {?=} path
     * @return {?}
     */
    StaticReflector.prototype.reportError = function (error, context, path) {
        if (this.errorRecorder) {
            this.errorRecorder(error, (context && context.filePath) || path);
        }
        else {
            throw error;
        }
    };
    /**
     * Simplify but discard any errors
     * @param {?} context
     * @param {?} value
     * @return {?}
     */
    StaticReflector.prototype.trySimplify = function (context, value) {
        var /** @type {?} */ originalRecorder = this.errorRecorder;
        this.errorRecorder = function (error, fileName) { };
        var /** @type {?} */ result = this.simplify(context, value);
        this.errorRecorder = originalRecorder;
        return result;
    };
    /**
     * \@internal
     * @param {?} context
     * @param {?} value
     * @return {?}
     */
    StaticReflector.prototype.simplify = function (context, value) {
        var _this = this;
        var /** @type {?} */ self = this;
        var /** @type {?} */ scope = BindingScope.empty;
        var /** @type {?} */ calling = new Map();
        /**
         * @param {?} context
         * @param {?} value
         * @param {?} depth
         * @param {?} references
         * @return {?}
         */
        function simplifyInContext(context, value, depth, references) {
            /**
             * @param {?} staticSymbol
             * @return {?}
             */
            function resolveReferenceValue(staticSymbol) {
                var /** @type {?} */ resolvedSymbol = self.symbolResolver.resolveSymbol(staticSymbol);
                return resolvedSymbol ? resolvedSymbol.metadata : null;
            }
            /**
             * @param {?} functionSymbol
             * @param {?} targetFunction
             * @param {?} args
             * @return {?}
             */
            function simplifyCall(functionSymbol, targetFunction, args) {
                if (targetFunction && targetFunction['__symbolic'] == 'function') {
                    if (calling.get(functionSymbol)) {
                        throw new Error('Recursion not supported');
                    }
                    calling.set(functionSymbol, true);
                    try {
                        var /** @type {?} */ value_1 = targetFunction['value'];
                        if (value_1 && (depth != 0 || value_1.__symbolic != 'error')) {
                            var /** @type {?} */ parameters = targetFunction['parameters'];
                            var /** @type {?} */ defaults = targetFunction.defaults;
                            args = args.map(function (arg) { return simplifyInContext(context, arg, depth + 1, references); })
                                .map(function (arg) { return shouldIgnore(arg) ? undefined : arg; });
                            if (defaults && defaults.length > args.length) {
                                args.push.apply(args, defaults.slice(args.length).map(function (value) { return simplify(value); }));
                            }
                            var /** @type {?} */ functionScope = BindingScope.build();
                            for (var /** @type {?} */ i = 0; i < parameters.length; i++) {
                                functionScope.define(parameters[i], args[i]);
                            }
                            var /** @type {?} */ oldScope = scope;
                            var /** @type {?} */ result_1;
                            try {
                                scope = functionScope.done();
                                result_1 = simplifyInContext(functionSymbol, value_1, depth + 1, references);
                            }
                            finally {
                                scope = oldScope;
                            }
                            return result_1;
                        }
                    }
                    finally {
                        calling.delete(functionSymbol);
                    }
                }
                if (depth === 0) {
                    // If depth is 0 we are evaluating the top level expression that is describing element
                    // decorator. In this case, it is a decorator we don't understand, such as a custom
                    // non-angular decorator, and we should just ignore it.
                    return IGNORE;
                }
                return simplify({ __symbolic: 'error', message: 'Function call not supported', context: functionSymbol });
            }
            /**
             * @param {?} expression
             * @return {?}
             */
            function simplify(expression) {
                if (isPrimitive(expression)) {
                    return expression;
                }
                if (expression instanceof Array) {
                    var /** @type {?} */ result_2 = [];
                    for (var _i = 0, _a = ((expression)); _i < _a.length; _i++) {
                        var item = _a[_i];
                        // Check for a spread expression
                        if (item && item.__symbolic === 'spread') {
                            // We call with references as 0 because we require the actual value and cannot
                            // tolerate a reference here.
                            var /** @type {?} */ spreadArray = simplifyInContext(context, item.expression, depth, 0);
                            if (Array.isArray(spreadArray)) {
                                for (var _b = 0, spreadArray_1 = spreadArray; _b < spreadArray_1.length; _b++) {
                                    var spreadItem = spreadArray_1[_b];
                                    result_2.push(spreadItem);
                                }
                                continue;
                            }
                        }
                        var /** @type {?} */ value_2 = simplify(item);
                        if (shouldIgnore(value_2)) {
                            continue;
                        }
                        result_2.push(value_2);
                    }
                    return result_2;
                }
                if (expression instanceof StaticSymbol) {
                    // Stop simplification at builtin symbols or if we are in a reference context
                    if (expression === self.injectionToken || expression === self.opaqueToken ||
                        self.conversionMap.has(expression) ||
                        (references > 0 && !expression.members.length)) {
                        return expression;
                    }
                    else {
                        var /** @type {?} */ staticSymbol = expression;
                        var /** @type {?} */ declarationValue = resolveReferenceValue(staticSymbol);
                        if (declarationValue != null) {
                            return simplifyInContext(staticSymbol, declarationValue, depth + 1, references);
                        }
                        else {
                            return staticSymbol;
                        }
                    }
                }
                if (expression) {
                    if (expression['__symbolic']) {
                        var /** @type {?} */ staticSymbol = void 0;
                        switch (expression['__symbolic']) {
                            case 'binop':
                                var /** @type {?} */ left = simplify(expression['left']);
                                if (shouldIgnore(left))
                                    return left;
                                var /** @type {?} */ right = simplify(expression['right']);
                                if (shouldIgnore(right))
                                    return right;
                                switch (expression['operator']) {
                                    case '&&':
                                        return left && right;
                                    case '||':
                                        return left || right;
                                    case '|':
                                        return left | right;
                                    case '^':
                                        return left ^ right;
                                    case '&':
                                        return left & right;
                                    case '==':
                                        return left == right;
                                    case '!=':
                                        return left != right;
                                    case '===':
                                        return left === right;
                                    case '!==':
                                        return left !== right;
                                    case '<':
                                        return left < right;
                                    case '>':
                                        return left > right;
                                    case '<=':
                                        return left <= right;
                                    case '>=':
                                        return left >= right;
                                    case '<<':
                                        return left << right;
                                    case '>>':
                                        return left >> right;
                                    case '+':
                                        return left + right;
                                    case '-':
                                        return left - right;
                                    case '*':
                                        return left * right;
                                    case '/':
                                        return left / right;
                                    case '%':
                                        return left % right;
                                }
                                return null;
                            case 'if':
                                var /** @type {?} */ condition = simplify(expression['condition']);
                                return condition ? simplify(expression['thenExpression']) :
                                    simplify(expression['elseExpression']);
                            case 'pre':
                                var /** @type {?} */ operand = simplify(expression['operand']);
                                if (shouldIgnore(operand))
                                    return operand;
                                switch (expression['operator']) {
                                    case '+':
                                        return operand;
                                    case '-':
                                        return -operand;
                                    case '!':
                                        return !operand;
                                    case '~':
                                        return ~operand;
                                }
                                return null;
                            case 'index':
                                var /** @type {?} */ indexTarget = simplifyInContext(context, expression['expression'], depth, 0);
                                var /** @type {?} */ index = simplifyInContext(context, expression['index'], depth, 0);
                                if (indexTarget && isPrimitive(index))
                                    return indexTarget[index];
                                return null;
                            case 'select':
                                var /** @type {?} */ member = expression['member'];
                                var /** @type {?} */ selectContext = context;
                                var /** @type {?} */ selectTarget = simplify(expression['expression']);
                                if (selectTarget instanceof StaticSymbol) {
                                    var /** @type {?} */ members = selectTarget.members.concat(member);
                                    selectContext =
                                        self.getStaticSymbol(selectTarget.filePath, selectTarget.name, members);
                                    var /** @type {?} */ declarationValue = resolveReferenceValue(selectContext);
                                    if (declarationValue != null) {
                                        return simplifyInContext(selectContext, declarationValue, depth + 1, references);
                                    }
                                    else {
                                        return selectContext;
                                    }
                                }
                                if (selectTarget && isPrimitive(member))
                                    return simplifyInContext(selectContext, selectTarget[member], depth + 1, references);
                                return null;
                            case 'reference':
                                // Note: This only has to deal with variable references,
                                // as symbol references have been converted into StaticSymbols already
                                // in the StaticSymbolResolver!
                                var /** @type {?} */ name = expression['name'];
                                var /** @type {?} */ localValue = scope.resolve(name);
                                if (localValue != BindingScope.missing) {
                                    return localValue;
                                }
                                break;
                            case 'class':
                                return context;
                            case 'function':
                                return context;
                            case 'new':
                            case 'call':
                                // Determine if the function is a built-in conversion
                                staticSymbol = simplifyInContext(context, expression['expression'], depth + 1, /* references */ 0);
                                if (staticSymbol instanceof StaticSymbol) {
                                    if (staticSymbol === self.injectionToken || staticSymbol === self.opaqueToken) {
                                        // if somebody calls new InjectionToken, don't create an InjectionToken,
                                        // but rather return the symbol to which the InjectionToken is assigned to.
                                        return context;
                                    }
                                    var /** @type {?} */ argExpressions = expression['arguments'] || [];
                                    var /** @type {?} */ converter = self.conversionMap.get(staticSymbol);
                                    if (converter) {
                                        var /** @type {?} */ args = argExpressions
                                            .map(function (arg) { return simplifyInContext(context, arg, depth + 1, references); })
                                            .map(function (arg) { return shouldIgnore(arg) ? undefined : arg; });
                                        return converter(context, args);
                                    }
                                    else {
                                        // Determine if the function is one we can simplify.
                                        var /** @type {?} */ targetFunction = resolveReferenceValue(staticSymbol);
                                        return simplifyCall(staticSymbol, targetFunction, argExpressions);
                                    }
                                }
                                return IGNORE;
                            case 'error':
                                var /** @type {?} */ message = produceErrorMessage(expression);
                                if (expression['line']) {
                                    message =
                                        message + " (position " + (expression['line'] + 1) + ":" + (expression['character'] + 1) + " in the original .ts file)";
                                    self.reportError(positionalError(message, context.filePath, expression['line'], expression['character']), context);
                                }
                                else {
                                    self.reportError(new Error(message), context);
                                }
                                return IGNORE;
                            case 'ignore':
                                return expression;
                        }
                        return null;
                    }
                    return mapStringMap(expression, function (value, name) {
                        if (REFERENCE_SET.has(name)) {
                            if (name === USE_VALUE && PROVIDE in expression) {
                                // If this is a provider expression, check for special tokens that need the value
                                // during analysis.
                                var /** @type {?} */ provide = simplify(expression.provide);
                                if (provide === self.ROUTES || provide == self.ANALYZE_FOR_ENTRY_COMPONENTS) {
                                    return simplify(value);
                                }
                            }
                            return simplifyInContext(context, value, depth, references + 1);
                        }
                        return simplify(value);
                    });
                }
                return IGNORE;
            }
            try {
                return simplify(value);
            }
            catch (e) {
                var /** @type {?} */ members = context.members.length ? "." + context.members.join('.') : '';
                var /** @type {?} */ message = e.message + ", resolving symbol " + context.name + members + " in " + context.filePath;
                if (e.fileName) {
                    throw positionalError(message, e.fileName, e.line, e.column);
                }
                throw syntaxError(message);
            }
        }
        var /** @type {?} */ recordedSimplifyInContext = function (context, value) {
            try {
                return simplifyInContext(context, value, 0, 0);
            }
            catch (e) {
                _this.reportError(e, context);
            }
        };
        var /** @type {?} */ result = this.errorRecorder ? recordedSimplifyInContext(context, value) :
            simplifyInContext(context, value, 0, 0);
        if (shouldIgnore(result)) {
            return undefined;
        }
        return result;
    };
    /**
     * @param {?} type
     * @return {?}
     */
    StaticReflector.prototype.getTypeMetadata = function (type) {
        var /** @type {?} */ resolvedSymbol = this.symbolResolver.resolveSymbol(type);
        return resolvedSymbol && resolvedSymbol.metadata ? resolvedSymbol.metadata :
            { __symbolic: 'class' };
    };
    return StaticReflector;
}());
/**
 * @param {?} error
 * @return {?}
 */
function expandedMessage(error) {
    switch (error.message) {
        case 'Reference to non-exported class':
            if (error.context && error.context.className) {
                return "Reference to a non-exported class " + error.context.className + ". Consider exporting the class";
            }
            break;
        case 'Variable not initialized':
            return 'Only initialized variables and constants can be referenced because the value of this variable is needed by the template compiler';
        case 'Destructuring not supported':
            return 'Referencing an exported destructured variable or constant is not supported by the template compiler. Consider simplifying this to avoid destructuring';
        case 'Could not resolve type':
            if (error.context && error.context.typeName) {
                return "Could not resolve type " + error.context.typeName;
            }
            break;
        case 'Function call not supported':
            var /** @type {?} */ prefix = error.context && error.context.name ? "Calling function '" + error.context.name + "', f" : 'F';
            return prefix +
                'unction calls are not supported. Consider replacing the function or lambda with a reference to an exported function';
        case 'Reference to a local symbol':
            if (error.context && error.context.name) {
                return "Reference to a local (non-exported) symbol '" + error.context.name + "'. Consider exporting the symbol";
            }
            break;
    }
    return error.message;
}
/**
 * @param {?} error
 * @return {?}
 */
function produceErrorMessage(error) {
    return "Error encountered resolving symbol values statically. " + expandedMessage(error);
}
/**
 * @param {?} input
 * @param {?} transform
 * @return {?}
 */
function mapStringMap(input, transform) {
    if (!input)
        return {};
    var /** @type {?} */ result = {};
    Object.keys(input).forEach(function (key) {
        var /** @type {?} */ value = transform(input[key], key);
        if (!shouldIgnore(value)) {
            if (HIDDEN_KEY.test(key)) {
                Object.defineProperty(result, key, { enumerable: false, configurable: true, value: value });
            }
            else {
                result[key] = value;
            }
        }
    });
    return result;
}
/**
 * @param {?} o
 * @return {?}
 */
function isPrimitive(o) {
    return o === null || (typeof o !== 'function' && typeof o !== 'object');
}
/**
 * @abstract
 */
var BindingScope = (function () {
    function BindingScope() {
    }
    /**
     * @abstract
     * @param {?} name
     * @return {?}
     */
    BindingScope.prototype.resolve = function (name) { };
    /**
     * @return {?}
     */
    BindingScope.build = function () {
        var /** @type {?} */ current = new Map();
        return {
            define: function (name, value) {
                current.set(name, value);
                return this;
            },
            done: function () {
                return current.size > 0 ? new PopulatedScope(current) : BindingScope.empty;
            }
        };
    };
    return BindingScope;
}());
BindingScope.missing = {};
BindingScope.empty = { resolve: function (name) { return BindingScope.missing; } };
var PopulatedScope = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](PopulatedScope, _super);
    /**
     * @param {?} bindings
     */
    function PopulatedScope(bindings) {
        var _this = _super.call(this) || this;
        _this.bindings = bindings;
        return _this;
    }
    /**
     * @param {?} name
     * @return {?}
     */
    PopulatedScope.prototype.resolve = function (name) {
        return this.bindings.has(name) ? this.bindings.get(name) : BindingScope.missing;
    };
    return PopulatedScope;
}(BindingScope));
/**
 * @param {?} message
 * @param {?} fileName
 * @param {?} line
 * @param {?} column
 * @return {?}
 */
function positionalError(message, fileName, line, column) {
    var /** @type {?} */ result = new Error(message);
    ((result)).fileName = fileName;
    ((result)).line = line;
    ((result)).column = column;
    return result;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ResolvedStaticSymbol = (function () {
    /**
     * @param {?} symbol
     * @param {?} metadata
     */
    function ResolvedStaticSymbol(symbol, metadata) {
        this.symbol = symbol;
        this.metadata = metadata;
    }
    return ResolvedStaticSymbol;
}());
var SUPPORTED_SCHEMA_VERSION = 3;
/**
 * This class is responsible for loading metadata per symbol,
 * and normalizing references between symbols.
 *
 * Internally, it only uses symbols without members,
 * and deduces the values for symbols with members based
 * on these symbols.
 */
var StaticSymbolResolver = (function () {
    /**
     * @param {?} host
     * @param {?} staticSymbolCache
     * @param {?} summaryResolver
     * @param {?=} errorRecorder
     */
    function StaticSymbolResolver(host, staticSymbolCache, summaryResolver, errorRecorder) {
        this.host = host;
        this.staticSymbolCache = staticSymbolCache;
        this.summaryResolver = summaryResolver;
        this.errorRecorder = errorRecorder;
        this.metadataCache = new Map();
        this.resolvedSymbols = new Map();
        this.resolvedFilePaths = new Set();
        this.importAs = new Map();
        this.symbolResourcePaths = new Map();
        this.symbolFromFile = new Map();
        this.knownFileNameToModuleNames = new Map();
    }
    /**
     * @param {?} staticSymbol
     * @return {?}
     */
    StaticSymbolResolver.prototype.resolveSymbol = function (staticSymbol) {
        if (staticSymbol.members.length > 0) {
            return ((this._resolveSymbolMembers(staticSymbol)));
        }
        var /** @type {?} */ result = this.resolvedSymbols.get(staticSymbol);
        if (result) {
            return result;
        }
        result = ((this._resolveSymbolFromSummary(staticSymbol)));
        if (result) {
            return result;
        }
        // Note: Some users use libraries that were not compiled with ngc, i.e. they don't
        // have summaries, only .d.ts files. So we always need to check both, the summary
        // and metadata.
        this._createSymbolsOf(staticSymbol.filePath);
        result = ((this.resolvedSymbols.get(staticSymbol)));
        return result;
    };
    /**
     * getImportAs produces a symbol that can be used to import the given symbol.
     * The import might be different than the symbol if the symbol is exported from
     * a library with a summary; in which case we want to import the symbol from the
     * ngfactory re-export instead of directly to avoid introducing a direct dependency
     * on an otherwise indirect dependency.
     *
     * @param {?} staticSymbol the symbol for which to generate a import symbol
     * @return {?}
     */
    StaticSymbolResolver.prototype.getImportAs = function (staticSymbol) {
        if (staticSymbol.members.length) {
            var /** @type {?} */ baseSymbol = this.getStaticSymbol(staticSymbol.filePath, staticSymbol.name);
            var /** @type {?} */ baseImportAs = this.getImportAs(baseSymbol);
            return baseImportAs ?
                this.getStaticSymbol(baseImportAs.filePath, baseImportAs.name, staticSymbol.members) :
                null;
        }
        var /** @type {?} */ summarizedFileName = stripSummaryForJitFileSuffix(staticSymbol.filePath);
        if (summarizedFileName !== staticSymbol.filePath) {
            var /** @type {?} */ summarizedName = stripSummaryForJitNameSuffix(staticSymbol.name);
            var /** @type {?} */ baseSymbol = this.getStaticSymbol(summarizedFileName, summarizedName, staticSymbol.members);
            var /** @type {?} */ baseImportAs = this.getImportAs(baseSymbol);
            return baseImportAs ?
                this.getStaticSymbol(summaryForJitFileName(baseImportAs.filePath), summaryForJitName(baseImportAs.name), baseSymbol.members) :
                null;
        }
        var /** @type {?} */ result = this.summaryResolver.getImportAs(staticSymbol);
        if (!result) {
            result = ((this.importAs.get(staticSymbol)));
        }
        return result;
    };
    /**
     * getResourcePath produces the path to the original location of the symbol and should
     * be used to determine the relative location of resource references recorded in
     * symbol metadata.
     * @param {?} staticSymbol
     * @return {?}
     */
    StaticSymbolResolver.prototype.getResourcePath = function (staticSymbol) {
        return this.symbolResourcePaths.get(staticSymbol) || staticSymbol.filePath;
    };
    /**
     * getTypeArity returns the number of generic type parameters the given symbol
     * has. If the symbol is not a type the result is null.
     * @param {?} staticSymbol
     * @return {?}
     */
    StaticSymbolResolver.prototype.getTypeArity = function (staticSymbol) {
        // If the file is a factory/ngsummary file, don't resolve the symbol as doing so would
        // cause the metadata for an factory/ngsummary file to be loaded which doesn't exist.
        // All references to generated classes must include the correct arity whenever
        // generating code.
        if (isGeneratedFile(staticSymbol.filePath)) {
            return null;
        }
        var /** @type {?} */ resolvedSymbol = this.resolveSymbol(staticSymbol);
        while (resolvedSymbol && resolvedSymbol.metadata instanceof StaticSymbol) {
            resolvedSymbol = this.resolveSymbol(resolvedSymbol.metadata);
        }
        return (resolvedSymbol && resolvedSymbol.metadata && resolvedSymbol.metadata.arity) || null;
    };
    /**
     * Converts a file path to a module name that can be used as an `import`.
     * @param {?} importedFilePath
     * @param {?} containingFilePath
     * @return {?}
     */
    StaticSymbolResolver.prototype.fileNameToModuleName = function (importedFilePath, containingFilePath) {
        return this.knownFileNameToModuleNames.get(importedFilePath) ||
            this.host.fileNameToModuleName(importedFilePath, containingFilePath);
    };
    /**
     * @param {?} sourceSymbol
     * @param {?} targetSymbol
     * @return {?}
     */
    StaticSymbolResolver.prototype.recordImportAs = function (sourceSymbol, targetSymbol) {
        sourceSymbol.assertNoMembers();
        targetSymbol.assertNoMembers();
        this.importAs.set(sourceSymbol, targetSymbol);
    };
    /**
     * Invalidate all information derived from the given file.
     *
     * @param {?} fileName the file to invalidate
     * @return {?}
     */
    StaticSymbolResolver.prototype.invalidateFile = function (fileName) {
        this.metadataCache.delete(fileName);
        this.resolvedFilePaths.delete(fileName);
        var /** @type {?} */ symbols = this.symbolFromFile.get(fileName);
        if (symbols) {
            this.symbolFromFile.delete(fileName);
            for (var _i = 0, symbols_1 = symbols; _i < symbols_1.length; _i++) {
                var symbol = symbols_1[_i];
                this.resolvedSymbols.delete(symbol);
                this.importAs.delete(symbol);
                this.symbolResourcePaths.delete(symbol);
            }
        }
    };
    /**
     * @template T
     * @param {?} cb
     * @return {?}
     */
    StaticSymbolResolver.prototype.ignoreErrorsFor = function (cb) {
        var /** @type {?} */ recorder = this.errorRecorder;
        this.errorRecorder = function () { };
        try {
            return cb();
        }
        finally {
            this.errorRecorder = recorder;
        }
    };
    /**
     * @param {?} staticSymbol
     * @return {?}
     */
    StaticSymbolResolver.prototype._resolveSymbolMembers = function (staticSymbol) {
        var /** @type {?} */ members = staticSymbol.members;
        var /** @type {?} */ baseResolvedSymbol = this.resolveSymbol(this.getStaticSymbol(staticSymbol.filePath, staticSymbol.name));
        if (!baseResolvedSymbol) {
            return null;
        }
        var /** @type {?} */ baseMetadata = baseResolvedSymbol.metadata;
        if (baseMetadata instanceof StaticSymbol) {
            return new ResolvedStaticSymbol(staticSymbol, this.getStaticSymbol(baseMetadata.filePath, baseMetadata.name, members));
        }
        else if (baseMetadata && baseMetadata.__symbolic === 'class') {
            if (baseMetadata.statics && members.length === 1) {
                return new ResolvedStaticSymbol(staticSymbol, baseMetadata.statics[members[0]]);
            }
        }
        else {
            var /** @type {?} */ value = baseMetadata;
            for (var /** @type {?} */ i = 0; i < members.length && value; i++) {
                value = value[members[i]];
            }
            return new ResolvedStaticSymbol(staticSymbol, value);
        }
        return null;
    };
    /**
     * @param {?} staticSymbol
     * @return {?}
     */
    StaticSymbolResolver.prototype._resolveSymbolFromSummary = function (staticSymbol) {
        var /** @type {?} */ summary = this.summaryResolver.resolveSummary(staticSymbol);
        return summary ? new ResolvedStaticSymbol(staticSymbol, summary.metadata) : null;
    };
    /**
     * getStaticSymbol produces a Type whose metadata is known but whose implementation is not loaded.
     * All types passed to the StaticResolver should be pseudo-types returned by this method.
     *
     * @param {?} declarationFile the absolute path of the file where the symbol is declared
     * @param {?} name the name of the type.
     * @param {?=} members a symbol for a static member of the named type
     * @return {?}
     */
    StaticSymbolResolver.prototype.getStaticSymbol = function (declarationFile, name, members) {
        return this.staticSymbolCache.get(declarationFile, name, members);
    };
    /**
     * @param {?} filePath
     * @return {?}
     */
    StaticSymbolResolver.prototype.getSymbolsOf = function (filePath) {
        // Note: Some users use libraries that were not compiled with ngc, i.e. they don't
        // have summaries, only .d.ts files. So we always need to check both, the summary
        // and metadata.
        var /** @type {?} */ symbols = new Set(this.summaryResolver.getSymbolsOf(filePath));
        this._createSymbolsOf(filePath);
        this.resolvedSymbols.forEach(function (resolvedSymbol) {
            if (resolvedSymbol.symbol.filePath === filePath) {
                symbols.add(resolvedSymbol.symbol);
            }
        });
        return Array.from(symbols);
    };
    /**
     * @param {?} filePath
     * @return {?}
     */
    StaticSymbolResolver.prototype._createSymbolsOf = function (filePath) {
        var _this = this;
        if (this.resolvedFilePaths.has(filePath)) {
            return;
        }
        this.resolvedFilePaths.add(filePath);
        var /** @type {?} */ resolvedSymbols = [];
        var /** @type {?} */ metadata = this.getModuleMetadata(filePath);
        if (metadata['importAs']) {
            // Index bundle indices should use the importAs module name defined
            // in the bundle.
            this.knownFileNameToModuleNames.set(filePath, metadata['importAs']);
        }
        if (metadata['metadata']) {
            // handle direct declarations of the symbol
            var /** @type {?} */ topLevelSymbolNames_1 = new Set(Object.keys(metadata['metadata']).map(unescapeIdentifier));
            var /** @type {?} */ origins_1 = metadata['origins'] || {};
            Object.keys(metadata['metadata']).forEach(function (metadataKey) {
                var /** @type {?} */ symbolMeta = metadata['metadata'][metadataKey];
                var /** @type {?} */ name = unescapeIdentifier(metadataKey);
                var /** @type {?} */ symbol = _this.getStaticSymbol(filePath, name);
                var /** @type {?} */ origin = origins_1.hasOwnProperty(metadataKey) && origins_1[metadataKey];
                if (origin) {
                    // If the symbol is from a bundled index, use the declaration location of the
                    // symbol so relative references (such as './my.html') will be calculated
                    // correctly.
                    var /** @type {?} */ originFilePath = _this.resolveModule(origin, filePath);
                    if (!originFilePath) {
                        _this.reportError(new Error("Couldn't resolve original symbol for " + origin + " from " + filePath));
                    }
                    else {
                        _this.symbolResourcePaths.set(symbol, originFilePath);
                    }
                }
                resolvedSymbols.push(_this.createResolvedSymbol(symbol, filePath, topLevelSymbolNames_1, symbolMeta));
            });
        }
        // handle the symbols in one of the re-export location
        if (metadata['exports']) {
            var _loop_1 = function (moduleExport) {
                // handle the symbols in the list of explicitly re-exported symbols.
                if (moduleExport.export) {
                    moduleExport.export.forEach(function (exportSymbol) {
                        var /** @type {?} */ symbolName;
                        if (typeof exportSymbol === 'string') {
                            symbolName = exportSymbol;
                        }
                        else {
                            symbolName = exportSymbol.as;
                        }
                        symbolName = unescapeIdentifier(symbolName);
                        var /** @type {?} */ symName = symbolName;
                        if (typeof exportSymbol !== 'string') {
                            symName = unescapeIdentifier(exportSymbol.name);
                        }
                        var /** @type {?} */ resolvedModule = _this.resolveModule(moduleExport.from, filePath);
                        if (resolvedModule) {
                            var /** @type {?} */ targetSymbol = _this.getStaticSymbol(resolvedModule, symName);
                            var /** @type {?} */ sourceSymbol = _this.getStaticSymbol(filePath, symbolName);
                            resolvedSymbols.push(_this.createExport(sourceSymbol, targetSymbol));
                        }
                    });
                }
                else {
                    // handle the symbols via export * directives.
                    var /** @type {?} */ resolvedModule = this_1.resolveModule(moduleExport.from, filePath);
                    if (resolvedModule) {
                        var /** @type {?} */ nestedExports = this_1.getSymbolsOf(resolvedModule);
                        nestedExports.forEach(function (targetSymbol) {
                            var /** @type {?} */ sourceSymbol = _this.getStaticSymbol(filePath, targetSymbol.name);
                            resolvedSymbols.push(_this.createExport(sourceSymbol, targetSymbol));
                        });
                    }
                }
            };
            var this_1 = this;
            for (var _i = 0, _a = metadata['exports']; _i < _a.length; _i++) {
                var moduleExport = _a[_i];
                _loop_1(/** @type {?} */ moduleExport);
            }
        }
        resolvedSymbols.forEach(function (resolvedSymbol) { return _this.resolvedSymbols.set(resolvedSymbol.symbol, resolvedSymbol); });
        this.symbolFromFile.set(filePath, resolvedSymbols.map(function (resolvedSymbol) { return resolvedSymbol.symbol; }));
    };
    /**
     * @param {?} sourceSymbol
     * @param {?} topLevelPath
     * @param {?} topLevelSymbolNames
     * @param {?} metadata
     * @return {?}
     */
    StaticSymbolResolver.prototype.createResolvedSymbol = function (sourceSymbol, topLevelPath, topLevelSymbolNames, metadata) {
        // For classes that don't have Angular summaries / metadata,
        // we only keep their arity, but nothing else
        // (e.g. their constructor parameters).
        // We do this to prevent introducing deep imports
        // as we didn't generate .ngfactory.ts files with proper reexports.
        if (this.summaryResolver.isLibraryFile(sourceSymbol.filePath) && metadata &&
            metadata['__symbolic'] === 'class') {
            var /** @type {?} */ transformedMeta_1 = { __symbolic: 'class', arity: metadata.arity };
            return new ResolvedStaticSymbol(sourceSymbol, transformedMeta_1);
        }
        var /** @type {?} */ self = this;
        var ReferenceTransformer = (function (_super) {
            __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ReferenceTransformer, _super);
            function ReferenceTransformer() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            /**
             * @param {?} map
             * @param {?} functionParams
             * @return {?}
             */
            ReferenceTransformer.prototype.visitStringMap = function (map, functionParams) {
                var /** @type {?} */ symbolic = map['__symbolic'];
                if (symbolic === 'function') {
                    var /** @type {?} */ oldLen = functionParams.length;
                    functionParams.push.apply(functionParams, (map['parameters'] || []));
                    var /** @type {?} */ result = _super.prototype.visitStringMap.call(this, map, functionParams);
                    functionParams.length = oldLen;
                    return result;
                }
                else if (symbolic === 'reference') {
                    var /** @type {?} */ module_1 = map['module'];
                    var /** @type {?} */ name = map['name'] ? unescapeIdentifier(map['name']) : map['name'];
                    if (!name) {
                        return null;
                    }
                    var /** @type {?} */ filePath = void 0;
                    if (module_1) {
                        filePath = ((self.resolveModule(module_1, sourceSymbol.filePath)));
                        if (!filePath) {
                            return {
                                __symbolic: 'error',
                                message: "Could not resolve " + module_1 + " relative to " + sourceSymbol.filePath + "."
                            };
                        }
                        return self.getStaticSymbol(filePath, name);
                    }
                    else if (functionParams.indexOf(name) >= 0) {
                        // reference to a function parameter
                        return { __symbolic: 'reference', name: name };
                    }
                    else {
                        if (topLevelSymbolNames.has(name)) {
                            return self.getStaticSymbol(topLevelPath, name);
                        }
                        // ambient value
                        null;
                    }
                }
                else {
                    return _super.prototype.visitStringMap.call(this, map, functionParams);
                }
            };
            return ReferenceTransformer;
        }(ValueTransformer));
        var /** @type {?} */ transformedMeta = visitValue(metadata, new ReferenceTransformer(), []);
        if (transformedMeta instanceof StaticSymbol) {
            return this.createExport(sourceSymbol, transformedMeta);
        }
        return new ResolvedStaticSymbol(sourceSymbol, transformedMeta);
    };
    /**
     * @param {?} sourceSymbol
     * @param {?} targetSymbol
     * @return {?}
     */
    StaticSymbolResolver.prototype.createExport = function (sourceSymbol, targetSymbol) {
        sourceSymbol.assertNoMembers();
        targetSymbol.assertNoMembers();
        if (this.summaryResolver.isLibraryFile(sourceSymbol.filePath)) {
            // This case is for an ng library importing symbols from a plain ts library
            // transitively.
            // Note: We rely on the fact that we discover symbols in the direction
            // from source files to library files
            this.importAs.set(targetSymbol, this.getImportAs(sourceSymbol) || sourceSymbol);
        }
        return new ResolvedStaticSymbol(sourceSymbol, targetSymbol);
    };
    /**
     * @param {?} error
     * @param {?=} context
     * @param {?=} path
     * @return {?}
     */
    StaticSymbolResolver.prototype.reportError = function (error, context, path) {
        if (this.errorRecorder) {
            this.errorRecorder(error, (context && context.filePath) || path);
        }
        else {
            throw error;
        }
    };
    /**
     * @param {?} module an absolute path to a module file.
     * @return {?}
     */
    StaticSymbolResolver.prototype.getModuleMetadata = function (module) {
        var /** @type {?} */ moduleMetadata = this.metadataCache.get(module);
        if (!moduleMetadata) {
            var /** @type {?} */ moduleMetadatas = this.host.getMetadataFor(module);
            if (moduleMetadatas) {
                var /** @type {?} */ maxVersion_1 = -1;
                moduleMetadatas.forEach(function (md) {
                    if (md['version'] > maxVersion_1) {
                        maxVersion_1 = md['version'];
                        moduleMetadata = md;
                    }
                });
            }
            if (!moduleMetadata) {
                moduleMetadata =
                    { __symbolic: 'module', version: SUPPORTED_SCHEMA_VERSION, module: module, metadata: {} };
            }
            if (moduleMetadata['version'] != SUPPORTED_SCHEMA_VERSION) {
                var /** @type {?} */ errorMessage = moduleMetadata['version'] == 2 ?
                    "Unsupported metadata version " + moduleMetadata['version'] + " for module " + module + ". This module should be compiled with a newer version of ngc" :
                    "Metadata version mismatch for module " + module + ", found version " + moduleMetadata['version'] + ", expected " + SUPPORTED_SCHEMA_VERSION;
                this.reportError(new Error(errorMessage));
            }
            this.metadataCache.set(module, moduleMetadata);
        }
        return moduleMetadata;
    };
    /**
     * @param {?} module
     * @param {?} symbolName
     * @param {?=} containingFile
     * @return {?}
     */
    StaticSymbolResolver.prototype.getSymbolByModule = function (module, symbolName, containingFile) {
        var /** @type {?} */ filePath = this.resolveModule(module, containingFile);
        if (!filePath) {
            this.reportError(new Error("Could not resolve module " + module + (containingFile ? " relative to $ {\n            containingFile\n          } " : '')));
            return this.getStaticSymbol("ERROR:" + module, symbolName);
        }
        return this.getStaticSymbol(filePath, symbolName);
    };
    /**
     * @param {?} module
     * @param {?=} containingFile
     * @return {?}
     */
    StaticSymbolResolver.prototype.resolveModule = function (module, containingFile) {
        try {
            return this.host.moduleNameToFileName(module, containingFile);
        }
        catch (e) {
            console.error("Could not resolve module '" + module + "' relative to file " + containingFile);
            this.reportError(e, undefined, containingFile);
        }
        return null;
    };
    return StaticSymbolResolver;
}());
/**
 * @param {?} identifier
 * @return {?}
 */
function unescapeIdentifier(identifier) {
    return identifier.startsWith('___') ? identifier.substr(1) : identifier;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var AotSummaryResolver = (function () {
    /**
     * @param {?} host
     * @param {?} staticSymbolCache
     */
    function AotSummaryResolver(host, staticSymbolCache) {
        this.host = host;
        this.staticSymbolCache = staticSymbolCache;
        this.summaryCache = new Map();
        this.loadedFilePaths = new Set();
        this.importAs = new Map();
    }
    /**
     * @param {?} filePath
     * @return {?}
     */
    AotSummaryResolver.prototype.isLibraryFile = function (filePath) {
        // Note: We need to strip the .ngfactory. file path,
        // so this method also works for generated files
        // (for which host.isSourceFile will always return false).
        return !this.host.isSourceFile(stripGeneratedFileSuffix(filePath));
    };
    /**
     * @param {?} filePath
     * @return {?}
     */
    AotSummaryResolver.prototype.getLibraryFileName = function (filePath) { return this.host.getOutputFileName(filePath); };
    /**
     * @param {?} staticSymbol
     * @return {?}
     */
    AotSummaryResolver.prototype.resolveSummary = function (staticSymbol) {
        staticSymbol.assertNoMembers();
        var /** @type {?} */ summary = this.summaryCache.get(staticSymbol);
        if (!summary) {
            this._loadSummaryFile(staticSymbol.filePath);
            summary = ((this.summaryCache.get(staticSymbol)));
        }
        return summary;
    };
    /**
     * @param {?} filePath
     * @return {?}
     */
    AotSummaryResolver.prototype.getSymbolsOf = function (filePath) {
        this._loadSummaryFile(filePath);
        return Array.from(this.summaryCache.keys()).filter(function (symbol) { return symbol.filePath === filePath; });
    };
    /**
     * @param {?} staticSymbol
     * @return {?}
     */
    AotSummaryResolver.prototype.getImportAs = function (staticSymbol) {
        staticSymbol.assertNoMembers();
        return ((this.importAs.get(staticSymbol)));
    };
    /**
     * @param {?} summary
     * @return {?}
     */
    AotSummaryResolver.prototype.addSummary = function (summary) { this.summaryCache.set(summary.symbol, summary); };
    /**
     * @param {?} filePath
     * @return {?}
     */
    AotSummaryResolver.prototype._loadSummaryFile = function (filePath) {
        var _this = this;
        if (this.loadedFilePaths.has(filePath)) {
            return;
        }
        this.loadedFilePaths.add(filePath);
        if (this.isLibraryFile(filePath)) {
            var /** @type {?} */ summaryFilePath = summaryFileName(filePath);
            var /** @type {?} */ json = void 0;
            try {
                json = this.host.loadSummary(summaryFilePath);
            }
            catch (e) {
                console.error("Error loading summary file " + summaryFilePath);
                throw e;
            }
            if (json) {
                var _a = deserializeSummaries(this.staticSymbolCache, json), summaries = _a.summaries, importAs = _a.importAs;
                summaries.forEach(function (summary) { return _this.summaryCache.set(summary.symbol, summary); });
                importAs.forEach(function (importAs) {
                    _this.importAs.set(importAs.symbol, _this.staticSymbolCache.get(ngfactoryFilePath(filePath), importAs.importAs));
                });
            }
        }
    };
    return AotSummaryResolver;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Creates a new AotCompiler based on options and a host.
 * @param {?} compilerHost
 * @param {?} options
 * @return {?}
 */
function createAotCompiler(compilerHost, options) {
    var /** @type {?} */ translations = options.translations || '';
    var /** @type {?} */ urlResolver = createOfflineCompileUrlResolver();
    var /** @type {?} */ symbolCache = new StaticSymbolCache();
    var /** @type {?} */ summaryResolver = new AotSummaryResolver(compilerHost, symbolCache);
    var /** @type {?} */ symbolResolver = new StaticSymbolResolver(compilerHost, symbolCache, summaryResolver);
    var /** @type {?} */ staticReflector = new StaticReflector(summaryResolver, symbolResolver);
    var /** @type {?} */ console = new __WEBPACK_IMPORTED_MODULE_1__angular_core__["_33" /* Console */]();
    var /** @type {?} */ htmlParser = new I18NHtmlParser(new HtmlParser(), translations, options.i18nFormat, options.missingTranslation, console);
    var /** @type {?} */ config = new CompilerConfig({
        defaultEncapsulation: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_15" /* ViewEncapsulation */].Emulated,
        useJit: false,
        enableLegacyTemplate: options.enableLegacyTemplate !== false,
        missingTranslation: options.missingTranslation,
        preserveWhitespaces: options.preserveWhitespaces,
    });
    var /** @type {?} */ normalizer = new DirectiveNormalizer({ get: function (url) { return compilerHost.loadResource(url); } }, urlResolver, htmlParser, config);
    var /** @type {?} */ expressionParser = new Parser(new Lexer());
    var /** @type {?} */ elementSchemaRegistry = new DomElementSchemaRegistry();
    var /** @type {?} */ tmplParser = new TemplateParser(config, staticReflector, expressionParser, elementSchemaRegistry, htmlParser, console, []);
    var /** @type {?} */ resolver = new CompileMetadataResolver(config, new NgModuleResolver(staticReflector), new DirectiveResolver(staticReflector), new PipeResolver(staticReflector), summaryResolver, elementSchemaRegistry, normalizer, console, symbolCache, staticReflector);
    // TODO(vicb): do not pass options.i18nFormat here
    var /** @type {?} */ viewCompiler = new ViewCompiler(staticReflector);
    var /** @type {?} */ compiler = new AotCompiler(config, compilerHost, staticReflector, resolver, tmplParser, new StyleCompiler(urlResolver), viewCompiler, new NgModuleCompiler(staticReflector), new TypeScriptEmitter(), summaryResolver, options.locale || null, options.i18nFormat || null, options.enableSummariesForJit || null, symbolResolver);
    return { compiler: compiler, reflector: staticReflector };
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} statements
 * @return {?}
 */
function interpretStatements(statements) {
    var /** @type {?} */ ctx = new _ExecutionContext(null, null, null, new Map());
    var /** @type {?} */ visitor = new StatementInterpreter();
    visitor.visitAllStatements(statements, ctx);
    var /** @type {?} */ result = {};
    ctx.exports.forEach(function (exportName) { result[exportName] = ctx.vars.get(exportName); });
    return result;
}
/**
 * @param {?} varNames
 * @param {?} varValues
 * @param {?} statements
 * @param {?} ctx
 * @param {?} visitor
 * @return {?}
 */
function _executeFunctionStatements(varNames, varValues, statements, ctx, visitor) {
    var /** @type {?} */ childCtx = ctx.createChildWihtLocalVars();
    for (var /** @type {?} */ i = 0; i < varNames.length; i++) {
        childCtx.vars.set(varNames[i], varValues[i]);
    }
    var /** @type {?} */ result = visitor.visitAllStatements(statements, childCtx);
    return result ? result.value : null;
}
var _ExecutionContext = (function () {
    /**
     * @param {?} parent
     * @param {?} instance
     * @param {?} className
     * @param {?} vars
     */
    function _ExecutionContext(parent, instance, className, vars) {
        this.parent = parent;
        this.instance = instance;
        this.className = className;
        this.vars = vars;
        this.exports = [];
    }
    /**
     * @return {?}
     */
    _ExecutionContext.prototype.createChildWihtLocalVars = function () {
        return new _ExecutionContext(this, this.instance, this.className, new Map());
    };
    return _ExecutionContext;
}());
var ReturnValue = (function () {
    /**
     * @param {?} value
     */
    function ReturnValue(value) {
        this.value = value;
    }
    return ReturnValue;
}());
/**
 * @param {?} _classStmt
 * @param {?} _ctx
 * @param {?} _visitor
 * @return {?}
 */
function createDynamicClass(_classStmt, _ctx, _visitor) {
    var /** @type {?} */ propertyDescriptors = {};
    _classStmt.getters.forEach(function (getter) {
        // Note: use `function` instead of arrow function to capture `this`
        propertyDescriptors[getter.name] = {
            configurable: false,
            get: function () {
                var /** @type {?} */ instanceCtx = new _ExecutionContext(_ctx, this, _classStmt.name, _ctx.vars);
                return _executeFunctionStatements([], [], getter.body, instanceCtx, _visitor);
            }
        };
    });
    _classStmt.methods.forEach(function (method) {
        var /** @type {?} */ paramNames = method.params.map(function (param) { return param.name; });
        // Note: use `function` instead of arrow function to capture `this`
        propertyDescriptors[((method.name))] = {
            writable: false,
            configurable: false,
            value: function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                var /** @type {?} */ instanceCtx = new _ExecutionContext(_ctx, this, _classStmt.name, _ctx.vars);
                return _executeFunctionStatements(paramNames, args, method.body, instanceCtx, _visitor);
            }
        };
    });
    var /** @type {?} */ ctorParamNames = _classStmt.constructorMethod.params.map(function (param) { return param.name; });
    // Note: use `function` instead of arrow function to capture `this`
    var /** @type {?} */ ctor = function () {
        var _this = this;
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        var /** @type {?} */ instanceCtx = new _ExecutionContext(_ctx, this, _classStmt.name, _ctx.vars);
        _classStmt.fields.forEach(function (field) { _this[field.name] = undefined; });
        _executeFunctionStatements(ctorParamNames, args, _classStmt.constructorMethod.body, instanceCtx, _visitor);
    };
    var /** @type {?} */ superClass = _classStmt.parent ? _classStmt.parent.visitExpression(_visitor, _ctx) : Object;
    ctor.prototype = Object.create(superClass.prototype, propertyDescriptors);
    return ctor;
}
var StatementInterpreter = (function () {
    function StatementInterpreter() {
    }
    /**
     * @param {?} ast
     * @return {?}
     */
    StatementInterpreter.prototype.debugAst = function (ast) { return debugOutputAstAsTypeScript(ast); };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitDeclareVarStmt = function (stmt, ctx) {
        ctx.vars.set(stmt.name, stmt.value.visitExpression(this, ctx));
        if (stmt.hasModifier(StmtModifier.Exported)) {
            ctx.exports.push(stmt.name);
        }
        return null;
    };
    /**
     * @param {?} expr
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitWriteVarExpr = function (expr, ctx) {
        var /** @type {?} */ value = expr.value.visitExpression(this, ctx);
        var /** @type {?} */ currCtx = ctx;
        while (currCtx != null) {
            if (currCtx.vars.has(expr.name)) {
                currCtx.vars.set(expr.name, value);
                return value;
            }
            currCtx = ((currCtx.parent));
        }
        throw new Error("Not declared variable " + expr.name);
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitReadVarExpr = function (ast, ctx) {
        var /** @type {?} */ varName = ((ast.name));
        if (ast.builtin != null) {
            switch (ast.builtin) {
                case BuiltinVar.Super:
                    return ctx.instance.__proto__;
                case BuiltinVar.This:
                    return ctx.instance;
                case BuiltinVar.CatchError:
                    varName = CATCH_ERROR_VAR$2;
                    break;
                case BuiltinVar.CatchStack:
                    varName = CATCH_STACK_VAR$2;
                    break;
                default:
                    throw new Error("Unknown builtin variable " + ast.builtin);
            }
        }
        var /** @type {?} */ currCtx = ctx;
        while (currCtx != null) {
            if (currCtx.vars.has(varName)) {
                return currCtx.vars.get(varName);
            }
            currCtx = ((currCtx.parent));
        }
        throw new Error("Not declared variable " + varName);
    };
    /**
     * @param {?} expr
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitWriteKeyExpr = function (expr, ctx) {
        var /** @type {?} */ receiver = expr.receiver.visitExpression(this, ctx);
        var /** @type {?} */ index = expr.index.visitExpression(this, ctx);
        var /** @type {?} */ value = expr.value.visitExpression(this, ctx);
        receiver[index] = value;
        return value;
    };
    /**
     * @param {?} expr
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitWritePropExpr = function (expr, ctx) {
        var /** @type {?} */ receiver = expr.receiver.visitExpression(this, ctx);
        var /** @type {?} */ value = expr.value.visitExpression(this, ctx);
        receiver[expr.name] = value;
        return value;
    };
    /**
     * @param {?} expr
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitInvokeMethodExpr = function (expr, ctx) {
        var /** @type {?} */ receiver = expr.receiver.visitExpression(this, ctx);
        var /** @type {?} */ args = this.visitAllExpressions(expr.args, ctx);
        var /** @type {?} */ result;
        if (expr.builtin != null) {
            switch (expr.builtin) {
                case BuiltinMethod.ConcatArray:
                    result = receiver.concat.apply(receiver, args);
                    break;
                case BuiltinMethod.SubscribeObservable:
                    result = receiver.subscribe({ next: args[0] });
                    break;
                case BuiltinMethod.Bind:
                    result = receiver.bind.apply(receiver, args);
                    break;
                default:
                    throw new Error("Unknown builtin method " + expr.builtin);
            }
        }
        else {
            result = receiver[((expr.name))].apply(receiver, args);
        }
        return result;
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitInvokeFunctionExpr = function (stmt, ctx) {
        var /** @type {?} */ args = this.visitAllExpressions(stmt.args, ctx);
        var /** @type {?} */ fnExpr = stmt.fn;
        if (fnExpr instanceof ReadVarExpr && fnExpr.builtin === BuiltinVar.Super) {
            ctx.instance.constructor.prototype.constructor.apply(ctx.instance, args);
            return null;
        }
        else {
            var /** @type {?} */ fn$$1 = stmt.fn.visitExpression(this, ctx);
            return fn$$1.apply(null, args);
        }
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitReturnStmt = function (stmt, ctx) {
        return new ReturnValue(stmt.value.visitExpression(this, ctx));
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitDeclareClassStmt = function (stmt, ctx) {
        var /** @type {?} */ clazz = createDynamicClass(stmt, ctx, this);
        ctx.vars.set(stmt.name, clazz);
        if (stmt.hasModifier(StmtModifier.Exported)) {
            ctx.exports.push(stmt.name);
        }
        return null;
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitExpressionStmt = function (stmt, ctx) {
        return stmt.expr.visitExpression(this, ctx);
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitIfStmt = function (stmt, ctx) {
        var /** @type {?} */ condition = stmt.condition.visitExpression(this, ctx);
        if (condition) {
            return this.visitAllStatements(stmt.trueCase, ctx);
        }
        else if (stmt.falseCase != null) {
            return this.visitAllStatements(stmt.falseCase, ctx);
        }
        return null;
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitTryCatchStmt = function (stmt, ctx) {
        try {
            return this.visitAllStatements(stmt.bodyStmts, ctx);
        }
        catch (e) {
            var /** @type {?} */ childCtx = ctx.createChildWihtLocalVars();
            childCtx.vars.set(CATCH_ERROR_VAR$2, e);
            childCtx.vars.set(CATCH_STACK_VAR$2, e.stack);
            return this.visitAllStatements(stmt.catchStmts, childCtx);
        }
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitThrowStmt = function (stmt, ctx) {
        throw stmt.error.visitExpression(this, ctx);
    };
    /**
     * @param {?} stmt
     * @param {?=} context
     * @return {?}
     */
    StatementInterpreter.prototype.visitCommentStmt = function (stmt, context) { return null; };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitInstantiateExpr = function (ast, ctx) {
        var /** @type {?} */ args = this.visitAllExpressions(ast.args, ctx);
        var /** @type {?} */ clazz = ast.classExpr.visitExpression(this, ctx);
        return new (clazz.bind.apply(clazz, [void 0].concat(args)))();
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitLiteralExpr = function (ast, ctx) { return ast.value; };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitExternalExpr = function (ast, ctx) { return ast.value.runtime; };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitConditionalExpr = function (ast, ctx) {
        if (ast.condition.visitExpression(this, ctx)) {
            return ast.trueCase.visitExpression(this, ctx);
        }
        else if (ast.falseCase != null) {
            return ast.falseCase.visitExpression(this, ctx);
        }
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitNotExpr = function (ast, ctx) {
        return !ast.condition.visitExpression(this, ctx);
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitAssertNotNullExpr = function (ast, ctx) {
        return ast.condition.visitExpression(this, ctx);
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitCastExpr = function (ast, ctx) {
        return ast.value.visitExpression(this, ctx);
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitFunctionExpr = function (ast, ctx) {
        var /** @type {?} */ paramNames = ast.params.map(function (param) { return param.name; });
        return _declareFn(paramNames, ast.statements, ctx, this);
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitDeclareFunctionStmt = function (stmt, ctx) {
        var /** @type {?} */ paramNames = stmt.params.map(function (param) { return param.name; });
        ctx.vars.set(stmt.name, _declareFn(paramNames, stmt.statements, ctx, this));
        if (stmt.hasModifier(StmtModifier.Exported)) {
            ctx.exports.push(stmt.name);
        }
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitBinaryOperatorExpr = function (ast, ctx) {
        var _this = this;
        var /** @type {?} */ lhs = function () { return ast.lhs.visitExpression(_this, ctx); };
        var /** @type {?} */ rhs = function () { return ast.rhs.visitExpression(_this, ctx); };
        switch (ast.operator) {
            case BinaryOperator.Equals:
                return lhs() == rhs();
            case BinaryOperator.Identical:
                return lhs() === rhs();
            case BinaryOperator.NotEquals:
                return lhs() != rhs();
            case BinaryOperator.NotIdentical:
                return lhs() !== rhs();
            case BinaryOperator.And:
                return lhs() && rhs();
            case BinaryOperator.Or:
                return lhs() || rhs();
            case BinaryOperator.Plus:
                return lhs() + rhs();
            case BinaryOperator.Minus:
                return lhs() - rhs();
            case BinaryOperator.Divide:
                return lhs() / rhs();
            case BinaryOperator.Multiply:
                return lhs() * rhs();
            case BinaryOperator.Modulo:
                return lhs() % rhs();
            case BinaryOperator.Lower:
                return lhs() < rhs();
            case BinaryOperator.LowerEquals:
                return lhs() <= rhs();
            case BinaryOperator.Bigger:
                return lhs() > rhs();
            case BinaryOperator.BiggerEquals:
                return lhs() >= rhs();
            default:
                throw new Error("Unknown operator " + ast.operator);
        }
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitReadPropExpr = function (ast, ctx) {
        var /** @type {?} */ result;
        var /** @type {?} */ receiver = ast.receiver.visitExpression(this, ctx);
        result = receiver[ast.name];
        return result;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitReadKeyExpr = function (ast, ctx) {
        var /** @type {?} */ receiver = ast.receiver.visitExpression(this, ctx);
        var /** @type {?} */ prop = ast.index.visitExpression(this, ctx);
        return receiver[prop];
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitLiteralArrayExpr = function (ast, ctx) {
        return this.visitAllExpressions(ast.entries, ctx);
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitLiteralMapExpr = function (ast, ctx) {
        var _this = this;
        var /** @type {?} */ result = {};
        ast.entries.forEach(function (entry) { return result[entry.key] = entry.value.visitExpression(_this, ctx); });
        return result;
    };
    /**
     * @param {?} ast
     * @param {?} context
     * @return {?}
     */
    StatementInterpreter.prototype.visitCommaExpr = function (ast, context) {
        var /** @type {?} */ values = this.visitAllExpressions(ast.parts, context);
        return values[values.length - 1];
    };
    /**
     * @param {?} expressions
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitAllExpressions = function (expressions, ctx) {
        var _this = this;
        return expressions.map(function (expr) { return expr.visitExpression(_this, ctx); });
    };
    /**
     * @param {?} statements
     * @param {?} ctx
     * @return {?}
     */
    StatementInterpreter.prototype.visitAllStatements = function (statements, ctx) {
        for (var /** @type {?} */ i = 0; i < statements.length; i++) {
            var /** @type {?} */ stmt = statements[i];
            var /** @type {?} */ val = stmt.visitStatement(this, ctx);
            if (val instanceof ReturnValue) {
                return val;
            }
        }
        return null;
    };
    return StatementInterpreter;
}());
/**
 * @param {?} varNames
 * @param {?} statements
 * @param {?} ctx
 * @param {?} visitor
 * @return {?}
 */
function _declareFn(varNames, statements, ctx, visitor) {
    return function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        return _executeFunctionStatements(varNames, args, statements, ctx, visitor);
    };
}
var CATCH_ERROR_VAR$2 = 'error';
var CATCH_STACK_VAR$2 = 'stack';
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @abstract
 */
var AbstractJsEmitterVisitor = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](AbstractJsEmitterVisitor, _super);
    function AbstractJsEmitterVisitor() {
        return _super.call(this, false) || this;
    }
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    AbstractJsEmitterVisitor.prototype.visitDeclareClassStmt = function (stmt, ctx) {
        var _this = this;
        ctx.pushClass(stmt);
        this._visitClassConstructor(stmt, ctx);
        if (stmt.parent != null) {
            ctx.print(stmt, stmt.name + ".prototype = Object.create(");
            stmt.parent.visitExpression(this, ctx);
            ctx.println(stmt, ".prototype);");
        }
        stmt.getters.forEach(function (getter) { return _this._visitClassGetter(stmt, getter, ctx); });
        stmt.methods.forEach(function (method) { return _this._visitClassMethod(stmt, method, ctx); });
        ctx.popClass();
        return null;
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    AbstractJsEmitterVisitor.prototype._visitClassConstructor = function (stmt, ctx) {
        ctx.print(stmt, "function " + stmt.name + "(");
        if (stmt.constructorMethod != null) {
            this._visitParams(stmt.constructorMethod.params, ctx);
        }
        ctx.println(stmt, ") {");
        ctx.incIndent();
        if (stmt.constructorMethod != null) {
            if (stmt.constructorMethod.body.length > 0) {
                ctx.println(stmt, "var self = this;");
                this.visitAllStatements(stmt.constructorMethod.body, ctx);
            }
        }
        ctx.decIndent();
        ctx.println(stmt, "}");
    };
    /**
     * @param {?} stmt
     * @param {?} getter
     * @param {?} ctx
     * @return {?}
     */
    AbstractJsEmitterVisitor.prototype._visitClassGetter = function (stmt, getter, ctx) {
        ctx.println(stmt, "Object.defineProperty(" + stmt.name + ".prototype, '" + getter.name + "', { get: function() {");
        ctx.incIndent();
        if (getter.body.length > 0) {
            ctx.println(stmt, "var self = this;");
            this.visitAllStatements(getter.body, ctx);
        }
        ctx.decIndent();
        ctx.println(stmt, "}});");
    };
    /**
     * @param {?} stmt
     * @param {?} method
     * @param {?} ctx
     * @return {?}
     */
    AbstractJsEmitterVisitor.prototype._visitClassMethod = function (stmt, method, ctx) {
        ctx.print(stmt, stmt.name + ".prototype." + method.name + " = function(");
        this._visitParams(method.params, ctx);
        ctx.println(stmt, ") {");
        ctx.incIndent();
        if (method.body.length > 0) {
            ctx.println(stmt, "var self = this;");
            this.visitAllStatements(method.body, ctx);
        }
        ctx.decIndent();
        ctx.println(stmt, "};");
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractJsEmitterVisitor.prototype.visitReadVarExpr = function (ast, ctx) {
        if (ast.builtin === BuiltinVar.This) {
            ctx.print(ast, 'self');
        }
        else if (ast.builtin === BuiltinVar.Super) {
            throw new Error("'super' needs to be handled at a parent ast node, not at the variable level!");
        }
        else {
            _super.prototype.visitReadVarExpr.call(this, ast, ctx);
        }
        return null;
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    AbstractJsEmitterVisitor.prototype.visitDeclareVarStmt = function (stmt, ctx) {
        ctx.print(stmt, "var " + stmt.name + " = ");
        stmt.value.visitExpression(this, ctx);
        ctx.println(stmt, ";");
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractJsEmitterVisitor.prototype.visitCastExpr = function (ast, ctx) {
        ast.value.visitExpression(this, ctx);
        return null;
    };
    /**
     * @param {?} expr
     * @param {?} ctx
     * @return {?}
     */
    AbstractJsEmitterVisitor.prototype.visitInvokeFunctionExpr = function (expr, ctx) {
        var /** @type {?} */ fnExpr = expr.fn;
        if (fnExpr instanceof ReadVarExpr && fnExpr.builtin === BuiltinVar.Super) {
            ((((ctx.currentClass)).parent)).visitExpression(this, ctx);
            ctx.print(expr, ".call(this");
            if (expr.args.length > 0) {
                ctx.print(expr, ", ");
                this.visitAllExpressions(expr.args, ctx, ',');
            }
            ctx.print(expr, ")");
        }
        else {
            _super.prototype.visitInvokeFunctionExpr.call(this, expr, ctx);
        }
        return null;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    AbstractJsEmitterVisitor.prototype.visitFunctionExpr = function (ast, ctx) {
        ctx.print(ast, "function(");
        this._visitParams(ast.params, ctx);
        ctx.println(ast, ") {");
        ctx.incIndent();
        this.visitAllStatements(ast.statements, ctx);
        ctx.decIndent();
        ctx.print(ast, "}");
        return null;
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    AbstractJsEmitterVisitor.prototype.visitDeclareFunctionStmt = function (stmt, ctx) {
        ctx.print(stmt, "function " + stmt.name + "(");
        this._visitParams(stmt.params, ctx);
        ctx.println(stmt, ") {");
        ctx.incIndent();
        this.visitAllStatements(stmt.statements, ctx);
        ctx.decIndent();
        ctx.println(stmt, "}");
        return null;
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    AbstractJsEmitterVisitor.prototype.visitTryCatchStmt = function (stmt, ctx) {
        ctx.println(stmt, "try {");
        ctx.incIndent();
        this.visitAllStatements(stmt.bodyStmts, ctx);
        ctx.decIndent();
        ctx.println(stmt, "} catch (" + CATCH_ERROR_VAR$1.name + ") {");
        ctx.incIndent();
        var /** @type {?} */ catchStmts = [/** @type {?} */ (CATCH_STACK_VAR$1.set(CATCH_ERROR_VAR$1.prop('stack')).toDeclStmt(null, [
                StmtModifier.Final
            ]))].concat(stmt.catchStmts);
        this.visitAllStatements(catchStmts, ctx);
        ctx.decIndent();
        ctx.println(stmt, "}");
        return null;
    };
    /**
     * @param {?} params
     * @param {?} ctx
     * @return {?}
     */
    AbstractJsEmitterVisitor.prototype._visitParams = function (params, ctx) {
        this.visitAllObjects(function (param) { return ctx.print(null, param.name); }, params, ctx, ',');
    };
    /**
     * @param {?} method
     * @return {?}
     */
    AbstractJsEmitterVisitor.prototype.getBuiltinMethodName = function (method) {
        var /** @type {?} */ name;
        switch (method) {
            case BuiltinMethod.ConcatArray:
                name = 'concat';
                break;
            case BuiltinMethod.SubscribeObservable:
                name = 'subscribe';
                break;
            case BuiltinMethod.Bind:
                name = 'bind';
                break;
            default:
                throw new Error("Unknown builtin method: " + method);
        }
        return name;
    };
    return AbstractJsEmitterVisitor;
}(AbstractEmitterVisitor));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} sourceUrl
 * @param {?} ctx
 * @param {?} vars
 * @return {?}
 */
function evalExpression(sourceUrl$$1, ctx, vars) {
    var /** @type {?} */ fnBody = ctx.toSource() + "\n//# sourceURL=" + sourceUrl$$1;
    var /** @type {?} */ fnArgNames = [];
    var /** @type {?} */ fnArgValues = [];
    for (var /** @type {?} */ argName in vars) {
        fnArgNames.push(argName);
        fnArgValues.push(vars[argName]);
    }
    if (Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_22" /* isDevMode */])()) {
        // using `new Function(...)` generates a header, 1 line of no arguments, 2 lines otherwise
        // E.g. ```
        // function anonymous(a,b,c
        // /**/) { ... }```
        // We don't want to hard code this fact, so we auto detect it via an empty function first.
        var /** @type {?} */ emptyFn = new (Function.bind.apply(Function, [void 0].concat(fnArgNames.concat('return null;'))))().toString();
        var /** @type {?} */ headerLines = emptyFn.slice(0, emptyFn.indexOf('return null;')).split('\n').length - 1;
        fnBody += "\n" + ctx.toSourceMapGenerator(sourceUrl$$1, sourceUrl$$1, headerLines).toJsComment();
    }
    return new (Function.bind.apply(Function, [void 0].concat(fnArgNames.concat(fnBody))))().apply(void 0, fnArgValues);
}
/**
 * @param {?} sourceUrl
 * @param {?} statements
 * @return {?}
 */
function jitStatements(sourceUrl$$1, statements) {
    var /** @type {?} */ converter = new JitEmitterVisitor();
    var /** @type {?} */ ctx = EmitterVisitorContext.createRoot();
    converter.visitAllStatements(statements, ctx);
    converter.createReturnStmt(ctx);
    return evalExpression(sourceUrl$$1, ctx, converter.getArgs());
}
var JitEmitterVisitor = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](JitEmitterVisitor, _super);
    function JitEmitterVisitor() {
        var _this = _super.apply(this, arguments) || this;
        _this._evalArgNames = [];
        _this._evalArgValues = [];
        _this._evalExportedVars = [];
        return _this;
    }
    /**
     * @param {?} ctx
     * @return {?}
     */
    JitEmitterVisitor.prototype.createReturnStmt = function (ctx) {
        var /** @type {?} */ stmt = new ReturnStatement(new LiteralMapExpr(this._evalExportedVars.map(function (resultVar) { return new LiteralMapEntry(resultVar, variable(resultVar), false); })));
        stmt.visitStatement(this, ctx);
    };
    /**
     * @return {?}
     */
    JitEmitterVisitor.prototype.getArgs = function () {
        var /** @type {?} */ result = {};
        for (var /** @type {?} */ i = 0; i < this._evalArgNames.length; i++) {
            result[this._evalArgNames[i]] = this._evalArgValues[i];
        }
        return result;
    };
    /**
     * @param {?} ast
     * @param {?} ctx
     * @return {?}
     */
    JitEmitterVisitor.prototype.visitExternalExpr = function (ast, ctx) {
        var /** @type {?} */ value = ast.value.runtime;
        var /** @type {?} */ id = this._evalArgValues.indexOf(value);
        if (id === -1) {
            id = this._evalArgValues.length;
            this._evalArgValues.push(value);
            var /** @type {?} */ name = identifierName({ reference: ast.value.runtime }) || 'val';
            this._evalArgNames.push("jit_" + name + "_" + id);
        }
        ctx.print(ast, this._evalArgNames[id]);
        return null;
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    JitEmitterVisitor.prototype.visitDeclareVarStmt = function (stmt, ctx) {
        if (stmt.hasModifier(StmtModifier.Exported)) {
            this._evalExportedVars.push(stmt.name);
        }
        return _super.prototype.visitDeclareVarStmt.call(this, stmt, ctx);
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    JitEmitterVisitor.prototype.visitDeclareFunctionStmt = function (stmt, ctx) {
        if (stmt.hasModifier(StmtModifier.Exported)) {
            this._evalExportedVars.push(stmt.name);
        }
        return _super.prototype.visitDeclareFunctionStmt.call(this, stmt, ctx);
    };
    /**
     * @param {?} stmt
     * @param {?} ctx
     * @return {?}
     */
    JitEmitterVisitor.prototype.visitDeclareClassStmt = function (stmt, ctx) {
        if (stmt.hasModifier(StmtModifier.Exported)) {
            this._evalExportedVars.push(stmt.name);
        }
        return _super.prototype.visitDeclareClassStmt.call(this, stmt, ctx);
    };
    return JitEmitterVisitor;
}(AbstractJsEmitterVisitor));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * An internal module of the Angular compiler that begins with component types,
 * extracts templates, and eventually produces a compiled version of the component
 * ready for linking into an application.
 *
 * \@security When compiling templates at runtime, you must ensure that the entire template comes
 * from a trusted source. Attacker-controlled data introduced by a template could expose your
 * application to XSS risks.  For more detail, see the [Security Guide](http://g.co/ng/security).
 */
var JitCompiler = (function () {
    /**
     * @param {?} _injector
     * @param {?} _metadataResolver
     * @param {?} _templateParser
     * @param {?} _styleCompiler
     * @param {?} _viewCompiler
     * @param {?} _ngModuleCompiler
     * @param {?} _summaryResolver
     * @param {?} _compilerConfig
     * @param {?} _console
     */
    function JitCompiler(_injector, _metadataResolver, _templateParser, _styleCompiler, _viewCompiler, _ngModuleCompiler, _summaryResolver, _compilerConfig, _console) {
        this._injector = _injector;
        this._metadataResolver = _metadataResolver;
        this._templateParser = _templateParser;
        this._styleCompiler = _styleCompiler;
        this._viewCompiler = _viewCompiler;
        this._ngModuleCompiler = _ngModuleCompiler;
        this._summaryResolver = _summaryResolver;
        this._compilerConfig = _compilerConfig;
        this._console = _console;
        this._compiledTemplateCache = new Map();
        this._compiledHostTemplateCache = new Map();
        this._compiledDirectiveWrapperCache = new Map();
        this._compiledNgModuleCache = new Map();
        this._sharedStylesheetCount = 0;
    }
    Object.defineProperty(JitCompiler.prototype, "injector", {
        /**
         * @return {?}
         */
        get: function () { return this._injector; },
        enumerable: true,
        configurable: true
    });
    /**
     * @template T
     * @param {?} moduleType
     * @return {?}
     */
    JitCompiler.prototype.compileModuleSync = function (moduleType) {
        return SyncAsync.assertSync(this._compileModuleAndComponents(moduleType, true));
    };
    /**
     * @template T
     * @param {?} moduleType
     * @return {?}
     */
    JitCompiler.prototype.compileModuleAsync = function (moduleType) {
        return Promise.resolve(this._compileModuleAndComponents(moduleType, false));
    };
    /**
     * @template T
     * @param {?} moduleType
     * @return {?}
     */
    JitCompiler.prototype.compileModuleAndAllComponentsSync = function (moduleType) {
        return SyncAsync.assertSync(this._compileModuleAndAllComponents(moduleType, true));
    };
    /**
     * @template T
     * @param {?} moduleType
     * @return {?}
     */
    JitCompiler.prototype.compileModuleAndAllComponentsAsync = function (moduleType) {
        return Promise.resolve(this._compileModuleAndAllComponents(moduleType, false));
    };
    /**
     * @param {?} component
     * @return {?}
     */
    JitCompiler.prototype.getNgContentSelectors = function (component) {
        this._console.warn('Compiler.getNgContentSelectors is deprecated. Use ComponentFactory.ngContentSelectors instead!');
        var /** @type {?} */ template = this._compiledTemplateCache.get(component);
        if (!template) {
            throw new Error("The component " + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(component) + " is not yet compiled!");
        }
        return ((template.compMeta.template)).ngContentSelectors;
    };
    /**
     * @template T
     * @param {?} component
     * @return {?}
     */
    JitCompiler.prototype.getComponentFactory = function (component) {
        var /** @type {?} */ summary = this._metadataResolver.getDirectiveSummary(component);
        return (summary.componentFactory);
    };
    /**
     * @param {?} summaries
     * @return {?}
     */
    JitCompiler.prototype.loadAotSummaries = function (summaries) {
        var _this = this;
        this.clearCache();
        flattenSummaries(summaries).forEach(function (summary) {
            _this._summaryResolver.addSummary({ symbol: summary.type.reference, metadata: null, type: summary });
        });
    };
    /**
     * @param {?} ref
     * @return {?}
     */
    JitCompiler.prototype.hasAotSummary = function (ref) { return !!this._summaryResolver.resolveSummary(ref); };
    /**
     * @param {?} ids
     * @return {?}
     */
    JitCompiler.prototype._filterJitIdentifiers = function (ids) {
        var _this = this;
        return ids.map(function (mod) { return mod.reference; }).filter(function (ref) { return !_this.hasAotSummary(ref); });
    };
    /**
     * @template T
     * @param {?} moduleType
     * @param {?} isSync
     * @return {?}
     */
    JitCompiler.prototype._compileModuleAndComponents = function (moduleType, isSync) {
        var _this = this;
        return SyncAsync.then(this._loadModules(moduleType, isSync), function () {
            _this._compileComponents(moduleType, null);
            return _this._compileModule(moduleType);
        });
    };
    /**
     * @template T
     * @param {?} moduleType
     * @param {?} isSync
     * @return {?}
     */
    JitCompiler.prototype._compileModuleAndAllComponents = function (moduleType, isSync) {
        var _this = this;
        return SyncAsync.then(this._loadModules(moduleType, isSync), function () {
            var /** @type {?} */ componentFactories = [];
            _this._compileComponents(moduleType, componentFactories);
            return new __WEBPACK_IMPORTED_MODULE_1__angular_core__["J" /* ModuleWithComponentFactories */](_this._compileModule(moduleType), componentFactories);
        });
    };
    /**
     * @param {?} mainModule
     * @param {?} isSync
     * @return {?}
     */
    JitCompiler.prototype._loadModules = function (mainModule, isSync) {
        var _this = this;
        var /** @type {?} */ loading = [];
        var /** @type {?} */ mainNgModule = ((this._metadataResolver.getNgModuleMetadata(mainModule)));
        // Note: for runtime compilation, we want to transitively compile all modules,
        // so we also need to load the declared directives / pipes for all nested modules.
        this._filterJitIdentifiers(mainNgModule.transitiveModule.modules).forEach(function (nestedNgModule) {
            // getNgModuleMetadata only returns null if the value passed in is not an NgModule
            var /** @type {?} */ moduleMeta = ((_this._metadataResolver.getNgModuleMetadata(nestedNgModule)));
            _this._filterJitIdentifiers(moduleMeta.declaredDirectives).forEach(function (ref) {
                var /** @type {?} */ promise = _this._metadataResolver.loadDirectiveMetadata(moduleMeta.type.reference, ref, isSync);
                if (promise) {
                    loading.push(promise);
                }
            });
            _this._filterJitIdentifiers(moduleMeta.declaredPipes)
                .forEach(function (ref) { return _this._metadataResolver.getOrLoadPipeMetadata(ref); });
        });
        return SyncAsync.all(loading);
    };
    /**
     * @template T
     * @param {?} moduleType
     * @return {?}
     */
    JitCompiler.prototype._compileModule = function (moduleType) {
        var _this = this;
        var /** @type {?} */ ngModuleFactory = ((this._compiledNgModuleCache.get(moduleType)));
        if (!ngModuleFactory) {
            var /** @type {?} */ moduleMeta_1 = ((this._metadataResolver.getNgModuleMetadata(moduleType)));
            // Always provide a bound Compiler
            var /** @type {?} */ extraProviders = [this._metadataResolver.getProviderMetadata(new ProviderMeta(__WEBPACK_IMPORTED_MODULE_1__angular_core__["l" /* Compiler */], { useFactory: function () { return new ModuleBoundCompiler(_this, moduleMeta_1.type.reference); } }))];
            var /** @type {?} */ outputCtx = createOutputContext();
            var /** @type {?} */ compileResult = this._ngModuleCompiler.compile(outputCtx, moduleMeta_1, extraProviders);
            if (!this._compilerConfig.useJit) {
                ngModuleFactory =
                    interpretStatements(outputCtx.statements)[compileResult.ngModuleFactoryVar];
            }
            else {
                ngModuleFactory = jitStatements(ngModuleJitUrl(moduleMeta_1), outputCtx.statements)[compileResult.ngModuleFactoryVar];
            }
            this._compiledNgModuleCache.set(moduleMeta_1.type.reference, ngModuleFactory);
        }
        return ngModuleFactory;
    };
    /**
     * \@internal
     * @param {?} mainModule
     * @param {?} allComponentFactories
     * @return {?}
     */
    JitCompiler.prototype._compileComponents = function (mainModule, allComponentFactories) {
        var _this = this;
        var /** @type {?} */ ngModule = ((this._metadataResolver.getNgModuleMetadata(mainModule)));
        var /** @type {?} */ moduleByJitDirective = new Map();
        var /** @type {?} */ templates = new Set();
        var /** @type {?} */ transJitModules = this._filterJitIdentifiers(ngModule.transitiveModule.modules);
        transJitModules.forEach(function (localMod) {
            var /** @type {?} */ localModuleMeta = ((_this._metadataResolver.getNgModuleMetadata(localMod)));
            _this._filterJitIdentifiers(localModuleMeta.declaredDirectives).forEach(function (dirRef) {
                moduleByJitDirective.set(dirRef, localModuleMeta);
                var /** @type {?} */ dirMeta = _this._metadataResolver.getDirectiveMetadata(dirRef);
                if (dirMeta.isComponent) {
                    templates.add(_this._createCompiledTemplate(dirMeta, localModuleMeta));
                    if (allComponentFactories) {
                        var /** @type {?} */ template = _this._createCompiledHostTemplate(dirMeta.type.reference, localModuleMeta);
                        templates.add(template);
                        allComponentFactories.push(/** @type {?} */ (dirMeta.componentFactory));
                    }
                }
            });
        });
        transJitModules.forEach(function (localMod) {
            var /** @type {?} */ localModuleMeta = ((_this._metadataResolver.getNgModuleMetadata(localMod)));
            _this._filterJitIdentifiers(localModuleMeta.declaredDirectives).forEach(function (dirRef) {
                var /** @type {?} */ dirMeta = _this._metadataResolver.getDirectiveMetadata(dirRef);
                if (dirMeta.isComponent) {
                    dirMeta.entryComponents.forEach(function (entryComponentType) {
                        var /** @type {?} */ moduleMeta = ((moduleByJitDirective.get(entryComponentType.componentType)));
                        templates.add(_this._createCompiledHostTemplate(entryComponentType.componentType, moduleMeta));
                    });
                }
            });
            localModuleMeta.entryComponents.forEach(function (entryComponentType) {
                if (!_this.hasAotSummary(entryComponentType.componentType.reference)) {
                    var /** @type {?} */ moduleMeta = ((moduleByJitDirective.get(entryComponentType.componentType)));
                    templates.add(_this._createCompiledHostTemplate(entryComponentType.componentType, moduleMeta));
                }
            });
        });
        templates.forEach(function (template) { return _this._compileTemplate(template); });
    };
    /**
     * @param {?} type
     * @return {?}
     */
    JitCompiler.prototype.clearCacheFor = function (type) {
        this._compiledNgModuleCache.delete(type);
        this._metadataResolver.clearCacheFor(type);
        this._compiledHostTemplateCache.delete(type);
        var /** @type {?} */ compiledTemplate = this._compiledTemplateCache.get(type);
        if (compiledTemplate) {
            this._compiledTemplateCache.delete(type);
        }
    };
    /**
     * @return {?}
     */
    JitCompiler.prototype.clearCache = function () {
        this._metadataResolver.clearCache();
        this._compiledTemplateCache.clear();
        this._compiledHostTemplateCache.clear();
        this._compiledNgModuleCache.clear();
    };
    /**
     * @param {?} compType
     * @param {?} ngModule
     * @return {?}
     */
    JitCompiler.prototype._createCompiledHostTemplate = function (compType, ngModule) {
        if (!ngModule) {
            throw new Error("Component " + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(compType) + " is not part of any NgModule or the module has not been imported into your module.");
        }
        var /** @type {?} */ compiledTemplate = this._compiledHostTemplateCache.get(compType);
        if (!compiledTemplate) {
            var /** @type {?} */ compMeta = this._metadataResolver.getDirectiveMetadata(compType);
            assertComponent(compMeta);
            var /** @type {?} */ componentFactory = (compMeta.componentFactory);
            var /** @type {?} */ hostClass = this._metadataResolver.getHostComponentType(compType);
            var /** @type {?} */ hostMeta = createHostComponentMeta(hostClass, compMeta, /** @type {?} */ (Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_45" /* getComponentViewDefinitionFactory */])(componentFactory)));
            compiledTemplate =
                new CompiledTemplate(true, compMeta.type, hostMeta, ngModule, [compMeta.type]);
            this._compiledHostTemplateCache.set(compType, compiledTemplate);
        }
        return compiledTemplate;
    };
    /**
     * @param {?} compMeta
     * @param {?} ngModule
     * @return {?}
     */
    JitCompiler.prototype._createCompiledTemplate = function (compMeta, ngModule) {
        var /** @type {?} */ compiledTemplate = this._compiledTemplateCache.get(compMeta.type.reference);
        if (!compiledTemplate) {
            assertComponent(compMeta);
            compiledTemplate = new CompiledTemplate(false, compMeta.type, compMeta, ngModule, ngModule.transitiveModule.directives);
            this._compiledTemplateCache.set(compMeta.type.reference, compiledTemplate);
        }
        return compiledTemplate;
    };
    /**
     * @param {?} template
     * @return {?}
     */
    JitCompiler.prototype._compileTemplate = function (template) {
        var _this = this;
        if (template.isCompiled) {
            return;
        }
        var /** @type {?} */ compMeta = template.compMeta;
        var /** @type {?} */ externalStylesheetsByModuleUrl = new Map();
        var /** @type {?} */ outputContext = createOutputContext();
        var /** @type {?} */ componentStylesheet = this._styleCompiler.compileComponent(outputContext, compMeta);
        var /** @type {?} */ preserveWhitespaces = ((((compMeta)).template)).preserveWhitespaces; /** @type {?} */
        ((compMeta.template)).externalStylesheets.forEach(function (stylesheetMeta) {
            var /** @type {?} */ compiledStylesheet = _this._styleCompiler.compileStyles(createOutputContext(), compMeta, stylesheetMeta);
            externalStylesheetsByModuleUrl.set(/** @type {?} */ ((stylesheetMeta.moduleUrl)), compiledStylesheet);
        });
        this._resolveStylesCompileResult(componentStylesheet, externalStylesheetsByModuleUrl);
        var /** @type {?} */ directives = template.directives.map(function (dir) { return _this._metadataResolver.getDirectiveSummary(dir.reference); });
        var /** @type {?} */ pipes = template.ngModule.transitiveModule.pipes.map(function (pipe) { return _this._metadataResolver.getPipeSummary(pipe.reference); });
        var _a = this._templateParser.parse(compMeta, /** @type {?} */ ((((compMeta.template)).template)), directives, pipes, template.ngModule.schemas, templateSourceUrl(template.ngModule.type, template.compMeta, /** @type {?} */ ((template.compMeta.template))), preserveWhitespaces), parsedTemplate = _a.template, usedPipes = _a.pipes;
        var /** @type {?} */ compileResult = this._viewCompiler.compileComponent(outputContext, compMeta, parsedTemplate, variable(componentStylesheet.stylesVar), usedPipes);
        var /** @type {?} */ evalResult;
        if (!this._compilerConfig.useJit) {
            evalResult = interpretStatements(outputContext.statements);
        }
        else {
            evalResult = jitStatements(templateJitUrl(template.ngModule.type, template.compMeta), outputContext.statements);
        }
        var /** @type {?} */ viewClass = evalResult[compileResult.viewClassVar];
        var /** @type {?} */ rendererType = evalResult[compileResult.rendererTypeVar];
        template.compiled(viewClass, rendererType);
    };
    /**
     * @param {?} result
     * @param {?} externalStylesheetsByModuleUrl
     * @return {?}
     */
    JitCompiler.prototype._resolveStylesCompileResult = function (result, externalStylesheetsByModuleUrl) {
        var _this = this;
        result.dependencies.forEach(function (dep, i) {
            var /** @type {?} */ nestedCompileResult = ((externalStylesheetsByModuleUrl.get(dep.moduleUrl)));
            var /** @type {?} */ nestedStylesArr = _this._resolveAndEvalStylesCompileResult(nestedCompileResult, externalStylesheetsByModuleUrl);
            dep.setValue(nestedStylesArr);
        });
    };
    /**
     * @param {?} result
     * @param {?} externalStylesheetsByModuleUrl
     * @return {?}
     */
    JitCompiler.prototype._resolveAndEvalStylesCompileResult = function (result, externalStylesheetsByModuleUrl) {
        this._resolveStylesCompileResult(result, externalStylesheetsByModuleUrl);
        if (!this._compilerConfig.useJit) {
            return interpretStatements(result.outputCtx.statements)[result.stylesVar];
        }
        else {
            return jitStatements(sharedStylesheetJitUrl(result.meta, this._sharedStylesheetCount++), result.outputCtx.statements)[result.stylesVar];
        }
    };
    return JitCompiler;
}());
JitCompiler.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
JitCompiler.ctorParameters = function () { return [
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["D" /* Injector */], },
    { type: CompileMetadataResolver, },
    { type: TemplateParser, },
    { type: StyleCompiler, },
    { type: ViewCompiler, },
    { type: NgModuleCompiler, },
    { type: SummaryResolver, },
    { type: CompilerConfig, },
    { type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_33" /* Console */], },
]; };
var CompiledTemplate = (function () {
    /**
     * @param {?} isHost
     * @param {?} compType
     * @param {?} compMeta
     * @param {?} ngModule
     * @param {?} directives
     */
    function CompiledTemplate(isHost, compType, compMeta, ngModule, directives) {
        this.isHost = isHost;
        this.compType = compType;
        this.compMeta = compMeta;
        this.ngModule = ngModule;
        this.directives = directives;
        this._viewClass = ((null));
        this.isCompiled = false;
    }
    /**
     * @param {?} viewClass
     * @param {?} rendererType
     * @return {?}
     */
    CompiledTemplate.prototype.compiled = function (viewClass, rendererType) {
        this._viewClass = viewClass;
        ((this.compMeta.componentViewType)).setDelegate(viewClass);
        for (var /** @type {?} */ prop in rendererType) {
            ((this.compMeta.rendererType))[prop] = rendererType[prop];
        }
        this.isCompiled = true;
    };
    return CompiledTemplate;
}());
/**
 * @param {?} meta
 * @return {?}
 */
function assertComponent(meta) {
    if (!meta.isComponent) {
        throw new Error("Could not compile '" + identifierName(meta.type) + "' because it is not a component.");
    }
}
/**
 * Implements `Compiler` by delegating to the JitCompiler using a known module.
 */
var ModuleBoundCompiler = (function () {
    /**
     * @param {?} _delegate
     * @param {?} _ngModule
     */
    function ModuleBoundCompiler(_delegate, _ngModule) {
        this._delegate = _delegate;
        this._ngModule = _ngModule;
    }
    Object.defineProperty(ModuleBoundCompiler.prototype, "_injector", {
        /**
         * @return {?}
         */
        get: function () { return this._delegate.injector; },
        enumerable: true,
        configurable: true
    });
    /**
     * @template T
     * @param {?} moduleType
     * @return {?}
     */
    ModuleBoundCompiler.prototype.compileModuleSync = function (moduleType) {
        return this._delegate.compileModuleSync(moduleType);
    };
    /**
     * @template T
     * @param {?} moduleType
     * @return {?}
     */
    ModuleBoundCompiler.prototype.compileModuleAsync = function (moduleType) {
        return this._delegate.compileModuleAsync(moduleType);
    };
    /**
     * @template T
     * @param {?} moduleType
     * @return {?}
     */
    ModuleBoundCompiler.prototype.compileModuleAndAllComponentsSync = function (moduleType) {
        return this._delegate.compileModuleAndAllComponentsSync(moduleType);
    };
    /**
     * @template T
     * @param {?} moduleType
     * @return {?}
     */
    ModuleBoundCompiler.prototype.compileModuleAndAllComponentsAsync = function (moduleType) {
        return this._delegate.compileModuleAndAllComponentsAsync(moduleType);
    };
    /**
     * @param {?} component
     * @return {?}
     */
    ModuleBoundCompiler.prototype.getNgContentSelectors = function (component) {
        return this._delegate.getNgContentSelectors(component);
    };
    /**
     * Clears all caches
     * @return {?}
     */
    ModuleBoundCompiler.prototype.clearCache = function () { this._delegate.clearCache(); };
    /**
     * Clears the cache for the given component/ngModule.
     * @param {?} type
     * @return {?}
     */
    ModuleBoundCompiler.prototype.clearCacheFor = function (type) { this._delegate.clearCacheFor(type); };
    return ModuleBoundCompiler;
}());
/**
 * @param {?} fn
 * @param {?=} out
 * @return {?}
 */
function flattenSummaries(fn$$1, out) {
    if (out === void 0) { out = []; }
    fn$$1().forEach(function (entry) {
        if (typeof entry === 'function') {
            flattenSummaries(entry, out);
        }
        else {
            out.push(entry);
        }
    });
    return out;
}
/**
 * @return {?}
 */
function createOutputContext() {
    var /** @type {?} */ importExpr$$1 = function (symbol) { return importExpr({ name: identifierName(symbol), moduleName: null, runtime: symbol }); };
    return { statements: [], genFilePath: '', importExpr: importExpr$$1 };
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A container for message extracted from the templates.
 */
var MessageBundle = (function () {
    /**
     * @param {?} _htmlParser
     * @param {?} _implicitTags
     * @param {?} _implicitAttrs
     * @param {?=} _locale
     */
    function MessageBundle(_htmlParser, _implicitTags, _implicitAttrs, _locale) {
        if (_locale === void 0) { _locale = null; }
        this._htmlParser = _htmlParser;
        this._implicitTags = _implicitTags;
        this._implicitAttrs = _implicitAttrs;
        this._locale = _locale;
        this._messages = [];
    }
    /**
     * @param {?} html
     * @param {?} url
     * @param {?} interpolationConfig
     * @return {?}
     */
    MessageBundle.prototype.updateFromTemplate = function (html, url, interpolationConfig) {
        var /** @type {?} */ htmlParserResult = this._htmlParser.parse(html, url, true, interpolationConfig);
        if (htmlParserResult.errors.length) {
            return htmlParserResult.errors;
        }
        var /** @type {?} */ i18nParserResult = extractMessages(htmlParserResult.rootNodes, interpolationConfig, this._implicitTags, this._implicitAttrs);
        if (i18nParserResult.errors.length) {
            return i18nParserResult.errors;
        }
        (_a = this._messages).push.apply(_a, i18nParserResult.messages);
        return [];
        var _a;
    };
    /**
     * @return {?}
     */
    MessageBundle.prototype.getMessages = function () { return this._messages; };
    /**
     * @param {?} serializer
     * @param {?=} filterSources
     * @return {?}
     */
    MessageBundle.prototype.write = function (serializer, filterSources) {
        var /** @type {?} */ messages = {};
        var /** @type {?} */ mapperVisitor = new MapPlaceholderNames();
        // Deduplicate messages based on their ID
        this._messages.forEach(function (message) {
            var /** @type {?} */ id = serializer.digest(message);
            if (!messages.hasOwnProperty(id)) {
                messages[id] = message;
            }
            else {
                (_a = messages[id].sources).push.apply(_a, message.sources);
            }
            var _a;
        });
        // Transform placeholder names using the serializer mapping
        var /** @type {?} */ msgList = Object.keys(messages).map(function (id) {
            var /** @type {?} */ mapper = serializer.createNameMapper(messages[id]);
            var /** @type {?} */ src = messages[id];
            var /** @type {?} */ nodes = mapper ? mapperVisitor.convert(src.nodes, mapper) : src.nodes;
            var /** @type {?} */ transformedMessage = new Message(nodes, {}, {}, src.meaning, src.description, id);
            transformedMessage.sources = src.sources;
            if (filterSources) {
                transformedMessage.sources.forEach(function (source) { return source.filePath = filterSources(source.filePath); });
            }
            return transformedMessage;
        });
        return serializer.write(msgList, this._locale);
    };
    return MessageBundle;
}());
var MapPlaceholderNames = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](MapPlaceholderNames, _super);
    function MapPlaceholderNames() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @param {?} nodes
     * @param {?} mapper
     * @return {?}
     */
    MapPlaceholderNames.prototype.convert = function (nodes, mapper) {
        var _this = this;
        return mapper ? nodes.map(function (n) { return n.visit(_this, mapper); }) : nodes;
    };
    /**
     * @param {?} ph
     * @param {?} mapper
     * @return {?}
     */
    MapPlaceholderNames.prototype.visitTagPlaceholder = function (ph, mapper) {
        var _this = this;
        var /** @type {?} */ startName = ((mapper.toPublicName(ph.startName)));
        var /** @type {?} */ closeName = ph.closeName ? ((mapper.toPublicName(ph.closeName))) : ph.closeName;
        var /** @type {?} */ children = ph.children.map(function (n) { return n.visit(_this, mapper); });
        return new TagPlaceholder(ph.tag, ph.attrs, startName, closeName, children, ph.isVoid, ph.sourceSpan);
    };
    /**
     * @param {?} ph
     * @param {?} mapper
     * @return {?}
     */
    MapPlaceholderNames.prototype.visitPlaceholder = function (ph, mapper) {
        return new Placeholder(ph.value, /** @type {?} */ ((mapper.toPublicName(ph.name))), ph.sourceSpan);
    };
    /**
     * @param {?} ph
     * @param {?} mapper
     * @return {?}
     */
    MapPlaceholderNames.prototype.visitIcuPlaceholder = function (ph, mapper) {
        return new IcuPlaceholder(ph.value, /** @type {?} */ ((mapper.toPublicName(ph.name))), ph.sourceSpan);
    };
    return MapPlaceholderNames;
}(CloneVisitor));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Extract i18n messages from source code
 */
var Extractor = (function () {
    /**
     * @param {?} host
     * @param {?} staticSymbolResolver
     * @param {?} messageBundle
     * @param {?} metadataResolver
     */
    function Extractor(host, staticSymbolResolver, messageBundle, metadataResolver) {
        this.host = host;
        this.staticSymbolResolver = staticSymbolResolver;
        this.messageBundle = messageBundle;
        this.metadataResolver = metadataResolver;
    }
    /**
     * @param {?} rootFiles
     * @return {?}
     */
    Extractor.prototype.extract = function (rootFiles) {
        var _this = this;
        var /** @type {?} */ programSymbols = extractProgramSymbols(this.staticSymbolResolver, rootFiles, this.host);
        var _a = analyzeAndValidateNgModules(programSymbols, this.host, this.metadataResolver), files = _a.files, ngModules = _a.ngModules;
        return Promise
            .all(ngModules.map(function (ngModule) { return _this.metadataResolver.loadNgModuleDirectiveAndPipeMetadata(ngModule.type.reference, false); }))
            .then(function () {
            var /** @type {?} */ errors = [];
            files.forEach(function (file) {
                var /** @type {?} */ compMetas = [];
                file.directives.forEach(function (directiveType) {
                    var /** @type {?} */ dirMeta = _this.metadataResolver.getDirectiveMetadata(directiveType);
                    if (dirMeta && dirMeta.isComponent) {
                        compMetas.push(dirMeta);
                    }
                });
                compMetas.forEach(function (compMeta) {
                    var /** @type {?} */ html = ((((compMeta.template)).template));
                    var /** @type {?} */ interpolationConfig = InterpolationConfig.fromArray(/** @type {?} */ ((compMeta.template)).interpolation);
                    errors.push.apply(errors, ((_this.messageBundle.updateFromTemplate(html, file.srcUrl, interpolationConfig))));
                });
            });
            if (errors.length) {
                throw new Error(errors.map(function (e) { return e.toString(); }).join('\n'));
            }
            return _this.messageBundle;
        });
    };
    /**
     * @param {?} host
     * @param {?} locale
     * @return {?}
     */
    Extractor.create = function (host, locale) {
        var /** @type {?} */ htmlParser = new HtmlParser();
        var /** @type {?} */ urlResolver = createOfflineCompileUrlResolver();
        var /** @type {?} */ symbolCache = new StaticSymbolCache();
        var /** @type {?} */ summaryResolver = new AotSummaryResolver(host, symbolCache);
        var /** @type {?} */ staticSymbolResolver = new StaticSymbolResolver(host, symbolCache, summaryResolver);
        var /** @type {?} */ staticReflector = new StaticReflector(summaryResolver, staticSymbolResolver);
        var /** @type {?} */ config = new CompilerConfig({ defaultEncapsulation: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_15" /* ViewEncapsulation */].Emulated, useJit: false });
        var /** @type {?} */ normalizer = new DirectiveNormalizer({ get: function (url) { return host.loadResource(url); } }, urlResolver, htmlParser, config);
        var /** @type {?} */ elementSchemaRegistry = new DomElementSchemaRegistry();
        var /** @type {?} */ resolver = new CompileMetadataResolver(config, new NgModuleResolver(staticReflector), new DirectiveResolver(staticReflector), new PipeResolver(staticReflector), summaryResolver, elementSchemaRegistry, normalizer, new __WEBPACK_IMPORTED_MODULE_1__angular_core__["_33" /* Console */](), symbolCache, staticReflector);
        // TODO(vicb): implicit tags & attributes
        var /** @type {?} */ messageBundle = new MessageBundle(htmlParser, [], {}, locale);
        var /** @type {?} */ extractor = new Extractor(host, staticSymbolResolver, messageBundle, resolver);
        return { extractor: extractor, staticReflector: staticReflector };
    };
    return Extractor;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var JitReflector = (function () {
    function JitReflector() {
        this.reflectionCapabilities = new __WEBPACK_IMPORTED_MODULE_1__angular_core__["_37" /* ReflectionCapabilities */]();
    }
    /**
     * @param {?} type
     * @param {?} cmpMetadata
     * @return {?}
     */
    JitReflector.prototype.componentModuleUrl = function (type, cmpMetadata) {
        var /** @type {?} */ moduleId = cmpMetadata.moduleId;
        if (typeof moduleId === 'string') {
            var /** @type {?} */ scheme = getUrlScheme(moduleId);
            return scheme ? moduleId : "package:" + moduleId + MODULE_SUFFIX;
        }
        else if (moduleId !== null && moduleId !== void 0) {
            throw syntaxError("moduleId should be a string in \"" + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(type) + "\". See https://goo.gl/wIDDiL for more information.\n" +
                "If you're using Webpack you should inline the template and the styles, see https://goo.gl/X2J8zc.");
        }
        return "./" + Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_63" /* stringify */])(type);
    };
    /**
     * @param {?} typeOrFunc
     * @return {?}
     */
    JitReflector.prototype.parameters = function (typeOrFunc) {
        return this.reflectionCapabilities.parameters(typeOrFunc);
    };
    /**
     * @param {?} typeOrFunc
     * @return {?}
     */
    JitReflector.prototype.annotations = function (typeOrFunc) {
        return this.reflectionCapabilities.annotations(typeOrFunc);
    };
    /**
     * @param {?} typeOrFunc
     * @return {?}
     */
    JitReflector.prototype.propMetadata = function (typeOrFunc) {
        return this.reflectionCapabilities.propMetadata(typeOrFunc);
    };
    /**
     * @param {?} type
     * @param {?} lcProperty
     * @return {?}
     */
    JitReflector.prototype.hasLifecycleHook = function (type, lcProperty) {
        return this.reflectionCapabilities.hasLifecycleHook(type, lcProperty);
    };
    /**
     * @param {?} ref
     * @return {?}
     */
    JitReflector.prototype.resolveExternalReference = function (ref) { return ref.runtime; };
    return JitReflector;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _NO_RESOURCE_LOADER = {
    /**
     * @param {?} url
     * @return {?}
     */
    get: function (url) {
        throw new Error("No ResourceLoader implementation has been provided. Can't read the url \"" + url + "\"");
    }
};
var baseHtmlParser = new __WEBPACK_IMPORTED_MODULE_1__angular_core__["C" /* InjectionToken */]('HtmlParser');
/**
 * A set of providers that provide `JitCompiler` and its dependencies to use for
 * template compilation.
 */
var COMPILER_PROVIDERS = [
    { provide: CompileReflector, useValue: new JitReflector() },
    { provide: ResourceLoader, useValue: _NO_RESOURCE_LOADER },
    JitSummaryResolver,
    { provide: SummaryResolver, useExisting: JitSummaryResolver },
    __WEBPACK_IMPORTED_MODULE_1__angular_core__["_33" /* Console */],
    Lexer,
    Parser,
    {
        provide: baseHtmlParser,
        useClass: HtmlParser,
    },
    {
        provide: I18NHtmlParser,
        useFactory: function (parser, translations, format, config, console) {
            translations = translations || '';
            var missingTranslation = translations ? config.missingTranslation : __WEBPACK_IMPORTED_MODULE_1__angular_core__["I" /* MissingTranslationStrategy */].Ignore;
            return new I18NHtmlParser(parser, translations, format, missingTranslation, console);
        },
        deps: [
            baseHtmlParser,
            [new __WEBPACK_IMPORTED_MODULE_1__angular_core__["Q" /* Optional */](), new __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */](__WEBPACK_IMPORTED_MODULE_1__angular_core__["_6" /* TRANSLATIONS */])],
            [new __WEBPACK_IMPORTED_MODULE_1__angular_core__["Q" /* Optional */](), new __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */](__WEBPACK_IMPORTED_MODULE_1__angular_core__["_7" /* TRANSLATIONS_FORMAT */])],
            [CompilerConfig],
            [__WEBPACK_IMPORTED_MODULE_1__angular_core__["_33" /* Console */]],
        ]
    },
    {
        provide: HtmlParser,
        useExisting: I18NHtmlParser,
    },
    TemplateParser,
    DirectiveNormalizer,
    CompileMetadataResolver,
    DEFAULT_PACKAGE_URL_PROVIDER,
    StyleCompiler,
    ViewCompiler,
    NgModuleCompiler,
    { provide: CompilerConfig, useValue: new CompilerConfig() },
    JitCompiler,
    { provide: __WEBPACK_IMPORTED_MODULE_1__angular_core__["l" /* Compiler */], useExisting: JitCompiler },
    DomElementSchemaRegistry,
    { provide: ElementSchemaRegistry, useExisting: DomElementSchemaRegistry },
    UrlResolver,
    DirectiveResolver,
    PipeResolver,
    NgModuleResolver,
];
var JitCompilerFactory = (function () {
    /**
     * @param {?} defaultOptions
     */
    function JitCompilerFactory(defaultOptions) {
        var compilerOptions = {
            useDebug: Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_22" /* isDevMode */])(),
            useJit: true,
            defaultEncapsulation: __WEBPACK_IMPORTED_MODULE_1__angular_core__["_15" /* ViewEncapsulation */].Emulated,
            missingTranslation: __WEBPACK_IMPORTED_MODULE_1__angular_core__["I" /* MissingTranslationStrategy */].Warning,
            enableLegacyTemplate: true,
            preserveWhitespaces: true,
        };
        this._defaultOptions = [compilerOptions].concat(defaultOptions);
    }
    /**
     * @param {?=} options
     * @return {?}
     */
    JitCompilerFactory.prototype.createCompiler = function (options) {
        if (options === void 0) { options = []; }
        var /** @type {?} */ opts = _mergeOptions(this._defaultOptions.concat(options));
        var /** @type {?} */ injector = __WEBPACK_IMPORTED_MODULE_1__angular_core__["Y" /* ReflectiveInjector */].resolveAndCreate([
            COMPILER_PROVIDERS, {
                provide: CompilerConfig,
                useFactory: function () {
                    return new CompilerConfig({
                        // let explicit values from the compiler options overwrite options
                        // from the app providers
                        useJit: opts.useJit,
                        // let explicit values from the compiler options overwrite options
                        // from the app providers
                        defaultEncapsulation: opts.defaultEncapsulation,
                        missingTranslation: opts.missingTranslation,
                        enableLegacyTemplate: opts.enableLegacyTemplate,
                        preserveWhitespaces: opts.preserveWhitespaces,
                    });
                },
                deps: []
            }, /** @type {?} */ ((opts.providers))
        ]);
        return injector.get(__WEBPACK_IMPORTED_MODULE_1__angular_core__["l" /* Compiler */]);
    };
    return JitCompilerFactory;
}());
JitCompilerFactory.decorators = [
    { type: CompilerInjectable },
];
/**
 * @nocollapse
 */
JitCompilerFactory.ctorParameters = function () { return [
    { type: Array, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Inject */], args: [__WEBPACK_IMPORTED_MODULE_1__angular_core__["h" /* COMPILER_OPTIONS */],] },] },
]; };
/**
 * A platform that included corePlatform and the compiler.
 *
 * \@experimental
 */
var platformCoreDynamic = Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_18" /* createPlatformFactory */])(__WEBPACK_IMPORTED_MODULE_1__angular_core__["_24" /* platformCore */], 'coreDynamic', [
    { provide: __WEBPACK_IMPORTED_MODULE_1__angular_core__["h" /* COMPILER_OPTIONS */], useValue: {}, multi: true },
    { provide: __WEBPACK_IMPORTED_MODULE_1__angular_core__["m" /* CompilerFactory */], useClass: JitCompilerFactory },
]);
/**
 * @param {?} optionsArr
 * @return {?}
 */
function _mergeOptions(optionsArr) {
    return {
        useJit: _lastDefined(optionsArr.map(function (options) { return options.useJit; })),
        defaultEncapsulation: _lastDefined(optionsArr.map(function (options) { return options.defaultEncapsulation; })),
        providers: _mergeArrays(optionsArr.map(function (options) { return ((options.providers)); })),
        missingTranslation: _lastDefined(optionsArr.map(function (options) { return options.missingTranslation; })),
        enableLegacyTemplate: _lastDefined(optionsArr.map(function (options) { return options.enableLegacyTemplate; })),
        preserveWhitespaces: _lastDefined(optionsArr.map(function (options) { return options.preserveWhitespaces; })),
    };
}
/**
 * @template T
 * @param {?} args
 * @return {?}
 */
function _lastDefined(args) {
    for (var /** @type {?} */ i = args.length - 1; i >= 0; i--) {
        if (args[i] !== undefined) {
            return args[i];
        }
    }
    return undefined;
}
/**
 * @param {?} parts
 * @return {?}
 */
function _mergeArrays(parts) {
    var /** @type {?} */ result = [];
    parts.forEach(function (part) { return part && result.push.apply(result, part); });
    return result;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all APIs of the compiler package.
 *
 * <div class="callout is-critical">
 *   <header>Unstable APIs</header>
 *   <p>
 *     All compiler apis are currently considered experimental and private!
 *   </p>
 *   <p>
 *     We expect the APIs in this package to keep on changing. Do not rely on them.
 *   </p>
 * </div>
 */
// This file only reexports content of the `src` folder. Keep it that way.
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all public APIs of the compiler package.
 */
// This file only reexports content of the `src` folder. Keep it that way.

//# sourceMappingURL=compiler.js.map
//# sourceMappingURL=compiler.es5.js.map

/***/ }),

/***/ "../../../core/@angular/core.es5.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {/* unused harmony export Class */
/* unused harmony export createPlatform */
/* unused harmony export assertPlatform */
/* unused harmony export destroyPlatform */
/* unused harmony export getPlatform */
/* unused harmony export PlatformRef */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return ApplicationRef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_19", function() { return enableProdMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_22", function() { return isDevMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_18", function() { return createPlatformFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "O", function() { return NgProbeToken; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return APP_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "S", function() { return PACKAGE_ROOT_URL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "U", function() { return PLATFORM_INITIALIZER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "T", function() { return PLATFORM_ID; });
/* unused harmony export APP_BOOTSTRAP_LISTENER */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return APP_INITIALIZER; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return ApplicationInitStatus; });
/* unused harmony export DebugElement */
/* unused harmony export DebugNode */
/* unused harmony export asNativeElements */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_20", function() { return getDebugNode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_9", function() { return Testability; });
/* unused harmony export TestabilityRegistry */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_27", function() { return setTestabilityGetter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_6", function() { return TRANSLATIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_7", function() { return TRANSLATIONS_FORMAT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "H", function() { return LOCALE_ID; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "I", function() { return MissingTranslationStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return ApplicationModule; });
/* unused harmony export wtfCreateScope */
/* unused harmony export wtfLeave */
/* unused harmony export wtfStartTimeRange */
/* unused harmony export wtfEndTimeRange */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_10", function() { return Type; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "w", function() { return EventEmitter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "v", function() { return ErrorHandler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_2", function() { return Sanitizer; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_3", function() { return SecurityContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ANALYZE_FOR_ENTRY_COMPONENTS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return Attribute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "r", function() { return ContentChild; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "s", function() { return ContentChildren; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "W", function() { return Query; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_12", function() { return ViewChild; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_13", function() { return ViewChildren; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return Component; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "t", function() { return Directive; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "y", function() { return HostBinding; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "z", function() { return HostListener; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "E", function() { return Input; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "R", function() { return Output; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "V", function() { return Pipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return CUSTOM_ELEMENTS_SCHEMA; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "K", function() { return NO_ERRORS_SCHEMA; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "L", function() { return NgModule; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_15", function() { return ViewEncapsulation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_11", function() { return Version; });
/* unused harmony export VERSION */
/* unused harmony export forwardRef */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_25", function() { return resolveForwardRef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "D", function() { return Injector; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Y", function() { return ReflectiveInjector; });
/* unused harmony export ResolvedReflectiveFactory */
/* unused harmony export ReflectiveKey */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C", function() { return InjectionToken; });
/* unused harmony export OpaqueToken */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "A", function() { return Inject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Q", function() { return Optional; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "B", function() { return Injectable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_4", function() { return Self; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_5", function() { return SkipSelf; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "x", function() { return Host; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "P", function() { return NgZone; });
/* unused harmony export RenderComponentType */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Z", function() { return Renderer; });
/* unused harmony export Renderer2 */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_0", function() { return RendererFactory2; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_1", function() { return RendererStyleFlags2; });
/* unused harmony export RootRenderer */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return COMPILER_OPTIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return Compiler; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return CompilerFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "J", function() { return ModuleWithComponentFactories; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "o", function() { return ComponentFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "q", function() { return ComponentRef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "p", function() { return ComponentFactoryResolver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "u", function() { return ElementRef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "M", function() { return NgModuleFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "N", function() { return NgModuleRef; });
/* unused harmony export NgModuleFactoryLoader */
/* unused harmony export getModuleFactory */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "X", function() { return QueryList; });
/* unused harmony export SystemJsNgModuleLoader */
/* unused harmony export SystemJsNgModuleLoaderConfig */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_8", function() { return TemplateRef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_14", function() { return ViewContainerRef; });
/* unused harmony export EmbeddedViewRef */
/* unused harmony export ViewRef */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return ChangeDetectionStrategy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return ChangeDetectorRef; });
/* unused harmony export DefaultIterableDiffer */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "F", function() { return IterableDiffers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "G", function() { return KeyValueDiffers; });
/* unused harmony export SimpleChange */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_16", function() { return WrappedValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_24", function() { return platformCore; });
/* unused harmony export ALLOW_MULTIPLE_PLATFORMS */
/* unused harmony export APP_ID_RANDOM_PROVIDER */
/* unused harmony export ValueUnwrapper */
/* unused harmony export devModeEqual */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_49", function() { return isListLikeIterable; });
/* unused harmony export ChangeDetectorStatus */
/* unused harmony export isDefaultChangeDetectionStrategy */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_33", function() { return Console; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_36", function() { return ERROR_COMPONENT_TYPE; });
/* unused harmony export ComponentFactory */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_32", function() { return CodegenComponentFactoryResolver; });
/* unused harmony export ViewMetadata */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_37", function() { return ReflectionCapabilities; });
/* unused harmony export RenderDebugInfo */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_46", function() { return _global; });
/* unused harmony export looseIdentical */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_63", function() { return stringify; });
/* unused harmony export makeDecorator */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_50", function() { return isObservable; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_51", function() { return isPromise; });
/* unused harmony export clearProviderOverrides */
/* unused harmony export overrideProvider */
/* unused harmony export NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_62", function() { return registerModuleFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_34", function() { return EMPTY_ARRAY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_35", function() { return EMPTY_MAP; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_38", function() { return anchorDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_39", function() { return createComponentFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_40", function() { return createNgModuleFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_41", function() { return createRendererType2; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_42", function() { return directiveDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_43", function() { return elementDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_44", function() { return elementEventFullName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_45", function() { return getComponentViewDefinitionFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_47", function() { return inlineInterpolate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_48", function() { return interpolate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_52", function() { return moduleDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_53", function() { return moduleProvideDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_54", function() { return ngContentDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_55", function() { return nodeValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_57", function() { return pipeDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_60", function() { return providerDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_56", function() { return pureArrayDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_58", function() { return pureObjectDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_59", function() { return purePipeDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_61", function() { return queryDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_64", function() { return textDef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_65", function() { return unwrapValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_66", function() { return viewDef; });
/* unused harmony export AUTO_STYLE */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_31", function() { return trigger$$1; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_17", function() { return animate$$1; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_21", function() { return group$$1; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_26", function() { return sequence$$1; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_29", function() { return style$$1; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_28", function() { return state$$1; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_23", function() { return keyframes$$1; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_30", function() { return transition$$1; });
/* unused harmony export x */
/* unused harmony export y */
/* unused harmony export bc */
/* unused harmony export z */
/* unused harmony export bb */
/* unused harmony export ba */
/* unused harmony export bd */
/* unused harmony export w */
/* unused harmony export k */
/* unused harmony export l */
/* unused harmony export m */
/* unused harmony export e */
/* unused harmony export f */
/* unused harmony export g */
/* unused harmony export h */
/* unused harmony export i */
/* unused harmony export j */
/* unused harmony export b */
/* unused harmony export c */
/* unused harmony export d */
/* unused harmony export n */
/* unused harmony export p */
/* unused harmony export o */
/* unused harmony export s */
/* unused harmony export q */
/* unused harmony export r */
/* unused harmony export a */
/* unused harmony export t */
/* unused harmony export u */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__("../../../../tslib/tslib.es6.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__ = __webpack_require__("../../../../rxjs/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_observable_merge__ = __webpack_require__("../../../../rxjs/observable/merge.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_observable_merge___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_observable_merge__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_operator_share__ = __webpack_require__("../../../../rxjs/operator/share.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_operator_share___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_operator_share__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_Subject__ = __webpack_require__("../../../../rxjs/Subject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_Subject___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_rxjs_Subject__);

/**
 * @license Angular v4.4.5
 * (c) 2010-2017 Google, Inc. https://angular.io/
 * License: MIT
 */




/**
 * Creates a token that can be used in a DI Provider.
 *
 * ### Example ([live demo](http://plnkr.co/edit/Ys9ezXpj2Mnoy3Uc8KBp?p=preview))
 *
 * ```typescript
 * var t = new OpaqueToken("value");
 *
 * var injector = Injector.resolveAndCreate([
 *   {provide: t, useValue: "bindingValue"}
 * ]);
 *
 * expect(injector.get(t)).toEqual("bindingValue");
 * ```
 *
 * Using an `OpaqueToken` is preferable to using strings as tokens because of possible collisions
 * caused by multiple providers using the same string as two different tokens.
 *
 * Using an `OpaqueToken` is preferable to using an `Object` as tokens because it provides better
 * error messages.
 * @deprecated since v4.0.0 because it does not support type information, use `InjectionToken<?>`
 * instead.
 */
var OpaqueToken = (function () {
    /**
     * @param {?} _desc
     */
    function OpaqueToken(_desc) {
        this._desc = _desc;
    }
    /**
     * @return {?}
     */
    OpaqueToken.prototype.toString = function () { return "Token " + this._desc; };
    return OpaqueToken;
}());
/**
 * Creates a token that can be used in a DI Provider.
 *
 * Use an `InjectionToken` whenever the type you are injecting is not reified (does not have a
 * runtime representation) such as when injecting an interface, callable type, array or
 * parametrized type.
 *
 * `InjectionToken` is parameterized on `T` which is the type of object which will be returned by
 * the `Injector`. This provides additional level of type safety.
 *
 * ```
 * interface MyInterface {...}
 * var myInterface = injector.get(new InjectionToken<MyInterface>('SomeToken'));
 * // myInterface is inferred to be MyInterface.
 * ```
 *
 * ### Example
 *
 * {\@example core/di/ts/injector_spec.ts region='InjectionToken'}
 *
 * \@stable
 */
var InjectionToken = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](InjectionToken, _super);
    /**
     * @param {?} desc
     */
    function InjectionToken(desc) {
        return _super.call(this, desc) || this;
    }
    /**
     * @return {?}
     */
    InjectionToken.prototype.toString = function () { return "InjectionToken " + this._desc; };
    return InjectionToken;
}(OpaqueToken));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var __window = typeof window !== 'undefined' && window;
var __self = typeof self !== 'undefined' && typeof WorkerGlobalScope !== 'undefined' &&
    self instanceof WorkerGlobalScope && self;
var __global = typeof global !== 'undefined' && global;
var _global = __window || __global || __self;
var _symbolIterator = null;
/**
 * @return {?}
 */
function getSymbolIterator() {
    if (!_symbolIterator) {
        var /** @type {?} */ Symbol = _global['Symbol'];
        if (Symbol && Symbol.iterator) {
            _symbolIterator = Symbol.iterator;
        }
        else {
            // es6-shim specific logic
            var /** @type {?} */ keys = Object.getOwnPropertyNames(Map.prototype);
            for (var /** @type {?} */ i = 0; i < keys.length; ++i) {
                var /** @type {?} */ key = keys[i];
                if (key !== 'entries' && key !== 'size' &&
                    ((Map)).prototype[key] === Map.prototype['entries']) {
                    _symbolIterator = key;
                }
            }
        }
    }
    return _symbolIterator;
}
/**
 * @param {?} fn
 * @return {?}
 */
function scheduleMicroTask(fn) {
    Zone.current.scheduleMicroTask('scheduleMicrotask', fn);
}
/**
 * @param {?} a
 * @param {?} b
 * @return {?}
 */
function looseIdentical(a, b) {
    return a === b || typeof a === 'number' && typeof b === 'number' && isNaN(a) && isNaN(b);
}
/**
 * @param {?} token
 * @return {?}
 */
function stringify(token) {
    if (typeof token === 'string') {
        return token;
    }
    if (token == null) {
        return '' + token;
    }
    if (token.overriddenName) {
        return "" + token.overriddenName;
    }
    if (token.name) {
        return "" + token.name;
    }
    var /** @type {?} */ res = token.toString();
    if (res == null) {
        return '' + res;
    }
    var /** @type {?} */ newLineIndex = res.indexOf('\n');
    return newLineIndex === -1 ? res : res.substring(0, newLineIndex);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _nextClassId = 0;
var Reflect = _global['Reflect'];
/**
 * @param {?} annotation
 * @return {?}
 */
function extractAnnotation(annotation) {
    if (typeof annotation === 'function' && annotation.hasOwnProperty('annotation')) {
        // it is a decorator, extract annotation
        annotation = annotation.annotation;
    }
    return annotation;
}
/**
 * @param {?} fnOrArray
 * @param {?} key
 * @return {?}
 */
function applyParams(fnOrArray, key) {
    if (fnOrArray === Object || fnOrArray === String || fnOrArray === Function ||
        fnOrArray === Number || fnOrArray === Array) {
        throw new Error("Can not use native " + stringify(fnOrArray) + " as constructor");
    }
    if (typeof fnOrArray === 'function') {
        return fnOrArray;
    }
    if (Array.isArray(fnOrArray)) {
        var /** @type {?} */ annotations = (fnOrArray);
        var /** @type {?} */ annoLength = annotations.length - 1;
        var /** @type {?} */ fn = fnOrArray[annoLength];
        if (typeof fn !== 'function') {
            throw new Error("Last position of Class method array must be Function in key " + key + " was '" + stringify(fn) + "'");
        }
        if (annoLength != fn.length) {
            throw new Error("Number of annotations (" + annoLength + ") does not match number of arguments (" + fn.length + ") in the function: " + stringify(fn));
        }
        var /** @type {?} */ paramsAnnotations = [];
        for (var /** @type {?} */ i = 0, /** @type {?} */ ii = annotations.length - 1; i < ii; i++) {
            var /** @type {?} */ paramAnnotations = [];
            paramsAnnotations.push(paramAnnotations);
            var /** @type {?} */ annotation = annotations[i];
            if (Array.isArray(annotation)) {
                for (var /** @type {?} */ j = 0; j < annotation.length; j++) {
                    paramAnnotations.push(extractAnnotation(annotation[j]));
                }
            }
            else if (typeof annotation === 'function') {
                paramAnnotations.push(extractAnnotation(annotation));
            }
            else {
                paramAnnotations.push(annotation);
            }
        }
        Reflect.defineMetadata('parameters', paramsAnnotations, fn);
        return fn;
    }
    throw new Error("Only Function or Array is supported in Class definition for key '" + key + "' is '" + stringify(fnOrArray) + "'");
}
/**
 * Provides a way for expressing ES6 classes with parameter annotations in ES5.
 *
 * ## Basic Example
 *
 * ```
 * var Greeter = ng.Class({
 *   constructor: function(name) {
 *     this.name = name;
 *   },
 *
 *   greet: function() {
 *     alert('Hello ' + this.name + '!');
 *   }
 * });
 * ```
 *
 * is equivalent to ES6:
 *
 * ```
 * class Greeter {
 *   constructor(name) {
 *     this.name = name;
 *   }
 *
 *   greet() {
 *     alert('Hello ' + this.name + '!');
 *   }
 * }
 * ```
 *
 * or equivalent to ES5:
 *
 * ```
 * var Greeter = function (name) {
 *   this.name = name;
 * }
 *
 * Greeter.prototype.greet = function () {
 *   alert('Hello ' + this.name + '!');
 * }
 * ```
 *
 * ### Example with parameter annotations
 *
 * ```
 * var MyService = ng.Class({
 *   constructor: [String, [new Optional(), Service], function(name, myService) {
 *     ...
 *   }]
 * });
 * ```
 *
 * is equivalent to ES6:
 *
 * ```
 * class MyService {
 *   constructor(name: string, \@Optional() myService: Service) {
 *     ...
 *   }
 * }
 * ```
 *
 * ### Example with inheritance
 *
 * ```
 * var Shape = ng.Class({
 *   constructor: (color) {
 *     this.color = color;
 *   }
 * });
 *
 * var Square = ng.Class({
 *   extends: Shape,
 *   constructor: function(color, size) {
 *     Shape.call(this, color);
 *     this.size = size;
 *   }
 * });
 * ```
 * @suppress {globalThis}
 * \@stable
 * @param {?} clsDef
 * @return {?}
 */
function Class(clsDef) {
    var /** @type {?} */ constructor = applyParams(clsDef.hasOwnProperty('constructor') ? clsDef.constructor : undefined, 'constructor');
    var /** @type {?} */ proto = constructor.prototype;
    if (clsDef.hasOwnProperty('extends')) {
        if (typeof clsDef.extends === 'function') {
            ((constructor)).prototype = proto =
                Object.create(((clsDef.extends)).prototype);
        }
        else {
            throw new Error("Class definition 'extends' property must be a constructor function was: " + stringify(clsDef.extends));
        }
    }
    for (var /** @type {?} */ key in clsDef) {
        if (key !== 'extends' && key !== 'prototype' && clsDef.hasOwnProperty(key)) {
            proto[key] = applyParams(clsDef[key], key);
        }
    }
    if (this && this.annotations instanceof Array) {
        Reflect.defineMetadata('annotations', this.annotations, constructor);
    }
    var /** @type {?} */ constructorName = constructor['name'];
    if (!constructorName || constructorName === 'constructor') {
        ((constructor))['overriddenName'] = "class" + _nextClassId++;
    }
    return (constructor);
}
/**
 * @suppress {globalThis}
 * @param {?} name
 * @param {?=} props
 * @param {?=} parentClass
 * @param {?=} chainFn
 * @return {?}
 */
function makeDecorator(name, props, parentClass, chainFn) {
    var /** @type {?} */ metaCtor = makeMetadataCtor(props);
    /**
     * @param {?} objOrType
     * @return {?}
     */
    function DecoratorFactory(objOrType) {
        if (!(Reflect && Reflect.getOwnMetadata)) {
            throw 'reflect-metadata shim is required when using class decorators';
        }
        if (this instanceof DecoratorFactory) {
            metaCtor.call(this, objOrType);
            return this;
        }
        var /** @type {?} */ annotationInstance = new ((DecoratorFactory))(objOrType);
        var /** @type {?} */ chainAnnotation = typeof this === 'function' && Array.isArray(this.annotations) ? this.annotations : [];
        chainAnnotation.push(annotationInstance);
        var /** @type {?} */ TypeDecorator = (function TypeDecorator(cls) {
            var /** @type {?} */ annotations = Reflect.getOwnMetadata('annotations', cls) || [];
            annotations.push(annotationInstance);
            Reflect.defineMetadata('annotations', annotations, cls);
            return cls;
        });
        TypeDecorator.annotations = chainAnnotation;
        TypeDecorator.Class = Class;
        if (chainFn)
            chainFn(TypeDecorator);
        return TypeDecorator;
    }
    if (parentClass) {
        DecoratorFactory.prototype = Object.create(parentClass.prototype);
    }
    DecoratorFactory.prototype.toString = function () { return "@" + name; };
    ((DecoratorFactory)).annotationCls = DecoratorFactory;
    return DecoratorFactory;
}
/**
 * @param {?=} props
 * @return {?}
 */
function makeMetadataCtor(props) {
    return function ctor() {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (props) {
            var /** @type {?} */ values = props.apply(void 0, args);
            for (var /** @type {?} */ propName in values) {
                this[propName] = values[propName];
            }
        }
    };
}
/**
 * @param {?} name
 * @param {?=} props
 * @param {?=} parentClass
 * @return {?}
 */
function makeParamDecorator(name, props, parentClass) {
    var /** @type {?} */ metaCtor = makeMetadataCtor(props);
    /**
     * @param {...?} args
     * @return {?}
     */
    function ParamDecoratorFactory() {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (this instanceof ParamDecoratorFactory) {
            metaCtor.apply(this, args);
            return this;
        }
        var /** @type {?} */ annotationInstance = new (((ParamDecoratorFactory)).bind.apply(((ParamDecoratorFactory)), [void 0].concat(args)))();
        ((ParamDecorator)).annotation = annotationInstance;
        return ParamDecorator;
        /**
         * @param {?} cls
         * @param {?} unusedKey
         * @param {?} index
         * @return {?}
         */
        function ParamDecorator(cls, unusedKey, index) {
            var /** @type {?} */ parameters = Reflect.getOwnMetadata('parameters', cls) || [];
            // there might be gaps if some in between parameters do not have annotations.
            // we pad with nulls.
            while (parameters.length <= index) {
                parameters.push(null);
            }
            parameters[index] = parameters[index] || []; /** @type {?} */
            ((parameters[index])).push(annotationInstance);
            Reflect.defineMetadata('parameters', parameters, cls);
            return cls;
        }
    }
    if (parentClass) {
        ParamDecoratorFactory.prototype = Object.create(parentClass.prototype);
    }
    ParamDecoratorFactory.prototype.toString = function () { return "@" + name; };
    ((ParamDecoratorFactory)).annotationCls = ParamDecoratorFactory;
    return ParamDecoratorFactory;
}
/**
 * @param {?} name
 * @param {?=} props
 * @param {?=} parentClass
 * @return {?}
 */
function makePropDecorator(name, props, parentClass) {
    var /** @type {?} */ metaCtor = makeMetadataCtor(props);
    /**
     * @param {...?} args
     * @return {?}
     */
    function PropDecoratorFactory() {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (this instanceof PropDecoratorFactory) {
            metaCtor.apply(this, args);
            return this;
        }
        var /** @type {?} */ decoratorInstance = new (((PropDecoratorFactory)).bind.apply(((PropDecoratorFactory)), [void 0].concat(args)))();
        return function PropDecorator(target, name) {
            var /** @type {?} */ meta = Reflect.getOwnMetadata('propMetadata', target.constructor) || {};
            meta[name] = meta.hasOwnProperty(name) && meta[name] || [];
            meta[name].unshift(decoratorInstance);
            Reflect.defineMetadata('propMetadata', meta, target.constructor);
        };
    }
    if (parentClass) {
        PropDecoratorFactory.prototype = Object.create(parentClass.prototype);
    }
    PropDecoratorFactory.prototype.toString = function () { return "@" + name; };
    ((PropDecoratorFactory)).annotationCls = PropDecoratorFactory;
    return PropDecoratorFactory;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * This token can be used to create a virtual provider that will populate the
 * `entryComponents` fields of components and ng modules based on its `useValue`.
 * All components that are referenced in the `useValue` value (either directly
 * or in a nested array or map) will be added to the `entryComponents` property.
 *
 * ### Example
 * The following example shows how the router can populate the `entryComponents`
 * field of an NgModule based on the router configuration which refers
 * to components.
 *
 * ```typescript
 * // helper function inside the router
 * function provideRoutes(routes) {
 *   return [
 *     {provide: ROUTES, useValue: routes},
 *     {provide: ANALYZE_FOR_ENTRY_COMPONENTS, useValue: routes, multi: true}
 *   ];
 * }
 *
 * // user code
 * let routes = [
 *   {path: '/root', component: RootComp},
 *   {path: '/teams', component: TeamsComp}
 * ];
 *
 * \@NgModule({
 *   providers: [provideRoutes(routes)]
 * })
 * class ModuleWithRoutes {}
 * ```
 *
 * \@experimental
 */
var ANALYZE_FOR_ENTRY_COMPONENTS = new InjectionToken('AnalyzeForEntryComponents');
/**
 * Attribute decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var Attribute = makeParamDecorator('Attribute', function (attributeName) { return ({ attributeName: attributeName }); });
/**
 * Base class for query metadata.
 *
 * See {\@link ContentChildren}, {\@link ContentChild}, {\@link ViewChildren}, {\@link ViewChild} for
 * more information.
 *
 * \@stable
 * @abstract
 */
var Query = (function () {
    function Query() {
    }
    return Query;
}());
/**
 * ContentChildren decorator and metadata.
 *
 *  \@stable
 *  \@Annotation
 */
var ContentChildren = makePropDecorator('ContentChildren', function (selector, data) {
    if (data === void 0) { data = {}; }
    return (Object.assign({ selector: selector, first: false, isViewQuery: false, descendants: false }, data));
}, Query);
/**
 * ContentChild decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var ContentChild = makePropDecorator('ContentChild', function (selector, data) {
    if (data === void 0) { data = {}; }
    return (Object.assign({ selector: selector, first: true, isViewQuery: false, descendants: true }, data));
}, Query);
/**
 * ViewChildren decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var ViewChildren = makePropDecorator('ViewChildren', function (selector, data) {
    if (data === void 0) { data = {}; }
    return (Object.assign({ selector: selector, first: false, isViewQuery: true, descendants: true }, data));
}, Query);
/**
 * ViewChild decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var ViewChild = makePropDecorator('ViewChild', function (selector, data) { return (Object.assign({ selector: selector, first: true, isViewQuery: true, descendants: true }, data)); }, Query);
var ChangeDetectionStrategy = {};
ChangeDetectionStrategy.OnPush = 0;
ChangeDetectionStrategy.Default = 1;
ChangeDetectionStrategy[ChangeDetectionStrategy.OnPush] = "OnPush";
ChangeDetectionStrategy[ChangeDetectionStrategy.Default] = "Default";
var ChangeDetectorStatus = {};
ChangeDetectorStatus.CheckOnce = 0;
ChangeDetectorStatus.Checked = 1;
ChangeDetectorStatus.CheckAlways = 2;
ChangeDetectorStatus.Detached = 3;
ChangeDetectorStatus.Errored = 4;
ChangeDetectorStatus.Destroyed = 5;
ChangeDetectorStatus[ChangeDetectorStatus.CheckOnce] = "CheckOnce";
ChangeDetectorStatus[ChangeDetectorStatus.Checked] = "Checked";
ChangeDetectorStatus[ChangeDetectorStatus.CheckAlways] = "CheckAlways";
ChangeDetectorStatus[ChangeDetectorStatus.Detached] = "Detached";
ChangeDetectorStatus[ChangeDetectorStatus.Errored] = "Errored";
ChangeDetectorStatus[ChangeDetectorStatus.Destroyed] = "Destroyed";
/**
 * @param {?} changeDetectionStrategy
 * @return {?}
 */
function isDefaultChangeDetectionStrategy(changeDetectionStrategy) {
    return changeDetectionStrategy == null ||
        changeDetectionStrategy === ChangeDetectionStrategy.Default;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Directive decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var Directive = makeDecorator('Directive', function (dir) {
    if (dir === void 0) { dir = {}; }
    return dir;
});
/**
 * Component decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var Component = makeDecorator('Component', function (c) {
    if (c === void 0) { c = {}; }
    return (Object.assign({ changeDetection: ChangeDetectionStrategy.Default }, c));
}, Directive);
/**
 * Pipe decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var Pipe = makeDecorator('Pipe', function (p) { return (Object.assign({ pure: true }, p)); });
/**
 * Input decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var Input = makePropDecorator('Input', function (bindingPropertyName) { return ({ bindingPropertyName: bindingPropertyName }); });
/**
 * Output decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var Output = makePropDecorator('Output', function (bindingPropertyName) { return ({ bindingPropertyName: bindingPropertyName }); });
/**
 * HostBinding decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var HostBinding = makePropDecorator('HostBinding', function (hostPropertyName) { return ({ hostPropertyName: hostPropertyName }); });
/**
 * HostListener decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var HostListener = makePropDecorator('HostListener', function (eventName, args) { return ({ eventName: eventName, args: args }); });
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Defines a schema that will allow:
 * - any non-Angular elements with a `-` in their name,
 * - any properties on elements with a `-` in their name which is the common rule for custom
 * elements.
 *
 * \@stable
 */
var CUSTOM_ELEMENTS_SCHEMA = {
    name: 'custom-elements'
};
/**
 * Defines a schema that will allow any property on any element.
 *
 * \@experimental
 */
var NO_ERRORS_SCHEMA = {
    name: 'no-errors-schema'
};
/**
 * NgModule decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var NgModule = makeDecorator('NgModule', function (ngModule) { return ngModule; });
var ViewEncapsulation = {};
ViewEncapsulation.Emulated = 0;
ViewEncapsulation.Native = 1;
ViewEncapsulation.None = 2;
ViewEncapsulation[ViewEncapsulation.Emulated] = "Emulated";
ViewEncapsulation[ViewEncapsulation.Native] = "Native";
ViewEncapsulation[ViewEncapsulation.None] = "None";
/**
 * Metadata properties available for configuring Views.
 *
 * For details on the `\@Component` annotation, see {\@link Component}.
 *
 * ### Example
 *
 * ```
 * \@Component({
 *   selector: 'greet',
 *   template: 'Hello {{name}}!',
 * })
 * class Greet {
 *   name: string;
 *
 *   constructor() {
 *     this.name = 'World';
 *   }
 * }
 * ```
 *
 * @deprecated Use Component instead.
 *
 * {\@link Component}
 */
var ViewMetadata = (function () {
    /**
     * @param {?=} opts
     */
    function ViewMetadata(opts) {
        if (opts === void 0) { opts = {}; }
        this.templateUrl = opts.templateUrl;
        this.template = opts.template;
        this.styleUrls = opts.styleUrls;
        this.styles = opts.styles;
        this.encapsulation = opts.encapsulation;
        this.animations = opts.animations;
        this.interpolation = opts.interpolation;
    }
    return ViewMetadata;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@whatItDoes Represents the version of Angular
 *
 * \@stable
 */
var Version = (function () {
    /**
     * @param {?} full
     */
    function Version(full) {
        this.full = full;
    }
    Object.defineProperty(Version.prototype, "major", {
        /**
         * @return {?}
         */
        get: function () { return this.full.split('.')[0]; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Version.prototype, "minor", {
        /**
         * @return {?}
         */
        get: function () { return this.full.split('.')[1]; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Version.prototype, "patch", {
        /**
         * @return {?}
         */
        get: function () { return this.full.split('.').slice(2).join('.'); },
        enumerable: true,
        configurable: true
    });
    return Version;
}());
/**
 * \@stable
 */
var VERSION = new Version('4.4.5');
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Inject decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var Inject = makeParamDecorator('Inject', function (token) { return ({ token: token }); });
/**
 * Optional decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var Optional = makeParamDecorator('Optional');
/**
 * Injectable decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var Injectable = makeDecorator('Injectable');
/**
 * Self decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var Self = makeParamDecorator('Self');
/**
 * SkipSelf decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var SkipSelf = makeParamDecorator('SkipSelf');
/**
 * Host decorator and metadata.
 *
 * \@stable
 * \@Annotation
 */
var Host = makeParamDecorator('Host');
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Allows to refer to references which are not yet defined.
 *
 * For instance, `forwardRef` is used when the `token` which we need to refer to for the purposes of
 * DI is declared,
 * but not yet defined. It is also used when the `token` which we use when creating a query is not
 * yet defined.
 *
 * ### Example
 * {\@example core/di/ts/forward_ref/forward_ref_spec.ts region='forward_ref'}
 * \@experimental
 * @param {?} forwardRefFn
 * @return {?}
 */
function forwardRef(forwardRefFn) {
    ((forwardRefFn)).__forward_ref__ = forwardRef;
    ((forwardRefFn)).toString = function () { return stringify(this()); };
    return (((forwardRefFn)));
}
/**
 * Lazily retrieves the reference value from a forwardRef.
 *
 * Acts as the identity function when given a non-forward-ref value.
 *
 * ### Example ([live demo](http://plnkr.co/edit/GU72mJrk1fiodChcmiDR?p=preview))
 *
 * {\@example core/di/ts/forward_ref/forward_ref_spec.ts region='resolve_forward_ref'}
 *
 * See: {\@link forwardRef}
 * \@experimental
 * @param {?} type
 * @return {?}
 */
function resolveForwardRef(type) {
    if (typeof type === 'function' && type.hasOwnProperty('__forward_ref__') &&
        type.__forward_ref__ === forwardRef) {
        return ((type))();
    }
    else {
        return type;
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _THROW_IF_NOT_FOUND = new Object();
var THROW_IF_NOT_FOUND = _THROW_IF_NOT_FOUND;
var _NullInjector = (function () {
    function _NullInjector() {
    }
    /**
     * @param {?} token
     * @param {?=} notFoundValue
     * @return {?}
     */
    _NullInjector.prototype.get = function (token, notFoundValue) {
        if (notFoundValue === void 0) { notFoundValue = _THROW_IF_NOT_FOUND; }
        if (notFoundValue === _THROW_IF_NOT_FOUND) {
            throw new Error("No provider for " + stringify(token) + "!");
        }
        return notFoundValue;
    };
    return _NullInjector;
}());
/**
 * \@whatItDoes Injector interface
 * \@howToUse
 * ```
 * const injector: Injector = ...;
 * injector.get(...);
 * ```
 *
 * \@description
 * For more details, see the {\@linkDocs guide/dependency-injection "Dependency Injection Guide"}.
 *
 * ### Example
 *
 * {\@example core/di/ts/injector_spec.ts region='Injector'}
 *
 * `Injector` returns itself when given `Injector` as a token:
 * {\@example core/di/ts/injector_spec.ts region='injectInjector'}
 *
 * \@stable
 * @abstract
 */
var Injector = (function () {
    function Injector() {
    }
    /**
     * Retrieves an instance from the injector based on the provided token.
     * If not found:
     * - Throws an error if no `notFoundValue` that is not equal to
     * Injector.THROW_IF_NOT_FOUND is given
     * - Returns the `notFoundValue` otherwise
     * @abstract
     * @template T
     * @param {?} token
     * @param {?=} notFoundValue
     * @return {?}
     */
    Injector.prototype.get = function (token, notFoundValue) { };
    /**
     * @deprecated from v4.0.0 use Type<T> or InjectionToken<T>
     * @suppress {duplicate}
     * @abstract
     * @param {?} token
     * @param {?=} notFoundValue
     * @return {?}
     */
    Injector.prototype.get = function (token, notFoundValue) { };
    return Injector;
}());
Injector.THROW_IF_NOT_FOUND = _THROW_IF_NOT_FOUND;
Injector.NULL = new _NullInjector();
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ERROR_COMPONENT_TYPE = 'ngComponentType';
var ERROR_DEBUG_CONTEXT = 'ngDebugContext';
var ERROR_ORIGINAL_ERROR = 'ngOriginalError';
var ERROR_LOGGER = 'ngErrorLogger';
/**
 * @param {?} error
 * @return {?}
 */
/**
 * @param {?} error
 * @return {?}
 */
function getDebugContext(error) {
    return ((error))[ERROR_DEBUG_CONTEXT];
}
/**
 * @param {?} error
 * @return {?}
 */
function getOriginalError(error) {
    return ((error))[ERROR_ORIGINAL_ERROR];
}
/**
 * @param {?} error
 * @return {?}
 */
function getErrorLogger(error) {
    return ((error))[ERROR_LOGGER] || defaultErrorLogger;
}
/**
 * @param {?} console
 * @param {...?} values
 * @return {?}
 */
function defaultErrorLogger(console) {
    var values = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        values[_i - 1] = arguments[_i];
    }
    console.error.apply(console, values);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@whatItDoes Provides a hook for centralized exception handling.
 *
 * \@description
 *
 * The default implementation of `ErrorHandler` prints error messages to the `console`. To
 * intercept error handling, write a custom exception handler that replaces this default as
 * appropriate for your app.
 *
 * ### Example
 *
 * ```
 * class MyErrorHandler implements ErrorHandler {
 *   handleError(error) {
 *     // do something with the exception
 *   }
 * }
 *
 * \@NgModule({
 *   providers: [{provide: ErrorHandler, useClass: MyErrorHandler}]
 * })
 * class MyModule {}
 * ```
 *
 * \@stable
 */
var ErrorHandler = (function () {
    /**
     * @param {?=} deprecatedParameter
     */
    function ErrorHandler(
        /**
         * @deprecated since v4.0 parameter no longer has an effect, as ErrorHandler will never
         * rethrow.
         */
        deprecatedParameter) {
        /**
         * \@internal
         */
        this._console = console;
    }
    /**
     * @param {?} error
     * @return {?}
     */
    ErrorHandler.prototype.handleError = function (error) {
        var /** @type {?} */ originalError = this._findOriginalError(error);
        var /** @type {?} */ context = this._findContext(error);
        // Note: Browser consoles show the place from where console.error was called.
        // We can use this to give users additional information about the error.
        var /** @type {?} */ errorLogger = getErrorLogger(error);
        errorLogger(this._console, "ERROR", error);
        if (originalError) {
            errorLogger(this._console, "ORIGINAL ERROR", originalError);
        }
        if (context) {
            errorLogger(this._console, 'ERROR CONTEXT', context);
        }
    };
    /**
     * \@internal
     * @param {?} error
     * @return {?}
     */
    ErrorHandler.prototype._findContext = function (error) {
        if (error) {
            return getDebugContext(error) ? getDebugContext(error) :
                this._findContext(getOriginalError(error));
        }
        return null;
    };
    /**
     * \@internal
     * @param {?} error
     * @return {?}
     */
    ErrorHandler.prototype._findOriginalError = function (error) {
        var /** @type {?} */ e = getOriginalError(error);
        while (e && getOriginalError(e)) {
            e = getOriginalError(e);
        }
        return e;
    };
    return ErrorHandler;
}());
/**
 * @param {?} message
 * @param {?} originalError
 * @return {?}
 */
function wrappedError(message, originalError) {
    var /** @type {?} */ msg = message + " caused by: " + (originalError instanceof Error ? originalError.message : originalError);
    var /** @type {?} */ error = Error(msg);
    ((error))[ERROR_ORIGINAL_ERROR] = originalError;
    return error;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} keys
 * @return {?}
 */
function findFirstClosedCycle(keys) {
    var /** @type {?} */ res = [];
    for (var /** @type {?} */ i = 0; i < keys.length; ++i) {
        if (res.indexOf(keys[i]) > -1) {
            res.push(keys[i]);
            return res;
        }
        res.push(keys[i]);
    }
    return res;
}
/**
 * @param {?} keys
 * @return {?}
 */
function constructResolvingPath(keys) {
    if (keys.length > 1) {
        var /** @type {?} */ reversed = findFirstClosedCycle(keys.slice().reverse());
        var /** @type {?} */ tokenStrs = reversed.map(function (k) { return stringify(k.token); });
        return ' (' + tokenStrs.join(' -> ') + ')';
    }
    return '';
}
/**
 * @param {?} injector
 * @param {?} key
 * @param {?} constructResolvingMessage
 * @param {?=} originalError
 * @return {?}
 */
function injectionError(injector, key, constructResolvingMessage, originalError) {
    var /** @type {?} */ keys = [key];
    var /** @type {?} */ errMsg = constructResolvingMessage(keys);
    var /** @type {?} */ error = ((originalError ? wrappedError(errMsg, originalError) : Error(errMsg)));
    error.addKey = addKey;
    error.keys = keys;
    error.injectors = [injector];
    error.constructResolvingMessage = constructResolvingMessage;
    ((error))[ERROR_ORIGINAL_ERROR] = originalError;
    return error;
}
/**
 * @this {?}
 * @param {?} injector
 * @param {?} key
 * @return {?}
 */
function addKey(injector, key) {
    this.injectors.push(injector);
    this.keys.push(key);
    // Note: This updated message won't be reflected in the `.stack` property
    this.message = this.constructResolvingMessage(this.keys);
}
/**
 * Thrown when trying to retrieve a dependency by key from {\@link Injector}, but the
 * {\@link Injector} does not have a {\@link Provider} for the given key.
 *
 * ### Example ([live demo](http://plnkr.co/edit/vq8D3FRB9aGbnWJqtEPE?p=preview))
 *
 * ```typescript
 * class A {
 *   constructor(b:B) {}
 * }
 *
 * expect(() => Injector.resolveAndCreate([A])).toThrowError();
 * ```
 * @param {?} injector
 * @param {?} key
 * @return {?}
 */
function noProviderError(injector, key) {
    return injectionError(injector, key, function (keys) {
        var /** @type {?} */ first = stringify(keys[0].token);
        return "No provider for " + first + "!" + constructResolvingPath(keys);
    });
}
/**
 * Thrown when dependencies form a cycle.
 *
 * ### Example ([live demo](http://plnkr.co/edit/wYQdNos0Tzql3ei1EV9j?p=info))
 *
 * ```typescript
 * var injector = Injector.resolveAndCreate([
 *   {provide: "one", useFactory: (two) => "two", deps: [[new Inject("two")]]},
 *   {provide: "two", useFactory: (one) => "one", deps: [[new Inject("one")]]}
 * ]);
 *
 * expect(() => injector.get("one")).toThrowError();
 * ```
 *
 * Retrieving `A` or `B` throws a `CyclicDependencyError` as the graph above cannot be constructed.
 * @param {?} injector
 * @param {?} key
 * @return {?}
 */
function cyclicDependencyError(injector, key) {
    return injectionError(injector, key, function (keys) {
        return "Cannot instantiate cyclic dependency!" + constructResolvingPath(keys);
    });
}
/**
 * Thrown when a constructing type returns with an Error.
 *
 * The `InstantiationError` class contains the original error plus the dependency graph which caused
 * this object to be instantiated.
 *
 * ### Example ([live demo](http://plnkr.co/edit/7aWYdcqTQsP0eNqEdUAf?p=preview))
 *
 * ```typescript
 * class A {
 *   constructor() {
 *     throw new Error('message');
 *   }
 * }
 *
 * var injector = Injector.resolveAndCreate([A]);
 * try {
 *   injector.get(A);
 * } catch (e) {
 *   expect(e instanceof InstantiationError).toBe(true);
 *   expect(e.originalException.message).toEqual("message");
 *   expect(e.originalStack).toBeDefined();
 * }
 * ```
 * @param {?} injector
 * @param {?} originalException
 * @param {?} originalStack
 * @param {?} key
 * @return {?}
 */
function instantiationError(injector, originalException, originalStack, key) {
    return injectionError(injector, key, function (keys) {
        var /** @type {?} */ first = stringify(keys[0].token);
        return originalException.message + ": Error during instantiation of " + first + "!" + constructResolvingPath(keys) + ".";
    }, originalException);
}
/**
 * Thrown when an object other then {\@link Provider} (or `Type`) is passed to {\@link Injector}
 * creation.
 *
 * ### Example ([live demo](http://plnkr.co/edit/YatCFbPAMCL0JSSQ4mvH?p=preview))
 *
 * ```typescript
 * expect(() => Injector.resolveAndCreate(["not a type"])).toThrowError();
 * ```
 * @param {?} provider
 * @return {?}
 */
function invalidProviderError(provider) {
    return Error("Invalid provider - only instances of Provider and Type are allowed, got: " + provider);
}
/**
 * Thrown when the class has no annotation information.
 *
 * Lack of annotation information prevents the {\@link Injector} from determining which dependencies
 * need to be injected into the constructor.
 *
 * ### Example ([live demo](http://plnkr.co/edit/rHnZtlNS7vJOPQ6pcVkm?p=preview))
 *
 * ```typescript
 * class A {
 *   constructor(b) {}
 * }
 *
 * expect(() => Injector.resolveAndCreate([A])).toThrowError();
 * ```
 *
 * This error is also thrown when the class not marked with {\@link Injectable} has parameter types.
 *
 * ```typescript
 * class B {}
 *
 * class A {
 *   constructor(b:B) {} // no information about the parameter types of A is available at runtime.
 * }
 *
 * expect(() => Injector.resolveAndCreate([A,B])).toThrowError();
 * ```
 * \@stable
 * @param {?} typeOrFunc
 * @param {?} params
 * @return {?}
 */
function noAnnotationError(typeOrFunc, params) {
    var /** @type {?} */ signature = [];
    for (var /** @type {?} */ i = 0, /** @type {?} */ ii = params.length; i < ii; i++) {
        var /** @type {?} */ parameter = params[i];
        if (!parameter || parameter.length == 0) {
            signature.push('?');
        }
        else {
            signature.push(parameter.map(stringify).join(' '));
        }
    }
    return Error('Cannot resolve all parameters for \'' + stringify(typeOrFunc) + '\'(' +
        signature.join(', ') + '). ' +
        'Make sure that all the parameters are decorated with Inject or have valid type annotations and that \'' +
        stringify(typeOrFunc) + '\' is decorated with Injectable.');
}
/**
 * Thrown when getting an object by index.
 *
 * ### Example ([live demo](http://plnkr.co/edit/bRs0SX2OTQiJzqvjgl8P?p=preview))
 *
 * ```typescript
 * class A {}
 *
 * var injector = Injector.resolveAndCreate([A]);
 *
 * expect(() => injector.getAt(100)).toThrowError();
 * ```
 * \@stable
 * @param {?} index
 * @return {?}
 */
function outOfBoundsError(index) {
    return Error("Index " + index + " is out-of-bounds.");
}
/**
 * Thrown when a multi provider and a regular provider are bound to the same token.
 *
 * ### Example
 *
 * ```typescript
 * expect(() => Injector.resolveAndCreate([
 *   { provide: "Strings", useValue: "string1", multi: true},
 *   { provide: "Strings", useValue: "string2", multi: false}
 * ])).toThrowError();
 * ```
 * @param {?} provider1
 * @param {?} provider2
 * @return {?}
 */
function mixingMultiProvidersWithRegularProvidersError(provider1, provider2) {
    return Error("Cannot mix multi providers and regular providers, got: " + provider1 + " " + provider2);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A unique object used for retrieving items from the {\@link ReflectiveInjector}.
 *
 * Keys have:
 * - a system-wide unique `id`.
 * - a `token`.
 *
 * `Key` is used internally by {\@link ReflectiveInjector} because its system-wide unique `id` allows
 * the
 * injector to store created objects in a more efficient way.
 *
 * `Key` should not be created directly. {\@link ReflectiveInjector} creates keys automatically when
 * resolving
 * providers.
 * \@experimental
 */
var ReflectiveKey = (function () {
    /**
     * Private
     * @param {?} token
     * @param {?} id
     */
    function ReflectiveKey(token, id) {
        this.token = token;
        this.id = id;
        if (!token) {
            throw new Error('Token must be defined!');
        }
    }
    Object.defineProperty(ReflectiveKey.prototype, "displayName", {
        /**
         * Returns a stringified token.
         * @return {?}
         */
        get: function () { return stringify(this.token); },
        enumerable: true,
        configurable: true
    });
    /**
     * Retrieves a `Key` for a token.
     * @param {?} token
     * @return {?}
     */
    ReflectiveKey.get = function (token) {
        return _globalKeyRegistry.get(resolveForwardRef(token));
    };
    Object.defineProperty(ReflectiveKey, "numberOfKeys", {
        /**
         * @return {?} the number of keys registered in the system.
         */
        get: function () { return _globalKeyRegistry.numberOfKeys; },
        enumerable: true,
        configurable: true
    });
    return ReflectiveKey;
}());
/**
 * \@internal
 */
var KeyRegistry = (function () {
    function KeyRegistry() {
        this._allKeys = new Map();
    }
    /**
     * @param {?} token
     * @return {?}
     */
    KeyRegistry.prototype.get = function (token) {
        if (token instanceof ReflectiveKey)
            return token;
        if (this._allKeys.has(token)) {
            return ((this._allKeys.get(token)));
        }
        var /** @type {?} */ newKey = new ReflectiveKey(token, ReflectiveKey.numberOfKeys);
        this._allKeys.set(token, newKey);
        return newKey;
    };
    Object.defineProperty(KeyRegistry.prototype, "numberOfKeys", {
        /**
         * @return {?}
         */
        get: function () { return this._allKeys.size; },
        enumerable: true,
        configurable: true
    });
    return KeyRegistry;
}());
var _globalKeyRegistry = new KeyRegistry();
/**
 * \@whatItDoes Represents a type that a Component or other object is instances of.
 *
 * \@description
 *
 * An example of a `Type` is `MyCustomComponent` class, which in JavaScript is be represented by
 * the `MyCustomComponent` constructor function.
 *
 * \@stable
 */
var Type = Function;
/**
 * @param {?} v
 * @return {?}
 */
function isType(v) {
    return typeof v === 'function';
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Attention: This regex has to hold even if the code is minified!
 */
var DELEGATE_CTOR = /^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/;
var ReflectionCapabilities = (function () {
    /**
     * @param {?=} reflect
     */
    function ReflectionCapabilities(reflect) {
        this._reflect = reflect || _global['Reflect'];
    }
    /**
     * @return {?}
     */
    ReflectionCapabilities.prototype.isReflectionEnabled = function () { return true; };
    /**
     * @template T
     * @param {?} t
     * @return {?}
     */
    ReflectionCapabilities.prototype.factory = function (t) { return function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        return new (t.bind.apply(t, [void 0].concat(args)))();
    }; };
    /**
     * \@internal
     * @param {?} paramTypes
     * @param {?} paramAnnotations
     * @return {?}
     */
    ReflectionCapabilities.prototype._zipTypesAndAnnotations = function (paramTypes, paramAnnotations) {
        var /** @type {?} */ result;
        if (typeof paramTypes === 'undefined') {
            result = new Array(paramAnnotations.length);
        }
        else {
            result = new Array(paramTypes.length);
        }
        for (var /** @type {?} */ i = 0; i < result.length; i++) {
            // TS outputs Object for parameters without types, while Traceur omits
            // the annotations. For now we preserve the Traceur behavior to aid
            // migration, but this can be revisited.
            if (typeof paramTypes === 'undefined') {
                result[i] = [];
            }
            else if (paramTypes[i] != Object) {
                result[i] = [paramTypes[i]];
            }
            else {
                result[i] = [];
            }
            if (paramAnnotations && paramAnnotations[i] != null) {
                result[i] = result[i].concat(paramAnnotations[i]);
            }
        }
        return result;
    };
    /**
     * @param {?} type
     * @param {?} parentCtor
     * @return {?}
     */
    ReflectionCapabilities.prototype._ownParameters = function (type, parentCtor) {
        // If we have no decorators, we only have function.length as metadata.
        // In that case, to detect whether a child class declared an own constructor or not,
        // we need to look inside of that constructor to check whether it is
        // just calling the parent.
        // This also helps to work around for https://github.com/Microsoft/TypeScript/issues/12439
        // that sets 'design:paramtypes' to []
        // if a class inherits from another class but has no ctor declared itself.
        if (DELEGATE_CTOR.exec(type.toString())) {
            return null;
        }
        // Prefer the direct API.
        if (((type)).parameters && ((type)).parameters !== parentCtor.parameters) {
            return ((type)).parameters;
        }
        // API of tsickle for lowering decorators to properties on the class.
        var /** @type {?} */ tsickleCtorParams = ((type)).ctorParameters;
        if (tsickleCtorParams && tsickleCtorParams !== parentCtor.ctorParameters) {
            // Newer tsickle uses a function closure
            // Retain the non-function case for compatibility with older tsickle
            var /** @type {?} */ ctorParameters = typeof tsickleCtorParams === 'function' ? tsickleCtorParams() : tsickleCtorParams;
            var /** @type {?} */ paramTypes = ctorParameters.map(function (ctorParam) { return ctorParam && ctorParam.type; });
            var /** @type {?} */ paramAnnotations = ctorParameters.map(function (ctorParam) { return ctorParam && convertTsickleDecoratorIntoMetadata(ctorParam.decorators); });
            return this._zipTypesAndAnnotations(paramTypes, paramAnnotations);
        }
        // API for metadata created by invoking the decorators.
        if (this._reflect != null && this._reflect.getOwnMetadata != null) {
            var /** @type {?} */ paramAnnotations = this._reflect.getOwnMetadata('parameters', type);
            var /** @type {?} */ paramTypes = this._reflect.getOwnMetadata('design:paramtypes', type);
            if (paramTypes || paramAnnotations) {
                return this._zipTypesAndAnnotations(paramTypes, paramAnnotations);
            }
        }
        // If a class has no decorators, at least create metadata
        // based on function.length.
        // Note: We know that this is a real constructor as we checked
        // the content of the constructor above.
        return new Array(((type.length))).fill(undefined);
    };
    /**
     * @param {?} type
     * @return {?}
     */
    ReflectionCapabilities.prototype.parameters = function (type) {
        // Note: only report metadata if we have at least one class decorator
        // to stay in sync with the static reflector.
        if (!isType(type)) {
            return [];
        }
        var /** @type {?} */ parentCtor = getParentCtor(type);
        var /** @type {?} */ parameters = this._ownParameters(type, parentCtor);
        if (!parameters && parentCtor !== Object) {
            parameters = this.parameters(parentCtor);
        }
        return parameters || [];
    };
    /**
     * @param {?} typeOrFunc
     * @param {?} parentCtor
     * @return {?}
     */
    ReflectionCapabilities.prototype._ownAnnotations = function (typeOrFunc, parentCtor) {
        // Prefer the direct API.
        if (((typeOrFunc)).annotations && ((typeOrFunc)).annotations !== parentCtor.annotations) {
            var /** @type {?} */ annotations = ((typeOrFunc)).annotations;
            if (typeof annotations === 'function' && annotations.annotations) {
                annotations = annotations.annotations;
            }
            return annotations;
        }
        // API of tsickle for lowering decorators to properties on the class.
        if (((typeOrFunc)).decorators && ((typeOrFunc)).decorators !== parentCtor.decorators) {
            return convertTsickleDecoratorIntoMetadata(((typeOrFunc)).decorators);
        }
        // API for metadata created by invoking the decorators.
        if (this._reflect && this._reflect.getOwnMetadata) {
            return this._reflect.getOwnMetadata('annotations', typeOrFunc);
        }
        return null;
    };
    /**
     * @param {?} typeOrFunc
     * @return {?}
     */
    ReflectionCapabilities.prototype.annotations = function (typeOrFunc) {
        if (!isType(typeOrFunc)) {
            return [];
        }
        var /** @type {?} */ parentCtor = getParentCtor(typeOrFunc);
        var /** @type {?} */ ownAnnotations = this._ownAnnotations(typeOrFunc, parentCtor) || [];
        var /** @type {?} */ parentAnnotations = parentCtor !== Object ? this.annotations(parentCtor) : [];
        return parentAnnotations.concat(ownAnnotations);
    };
    /**
     * @param {?} typeOrFunc
     * @param {?} parentCtor
     * @return {?}
     */
    ReflectionCapabilities.prototype._ownPropMetadata = function (typeOrFunc, parentCtor) {
        // Prefer the direct API.
        if (((typeOrFunc)).propMetadata &&
            ((typeOrFunc)).propMetadata !== parentCtor.propMetadata) {
            var /** @type {?} */ propMetadata = ((typeOrFunc)).propMetadata;
            if (typeof propMetadata === 'function' && propMetadata.propMetadata) {
                propMetadata = propMetadata.propMetadata;
            }
            return propMetadata;
        }
        // API of tsickle for lowering decorators to properties on the class.
        if (((typeOrFunc)).propDecorators &&
            ((typeOrFunc)).propDecorators !== parentCtor.propDecorators) {
            var /** @type {?} */ propDecorators_1 = ((typeOrFunc)).propDecorators;
            var /** @type {?} */ propMetadata_1 = ({});
            Object.keys(propDecorators_1).forEach(function (prop) {
                propMetadata_1[prop] = convertTsickleDecoratorIntoMetadata(propDecorators_1[prop]);
            });
            return propMetadata_1;
        }
        // API for metadata created by invoking the decorators.
        if (this._reflect && this._reflect.getOwnMetadata) {
            return this._reflect.getOwnMetadata('propMetadata', typeOrFunc);
        }
        return null;
    };
    /**
     * @param {?} typeOrFunc
     * @return {?}
     */
    ReflectionCapabilities.prototype.propMetadata = function (typeOrFunc) {
        if (!isType(typeOrFunc)) {
            return {};
        }
        var /** @type {?} */ parentCtor = getParentCtor(typeOrFunc);
        var /** @type {?} */ propMetadata = {};
        if (parentCtor !== Object) {
            var /** @type {?} */ parentPropMetadata_1 = this.propMetadata(parentCtor);
            Object.keys(parentPropMetadata_1).forEach(function (propName) {
                propMetadata[propName] = parentPropMetadata_1[propName];
            });
        }
        var /** @type {?} */ ownPropMetadata = this._ownPropMetadata(typeOrFunc, parentCtor);
        if (ownPropMetadata) {
            Object.keys(ownPropMetadata).forEach(function (propName) {
                var /** @type {?} */ decorators = [];
                if (propMetadata.hasOwnProperty(propName)) {
                    decorators.push.apply(decorators, propMetadata[propName]);
                }
                decorators.push.apply(decorators, ownPropMetadata[propName]);
                propMetadata[propName] = decorators;
            });
        }
        return propMetadata;
    };
    /**
     * @param {?} type
     * @param {?} lcProperty
     * @return {?}
     */
    ReflectionCapabilities.prototype.hasLifecycleHook = function (type, lcProperty) {
        return type instanceof Type && lcProperty in type.prototype;
    };
    /**
     * @param {?} name
     * @return {?}
     */
    ReflectionCapabilities.prototype.getter = function (name) { return (new Function('o', 'return o.' + name + ';')); };
    /**
     * @param {?} name
     * @return {?}
     */
    ReflectionCapabilities.prototype.setter = function (name) {
        return (new Function('o', 'v', 'return o.' + name + ' = v;'));
    };
    /**
     * @param {?} name
     * @return {?}
     */
    ReflectionCapabilities.prototype.method = function (name) {
        var /** @type {?} */ functionBody = "if (!o." + name + ") throw new Error('\"" + name + "\" is undefined');\n        return o." + name + ".apply(o, args);";
        return (new Function('o', 'args', functionBody));
    };
    /**
     * @param {?} type
     * @return {?}
     */
    ReflectionCapabilities.prototype.importUri = function (type) {
        // StaticSymbol
        if (typeof type === 'object' && type['filePath']) {
            return type['filePath'];
        }
        // Runtime type
        return "./" + stringify(type);
    };
    /**
     * @param {?} type
     * @return {?}
     */
    ReflectionCapabilities.prototype.resourceUri = function (type) { return "./" + stringify(type); };
    /**
     * @param {?} name
     * @param {?} moduleUrl
     * @param {?} members
     * @param {?} runtime
     * @return {?}
     */
    ReflectionCapabilities.prototype.resolveIdentifier = function (name, moduleUrl, members, runtime) {
        return runtime;
    };
    /**
     * @param {?} enumIdentifier
     * @param {?} name
     * @return {?}
     */
    ReflectionCapabilities.prototype.resolveEnum = function (enumIdentifier, name) { return enumIdentifier[name]; };
    return ReflectionCapabilities;
}());
/**
 * @param {?} decoratorInvocations
 * @return {?}
 */
function convertTsickleDecoratorIntoMetadata(decoratorInvocations) {
    if (!decoratorInvocations) {
        return [];
    }
    return decoratorInvocations.map(function (decoratorInvocation) {
        var /** @type {?} */ decoratorType = decoratorInvocation.type;
        var /** @type {?} */ annotationCls = decoratorType.annotationCls;
        var /** @type {?} */ annotationArgs = decoratorInvocation.args ? decoratorInvocation.args : [];
        return new (annotationCls.bind.apply(annotationCls, [void 0].concat(annotationArgs)))();
    });
}
/**
 * @param {?} ctor
 * @return {?}
 */
function getParentCtor(ctor) {
    var /** @type {?} */ parentProto = Object.getPrototypeOf(ctor.prototype);
    var /** @type {?} */ parentCtor = parentProto ? parentProto.constructor : null;
    // Note: We always use `Object` as the null value
    // to simplify checking later on.
    return parentCtor || Object;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Provides access to reflection data about symbols. Used internally by Angular
 * to power dependency injection and compilation.
 */
var Reflector = (function () {
    /**
     * @param {?} reflectionCapabilities
     */
    function Reflector(reflectionCapabilities) {
        this.reflectionCapabilities = reflectionCapabilities;
    }
    /**
     * @param {?} caps
     * @return {?}
     */
    Reflector.prototype.updateCapabilities = function (caps) { this.reflectionCapabilities = caps; };
    /**
     * @param {?} type
     * @return {?}
     */
    Reflector.prototype.factory = function (type) { return this.reflectionCapabilities.factory(type); };
    /**
     * @param {?} typeOrFunc
     * @return {?}
     */
    Reflector.prototype.parameters = function (typeOrFunc) {
        return this.reflectionCapabilities.parameters(typeOrFunc);
    };
    /**
     * @param {?} typeOrFunc
     * @return {?}
     */
    Reflector.prototype.annotations = function (typeOrFunc) {
        return this.reflectionCapabilities.annotations(typeOrFunc);
    };
    /**
     * @param {?} typeOrFunc
     * @return {?}
     */
    Reflector.prototype.propMetadata = function (typeOrFunc) {
        return this.reflectionCapabilities.propMetadata(typeOrFunc);
    };
    /**
     * @param {?} type
     * @param {?} lcProperty
     * @return {?}
     */
    Reflector.prototype.hasLifecycleHook = function (type, lcProperty) {
        return this.reflectionCapabilities.hasLifecycleHook(type, lcProperty);
    };
    /**
     * @param {?} name
     * @return {?}
     */
    Reflector.prototype.getter = function (name) { return this.reflectionCapabilities.getter(name); };
    /**
     * @param {?} name
     * @return {?}
     */
    Reflector.prototype.setter = function (name) { return this.reflectionCapabilities.setter(name); };
    /**
     * @param {?} name
     * @return {?}
     */
    Reflector.prototype.method = function (name) { return this.reflectionCapabilities.method(name); };
    /**
     * @param {?} type
     * @return {?}
     */
    Reflector.prototype.importUri = function (type) { return this.reflectionCapabilities.importUri(type); };
    /**
     * @param {?} type
     * @return {?}
     */
    Reflector.prototype.resourceUri = function (type) { return this.reflectionCapabilities.resourceUri(type); };
    /**
     * @param {?} name
     * @param {?} moduleUrl
     * @param {?} members
     * @param {?} runtime
     * @return {?}
     */
    Reflector.prototype.resolveIdentifier = function (name, moduleUrl, members, runtime) {
        return this.reflectionCapabilities.resolveIdentifier(name, moduleUrl, members, runtime);
    };
    /**
     * @param {?} identifier
     * @param {?} name
     * @return {?}
     */
    Reflector.prototype.resolveEnum = function (identifier, name) {
        return this.reflectionCapabilities.resolveEnum(identifier, name);
    };
    return Reflector;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * The {\@link Reflector} used internally in Angular to access metadata
 * about symbols.
 */
var reflector = new Reflector(new ReflectionCapabilities());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * `Dependency` is used by the framework to extend DI.
 * This is internal to Angular and should not be used directly.
 */
var ReflectiveDependency = (function () {
    /**
     * @param {?} key
     * @param {?} optional
     * @param {?} visibility
     */
    function ReflectiveDependency(key, optional, visibility) {
        this.key = key;
        this.optional = optional;
        this.visibility = visibility;
    }
    /**
     * @param {?} key
     * @return {?}
     */
    ReflectiveDependency.fromKey = function (key) {
        return new ReflectiveDependency(key, false, null);
    };
    return ReflectiveDependency;
}());
var _EMPTY_LIST = [];
var ResolvedReflectiveProvider_ = (function () {
    /**
     * @param {?} key
     * @param {?} resolvedFactories
     * @param {?} multiProvider
     */
    function ResolvedReflectiveProvider_(key, resolvedFactories, multiProvider) {
        this.key = key;
        this.resolvedFactories = resolvedFactories;
        this.multiProvider = multiProvider;
    }
    Object.defineProperty(ResolvedReflectiveProvider_.prototype, "resolvedFactory", {
        /**
         * @return {?}
         */
        get: function () { return this.resolvedFactories[0]; },
        enumerable: true,
        configurable: true
    });
    return ResolvedReflectiveProvider_;
}());
/**
 * An internal resolved representation of a factory function created by resolving {\@link
 * Provider}.
 * \@experimental
 */
var ResolvedReflectiveFactory = (function () {
    /**
     * @param {?} factory
     * @param {?} dependencies
     */
    function ResolvedReflectiveFactory(factory, dependencies) {
        this.factory = factory;
        this.dependencies = dependencies;
    }
    return ResolvedReflectiveFactory;
}());
/**
 * Resolve a single provider.
 * @param {?} provider
 * @return {?}
 */
function resolveReflectiveFactory(provider) {
    var /** @type {?} */ factoryFn;
    var /** @type {?} */ resolvedDeps;
    if (provider.useClass) {
        var /** @type {?} */ useClass = resolveForwardRef(provider.useClass);
        factoryFn = reflector.factory(useClass);
        resolvedDeps = _dependenciesFor(useClass);
    }
    else if (provider.useExisting) {
        factoryFn = function (aliasInstance) { return aliasInstance; };
        resolvedDeps = [ReflectiveDependency.fromKey(ReflectiveKey.get(provider.useExisting))];
    }
    else if (provider.useFactory) {
        factoryFn = provider.useFactory;
        resolvedDeps = constructDependencies(provider.useFactory, provider.deps);
    }
    else {
        factoryFn = function () { return provider.useValue; };
        resolvedDeps = _EMPTY_LIST;
    }
    return new ResolvedReflectiveFactory(factoryFn, resolvedDeps);
}
/**
 * Converts the {\@link Provider} into {\@link ResolvedProvider}.
 *
 * {\@link Injector} internally only uses {\@link ResolvedProvider}, {\@link Provider} contains
 * convenience provider syntax.
 * @param {?} provider
 * @return {?}
 */
function resolveReflectiveProvider(provider) {
    return new ResolvedReflectiveProvider_(ReflectiveKey.get(provider.provide), [resolveReflectiveFactory(provider)], provider.multi || false);
}
/**
 * Resolve a list of Providers.
 * @param {?} providers
 * @return {?}
 */
function resolveReflectiveProviders(providers) {
    var /** @type {?} */ normalized = _normalizeProviders(providers, []);
    var /** @type {?} */ resolved = normalized.map(resolveReflectiveProvider);
    var /** @type {?} */ resolvedProviderMap = mergeResolvedReflectiveProviders(resolved, new Map());
    return Array.from(resolvedProviderMap.values());
}
/**
 * Merges a list of ResolvedProviders into a list where
 * each key is contained exactly once and multi providers
 * have been merged.
 * @param {?} providers
 * @param {?} normalizedProvidersMap
 * @return {?}
 */
function mergeResolvedReflectiveProviders(providers, normalizedProvidersMap) {
    for (var /** @type {?} */ i = 0; i < providers.length; i++) {
        var /** @type {?} */ provider = providers[i];
        var /** @type {?} */ existing = normalizedProvidersMap.get(provider.key.id);
        if (existing) {
            if (provider.multiProvider !== existing.multiProvider) {
                throw mixingMultiProvidersWithRegularProvidersError(existing, provider);
            }
            if (provider.multiProvider) {
                for (var /** @type {?} */ j = 0; j < provider.resolvedFactories.length; j++) {
                    existing.resolvedFactories.push(provider.resolvedFactories[j]);
                }
            }
            else {
                normalizedProvidersMap.set(provider.key.id, provider);
            }
        }
        else {
            var /** @type {?} */ resolvedProvider = void 0;
            if (provider.multiProvider) {
                resolvedProvider = new ResolvedReflectiveProvider_(provider.key, provider.resolvedFactories.slice(), provider.multiProvider);
            }
            else {
                resolvedProvider = provider;
            }
            normalizedProvidersMap.set(provider.key.id, resolvedProvider);
        }
    }
    return normalizedProvidersMap;
}
/**
 * @param {?} providers
 * @param {?} res
 * @return {?}
 */
function _normalizeProviders(providers, res) {
    providers.forEach(function (b) {
        if (b instanceof Type) {
            res.push({ provide: b, useClass: b });
        }
        else if (b && typeof b == 'object' && ((b)).provide !== undefined) {
            res.push(/** @type {?} */ (b));
        }
        else if (b instanceof Array) {
            _normalizeProviders(b, res);
        }
        else {
            throw invalidProviderError(b);
        }
    });
    return res;
}
/**
 * @param {?} typeOrFunc
 * @param {?=} dependencies
 * @return {?}
 */
function constructDependencies(typeOrFunc, dependencies) {
    if (!dependencies) {
        return _dependenciesFor(typeOrFunc);
    }
    else {
        var /** @type {?} */ params_1 = dependencies.map(function (t) { return [t]; });
        return dependencies.map(function (t) { return _extractToken(typeOrFunc, t, params_1); });
    }
}
/**
 * @param {?} typeOrFunc
 * @return {?}
 */
function _dependenciesFor(typeOrFunc) {
    var /** @type {?} */ params = reflector.parameters(typeOrFunc);
    if (!params)
        return [];
    if (params.some(function (p) { return p == null; })) {
        throw noAnnotationError(typeOrFunc, params);
    }
    return params.map(function (p) { return _extractToken(typeOrFunc, p, params); });
}
/**
 * @param {?} typeOrFunc
 * @param {?} metadata
 * @param {?} params
 * @return {?}
 */
function _extractToken(typeOrFunc, metadata, params) {
    var /** @type {?} */ token = null;
    var /** @type {?} */ optional = false;
    if (!Array.isArray(metadata)) {
        if (metadata instanceof Inject) {
            return _createDependency(metadata.token, optional, null);
        }
        else {
            return _createDependency(metadata, optional, null);
        }
    }
    var /** @type {?} */ visibility = null;
    for (var /** @type {?} */ i = 0; i < metadata.length; ++i) {
        var /** @type {?} */ paramMetadata = metadata[i];
        if (paramMetadata instanceof Type) {
            token = paramMetadata;
        }
        else if (paramMetadata instanceof Inject) {
            token = paramMetadata.token;
        }
        else if (paramMetadata instanceof Optional) {
            optional = true;
        }
        else if (paramMetadata instanceof Self || paramMetadata instanceof SkipSelf) {
            visibility = paramMetadata;
        }
        else if (paramMetadata instanceof InjectionToken) {
            token = paramMetadata;
        }
    }
    token = resolveForwardRef(token);
    if (token != null) {
        return _createDependency(token, optional, visibility);
    }
    else {
        throw noAnnotationError(typeOrFunc, params);
    }
}
/**
 * @param {?} token
 * @param {?} optional
 * @param {?} visibility
 * @return {?}
 */
function _createDependency(token, optional, visibility) {
    return new ReflectiveDependency(ReflectiveKey.get(token), optional, visibility);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
// Threshold for the dynamic version
var UNDEFINED = new Object();
/**
 * A ReflectiveDependency injection container used for instantiating objects and resolving
 * dependencies.
 *
 * An `Injector` is a replacement for a `new` operator, which can automatically resolve the
 * constructor dependencies.
 *
 * In typical use, application code asks for the dependencies in the constructor and they are
 * resolved by the `Injector`.
 *
 * ### Example ([live demo](http://plnkr.co/edit/jzjec0?p=preview))
 *
 * The following example creates an `Injector` configured to create `Engine` and `Car`.
 *
 * ```typescript
 * \@Injectable()
 * class Engine {
 * }
 *
 * \@Injectable()
 * class Car {
 *   constructor(public engine:Engine) {}
 * }
 *
 * var injector = ReflectiveInjector.resolveAndCreate([Car, Engine]);
 * var car = injector.get(Car);
 * expect(car instanceof Car).toBe(true);
 * expect(car.engine instanceof Engine).toBe(true);
 * ```
 *
 * Notice, we don't use the `new` operator because we explicitly want to have the `Injector`
 * resolve all of the object's dependencies automatically.
 *
 * \@stable
 * @abstract
 */
var ReflectiveInjector = (function () {
    function ReflectiveInjector() {
    }
    /**
     * Turns an array of provider definitions into an array of resolved providers.
     *
     * A resolution is a process of flattening multiple nested arrays and converting individual
     * providers into an array of {\@link ResolvedReflectiveProvider}s.
     *
     * ### Example ([live demo](http://plnkr.co/edit/AiXTHi?p=preview))
     *
     * ```typescript
     * \@Injectable()
     * class Engine {
     * }
     *
     * \@Injectable()
     * class Car {
     *   constructor(public engine:Engine) {}
     * }
     *
     * var providers = ReflectiveInjector.resolve([Car, [[Engine]]]);
     *
     * expect(providers.length).toEqual(2);
     *
     * expect(providers[0] instanceof ResolvedReflectiveProvider).toBe(true);
     * expect(providers[0].key.displayName).toBe("Car");
     * expect(providers[0].dependencies.length).toEqual(1);
     * expect(providers[0].factory).toBeDefined();
     *
     * expect(providers[1].key.displayName).toBe("Engine");
     * });
     * ```
     *
     * See {\@link ReflectiveInjector#fromResolvedProviders} for more info.
     * @param {?} providers
     * @return {?}
     */
    ReflectiveInjector.resolve = function (providers) {
        return resolveReflectiveProviders(providers);
    };
    /**
     * Resolves an array of providers and creates an injector from those providers.
     *
     * The passed-in providers can be an array of `Type`, {\@link Provider},
     * or a recursive array of more providers.
     *
     * ### Example ([live demo](http://plnkr.co/edit/ePOccA?p=preview))
     *
     * ```typescript
     * \@Injectable()
     * class Engine {
     * }
     *
     * \@Injectable()
     * class Car {
     *   constructor(public engine:Engine) {}
     * }
     *
     * var injector = ReflectiveInjector.resolveAndCreate([Car, Engine]);
     * expect(injector.get(Car) instanceof Car).toBe(true);
     * ```
     *
     * This function is slower than the corresponding `fromResolvedProviders`
     * because it needs to resolve the passed-in providers first.
     * See {\@link ReflectiveInjector#resolve} and {\@link ReflectiveInjector#fromResolvedProviders}.
     * @param {?} providers
     * @param {?=} parent
     * @return {?}
     */
    ReflectiveInjector.resolveAndCreate = function (providers, parent) {
        var /** @type {?} */ ResolvedReflectiveProviders = ReflectiveInjector.resolve(providers);
        return ReflectiveInjector.fromResolvedProviders(ResolvedReflectiveProviders, parent);
    };
    /**
     * Creates an injector from previously resolved providers.
     *
     * This API is the recommended way to construct injectors in performance-sensitive parts.
     *
     * ### Example ([live demo](http://plnkr.co/edit/KrSMci?p=preview))
     *
     * ```typescript
     * \@Injectable()
     * class Engine {
     * }
     *
     * \@Injectable()
     * class Car {
     *   constructor(public engine:Engine) {}
     * }
     *
     * var providers = ReflectiveInjector.resolve([Car, Engine]);
     * var injector = ReflectiveInjector.fromResolvedProviders(providers);
     * expect(injector.get(Car) instanceof Car).toBe(true);
     * ```
     * \@experimental
     * @param {?} providers
     * @param {?=} parent
     * @return {?}
     */
    ReflectiveInjector.fromResolvedProviders = function (providers, parent) {
        return new ReflectiveInjector_(providers, parent);
    };
    /**
     * Parent of this injector.
     *
     * <!-- TODO: Add a link to the section of the user guide talking about hierarchical injection.
     * -->
     *
     * ### Example ([live demo](http://plnkr.co/edit/eosMGo?p=preview))
     *
     * ```typescript
     * var parent = ReflectiveInjector.resolveAndCreate([]);
     * var child = parent.resolveAndCreateChild([]);
     * expect(child.parent).toBe(parent);
     * ```
     * @abstract
     * @return {?}
     */
    ReflectiveInjector.prototype.parent = function () { };
    /**
     * Resolves an array of providers and creates a child injector from those providers.
     *
     * <!-- TODO: Add a link to the section of the user guide talking about hierarchical injection.
     * -->
     *
     * The passed-in providers can be an array of `Type`, {\@link Provider},
     * or a recursive array of more providers.
     *
     * ### Example ([live demo](http://plnkr.co/edit/opB3T4?p=preview))
     *
     * ```typescript
     * class ParentProvider {}
     * class ChildProvider {}
     *
     * var parent = ReflectiveInjector.resolveAndCreate([ParentProvider]);
     * var child = parent.resolveAndCreateChild([ChildProvider]);
     *
     * expect(child.get(ParentProvider) instanceof ParentProvider).toBe(true);
     * expect(child.get(ChildProvider) instanceof ChildProvider).toBe(true);
     * expect(child.get(ParentProvider)).toBe(parent.get(ParentProvider));
     * ```
     *
     * This function is slower than the corresponding `createChildFromResolved`
     * because it needs to resolve the passed-in providers first.
     * See {\@link ReflectiveInjector#resolve} and {\@link ReflectiveInjector#createChildFromResolved}.
     * @abstract
     * @param {?} providers
     * @return {?}
     */
    ReflectiveInjector.prototype.resolveAndCreateChild = function (providers) { };
    /**
     * Creates a child injector from previously resolved providers.
     *
     * <!-- TODO: Add a link to the section of the user guide talking about hierarchical injection.
     * -->
     *
     * This API is the recommended way to construct injectors in performance-sensitive parts.
     *
     * ### Example ([live demo](http://plnkr.co/edit/VhyfjN?p=preview))
     *
     * ```typescript
     * class ParentProvider {}
     * class ChildProvider {}
     *
     * var parentProviders = ReflectiveInjector.resolve([ParentProvider]);
     * var childProviders = ReflectiveInjector.resolve([ChildProvider]);
     *
     * var parent = ReflectiveInjector.fromResolvedProviders(parentProviders);
     * var child = parent.createChildFromResolved(childProviders);
     *
     * expect(child.get(ParentProvider) instanceof ParentProvider).toBe(true);
     * expect(child.get(ChildProvider) instanceof ChildProvider).toBe(true);
     * expect(child.get(ParentProvider)).toBe(parent.get(ParentProvider));
     * ```
     * @abstract
     * @param {?} providers
     * @return {?}
     */
    ReflectiveInjector.prototype.createChildFromResolved = function (providers) { };
    /**
     * Resolves a provider and instantiates an object in the context of the injector.
     *
     * The created object does not get cached by the injector.
     *
     * ### Example ([live demo](http://plnkr.co/edit/yvVXoB?p=preview))
     *
     * ```typescript
     * \@Injectable()
     * class Engine {
     * }
     *
     * \@Injectable()
     * class Car {
     *   constructor(public engine:Engine) {}
     * }
     *
     * var injector = ReflectiveInjector.resolveAndCreate([Engine]);
     *
     * var car = injector.resolveAndInstantiate(Car);
     * expect(car.engine).toBe(injector.get(Engine));
     * expect(car).not.toBe(injector.resolveAndInstantiate(Car));
     * ```
     * @abstract
     * @param {?} provider
     * @return {?}
     */
    ReflectiveInjector.prototype.resolveAndInstantiate = function (provider) { };
    /**
     * Instantiates an object using a resolved provider in the context of the injector.
     *
     * The created object does not get cached by the injector.
     *
     * ### Example ([live demo](http://plnkr.co/edit/ptCImQ?p=preview))
     *
     * ```typescript
     * \@Injectable()
     * class Engine {
     * }
     *
     * \@Injectable()
     * class Car {
     *   constructor(public engine:Engine) {}
     * }
     *
     * var injector = ReflectiveInjector.resolveAndCreate([Engine]);
     * var carProvider = ReflectiveInjector.resolve([Car])[0];
     * var car = injector.instantiateResolved(carProvider);
     * expect(car.engine).toBe(injector.get(Engine));
     * expect(car).not.toBe(injector.instantiateResolved(carProvider));
     * ```
     * @abstract
     * @param {?} provider
     * @return {?}
     */
    ReflectiveInjector.prototype.instantiateResolved = function (provider) { };
    /**
     * @abstract
     * @param {?} token
     * @param {?=} notFoundValue
     * @return {?}
     */
    ReflectiveInjector.prototype.get = function (token, notFoundValue) { };
    return ReflectiveInjector;
}());
var ReflectiveInjector_ = (function () {
    /**
     * Private
     * @param {?} _providers
     * @param {?=} _parent
     */
    function ReflectiveInjector_(_providers, _parent) {
        /**
         * \@internal
         */
        this._constructionCounter = 0;
        this._providers = _providers;
        this._parent = _parent || null;
        var len = _providers.length;
        this.keyIds = new Array(len);
        this.objs = new Array(len);
        for (var i = 0; i < len; i++) {
            this.keyIds[i] = _providers[i].key.id;
            this.objs[i] = UNDEFINED;
        }
    }
    /**
     * @param {?} token
     * @param {?=} notFoundValue
     * @return {?}
     */
    ReflectiveInjector_.prototype.get = function (token, notFoundValue) {
        if (notFoundValue === void 0) { notFoundValue = THROW_IF_NOT_FOUND; }
        return this._getByKey(ReflectiveKey.get(token), null, notFoundValue);
    };
    Object.defineProperty(ReflectiveInjector_.prototype, "parent", {
        /**
         * @return {?}
         */
        get: function () { return this._parent; },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} providers
     * @return {?}
     */
    ReflectiveInjector_.prototype.resolveAndCreateChild = function (providers) {
        var /** @type {?} */ ResolvedReflectiveProviders = ReflectiveInjector.resolve(providers);
        return this.createChildFromResolved(ResolvedReflectiveProviders);
    };
    /**
     * @param {?} providers
     * @return {?}
     */
    ReflectiveInjector_.prototype.createChildFromResolved = function (providers) {
        var /** @type {?} */ inj = new ReflectiveInjector_(providers);
        inj._parent = this;
        return inj;
    };
    /**
     * @param {?} provider
     * @return {?}
     */
    ReflectiveInjector_.prototype.resolveAndInstantiate = function (provider) {
        return this.instantiateResolved(ReflectiveInjector.resolve([provider])[0]);
    };
    /**
     * @param {?} provider
     * @return {?}
     */
    ReflectiveInjector_.prototype.instantiateResolved = function (provider) {
        return this._instantiateProvider(provider);
    };
    /**
     * @param {?} index
     * @return {?}
     */
    ReflectiveInjector_.prototype.getProviderAtIndex = function (index) {
        if (index < 0 || index >= this._providers.length) {
            throw outOfBoundsError(index);
        }
        return this._providers[index];
    };
    /**
     * \@internal
     * @param {?} provider
     * @return {?}
     */
    ReflectiveInjector_.prototype._new = function (provider) {
        if (this._constructionCounter++ > this._getMaxNumberOfObjects()) {
            throw cyclicDependencyError(this, provider.key);
        }
        return this._instantiateProvider(provider);
    };
    /**
     * @return {?}
     */
    ReflectiveInjector_.prototype._getMaxNumberOfObjects = function () { return this.objs.length; };
    /**
     * @param {?} provider
     * @return {?}
     */
    ReflectiveInjector_.prototype._instantiateProvider = function (provider) {
        if (provider.multiProvider) {
            var /** @type {?} */ res = new Array(provider.resolvedFactories.length);
            for (var /** @type {?} */ i = 0; i < provider.resolvedFactories.length; ++i) {
                res[i] = this._instantiate(provider, provider.resolvedFactories[i]);
            }
            return res;
        }
        else {
            return this._instantiate(provider, provider.resolvedFactories[0]);
        }
    };
    /**
     * @param {?} provider
     * @param {?} ResolvedReflectiveFactory
     * @return {?}
     */
    ReflectiveInjector_.prototype._instantiate = function (provider, ResolvedReflectiveFactory$$1) {
        var _this = this;
        var /** @type {?} */ factory = ResolvedReflectiveFactory$$1.factory;
        var /** @type {?} */ deps;
        try {
            deps =
                ResolvedReflectiveFactory$$1.dependencies.map(function (dep) { return _this._getByReflectiveDependency(dep); });
        }
        catch (e) {
            if (e.addKey) {
                e.addKey(this, provider.key);
            }
            throw e;
        }
        var /** @type {?} */ obj;
        try {
            obj = factory.apply(void 0, deps);
        }
        catch (e) {
            throw instantiationError(this, e, e.stack, provider.key);
        }
        return obj;
    };
    /**
     * @param {?} dep
     * @return {?}
     */
    ReflectiveInjector_.prototype._getByReflectiveDependency = function (dep) {
        return this._getByKey(dep.key, dep.visibility, dep.optional ? null : THROW_IF_NOT_FOUND);
    };
    /**
     * @param {?} key
     * @param {?} visibility
     * @param {?} notFoundValue
     * @return {?}
     */
    ReflectiveInjector_.prototype._getByKey = function (key, visibility, notFoundValue) {
        if (key === INJECTOR_KEY) {
            return this;
        }
        if (visibility instanceof Self) {
            return this._getByKeySelf(key, notFoundValue);
        }
        else {
            return this._getByKeyDefault(key, notFoundValue, visibility);
        }
    };
    /**
     * @param {?} keyId
     * @return {?}
     */
    ReflectiveInjector_.prototype._getObjByKeyId = function (keyId) {
        for (var /** @type {?} */ i = 0; i < this.keyIds.length; i++) {
            if (this.keyIds[i] === keyId) {
                if (this.objs[i] === UNDEFINED) {
                    this.objs[i] = this._new(this._providers[i]);
                }
                return this.objs[i];
            }
        }
        return UNDEFINED;
    };
    /**
     * \@internal
     * @param {?} key
     * @param {?} notFoundValue
     * @return {?}
     */
    ReflectiveInjector_.prototype._throwOrNull = function (key, notFoundValue) {
        if (notFoundValue !== THROW_IF_NOT_FOUND) {
            return notFoundValue;
        }
        else {
            throw noProviderError(this, key);
        }
    };
    /**
     * \@internal
     * @param {?} key
     * @param {?} notFoundValue
     * @return {?}
     */
    ReflectiveInjector_.prototype._getByKeySelf = function (key, notFoundValue) {
        var /** @type {?} */ obj = this._getObjByKeyId(key.id);
        return (obj !== UNDEFINED) ? obj : this._throwOrNull(key, notFoundValue);
    };
    /**
     * \@internal
     * @param {?} key
     * @param {?} notFoundValue
     * @param {?} visibility
     * @return {?}
     */
    ReflectiveInjector_.prototype._getByKeyDefault = function (key, notFoundValue, visibility) {
        var /** @type {?} */ inj;
        if (visibility instanceof SkipSelf) {
            inj = this._parent;
        }
        else {
            inj = this;
        }
        while (inj instanceof ReflectiveInjector_) {
            var /** @type {?} */ inj_ = (inj);
            var /** @type {?} */ obj = inj_._getObjByKeyId(key.id);
            if (obj !== UNDEFINED)
                return obj;
            inj = inj_._parent;
        }
        if (inj !== null) {
            return inj.get(key.token, notFoundValue);
        }
        else {
            return this._throwOrNull(key, notFoundValue);
        }
    };
    Object.defineProperty(ReflectiveInjector_.prototype, "displayName", {
        /**
         * @return {?}
         */
        get: function () {
            var /** @type {?} */ providers = _mapProviders(this, function (b) { return ' "' + b.key.displayName + '" '; })
                .join(', ');
            return "ReflectiveInjector(providers: [" + providers + "])";
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ReflectiveInjector_.prototype.toString = function () { return this.displayName; };
    return ReflectiveInjector_;
}());
var INJECTOR_KEY = ReflectiveKey.get(Injector);
/**
 * @param {?} injector
 * @param {?} fn
 * @return {?}
 */
function _mapProviders(injector, fn) {
    var /** @type {?} */ res = new Array(injector._providers.length);
    for (var /** @type {?} */ i = 0; i < injector._providers.length; ++i) {
        res[i] = fn(injector.getProviderAtIndex(i));
    }
    return res;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * The `di` module provides dependency injection container services.
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Determine if the argument is shaped like a Promise
 * @param {?} obj
 * @return {?}
 */
function isPromise(obj) {
    // allow any Promise/A+ compliant thenable.
    // It's up to the caller to ensure that obj.then conforms to the spec
    return !!obj && typeof obj.then === 'function';
}
/**
 * Determine if the argument is an Observable
 * @param {?} obj
 * @return {?}
 */
function isObservable(obj) {
    // TODO use Symbol.observable when https://github.com/ReactiveX/rxjs/issues/2415 will be resolved
    return !!obj && typeof obj.subscribe === 'function';
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A function that will be executed when an application is initialized.
 * \@experimental
 */
var APP_INITIALIZER = new InjectionToken('Application Initializer');
/**
 * A class that reflects the state of running {\@link APP_INITIALIZER}s.
 *
 * \@experimental
 */
var ApplicationInitStatus = (function () {
    /**
     * @param {?} appInits
     */
    function ApplicationInitStatus(appInits) {
        var _this = this;
        this.appInits = appInits;
        this.initialized = false;
        this._done = false;
        this._donePromise = new Promise(function (res, rej) {
            _this.resolve = res;
            _this.reject = rej;
        });
    }
    /**
     * \@internal
     * @return {?}
     */
    ApplicationInitStatus.prototype.runInitializers = function () {
        var _this = this;
        if (this.initialized) {
            return;
        }
        var /** @type {?} */ asyncInitPromises = [];
        var /** @type {?} */ complete = function () {
            _this._done = true;
            _this.resolve();
        };
        if (this.appInits) {
            for (var /** @type {?} */ i = 0; i < this.appInits.length; i++) {
                var /** @type {?} */ initResult = this.appInits[i]();
                if (isPromise(initResult)) {
                    asyncInitPromises.push(initResult);
                }
            }
        }
        Promise.all(asyncInitPromises).then(function () { complete(); }).catch(function (e) { _this.reject(e); });
        if (asyncInitPromises.length === 0) {
            complete();
        }
        this.initialized = true;
    };
    Object.defineProperty(ApplicationInitStatus.prototype, "done", {
        /**
         * @return {?}
         */
        get: function () { return this._done; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ApplicationInitStatus.prototype, "donePromise", {
        /**
         * @return {?}
         */
        get: function () { return this._donePromise; },
        enumerable: true,
        configurable: true
    });
    return ApplicationInitStatus;
}());
ApplicationInitStatus.decorators = [
    { type: Injectable },
];
/**
 * @nocollapse
 */
ApplicationInitStatus.ctorParameters = function () { return [
    { type: Array, decorators: [{ type: Inject, args: [APP_INITIALIZER,] }, { type: Optional },] },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A DI Token representing a unique string id assigned to the application by Angular and used
 * primarily for prefixing application attributes and CSS styles when
 * {\@link ViewEncapsulation#Emulated} is being used.
 *
 * If you need to avoid randomly generated value to be used as an application id, you can provide
 * a custom value via a DI provider <!-- TODO: provider --> configuring the root {\@link Injector}
 * using this token.
 * \@experimental
 */
var APP_ID = new InjectionToken('AppId');
/**
 * @return {?}
 */
function _appIdRandomProviderFactory() {
    return "" + _randomChar() + _randomChar() + _randomChar();
}
/**
 * Providers that will generate a random APP_ID_TOKEN.
 * \@experimental
 */
var APP_ID_RANDOM_PROVIDER = {
    provide: APP_ID,
    useFactory: _appIdRandomProviderFactory,
    deps: [],
};
/**
 * @return {?}
 */
function _randomChar() {
    return String.fromCharCode(97 + Math.floor(Math.random() * 25));
}
/**
 * A function that will be executed when a platform is initialized.
 * \@experimental
 */
var PLATFORM_INITIALIZER = new InjectionToken('Platform Initializer');
/**
 * A token that indicates an opaque platform id.
 * \@experimental
 */
var PLATFORM_ID = new InjectionToken('Platform ID');
/**
 * All callbacks provided via this token will be called for every component that is bootstrapped.
 * Signature of the callback:
 *
 * `(componentRef: ComponentRef) => void`.
 *
 * \@experimental
 */
var APP_BOOTSTRAP_LISTENER = new InjectionToken('appBootstrapListener');
/**
 * A token which indicates the root directory of the application
 * \@experimental
 */
var PACKAGE_ROOT_URL = new InjectionToken('Application Packages Root URL');
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var Console = (function () {
    function Console() {
    }
    /**
     * @param {?} message
     * @return {?}
     */
    Console.prototype.log = function (message) {
        // tslint:disable-next-line:no-console
        console.log(message);
    };
    /**
     * @param {?} message
     * @return {?}
     */
    Console.prototype.warn = function (message) {
        // tslint:disable-next-line:no-console
        console.warn(message);
    };
    return Console;
}());
Console.decorators = [
    { type: Injectable },
];
/**
 * @nocollapse
 */
Console.ctorParameters = function () { return []; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Combination of NgModuleFactory and ComponentFactorys.
 *
 * \@experimental
 */
var ModuleWithComponentFactories = (function () {
    /**
     * @param {?} ngModuleFactory
     * @param {?} componentFactories
     */
    function ModuleWithComponentFactories(ngModuleFactory, componentFactories) {
        this.ngModuleFactory = ngModuleFactory;
        this.componentFactories = componentFactories;
    }
    return ModuleWithComponentFactories;
}());
/**
 * @return {?}
 */
function _throwError() {
    throw new Error("Runtime compiler is not loaded");
}
/**
 * Low-level service for running the angular compiler during runtime
 * to create {\@link ComponentFactory}s, which
 * can later be used to create and render a Component instance.
 *
 * Each `\@NgModule` provides an own `Compiler` to its injector,
 * that will use the directives/pipes of the ng module for compilation
 * of components.
 * \@stable
 */
var Compiler = (function () {
    function Compiler() {
    }
    /**
     * Compiles the given NgModule and all of its components. All templates of the components listed
     * in `entryComponents` have to be inlined.
     * @template T
     * @param {?} moduleType
     * @return {?}
     */
    Compiler.prototype.compileModuleSync = function (moduleType) { throw _throwError(); };
    /**
     * Compiles the given NgModule and all of its components
     * @template T
     * @param {?} moduleType
     * @return {?}
     */
    Compiler.prototype.compileModuleAsync = function (moduleType) { throw _throwError(); };
    /**
     * Same as {\@link #compileModuleSync} but also creates ComponentFactories for all components.
     * @template T
     * @param {?} moduleType
     * @return {?}
     */
    Compiler.prototype.compileModuleAndAllComponentsSync = function (moduleType) {
        throw _throwError();
    };
    /**
     * Same as {\@link #compileModuleAsync} but also creates ComponentFactories for all components.
     * @template T
     * @param {?} moduleType
     * @return {?}
     */
    Compiler.prototype.compileModuleAndAllComponentsAsync = function (moduleType) {
        throw _throwError();
    };
    /**
     * Exposes the CSS-style selectors that have been used in `ngContent` directives within
     * the template of the given component.
     * This is used by the `upgrade` library to compile the appropriate transclude content
     * in the AngularJS wrapper component.
     *
     * @deprecated since v4. Use ComponentFactory.ngContentSelectors instead.
     * @param {?} component
     * @return {?}
     */
    Compiler.prototype.getNgContentSelectors = function (component) { throw _throwError(); };
    /**
     * Clears all caches.
     * @return {?}
     */
    Compiler.prototype.clearCache = function () { };
    /**
     * Clears the cache for the given component/ngModule.
     * @param {?} type
     * @return {?}
     */
    Compiler.prototype.clearCacheFor = function (type) { };
    return Compiler;
}());
Compiler.decorators = [
    { type: Injectable },
];
/**
 * @nocollapse
 */
Compiler.ctorParameters = function () { return []; };
/**
 * Token to provide CompilerOptions in the platform injector.
 *
 * \@experimental
 */
var COMPILER_OPTIONS = new InjectionToken('compilerOptions');
/**
 * A factory for creating a Compiler
 *
 * \@experimental
 * @abstract
 */
var CompilerFactory = (function () {
    function CompilerFactory() {
    }
    /**
     * @abstract
     * @param {?=} options
     * @return {?}
     */
    CompilerFactory.prototype.createCompiler = function (options) { };
    return CompilerFactory;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Represents an instance of a Component created via a {\@link ComponentFactory}.
 *
 * `ComponentRef` provides access to the Component Instance as well other objects related to this
 * Component Instance and allows you to destroy the Component Instance via the {\@link #destroy}
 * method.
 * \@stable
 * @abstract
 */
var ComponentRef = (function () {
    function ComponentRef() {
    }
    /**
     * Location of the Host Element of this Component Instance.
     * @abstract
     * @return {?}
     */
    ComponentRef.prototype.location = function () { };
    /**
     * The injector on which the component instance exists.
     * @abstract
     * @return {?}
     */
    ComponentRef.prototype.injector = function () { };
    /**
     * The instance of the Component.
     * @abstract
     * @return {?}
     */
    ComponentRef.prototype.instance = function () { };
    /**
     * The {\@link ViewRef} of the Host View of this Component instance.
     * @abstract
     * @return {?}
     */
    ComponentRef.prototype.hostView = function () { };
    /**
     * The {\@link ChangeDetectorRef} of the Component instance.
     * @abstract
     * @return {?}
     */
    ComponentRef.prototype.changeDetectorRef = function () { };
    /**
     * The component type.
     * @abstract
     * @return {?}
     */
    ComponentRef.prototype.componentType = function () { };
    /**
     * Destroys the component instance and all of the data structures associated with it.
     * @abstract
     * @return {?}
     */
    ComponentRef.prototype.destroy = function () { };
    /**
     * Allows to register a callback that will be called when the component is destroyed.
     * @abstract
     * @param {?} callback
     * @return {?}
     */
    ComponentRef.prototype.onDestroy = function (callback) { };
    return ComponentRef;
}());
/**
 * \@stable
 * @abstract
 */
var ComponentFactory = (function () {
    function ComponentFactory() {
    }
    /**
     * @abstract
     * @return {?}
     */
    ComponentFactory.prototype.selector = function () { };
    /**
     * @abstract
     * @return {?}
     */
    ComponentFactory.prototype.componentType = function () { };
    /**
     * selector for all <ng-content> elements in the component.
     * @abstract
     * @return {?}
     */
    ComponentFactory.prototype.ngContentSelectors = function () { };
    /**
     * the inputs of the component.
     * @abstract
     * @return {?}
     */
    ComponentFactory.prototype.inputs = function () { };
    /**
     * the outputs of the component.
     * @abstract
     * @return {?}
     */
    ComponentFactory.prototype.outputs = function () { };
    /**
     * Creates a new component.
     * @abstract
     * @param {?} injector
     * @param {?=} projectableNodes
     * @param {?=} rootSelectorOrNode
     * @param {?=} ngModule
     * @return {?}
     */
    ComponentFactory.prototype.create = function (injector, projectableNodes, rootSelectorOrNode, ngModule) { };
    return ComponentFactory;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} component
 * @return {?}
 */
function noComponentFactoryError(component) {
    var /** @type {?} */ error = Error("No component factory found for " + stringify(component) + ". Did you add it to @NgModule.entryComponents?");
    ((error))[ERROR_COMPONENT] = component;
    return error;
}
var ERROR_COMPONENT = 'ngComponent';
/**
 * @param {?} error
 * @return {?}
 */
var _NullComponentFactoryResolver = (function () {
    function _NullComponentFactoryResolver() {
    }
    /**
     * @template T
     * @param {?} component
     * @return {?}
     */
    _NullComponentFactoryResolver.prototype.resolveComponentFactory = function (component) {
        throw noComponentFactoryError(component);
    };
    return _NullComponentFactoryResolver;
}());
/**
 * \@stable
 * @abstract
 */
var ComponentFactoryResolver = (function () {
    function ComponentFactoryResolver() {
    }
    /**
     * @abstract
     * @template T
     * @param {?} component
     * @return {?}
     */
    ComponentFactoryResolver.prototype.resolveComponentFactory = function (component) { };
    return ComponentFactoryResolver;
}());
ComponentFactoryResolver.NULL = new _NullComponentFactoryResolver();
var CodegenComponentFactoryResolver = (function () {
    /**
     * @param {?} factories
     * @param {?} _parent
     * @param {?} _ngModule
     */
    function CodegenComponentFactoryResolver(factories, _parent, _ngModule) {
        this._parent = _parent;
        this._ngModule = _ngModule;
        this._factories = new Map();
        for (var i = 0; i < factories.length; i++) {
            var factory = factories[i];
            this._factories.set(factory.componentType, factory);
        }
    }
    /**
     * @template T
     * @param {?} component
     * @return {?}
     */
    CodegenComponentFactoryResolver.prototype.resolveComponentFactory = function (component) {
        var /** @type {?} */ factory = this._factories.get(component);
        if (!factory && this._parent) {
            factory = this._parent.resolveComponentFactory(component);
        }
        if (!factory) {
            throw noComponentFactoryError(component);
        }
        return new ComponentFactoryBoundToModule(factory, this._ngModule);
    };
    return CodegenComponentFactoryResolver;
}());
var ComponentFactoryBoundToModule = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ComponentFactoryBoundToModule, _super);
    /**
     * @param {?} factory
     * @param {?} ngModule
     */
    function ComponentFactoryBoundToModule(factory, ngModule) {
        var _this = _super.call(this) || this;
        _this.factory = factory;
        _this.ngModule = ngModule;
        return _this;
    }
    Object.defineProperty(ComponentFactoryBoundToModule.prototype, "selector", {
        /**
         * @return {?}
         */
        get: function () { return this.factory.selector; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ComponentFactoryBoundToModule.prototype, "componentType", {
        /**
         * @return {?}
         */
        get: function () { return this.factory.componentType; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ComponentFactoryBoundToModule.prototype, "ngContentSelectors", {
        /**
         * @return {?}
         */
        get: function () { return this.factory.ngContentSelectors; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ComponentFactoryBoundToModule.prototype, "inputs", {
        /**
         * @return {?}
         */
        get: function () { return this.factory.inputs; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ComponentFactoryBoundToModule.prototype, "outputs", {
        /**
         * @return {?}
         */
        get: function () { return this.factory.outputs; },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} injector
     * @param {?=} projectableNodes
     * @param {?=} rootSelectorOrNode
     * @param {?=} ngModule
     * @return {?}
     */
    ComponentFactoryBoundToModule.prototype.create = function (injector, projectableNodes, rootSelectorOrNode, ngModule) {
        return this.factory.create(injector, projectableNodes, rootSelectorOrNode, ngModule || this.ngModule);
    };
    return ComponentFactoryBoundToModule;
}(ComponentFactory));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Represents an instance of an NgModule created via a {\@link NgModuleFactory}.
 *
 * `NgModuleRef` provides access to the NgModule Instance as well other objects related to this
 * NgModule Instance.
 *
 * \@stable
 * @abstract
 */
var NgModuleRef = (function () {
    function NgModuleRef() {
    }
    /**
     * The injector that contains all of the providers of the NgModule.
     * @abstract
     * @return {?}
     */
    NgModuleRef.prototype.injector = function () { };
    /**
     * The ComponentFactoryResolver to get hold of the ComponentFactories
     * declared in the `entryComponents` property of the module.
     * @abstract
     * @return {?}
     */
    NgModuleRef.prototype.componentFactoryResolver = function () { };
    /**
     * The NgModule instance.
     * @abstract
     * @return {?}
     */
    NgModuleRef.prototype.instance = function () { };
    /**
     * Destroys the module instance and all of the data structures associated with it.
     * @abstract
     * @return {?}
     */
    NgModuleRef.prototype.destroy = function () { };
    /**
     * Allows to register a callback that will be called when the module is destroyed.
     * @abstract
     * @param {?} callback
     * @return {?}
     */
    NgModuleRef.prototype.onDestroy = function (callback) { };
    return NgModuleRef;
}());
/**
 * \@experimental
 * @abstract
 */
var NgModuleFactory = (function () {
    function NgModuleFactory() {
    }
    /**
     * @abstract
     * @return {?}
     */
    NgModuleFactory.prototype.moduleType = function () { };
    /**
     * @abstract
     * @param {?} parentInjector
     * @return {?}
     */
    NgModuleFactory.prototype.create = function (parentInjector) { };
    return NgModuleFactory;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var trace;
var events;
/**
 * @return {?}
 */
function detectWTF() {
    var /** @type {?} */ wtf = ((_global) /** TODO #9100 */)['wtf'];
    if (wtf) {
        trace = wtf['trace'];
        if (trace) {
            events = trace['events'];
            return true;
        }
    }
    return false;
}
/**
 * @param {?} signature
 * @param {?=} flags
 * @return {?}
 */
function createScope$1(signature, flags) {
    if (flags === void 0) { flags = null; }
    return events.createScope(signature, flags);
}
/**
 * @template T
 * @param {?} scope
 * @param {?=} returnValue
 * @return {?}
 */
function leave(scope, returnValue) {
    trace.leaveScope(scope, returnValue);
    return returnValue;
}
/**
 * @param {?} rangeType
 * @param {?} action
 * @return {?}
 */
function startTimeRange(rangeType, action) {
    return trace.beginTimeRange(rangeType, action);
}
/**
 * @param {?} range
 * @return {?}
 */
function endTimeRange(range) {
    trace.endTimeRange(range);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * True if WTF is enabled.
 */
var wtfEnabled = detectWTF();
/**
 * @param {?=} arg0
 * @param {?=} arg1
 * @return {?}
 */
function noopScope(arg0, arg1) {
    return null;
}
/**
 * Create trace scope.
 *
 * Scopes must be strictly nested and are analogous to stack frames, but
 * do not have to follow the stack frames. Instead it is recommended that they follow logical
 * nesting. You may want to use
 * [Event
 * Signatures](http://google.github.io/tracing-framework/instrumenting-code.html#custom-events)
 * as they are defined in WTF.
 *
 * Used to mark scope entry. The return value is used to leave the scope.
 *
 *     var myScope = wtfCreateScope('MyClass#myMethod(ascii someVal)');
 *
 *     someMethod() {
 *        var s = myScope('Foo'); // 'Foo' gets stored in tracing UI
 *        // DO SOME WORK HERE
 *        return wtfLeave(s, 123); // Return value 123
 *     }
 *
 * Note, adding try-finally block around the work to ensure that `wtfLeave` gets called can
 * negatively impact the performance of your application. For this reason we recommend that
 * you don't add them to ensure that `wtfLeave` gets called. In production `wtfLeave` is a noop and
 * so try-finally block has no value. When debugging perf issues, skipping `wtfLeave`, do to
 * exception, will produce incorrect trace, but presence of exception signifies logic error which
 * needs to be fixed before the app should be profiled. Add try-finally only when you expect that
 * an exception is expected during normal execution while profiling.
 *
 * \@experimental
 */
var wtfCreateScope = wtfEnabled ? createScope$1 : function (signature, flags) { return noopScope; };
/**
 * Used to mark end of Scope.
 *
 * - `scope` to end.
 * - `returnValue` (optional) to be passed to the WTF.
 *
 * Returns the `returnValue for easy chaining.
 * \@experimental
 */
var wtfLeave = wtfEnabled ? leave : function (s, r) { return r; };
/**
 * Used to mark Async start. Async are similar to scope but they don't have to be strictly nested.
 * The return value is used in the call to [endAsync]. Async ranges only work if WTF has been
 * enabled.
 *
 *     someMethod() {
 *        var s = wtfStartTimeRange('HTTP:GET', 'some.url');
 *        var future = new Future.delay(5).then((_) {
 *          wtfEndTimeRange(s);
 *        });
 *     }
 * \@experimental
 */
var wtfStartTimeRange = wtfEnabled ? startTimeRange : function (rangeType, action) { return null; };
/**
 * Ends a async time range operation.
 * [range] is the return value from [wtfStartTimeRange] Async ranges only work if WTF has been
 * enabled.
 * \@experimental
 */
var wtfEndTimeRange = wtfEnabled ? endTimeRange : function (r) { return null; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Use by directives and components to emit custom Events.
 *
 * ### Examples
 *
 * In the following example, `Zippy` alternatively emits `open` and `close` events when its
 * title gets clicked:
 *
 * ```
 * \@Component({
 *   selector: 'zippy',
 *   template: `
 *   <div class="zippy">
 *     <div (click)="toggle()">Toggle</div>
 *     <div [hidden]="!visible">
 *       <ng-content></ng-content>
 *     </div>
 *  </div>`})
 * export class Zippy {
 *   visible: boolean = true;
 *   \@Output() open: EventEmitter<any> = new EventEmitter();
 *   \@Output() close: EventEmitter<any> = new EventEmitter();
 *
 *   toggle() {
 *     this.visible = !this.visible;
 *     if (this.visible) {
 *       this.open.emit(null);
 *     } else {
 *       this.close.emit(null);
 *     }
 *   }
 * }
 * ```
 *
 * The events payload can be accessed by the parameter `$event` on the components output event
 * handler:
 *
 * ```
 * <zippy (open)="onOpen($event)" (close)="onClose($event)"></zippy>
 * ```
 *
 * Uses Rx.Observable but provides an adapter to make it work as specified here:
 * https://github.com/jhusain/observable-spec
 *
 * Once a reference implementation of the spec is available, switch to it.
 * \@stable
 */
var EventEmitter = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](EventEmitter, _super);
    /**
     * Creates an instance of {\@link EventEmitter}, which depending on `isAsync`,
     * delivers events synchronously or asynchronously.
     *
     * @param {?=} isAsync By default, events are delivered synchronously (default value: `false`).
     * Set to `true` for asynchronous event delivery.
     */
    function EventEmitter(isAsync) {
        if (isAsync === void 0) { isAsync = false; }
        var _this = _super.call(this) || this;
        _this.__isAsync = isAsync;
        return _this;
    }
    /**
     * @param {?=} value
     * @return {?}
     */
    EventEmitter.prototype.emit = function (value) { _super.prototype.next.call(this, value); };
    /**
     * @param {?=} generatorOrNext
     * @param {?=} error
     * @param {?=} complete
     * @return {?}
     */
    EventEmitter.prototype.subscribe = function (generatorOrNext, error, complete) {
        var /** @type {?} */ schedulerFn;
        var /** @type {?} */ errorFn = function (err) { return null; };
        var /** @type {?} */ completeFn = function () { return null; };
        if (generatorOrNext && typeof generatorOrNext === 'object') {
            schedulerFn = this.__isAsync ? function (value) {
                setTimeout(function () { return generatorOrNext.next(value); });
            } : function (value) { generatorOrNext.next(value); };
            if (generatorOrNext.error) {
                errorFn = this.__isAsync ? function (err) { setTimeout(function () { return generatorOrNext.error(err); }); } :
                    function (err) { generatorOrNext.error(err); };
            }
            if (generatorOrNext.complete) {
                completeFn = this.__isAsync ? function () { setTimeout(function () { return generatorOrNext.complete(); }); } :
                    function () { generatorOrNext.complete(); };
            }
        }
        else {
            schedulerFn = this.__isAsync ? function (value) { setTimeout(function () { return generatorOrNext(value); }); } :
                function (value) { generatorOrNext(value); };
            if (error) {
                errorFn =
                    this.__isAsync ? function (err) { setTimeout(function () { return error(err); }); } : function (err) { error(err); };
            }
            if (complete) {
                completeFn =
                    this.__isAsync ? function () { setTimeout(function () { return complete(); }); } : function () { complete(); };
            }
        }
        return _super.prototype.subscribe.call(this, schedulerFn, errorFn, completeFn);
    };
    return EventEmitter;
}(__WEBPACK_IMPORTED_MODULE_4_rxjs_Subject__["Subject"]));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * An injectable service for executing work inside or outside of the Angular zone.
 *
 * The most common use of this service is to optimize performance when starting a work consisting of
 * one or more asynchronous tasks that don't require UI updates or error handling to be handled by
 * Angular. Such tasks can be kicked off via {\@link #runOutsideAngular} and if needed, these tasks
 * can reenter the Angular zone via {\@link #run}.
 *
 * <!-- TODO: add/fix links to:
 *   - docs explaining zones and the use of zones in Angular and change-detection
 *   - link to runOutsideAngular/run (throughout this file!)
 *   -->
 *
 * ### Example
 *
 * ```
 * import {Component, NgZone} from '\@angular/core';
 * import {NgIf} from '\@angular/common';
 *
 * \@Component({
 *   selector: 'ng-zone-demo'.
 *   template: `
 *     <h2>Demo: NgZone</h2>
 *
 *     <p>Progress: {{progress}}%</p>
 *     <p *ngIf="progress >= 100">Done processing {{label}} of Angular zone!</p>
 *
 *     <button (click)="processWithinAngularZone()">Process within Angular zone</button>
 *     <button (click)="processOutsideOfAngularZone()">Process outside of Angular zone</button>
 *   `,
 * })
 * export class NgZoneDemo {
 *   progress: number = 0;
 *   label: string;
 *
 *   constructor(private _ngZone: NgZone) {}
 *
 *   // Loop inside the Angular zone
 *   // so the UI DOES refresh after each setTimeout cycle
 *   processWithinAngularZone() {
 *     this.label = 'inside';
 *     this.progress = 0;
 *     this._increaseProgress(() => console.log('Inside Done!'));
 *   }
 *
 *   // Loop outside of the Angular zone
 *   // so the UI DOES NOT refresh after each setTimeout cycle
 *   processOutsideOfAngularZone() {
 *     this.label = 'outside';
 *     this.progress = 0;
 *     this._ngZone.runOutsideAngular(() => {
 *       this._increaseProgress(() => {
 *       // reenter the Angular zone and display done
 *       this._ngZone.run(() => {console.log('Outside Done!') });
 *     }}));
 *   }
 *
 *   _increaseProgress(doneCallback: () => void) {
 *     this.progress += 1;
 *     console.log(`Current progress: ${this.progress}%`);
 *
 *     if (this.progress < 100) {
 *       window.setTimeout(() => this._increaseProgress(doneCallback)), 10)
 *     } else {
 *       doneCallback();
 *     }
 *   }
 * }
 * ```
 *
 * \@experimental
 */
var NgZone = (function () {
    /**
     * @param {?} __0
     */
    function NgZone(_a) {
        var _b = _a.enableLongStackTrace, enableLongStackTrace = _b === void 0 ? false : _b;
        this.hasPendingMicrotasks = false;
        this.hasPendingMacrotasks = false;
        /**
         * Whether there are no outstanding microtasks or macrotasks.
         */
        this.isStable = true;
        /**
         * Notifies when code enters Angular Zone. This gets fired first on VM Turn.
         */
        this.onUnstable = new EventEmitter(false);
        /**
         * Notifies when there is no more microtasks enqueue in the current VM Turn.
         * This is a hint for Angular to do change detection, which may enqueue more microtasks.
         * For this reason this event can fire multiple times per VM Turn.
         */
        this.onMicrotaskEmpty = new EventEmitter(false);
        /**
         * Notifies when the last `onMicrotaskEmpty` has run and there are no more microtasks, which
         * implies we are about to relinquish VM turn.
         * This event gets called just once.
         */
        this.onStable = new EventEmitter(false);
        /**
         * Notifies that an error has been delivered.
         */
        this.onError = new EventEmitter(false);
        if (typeof Zone == 'undefined') {
            throw new Error('Angular requires Zone.js prolyfill.');
        }
        Zone.assertZonePatched();
        var self = this;
        self._nesting = 0;
        self._outer = self._inner = Zone.current;
        if (Zone['wtfZoneSpec']) {
            self._inner = self._inner.fork(Zone['wtfZoneSpec']);
        }
        if (enableLongStackTrace && Zone['longStackTraceZoneSpec']) {
            self._inner = self._inner.fork(Zone['longStackTraceZoneSpec']);
        }
        forkInnerZoneWithAngularBehavior(self);
    }
    /**
     * @return {?}
     */
    NgZone.isInAngularZone = function () { return Zone.current.get('isAngularZone') === true; };
    /**
     * @return {?}
     */
    NgZone.assertInAngularZone = function () {
        if (!NgZone.isInAngularZone()) {
            throw new Error('Expected to be in Angular Zone, but it is not!');
        }
    };
    /**
     * @return {?}
     */
    NgZone.assertNotInAngularZone = function () {
        if (NgZone.isInAngularZone()) {
            throw new Error('Expected to not be in Angular Zone, but it is!');
        }
    };
    /**
     * Executes the `fn` function synchronously within the Angular zone and returns value returned by
     * the function.
     *
     * Running functions via `run` allows you to reenter Angular zone from a task that was executed
     * outside of the Angular zone (typically started via {\@link #runOutsideAngular}).
     *
     * Any future tasks or microtasks scheduled from within this function will continue executing from
     * within the Angular zone.
     *
     * If a synchronous error happens it will be rethrown and not reported via `onError`.
     * @param {?} fn
     * @return {?}
     */
    NgZone.prototype.run = function (fn) { return (((this)))._inner.run(fn); };
    /**
     * Same as `run`, except that synchronous errors are caught and forwarded via `onError` and not
     * rethrown.
     * @param {?} fn
     * @return {?}
     */
    NgZone.prototype.runGuarded = function (fn) { return (((this)))._inner.runGuarded(fn); };
    /**
     * Executes the `fn` function synchronously in Angular's parent zone and returns value returned by
     * the function.
     *
     * Running functions via {\@link #runOutsideAngular} allows you to escape Angular's zone and do
     * work that
     * doesn't trigger Angular change-detection or is subject to Angular's error handling.
     *
     * Any future tasks or microtasks scheduled from within this function will continue executing from
     * outside of the Angular zone.
     *
     * Use {\@link #run} to reenter the Angular zone and do work that updates the application model.
     * @param {?} fn
     * @return {?}
     */
    NgZone.prototype.runOutsideAngular = function (fn) { return (((this)))._outer.run(fn); };
    return NgZone;
}());
/**
 * @param {?} zone
 * @return {?}
 */
function checkStable(zone) {
    if (zone._nesting == 0 && !zone.hasPendingMicrotasks && !zone.isStable) {
        try {
            zone._nesting++;
            zone.onMicrotaskEmpty.emit(null);
        }
        finally {
            zone._nesting--;
            if (!zone.hasPendingMicrotasks) {
                try {
                    zone.runOutsideAngular(function () { return zone.onStable.emit(null); });
                }
                finally {
                    zone.isStable = true;
                }
            }
        }
    }
}
/**
 * @param {?} zone
 * @return {?}
 */
function forkInnerZoneWithAngularBehavior(zone) {
    zone._inner = zone._inner.fork({
        name: 'angular',
        properties: /** @type {?} */ ({ 'isAngularZone': true }),
        onInvokeTask: function (delegate, current, target, task, applyThis, applyArgs) {
            try {
                onEnter(zone);
                return delegate.invokeTask(target, task, applyThis, applyArgs);
            }
            finally {
                onLeave(zone);
            }
        },
        onInvoke: function (delegate, current, target, callback, applyThis, applyArgs, source) {
            try {
                onEnter(zone);
                return delegate.invoke(target, callback, applyThis, applyArgs, source);
            }
            finally {
                onLeave(zone);
            }
        },
        onHasTask: function (delegate, current, target, hasTaskState) {
            delegate.hasTask(target, hasTaskState);
            if (current === target) {
                // We are only interested in hasTask events which originate from our zone
                // (A child hasTask event is not interesting to us)
                if (hasTaskState.change == 'microTask') {
                    zone.hasPendingMicrotasks = hasTaskState.microTask;
                    checkStable(zone);
                }
                else if (hasTaskState.change == 'macroTask') {
                    zone.hasPendingMacrotasks = hasTaskState.macroTask;
                }
            }
        },
        onHandleError: function (delegate, current, target, error) {
            delegate.handleError(target, error);
            zone.runOutsideAngular(function () { return zone.onError.emit(error); });
            return false;
        }
    });
}
/**
 * @param {?} zone
 * @return {?}
 */
function onEnter(zone) {
    zone._nesting++;
    if (zone.isStable) {
        zone.isStable = false;
        zone.onUnstable.emit(null);
    }
}
/**
 * @param {?} zone
 * @return {?}
 */
function onLeave(zone) {
    zone._nesting--;
    checkStable(zone);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * The Testability service provides testing hooks that can be accessed from
 * the browser and by services such as Protractor. Each bootstrapped Angular
 * application on the page will have an instance of Testability.
 * \@experimental
 */
var Testability = (function () {
    /**
     * @param {?} _ngZone
     */
    function Testability(_ngZone) {
        this._ngZone = _ngZone;
        /**
         * \@internal
         */
        this._pendingCount = 0;
        /**
         * \@internal
         */
        this._isZoneStable = true;
        /**
         * Whether any work was done since the last 'whenStable' callback. This is
         * useful to detect if this could have potentially destabilized another
         * component while it is stabilizing.
         * \@internal
         */
        this._didWork = false;
        /**
         * \@internal
         */
        this._callbacks = [];
        this._watchAngularEvents();
    }
    /**
     * \@internal
     * @return {?}
     */
    Testability.prototype._watchAngularEvents = function () {
        var _this = this;
        this._ngZone.onUnstable.subscribe({
            next: function () {
                _this._didWork = true;
                _this._isZoneStable = false;
            }
        });
        this._ngZone.runOutsideAngular(function () {
            _this._ngZone.onStable.subscribe({
                next: function () {
                    NgZone.assertNotInAngularZone();
                    scheduleMicroTask(function () {
                        _this._isZoneStable = true;
                        _this._runCallbacksIfReady();
                    });
                }
            });
        });
    };
    /**
     * @return {?}
     */
    Testability.prototype.increasePendingRequestCount = function () {
        this._pendingCount += 1;
        this._didWork = true;
        return this._pendingCount;
    };
    /**
     * @return {?}
     */
    Testability.prototype.decreasePendingRequestCount = function () {
        this._pendingCount -= 1;
        if (this._pendingCount < 0) {
            throw new Error('pending async requests below zero');
        }
        this._runCallbacksIfReady();
        return this._pendingCount;
    };
    /**
     * @return {?}
     */
    Testability.prototype.isStable = function () {
        return this._isZoneStable && this._pendingCount == 0 && !this._ngZone.hasPendingMacrotasks;
    };
    /**
     * \@internal
     * @return {?}
     */
    Testability.prototype._runCallbacksIfReady = function () {
        var _this = this;
        if (this.isStable()) {
            // Schedules the call backs in a new frame so that it is always async.
            scheduleMicroTask(function () {
                while (_this._callbacks.length !== 0) {
                    (((_this._callbacks.pop())))(_this._didWork);
                }
                _this._didWork = false;
            });
        }
        else {
            // Not Ready
            this._didWork = true;
        }
    };
    /**
     * @param {?} callback
     * @return {?}
     */
    Testability.prototype.whenStable = function (callback) {
        this._callbacks.push(callback);
        this._runCallbacksIfReady();
    };
    /**
     * @return {?}
     */
    Testability.prototype.getPendingRequestCount = function () { return this._pendingCount; };
    /**
     * @deprecated use findProviders
     * @param {?} using
     * @param {?} provider
     * @param {?} exactMatch
     * @return {?}
     */
    Testability.prototype.findBindings = function (using, provider, exactMatch) {
        // TODO(juliemr): implement.
        return [];
    };
    /**
     * @param {?} using
     * @param {?} provider
     * @param {?} exactMatch
     * @return {?}
     */
    Testability.prototype.findProviders = function (using, provider, exactMatch) {
        // TODO(juliemr): implement.
        return [];
    };
    return Testability;
}());
Testability.decorators = [
    { type: Injectable },
];
/**
 * @nocollapse
 */
Testability.ctorParameters = function () { return [
    { type: NgZone, },
]; };
/**
 * A global registry of {\@link Testability} instances for specific elements.
 * \@experimental
 */
var TestabilityRegistry = (function () {
    function TestabilityRegistry() {
        /**
         * \@internal
         */
        this._applications = new Map();
        _testabilityGetter.addToWindow(this);
    }
    /**
     * @param {?} token
     * @param {?} testability
     * @return {?}
     */
    TestabilityRegistry.prototype.registerApplication = function (token, testability) {
        this._applications.set(token, testability);
    };
    /**
     * @param {?} elem
     * @return {?}
     */
    TestabilityRegistry.prototype.getTestability = function (elem) { return this._applications.get(elem) || null; };
    /**
     * @return {?}
     */
    TestabilityRegistry.prototype.getAllTestabilities = function () { return Array.from(this._applications.values()); };
    /**
     * @return {?}
     */
    TestabilityRegistry.prototype.getAllRootElements = function () { return Array.from(this._applications.keys()); };
    /**
     * @param {?} elem
     * @param {?=} findInAncestors
     * @return {?}
     */
    TestabilityRegistry.prototype.findTestabilityInTree = function (elem, findInAncestors) {
        if (findInAncestors === void 0) { findInAncestors = true; }
        return _testabilityGetter.findTestabilityInTree(this, elem, findInAncestors);
    };
    return TestabilityRegistry;
}());
TestabilityRegistry.decorators = [
    { type: Injectable },
];
/**
 * @nocollapse
 */
TestabilityRegistry.ctorParameters = function () { return []; };
var _NoopGetTestability = (function () {
    function _NoopGetTestability() {
    }
    /**
     * @param {?} registry
     * @return {?}
     */
    _NoopGetTestability.prototype.addToWindow = function (registry) { };
    /**
     * @param {?} registry
     * @param {?} elem
     * @param {?} findInAncestors
     * @return {?}
     */
    _NoopGetTestability.prototype.findTestabilityInTree = function (registry, elem, findInAncestors) {
        return null;
    };
    return _NoopGetTestability;
}());
/**
 * Set the {\@link GetTestability} implementation used by the Angular testing framework.
 * \@experimental
 * @param {?} getter
 * @return {?}
 */
function setTestabilityGetter(getter) {
    _testabilityGetter = getter;
}
var _testabilityGetter = new _NoopGetTestability();
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _devMode = true;
var _runModeLocked = false;
var _platform;
var ALLOW_MULTIPLE_PLATFORMS = new InjectionToken('AllowMultipleToken');
/**
 * Disable Angular's development mode, which turns off assertions and other
 * checks within the framework.
 *
 * One important assertion this disables verifies that a change detection pass
 * does not result in additional changes to any bindings (also known as
 * unidirectional data flow).
 *
 * \@stable
 * @return {?}
 */
function enableProdMode() {
    if (_runModeLocked) {
        throw new Error('Cannot enable prod mode after platform setup.');
    }
    _devMode = false;
}
/**
 * Returns whether Angular is in development mode. After called once,
 * the value is locked and won't change any more.
 *
 * By default, this is true, unless a user calls `enableProdMode` before calling this.
 *
 * \@experimental APIs related to application bootstrap are currently under review.
 * @return {?}
 */
function isDevMode() {
    _runModeLocked = true;
    return _devMode;
}
/**
 * A token for third-party components that can register themselves with NgProbe.
 *
 * \@experimental
 */
var NgProbeToken = (function () {
    /**
     * @param {?} name
     * @param {?} token
     */
    function NgProbeToken(name, token) {
        this.name = name;
        this.token = token;
    }
    return NgProbeToken;
}());
/**
 * Creates a platform.
 * Platforms have to be eagerly created via this function.
 *
 * \@experimental APIs related to application bootstrap are currently under review.
 * @param {?} injector
 * @return {?}
 */
function createPlatform(injector) {
    if (_platform && !_platform.destroyed &&
        !_platform.injector.get(ALLOW_MULTIPLE_PLATFORMS, false)) {
        throw new Error('There can be only one platform. Destroy the previous one to create a new one.');
    }
    _platform = injector.get(PlatformRef);
    var /** @type {?} */ inits = injector.get(PLATFORM_INITIALIZER, null);
    if (inits)
        inits.forEach(function (init) { return init(); });
    return _platform;
}
/**
 * Creates a factory for a platform
 *
 * \@experimental APIs related to application bootstrap are currently under review.
 * @param {?} parentPlatformFactory
 * @param {?} name
 * @param {?=} providers
 * @return {?}
 */
function createPlatformFactory(parentPlatformFactory, name, providers) {
    if (providers === void 0) { providers = []; }
    var /** @type {?} */ marker = new InjectionToken("Platform: " + name);
    return function (extraProviders) {
        if (extraProviders === void 0) { extraProviders = []; }
        var /** @type {?} */ platform = getPlatform();
        if (!platform || platform.injector.get(ALLOW_MULTIPLE_PLATFORMS, false)) {
            if (parentPlatformFactory) {
                parentPlatformFactory(providers.concat(extraProviders).concat({ provide: marker, useValue: true }));
            }
            else {
                createPlatform(ReflectiveInjector.resolveAndCreate(providers.concat(extraProviders).concat({ provide: marker, useValue: true })));
            }
        }
        return assertPlatform(marker);
    };
}
/**
 * Checks that there currently is a platform which contains the given token as a provider.
 *
 * \@experimental APIs related to application bootstrap are currently under review.
 * @param {?} requiredToken
 * @return {?}
 */
function assertPlatform(requiredToken) {
    var /** @type {?} */ platform = getPlatform();
    if (!platform) {
        throw new Error('No platform exists!');
    }
    if (!platform.injector.get(requiredToken, null)) {
        throw new Error('A platform with a different configuration has been created. Please destroy it first.');
    }
    return platform;
}
/**
 * Destroy the existing platform.
 *
 * \@experimental APIs related to application bootstrap are currently under review.
 * @return {?}
 */
function destroyPlatform() {
    if (_platform && !_platform.destroyed) {
        _platform.destroy();
    }
}
/**
 * Returns the current platform.
 *
 * \@experimental APIs related to application bootstrap are currently under review.
 * @return {?}
 */
function getPlatform() {
    return _platform && !_platform.destroyed ? _platform : null;
}
/**
 * The Angular platform is the entry point for Angular on a web page. Each page
 * has exactly one platform, and services (such as reflection) which are common
 * to every Angular application running on the page are bound in its scope.
 *
 * A page's platform is initialized implicitly when a platform is created via a platform factory
 * (e.g. {\@link platformBrowser}), or explicitly by calling the {\@link createPlatform} function.
 *
 * \@stable
 * @abstract
 */
var PlatformRef = (function () {
    function PlatformRef() {
    }
    /**
     * Creates an instance of an `\@NgModule` for the given platform
     * for offline compilation.
     *
     * ## Simple Example
     *
     * ```typescript
     * my_module.ts:
     *
     * \@NgModule({
     *   imports: [BrowserModule]
     * })
     * class MyModule {}
     *
     * main.ts:
     * import {MyModuleNgFactory} from './my_module.ngfactory';
     * import {platformBrowser} from '\@angular/platform-browser';
     *
     * let moduleRef = platformBrowser().bootstrapModuleFactory(MyModuleNgFactory);
     * ```
     *
     * \@experimental APIs related to application bootstrap are currently under review.
     * @abstract
     * @template M
     * @param {?} moduleFactory
     * @return {?}
     */
    PlatformRef.prototype.bootstrapModuleFactory = function (moduleFactory) { };
    /**
     * Creates an instance of an `\@NgModule` for a given platform using the given runtime compiler.
     *
     * ## Simple Example
     *
     * ```typescript
     * \@NgModule({
     *   imports: [BrowserModule]
     * })
     * class MyModule {}
     *
     * let moduleRef = platformBrowser().bootstrapModule(MyModule);
     * ```
     * \@stable
     * @abstract
     * @template M
     * @param {?} moduleType
     * @param {?=} compilerOptions
     * @return {?}
     */
    PlatformRef.prototype.bootstrapModule = function (moduleType, compilerOptions) { };
    /**
     * Register a listener to be called when the platform is disposed.
     * @abstract
     * @param {?} callback
     * @return {?}
     */
    PlatformRef.prototype.onDestroy = function (callback) { };
    /**
     * Retrieve the platform {\@link Injector}, which is the parent injector for
     * every Angular application on the page and provides singleton providers.
     * @abstract
     * @return {?}
     */
    PlatformRef.prototype.injector = function () { };
    /**
     * Destroy the Angular platform and all Angular applications on the page.
     * @abstract
     * @return {?}
     */
    PlatformRef.prototype.destroy = function () { };
    /**
     * @abstract
     * @return {?}
     */
    PlatformRef.prototype.destroyed = function () { };
    return PlatformRef;
}());
/**
 * @param {?} errorHandler
 * @param {?} ngZone
 * @param {?} callback
 * @return {?}
 */
function _callAndReportToErrorHandler(errorHandler, ngZone, callback) {
    try {
        var /** @type {?} */ result = callback();
        if (isPromise(result)) {
            return result.catch(function (e) {
                ngZone.runOutsideAngular(function () { return errorHandler.handleError(e); });
                // rethrow as the exception handler might not do it
                throw e;
            });
        }
        return result;
    }
    catch (e) {
        ngZone.runOutsideAngular(function () { return errorHandler.handleError(e); });
        // rethrow as the exception handler might not do it
        throw e;
    }
}
/**
 * workaround https://github.com/angular/tsickle/issues/350
 * @suppress {checkTypes}
 */
var PlatformRef_ = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](PlatformRef_, _super);
    /**
     * @param {?} _injector
     */
    function PlatformRef_(_injector) {
        var _this = _super.call(this) || this;
        _this._injector = _injector;
        _this._modules = [];
        _this._destroyListeners = [];
        _this._destroyed = false;
        return _this;
    }
    /**
     * @param {?} callback
     * @return {?}
     */
    PlatformRef_.prototype.onDestroy = function (callback) { this._destroyListeners.push(callback); };
    Object.defineProperty(PlatformRef_.prototype, "injector", {
        /**
         * @return {?}
         */
        get: function () { return this._injector; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(PlatformRef_.prototype, "destroyed", {
        /**
         * @return {?}
         */
        get: function () { return this._destroyed; },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    PlatformRef_.prototype.destroy = function () {
        if (this._destroyed) {
            throw new Error('The platform has already been destroyed!');
        }
        this._modules.slice().forEach(function (module) { return module.destroy(); });
        this._destroyListeners.forEach(function (listener) { return listener(); });
        this._destroyed = true;
    };
    /**
     * @template M
     * @param {?} moduleFactory
     * @return {?}
     */
    PlatformRef_.prototype.bootstrapModuleFactory = function (moduleFactory) {
        return this._bootstrapModuleFactoryWithZone(moduleFactory);
    };
    /**
     * @template M
     * @param {?} moduleFactory
     * @param {?=} ngZone
     * @return {?}
     */
    PlatformRef_.prototype._bootstrapModuleFactoryWithZone = function (moduleFactory, ngZone) {
        var _this = this;
        // Note: We need to create the NgZone _before_ we instantiate the module,
        // as instantiating the module creates some providers eagerly.
        // So we create a mini parent injector that just contains the new NgZone and
        // pass that as parent to the NgModuleFactory.
        if (!ngZone)
            ngZone = new NgZone({ enableLongStackTrace: isDevMode() });
        // Attention: Don't use ApplicationRef.run here,
        // as we want to be sure that all possible constructor calls are inside `ngZone.run`!
        return ngZone.run(function () {
            var /** @type {?} */ ngZoneInjector = ReflectiveInjector.resolveAndCreate([{ provide: NgZone, useValue: ngZone }], _this.injector);
            var /** @type {?} */ moduleRef = (moduleFactory.create(ngZoneInjector));
            var /** @type {?} */ exceptionHandler = moduleRef.injector.get(ErrorHandler, null);
            if (!exceptionHandler) {
                throw new Error('No ErrorHandler. Is platform module (BrowserModule) included?');
            }
            moduleRef.onDestroy(function () { return remove(_this._modules, moduleRef); }); /** @type {?} */
            ((ngZone)).runOutsideAngular(function () { return ((ngZone)).onError.subscribe({ next: function (error) { exceptionHandler.handleError(error); } }); });
            return _callAndReportToErrorHandler(exceptionHandler, /** @type {?} */ ((ngZone)), function () {
                var /** @type {?} */ initStatus = moduleRef.injector.get(ApplicationInitStatus);
                initStatus.runInitializers();
                return initStatus.donePromise.then(function () {
                    _this._moduleDoBootstrap(moduleRef);
                    return moduleRef;
                });
            });
        });
    };
    /**
     * @template M
     * @param {?} moduleType
     * @param {?=} compilerOptions
     * @return {?}
     */
    PlatformRef_.prototype.bootstrapModule = function (moduleType, compilerOptions) {
        if (compilerOptions === void 0) { compilerOptions = []; }
        return this._bootstrapModuleWithZone(moduleType, compilerOptions);
    };
    /**
     * @template M
     * @param {?} moduleType
     * @param {?=} compilerOptions
     * @param {?=} ngZone
     * @return {?}
     */
    PlatformRef_.prototype._bootstrapModuleWithZone = function (moduleType, compilerOptions, ngZone) {
        var _this = this;
        if (compilerOptions === void 0) { compilerOptions = []; }
        var /** @type {?} */ compilerFactory = this.injector.get(CompilerFactory);
        var /** @type {?} */ compiler = compilerFactory.createCompiler(Array.isArray(compilerOptions) ? compilerOptions : [compilerOptions]);
        return compiler.compileModuleAsync(moduleType)
            .then(function (moduleFactory) { return _this._bootstrapModuleFactoryWithZone(moduleFactory, ngZone); });
    };
    /**
     * @param {?} moduleRef
     * @return {?}
     */
    PlatformRef_.prototype._moduleDoBootstrap = function (moduleRef) {
        var /** @type {?} */ appRef = (moduleRef.injector.get(ApplicationRef));
        if (moduleRef._bootstrapComponents.length > 0) {
            moduleRef._bootstrapComponents.forEach(function (f) { return appRef.bootstrap(f); });
        }
        else if (moduleRef.instance.ngDoBootstrap) {
            moduleRef.instance.ngDoBootstrap(appRef);
        }
        else {
            throw new Error("The module " + stringify(moduleRef.instance.constructor) + " was bootstrapped, but it does not declare \"@NgModule.bootstrap\" components nor a \"ngDoBootstrap\" method. " +
                "Please define one of these.");
        }
        this._modules.push(moduleRef);
    };
    return PlatformRef_;
}(PlatformRef));
PlatformRef_.decorators = [
    { type: Injectable },
];
/**
 * @nocollapse
 */
PlatformRef_.ctorParameters = function () { return [
    { type: Injector, },
]; };
/**
 * A reference to an Angular application running on a page.
 *
 * \@stable
 * @abstract
 */
var ApplicationRef = (function () {
    function ApplicationRef() {
    }
    /**
     * Bootstrap a new component at the root level of the application.
     *
     * ### Bootstrap process
     *
     * When bootstrapping a new root component into an application, Angular mounts the
     * specified application component onto DOM elements identified by the [componentType]'s
     * selector and kicks off automatic change detection to finish initializing the component.
     *
     * Optionally, a component can be mounted onto a DOM element that does not match the
     * [componentType]'s selector.
     *
     * ### Example
     * {\@example core/ts/platform/platform.ts region='longform'}
     * @abstract
     * @template C
     * @param {?} componentFactory
     * @param {?=} rootSelectorOrNode
     * @return {?}
     */
    ApplicationRef.prototype.bootstrap = function (componentFactory, rootSelectorOrNode) { };
    /**
     * Invoke this method to explicitly process change detection and its side-effects.
     *
     * In development mode, `tick()` also performs a second change detection cycle to ensure that no
     * further changes are detected. If additional changes are picked up during this second cycle,
     * bindings in the app have side-effects that cannot be resolved in a single change detection
     * pass.
     * In this case, Angular throws an error, since an Angular application can only have one change
     * detection pass during which all change detection must complete.
     * @abstract
     * @return {?}
     */
    ApplicationRef.prototype.tick = function () { };
    /**
     * Get a list of component types registered to this application.
     * This list is populated even before the component is created.
     * @abstract
     * @return {?}
     */
    ApplicationRef.prototype.componentTypes = function () { };
    /**
     * Get a list of components registered to this application.
     * @abstract
     * @return {?}
     */
    ApplicationRef.prototype.components = function () { };
    /**
     * Attaches a view so that it will be dirty checked.
     * The view will be automatically detached when it is destroyed.
     * This will throw if the view is already attached to a ViewContainer.
     * @abstract
     * @param {?} view
     * @return {?}
     */
    ApplicationRef.prototype.attachView = function (view) { };
    /**
     * Detaches a view from dirty checking again.
     * @abstract
     * @param {?} view
     * @return {?}
     */
    ApplicationRef.prototype.detachView = function (view) { };
    /**
     * Returns the number of attached views.
     * @abstract
     * @return {?}
     */
    ApplicationRef.prototype.viewCount = function () { };
    /**
     * Returns an Observable that indicates when the application is stable or unstable.
     * @abstract
     * @return {?}
     */
    ApplicationRef.prototype.isStable = function () { };
    return ApplicationRef;
}());
/**
 * workaround https://github.com/angular/tsickle/issues/350
 * @suppress {checkTypes}
 */
var ApplicationRef_ = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ApplicationRef_, _super);
    /**
     * @param {?} _zone
     * @param {?} _console
     * @param {?} _injector
     * @param {?} _exceptionHandler
     * @param {?} _componentFactoryResolver
     * @param {?} _initStatus
     */
    function ApplicationRef_(_zone, _console, _injector, _exceptionHandler, _componentFactoryResolver, _initStatus) {
        var _this = _super.call(this) || this;
        _this._zone = _zone;
        _this._console = _console;
        _this._injector = _injector;
        _this._exceptionHandler = _exceptionHandler;
        _this._componentFactoryResolver = _componentFactoryResolver;
        _this._initStatus = _initStatus;
        _this._bootstrapListeners = [];
        _this._rootComponents = [];
        _this._rootComponentTypes = [];
        _this._views = [];
        _this._runningTick = false;
        _this._enforceNoNewChanges = false;
        _this._stable = true;
        _this._enforceNoNewChanges = isDevMode();
        _this._zone.onMicrotaskEmpty.subscribe({ next: function () { _this._zone.run(function () { _this.tick(); }); } });
        var isCurrentlyStable = new __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["Observable"](function (observer) {
            _this._stable = _this._zone.isStable && !_this._zone.hasPendingMacrotasks &&
                !_this._zone.hasPendingMicrotasks;
            _this._zone.runOutsideAngular(function () {
                observer.next(_this._stable);
                observer.complete();
            });
        });
        var isStable = new __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["Observable"](function (observer) {
            // Create the subscription to onStable outside the Angular Zone so that
            // the callback is run outside the Angular Zone.
            var stableSub;
            _this._zone.runOutsideAngular(function () {
                stableSub = _this._zone.onStable.subscribe(function () {
                    NgZone.assertNotInAngularZone();
                    // Check whether there are no pending macro/micro tasks in the next tick
                    // to allow for NgZone to update the state.
                    scheduleMicroTask(function () {
                        if (!_this._stable && !_this._zone.hasPendingMacrotasks &&
                            !_this._zone.hasPendingMicrotasks) {
                            _this._stable = true;
                            observer.next(true);
                        }
                    });
                });
            });
            var unstableSub = _this._zone.onUnstable.subscribe(function () {
                NgZone.assertInAngularZone();
                if (_this._stable) {
                    _this._stable = false;
                    _this._zone.runOutsideAngular(function () { observer.next(false); });
                }
            });
            return function () {
                stableSub.unsubscribe();
                unstableSub.unsubscribe();
            };
        });
        _this._isStable = Object(__WEBPACK_IMPORTED_MODULE_2_rxjs_observable_merge__["merge"])(isCurrentlyStable, __WEBPACK_IMPORTED_MODULE_3_rxjs_operator_share__["share"].call(isStable));
        return _this;
    }
    /**
     * @param {?} viewRef
     * @return {?}
     */
    ApplicationRef_.prototype.attachView = function (viewRef) {
        var /** @type {?} */ view = ((viewRef));
        this._views.push(view);
        view.attachToAppRef(this);
    };
    /**
     * @param {?} viewRef
     * @return {?}
     */
    ApplicationRef_.prototype.detachView = function (viewRef) {
        var /** @type {?} */ view = ((viewRef));
        remove(this._views, view);
        view.detachFromAppRef();
    };
    /**
     * @template C
     * @param {?} componentOrFactory
     * @param {?=} rootSelectorOrNode
     * @return {?}
     */
    ApplicationRef_.prototype.bootstrap = function (componentOrFactory, rootSelectorOrNode) {
        var _this = this;
        if (!this._initStatus.done) {
            throw new Error('Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.');
        }
        var /** @type {?} */ componentFactory;
        if (componentOrFactory instanceof ComponentFactory) {
            componentFactory = componentOrFactory;
        }
        else {
            componentFactory = ((this._componentFactoryResolver.resolveComponentFactory(componentOrFactory)));
        }
        this._rootComponentTypes.push(componentFactory.componentType);
        // Create a factory associated with the current module if it's not bound to some other
        var /** @type {?} */ ngModule = componentFactory instanceof ComponentFactoryBoundToModule ?
            null :
            this._injector.get(NgModuleRef);
        var /** @type {?} */ selectorOrNode = rootSelectorOrNode || componentFactory.selector;
        var /** @type {?} */ compRef = componentFactory.create(Injector.NULL, [], selectorOrNode, ngModule);
        compRef.onDestroy(function () { _this._unloadComponent(compRef); });
        var /** @type {?} */ testability = compRef.injector.get(Testability, null);
        if (testability) {
            compRef.injector.get(TestabilityRegistry)
                .registerApplication(compRef.location.nativeElement, testability);
        }
        this._loadComponent(compRef);
        if (isDevMode()) {
            this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode.");
        }
        return compRef;
    };
    /**
     * @param {?} componentRef
     * @return {?}
     */
    ApplicationRef_.prototype._loadComponent = function (componentRef) {
        this.attachView(componentRef.hostView);
        this.tick();
        this._rootComponents.push(componentRef);
        // Get the listeners lazily to prevent DI cycles.
        var /** @type {?} */ listeners = this._injector.get(APP_BOOTSTRAP_LISTENER, []).concat(this._bootstrapListeners);
        listeners.forEach(function (listener) { return listener(componentRef); });
    };
    /**
     * @param {?} componentRef
     * @return {?}
     */
    ApplicationRef_.prototype._unloadComponent = function (componentRef) {
        this.detachView(componentRef.hostView);
        remove(this._rootComponents, componentRef);
    };
    /**
     * @return {?}
     */
    ApplicationRef_.prototype.tick = function () {
        var _this = this;
        if (this._runningTick) {
            throw new Error('ApplicationRef.tick is called recursively');
        }
        var /** @type {?} */ scope = ApplicationRef_._tickScope();
        try {
            this._runningTick = true;
            this._views.forEach(function (view) { return view.detectChanges(); });
            if (this._enforceNoNewChanges) {
                this._views.forEach(function (view) { return view.checkNoChanges(); });
            }
        }
        catch (e) {
            // Attention: Don't rethrow as it could cancel subscriptions to Observables!
            this._zone.runOutsideAngular(function () { return _this._exceptionHandler.handleError(e); });
        }
        finally {
            this._runningTick = false;
            wtfLeave(scope);
        }
    };
    /**
     * @return {?}
     */
    ApplicationRef_.prototype.ngOnDestroy = function () {
        // TODO(alxhub): Dispose of the NgZone.
        this._views.slice().forEach(function (view) { return view.destroy(); });
    };
    Object.defineProperty(ApplicationRef_.prototype, "viewCount", {
        /**
         * @return {?}
         */
        get: function () { return this._views.length; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ApplicationRef_.prototype, "componentTypes", {
        /**
         * @return {?}
         */
        get: function () { return this._rootComponentTypes; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ApplicationRef_.prototype, "components", {
        /**
         * @return {?}
         */
        get: function () { return this._rootComponents; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ApplicationRef_.prototype, "isStable", {
        /**
         * @return {?}
         */
        get: function () { return this._isStable; },
        enumerable: true,
        configurable: true
    });
    return ApplicationRef_;
}(ApplicationRef));
/**
 * \@internal
 */
ApplicationRef_._tickScope = wtfCreateScope('ApplicationRef#tick()');
ApplicationRef_.decorators = [
    { type: Injectable },
];
/**
 * @nocollapse
 */
ApplicationRef_.ctorParameters = function () { return [
    { type: NgZone, },
    { type: Console, },
    { type: Injector, },
    { type: ErrorHandler, },
    { type: ComponentFactoryResolver, },
    { type: ApplicationInitStatus, },
]; };
/**
 * @template T
 * @param {?} list
 * @param {?} el
 * @return {?}
 */
function remove(list, el) {
    var /** @type {?} */ index = list.indexOf(el);
    if (index > -1) {
        list.splice(index, 1);
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
// Public API for Zone
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @deprecated Use `RendererType2` (and `Renderer2`) instead.
 */
var RenderComponentType = (function () {
    /**
     * @param {?} id
     * @param {?} templateUrl
     * @param {?} slotCount
     * @param {?} encapsulation
     * @param {?} styles
     * @param {?} animations
     */
    function RenderComponentType(id, templateUrl, slotCount, encapsulation, styles, animations) {
        this.id = id;
        this.templateUrl = templateUrl;
        this.slotCount = slotCount;
        this.encapsulation = encapsulation;
        this.styles = styles;
        this.animations = animations;
    }
    return RenderComponentType;
}());
/**
 * @deprecated Debug info is handeled internally in the view engine now.
 * @abstract
 */
var RenderDebugInfo = (function () {
    function RenderDebugInfo() {
    }
    /**
     * @abstract
     * @return {?}
     */
    RenderDebugInfo.prototype.injector = function () { };
    /**
     * @abstract
     * @return {?}
     */
    RenderDebugInfo.prototype.component = function () { };
    /**
     * @abstract
     * @return {?}
     */
    RenderDebugInfo.prototype.providerTokens = function () { };
    /**
     * @abstract
     * @return {?}
     */
    RenderDebugInfo.prototype.references = function () { };
    /**
     * @abstract
     * @return {?}
     */
    RenderDebugInfo.prototype.context = function () { };
    /**
     * @abstract
     * @return {?}
     */
    RenderDebugInfo.prototype.source = function () { };
    return RenderDebugInfo;
}());
/**
 * @deprecated Use the `Renderer2` instead.
 * @abstract
 */
var Renderer = (function () {
    function Renderer() {
    }
    /**
     * @abstract
     * @param {?} selectorOrNode
     * @param {?=} debugInfo
     * @return {?}
     */
    Renderer.prototype.selectRootElement = function (selectorOrNode, debugInfo) { };
    /**
     * @abstract
     * @param {?} parentElement
     * @param {?} name
     * @param {?=} debugInfo
     * @return {?}
     */
    Renderer.prototype.createElement = function (parentElement, name, debugInfo) { };
    /**
     * @abstract
     * @param {?} hostElement
     * @return {?}
     */
    Renderer.prototype.createViewRoot = function (hostElement) { };
    /**
     * @abstract
     * @param {?} parentElement
     * @param {?=} debugInfo
     * @return {?}
     */
    Renderer.prototype.createTemplateAnchor = function (parentElement, debugInfo) { };
    /**
     * @abstract
     * @param {?} parentElement
     * @param {?} value
     * @param {?=} debugInfo
     * @return {?}
     */
    Renderer.prototype.createText = function (parentElement, value, debugInfo) { };
    /**
     * @abstract
     * @param {?} parentElement
     * @param {?} nodes
     * @return {?}
     */
    Renderer.prototype.projectNodes = function (parentElement, nodes) { };
    /**
     * @abstract
     * @param {?} node
     * @param {?} viewRootNodes
     * @return {?}
     */
    Renderer.prototype.attachViewAfter = function (node, viewRootNodes) { };
    /**
     * @abstract
     * @param {?} viewRootNodes
     * @return {?}
     */
    Renderer.prototype.detachView = function (viewRootNodes) { };
    /**
     * @abstract
     * @param {?} hostElement
     * @param {?} viewAllNodes
     * @return {?}
     */
    Renderer.prototype.destroyView = function (hostElement, viewAllNodes) { };
    /**
     * @abstract
     * @param {?} renderElement
     * @param {?} name
     * @param {?} callback
     * @return {?}
     */
    Renderer.prototype.listen = function (renderElement, name, callback) { };
    /**
     * @abstract
     * @param {?} target
     * @param {?} name
     * @param {?} callback
     * @return {?}
     */
    Renderer.prototype.listenGlobal = function (target, name, callback) { };
    /**
     * @abstract
     * @param {?} renderElement
     * @param {?} propertyName
     * @param {?} propertyValue
     * @return {?}
     */
    Renderer.prototype.setElementProperty = function (renderElement, propertyName, propertyValue) { };
    /**
     * @abstract
     * @param {?} renderElement
     * @param {?} attributeName
     * @param {?} attributeValue
     * @return {?}
     */
    Renderer.prototype.setElementAttribute = function (renderElement, attributeName, attributeValue) { };
    /**
     * Used only in debug mode to serialize property changes to dom nodes as attributes.
     * @abstract
     * @param {?} renderElement
     * @param {?} propertyName
     * @param {?} propertyValue
     * @return {?}
     */
    Renderer.prototype.setBindingDebugInfo = function (renderElement, propertyName, propertyValue) { };
    /**
     * @abstract
     * @param {?} renderElement
     * @param {?} className
     * @param {?} isAdd
     * @return {?}
     */
    Renderer.prototype.setElementClass = function (renderElement, className, isAdd) { };
    /**
     * @abstract
     * @param {?} renderElement
     * @param {?} styleName
     * @param {?} styleValue
     * @return {?}
     */
    Renderer.prototype.setElementStyle = function (renderElement, styleName, styleValue) { };
    /**
     * @abstract
     * @param {?} renderElement
     * @param {?} methodName
     * @param {?=} args
     * @return {?}
     */
    Renderer.prototype.invokeElementMethod = function (renderElement, methodName, args) { };
    /**
     * @abstract
     * @param {?} renderNode
     * @param {?} text
     * @return {?}
     */
    Renderer.prototype.setText = function (renderNode, text) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} startingStyles
     * @param {?} keyframes
     * @param {?} duration
     * @param {?} delay
     * @param {?} easing
     * @param {?=} previousPlayers
     * @return {?}
     */
    Renderer.prototype.animate = function (element, startingStyles, keyframes, duration, delay, easing, previousPlayers) { };
    return Renderer;
}());
var Renderer2Interceptor = new InjectionToken('Renderer2Interceptor');
/**
 * Injectable service that provides a low-level interface for modifying the UI.
 *
 * Use this service to bypass Angular's templating and make custom UI changes that can't be
 * expressed declaratively. For example if you need to set a property or an attribute whose name is
 * not statically known, use {\@link Renderer#setElementProperty} or {\@link
 * Renderer#setElementAttribute}
 * respectively.
 *
 * If you are implementing a custom renderer, you must implement this interface.
 *
 * The default Renderer implementation is `DomRenderer`. Also available is `WebWorkerRenderer`.
 *
 * @deprecated Use `RendererFactory2` instead.
 * @abstract
 */
var RootRenderer = (function () {
    function RootRenderer() {
    }
    /**
     * @abstract
     * @param {?} componentType
     * @return {?}
     */
    RootRenderer.prototype.renderComponent = function (componentType) { };
    return RootRenderer;
}());
/**
 * \@experimental
 * @abstract
 */
var RendererFactory2 = (function () {
    function RendererFactory2() {
    }
    /**
     * @abstract
     * @param {?} hostElement
     * @param {?} type
     * @return {?}
     */
    RendererFactory2.prototype.createRenderer = function (hostElement, type) { };
    /**
     * @abstract
     * @return {?}
     */
    RendererFactory2.prototype.begin = function () { };
    /**
     * @abstract
     * @return {?}
     */
    RendererFactory2.prototype.end = function () { };
    /**
     * @abstract
     * @return {?}
     */
    RendererFactory2.prototype.whenRenderingDone = function () { };
    return RendererFactory2;
}());
var RendererStyleFlags2 = {};
RendererStyleFlags2.Important = 1;
RendererStyleFlags2.DashCase = 2;
RendererStyleFlags2[RendererStyleFlags2.Important] = "Important";
RendererStyleFlags2[RendererStyleFlags2.DashCase] = "DashCase";
/**
 * \@experimental
 * @abstract
 */
var Renderer2 = (function () {
    function Renderer2() {
    }
    /**
     * This field can be used to store arbitrary data on this renderer instance.
     * This is useful for renderers that delegate to other renderers.
     * @abstract
     * @return {?}
     */
    Renderer2.prototype.data = function () { };
    /**
     * @abstract
     * @return {?}
     */
    Renderer2.prototype.destroy = function () { };
    /**
     * @abstract
     * @param {?} name
     * @param {?=} namespace
     * @return {?}
     */
    Renderer2.prototype.createElement = function (name, namespace) { };
    /**
     * @abstract
     * @param {?} value
     * @return {?}
     */
    Renderer2.prototype.createComment = function (value) { };
    /**
     * @abstract
     * @param {?} value
     * @return {?}
     */
    Renderer2.prototype.createText = function (value) { };
    /**
     * @abstract
     * @param {?} parent
     * @param {?} newChild
     * @return {?}
     */
    Renderer2.prototype.appendChild = function (parent, newChild) { };
    /**
     * @abstract
     * @param {?} parent
     * @param {?} newChild
     * @param {?} refChild
     * @return {?}
     */
    Renderer2.prototype.insertBefore = function (parent, newChild, refChild) { };
    /**
     * @abstract
     * @param {?} parent
     * @param {?} oldChild
     * @return {?}
     */
    Renderer2.prototype.removeChild = function (parent, oldChild) { };
    /**
     * @abstract
     * @param {?} selectorOrNode
     * @return {?}
     */
    Renderer2.prototype.selectRootElement = function (selectorOrNode) { };
    /**
     * Attention: On WebWorkers, this will always return a value,
     * as we are asking for a result synchronously. I.e.
     * the caller can't rely on checking whether this is null or not.
     * @abstract
     * @param {?} node
     * @return {?}
     */
    Renderer2.prototype.parentNode = function (node) { };
    /**
     * Attention: On WebWorkers, this will always return a value,
     * as we are asking for a result synchronously. I.e.
     * the caller can't rely on checking whether this is null or not.
     * @abstract
     * @param {?} node
     * @return {?}
     */
    Renderer2.prototype.nextSibling = function (node) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} name
     * @param {?} value
     * @param {?=} namespace
     * @return {?}
     */
    Renderer2.prototype.setAttribute = function (el, name, value, namespace) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} name
     * @param {?=} namespace
     * @return {?}
     */
    Renderer2.prototype.removeAttribute = function (el, name, namespace) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} name
     * @return {?}
     */
    Renderer2.prototype.addClass = function (el, name) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} name
     * @return {?}
     */
    Renderer2.prototype.removeClass = function (el, name) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} style
     * @param {?} value
     * @param {?=} flags
     * @return {?}
     */
    Renderer2.prototype.setStyle = function (el, style, value, flags) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} style
     * @param {?=} flags
     * @return {?}
     */
    Renderer2.prototype.removeStyle = function (el, style, flags) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    Renderer2.prototype.setProperty = function (el, name, value) { };
    /**
     * @abstract
     * @param {?} node
     * @param {?} value
     * @return {?}
     */
    Renderer2.prototype.setValue = function (node, value) { };
    /**
     * @abstract
     * @param {?} target
     * @param {?} eventName
     * @param {?} callback
     * @return {?}
     */
    Renderer2.prototype.listen = function (target, eventName, callback) { };
    return Renderer2;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
// Public API for render
var ElementRef = (function () {
    /**
     * @param {?} nativeElement
     */
    function ElementRef(nativeElement) {
        this.nativeElement = nativeElement;
    }
    return ElementRef;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Used to load ng module factories.
 * \@stable
 * @abstract
 */
var NgModuleFactoryLoader = (function () {
    function NgModuleFactoryLoader() {
    }
    /**
     * @abstract
     * @param {?} path
     * @return {?}
     */
    NgModuleFactoryLoader.prototype.load = function (path) { };
    return NgModuleFactoryLoader;
}());
var moduleFactories = new Map();
/**
 * Registers a loaded module. Should only be called from generated NgModuleFactory code.
 * \@experimental
 * @param {?} id
 * @param {?} factory
 * @return {?}
 */
function registerModuleFactory(id, factory) {
    var /** @type {?} */ existing = moduleFactories.get(id);
    if (existing) {
        throw new Error("Duplicate module registered for " + id + " - " + existing.moduleType.name + " vs " + factory.moduleType.name);
    }
    moduleFactories.set(id, factory);
}
/**
 * @return {?}
 */
/**
 * Returns the NgModuleFactory with the given id, if it exists and has been loaded.
 * Factories for modules that do not specify an `id` cannot be retrieved. Throws if the module
 * cannot be found.
 * \@experimental
 * @param {?} id
 * @return {?}
 */
function getModuleFactory(id) {
    var /** @type {?} */ factory = moduleFactories.get(id);
    if (!factory)
        throw new Error("No module with ID " + id + " loaded");
    return factory;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * An unmodifiable list of items that Angular keeps up to date when the state
 * of the application changes.
 *
 * The type of object that {\@link ViewChildren}, {\@link ContentChildren}, and {\@link QueryList}
 * provide.
 *
 * Implements an iterable interface, therefore it can be used in both ES6
 * javascript `for (var i of items)` loops as well as in Angular templates with
 * `*ngFor="let i of myList"`.
 *
 * Changes can be observed by subscribing to the changes `Observable`.
 *
 * NOTE: In the future this class will implement an `Observable` interface.
 *
 * ### Example ([live demo](http://plnkr.co/edit/RX8sJnQYl9FWuSCWme5z?p=preview))
 * ```typescript
 * \@Component({...})
 * class Container {
 *   \@ViewChildren(Item) items:QueryList<Item>;
 * }
 * ```
 * \@stable
 */
var QueryList = (function () {
    function QueryList() {
        this._dirty = true;
        this._results = [];
        this._emitter = new EventEmitter();
    }
    Object.defineProperty(QueryList.prototype, "changes", {
        /**
         * @return {?}
         */
        get: function () { return this._emitter; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(QueryList.prototype, "length", {
        /**
         * @return {?}
         */
        get: function () { return this._results.length; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(QueryList.prototype, "first", {
        /**
         * @return {?}
         */
        get: function () { return this._results[0]; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(QueryList.prototype, "last", {
        /**
         * @return {?}
         */
        get: function () { return this._results[this.length - 1]; },
        enumerable: true,
        configurable: true
    });
    /**
     * See
     * [Array.map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map)
     * @template U
     * @param {?} fn
     * @return {?}
     */
    QueryList.prototype.map = function (fn) { return this._results.map(fn); };
    /**
     * See
     * [Array.filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)
     * @param {?} fn
     * @return {?}
     */
    QueryList.prototype.filter = function (fn) {
        return this._results.filter(fn);
    };
    /**
     * See
     * [Array.find](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find)
     * @param {?} fn
     * @return {?}
     */
    QueryList.prototype.find = function (fn) {
        return this._results.find(fn);
    };
    /**
     * See
     * [Array.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)
     * @template U
     * @param {?} fn
     * @param {?} init
     * @return {?}
     */
    QueryList.prototype.reduce = function (fn, init) {
        return this._results.reduce(fn, init);
    };
    /**
     * See
     * [Array.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)
     * @param {?} fn
     * @return {?}
     */
    QueryList.prototype.forEach = function (fn) { this._results.forEach(fn); };
    /**
     * See
     * [Array.some](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some)
     * @param {?} fn
     * @return {?}
     */
    QueryList.prototype.some = function (fn) {
        return this._results.some(fn);
    };
    /**
     * @return {?}
     */
    QueryList.prototype.toArray = function () { return this._results.slice(); };
    /**
     * @return {?}
     */
    QueryList.prototype[getSymbolIterator()] = function () { return ((this._results))[getSymbolIterator()](); };
    /**
     * @return {?}
     */
    QueryList.prototype.toString = function () { return this._results.toString(); };
    /**
     * @param {?} res
     * @return {?}
     */
    QueryList.prototype.reset = function (res) {
        this._results = flatten(res);
        this._dirty = false;
    };
    /**
     * @return {?}
     */
    QueryList.prototype.notifyOnChanges = function () { this._emitter.emit(this); };
    /**
     * internal
     * @return {?}
     */
    QueryList.prototype.setDirty = function () { this._dirty = true; };
    Object.defineProperty(QueryList.prototype, "dirty", {
        /**
         * internal
         * @return {?}
         */
        get: function () { return this._dirty; },
        enumerable: true,
        configurable: true
    });
    /**
     * internal
     * @return {?}
     */
    QueryList.prototype.destroy = function () {
        this._emitter.complete();
        this._emitter.unsubscribe();
    };
    return QueryList;
}());
/**
 * @template T
 * @param {?} list
 * @return {?}
 */
function flatten(list) {
    return list.reduce(function (flat, item) {
        var /** @type {?} */ flatItem = Array.isArray(item) ? flatten(item) : item;
        return ((flat)).concat(flatItem);
    }, []);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _SEPARATOR = '#';
var FACTORY_CLASS_SUFFIX = 'NgFactory';
/**
 * Configuration for SystemJsNgModuleLoader.
 * token.
 *
 * \@experimental
 * @abstract
 */
var SystemJsNgModuleLoaderConfig = (function () {
    function SystemJsNgModuleLoaderConfig() {
    }
    return SystemJsNgModuleLoaderConfig;
}());
var DEFAULT_CONFIG = {
    factoryPathPrefix: '',
    factoryPathSuffix: '.ngfactory',
};
/**
 * NgModuleFactoryLoader that uses SystemJS to load NgModuleFactory
 * \@experimental
 */
var SystemJsNgModuleLoader = (function () {
    /**
     * @param {?} _compiler
     * @param {?=} config
     */
    function SystemJsNgModuleLoader(_compiler, config) {
        this._compiler = _compiler;
        this._config = config || DEFAULT_CONFIG;
    }
    /**
     * @param {?} path
     * @return {?}
     */
    SystemJsNgModuleLoader.prototype.load = function (path) {
        var /** @type {?} */ offlineMode = this._compiler instanceof Compiler;
        return offlineMode ? this.loadFactory(path) : this.loadAndCompile(path);
    };
    /**
     * @param {?} path
     * @return {?}
     */
    SystemJsNgModuleLoader.prototype.loadAndCompile = function (path) {
        var _this = this;
        var _a = path.split(_SEPARATOR), module = _a[0], exportName = _a[1];
        if (exportName === undefined) {
            exportName = 'default';
        }
        return __webpack_require__("../../../../../test/$$_gendir lazy recursive")(module)
            .then(function (module) { return module[exportName]; })
            .then(function (type) { return checkNotEmpty(type, module, exportName); })
            .then(function (type) { return _this._compiler.compileModuleAsync(type); });
    };
    /**
     * @param {?} path
     * @return {?}
     */
    SystemJsNgModuleLoader.prototype.loadFactory = function (path) {
        var _a = path.split(_SEPARATOR), module = _a[0], exportName = _a[1];
        var /** @type {?} */ factoryClassSuffix = FACTORY_CLASS_SUFFIX;
        if (exportName === undefined) {
            exportName = 'default';
            factoryClassSuffix = '';
        }
        return __webpack_require__("../../../../../test/$$_gendir lazy recursive")(this._config.factoryPathPrefix + module + this._config.factoryPathSuffix)
            .then(function (module) { return module[exportName + factoryClassSuffix]; })
            .then(function (factory) { return checkNotEmpty(factory, module, exportName); });
    };
    return SystemJsNgModuleLoader;
}());
SystemJsNgModuleLoader.decorators = [
    { type: Injectable },
];
/**
 * @nocollapse
 */
SystemJsNgModuleLoader.ctorParameters = function () { return [
    { type: Compiler, },
    { type: SystemJsNgModuleLoaderConfig, decorators: [{ type: Optional },] },
]; };
/**
 * @param {?} value
 * @param {?} modulePath
 * @param {?} exportName
 * @return {?}
 */
function checkNotEmpty(value, modulePath, exportName) {
    if (!value) {
        throw new Error("Cannot find '" + exportName + "' in '" + modulePath + "'");
    }
    return value;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Represents an Embedded Template that can be used to instantiate Embedded Views.
 *
 * You can access a `TemplateRef`, in two ways. Via a directive placed on a `<ng-template>` element
 * (or directive prefixed with `*`) and have the `TemplateRef` for this Embedded View injected into
 * the constructor of the directive using the `TemplateRef` Token. Alternatively you can query for
 * the `TemplateRef` from a Component or a Directive via {\@link Query}.
 *
 * To instantiate Embedded Views based on a Template, use
 * {\@link ViewContainerRef#createEmbeddedView}, which will create the View and attach it to the
 * View Container.
 * \@stable
 * @abstract
 */
var TemplateRef = (function () {
    function TemplateRef() {
    }
    /**
     * @abstract
     * @return {?}
     */
    TemplateRef.prototype.elementRef = function () { };
    /**
     * @abstract
     * @param {?} context
     * @return {?}
     */
    TemplateRef.prototype.createEmbeddedView = function (context) { };
    return TemplateRef;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Represents a container where one or more Views can be attached.
 *
 * The container can contain two kinds of Views. Host Views, created by instantiating a
 * {\@link Component} via {\@link #createComponent}, and Embedded Views, created by instantiating an
 * {\@link TemplateRef Embedded Template} via {\@link #createEmbeddedView}.
 *
 * The location of the View Container within the containing View is specified by the Anchor
 * `element`. Each View Container can have only one Anchor Element and each Anchor Element can only
 * have a single View Container.
 *
 * Root elements of Views attached to this container become siblings of the Anchor Element in
 * the Rendered View.
 *
 * To access a `ViewContainerRef` of an Element, you can either place a {\@link Directive} injected
 * with `ViewContainerRef` on the Element, or you obtain it via a {\@link ViewChild} query.
 * \@stable
 * @abstract
 */
var ViewContainerRef = (function () {
    function ViewContainerRef() {
    }
    /**
     * Anchor element that specifies the location of this container in the containing View.
     * <!-- TODO: rename to anchorElement -->
     * @abstract
     * @return {?}
     */
    ViewContainerRef.prototype.element = function () { };
    /**
     * @abstract
     * @return {?}
     */
    ViewContainerRef.prototype.injector = function () { };
    /**
     * @abstract
     * @return {?}
     */
    ViewContainerRef.prototype.parentInjector = function () { };
    /**
     * Destroys all Views in this container.
     * @abstract
     * @return {?}
     */
    ViewContainerRef.prototype.clear = function () { };
    /**
     * Returns the {\@link ViewRef} for the View located in this container at the specified index.
     * @abstract
     * @param {?} index
     * @return {?}
     */
    ViewContainerRef.prototype.get = function (index) { };
    /**
     * Returns the number of Views currently attached to this container.
     * @abstract
     * @return {?}
     */
    ViewContainerRef.prototype.length = function () { };
    /**
     * Instantiates an Embedded View based on the {\@link TemplateRef `templateRef`} and inserts it
     * into this container at the specified `index`.
     *
     * If `index` is not specified, the new View will be inserted as the last View in the container.
     *
     * Returns the {\@link ViewRef} for the newly created View.
     * @abstract
     * @template C
     * @param {?} templateRef
     * @param {?=} context
     * @param {?=} index
     * @return {?}
     */
    ViewContainerRef.prototype.createEmbeddedView = function (templateRef, context, index) { };
    /**
     * Instantiates a single {\@link Component} and inserts its Host View into this container at the
     * specified `index`.
     *
     * The component is instantiated using its {\@link ComponentFactory} which can be
     * obtained via {\@link ComponentFactoryResolver#resolveComponentFactory}.
     *
     * If `index` is not specified, the new View will be inserted as the last View in the container.
     *
     * You can optionally specify the {\@link Injector} that will be used as parent for the Component.
     *
     * Returns the {\@link ComponentRef} of the Host View created for the newly instantiated Component.
     * @abstract
     * @template C
     * @param {?} componentFactory
     * @param {?=} index
     * @param {?=} injector
     * @param {?=} projectableNodes
     * @param {?=} ngModule
     * @return {?}
     */
    ViewContainerRef.prototype.createComponent = function (componentFactory, index, injector, projectableNodes, ngModule) { };
    /**
     * Inserts a View identified by a {\@link ViewRef} into the container at the specified `index`.
     *
     * If `index` is not specified, the new View will be inserted as the last View in the container.
     *
     * Returns the inserted {\@link ViewRef}.
     * @abstract
     * @param {?} viewRef
     * @param {?=} index
     * @return {?}
     */
    ViewContainerRef.prototype.insert = function (viewRef, index) { };
    /**
     * Moves a View identified by a {\@link ViewRef} into the container at the specified `index`.
     *
     * Returns the inserted {\@link ViewRef}.
     * @abstract
     * @param {?} viewRef
     * @param {?} currentIndex
     * @return {?}
     */
    ViewContainerRef.prototype.move = function (viewRef, currentIndex) { };
    /**
     * Returns the index of the View, specified via {\@link ViewRef}, within the current container or
     * `-1` if this container doesn't contain the View.
     * @abstract
     * @param {?} viewRef
     * @return {?}
     */
    ViewContainerRef.prototype.indexOf = function (viewRef) { };
    /**
     * Destroys a View attached to this container at the specified `index`.
     *
     * If `index` is not specified, the last View in the container will be removed.
     * @abstract
     * @param {?=} index
     * @return {?}
     */
    ViewContainerRef.prototype.remove = function (index) { };
    /**
     * Use along with {\@link #insert} to move a View within the current container.
     *
     * If the `index` param is omitted, the last {\@link ViewRef} is detached.
     * @abstract
     * @param {?=} index
     * @return {?}
     */
    ViewContainerRef.prototype.detach = function (index) { };
    return ViewContainerRef;
}());
/**
 * \@stable
 * @abstract
 */
var ChangeDetectorRef = (function () {
    function ChangeDetectorRef() {
    }
    /**
     * Marks all {\@link ChangeDetectionStrategy#OnPush} ancestors as to be checked.
     *
     * <!-- TODO: Add a link to a chapter on OnPush components -->
     *
     * ### Example ([live demo](http://plnkr.co/edit/GC512b?p=preview))
     *
     * ```typescript
     * \@Component({
     *   selector: 'cmp',
     *   changeDetection: ChangeDetectionStrategy.OnPush,
     *   template: `Number of ticks: {{numberOfTicks}}`
     * })
     * class Cmp {
     *   numberOfTicks = 0;
     *
     *   constructor(private ref: ChangeDetectorRef) {
     *     setInterval(() => {
     *       this.numberOfTicks++;
     *       // the following is required, otherwise the view will not be updated
     *       this.ref.markForCheck();
     *     }, 1000);
     *   }
     * }
     *
     * \@Component({
     *   selector: 'app',
     *   changeDetection: ChangeDetectionStrategy.OnPush,
     *   template: `
     *     <cmp><cmp>
     *   `,
     * })
     * class App {
     * }
     * ```
     * @abstract
     * @return {?}
     */
    ChangeDetectorRef.prototype.markForCheck = function () { };
    /**
     * Detaches the change detector from the change detector tree.
     *
     * The detached change detector will not be checked until it is reattached.
     *
     * This can also be used in combination with {\@link ChangeDetectorRef#detectChanges} to implement
     * local change
     * detection checks.
     *
     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->
     * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->
     *
     * ### Example
     *
     * The following example defines a component with a large list of readonly data.
     * Imagine the data changes constantly, many times per second. For performance reasons,
     * we want to check and update the list every five seconds. We can do that by detaching
     * the component's change detector and doing a local check every five seconds.
     *
     * ```typescript
     * class DataProvider {
     *   // in a real application the returned data will be different every time
     *   get data() {
     *     return [1,2,3,4,5];
     *   }
     * }
     *
     * \@Component({
     *   selector: 'giant-list',
     *   template: `
     *     <li *ngFor="let d of dataProvider.data">Data {{d}}</li>
     *   `,
     * })
     * class GiantList {
     *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {
     *     ref.detach();
     *     setInterval(() => {
     *       this.ref.detectChanges();
     *     }, 5000);
     *   }
     * }
     *
     * \@Component({
     *   selector: 'app',
     *   providers: [DataProvider],
     *   template: `
     *     <giant-list><giant-list>
     *   `,
     * })
     * class App {
     * }
     * ```
     * @abstract
     * @return {?}
     */
    ChangeDetectorRef.prototype.detach = function () { };
    /**
     * Checks the change detector and its children.
     *
     * This can also be used in combination with {\@link ChangeDetectorRef#detach} to implement local
     * change detection
     * checks.
     *
     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->
     * <!-- TODO: Add a live demo once ref.detectChanges is merged into master -->
     *
     * ### Example
     *
     * The following example defines a component with a large list of readonly data.
     * Imagine, the data changes constantly, many times per second. For performance reasons,
     * we want to check and update the list every five seconds.
     *
     * We can do that by detaching the component's change detector and doing a local change detection
     * check
     * every five seconds.
     *
     * See {\@link ChangeDetectorRef#detach} for more information.
     * @abstract
     * @return {?}
     */
    ChangeDetectorRef.prototype.detectChanges = function () { };
    /**
     * Checks the change detector and its children, and throws if any changes are detected.
     *
     * This is used in development mode to verify that running change detection doesn't introduce
     * other changes.
     * @abstract
     * @return {?}
     */
    ChangeDetectorRef.prototype.checkNoChanges = function () { };
    /**
     * Reattach the change detector to the change detector tree.
     *
     * This also marks OnPush ancestors as to be checked. This reattached change detector will be
     * checked during the next change detection run.
     *
     * <!-- TODO: Add a link to a chapter on detach/reattach/local digest -->
     *
     * ### Example ([live demo](http://plnkr.co/edit/aUhZha?p=preview))
     *
     * The following example creates a component displaying `live` data. The component will detach
     * its change detector from the main change detector tree when the component's live property
     * is set to false.
     *
     * ```typescript
     * class DataProvider {
     *   data = 1;
     *
     *   constructor() {
     *     setInterval(() => {
     *       this.data = this.data * 2;
     *     }, 500);
     *   }
     * }
     *
     * \@Component({
     *   selector: 'live-data',
     *   inputs: ['live'],
     *   template: 'Data: {{dataProvider.data}}'
     * })
     * class LiveData {
     *   constructor(private ref: ChangeDetectorRef, private dataProvider: DataProvider) {}
     *
     *   set live(value) {
     *     if (value) {
     *       this.ref.reattach();
     *     } else {
     *       this.ref.detach();
     *     }
     *   }
     * }
     *
     * \@Component({
     *   selector: 'app',
     *   providers: [DataProvider],
     *   template: `
     *     Live Update: <input type="checkbox" [(ngModel)]="live">
     *     <live-data [live]="live"><live-data>
     *   `,
     * })
     * class App {
     *   live = true;
     * }
     * ```
     * @abstract
     * @return {?}
     */
    ChangeDetectorRef.prototype.reattach = function () { };
    return ChangeDetectorRef;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@stable
 * @abstract
 */
var ViewRef = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ViewRef, _super);
    function ViewRef() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * Destroys the view and all of the data structures associated with it.
     * @abstract
     * @return {?}
     */
    ViewRef.prototype.destroy = function () { };
    /**
     * @abstract
     * @return {?}
     */
    ViewRef.prototype.destroyed = function () { };
    /**
     * @abstract
     * @param {?} callback
     * @return {?}
     */
    ViewRef.prototype.onDestroy = function (callback) { };
    return ViewRef;
}(ChangeDetectorRef));
/**
 * Represents an Angular View.
 *
 * <!-- TODO: move the next two paragraphs to the dev guide -->
 * A View is a fundamental building block of the application UI. It is the smallest grouping of
 * Elements which are created and destroyed together.
 *
 * Properties of elements in a View can change, but the structure (number and order) of elements in
 * a View cannot. Changing the structure of Elements can only be done by inserting, moving or
 * removing nested Views via a {\@link ViewContainerRef}. Each View can contain many View Containers.
 * <!-- /TODO -->
 *
 * ### Example
 *
 * Given this template...
 *
 * ```
 * Count: {{items.length}}
 * <ul>
 *   <li *ngFor="let  item of items">{{item}}</li>
 * </ul>
 * ```
 *
 * We have two {\@link TemplateRef}s:
 *
 * Outer {\@link TemplateRef}:
 * ```
 * Count: {{items.length}}
 * <ul>
 *   <ng-template ngFor let-item [ngForOf]="items"></ng-template>
 * </ul>
 * ```
 *
 * Inner {\@link TemplateRef}:
 * ```
 *   <li>{{item}}</li>
 * ```
 *
 * Notice that the original template is broken down into two separate {\@link TemplateRef}s.
 *
 * The outer/inner {\@link TemplateRef}s are then assembled into views like so:
 *
 * ```
 * <!-- ViewRef: outer-0 -->
 * Count: 2
 * <ul>
 *   <ng-template view-container-ref></ng-template>
 *   <!-- ViewRef: inner-1 --><li>first</li><!-- /ViewRef: inner-1 -->
 *   <!-- ViewRef: inner-2 --><li>second</li><!-- /ViewRef: inner-2 -->
 * </ul>
 * <!-- /ViewRef: outer-0 -->
 * ```
 * \@experimental
 * @abstract
 */
var EmbeddedViewRef = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](EmbeddedViewRef, _super);
    function EmbeddedViewRef() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @abstract
     * @return {?}
     */
    EmbeddedViewRef.prototype.context = function () { };
    /**
     * @abstract
     * @return {?}
     */
    EmbeddedViewRef.prototype.rootNodes = function () { };
    return EmbeddedViewRef;
}(ViewRef));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
// Public API for compiler
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var EventListener = (function () {
    /**
     * @param {?} name
     * @param {?} callback
     */
    function EventListener(name, callback) {
        this.name = name;
        this.callback = callback;
    }
    return EventListener;
}());
/**
 * \@experimental All debugging apis are currently experimental.
 */
var DebugNode = (function () {
    /**
     * @param {?} nativeNode
     * @param {?} parent
     * @param {?} _debugContext
     */
    function DebugNode(nativeNode, parent, _debugContext) {
        this._debugContext = _debugContext;
        this.nativeNode = nativeNode;
        if (parent && parent instanceof DebugElement) {
            parent.addChild(this);
        }
        else {
            this.parent = null;
        }
        this.listeners = [];
    }
    Object.defineProperty(DebugNode.prototype, "injector", {
        /**
         * @return {?}
         */
        get: function () { return this._debugContext.injector; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DebugNode.prototype, "componentInstance", {
        /**
         * @return {?}
         */
        get: function () { return this._debugContext.component; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DebugNode.prototype, "context", {
        /**
         * @return {?}
         */
        get: function () { return this._debugContext.context; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DebugNode.prototype, "references", {
        /**
         * @return {?}
         */
        get: function () { return this._debugContext.references; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DebugNode.prototype, "providerTokens", {
        /**
         * @return {?}
         */
        get: function () { return this._debugContext.providerTokens; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DebugNode.prototype, "source", {
        /**
         * @deprecated since v4
         * @return {?}
         */
        get: function () { return 'Deprecated since v4'; },
        enumerable: true,
        configurable: true
    });
    return DebugNode;
}());
/**
 * \@experimental All debugging apis are currently experimental.
 */
var DebugElement = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](DebugElement, _super);
    /**
     * @param {?} nativeNode
     * @param {?} parent
     * @param {?} _debugContext
     */
    function DebugElement(nativeNode, parent, _debugContext) {
        var _this = _super.call(this, nativeNode, parent, _debugContext) || this;
        _this.properties = {};
        _this.attributes = {};
        _this.classes = {};
        _this.styles = {};
        _this.childNodes = [];
        _this.nativeElement = nativeNode;
        return _this;
    }
    /**
     * @param {?} child
     * @return {?}
     */
    DebugElement.prototype.addChild = function (child) {
        if (child) {
            this.childNodes.push(child);
            child.parent = this;
        }
    };
    /**
     * @param {?} child
     * @return {?}
     */
    DebugElement.prototype.removeChild = function (child) {
        var /** @type {?} */ childIndex = this.childNodes.indexOf(child);
        if (childIndex !== -1) {
            child.parent = null;
            this.childNodes.splice(childIndex, 1);
        }
    };
    /**
     * @param {?} child
     * @param {?} newChildren
     * @return {?}
     */
    DebugElement.prototype.insertChildrenAfter = function (child, newChildren) {
        var _this = this;
        var /** @type {?} */ siblingIndex = this.childNodes.indexOf(child);
        if (siblingIndex !== -1) {
            (_a = this.childNodes).splice.apply(_a, [siblingIndex + 1, 0].concat(newChildren));
            newChildren.forEach(function (c) {
                if (c.parent) {
                    c.parent.removeChild(c);
                }
                c.parent = _this;
            });
        }
        var _a;
    };
    /**
     * @param {?} refChild
     * @param {?} newChild
     * @return {?}
     */
    DebugElement.prototype.insertBefore = function (refChild, newChild) {
        var /** @type {?} */ refIndex = this.childNodes.indexOf(refChild);
        if (refIndex === -1) {
            this.addChild(newChild);
        }
        else {
            if (newChild.parent) {
                newChild.parent.removeChild(newChild);
            }
            newChild.parent = this;
            this.childNodes.splice(refIndex, 0, newChild);
        }
    };
    /**
     * @param {?} predicate
     * @return {?}
     */
    DebugElement.prototype.query = function (predicate) {
        var /** @type {?} */ results = this.queryAll(predicate);
        return results[0] || null;
    };
    /**
     * @param {?} predicate
     * @return {?}
     */
    DebugElement.prototype.queryAll = function (predicate) {
        var /** @type {?} */ matches = [];
        _queryElementChildren(this, predicate, matches);
        return matches;
    };
    /**
     * @param {?} predicate
     * @return {?}
     */
    DebugElement.prototype.queryAllNodes = function (predicate) {
        var /** @type {?} */ matches = [];
        _queryNodeChildren(this, predicate, matches);
        return matches;
    };
    Object.defineProperty(DebugElement.prototype, "children", {
        /**
         * @return {?}
         */
        get: function () {
            return (this.childNodes.filter(function (node) { return node instanceof DebugElement; }));
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} eventName
     * @param {?} eventObj
     * @return {?}
     */
    DebugElement.prototype.triggerEventHandler = function (eventName, eventObj) {
        this.listeners.forEach(function (listener) {
            if (listener.name == eventName) {
                listener.callback(eventObj);
            }
        });
    };
    return DebugElement;
}(DebugNode));
/**
 * \@experimental
 * @param {?} debugEls
 * @return {?}
 */
function asNativeElements(debugEls) {
    return debugEls.map(function (el) { return el.nativeElement; });
}
/**
 * @param {?} element
 * @param {?} predicate
 * @param {?} matches
 * @return {?}
 */
function _queryElementChildren(element, predicate, matches) {
    element.childNodes.forEach(function (node) {
        if (node instanceof DebugElement) {
            if (predicate(node)) {
                matches.push(node);
            }
            _queryElementChildren(node, predicate, matches);
        }
    });
}
/**
 * @param {?} parentNode
 * @param {?} predicate
 * @param {?} matches
 * @return {?}
 */
function _queryNodeChildren(parentNode, predicate, matches) {
    if (parentNode instanceof DebugElement) {
        parentNode.childNodes.forEach(function (node) {
            if (predicate(node)) {
                matches.push(node);
            }
            if (node instanceof DebugElement) {
                _queryNodeChildren(node, predicate, matches);
            }
        });
    }
}
// Need to keep the nodes in a global Map so that multiple angular apps are supported.
var _nativeNodeToDebugNode = new Map();
/**
 * \@experimental
 * @param {?} nativeNode
 * @return {?}
 */
function getDebugNode(nativeNode) {
    return _nativeNodeToDebugNode.get(nativeNode) || null;
}
/**
 * @return {?}
 */
/**
 * @param {?} node
 * @return {?}
 */
function indexDebugNode(node) {
    _nativeNodeToDebugNode.set(node.nativeNode, node);
}
/**
 * @param {?} node
 * @return {?}
 */
function removeDebugNodeFromIndex(node) {
    _nativeNodeToDebugNode.delete(node.nativeNode);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} a
 * @param {?} b
 * @return {?}
 */
function devModeEqual(a, b) {
    var /** @type {?} */ isListLikeIterableA = isListLikeIterable(a);
    var /** @type {?} */ isListLikeIterableB = isListLikeIterable(b);
    if (isListLikeIterableA && isListLikeIterableB) {
        return areIterablesEqual(a, b, devModeEqual);
    }
    else {
        var /** @type {?} */ isAObject = a && (typeof a === 'object' || typeof a === 'function');
        var /** @type {?} */ isBObject = b && (typeof b === 'object' || typeof b === 'function');
        if (!isListLikeIterableA && isAObject && !isListLikeIterableB && isBObject) {
            return true;
        }
        else {
            return looseIdentical(a, b);
        }
    }
}
/**
 * Indicates that the result of a {\@link Pipe} transformation has changed even though the
 * reference
 * has not changed.
 *
 * The wrapped value will be unwrapped by change detection, and the unwrapped value will be stored.
 *
 * Example:
 *
 * ```
 * if (this._latestValue === this._latestReturnedValue) {
 *    return this._latestReturnedValue;
 *  } else {
 *    this._latestReturnedValue = this._latestValue;
 *    return WrappedValue.wrap(this._latestValue); // this will force update
 *  }
 * ```
 * \@stable
 */
var WrappedValue = (function () {
    /**
     * @param {?} wrapped
     */
    function WrappedValue(wrapped) {
        this.wrapped = wrapped;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    WrappedValue.wrap = function (value) { return new WrappedValue(value); };
    return WrappedValue;
}());
/**
 * Helper class for unwrapping WrappedValue s
 */
var ValueUnwrapper = (function () {
    function ValueUnwrapper() {
        this.hasWrappedValue = false;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    ValueUnwrapper.prototype.unwrap = function (value) {
        if (value instanceof WrappedValue) {
            this.hasWrappedValue = true;
            return value.wrapped;
        }
        return value;
    };
    /**
     * @return {?}
     */
    ValueUnwrapper.prototype.reset = function () { this.hasWrappedValue = false; };
    return ValueUnwrapper;
}());
/**
 * Represents a basic change from a previous to a new value.
 * \@stable
 */
var SimpleChange = (function () {
    /**
     * @param {?} previousValue
     * @param {?} currentValue
     * @param {?} firstChange
     */
    function SimpleChange(previousValue, currentValue, firstChange) {
        this.previousValue = previousValue;
        this.currentValue = currentValue;
        this.firstChange = firstChange;
    }
    /**
     * Check whether the new value is the first value assigned.
     * @return {?}
     */
    SimpleChange.prototype.isFirstChange = function () { return this.firstChange; };
    return SimpleChange;
}());
/**
 * @param {?} obj
 * @return {?}
 */
function isListLikeIterable(obj) {
    if (!isJsObject(obj))
        return false;
    return Array.isArray(obj) ||
        (!(obj instanceof Map) &&
            getSymbolIterator() in obj); // JS Iterable have a Symbol.iterator prop
}
/**
 * @param {?} a
 * @param {?} b
 * @param {?} comparator
 * @return {?}
 */
function areIterablesEqual(a, b, comparator) {
    var /** @type {?} */ iterator1 = a[getSymbolIterator()]();
    var /** @type {?} */ iterator2 = b[getSymbolIterator()]();
    while (true) {
        var /** @type {?} */ item1 = iterator1.next();
        var /** @type {?} */ item2 = iterator2.next();
        if (item1.done && item2.done)
            return true;
        if (item1.done || item2.done)
            return false;
        if (!comparator(item1.value, item2.value))
            return false;
    }
}
/**
 * @param {?} obj
 * @param {?} fn
 * @return {?}
 */
function iterateListLike(obj, fn) {
    if (Array.isArray(obj)) {
        for (var /** @type {?} */ i = 0; i < obj.length; i++) {
            fn(obj[i]);
        }
    }
    else {
        var /** @type {?} */ iterator = obj[getSymbolIterator()]();
        var /** @type {?} */ item = void 0;
        while (!((item = iterator.next()).done)) {
            fn(item.value);
        }
    }
}
/**
 * @param {?} o
 * @return {?}
 */
function isJsObject(o) {
    return o !== null && (typeof o === 'function' || typeof o === 'object');
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var DefaultIterableDifferFactory = (function () {
    function DefaultIterableDifferFactory() {
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    DefaultIterableDifferFactory.prototype.supports = function (obj) { return isListLikeIterable(obj); };
    /**
     * @deprecated v4.0.0 - ChangeDetectorRef is not used and is no longer a parameter
     * @template V
     * @param {?=} cdRefOrTrackBy
     * @param {?=} trackByFn
     * @return {?}
     */
    DefaultIterableDifferFactory.prototype.create = function (cdRefOrTrackBy, trackByFn) {
        return new DefaultIterableDiffer(trackByFn || (cdRefOrTrackBy));
    };
    return DefaultIterableDifferFactory;
}());
var trackByIdentity = function (index, item) { return item; };
/**
 * @deprecated v4.0.0 - Should not be part of public API.
 */
var DefaultIterableDiffer = (function () {
    /**
     * @param {?=} trackByFn
     */
    function DefaultIterableDiffer(trackByFn) {
        this._length = 0;
        this._collection = null;
        this._linkedRecords = null;
        this._unlinkedRecords = null;
        this._previousItHead = null;
        this._itHead = null;
        this._itTail = null;
        this._additionsHead = null;
        this._additionsTail = null;
        this._movesHead = null;
        this._movesTail = null;
        this._removalsHead = null;
        this._removalsTail = null;
        this._identityChangesHead = null;
        this._identityChangesTail = null;
        this._trackByFn = trackByFn || trackByIdentity;
    }
    Object.defineProperty(DefaultIterableDiffer.prototype, "collection", {
        /**
         * @return {?}
         */
        get: function () { return this._collection; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DefaultIterableDiffer.prototype, "length", {
        /**
         * @return {?}
         */
        get: function () { return this._length; },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} fn
     * @return {?}
     */
    DefaultIterableDiffer.prototype.forEachItem = function (fn) {
        var /** @type {?} */ record;
        for (record = this._itHead; record !== null; record = record._next) {
            fn(record);
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    DefaultIterableDiffer.prototype.forEachOperation = function (fn) {
        var /** @type {?} */ nextIt = this._itHead;
        var /** @type {?} */ nextRemove = this._removalsHead;
        var /** @type {?} */ addRemoveOffset = 0;
        var /** @type {?} */ moveOffsets = null;
        while (nextIt || nextRemove) {
            // Figure out which is the next record to process
            // Order: remove, add, move
            var /** @type {?} */ record = !nextRemove ||
                nextIt && ((nextIt.currentIndex)) <
                    getPreviousIndex(nextRemove, addRemoveOffset, moveOffsets) ? ((nextIt)) :
                nextRemove;
            var /** @type {?} */ adjPreviousIndex = getPreviousIndex(record, addRemoveOffset, moveOffsets);
            var /** @type {?} */ currentIndex = record.currentIndex;
            // consume the item, and adjust the addRemoveOffset and update moveDistance if necessary
            if (record === nextRemove) {
                addRemoveOffset--;
                nextRemove = nextRemove._nextRemoved;
            }
            else {
                nextIt = ((nextIt))._next;
                if (record.previousIndex == null) {
                    addRemoveOffset++;
                }
                else {
                    // INVARIANT:  currentIndex < previousIndex
                    if (!moveOffsets)
                        moveOffsets = [];
                    var /** @type {?} */ localMovePreviousIndex = adjPreviousIndex - addRemoveOffset;
                    var /** @type {?} */ localCurrentIndex = ((currentIndex)) - addRemoveOffset;
                    if (localMovePreviousIndex != localCurrentIndex) {
                        for (var /** @type {?} */ i = 0; i < localMovePreviousIndex; i++) {
                            var /** @type {?} */ offset = i < moveOffsets.length ? moveOffsets[i] : (moveOffsets[i] = 0);
                            var /** @type {?} */ index = offset + i;
                            if (localCurrentIndex <= index && index < localMovePreviousIndex) {
                                moveOffsets[i] = offset + 1;
                            }
                        }
                        var /** @type {?} */ previousIndex = record.previousIndex;
                        moveOffsets[previousIndex] = localCurrentIndex - localMovePreviousIndex;
                    }
                }
            }
            if (adjPreviousIndex !== currentIndex) {
                fn(record, adjPreviousIndex, currentIndex);
            }
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    DefaultIterableDiffer.prototype.forEachPreviousItem = function (fn) {
        var /** @type {?} */ record;
        for (record = this._previousItHead; record !== null; record = record._nextPrevious) {
            fn(record);
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    DefaultIterableDiffer.prototype.forEachAddedItem = function (fn) {
        var /** @type {?} */ record;
        for (record = this._additionsHead; record !== null; record = record._nextAdded) {
            fn(record);
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    DefaultIterableDiffer.prototype.forEachMovedItem = function (fn) {
        var /** @type {?} */ record;
        for (record = this._movesHead; record !== null; record = record._nextMoved) {
            fn(record);
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    DefaultIterableDiffer.prototype.forEachRemovedItem = function (fn) {
        var /** @type {?} */ record;
        for (record = this._removalsHead; record !== null; record = record._nextRemoved) {
            fn(record);
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    DefaultIterableDiffer.prototype.forEachIdentityChange = function (fn) {
        var /** @type {?} */ record;
        for (record = this._identityChangesHead; record !== null; record = record._nextIdentityChange) {
            fn(record);
        }
    };
    /**
     * @param {?} collection
     * @return {?}
     */
    DefaultIterableDiffer.prototype.diff = function (collection) {
        if (collection == null)
            collection = [];
        if (!isListLikeIterable(collection)) {
            throw new Error("Error trying to diff '" + stringify(collection) + "'. Only arrays and iterables are allowed");
        }
        if (this.check(collection)) {
            return this;
        }
        else {
            return null;
        }
    };
    /**
     * @return {?}
     */
    DefaultIterableDiffer.prototype.onDestroy = function () { };
    /**
     * @param {?} collection
     * @return {?}
     */
    DefaultIterableDiffer.prototype.check = function (collection) {
        var _this = this;
        this._reset();
        var /** @type {?} */ record = this._itHead;
        var /** @type {?} */ mayBeDirty = false;
        var /** @type {?} */ index;
        var /** @type {?} */ item;
        var /** @type {?} */ itemTrackBy;
        if (Array.isArray(collection)) {
            this._length = collection.length;
            for (var /** @type {?} */ index_1 = 0; index_1 < this._length; index_1++) {
                item = collection[index_1];
                itemTrackBy = this._trackByFn(index_1, item);
                if (record === null || !looseIdentical(record.trackById, itemTrackBy)) {
                    record = this._mismatch(record, item, itemTrackBy, index_1);
                    mayBeDirty = true;
                }
                else {
                    if (mayBeDirty) {
                        // TODO(misko): can we limit this to duplicates only?
                        record = this._verifyReinsertion(record, item, itemTrackBy, index_1);
                    }
                    if (!looseIdentical(record.item, item))
                        this._addIdentityChange(record, item);
                }
                record = record._next;
            }
        }
        else {
            index = 0;
            iterateListLike(collection, function (item) {
                itemTrackBy = _this._trackByFn(index, item);
                if (record === null || !looseIdentical(record.trackById, itemTrackBy)) {
                    record = _this._mismatch(record, item, itemTrackBy, index);
                    mayBeDirty = true;
                }
                else {
                    if (mayBeDirty) {
                        // TODO(misko): can we limit this to duplicates only?
                        record = _this._verifyReinsertion(record, item, itemTrackBy, index);
                    }
                    if (!looseIdentical(record.item, item))
                        _this._addIdentityChange(record, item);
                }
                record = record._next;
                index++;
            });
            this._length = index;
        }
        this._truncate(record);
        this._collection = collection;
        return this.isDirty;
    };
    Object.defineProperty(DefaultIterableDiffer.prototype, "isDirty", {
        /**
         * @return {?}
         */
        get: function () {
            return this._additionsHead !== null || this._movesHead !== null ||
                this._removalsHead !== null || this._identityChangesHead !== null;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Reset the state of the change objects to show no changes. This means set previousKey to
     * currentKey, and clear all of the queues (additions, moves, removals).
     * Set the previousIndexes of moved and added items to their currentIndexes
     * Reset the list of additions, moves and removals
     *
     * \@internal
     * @return {?}
     */
    DefaultIterableDiffer.prototype._reset = function () {
        if (this.isDirty) {
            var /** @type {?} */ record = void 0;
            var /** @type {?} */ nextRecord = void 0;
            for (record = this._previousItHead = this._itHead; record !== null; record = record._next) {
                record._nextPrevious = record._next;
            }
            for (record = this._additionsHead; record !== null; record = record._nextAdded) {
                record.previousIndex = record.currentIndex;
            }
            this._additionsHead = this._additionsTail = null;
            for (record = this._movesHead; record !== null; record = nextRecord) {
                record.previousIndex = record.currentIndex;
                nextRecord = record._nextMoved;
            }
            this._movesHead = this._movesTail = null;
            this._removalsHead = this._removalsTail = null;
            this._identityChangesHead = this._identityChangesTail = null;
            // todo(vicb) when assert gets supported
            // assert(!this.isDirty);
        }
    };
    /**
     * This is the core function which handles differences between collections.
     *
     * - `record` is the record which we saw at this position last time. If null then it is a new
     *   item.
     * - `item` is the current item in the collection
     * - `index` is the position of the item in the collection
     *
     * \@internal
     * @param {?} record
     * @param {?} item
     * @param {?} itemTrackBy
     * @param {?} index
     * @return {?}
     */
    DefaultIterableDiffer.prototype._mismatch = function (record, item, itemTrackBy, index) {
        // The previous record after which we will append the current one.
        var /** @type {?} */ previousRecord;
        if (record === null) {
            previousRecord = this._itTail;
        }
        else {
            previousRecord = record._prev;
            // Remove the record from the collection since we know it does not match the item.
            this._remove(record);
        }
        // Attempt to see if we have seen the item before.
        record = this._linkedRecords === null ? null : this._linkedRecords.get(itemTrackBy, index);
        if (record !== null) {
            // We have seen this before, we need to move it forward in the collection.
            // But first we need to check if identity changed, so we can update in view if necessary
            if (!looseIdentical(record.item, item))
                this._addIdentityChange(record, item);
            this._moveAfter(record, previousRecord, index);
        }
        else {
            // Never seen it, check evicted list.
            record = this._unlinkedRecords === null ? null : this._unlinkedRecords.get(itemTrackBy, null);
            if (record !== null) {
                // It is an item which we have evicted earlier: reinsert it back into the list.
                // But first we need to check if identity changed, so we can update in view if necessary
                if (!looseIdentical(record.item, item))
                    this._addIdentityChange(record, item);
                this._reinsertAfter(record, previousRecord, index);
            }
            else {
                // It is a new item: add it.
                record =
                    this._addAfter(new IterableChangeRecord_(item, itemTrackBy), previousRecord, index);
            }
        }
        return record;
    };
    /**
     * This check is only needed if an array contains duplicates. (Short circuit of nothing dirty)
     *
     * Use case: `[a, a]` => `[b, a, a]`
     *
     * If we did not have this check then the insertion of `b` would:
     *   1) evict first `a`
     *   2) insert `b` at `0` index.
     *   3) leave `a` at index `1` as is. <-- this is wrong!
     *   3) reinsert `a` at index 2. <-- this is wrong!
     *
     * The correct behavior is:
     *   1) evict first `a`
     *   2) insert `b` at `0` index.
     *   3) reinsert `a` at index 1.
     *   3) move `a` at from `1` to `2`.
     *
     *
     * Double check that we have not evicted a duplicate item. We need to check if the item type may
     * have already been removed:
     * The insertion of b will evict the first 'a'. If we don't reinsert it now it will be reinserted
     * at the end. Which will show up as the two 'a's switching position. This is incorrect, since a
     * better way to think of it is as insert of 'b' rather then switch 'a' with 'b' and then add 'a'
     * at the end.
     *
     * \@internal
     * @param {?} record
     * @param {?} item
     * @param {?} itemTrackBy
     * @param {?} index
     * @return {?}
     */
    DefaultIterableDiffer.prototype._verifyReinsertion = function (record, item, itemTrackBy, index) {
        var /** @type {?} */ reinsertRecord = this._unlinkedRecords === null ? null : this._unlinkedRecords.get(itemTrackBy, null);
        if (reinsertRecord !== null) {
            record = this._reinsertAfter(reinsertRecord, /** @type {?} */ ((record._prev)), index);
        }
        else if (record.currentIndex != index) {
            record.currentIndex = index;
            this._addToMoves(record, index);
        }
        return record;
    };
    /**
     * Get rid of any excess {\@link IterableChangeRecord_}s from the previous collection
     *
     * - `record` The first excess {\@link IterableChangeRecord_}.
     *
     * \@internal
     * @param {?} record
     * @return {?}
     */
    DefaultIterableDiffer.prototype._truncate = function (record) {
        // Anything after that needs to be removed;
        while (record !== null) {
            var /** @type {?} */ nextRecord = record._next;
            this._addToRemovals(this._unlink(record));
            record = nextRecord;
        }
        if (this._unlinkedRecords !== null) {
            this._unlinkedRecords.clear();
        }
        if (this._additionsTail !== null) {
            this._additionsTail._nextAdded = null;
        }
        if (this._movesTail !== null) {
            this._movesTail._nextMoved = null;
        }
        if (this._itTail !== null) {
            this._itTail._next = null;
        }
        if (this._removalsTail !== null) {
            this._removalsTail._nextRemoved = null;
        }
        if (this._identityChangesTail !== null) {
            this._identityChangesTail._nextIdentityChange = null;
        }
    };
    /**
     * \@internal
     * @param {?} record
     * @param {?} prevRecord
     * @param {?} index
     * @return {?}
     */
    DefaultIterableDiffer.prototype._reinsertAfter = function (record, prevRecord, index) {
        if (this._unlinkedRecords !== null) {
            this._unlinkedRecords.remove(record);
        }
        var /** @type {?} */ prev = record._prevRemoved;
        var /** @type {?} */ next = record._nextRemoved;
        if (prev === null) {
            this._removalsHead = next;
        }
        else {
            prev._nextRemoved = next;
        }
        if (next === null) {
            this._removalsTail = prev;
        }
        else {
            next._prevRemoved = prev;
        }
        this._insertAfter(record, prevRecord, index);
        this._addToMoves(record, index);
        return record;
    };
    /**
     * \@internal
     * @param {?} record
     * @param {?} prevRecord
     * @param {?} index
     * @return {?}
     */
    DefaultIterableDiffer.prototype._moveAfter = function (record, prevRecord, index) {
        this._unlink(record);
        this._insertAfter(record, prevRecord, index);
        this._addToMoves(record, index);
        return record;
    };
    /**
     * \@internal
     * @param {?} record
     * @param {?} prevRecord
     * @param {?} index
     * @return {?}
     */
    DefaultIterableDiffer.prototype._addAfter = function (record, prevRecord, index) {
        this._insertAfter(record, prevRecord, index);
        if (this._additionsTail === null) {
            // todo(vicb)
            // assert(this._additionsHead === null);
            this._additionsTail = this._additionsHead = record;
        }
        else {
            // todo(vicb)
            // assert(_additionsTail._nextAdded === null);
            // assert(record._nextAdded === null);
            this._additionsTail = this._additionsTail._nextAdded = record;
        }
        return record;
    };
    /**
     * \@internal
     * @param {?} record
     * @param {?} prevRecord
     * @param {?} index
     * @return {?}
     */
    DefaultIterableDiffer.prototype._insertAfter = function (record, prevRecord, index) {
        // todo(vicb)
        // assert(record != prevRecord);
        // assert(record._next === null);
        // assert(record._prev === null);
        var /** @type {?} */ next = prevRecord === null ? this._itHead : prevRecord._next;
        // todo(vicb)
        // assert(next != record);
        // assert(prevRecord != record);
        record._next = next;
        record._prev = prevRecord;
        if (next === null) {
            this._itTail = record;
        }
        else {
            next._prev = record;
        }
        if (prevRecord === null) {
            this._itHead = record;
        }
        else {
            prevRecord._next = record;
        }
        if (this._linkedRecords === null) {
            this._linkedRecords = new _DuplicateMap();
        }
        this._linkedRecords.put(record);
        record.currentIndex = index;
        return record;
    };
    /**
     * \@internal
     * @param {?} record
     * @return {?}
     */
    DefaultIterableDiffer.prototype._remove = function (record) {
        return this._addToRemovals(this._unlink(record));
    };
    /**
     * \@internal
     * @param {?} record
     * @return {?}
     */
    DefaultIterableDiffer.prototype._unlink = function (record) {
        if (this._linkedRecords !== null) {
            this._linkedRecords.remove(record);
        }
        var /** @type {?} */ prev = record._prev;
        var /** @type {?} */ next = record._next;
        // todo(vicb)
        // assert((record._prev = null) === null);
        // assert((record._next = null) === null);
        if (prev === null) {
            this._itHead = next;
        }
        else {
            prev._next = next;
        }
        if (next === null) {
            this._itTail = prev;
        }
        else {
            next._prev = prev;
        }
        return record;
    };
    /**
     * \@internal
     * @param {?} record
     * @param {?} toIndex
     * @return {?}
     */
    DefaultIterableDiffer.prototype._addToMoves = function (record, toIndex) {
        // todo(vicb)
        // assert(record._nextMoved === null);
        if (record.previousIndex === toIndex) {
            return record;
        }
        if (this._movesTail === null) {
            // todo(vicb)
            // assert(_movesHead === null);
            this._movesTail = this._movesHead = record;
        }
        else {
            // todo(vicb)
            // assert(_movesTail._nextMoved === null);
            this._movesTail = this._movesTail._nextMoved = record;
        }
        return record;
    };
    /**
     * @param {?} record
     * @return {?}
     */
    DefaultIterableDiffer.prototype._addToRemovals = function (record) {
        if (this._unlinkedRecords === null) {
            this._unlinkedRecords = new _DuplicateMap();
        }
        this._unlinkedRecords.put(record);
        record.currentIndex = null;
        record._nextRemoved = null;
        if (this._removalsTail === null) {
            // todo(vicb)
            // assert(_removalsHead === null);
            this._removalsTail = this._removalsHead = record;
            record._prevRemoved = null;
        }
        else {
            // todo(vicb)
            // assert(_removalsTail._nextRemoved === null);
            // assert(record._nextRemoved === null);
            record._prevRemoved = this._removalsTail;
            this._removalsTail = this._removalsTail._nextRemoved = record;
        }
        return record;
    };
    /**
     * \@internal
     * @param {?} record
     * @param {?} item
     * @return {?}
     */
    DefaultIterableDiffer.prototype._addIdentityChange = function (record, item) {
        record.item = item;
        if (this._identityChangesTail === null) {
            this._identityChangesTail = this._identityChangesHead = record;
        }
        else {
            this._identityChangesTail = this._identityChangesTail._nextIdentityChange = record;
        }
        return record;
    };
    /**
     * @return {?}
     */
    DefaultIterableDiffer.prototype.toString = function () {
        var /** @type {?} */ list = [];
        this.forEachItem(function (record) { return list.push(record); });
        var /** @type {?} */ previous = [];
        this.forEachPreviousItem(function (record) { return previous.push(record); });
        var /** @type {?} */ additions = [];
        this.forEachAddedItem(function (record) { return additions.push(record); });
        var /** @type {?} */ moves = [];
        this.forEachMovedItem(function (record) { return moves.push(record); });
        var /** @type {?} */ removals = [];
        this.forEachRemovedItem(function (record) { return removals.push(record); });
        var /** @type {?} */ identityChanges = [];
        this.forEachIdentityChange(function (record) { return identityChanges.push(record); });
        return 'collection: ' + list.join(', ') + '\n' +
            'previous: ' + previous.join(', ') + '\n' +
            'additions: ' + additions.join(', ') + '\n' +
            'moves: ' + moves.join(', ') + '\n' +
            'removals: ' + removals.join(', ') + '\n' +
            'identityChanges: ' + identityChanges.join(', ') + '\n';
    };
    return DefaultIterableDiffer;
}());
/**
 * \@stable
 */
var IterableChangeRecord_ = (function () {
    /**
     * @param {?} item
     * @param {?} trackById
     */
    function IterableChangeRecord_(item, trackById) {
        this.item = item;
        this.trackById = trackById;
        this.currentIndex = null;
        this.previousIndex = null;
        /**
         * \@internal
         */
        this._nextPrevious = null;
        /**
         * \@internal
         */
        this._prev = null;
        /**
         * \@internal
         */
        this._next = null;
        /**
         * \@internal
         */
        this._prevDup = null;
        /**
         * \@internal
         */
        this._nextDup = null;
        /**
         * \@internal
         */
        this._prevRemoved = null;
        /**
         * \@internal
         */
        this._nextRemoved = null;
        /**
         * \@internal
         */
        this._nextAdded = null;
        /**
         * \@internal
         */
        this._nextMoved = null;
        /**
         * \@internal
         */
        this._nextIdentityChange = null;
    }
    /**
     * @return {?}
     */
    IterableChangeRecord_.prototype.toString = function () {
        return this.previousIndex === this.currentIndex ? stringify(this.item) :
            stringify(this.item) + '[' +
                stringify(this.previousIndex) + '->' + stringify(this.currentIndex) + ']';
    };
    return IterableChangeRecord_;
}());
var _DuplicateItemRecordList = (function () {
    function _DuplicateItemRecordList() {
        /**
         * \@internal
         */
        this._head = null;
        /**
         * \@internal
         */
        this._tail = null;
    }
    /**
     * Append the record to the list of duplicates.
     *
     * Note: by design all records in the list of duplicates hold the same value in record.item.
     * @param {?} record
     * @return {?}
     */
    _DuplicateItemRecordList.prototype.add = function (record) {
        if (this._head === null) {
            this._head = this._tail = record;
            record._nextDup = null;
            record._prevDup = null;
        }
        else {
            ((
            // todo(vicb)
            // assert(record.item ==  _head.item ||
            //       record.item is num && record.item.isNaN && _head.item is num && _head.item.isNaN);
            this._tail))._nextDup = record;
            record._prevDup = this._tail;
            record._nextDup = null;
            this._tail = record;
        }
    };
    /**
     * @param {?} trackById
     * @param {?} atOrAfterIndex
     * @return {?}
     */
    _DuplicateItemRecordList.prototype.get = function (trackById, atOrAfterIndex) {
        var /** @type {?} */ record;
        for (record = this._head; record !== null; record = record._nextDup) {
            if ((atOrAfterIndex === null || atOrAfterIndex <= ((record.currentIndex))) &&
                looseIdentical(record.trackById, trackById)) {
                return record;
            }
        }
        return null;
    };
    /**
     * Remove one {\@link IterableChangeRecord_} from the list of duplicates.
     *
     * Returns whether the list of duplicates is empty.
     * @param {?} record
     * @return {?}
     */
    _DuplicateItemRecordList.prototype.remove = function (record) {
        // todo(vicb)
        // assert(() {
        //  // verify that the record being removed is in the list.
        //  for (IterableChangeRecord_ cursor = _head; cursor != null; cursor = cursor._nextDup) {
        //    if (identical(cursor, record)) return true;
        //  }
        //  return false;
        //});
        var /** @type {?} */ prev = record._prevDup;
        var /** @type {?} */ next = record._nextDup;
        if (prev === null) {
            this._head = next;
        }
        else {
            prev._nextDup = next;
        }
        if (next === null) {
            this._tail = prev;
        }
        else {
            next._prevDup = prev;
        }
        return this._head === null;
    };
    return _DuplicateItemRecordList;
}());
var _DuplicateMap = (function () {
    function _DuplicateMap() {
        this.map = new Map();
    }
    /**
     * @param {?} record
     * @return {?}
     */
    _DuplicateMap.prototype.put = function (record) {
        var /** @type {?} */ key = record.trackById;
        var /** @type {?} */ duplicates = this.map.get(key);
        if (!duplicates) {
            duplicates = new _DuplicateItemRecordList();
            this.map.set(key, duplicates);
        }
        duplicates.add(record);
    };
    /**
     * Retrieve the `value` using key. Because the IterableChangeRecord_ value may be one which we
     * have already iterated over, we use the `atOrAfterIndex` to pretend it is not there.
     *
     * Use case: `[a, b, c, a, a]` if we are at index `3` which is the second `a` then asking if we
     * have any more `a`s needs to return the second `a`.
     * @param {?} trackById
     * @param {?} atOrAfterIndex
     * @return {?}
     */
    _DuplicateMap.prototype.get = function (trackById, atOrAfterIndex) {
        var /** @type {?} */ key = trackById;
        var /** @type {?} */ recordList = this.map.get(key);
        return recordList ? recordList.get(trackById, atOrAfterIndex) : null;
    };
    /**
     * Removes a {\@link IterableChangeRecord_} from the list of duplicates.
     *
     * The list of duplicates also is removed from the map if it gets empty.
     * @param {?} record
     * @return {?}
     */
    _DuplicateMap.prototype.remove = function (record) {
        var /** @type {?} */ key = record.trackById;
        var /** @type {?} */ recordList = ((this.map.get(key)));
        // Remove the list of duplicates when it gets empty
        if (recordList.remove(record)) {
            this.map.delete(key);
        }
        return record;
    };
    Object.defineProperty(_DuplicateMap.prototype, "isEmpty", {
        /**
         * @return {?}
         */
        get: function () { return this.map.size === 0; },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    _DuplicateMap.prototype.clear = function () { this.map.clear(); };
    /**
     * @return {?}
     */
    _DuplicateMap.prototype.toString = function () { return '_DuplicateMap(' + stringify(this.map) + ')'; };
    return _DuplicateMap;
}());
/**
 * @param {?} item
 * @param {?} addRemoveOffset
 * @param {?} moveOffsets
 * @return {?}
 */
function getPreviousIndex(item, addRemoveOffset, moveOffsets) {
    var /** @type {?} */ previousIndex = item.previousIndex;
    if (previousIndex === null)
        return previousIndex;
    var /** @type {?} */ moveOffset = 0;
    if (moveOffsets && previousIndex < moveOffsets.length) {
        moveOffset = moveOffsets[previousIndex];
    }
    return previousIndex + addRemoveOffset + moveOffset;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var DefaultKeyValueDifferFactory = (function () {
    function DefaultKeyValueDifferFactory() {
    }
    /**
     * @param {?} obj
     * @return {?}
     */
    DefaultKeyValueDifferFactory.prototype.supports = function (obj) { return obj instanceof Map || isJsObject(obj); };
    /**
     * @deprecated v4.0.0 - ChangeDetectorRef is not used and is no longer a parameter
     * @template K, V
     * @param {?=} cd
     * @return {?}
     */
    DefaultKeyValueDifferFactory.prototype.create = function (cd) {
        return new DefaultKeyValueDiffer();
    };
    return DefaultKeyValueDifferFactory;
}());
var DefaultKeyValueDiffer = (function () {
    function DefaultKeyValueDiffer() {
        this._records = new Map();
        this._mapHead = null;
        this._appendAfter = null;
        this._previousMapHead = null;
        this._changesHead = null;
        this._changesTail = null;
        this._additionsHead = null;
        this._additionsTail = null;
        this._removalsHead = null;
        this._removalsTail = null;
    }
    Object.defineProperty(DefaultKeyValueDiffer.prototype, "isDirty", {
        /**
         * @return {?}
         */
        get: function () {
            return this._additionsHead !== null || this._changesHead !== null ||
                this._removalsHead !== null;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} fn
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype.forEachItem = function (fn) {
        var /** @type {?} */ record;
        for (record = this._mapHead; record !== null; record = record._next) {
            fn(record);
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype.forEachPreviousItem = function (fn) {
        var /** @type {?} */ record;
        for (record = this._previousMapHead; record !== null; record = record._nextPrevious) {
            fn(record);
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype.forEachChangedItem = function (fn) {
        var /** @type {?} */ record;
        for (record = this._changesHead; record !== null; record = record._nextChanged) {
            fn(record);
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype.forEachAddedItem = function (fn) {
        var /** @type {?} */ record;
        for (record = this._additionsHead; record !== null; record = record._nextAdded) {
            fn(record);
        }
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype.forEachRemovedItem = function (fn) {
        var /** @type {?} */ record;
        for (record = this._removalsHead; record !== null; record = record._nextRemoved) {
            fn(record);
        }
    };
    /**
     * @param {?=} map
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype.diff = function (map) {
        if (!map) {
            map = new Map();
        }
        else if (!(map instanceof Map || isJsObject(map))) {
            throw new Error("Error trying to diff '" + stringify(map) + "'. Only maps and objects are allowed");
        }
        return this.check(map) ? this : null;
    };
    /**
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype.onDestroy = function () { };
    /**
     * Check the current state of the map vs the previous.
     * The algorithm is optimised for when the keys do no change.
     * @param {?} map
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype.check = function (map) {
        var _this = this;
        this._reset();
        var /** @type {?} */ insertBefore = this._mapHead;
        this._appendAfter = null;
        this._forEach(map, function (value, key) {
            if (insertBefore && insertBefore.key === key) {
                _this._maybeAddToChanges(insertBefore, value);
                _this._appendAfter = insertBefore;
                insertBefore = insertBefore._next;
            }
            else {
                var /** @type {?} */ record = _this._getOrCreateRecordForKey(key, value);
                insertBefore = _this._insertBeforeOrAppend(insertBefore, record);
            }
        });
        // Items remaining at the end of the list have been deleted
        if (insertBefore) {
            if (insertBefore._prev) {
                insertBefore._prev._next = null;
            }
            this._removalsHead = insertBefore;
            for (var /** @type {?} */ record = insertBefore; record !== null; record = record._nextRemoved) {
                if (record === this._mapHead) {
                    this._mapHead = null;
                }
                this._records.delete(record.key);
                record._nextRemoved = record._next;
                record.previousValue = record.currentValue;
                record.currentValue = null;
                record._prev = null;
                record._next = null;
            }
        }
        // Make sure tails have no next records from previous runs
        if (this._changesTail)
            this._changesTail._nextChanged = null;
        if (this._additionsTail)
            this._additionsTail._nextAdded = null;
        return this.isDirty;
    };
    /**
     * Inserts a record before `before` or append at the end of the list when `before` is null.
     *
     * Notes:
     * - This method appends at `this._appendAfter`,
     * - This method updates `this._appendAfter`,
     * - The return value is the new value for the insertion pointer.
     * @param {?} before
     * @param {?} record
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype._insertBeforeOrAppend = function (before, record) {
        if (before) {
            var /** @type {?} */ prev = before._prev;
            record._next = before;
            record._prev = prev;
            before._prev = record;
            if (prev) {
                prev._next = record;
            }
            if (before === this._mapHead) {
                this._mapHead = record;
            }
            this._appendAfter = before;
            return before;
        }
        if (this._appendAfter) {
            this._appendAfter._next = record;
            record._prev = this._appendAfter;
        }
        else {
            this._mapHead = record;
        }
        this._appendAfter = record;
        return null;
    };
    /**
     * @param {?} key
     * @param {?} value
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype._getOrCreateRecordForKey = function (key, value) {
        if (this._records.has(key)) {
            var /** @type {?} */ record_1 = ((this._records.get(key)));
            this._maybeAddToChanges(record_1, value);
            var /** @type {?} */ prev = record_1._prev;
            var /** @type {?} */ next = record_1._next;
            if (prev) {
                prev._next = next;
            }
            if (next) {
                next._prev = prev;
            }
            record_1._next = null;
            record_1._prev = null;
            return record_1;
        }
        var /** @type {?} */ record = new KeyValueChangeRecord_(key);
        this._records.set(key, record);
        record.currentValue = value;
        this._addToAdditions(record);
        return record;
    };
    /**
     * \@internal
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype._reset = function () {
        if (this.isDirty) {
            var /** @type {?} */ record = void 0;
            // let `_previousMapHead` contain the state of the map before the changes
            this._previousMapHead = this._mapHead;
            for (record = this._previousMapHead; record !== null; record = record._next) {
                record._nextPrevious = record._next;
            }
            // Update `record.previousValue` with the value of the item before the changes
            // We need to update all changed items (that's those which have been added and changed)
            for (record = this._changesHead; record !== null; record = record._nextChanged) {
                record.previousValue = record.currentValue;
            }
            for (record = this._additionsHead; record != null; record = record._nextAdded) {
                record.previousValue = record.currentValue;
            }
            this._changesHead = this._changesTail = null;
            this._additionsHead = this._additionsTail = null;
            this._removalsHead = null;
        }
    };
    /**
     * @param {?} record
     * @param {?} newValue
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype._maybeAddToChanges = function (record, newValue) {
        if (!looseIdentical(newValue, record.currentValue)) {
            record.previousValue = record.currentValue;
            record.currentValue = newValue;
            this._addToChanges(record);
        }
    };
    /**
     * @param {?} record
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype._addToAdditions = function (record) {
        if (this._additionsHead === null) {
            this._additionsHead = this._additionsTail = record;
        }
        else {
            ((this._additionsTail))._nextAdded = record;
            this._additionsTail = record;
        }
    };
    /**
     * @param {?} record
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype._addToChanges = function (record) {
        if (this._changesHead === null) {
            this._changesHead = this._changesTail = record;
        }
        else {
            ((this._changesTail))._nextChanged = record;
            this._changesTail = record;
        }
    };
    /**
     * \@internal
     * @template K, V
     * @param {?} obj
     * @param {?} fn
     * @return {?}
     */
    DefaultKeyValueDiffer.prototype._forEach = function (obj, fn) {
        if (obj instanceof Map) {
            obj.forEach(fn);
        }
        else {
            Object.keys(obj).forEach(function (k) { return fn(obj[k], k); });
        }
    };
    return DefaultKeyValueDiffer;
}());
/**
 * \@stable
 */
var KeyValueChangeRecord_ = (function () {
    /**
     * @param {?} key
     */
    function KeyValueChangeRecord_(key) {
        this.key = key;
        this.previousValue = null;
        this.currentValue = null;
        /**
         * \@internal
         */
        this._nextPrevious = null;
        /**
         * \@internal
         */
        this._next = null;
        /**
         * \@internal
         */
        this._prev = null;
        /**
         * \@internal
         */
        this._nextAdded = null;
        /**
         * \@internal
         */
        this._nextRemoved = null;
        /**
         * \@internal
         */
        this._nextChanged = null;
    }
    return KeyValueChangeRecord_;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A repository of different iterable diffing strategies used by NgFor, NgClass, and others.
 * \@stable
 */
var IterableDiffers = (function () {
    /**
     * @param {?} factories
     */
    function IterableDiffers(factories) {
        this.factories = factories;
    }
    /**
     * @param {?} factories
     * @param {?=} parent
     * @return {?}
     */
    IterableDiffers.create = function (factories, parent) {
        if (parent != null) {
            var /** @type {?} */ copied = parent.factories.slice();
            factories = factories.concat(copied);
            return new IterableDiffers(factories);
        }
        else {
            return new IterableDiffers(factories);
        }
    };
    /**
     * Takes an array of {\@link IterableDifferFactory} and returns a provider used to extend the
     * inherited {\@link IterableDiffers} instance with the provided factories and return a new
     * {\@link IterableDiffers} instance.
     *
     * The following example shows how to extend an existing list of factories,
     * which will only be applied to the injector for this component and its children.
     * This step is all that's required to make a new {\@link IterableDiffer} available.
     *
     * ### Example
     *
     * ```
     * \@Component({
     *   viewProviders: [
     *     IterableDiffers.extend([new ImmutableListDiffer()])
     *   ]
     * })
     * ```
     * @param {?} factories
     * @return {?}
     */
    IterableDiffers.extend = function (factories) {
        return {
            provide: IterableDiffers,
            useFactory: function (parent) {
                if (!parent) {
                    // Typically would occur when calling IterableDiffers.extend inside of dependencies passed
                    // to
                    // bootstrap(), which would override default pipes instead of extending them.
                    throw new Error('Cannot extend IterableDiffers without a parent injector');
                }
                return IterableDiffers.create(factories, parent);
            },
            // Dependency technically isn't optional, but we can provide a better error message this way.
            deps: [[IterableDiffers, new SkipSelf(), new Optional()]]
        };
    };
    /**
     * @param {?} iterable
     * @return {?}
     */
    IterableDiffers.prototype.find = function (iterable) {
        var /** @type {?} */ factory = this.factories.find(function (f) { return f.supports(iterable); });
        if (factory != null) {
            return factory;
        }
        else {
            throw new Error("Cannot find a differ supporting object '" + iterable + "' of type '" + getTypeNameForDebugging(iterable) + "'");
        }
    };
    return IterableDiffers;
}());
/**
 * @param {?} type
 * @return {?}
 */
function getTypeNameForDebugging(type) {
    return type['name'] || typeof type;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A repository of different Map diffing strategies used by NgClass, NgStyle, and others.
 * \@stable
 */
var KeyValueDiffers = (function () {
    /**
     * @param {?} factories
     */
    function KeyValueDiffers(factories) {
        this.factories = factories;
    }
    /**
     * @template S
     * @param {?} factories
     * @param {?=} parent
     * @return {?}
     */
    KeyValueDiffers.create = function (factories, parent) {
        if (parent) {
            var /** @type {?} */ copied = parent.factories.slice();
            factories = factories.concat(copied);
        }
        return new KeyValueDiffers(factories);
    };
    /**
     * Takes an array of {\@link KeyValueDifferFactory} and returns a provider used to extend the
     * inherited {\@link KeyValueDiffers} instance with the provided factories and return a new
     * {\@link KeyValueDiffers} instance.
     *
     * The following example shows how to extend an existing list of factories,
     * which will only be applied to the injector for this component and its children.
     * This step is all that's required to make a new {\@link KeyValueDiffer} available.
     *
     * ### Example
     *
     * ```
     * \@Component({
     *   viewProviders: [
     *     KeyValueDiffers.extend([new ImmutableMapDiffer()])
     *   ]
     * })
     * ```
     * @template S
     * @param {?} factories
     * @return {?}
     */
    KeyValueDiffers.extend = function (factories) {
        return {
            provide: KeyValueDiffers,
            useFactory: function (parent) {
                if (!parent) {
                    // Typically would occur when calling KeyValueDiffers.extend inside of dependencies passed
                    // to bootstrap(), which would override default pipes instead of extending them.
                    throw new Error('Cannot extend KeyValueDiffers without a parent injector');
                }
                return KeyValueDiffers.create(factories, parent);
            },
            // Dependency technically isn't optional, but we can provide a better error message this way.
            deps: [[KeyValueDiffers, new SkipSelf(), new Optional()]]
        };
    };
    /**
     * @param {?} kv
     * @return {?}
     */
    KeyValueDiffers.prototype.find = function (kv) {
        var /** @type {?} */ factory = this.factories.find(function (f) { return f.supports(kv); });
        if (factory) {
            return factory;
        }
        throw new Error("Cannot find a differ supporting object '" + kv + "'");
    };
    return KeyValueDiffers;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Structural diffing for `Object`s and `Map`s.
 */
var keyValDiff = [new DefaultKeyValueDifferFactory()];
/**
 * Structural diffing for `Iterable` types such as `Array`s.
 */
var iterableDiff = [new DefaultIterableDifferFactory()];
var defaultIterableDiffers = new IterableDiffers(iterableDiff);
var defaultKeyValueDiffers = new KeyValueDiffers(keyValDiff);
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Change detection enables data binding in Angular.
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @return {?}
 */
function _reflector() {
    return reflector;
}
var _CORE_PLATFORM_PROVIDERS = [
    // Set a default platform name for platforms that don't set it explicitly.
    { provide: PLATFORM_ID, useValue: 'unknown' },
    PlatformRef_,
    { provide: PlatformRef, useExisting: PlatformRef_ },
    { provide: Reflector, useFactory: _reflector, deps: [] },
    TestabilityRegistry,
    Console,
];
/**
 * This platform has to be included in any other platform
 *
 * \@experimental
 */
var platformCore = createPlatformFactory(null, 'core', _CORE_PLATFORM_PROVIDERS);
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@experimental i18n support is experimental.
 */
var LOCALE_ID = new InjectionToken('LocaleId');
/**
 * \@experimental i18n support is experimental.
 */
var TRANSLATIONS = new InjectionToken('Translations');
/**
 * \@experimental i18n support is experimental.
 */
var TRANSLATIONS_FORMAT = new InjectionToken('TranslationsFormat');
var MissingTranslationStrategy = {};
MissingTranslationStrategy.Error = 0;
MissingTranslationStrategy.Warning = 1;
MissingTranslationStrategy.Ignore = 2;
MissingTranslationStrategy[MissingTranslationStrategy.Error] = "Error";
MissingTranslationStrategy[MissingTranslationStrategy.Warning] = "Warning";
MissingTranslationStrategy[MissingTranslationStrategy.Ignore] = "Ignore";
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @return {?}
 */
function _iterableDiffersFactory() {
    return defaultIterableDiffers;
}
/**
 * @return {?}
 */
function _keyValueDiffersFactory() {
    return defaultKeyValueDiffers;
}
/**
 * @param {?=} locale
 * @return {?}
 */
function _localeFactory(locale) {
    return locale || 'en-US';
}
/**
 * This module includes the providers of \@angular/core that are needed
 * to bootstrap components via `ApplicationRef`.
 *
 * \@experimental
 */
var ApplicationModule = (function () {
    /**
     * @param {?} appRef
     */
    function ApplicationModule(appRef) {
    }
    return ApplicationModule;
}());
ApplicationModule.decorators = [
    { type: NgModule, args: [{
                providers: [
                    ApplicationRef_,
                    { provide: ApplicationRef, useExisting: ApplicationRef_ },
                    ApplicationInitStatus,
                    Compiler,
                    APP_ID_RANDOM_PROVIDER,
                    { provide: IterableDiffers, useFactory: _iterableDiffersFactory },
                    { provide: KeyValueDiffers, useFactory: _keyValueDiffersFactory },
                    {
                        provide: LOCALE_ID,
                        useFactory: _localeFactory,
                        deps: [[new Inject(LOCALE_ID), new Optional(), new SkipSelf()]]
                    },
                ]
            },] },
];
/**
 * @nocollapse
 */
ApplicationModule.ctorParameters = function () { return [
    { type: ApplicationRef, },
]; };
var SecurityContext = {};
SecurityContext.NONE = 0;
SecurityContext.HTML = 1;
SecurityContext.STYLE = 2;
SecurityContext.SCRIPT = 3;
SecurityContext.URL = 4;
SecurityContext.RESOURCE_URL = 5;
SecurityContext[SecurityContext.NONE] = "NONE";
SecurityContext[SecurityContext.HTML] = "HTML";
SecurityContext[SecurityContext.STYLE] = "STYLE";
SecurityContext[SecurityContext.SCRIPT] = "SCRIPT";
SecurityContext[SecurityContext.URL] = "URL";
SecurityContext[SecurityContext.RESOURCE_URL] = "RESOURCE_URL";
/**
 * Sanitizer is used by the views to sanitize potentially dangerous values.
 *
 * \@stable
 * @abstract
 */
var Sanitizer = (function () {
    function Sanitizer() {
    }
    /**
     * @abstract
     * @param {?} context
     * @param {?} value
     * @return {?}
     */
    Sanitizer.prototype.sanitize = function (context, value) { };
    return Sanitizer;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Node instance data.
 *
 * We have a separate type per NodeType to save memory
 * (TextData | ElementData | ProviderData | PureExpressionData | QueryList<any>)
 *
 * To keep our code monomorphic,
 * we prohibit using `NodeData` directly but enforce the use of accessors (`asElementData`, ...).
 * This way, no usage site can get a `NodeData` from view.nodes and then use it for different
 * purposes.
 */
/**
 * Accessor for view.nodes, enforcing that every usage site stays monomorphic.
 * @param {?} view
 * @param {?} index
 * @return {?}
 */
function asTextData(view, index) {
    return (view.nodes[index]);
}
/**
 * Accessor for view.nodes, enforcing that every usage site stays monomorphic.
 * @param {?} view
 * @param {?} index
 * @return {?}
 */
function asElementData(view, index) {
    return (view.nodes[index]);
}
/**
 * Accessor for view.nodes, enforcing that every usage site stays monomorphic.
 * @param {?} view
 * @param {?} index
 * @return {?}
 */
function asProviderData(view, index) {
    return (view.nodes[index]);
}
/**
 * Accessor for view.nodes, enforcing that every usage site stays monomorphic.
 * @param {?} view
 * @param {?} index
 * @return {?}
 */
function asPureExpressionData(view, index) {
    return (view.nodes[index]);
}
/**
 * Accessor for view.nodes, enforcing that every usage site stays monomorphic.
 * @param {?} view
 * @param {?} index
 * @return {?}
 */
function asQueryList(view, index) {
    return (view.nodes[index]);
}
/**
 * @abstract
 */
var DebugContext = (function () {
    function DebugContext() {
    }
    /**
     * @abstract
     * @return {?}
     */
    DebugContext.prototype.view = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DebugContext.prototype.nodeIndex = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DebugContext.prototype.injector = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DebugContext.prototype.component = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DebugContext.prototype.providerTokens = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DebugContext.prototype.references = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DebugContext.prototype.context = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DebugContext.prototype.componentRenderElement = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DebugContext.prototype.renderNode = function () { };
    /**
     * @abstract
     * @param {?} console
     * @param {...?} values
     * @return {?}
     */
    DebugContext.prototype.logError = function (console) {
        var values = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            values[_i - 1] = arguments[_i];
        }
    };
    return DebugContext;
}());
/**
 * This object is used to prevent cycles in the source files and to have a place where
 * debug mode can hook it. It is lazily filled when `isDevMode` is known.
 */
var Services = {
    setCurrentNode: undefined,
    createRootView: undefined,
    createEmbeddedView: undefined,
    createComponentView: undefined,
    createNgModuleRef: undefined,
    overrideProvider: undefined,
    clearProviderOverrides: undefined,
    checkAndUpdateView: undefined,
    checkNoChangesView: undefined,
    destroyView: undefined,
    resolveDep: undefined,
    createDebugContext: undefined,
    handleEvent: undefined,
    updateDirectives: undefined,
    updateRenderer: undefined,
    dirtyParentQueries: undefined,
};
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} context
 * @param {?} oldValue
 * @param {?} currValue
 * @param {?} isFirstCheck
 * @return {?}
 */
function expressionChangedAfterItHasBeenCheckedError(context, oldValue, currValue, isFirstCheck) {
    var /** @type {?} */ msg = "ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '" + oldValue + "'. Current value: '" + currValue + "'.";
    if (isFirstCheck) {
        msg +=
            " It seems like the view has been created after its parent and its children have been dirty checked." +
                " Has it been created in a change detection hook ?";
    }
    return viewDebugError(msg, context);
}
/**
 * @param {?} err
 * @param {?} context
 * @return {?}
 */
function viewWrappedDebugError(err, context) {
    if (!(err instanceof Error)) {
        // errors that are not Error instances don't have a stack,
        // so it is ok to wrap them into a new Error object...
        err = new Error(err.toString());
    }
    _addDebugContext(err, context);
    return err;
}
/**
 * @param {?} msg
 * @param {?} context
 * @return {?}
 */
function viewDebugError(msg, context) {
    var /** @type {?} */ err = new Error(msg);
    _addDebugContext(err, context);
    return err;
}
/**
 * @param {?} err
 * @param {?} context
 * @return {?}
 */
function _addDebugContext(err, context) {
    ((err))[ERROR_DEBUG_CONTEXT] = context;
    ((err))[ERROR_LOGGER] = context.logError.bind(context);
}
/**
 * @param {?} err
 * @return {?}
 */
function isViewDebugError(err) {
    return !!getDebugContext(err);
}
/**
 * @param {?} action
 * @return {?}
 */
function viewDestroyedError(action) {
    return new Error("ViewDestroyedError: Attempt to use a destroyed view: " + action);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var NOOP = function () { };
var _tokenKeyCache = new Map();
/**
 * @param {?} token
 * @return {?}
 */
function tokenKey(token) {
    var /** @type {?} */ key = _tokenKeyCache.get(token);
    if (!key) {
        key = stringify(token) + '_' + _tokenKeyCache.size;
        _tokenKeyCache.set(token, key);
    }
    return key;
}
/**
 * @param {?} view
 * @param {?} nodeIdx
 * @param {?} bindingIdx
 * @param {?} value
 * @return {?}
 */
function unwrapValue(view, nodeIdx, bindingIdx, value) {
    if (value instanceof WrappedValue) {
        value = value.wrapped;
        var /** @type {?} */ globalBindingIdx = view.def.nodes[nodeIdx].bindingIndex + bindingIdx;
        var /** @type {?} */ oldValue = view.oldValues[globalBindingIdx];
        if (oldValue instanceof WrappedValue) {
            oldValue = oldValue.wrapped;
        }
        view.oldValues[globalBindingIdx] = new WrappedValue(oldValue);
    }
    return value;
}
var UNDEFINED_RENDERER_TYPE_ID = '$$undefined';
var EMPTY_RENDERER_TYPE_ID = '$$empty';
/**
 * @param {?} values
 * @return {?}
 */
function createRendererType2(values) {
    return {
        id: UNDEFINED_RENDERER_TYPE_ID,
        styles: values.styles,
        encapsulation: values.encapsulation,
        data: values.data
    };
}
var _renderCompCount = 0;
/**
 * @param {?=} type
 * @return {?}
 */
function resolveRendererType2(type) {
    if (type && type.id === UNDEFINED_RENDERER_TYPE_ID) {
        // first time we see this RendererType2. Initialize it...
        var /** @type {?} */ isFilled = ((type.encapsulation != null && type.encapsulation !== ViewEncapsulation.None) ||
            type.styles.length || Object.keys(type.data).length);
        if (isFilled) {
            type.id = "c" + _renderCompCount++;
        }
        else {
            type.id = EMPTY_RENDERER_TYPE_ID;
        }
    }
    if (type && type.id === EMPTY_RENDERER_TYPE_ID) {
        type = null;
    }
    return type || null;
}
/**
 * @param {?} view
 * @param {?} def
 * @param {?} bindingIdx
 * @param {?} value
 * @return {?}
 */
function checkBinding(view, def, bindingIdx, value) {
    var /** @type {?} */ oldValues = view.oldValues;
    if ((view.state & 2 /* FirstCheck */) ||
        !looseIdentical(oldValues[def.bindingIndex + bindingIdx], value)) {
        return true;
    }
    return false;
}
/**
 * @param {?} view
 * @param {?} def
 * @param {?} bindingIdx
 * @param {?} value
 * @return {?}
 */
function checkAndUpdateBinding(view, def, bindingIdx, value) {
    if (checkBinding(view, def, bindingIdx, value)) {
        view.oldValues[def.bindingIndex + bindingIdx] = value;
        return true;
    }
    return false;
}
/**
 * @param {?} view
 * @param {?} def
 * @param {?} bindingIdx
 * @param {?} value
 * @return {?}
 */
function checkBindingNoChanges(view, def, bindingIdx, value) {
    var /** @type {?} */ oldValue = view.oldValues[def.bindingIndex + bindingIdx];
    if ((view.state & 1 /* BeforeFirstCheck */) || !devModeEqual(oldValue, value)) {
        throw expressionChangedAfterItHasBeenCheckedError(Services.createDebugContext(view, def.nodeIndex), oldValue, value, (view.state & 1 /* BeforeFirstCheck */) !== 0);
    }
}
/**
 * @param {?} view
 * @return {?}
 */
function markParentViewsForCheck(view) {
    var /** @type {?} */ currView = view;
    while (currView) {
        if (currView.def.flags & 2 /* OnPush */) {
            currView.state |= 8 /* ChecksEnabled */;
        }
        currView = currView.viewContainerParent || currView.parent;
    }
}
/**
 * @param {?} view
 * @param {?} endView
 * @return {?}
 */
function markParentViewsForCheckProjectedViews(view, endView) {
    var /** @type {?} */ currView = view;
    while (currView && currView !== endView) {
        currView.state |= 64 /* CheckProjectedViews */;
        currView = currView.viewContainerParent || currView.parent;
    }
}
/**
 * @param {?} view
 * @param {?} nodeIndex
 * @param {?} eventName
 * @param {?} event
 * @return {?}
 */
function dispatchEvent(view, nodeIndex, eventName, event) {
    var /** @type {?} */ nodeDef = view.def.nodes[nodeIndex];
    var /** @type {?} */ startView = nodeDef.flags & 33554432 /* ComponentView */ ? asElementData(view, nodeIndex).componentView : view;
    markParentViewsForCheck(startView);
    return Services.handleEvent(view, nodeIndex, eventName, event);
}
/**
 * @param {?} view
 * @return {?}
 */
function declaredViewContainer(view) {
    if (view.parent) {
        var /** @type {?} */ parentView = view.parent;
        return asElementData(parentView, /** @type {?} */ ((view.parentNodeDef)).nodeIndex);
    }
    return null;
}
/**
 * for component views, this is the host element.
 * for embedded views, this is the index of the parent node
 * that contains the view container.
 * @param {?} view
 * @return {?}
 */
function viewParentEl(view) {
    var /** @type {?} */ parentView = view.parent;
    if (parentView) {
        return ((view.parentNodeDef)).parent;
    }
    else {
        return null;
    }
}
/**
 * @param {?} view
 * @param {?} def
 * @return {?}
 */
function renderNode(view, def) {
    switch (def.flags & 201347067 /* Types */) {
        case 1 /* TypeElement */:
            return asElementData(view, def.nodeIndex).renderElement;
        case 2 /* TypeText */:
            return asTextData(view, def.nodeIndex).renderText;
    }
}
/**
 * @param {?} target
 * @param {?} name
 * @return {?}
 */
function elementEventFullName(target, name) {
    return target ? target + ":" + name : name;
}
/**
 * @param {?} view
 * @return {?}
 */
function isComponentView(view) {
    return !!view.parent && !!(((view.parentNodeDef)).flags & 32768 /* Component */);
}
/**
 * @param {?} view
 * @return {?}
 */
function isEmbeddedView(view) {
    return !!view.parent && !(((view.parentNodeDef)).flags & 32768 /* Component */);
}
/**
 * @param {?} queryId
 * @return {?}
 */
function filterQueryId(queryId) {
    return 1 << (queryId % 32);
}
/**
 * @param {?} matchedQueriesDsl
 * @return {?}
 */
function splitMatchedQueriesDsl(matchedQueriesDsl) {
    var /** @type {?} */ matchedQueries = {};
    var /** @type {?} */ matchedQueryIds = 0;
    var /** @type {?} */ references = {};
    if (matchedQueriesDsl) {
        matchedQueriesDsl.forEach(function (_a) {
            var queryId = _a[0], valueType = _a[1];
            if (typeof queryId === 'number') {
                matchedQueries[queryId] = valueType;
                matchedQueryIds |= filterQueryId(queryId);
            }
            else {
                references[queryId] = valueType;
            }
        });
    }
    return { matchedQueries: matchedQueries, references: references, matchedQueryIds: matchedQueryIds };
}
/**
 * @param {?} deps
 * @return {?}
 */
function splitDepsDsl(deps) {
    return deps.map(function (value) {
        var /** @type {?} */ token;
        var /** @type {?} */ flags;
        if (Array.isArray(value)) {
            flags = value[0], token = value[1];
        }
        else {
            flags = 0 /* None */;
            token = value;
        }
        return { flags: flags, token: token, tokenKey: tokenKey(token) };
    });
}
/**
 * @param {?} view
 * @param {?} renderHost
 * @param {?} def
 * @return {?}
 */
function getParentRenderElement(view, renderHost, def) {
    var /** @type {?} */ renderParent = def.renderParent;
    if (renderParent) {
        if ((renderParent.flags & 1 /* TypeElement */) === 0 ||
            (renderParent.flags & 33554432 /* ComponentView */) === 0 ||
            (((renderParent.element)).componentRendererType && ((((renderParent.element)).componentRendererType)).encapsulation ===
                ViewEncapsulation.Native)) {
            // only children of non components, or children of components with native encapsulation should
            // be attached.
            return asElementData(view, /** @type {?} */ ((def.renderParent)).nodeIndex).renderElement;
        }
    }
    else {
        return renderHost;
    }
}
var DEFINITION_CACHE = new WeakMap();
/**
 * @template D
 * @param {?} factory
 * @return {?}
 */
function resolveDefinition(factory) {
    var /** @type {?} */ value = (((DEFINITION_CACHE.get(factory))));
    if (!value) {
        value = factory(function () { return NOOP; });
        value.factory = factory;
        DEFINITION_CACHE.set(factory, value);
    }
    return value;
}
/**
 * @param {?} view
 * @return {?}
 */
function rootRenderNodes(view) {
    var /** @type {?} */ renderNodes = [];
    visitRootRenderNodes(view, 0 /* Collect */, undefined, undefined, renderNodes);
    return renderNodes;
}
/**
 * @param {?} view
 * @param {?} action
 * @param {?} parentNode
 * @param {?} nextSibling
 * @param {?=} target
 * @return {?}
 */
function visitRootRenderNodes(view, action, parentNode, nextSibling, target) {
    // We need to re-compute the parent node in case the nodes have been moved around manually
    if (action === 3 /* RemoveChild */) {
        parentNode = view.renderer.parentNode(renderNode(view, /** @type {?} */ ((view.def.lastRenderRootNode))));
    }
    visitSiblingRenderNodes(view, action, 0, view.def.nodes.length - 1, parentNode, nextSibling, target);
}
/**
 * @param {?} view
 * @param {?} action
 * @param {?} startIndex
 * @param {?} endIndex
 * @param {?} parentNode
 * @param {?} nextSibling
 * @param {?=} target
 * @return {?}
 */
function visitSiblingRenderNodes(view, action, startIndex, endIndex, parentNode, nextSibling, target) {
    for (var /** @type {?} */ i = startIndex; i <= endIndex; i++) {
        var /** @type {?} */ nodeDef = view.def.nodes[i];
        if (nodeDef.flags & (1 /* TypeElement */ | 2 /* TypeText */ | 8 /* TypeNgContent */)) {
            visitRenderNode(view, nodeDef, action, parentNode, nextSibling, target);
        }
        // jump to next sibling
        i += nodeDef.childCount;
    }
}
/**
 * @param {?} view
 * @param {?} ngContentIndex
 * @param {?} action
 * @param {?} parentNode
 * @param {?} nextSibling
 * @param {?=} target
 * @return {?}
 */
function visitProjectedRenderNodes(view, ngContentIndex, action, parentNode, nextSibling, target) {
    var /** @type {?} */ compView = view;
    while (compView && !isComponentView(compView)) {
        compView = compView.parent;
    }
    var /** @type {?} */ hostView = ((compView)).parent;
    var /** @type {?} */ hostElDef = viewParentEl(/** @type {?} */ ((compView)));
    var /** @type {?} */ startIndex = ((hostElDef)).nodeIndex + 1;
    var /** @type {?} */ endIndex = ((hostElDef)).nodeIndex + ((hostElDef)).childCount;
    for (var /** @type {?} */ i = startIndex; i <= endIndex; i++) {
        var /** @type {?} */ nodeDef = ((hostView)).def.nodes[i];
        if (nodeDef.ngContentIndex === ngContentIndex) {
            visitRenderNode(/** @type {?} */ ((hostView)), nodeDef, action, parentNode, nextSibling, target);
        }
        // jump to next sibling
        i += nodeDef.childCount;
    }
    if (!((hostView)).parent) {
        // a root view
        var /** @type {?} */ projectedNodes = view.root.projectableNodes[ngContentIndex];
        if (projectedNodes) {
            for (var /** @type {?} */ i = 0; i < projectedNodes.length; i++) {
                execRenderNodeAction(view, projectedNodes[i], action, parentNode, nextSibling, target);
            }
        }
    }
}
/**
 * @param {?} view
 * @param {?} nodeDef
 * @param {?} action
 * @param {?} parentNode
 * @param {?} nextSibling
 * @param {?=} target
 * @return {?}
 */
function visitRenderNode(view, nodeDef, action, parentNode, nextSibling, target) {
    if (nodeDef.flags & 8 /* TypeNgContent */) {
        visitProjectedRenderNodes(view, /** @type {?} */ ((nodeDef.ngContent)).index, action, parentNode, nextSibling, target);
    }
    else {
        var /** @type {?} */ rn = renderNode(view, nodeDef);
        if (action === 3 /* RemoveChild */ && (nodeDef.flags & 33554432 /* ComponentView */) &&
            (nodeDef.bindingFlags & 48 /* CatSyntheticProperty */)) {
            // Note: we might need to do both actions.
            if (nodeDef.bindingFlags & (16 /* SyntheticProperty */)) {
                execRenderNodeAction(view, rn, action, parentNode, nextSibling, target);
            }
            if (nodeDef.bindingFlags & (32 /* SyntheticHostProperty */)) {
                var /** @type {?} */ compView = asElementData(view, nodeDef.nodeIndex).componentView;
                execRenderNodeAction(compView, rn, action, parentNode, nextSibling, target);
            }
        }
        else {
            execRenderNodeAction(view, rn, action, parentNode, nextSibling, target);
        }
        if (nodeDef.flags & 16777216 /* EmbeddedViews */) {
            var /** @type {?} */ embeddedViews = ((asElementData(view, nodeDef.nodeIndex).viewContainer))._embeddedViews;
            for (var /** @type {?} */ k = 0; k < embeddedViews.length; k++) {
                visitRootRenderNodes(embeddedViews[k], action, parentNode, nextSibling, target);
            }
        }
        if (nodeDef.flags & 1 /* TypeElement */ && !((nodeDef.element)).name) {
            visitSiblingRenderNodes(view, action, nodeDef.nodeIndex + 1, nodeDef.nodeIndex + nodeDef.childCount, parentNode, nextSibling, target);
        }
    }
}
/**
 * @param {?} view
 * @param {?} renderNode
 * @param {?} action
 * @param {?} parentNode
 * @param {?} nextSibling
 * @param {?=} target
 * @return {?}
 */
function execRenderNodeAction(view, renderNode, action, parentNode, nextSibling, target) {
    var /** @type {?} */ renderer = view.renderer;
    switch (action) {
        case 1 /* AppendChild */:
            renderer.appendChild(parentNode, renderNode);
            break;
        case 2 /* InsertBefore */:
            renderer.insertBefore(parentNode, renderNode, nextSibling);
            break;
        case 3 /* RemoveChild */:
            renderer.removeChild(parentNode, renderNode);
            break;
        case 0 /* Collect */:
            ((target)).push(renderNode);
            break;
    }
}
var NS_PREFIX_RE = /^:([^:]+):(.+)$/;
/**
 * @param {?} name
 * @return {?}
 */
function splitNamespace(name) {
    if (name[0] === ':') {
        var /** @type {?} */ match = ((name.match(NS_PREFIX_RE)));
        return [match[1], match[2]];
    }
    return ['', name];
}
/**
 * @param {?} bindings
 * @return {?}
 */
function calcBindingFlags(bindings) {
    var /** @type {?} */ flags = 0;
    for (var /** @type {?} */ i = 0; i < bindings.length; i++) {
        flags |= bindings[i].flags;
    }
    return flags;
}
/**
 * @param {?} valueCount
 * @param {?} constAndInterp
 * @return {?}
 */
function interpolate(valueCount, constAndInterp) {
    var /** @type {?} */ result = '';
    for (var /** @type {?} */ i = 0; i < valueCount * 2; i = i + 2) {
        result = result + constAndInterp[i] + _toStringWithNull(constAndInterp[i + 1]);
    }
    return result + constAndInterp[valueCount * 2];
}
/**
 * @param {?} valueCount
 * @param {?} c0
 * @param {?} a1
 * @param {?} c1
 * @param {?=} a2
 * @param {?=} c2
 * @param {?=} a3
 * @param {?=} c3
 * @param {?=} a4
 * @param {?=} c4
 * @param {?=} a5
 * @param {?=} c5
 * @param {?=} a6
 * @param {?=} c6
 * @param {?=} a7
 * @param {?=} c7
 * @param {?=} a8
 * @param {?=} c8
 * @param {?=} a9
 * @param {?=} c9
 * @return {?}
 */
function inlineInterpolate(valueCount, c0, a1, c1, a2, c2, a3, c3, a4, c4, a5, c5, a6, c6, a7, c7, a8, c8, a9, c9) {
    switch (valueCount) {
        case 1:
            return c0 + _toStringWithNull(a1) + c1;
        case 2:
            return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2;
        case 3:
            return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +
                c3;
        case 4:
            return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +
                c3 + _toStringWithNull(a4) + c4;
        case 5:
            return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +
                c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5;
        case 6:
            return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +
                c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5 + _toStringWithNull(a6) + c6;
        case 7:
            return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +
                c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5 + _toStringWithNull(a6) +
                c6 + _toStringWithNull(a7) + c7;
        case 8:
            return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +
                c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5 + _toStringWithNull(a6) +
                c6 + _toStringWithNull(a7) + c7 + _toStringWithNull(a8) + c8;
        case 9:
            return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +
                c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5 + _toStringWithNull(a6) +
                c6 + _toStringWithNull(a7) + c7 + _toStringWithNull(a8) + c8 + _toStringWithNull(a9) + c9;
        default:
            throw new Error("Does not support more than 9 expressions");
    }
}
/**
 * @param {?} v
 * @return {?}
 */
function _toStringWithNull(v) {
    return v != null ? v.toString() : '';
}
var EMPTY_ARRAY = [];
var EMPTY_MAP = {};
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} flags
 * @param {?} matchedQueriesDsl
 * @param {?} ngContentIndex
 * @param {?} childCount
 * @param {?=} handleEvent
 * @param {?=} templateFactory
 * @return {?}
 */
function anchorDef(flags, matchedQueriesDsl, ngContentIndex, childCount, handleEvent, templateFactory) {
    flags |= 1 /* TypeElement */;
    var _a = splitMatchedQueriesDsl(matchedQueriesDsl), matchedQueries = _a.matchedQueries, references = _a.references, matchedQueryIds = _a.matchedQueryIds;
    var /** @type {?} */ template = templateFactory ? resolveDefinition(templateFactory) : null;
    return {
        // will bet set by the view definition
        nodeIndex: -1,
        parent: null,
        renderParent: null,
        bindingIndex: -1,
        outputIndex: -1,
        // regular values
        flags: flags,
        checkIndex: -1,
        childFlags: 0,
        directChildFlags: 0,
        childMatchedQueries: 0, matchedQueries: matchedQueries, matchedQueryIds: matchedQueryIds, references: references, ngContentIndex: ngContentIndex, childCount: childCount,
        bindings: [],
        bindingFlags: 0,
        outputs: [],
        element: {
            ns: null,
            name: null,
            attrs: null, template: template,
            componentProvider: null,
            componentView: null,
            componentRendererType: null,
            publicProviders: null,
            allProviders: null,
            handleEvent: handleEvent || NOOP
        },
        provider: null,
        text: null,
        query: null,
        ngContent: null
    };
}
/**
 * @param {?} checkIndex
 * @param {?} flags
 * @param {?} matchedQueriesDsl
 * @param {?} ngContentIndex
 * @param {?} childCount
 * @param {?} namespaceAndName
 * @param {?=} fixedAttrs
 * @param {?=} bindings
 * @param {?=} outputs
 * @param {?=} handleEvent
 * @param {?=} componentView
 * @param {?=} componentRendererType
 * @return {?}
 */
function elementDef(checkIndex, flags, matchedQueriesDsl, ngContentIndex, childCount, namespaceAndName, fixedAttrs, bindings, outputs, handleEvent, componentView, componentRendererType) {
    if (fixedAttrs === void 0) { fixedAttrs = []; }
    if (!handleEvent) {
        handleEvent = NOOP;
    }
    var _a = splitMatchedQueriesDsl(matchedQueriesDsl), matchedQueries = _a.matchedQueries, references = _a.references, matchedQueryIds = _a.matchedQueryIds;
    var /** @type {?} */ ns = ((null));
    var /** @type {?} */ name = ((null));
    if (namespaceAndName) {
        _b = splitNamespace(namespaceAndName), ns = _b[0], name = _b[1];
    }
    bindings = bindings || [];
    var /** @type {?} */ bindingDefs = new Array(bindings.length);
    for (var /** @type {?} */ i = 0; i < bindings.length; i++) {
        var _c = bindings[i], bindingFlags = _c[0], namespaceAndName_1 = _c[1], suffixOrSecurityContext = _c[2];
        var _d = splitNamespace(namespaceAndName_1), ns_1 = _d[0], name_1 = _d[1];
        var /** @type {?} */ securityContext = ((undefined));
        var /** @type {?} */ suffix = ((undefined));
        switch (bindingFlags & 15 /* Types */) {
            case 4 /* TypeElementStyle */:
                suffix = (suffixOrSecurityContext);
                break;
            case 1 /* TypeElementAttribute */:
            case 8 /* TypeProperty */:
                securityContext = (suffixOrSecurityContext);
                break;
        }
        bindingDefs[i] =
            { flags: bindingFlags, ns: ns_1, name: name_1, nonMinifiedName: name_1, securityContext: securityContext, suffix: suffix };
    }
    outputs = outputs || [];
    var /** @type {?} */ outputDefs = new Array(outputs.length);
    for (var /** @type {?} */ i = 0; i < outputs.length; i++) {
        var _e = outputs[i], target = _e[0], eventName = _e[1];
        outputDefs[i] = {
            type: 0 /* ElementOutput */,
            target: /** @type {?} */ (target), eventName: eventName,
            propName: null
        };
    }
    fixedAttrs = fixedAttrs || [];
    var /** @type {?} */ attrs = (fixedAttrs.map(function (_a) {
        var namespaceAndName = _a[0], value = _a[1];
        var _b = splitNamespace(namespaceAndName), ns = _b[0], name = _b[1];
        return [ns, name, value];
    }));
    componentRendererType = resolveRendererType2(componentRendererType);
    if (componentView) {
        flags |= 33554432 /* ComponentView */;
    }
    flags |= 1 /* TypeElement */;
    return {
        // will bet set by the view definition
        nodeIndex: -1,
        parent: null,
        renderParent: null,
        bindingIndex: -1,
        outputIndex: -1,
        // regular values
        checkIndex: checkIndex,
        flags: flags,
        childFlags: 0,
        directChildFlags: 0,
        childMatchedQueries: 0, matchedQueries: matchedQueries, matchedQueryIds: matchedQueryIds, references: references, ngContentIndex: ngContentIndex, childCount: childCount,
        bindings: bindingDefs,
        bindingFlags: calcBindingFlags(bindingDefs),
        outputs: outputDefs,
        element: {
            ns: ns,
            name: name,
            attrs: attrs,
            template: null,
            // will bet set by the view definition
            componentProvider: null,
            componentView: componentView || null,
            componentRendererType: componentRendererType,
            publicProviders: null,
            allProviders: null,
            handleEvent: handleEvent || NOOP,
        },
        provider: null,
        text: null,
        query: null,
        ngContent: null
    };
    var _b;
}
/**
 * @param {?} view
 * @param {?} renderHost
 * @param {?} def
 * @return {?}
 */
function createElement(view, renderHost, def) {
    var /** @type {?} */ elDef = ((def.element));
    var /** @type {?} */ rootSelectorOrNode = view.root.selectorOrNode;
    var /** @type {?} */ renderer = view.renderer;
    var /** @type {?} */ el;
    if (view.parent || !rootSelectorOrNode) {
        if (elDef.name) {
            el = renderer.createElement(elDef.name, elDef.ns);
        }
        else {
            el = renderer.createComment('');
        }
        var /** @type {?} */ parentEl = getParentRenderElement(view, renderHost, def);
        if (parentEl) {
            renderer.appendChild(parentEl, el);
        }
    }
    else {
        el = renderer.selectRootElement(rootSelectorOrNode);
    }
    if (elDef.attrs) {
        for (var /** @type {?} */ i = 0; i < elDef.attrs.length; i++) {
            var _a = elDef.attrs[i], ns = _a[0], name = _a[1], value = _a[2];
            renderer.setAttribute(el, name, value, ns);
        }
    }
    return el;
}
/**
 * @param {?} view
 * @param {?} compView
 * @param {?} def
 * @param {?} el
 * @return {?}
 */
function listenToElementOutputs(view, compView, def, el) {
    for (var /** @type {?} */ i = 0; i < def.outputs.length; i++) {
        var /** @type {?} */ output = def.outputs[i];
        var /** @type {?} */ handleEventClosure = renderEventHandlerClosure(view, def.nodeIndex, elementEventFullName(output.target, output.eventName));
        var /** @type {?} */ listenTarget = output.target;
        var /** @type {?} */ listenerView = view;
        if (output.target === 'component') {
            listenTarget = null;
            listenerView = compView;
        }
        var /** @type {?} */ disposable = (listenerView.renderer.listen(listenTarget || el, output.eventName, handleEventClosure)); /** @type {?} */
        ((view.disposables))[def.outputIndex + i] = disposable;
    }
}
/**
 * @param {?} view
 * @param {?} index
 * @param {?} eventName
 * @return {?}
 */
function renderEventHandlerClosure(view, index, eventName) {
    return function (event) {
        try {
            return dispatchEvent(view, index, eventName, event);
        }
        catch (e) {
            // Attention: Don't rethrow, to keep in sync with directive events.
            view.root.errorHandler.handleError(e);
        }
    };
}
/**
 * @param {?} view
 * @param {?} def
 * @param {?} v0
 * @param {?} v1
 * @param {?} v2
 * @param {?} v3
 * @param {?} v4
 * @param {?} v5
 * @param {?} v6
 * @param {?} v7
 * @param {?} v8
 * @param {?} v9
 * @return {?}
 */
function checkAndUpdateElementInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {
    var /** @type {?} */ bindLen = def.bindings.length;
    var /** @type {?} */ changed = false;
    if (bindLen > 0 && checkAndUpdateElementValue(view, def, 0, v0))
        changed = true;
    if (bindLen > 1 && checkAndUpdateElementValue(view, def, 1, v1))
        changed = true;
    if (bindLen > 2 && checkAndUpdateElementValue(view, def, 2, v2))
        changed = true;
    if (bindLen > 3 && checkAndUpdateElementValue(view, def, 3, v3))
        changed = true;
    if (bindLen > 4 && checkAndUpdateElementValue(view, def, 4, v4))
        changed = true;
    if (bindLen > 5 && checkAndUpdateElementValue(view, def, 5, v5))
        changed = true;
    if (bindLen > 6 && checkAndUpdateElementValue(view, def, 6, v6))
        changed = true;
    if (bindLen > 7 && checkAndUpdateElementValue(view, def, 7, v7))
        changed = true;
    if (bindLen > 8 && checkAndUpdateElementValue(view, def, 8, v8))
        changed = true;
    if (bindLen > 9 && checkAndUpdateElementValue(view, def, 9, v9))
        changed = true;
    return changed;
}
/**
 * @param {?} view
 * @param {?} def
 * @param {?} values
 * @return {?}
 */
function checkAndUpdateElementDynamic(view, def, values) {
    var /** @type {?} */ changed = false;
    for (var /** @type {?} */ i = 0; i < values.length; i++) {
        if (checkAndUpdateElementValue(view, def, i, values[i]))
            changed = true;
    }
    return changed;
}
/**
 * @param {?} view
 * @param {?} def
 * @param {?} bindingIdx
 * @param {?} value
 * @return {?}
 */
function checkAndUpdateElementValue(view, def, bindingIdx, value) {
    if (!checkAndUpdateBinding(view, def, bindingIdx, value)) {
        return false;
    }
    var /** @type {?} */ binding = def.bindings[bindingIdx];
    var /** @type {?} */ elData = asElementData(view, def.nodeIndex);
    var /** @type {?} */ renderNode$$1 = elData.renderElement;
    var /** @type {?} */ name = ((binding.name));
    switch (binding.flags & 15 /* Types */) {
        case 1 /* TypeElementAttribute */:
            setElementAttribute(view, binding, renderNode$$1, binding.ns, name, value);
            break;
        case 2 /* TypeElementClass */:
            setElementClass(view, renderNode$$1, name, value);
            break;
        case 4 /* TypeElementStyle */:
            setElementStyle(view, binding, renderNode$$1, name, value);
            break;
        case 8 /* TypeProperty */:
            var /** @type {?} */ bindView = (def.flags & 33554432 /* ComponentView */ &&
                binding.flags & 32 /* SyntheticHostProperty */) ?
                elData.componentView :
                view;
            setElementProperty(bindView, binding, renderNode$$1, name, value);
            break;
    }
    return true;
}
/**
 * @param {?} view
 * @param {?} binding
 * @param {?} renderNode
 * @param {?} ns
 * @param {?} name
 * @param {?} value
 * @return {?}
 */
function setElementAttribute(view, binding, renderNode$$1, ns, name, value) {
    var /** @type {?} */ securityContext = binding.securityContext;
    var /** @type {?} */ renderValue = securityContext ? view.root.sanitizer.sanitize(securityContext, value) : value;
    renderValue = renderValue != null ? renderValue.toString() : null;
    var /** @type {?} */ renderer = view.renderer;
    if (value != null) {
        renderer.setAttribute(renderNode$$1, name, renderValue, ns);
    }
    else {
        renderer.removeAttribute(renderNode$$1, name, ns);
    }
}
/**
 * @param {?} view
 * @param {?} renderNode
 * @param {?} name
 * @param {?} value
 * @return {?}
 */
function setElementClass(view, renderNode$$1, name, value) {
    var /** @type {?} */ renderer = view.renderer;
    if (value) {
        renderer.addClass(renderNode$$1, name);
    }
    else {
        renderer.removeClass(renderNode$$1, name);
    }
}
/**
 * @param {?} view
 * @param {?} binding
 * @param {?} renderNode
 * @param {?} name
 * @param {?} value
 * @return {?}
 */
function setElementStyle(view, binding, renderNode$$1, name, value) {
    var /** @type {?} */ renderValue = view.root.sanitizer.sanitize(SecurityContext.STYLE, /** @type {?} */ (value));
    if (renderValue != null) {
        renderValue = renderValue.toString();
        var /** @type {?} */ unit = binding.suffix;
        if (unit != null) {
            renderValue = renderValue + unit;
        }
    }
    else {
        renderValue = null;
    }
    var /** @type {?} */ renderer = view.renderer;
    if (renderValue != null) {
        renderer.setStyle(renderNode$$1, name, renderValue);
    }
    else {
        renderer.removeStyle(renderNode$$1, name);
    }
}
/**
 * @param {?} view
 * @param {?} binding
 * @param {?} renderNode
 * @param {?} name
 * @param {?} value
 * @return {?}
 */
function setElementProperty(view, binding, renderNode$$1, name, value) {
    var /** @type {?} */ securityContext = binding.securityContext;
    var /** @type {?} */ renderValue = securityContext ? view.root.sanitizer.sanitize(securityContext, value) : value;
    view.renderer.setProperty(renderNode$$1, name, renderValue);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var UNDEFINED_VALUE = new Object();
var InjectorRefTokenKey$1 = tokenKey(Injector);
var NgModuleRefTokenKey = tokenKey(NgModuleRef);
/**
 * @param {?} flags
 * @param {?} token
 * @param {?} value
 * @param {?} deps
 * @return {?}
 */
function moduleProvideDef(flags, token, value, deps) {
    var /** @type {?} */ depDefs = splitDepsDsl(deps);
    return {
        // will bet set by the module definition
        index: -1,
        deps: depDefs, flags: flags, token: token, value: value
    };
}
/**
 * @param {?} providers
 * @return {?}
 */
function moduleDef(providers) {
    var /** @type {?} */ providersByKey = {};
    for (var /** @type {?} */ i = 0; i < providers.length; i++) {
        var /** @type {?} */ provider = providers[i];
        provider.index = i;
        providersByKey[tokenKey(provider.token)] = provider;
    }
    return {
        // Will be filled later...
        factory: null,
        providersByKey: providersByKey,
        providers: providers
    };
}
/**
 * @param {?} data
 * @return {?}
 */
function initNgModule(data) {
    var /** @type {?} */ def = data._def;
    var /** @type {?} */ providers = data._providers = new Array(def.providers.length);
    for (var /** @type {?} */ i = 0; i < def.providers.length; i++) {
        var /** @type {?} */ provDef = def.providers[i];
        if (!(provDef.flags & 4096 /* LazyProvider */)) {
            providers[i] = _createProviderInstance$1(data, provDef);
        }
    }
}
/**
 * @param {?} data
 * @param {?} depDef
 * @param {?=} notFoundValue
 * @return {?}
 */
function resolveNgModuleDep(data, depDef, notFoundValue) {
    if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }
    if (depDef.flags & 8 /* Value */) {
        return depDef.token;
    }
    if (depDef.flags & 2 /* Optional */) {
        notFoundValue = null;
    }
    if (depDef.flags & 1 /* SkipSelf */) {
        return data._parent.get(depDef.token, notFoundValue);
    }
    var /** @type {?} */ tokenKey$$1 = depDef.tokenKey;
    switch (tokenKey$$1) {
        case InjectorRefTokenKey$1:
        case NgModuleRefTokenKey:
            return data;
    }
    var /** @type {?} */ providerDef = data._def.providersByKey[tokenKey$$1];
    if (providerDef) {
        var /** @type {?} */ providerInstance = data._providers[providerDef.index];
        if (providerInstance === undefined) {
            providerInstance = data._providers[providerDef.index] =
                _createProviderInstance$1(data, providerDef);
        }
        return providerInstance === UNDEFINED_VALUE ? undefined : providerInstance;
    }
    return data._parent.get(depDef.token, notFoundValue);
}
/**
 * @param {?} ngModule
 * @param {?} providerDef
 * @return {?}
 */
function _createProviderInstance$1(ngModule, providerDef) {
    var /** @type {?} */ injectable;
    switch (providerDef.flags & 201347067 /* Types */) {
        case 512 /* TypeClassProvider */:
            injectable = _createClass(ngModule, providerDef.value, providerDef.deps);
            break;
        case 1024 /* TypeFactoryProvider */:
            injectable = _callFactory(ngModule, providerDef.value, providerDef.deps);
            break;
        case 2048 /* TypeUseExistingProvider */:
            injectable = resolveNgModuleDep(ngModule, providerDef.deps[0]);
            break;
        case 256 /* TypeValueProvider */:
            injectable = providerDef.value;
            break;
    }
    return injectable === undefined ? UNDEFINED_VALUE : injectable;
}
/**
 * @param {?} ngModule
 * @param {?} ctor
 * @param {?} deps
 * @return {?}
 */
function _createClass(ngModule, ctor, deps) {
    var /** @type {?} */ len = deps.length;
    switch (len) {
        case 0:
            return new ctor();
        case 1:
            return new ctor(resolveNgModuleDep(ngModule, deps[0]));
        case 2:
            return new ctor(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]));
        case 3:
            return new ctor(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]), resolveNgModuleDep(ngModule, deps[2]));
        default:
            var /** @type {?} */ depValues = new Array(len);
            for (var /** @type {?} */ i = 0; i < len; i++) {
                depValues[i] = resolveNgModuleDep(ngModule, deps[i]);
            }
            return new (ctor.bind.apply(ctor, [void 0].concat(depValues)))();
    }
}
/**
 * @param {?} ngModule
 * @param {?} factory
 * @param {?} deps
 * @return {?}
 */
function _callFactory(ngModule, factory, deps) {
    var /** @type {?} */ len = deps.length;
    switch (len) {
        case 0:
            return factory();
        case 1:
            return factory(resolveNgModuleDep(ngModule, deps[0]));
        case 2:
            return factory(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]));
        case 3:
            return factory(resolveNgModuleDep(ngModule, deps[0]), resolveNgModuleDep(ngModule, deps[1]), resolveNgModuleDep(ngModule, deps[2]));
        default:
            var /** @type {?} */ depValues = Array(len);
            for (var /** @type {?} */ i = 0; i < len; i++) {
                depValues[i] = resolveNgModuleDep(ngModule, deps[i]);
            }
            return factory.apply(void 0, depValues);
    }
}
/**
 * @param {?} ngModule
 * @param {?} lifecycles
 * @return {?}
 */
function callNgModuleLifecycle(ngModule, lifecycles) {
    var /** @type {?} */ def = ngModule._def;
    for (var /** @type {?} */ i = 0; i < def.providers.length; i++) {
        var /** @type {?} */ provDef = def.providers[i];
        if (provDef.flags & 131072 /* OnDestroy */) {
            var /** @type {?} */ instance = ngModule._providers[i];
            if (instance && instance !== UNDEFINED_VALUE) {
                instance.ngOnDestroy();
            }
        }
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} parentView
 * @param {?} elementData
 * @param {?} viewIndex
 * @param {?} view
 * @return {?}
 */
function attachEmbeddedView(parentView, elementData, viewIndex, view) {
    var /** @type {?} */ embeddedViews = ((elementData.viewContainer))._embeddedViews;
    if (viewIndex === null || viewIndex === undefined) {
        viewIndex = embeddedViews.length;
    }
    view.viewContainerParent = parentView;
    addToArray(embeddedViews, /** @type {?} */ ((viewIndex)), view);
    attachProjectedView(elementData, view);
    Services.dirtyParentQueries(view);
    var /** @type {?} */ prevView = ((viewIndex)) > 0 ? embeddedViews[((viewIndex)) - 1] : null;
    renderAttachEmbeddedView(elementData, prevView, view);
}
/**
 * @param {?} vcElementData
 * @param {?} view
 * @return {?}
 */
function attachProjectedView(vcElementData, view) {
    var /** @type {?} */ dvcElementData = declaredViewContainer(view);
    if (!dvcElementData || dvcElementData === vcElementData ||
        view.state & 16 /* IsProjectedView */) {
        return;
    }
    // Note: For performance reasons, we
    // - add a view to template._projectedViews only 1x throughout its lifetime,
    //   and remove it not until the view is destroyed.
    //   (hard, as when a parent view is attached/detached we would need to attach/detach all
    //    nested projected views as well, even accross component boundaries).
    // - don't track the insertion order of views in the projected views array
    //   (hard, as when the views of the same template are inserted different view containers)
    view.state |= 16 /* IsProjectedView */;
    var /** @type {?} */ projectedViews = dvcElementData.template._projectedViews;
    if (!projectedViews) {
        projectedViews = dvcElementData.template._projectedViews = [];
    }
    projectedViews.push(view);
    // Note: we are changing the NodeDef here as we cannot calculate
    // the fact whether a template is used for projection during compilation.
    markNodeAsProjectedTemplate(/** @type {?} */ ((view.parent)).def, /** @type {?} */ ((view.parentNodeDef)));
}
/**
 * @param {?} viewDef
 * @param {?} nodeDef
 * @return {?}
 */
function markNodeAsProjectedTemplate(viewDef, nodeDef) {
    if (nodeDef.flags & 4 /* ProjectedTemplate */) {
        return;
    }
    viewDef.nodeFlags |= 4 /* ProjectedTemplate */;
    nodeDef.flags |= 4 /* ProjectedTemplate */;
    var /** @type {?} */ parentNodeDef = nodeDef.parent;
    while (parentNodeDef) {
        parentNodeDef.childFlags |= 4 /* ProjectedTemplate */;
        parentNodeDef = parentNodeDef.parent;
    }
}
/**
 * @param {?} elementData
 * @param {?=} viewIndex
 * @return {?}
 */
function detachEmbeddedView(elementData, viewIndex) {
    var /** @type {?} */ embeddedViews = ((elementData.viewContainer))._embeddedViews;
    if (viewIndex == null || viewIndex >= embeddedViews.length) {
        viewIndex = embeddedViews.length - 1;
    }
    if (viewIndex < 0) {
        return null;
    }
    var /** @type {?} */ view = embeddedViews[viewIndex];
    view.viewContainerParent = null;
    removeFromArray(embeddedViews, viewIndex);
    // See attachProjectedView for why we don't update projectedViews here.
    Services.dirtyParentQueries(view);
    renderDetachView(view);
    return view;
}
/**
 * @param {?} view
 * @return {?}
 */
function detachProjectedView(view) {
    if (!(view.state & 16 /* IsProjectedView */)) {
        return;
    }
    var /** @type {?} */ dvcElementData = declaredViewContainer(view);
    if (dvcElementData) {
        var /** @type {?} */ projectedViews = dvcElementData.template._projectedViews;
        if (projectedViews) {
            removeFromArray(projectedViews, projectedViews.indexOf(view));
            Services.dirtyParentQueries(view);
        }
    }
}
/**
 * @param {?} elementData
 * @param {?} oldViewIndex
 * @param {?} newViewIndex
 * @return {?}
 */
function moveEmbeddedView(elementData, oldViewIndex, newViewIndex) {
    var /** @type {?} */ embeddedViews = ((elementData.viewContainer))._embeddedViews;
    var /** @type {?} */ view = embeddedViews[oldViewIndex];
    removeFromArray(embeddedViews, oldViewIndex);
    if (newViewIndex == null) {
        newViewIndex = embeddedViews.length;
    }
    addToArray(embeddedViews, newViewIndex, view);
    // Note: Don't need to change projectedViews as the order in there
    // as always invalid...
    Services.dirtyParentQueries(view);
    renderDetachView(view);
    var /** @type {?} */ prevView = newViewIndex > 0 ? embeddedViews[newViewIndex - 1] : null;
    renderAttachEmbeddedView(elementData, prevView, view);
    return view;
}
/**
 * @param {?} elementData
 * @param {?} prevView
 * @param {?} view
 * @return {?}
 */
function renderAttachEmbeddedView(elementData, prevView, view) {
    var /** @type {?} */ prevRenderNode = prevView ? renderNode(prevView, /** @type {?} */ ((prevView.def.lastRenderRootNode))) :
        elementData.renderElement;
    var /** @type {?} */ parentNode = view.renderer.parentNode(prevRenderNode);
    var /** @type {?} */ nextSibling = view.renderer.nextSibling(prevRenderNode);
    // Note: We can't check if `nextSibling` is present, as on WebWorkers it will always be!
    // However, browsers automatically do `appendChild` when there is no `nextSibling`.
    visitRootRenderNodes(view, 2 /* InsertBefore */, parentNode, nextSibling, undefined);
}
/**
 * @param {?} view
 * @return {?}
 */
function renderDetachView(view) {
    visitRootRenderNodes(view, 3 /* RemoveChild */, null, null, undefined);
}
/**
 * @param {?} arr
 * @param {?} index
 * @param {?} value
 * @return {?}
 */
function addToArray(arr, index, value) {
    // perf: array.push is faster than array.splice!
    if (index >= arr.length) {
        arr.push(value);
    }
    else {
        arr.splice(index, 0, value);
    }
}
/**
 * @param {?} arr
 * @param {?} index
 * @return {?}
 */
function removeFromArray(arr, index) {
    // perf: array.pop is faster than array.splice!
    if (index >= arr.length - 1) {
        arr.pop();
    }
    else {
        arr.splice(index, 1);
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var EMPTY_CONTEXT = new Object();
/**
 * @param {?} selector
 * @param {?} componentType
 * @param {?} viewDefFactory
 * @param {?} inputs
 * @param {?} outputs
 * @param {?} ngContentSelectors
 * @return {?}
 */
function createComponentFactory(selector, componentType, viewDefFactory, inputs, outputs, ngContentSelectors) {
    return new ComponentFactory_(selector, componentType, viewDefFactory, inputs, outputs, ngContentSelectors);
}
/**
 * @param {?} componentFactory
 * @return {?}
 */
function getComponentViewDefinitionFactory(componentFactory) {
    return ((componentFactory)).viewDefFactory;
}
var ComponentFactory_ = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ComponentFactory_, _super);
    /**
     * @param {?} selector
     * @param {?} componentType
     * @param {?} viewDefFactory
     * @param {?} _inputs
     * @param {?} _outputs
     * @param {?} ngContentSelectors
     */
    function ComponentFactory_(selector, componentType, viewDefFactory, _inputs, _outputs, ngContentSelectors) {
        var _this = 
        // Attention: this ctor is called as top level function.
        // Putting any logic in here will destroy closure tree shaking!
        _super.call(this) || this;
        _this.selector = selector;
        _this.componentType = componentType;
        _this._inputs = _inputs;
        _this._outputs = _outputs;
        _this.ngContentSelectors = ngContentSelectors;
        _this.viewDefFactory = viewDefFactory;
        return _this;
    }
    Object.defineProperty(ComponentFactory_.prototype, "inputs", {
        /**
         * @return {?}
         */
        get: function () {
            var /** @type {?} */ inputsArr = [];
            var /** @type {?} */ inputs = ((this._inputs));
            for (var /** @type {?} */ propName in inputs) {
                var /** @type {?} */ templateName = inputs[propName];
                inputsArr.push({ propName: propName, templateName: templateName });
            }
            return inputsArr;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ComponentFactory_.prototype, "outputs", {
        /**
         * @return {?}
         */
        get: function () {
            var /** @type {?} */ outputsArr = [];
            for (var /** @type {?} */ propName in this._outputs) {
                var /** @type {?} */ templateName = this._outputs[propName];
                outputsArr.push({ propName: propName, templateName: templateName });
            }
            return outputsArr;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Creates a new component.
     * @param {?} injector
     * @param {?=} projectableNodes
     * @param {?=} rootSelectorOrNode
     * @param {?=} ngModule
     * @return {?}
     */
    ComponentFactory_.prototype.create = function (injector, projectableNodes, rootSelectorOrNode, ngModule) {
        if (!ngModule) {
            throw new Error('ngModule should be provided');
        }
        var /** @type {?} */ viewDef = resolveDefinition(this.viewDefFactory);
        var /** @type {?} */ componentNodeIndex = ((((viewDef.nodes[0].element)).componentProvider)).nodeIndex;
        var /** @type {?} */ view = Services.createRootView(injector, projectableNodes || [], rootSelectorOrNode, viewDef, ngModule, EMPTY_CONTEXT);
        var /** @type {?} */ component = asProviderData(view, componentNodeIndex).instance;
        if (rootSelectorOrNode) {
            view.renderer.setAttribute(asElementData(view, 0).renderElement, 'ng-version', VERSION.full);
        }
        return new ComponentRef_(view, new ViewRef_(view), component);
    };
    return ComponentFactory_;
}(ComponentFactory));
var ComponentRef_ = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ComponentRef_, _super);
    /**
     * @param {?} _view
     * @param {?} _viewRef
     * @param {?} _component
     */
    function ComponentRef_(_view, _viewRef, _component) {
        var _this = _super.call(this) || this;
        _this._view = _view;
        _this._viewRef = _viewRef;
        _this._component = _component;
        _this._elDef = _this._view.def.nodes[0];
        return _this;
    }
    Object.defineProperty(ComponentRef_.prototype, "location", {
        /**
         * @return {?}
         */
        get: function () {
            return new ElementRef(asElementData(this._view, this._elDef.nodeIndex).renderElement);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ComponentRef_.prototype, "injector", {
        /**
         * @return {?}
         */
        get: function () { return new Injector_(this._view, this._elDef); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ComponentRef_.prototype, "instance", {
        /**
         * @return {?}
         */
        get: function () { return this._component; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ComponentRef_.prototype, "hostView", {
        /**
         * @return {?}
         */
        get: function () { return this._viewRef; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ComponentRef_.prototype, "changeDetectorRef", {
        /**
         * @return {?}
         */
        get: function () { return this._viewRef; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ComponentRef_.prototype, "componentType", {
        /**
         * @return {?}
         */
        get: function () { return (this._component.constructor); },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ComponentRef_.prototype.destroy = function () { this._viewRef.destroy(); };
    /**
     * @param {?} callback
     * @return {?}
     */
    ComponentRef_.prototype.onDestroy = function (callback) { this._viewRef.onDestroy(callback); };
    return ComponentRef_;
}(ComponentRef));
/**
 * @param {?} view
 * @param {?} elDef
 * @param {?} elData
 * @return {?}
 */
function createViewContainerData(view, elDef, elData) {
    return new ViewContainerRef_(view, elDef, elData);
}
var ViewContainerRef_ = (function () {
    /**
     * @param {?} _view
     * @param {?} _elDef
     * @param {?} _data
     */
    function ViewContainerRef_(_view, _elDef, _data) {
        this._view = _view;
        this._elDef = _elDef;
        this._data = _data;
        /**
         * \@internal
         */
        this._embeddedViews = [];
    }
    Object.defineProperty(ViewContainerRef_.prototype, "element", {
        /**
         * @return {?}
         */
        get: function () { return new ElementRef(this._data.renderElement); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ViewContainerRef_.prototype, "injector", {
        /**
         * @return {?}
         */
        get: function () { return new Injector_(this._view, this._elDef); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ViewContainerRef_.prototype, "parentInjector", {
        /**
         * @return {?}
         */
        get: function () {
            var /** @type {?} */ view = this._view;
            var /** @type {?} */ elDef = this._elDef.parent;
            while (!elDef && view) {
                elDef = viewParentEl(view);
                view = ((view.parent));
            }
            return view ? new Injector_(view, elDef) : new Injector_(this._view, null);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ViewContainerRef_.prototype.clear = function () {
        var /** @type {?} */ len = this._embeddedViews.length;
        for (var /** @type {?} */ i = len - 1; i >= 0; i--) {
            var /** @type {?} */ view = ((detachEmbeddedView(this._data, i)));
            Services.destroyView(view);
        }
    };
    /**
     * @param {?} index
     * @return {?}
     */
    ViewContainerRef_.prototype.get = function (index) {
        var /** @type {?} */ view = this._embeddedViews[index];
        if (view) {
            var /** @type {?} */ ref = new ViewRef_(view);
            ref.attachToViewContainerRef(this);
            return ref;
        }
        return null;
    };
    Object.defineProperty(ViewContainerRef_.prototype, "length", {
        /**
         * @return {?}
         */
        get: function () { return this._embeddedViews.length; },
        enumerable: true,
        configurable: true
    });
    /**
     * @template C
     * @param {?} templateRef
     * @param {?=} context
     * @param {?=} index
     * @return {?}
     */
    ViewContainerRef_.prototype.createEmbeddedView = function (templateRef, context, index) {
        var /** @type {?} */ viewRef = templateRef.createEmbeddedView(context || ({}));
        this.insert(viewRef, index);
        return viewRef;
    };
    /**
     * @template C
     * @param {?} componentFactory
     * @param {?=} index
     * @param {?=} injector
     * @param {?=} projectableNodes
     * @param {?=} ngModuleRef
     * @return {?}
     */
    ViewContainerRef_.prototype.createComponent = function (componentFactory, index, injector, projectableNodes, ngModuleRef) {
        var /** @type {?} */ contextInjector = injector || this.parentInjector;
        if (!ngModuleRef && !(componentFactory instanceof ComponentFactoryBoundToModule)) {
            ngModuleRef = contextInjector.get(NgModuleRef);
        }
        var /** @type {?} */ componentRef = componentFactory.create(contextInjector, projectableNodes, undefined, ngModuleRef);
        this.insert(componentRef.hostView, index);
        return componentRef;
    };
    /**
     * @param {?} viewRef
     * @param {?=} index
     * @return {?}
     */
    ViewContainerRef_.prototype.insert = function (viewRef, index) {
        if (viewRef.destroyed) {
            throw new Error('Cannot insert a destroyed View in a ViewContainer!');
        }
        var /** @type {?} */ viewRef_ = (viewRef);
        var /** @type {?} */ viewData = viewRef_._view;
        attachEmbeddedView(this._view, this._data, index, viewData);
        viewRef_.attachToViewContainerRef(this);
        return viewRef;
    };
    /**
     * @param {?} viewRef
     * @param {?} currentIndex
     * @return {?}
     */
    ViewContainerRef_.prototype.move = function (viewRef, currentIndex) {
        if (viewRef.destroyed) {
            throw new Error('Cannot move a destroyed View in a ViewContainer!');
        }
        var /** @type {?} */ previousIndex = this._embeddedViews.indexOf(viewRef._view);
        moveEmbeddedView(this._data, previousIndex, currentIndex);
        return viewRef;
    };
    /**
     * @param {?} viewRef
     * @return {?}
     */
    ViewContainerRef_.prototype.indexOf = function (viewRef) {
        return this._embeddedViews.indexOf(((viewRef))._view);
    };
    /**
     * @param {?=} index
     * @return {?}
     */
    ViewContainerRef_.prototype.remove = function (index) {
        var /** @type {?} */ viewData = detachEmbeddedView(this._data, index);
        if (viewData) {
            Services.destroyView(viewData);
        }
    };
    /**
     * @param {?=} index
     * @return {?}
     */
    ViewContainerRef_.prototype.detach = function (index) {
        var /** @type {?} */ view = detachEmbeddedView(this._data, index);
        return view ? new ViewRef_(view) : null;
    };
    return ViewContainerRef_;
}());
/**
 * @param {?} view
 * @return {?}
 */
function createChangeDetectorRef(view) {
    return new ViewRef_(view);
}
var ViewRef_ = (function () {
    /**
     * @param {?} _view
     */
    function ViewRef_(_view) {
        this._view = _view;
        this._viewContainerRef = null;
        this._appRef = null;
    }
    Object.defineProperty(ViewRef_.prototype, "rootNodes", {
        /**
         * @return {?}
         */
        get: function () { return rootRenderNodes(this._view); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ViewRef_.prototype, "context", {
        /**
         * @return {?}
         */
        get: function () { return this._view.context; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ViewRef_.prototype, "destroyed", {
        /**
         * @return {?}
         */
        get: function () { return (this._view.state & 128 /* Destroyed */) !== 0; },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    ViewRef_.prototype.markForCheck = function () { markParentViewsForCheck(this._view); };
    /**
     * @return {?}
     */
    ViewRef_.prototype.detach = function () { this._view.state &= ~4 /* Attached */; };
    /**
     * @return {?}
     */
    ViewRef_.prototype.detectChanges = function () {
        var /** @type {?} */ fs = this._view.root.rendererFactory;
        if (fs.begin) {
            fs.begin();
        }
        Services.checkAndUpdateView(this._view);
        if (fs.end) {
            fs.end();
        }
    };
    /**
     * @return {?}
     */
    ViewRef_.prototype.checkNoChanges = function () { Services.checkNoChangesView(this._view); };
    /**
     * @return {?}
     */
    ViewRef_.prototype.reattach = function () { this._view.state |= 4 /* Attached */; };
    /**
     * @param {?} callback
     * @return {?}
     */
    ViewRef_.prototype.onDestroy = function (callback) {
        if (!this._view.disposables) {
            this._view.disposables = [];
        }
        this._view.disposables.push(/** @type {?} */ (callback));
    };
    /**
     * @return {?}
     */
    ViewRef_.prototype.destroy = function () {
        if (this._appRef) {
            this._appRef.detachView(this);
        }
        else if (this._viewContainerRef) {
            this._viewContainerRef.detach(this._viewContainerRef.indexOf(this));
        }
        Services.destroyView(this._view);
    };
    /**
     * @return {?}
     */
    ViewRef_.prototype.detachFromAppRef = function () {
        this._appRef = null;
        renderDetachView(this._view);
        Services.dirtyParentQueries(this._view);
    };
    /**
     * @param {?} appRef
     * @return {?}
     */
    ViewRef_.prototype.attachToAppRef = function (appRef) {
        if (this._viewContainerRef) {
            throw new Error('This view is already attached to a ViewContainer!');
        }
        this._appRef = appRef;
    };
    /**
     * @param {?} vcRef
     * @return {?}
     */
    ViewRef_.prototype.attachToViewContainerRef = function (vcRef) {
        if (this._appRef) {
            throw new Error('This view is already attached directly to the ApplicationRef!');
        }
        this._viewContainerRef = vcRef;
    };
    return ViewRef_;
}());
/**
 * @param {?} view
 * @param {?} def
 * @return {?}
 */
function createTemplateData(view, def) {
    return new TemplateRef_(view, def);
}
var TemplateRef_ = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](TemplateRef_, _super);
    /**
     * @param {?} _parentView
     * @param {?} _def
     */
    function TemplateRef_(_parentView, _def) {
        var _this = _super.call(this) || this;
        _this._parentView = _parentView;
        _this._def = _def;
        return _this;
    }
    /**
     * @param {?} context
     * @return {?}
     */
    TemplateRef_.prototype.createEmbeddedView = function (context) {
        return new ViewRef_(Services.createEmbeddedView(this._parentView, this._def, /** @type {?} */ ((((this._def.element)).template)), context));
    };
    Object.defineProperty(TemplateRef_.prototype, "elementRef", {
        /**
         * @return {?}
         */
        get: function () {
            return new ElementRef(asElementData(this._parentView, this._def.nodeIndex).renderElement);
        },
        enumerable: true,
        configurable: true
    });
    return TemplateRef_;
}(TemplateRef));
/**
 * @param {?} view
 * @param {?} elDef
 * @return {?}
 */
function createInjector(view, elDef) {
    return new Injector_(view, elDef);
}
var Injector_ = (function () {
    /**
     * @param {?} view
     * @param {?} elDef
     */
    function Injector_(view, elDef) {
        this.view = view;
        this.elDef = elDef;
    }
    /**
     * @param {?} token
     * @param {?=} notFoundValue
     * @return {?}
     */
    Injector_.prototype.get = function (token, notFoundValue) {
        if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }
        var /** @type {?} */ allowPrivateServices = this.elDef ? (this.elDef.flags & 33554432 /* ComponentView */) !== 0 : false;
        return Services.resolveDep(this.view, this.elDef, allowPrivateServices, { flags: 0 /* None */, token: token, tokenKey: tokenKey(token) }, notFoundValue);
    };
    return Injector_;
}());
/**
 * @param {?} view
 * @param {?} index
 * @return {?}
 */
function nodeValue(view, index) {
    var /** @type {?} */ def = view.def.nodes[index];
    if (def.flags & 1 /* TypeElement */) {
        var /** @type {?} */ elData = asElementData(view, def.nodeIndex);
        return ((def.element)).template ? elData.template : elData.renderElement;
    }
    else if (def.flags & 2 /* TypeText */) {
        return asTextData(view, def.nodeIndex).renderText;
    }
    else if (def.flags & (20224 /* CatProvider */ | 16 /* TypePipe */)) {
        return asProviderData(view, def.nodeIndex).instance;
    }
    throw new Error("Illegal state: read nodeValue for node index " + index);
}
/**
 * @param {?} view
 * @return {?}
 */
function createRendererV1(view) {
    return new RendererAdapter(view.renderer);
}
var RendererAdapter = (function () {
    /**
     * @param {?} delegate
     */
    function RendererAdapter(delegate) {
        this.delegate = delegate;
    }
    /**
     * @param {?} selectorOrNode
     * @return {?}
     */
    RendererAdapter.prototype.selectRootElement = function (selectorOrNode) {
        return this.delegate.selectRootElement(selectorOrNode);
    };
    /**
     * @param {?} parent
     * @param {?} namespaceAndName
     * @return {?}
     */
    RendererAdapter.prototype.createElement = function (parent, namespaceAndName) {
        var _a = splitNamespace(namespaceAndName), ns = _a[0], name = _a[1];
        var /** @type {?} */ el = this.delegate.createElement(name, ns);
        if (parent) {
            this.delegate.appendChild(parent, el);
        }
        return el;
    };
    /**
     * @param {?} hostElement
     * @return {?}
     */
    RendererAdapter.prototype.createViewRoot = function (hostElement) { return hostElement; };
    /**
     * @param {?} parentElement
     * @return {?}
     */
    RendererAdapter.prototype.createTemplateAnchor = function (parentElement) {
        var /** @type {?} */ comment = this.delegate.createComment('');
        if (parentElement) {
            this.delegate.appendChild(parentElement, comment);
        }
        return comment;
    };
    /**
     * @param {?} parentElement
     * @param {?} value
     * @return {?}
     */
    RendererAdapter.prototype.createText = function (parentElement, value) {
        var /** @type {?} */ node = this.delegate.createText(value);
        if (parentElement) {
            this.delegate.appendChild(parentElement, node);
        }
        return node;
    };
    /**
     * @param {?} parentElement
     * @param {?} nodes
     * @return {?}
     */
    RendererAdapter.prototype.projectNodes = function (parentElement, nodes) {
        for (var /** @type {?} */ i = 0; i < nodes.length; i++) {
            this.delegate.appendChild(parentElement, nodes[i]);
        }
    };
    /**
     * @param {?} node
     * @param {?} viewRootNodes
     * @return {?}
     */
    RendererAdapter.prototype.attachViewAfter = function (node, viewRootNodes) {
        var /** @type {?} */ parentElement = this.delegate.parentNode(node);
        var /** @type {?} */ nextSibling = this.delegate.nextSibling(node);
        for (var /** @type {?} */ i = 0; i < viewRootNodes.length; i++) {
            this.delegate.insertBefore(parentElement, viewRootNodes[i], nextSibling);
        }
    };
    /**
     * @param {?} viewRootNodes
     * @return {?}
     */
    RendererAdapter.prototype.detachView = function (viewRootNodes) {
        for (var /** @type {?} */ i = 0; i < viewRootNodes.length; i++) {
            var /** @type {?} */ node = viewRootNodes[i];
            var /** @type {?} */ parentElement = this.delegate.parentNode(node);
            this.delegate.removeChild(parentElement, node);
        }
    };
    /**
     * @param {?} hostElement
     * @param {?} viewAllNodes
     * @return {?}
     */
    RendererAdapter.prototype.destroyView = function (hostElement, viewAllNodes) {
        for (var /** @type {?} */ i = 0; i < viewAllNodes.length; i++) {
            ((this.delegate.destroyNode))(viewAllNodes[i]);
        }
    };
    /**
     * @param {?} renderElement
     * @param {?} name
     * @param {?} callback
     * @return {?}
     */
    RendererAdapter.prototype.listen = function (renderElement, name, callback) {
        return this.delegate.listen(renderElement, name, /** @type {?} */ (callback));
    };
    /**
     * @param {?} target
     * @param {?} name
     * @param {?} callback
     * @return {?}
     */
    RendererAdapter.prototype.listenGlobal = function (target, name, callback) {
        return this.delegate.listen(target, name, /** @type {?} */ (callback));
    };
    /**
     * @param {?} renderElement
     * @param {?} propertyName
     * @param {?} propertyValue
     * @return {?}
     */
    RendererAdapter.prototype.setElementProperty = function (renderElement, propertyName, propertyValue) {
        this.delegate.setProperty(renderElement, propertyName, propertyValue);
    };
    /**
     * @param {?} renderElement
     * @param {?} namespaceAndName
     * @param {?} attributeValue
     * @return {?}
     */
    RendererAdapter.prototype.setElementAttribute = function (renderElement, namespaceAndName, attributeValue) {
        var _a = splitNamespace(namespaceAndName), ns = _a[0], name = _a[1];
        if (attributeValue != null) {
            this.delegate.setAttribute(renderElement, name, attributeValue, ns);
        }
        else {
            this.delegate.removeAttribute(renderElement, name, ns);
        }
    };
    /**
     * @param {?} renderElement
     * @param {?} propertyName
     * @param {?} propertyValue
     * @return {?}
     */
    RendererAdapter.prototype.setBindingDebugInfo = function (renderElement, propertyName, propertyValue) { };
    /**
     * @param {?} renderElement
     * @param {?} className
     * @param {?} isAdd
     * @return {?}
     */
    RendererAdapter.prototype.setElementClass = function (renderElement, className, isAdd) {
        if (isAdd) {
            this.delegate.addClass(renderElement, className);
        }
        else {
            this.delegate.removeClass(renderElement, className);
        }
    };
    /**
     * @param {?} renderElement
     * @param {?} styleName
     * @param {?} styleValue
     * @return {?}
     */
    RendererAdapter.prototype.setElementStyle = function (renderElement, styleName, styleValue) {
        if (styleValue != null) {
            this.delegate.setStyle(renderElement, styleName, styleValue);
        }
        else {
            this.delegate.removeStyle(renderElement, styleName);
        }
    };
    /**
     * @param {?} renderElement
     * @param {?} methodName
     * @param {?} args
     * @return {?}
     */
    RendererAdapter.prototype.invokeElementMethod = function (renderElement, methodName, args) {
        ((renderElement))[methodName].apply(renderElement, args);
    };
    /**
     * @param {?} renderNode
     * @param {?} text
     * @return {?}
     */
    RendererAdapter.prototype.setText = function (renderNode$$1, text) { this.delegate.setValue(renderNode$$1, text); };
    /**
     * @return {?}
     */
    RendererAdapter.prototype.animate = function () { throw new Error('Renderer.animate is no longer supported!'); };
    return RendererAdapter;
}());
/**
 * @param {?} moduleType
 * @param {?} parent
 * @param {?} bootstrapComponents
 * @param {?} def
 * @return {?}
 */
function createNgModuleRef(moduleType, parent, bootstrapComponents, def) {
    return new NgModuleRef_(moduleType, parent, bootstrapComponents, def);
}
var NgModuleRef_ = (function () {
    /**
     * @param {?} _moduleType
     * @param {?} _parent
     * @param {?} _bootstrapComponents
     * @param {?} _def
     */
    function NgModuleRef_(_moduleType, _parent, _bootstrapComponents, _def) {
        this._moduleType = _moduleType;
        this._parent = _parent;
        this._bootstrapComponents = _bootstrapComponents;
        this._def = _def;
        this._destroyListeners = [];
        this._destroyed = false;
        initNgModule(this);
    }
    /**
     * @param {?} token
     * @param {?=} notFoundValue
     * @return {?}
     */
    NgModuleRef_.prototype.get = function (token, notFoundValue) {
        if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }
        return resolveNgModuleDep(this, { token: token, tokenKey: tokenKey(token), flags: 0 /* None */ }, notFoundValue);
    };
    Object.defineProperty(NgModuleRef_.prototype, "instance", {
        /**
         * @return {?}
         */
        get: function () { return this.get(this._moduleType); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgModuleRef_.prototype, "componentFactoryResolver", {
        /**
         * @return {?}
         */
        get: function () { return this.get(ComponentFactoryResolver); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(NgModuleRef_.prototype, "injector", {
        /**
         * @return {?}
         */
        get: function () { return this; },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    NgModuleRef_.prototype.destroy = function () {
        if (this._destroyed) {
            throw new Error("The ng module " + stringify(this.instance.constructor) + " has already been destroyed.");
        }
        this._destroyed = true;
        callNgModuleLifecycle(this, 131072 /* OnDestroy */);
        this._destroyListeners.forEach(function (listener) { return listener(); });
    };
    /**
     * @param {?} callback
     * @return {?}
     */
    NgModuleRef_.prototype.onDestroy = function (callback) { this._destroyListeners.push(callback); };
    return NgModuleRef_;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var RendererV1TokenKey = tokenKey(Renderer);
var Renderer2TokenKey = tokenKey(Renderer2);
var ElementRefTokenKey = tokenKey(ElementRef);
var ViewContainerRefTokenKey = tokenKey(ViewContainerRef);
var TemplateRefTokenKey = tokenKey(TemplateRef);
var ChangeDetectorRefTokenKey = tokenKey(ChangeDetectorRef);
var InjectorRefTokenKey = tokenKey(Injector);
/**
 * @param {?} checkIndex
 * @param {?} flags
 * @param {?} matchedQueries
 * @param {?} childCount
 * @param {?} ctor
 * @param {?} deps
 * @param {?=} props
 * @param {?=} outputs
 * @return {?}
 */
function directiveDef(checkIndex, flags, matchedQueries, childCount, ctor, deps, props, outputs) {
    var /** @type {?} */ bindings = [];
    if (props) {
        for (var /** @type {?} */ prop in props) {
            var _a = props[prop], bindingIndex = _a[0], nonMinifiedName = _a[1];
            bindings[bindingIndex] = {
                flags: 8 /* TypeProperty */,
                name: prop, nonMinifiedName: nonMinifiedName,
                ns: null,
                securityContext: null,
                suffix: null
            };
        }
    }
    var /** @type {?} */ outputDefs = [];
    if (outputs) {
        for (var /** @type {?} */ propName in outputs) {
            outputDefs.push({ type: 1 /* DirectiveOutput */, propName: propName, target: null, eventName: outputs[propName] });
        }
    }
    flags |= 16384 /* TypeDirective */;
    return _def(checkIndex, flags, matchedQueries, childCount, ctor, ctor, deps, bindings, outputDefs);
}
/**
 * @param {?} flags
 * @param {?} ctor
 * @param {?} deps
 * @return {?}
 */
function pipeDef(flags, ctor, deps) {
    flags |= 16 /* TypePipe */;
    return _def(-1, flags, null, 0, ctor, ctor, deps);
}
/**
 * @param {?} flags
 * @param {?} matchedQueries
 * @param {?} token
 * @param {?} value
 * @param {?} deps
 * @return {?}
 */
function providerDef(flags, matchedQueries, token, value, deps) {
    return _def(-1, flags, matchedQueries, 0, token, value, deps);
}
/**
 * @param {?} checkIndex
 * @param {?} flags
 * @param {?} matchedQueriesDsl
 * @param {?} childCount
 * @param {?} token
 * @param {?} value
 * @param {?} deps
 * @param {?=} bindings
 * @param {?=} outputs
 * @return {?}
 */
function _def(checkIndex, flags, matchedQueriesDsl, childCount, token, value, deps, bindings, outputs) {
    var _a = splitMatchedQueriesDsl(matchedQueriesDsl), matchedQueries = _a.matchedQueries, references = _a.references, matchedQueryIds = _a.matchedQueryIds;
    if (!outputs) {
        outputs = [];
    }
    if (!bindings) {
        bindings = [];
    }
    var /** @type {?} */ depDefs = splitDepsDsl(deps);
    return {
        // will bet set by the view definition
        nodeIndex: -1,
        parent: null,
        renderParent: null,
        bindingIndex: -1,
        outputIndex: -1,
        // regular values
        checkIndex: checkIndex,
        flags: flags,
        childFlags: 0,
        directChildFlags: 0,
        childMatchedQueries: 0, matchedQueries: matchedQueries, matchedQueryIds: matchedQueryIds, references: references,
        ngContentIndex: -1, childCount: childCount, bindings: bindings,
        bindingFlags: calcBindingFlags(bindings), outputs: outputs,
        element: null,
        provider: { token: token, value: value, deps: depDefs },
        text: null,
        query: null,
        ngContent: null
    };
}
/**
 * @param {?} view
 * @param {?} def
 * @return {?}
 */
function createProviderInstance(view, def) {
    return _createProviderInstance(view, def);
}
/**
 * @param {?} view
 * @param {?} def
 * @return {?}
 */
function createPipeInstance(view, def) {
    // deps are looked up from component.
    var /** @type {?} */ compView = view;
    while (compView.parent && !isComponentView(compView)) {
        compView = compView.parent;
    }
    // pipes can see the private services of the component
    var /** @type {?} */ allowPrivateServices = true;
    // pipes are always eager and classes!
    return createClass(/** @type {?} */ ((compView.parent)), /** @type {?} */ ((viewParentEl(compView))), allowPrivateServices, /** @type {?} */ ((def.provider)).value, /** @type {?} */ ((def.provider)).deps);
}
/**
 * @param {?} view
 * @param {?} def
 * @return {?}
 */
function createDirectiveInstance(view, def) {
    // components can see other private services, other directives can't.
    var /** @type {?} */ allowPrivateServices = (def.flags & 32768 /* Component */) > 0;
    // directives are always eager and classes!
    var /** @type {?} */ instance = createClass(view, /** @type {?} */ ((def.parent)), allowPrivateServices, /** @type {?} */ ((def.provider)).value, /** @type {?} */ ((def.provider)).deps);
    if (def.outputs.length) {
        for (var /** @type {?} */ i = 0; i < def.outputs.length; i++) {
            var /** @type {?} */ output = def.outputs[i];
            var /** @type {?} */ subscription = instance[((output.propName))].subscribe(eventHandlerClosure(view, /** @type {?} */ ((def.parent)).nodeIndex, output.eventName)); /** @type {?} */
            ((view.disposables))[def.outputIndex + i] = subscription.unsubscribe.bind(subscription);
        }
    }
    return instance;
}
/**
 * @param {?} view
 * @param {?} index
 * @param {?} eventName
 * @return {?}
 */
function eventHandlerClosure(view, index, eventName) {
    return function (event) {
        try {
            return dispatchEvent(view, index, eventName, event);
        }
        catch (e) {
            // Attention: Don't rethrow, as it would cancel Observable subscriptions!
            view.root.errorHandler.handleError(e);
        }
    };
}
/**
 * @param {?} view
 * @param {?} def
 * @param {?} v0
 * @param {?} v1
 * @param {?} v2
 * @param {?} v3
 * @param {?} v4
 * @param {?} v5
 * @param {?} v6
 * @param {?} v7
 * @param {?} v8
 * @param {?} v9
 * @return {?}
 */
function checkAndUpdateDirectiveInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {
    var /** @type {?} */ providerData = asProviderData(view, def.nodeIndex);
    var /** @type {?} */ directive = providerData.instance;
    var /** @type {?} */ changed = false;
    var /** @type {?} */ changes = ((undefined));
    var /** @type {?} */ bindLen = def.bindings.length;
    if (bindLen > 0 && checkBinding(view, def, 0, v0)) {
        changed = true;
        changes = updateProp(view, providerData, def, 0, v0, changes);
    }
    if (bindLen > 1 && checkBinding(view, def, 1, v1)) {
        changed = true;
        changes = updateProp(view, providerData, def, 1, v1, changes);
    }
    if (bindLen > 2 && checkBinding(view, def, 2, v2)) {
        changed = true;
        changes = updateProp(view, providerData, def, 2, v2, changes);
    }
    if (bindLen > 3 && checkBinding(view, def, 3, v3)) {
        changed = true;
        changes = updateProp(view, providerData, def, 3, v3, changes);
    }
    if (bindLen > 4 && checkBinding(view, def, 4, v4)) {
        changed = true;
        changes = updateProp(view, providerData, def, 4, v4, changes);
    }
    if (bindLen > 5 && checkBinding(view, def, 5, v5)) {
        changed = true;
        changes = updateProp(view, providerData, def, 5, v5, changes);
    }
    if (bindLen > 6 && checkBinding(view, def, 6, v6)) {
        changed = true;
        changes = updateProp(view, providerData, def, 6, v6, changes);
    }
    if (bindLen > 7 && checkBinding(view, def, 7, v7)) {
        changed = true;
        changes = updateProp(view, providerData, def, 7, v7, changes);
    }
    if (bindLen > 8 && checkBinding(view, def, 8, v8)) {
        changed = true;
        changes = updateProp(view, providerData, def, 8, v8, changes);
    }
    if (bindLen > 9 && checkBinding(view, def, 9, v9)) {
        changed = true;
        changes = updateProp(view, providerData, def, 9, v9, changes);
    }
    if (changes) {
        directive.ngOnChanges(changes);
    }
    if ((view.state & 2 /* FirstCheck */) && (def.flags & 65536 /* OnInit */)) {
        directive.ngOnInit();
    }
    if (def.flags & 262144 /* DoCheck */) {
        directive.ngDoCheck();
    }
    return changed;
}
/**
 * @param {?} view
 * @param {?} def
 * @param {?} values
 * @return {?}
 */
function checkAndUpdateDirectiveDynamic(view, def, values) {
    var /** @type {?} */ providerData = asProviderData(view, def.nodeIndex);
    var /** @type {?} */ directive = providerData.instance;
    var /** @type {?} */ changed = false;
    var /** @type {?} */ changes = ((undefined));
    for (var /** @type {?} */ i = 0; i < values.length; i++) {
        if (checkBinding(view, def, i, values[i])) {
            changed = true;
            changes = updateProp(view, providerData, def, i, values[i], changes);
        }
    }
    if (changes) {
        directive.ngOnChanges(changes);
    }
    if ((view.state & 2 /* FirstCheck */) && (def.flags & 65536 /* OnInit */)) {
        directive.ngOnInit();
    }
    if (def.flags & 262144 /* DoCheck */) {
        directive.ngDoCheck();
    }
    return changed;
}
/**
 * @param {?} view
 * @param {?} def
 * @return {?}
 */
function _createProviderInstance(view, def) {
    // private services can see other private services
    var /** @type {?} */ allowPrivateServices = (def.flags & 8192 /* PrivateProvider */) > 0;
    var /** @type {?} */ providerDef = def.provider;
    switch (def.flags & 201347067 /* Types */) {
        case 512 /* TypeClassProvider */:
            return createClass(view, /** @type {?} */ ((def.parent)), allowPrivateServices, /** @type {?} */ ((providerDef)).value, /** @type {?} */ ((providerDef)).deps);
        case 1024 /* TypeFactoryProvider */:
            return callFactory(view, /** @type {?} */ ((def.parent)), allowPrivateServices, /** @type {?} */ ((providerDef)).value, /** @type {?} */ ((providerDef)).deps);
        case 2048 /* TypeUseExistingProvider */:
            return resolveDep(view, /** @type {?} */ ((def.parent)), allowPrivateServices, /** @type {?} */ ((providerDef)).deps[0]);
        case 256 /* TypeValueProvider */:
            return ((providerDef)).value;
    }
}
/**
 * @param {?} view
 * @param {?} elDef
 * @param {?} allowPrivateServices
 * @param {?} ctor
 * @param {?} deps
 * @return {?}
 */
function createClass(view, elDef, allowPrivateServices, ctor, deps) {
    var /** @type {?} */ len = deps.length;
    switch (len) {
        case 0:
            return new ctor();
        case 1:
            return new ctor(resolveDep(view, elDef, allowPrivateServices, deps[0]));
        case 2:
            return new ctor(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]));
        case 3:
            return new ctor(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]), resolveDep(view, elDef, allowPrivateServices, deps[2]));
        default:
            var /** @type {?} */ depValues = new Array(len);
            for (var /** @type {?} */ i = 0; i < len; i++) {
                depValues[i] = resolveDep(view, elDef, allowPrivateServices, deps[i]);
            }
            return new (ctor.bind.apply(ctor, [void 0].concat(depValues)))();
    }
}
/**
 * @param {?} view
 * @param {?} elDef
 * @param {?} allowPrivateServices
 * @param {?} factory
 * @param {?} deps
 * @return {?}
 */
function callFactory(view, elDef, allowPrivateServices, factory, deps) {
    var /** @type {?} */ len = deps.length;
    switch (len) {
        case 0:
            return factory();
        case 1:
            return factory(resolveDep(view, elDef, allowPrivateServices, deps[0]));
        case 2:
            return factory(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]));
        case 3:
            return factory(resolveDep(view, elDef, allowPrivateServices, deps[0]), resolveDep(view, elDef, allowPrivateServices, deps[1]), resolveDep(view, elDef, allowPrivateServices, deps[2]));
        default:
            var /** @type {?} */ depValues = Array(len);
            for (var /** @type {?} */ i = 0; i < len; i++) {
                depValues[i] = resolveDep(view, elDef, allowPrivateServices, deps[i]);
            }
            return factory.apply(void 0, depValues);
    }
}
// This default value is when checking the hierarchy for a token.
//
// It means both:
// - the token is not provided by the current injector,
// - only the element injectors should be checked (ie do not check module injectors
//
//          mod1
//         /
//       el1   mod2
//         \  /
//         el2
//
// When requesting el2.injector.get(token), we should check in the following order and return the
// first found value:
// - el2.injector.get(token, default)
// - el1.injector.get(token, NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR) -> do not check the module
// - mod2.injector.get(token, default)
var NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR = {};
/**
 * @param {?} view
 * @param {?} elDef
 * @param {?} allowPrivateServices
 * @param {?} depDef
 * @param {?=} notFoundValue
 * @return {?}
 */
function resolveDep(view, elDef, allowPrivateServices, depDef, notFoundValue) {
    if (notFoundValue === void 0) { notFoundValue = Injector.THROW_IF_NOT_FOUND; }
    if (depDef.flags & 8 /* Value */) {
        return depDef.token;
    }
    var /** @type {?} */ startView = view;
    if (depDef.flags & 2 /* Optional */) {
        notFoundValue = null;
    }
    var /** @type {?} */ tokenKey$$1 = depDef.tokenKey;
    if (tokenKey$$1 === ChangeDetectorRefTokenKey) {
        // directives on the same element as a component should be able to control the change detector
        // of that component as well.
        allowPrivateServices = !!(elDef && ((elDef.element)).componentView);
    }
    if (elDef && (depDef.flags & 1 /* SkipSelf */)) {
        allowPrivateServices = false;
        elDef = ((elDef.parent));
    }
    while (view) {
        if (elDef) {
            switch (tokenKey$$1) {
                case RendererV1TokenKey: {
                    var /** @type {?} */ compView = findCompView(view, elDef, allowPrivateServices);
                    return createRendererV1(compView);
                }
                case Renderer2TokenKey: {
                    var /** @type {?} */ compView = findCompView(view, elDef, allowPrivateServices);
                    return compView.renderer;
                }
                case ElementRefTokenKey:
                    return new ElementRef(asElementData(view, elDef.nodeIndex).renderElement);
                case ViewContainerRefTokenKey:
                    return asElementData(view, elDef.nodeIndex).viewContainer;
                case TemplateRefTokenKey: {
                    if (((elDef.element)).template) {
                        return asElementData(view, elDef.nodeIndex).template;
                    }
                    break;
                }
                case ChangeDetectorRefTokenKey: {
                    var /** @type {?} */ cdView = findCompView(view, elDef, allowPrivateServices);
                    return createChangeDetectorRef(cdView);
                }
                case InjectorRefTokenKey:
                    return createInjector(view, elDef);
                default:
                    var /** @type {?} */ providerDef_1 = (((allowPrivateServices ? ((elDef.element)).allProviders : ((elDef.element)).publicProviders)))[tokenKey$$1];
                    if (providerDef_1) {
                        var /** @type {?} */ providerData = asProviderData(view, providerDef_1.nodeIndex);
                        if (!providerData) {
                            providerData = { instance: _createProviderInstance(view, providerDef_1) };
                            view.nodes[providerDef_1.nodeIndex] = (providerData);
                        }
                        return providerData.instance;
                    }
            }
        }
        allowPrivateServices = isComponentView(view);
        elDef = ((viewParentEl(view)));
        view = ((view.parent));
    }
    var /** @type {?} */ value = startView.root.injector.get(depDef.token, NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR);
    if (value !== NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR ||
        notFoundValue === NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR) {
        // Return the value from the root element injector when
        // - it provides it
        //   (value !== NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR)
        // - the module injector should not be checked
        //   (notFoundValue === NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR)
        return value;
    }
    return startView.root.ngModule.injector.get(depDef.token, notFoundValue);
}
/**
 * @param {?} view
 * @param {?} elDef
 * @param {?} allowPrivateServices
 * @return {?}
 */
function findCompView(view, elDef, allowPrivateServices) {
    var /** @type {?} */ compView;
    if (allowPrivateServices) {
        compView = asElementData(view, elDef.nodeIndex).componentView;
    }
    else {
        compView = view;
        while (compView.parent && !isComponentView(compView)) {
            compView = compView.parent;
        }
    }
    return compView;
}
/**
 * @param {?} view
 * @param {?} providerData
 * @param {?} def
 * @param {?} bindingIdx
 * @param {?} value
 * @param {?} changes
 * @return {?}
 */
function updateProp(view, providerData, def, bindingIdx, value, changes) {
    if (def.flags & 32768 /* Component */) {
        var /** @type {?} */ compView = asElementData(view, /** @type {?} */ ((def.parent)).nodeIndex).componentView;
        if (compView.def.flags & 2 /* OnPush */) {
            compView.state |= 8 /* ChecksEnabled */;
        }
    }
    var /** @type {?} */ binding = def.bindings[bindingIdx];
    var /** @type {?} */ propName = ((binding.name));
    // Note: This is still safe with Closure Compiler as
    // the user passed in the property name as an object has to `providerDef`,
    // so Closure Compiler will have renamed the property correctly already.
    providerData.instance[propName] = value;
    if (def.flags & 524288 /* OnChanges */) {
        changes = changes || {};
        var /** @type {?} */ oldValue = view.oldValues[def.bindingIndex + bindingIdx];
        if (oldValue instanceof WrappedValue) {
            oldValue = oldValue.wrapped;
        }
        var /** @type {?} */ binding_1 = def.bindings[bindingIdx];
        changes[((binding_1.nonMinifiedName))] =
            new SimpleChange(oldValue, value, (view.state & 2 /* FirstCheck */) !== 0);
    }
    view.oldValues[def.bindingIndex + bindingIdx] = value;
    return changes;
}
/**
 * @param {?} view
 * @param {?} lifecycles
 * @return {?}
 */
function callLifecycleHooksChildrenFirst(view, lifecycles) {
    if (!(view.def.nodeFlags & lifecycles)) {
        return;
    }
    var /** @type {?} */ nodes = view.def.nodes;
    for (var /** @type {?} */ i = 0; i < nodes.length; i++) {
        var /** @type {?} */ nodeDef = nodes[i];
        var /** @type {?} */ parent = nodeDef.parent;
        if (!parent && nodeDef.flags & lifecycles) {
            // matching root node (e.g. a pipe)
            callProviderLifecycles(view, i, nodeDef.flags & lifecycles);
        }
        if ((nodeDef.childFlags & lifecycles) === 0) {
            // no child matches one of the lifecycles
            i += nodeDef.childCount;
        }
        while (parent && (parent.flags & 1 /* TypeElement */) &&
            i === parent.nodeIndex + parent.childCount) {
            // last child of an element
            if (parent.directChildFlags & lifecycles) {
                callElementProvidersLifecycles(view, parent, lifecycles);
            }
            parent = parent.parent;
        }
    }
}
/**
 * @param {?} view
 * @param {?} elDef
 * @param {?} lifecycles
 * @return {?}
 */
function callElementProvidersLifecycles(view, elDef, lifecycles) {
    for (var /** @type {?} */ i = elDef.nodeIndex + 1; i <= elDef.nodeIndex + elDef.childCount; i++) {
        var /** @type {?} */ nodeDef = view.def.nodes[i];
        if (nodeDef.flags & lifecycles) {
            callProviderLifecycles(view, i, nodeDef.flags & lifecycles);
        }
        // only visit direct children
        i += nodeDef.childCount;
    }
}
/**
 * @param {?} view
 * @param {?} index
 * @param {?} lifecycles
 * @return {?}
 */
function callProviderLifecycles(view, index, lifecycles) {
    var /** @type {?} */ providerData = asProviderData(view, index);
    if (!providerData) {
        return;
    }
    var /** @type {?} */ provider = providerData.instance;
    if (!provider) {
        return;
    }
    Services.setCurrentNode(view, index);
    if (lifecycles & 1048576 /* AfterContentInit */) {
        provider.ngAfterContentInit();
    }
    if (lifecycles & 2097152 /* AfterContentChecked */) {
        provider.ngAfterContentChecked();
    }
    if (lifecycles & 4194304 /* AfterViewInit */) {
        provider.ngAfterViewInit();
    }
    if (lifecycles & 8388608 /* AfterViewChecked */) {
        provider.ngAfterViewChecked();
    }
    if (lifecycles & 131072 /* OnDestroy */) {
        provider.ngOnDestroy();
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} flags
 * @param {?} id
 * @param {?} bindings
 * @return {?}
 */
function queryDef(flags, id, bindings) {
    var /** @type {?} */ bindingDefs = [];
    for (var /** @type {?} */ propName in bindings) {
        var /** @type {?} */ bindingType = bindings[propName];
        bindingDefs.push({ propName: propName, bindingType: bindingType });
    }
    return {
        // will bet set by the view definition
        nodeIndex: -1,
        parent: null,
        renderParent: null,
        bindingIndex: -1,
        outputIndex: -1,
        // regular values
        // TODO(vicb): check
        checkIndex: -1, flags: flags,
        childFlags: 0,
        directChildFlags: 0,
        childMatchedQueries: 0,
        ngContentIndex: -1,
        matchedQueries: {},
        matchedQueryIds: 0,
        references: {},
        childCount: 0,
        bindings: [],
        bindingFlags: 0,
        outputs: [],
        element: null,
        provider: null,
        text: null,
        query: { id: id, filterId: filterQueryId(id), bindings: bindingDefs },
        ngContent: null
    };
}
/**
 * @return {?}
 */
function createQuery() {
    return new QueryList();
}
/**
 * @param {?} view
 * @return {?}
 */
function dirtyParentQueries(view) {
    var /** @type {?} */ queryIds = view.def.nodeMatchedQueries;
    while (view.parent && isEmbeddedView(view)) {
        var /** @type {?} */ tplDef = ((view.parentNodeDef));
        view = view.parent;
        // content queries
        var /** @type {?} */ end = tplDef.nodeIndex + tplDef.childCount;
        for (var /** @type {?} */ i = 0; i <= end; i++) {
            var /** @type {?} */ nodeDef = view.def.nodes[i];
            if ((nodeDef.flags & 67108864 /* TypeContentQuery */) &&
                (nodeDef.flags & 536870912 /* DynamicQuery */) &&
                (((nodeDef.query)).filterId & queryIds) === ((nodeDef.query)).filterId) {
                asQueryList(view, i).setDirty();
            }
            if ((nodeDef.flags & 1 /* TypeElement */ && i + nodeDef.childCount < tplDef.nodeIndex) ||
                !(nodeDef.childFlags & 67108864 /* TypeContentQuery */) ||
                !(nodeDef.childFlags & 536870912 /* DynamicQuery */)) {
                // skip elements that don't contain the template element or no query.
                i += nodeDef.childCount;
            }
        }
    }
    // view queries
    if (view.def.nodeFlags & 134217728 /* TypeViewQuery */) {
        for (var /** @type {?} */ i = 0; i < view.def.nodes.length; i++) {
            var /** @type {?} */ nodeDef = view.def.nodes[i];
            if ((nodeDef.flags & 134217728 /* TypeViewQuery */) && (nodeDef.flags & 536870912 /* DynamicQuery */)) {
                asQueryList(view, i).setDirty();
            }
            // only visit the root nodes
            i += nodeDef.childCount;
        }
    }
}
/**
 * @param {?} view
 * @param {?} nodeDef
 * @return {?}
 */
function checkAndUpdateQuery(view, nodeDef) {
    var /** @type {?} */ queryList = asQueryList(view, nodeDef.nodeIndex);
    if (!queryList.dirty) {
        return;
    }
    var /** @type {?} */ directiveInstance;
    var /** @type {?} */ newValues = ((undefined));
    if (nodeDef.flags & 67108864 /* TypeContentQuery */) {
        var /** @type {?} */ elementDef_1 = ((((nodeDef.parent)).parent));
        newValues = calcQueryValues(view, elementDef_1.nodeIndex, elementDef_1.nodeIndex + elementDef_1.childCount, /** @type {?} */ ((nodeDef.query)), []);
        directiveInstance = asProviderData(view, /** @type {?} */ ((nodeDef.parent)).nodeIndex).instance;
    }
    else if (nodeDef.flags & 134217728 /* TypeViewQuery */) {
        newValues = calcQueryValues(view, 0, view.def.nodes.length - 1, /** @type {?} */ ((nodeDef.query)), []);
        directiveInstance = view.component;
    }
    queryList.reset(newValues);
    var /** @type {?} */ bindings = ((nodeDef.query)).bindings;
    var /** @type {?} */ notify = false;
    for (var /** @type {?} */ i = 0; i < bindings.length; i++) {
        var /** @type {?} */ binding = bindings[i];
        var /** @type {?} */ boundValue = void 0;
        switch (binding.bindingType) {
            case 0 /* First */:
                boundValue = queryList.first;
                break;
            case 1 /* All */:
                boundValue = queryList;
                notify = true;
                break;
        }
        directiveInstance[binding.propName] = boundValue;
    }
    if (notify) {
        queryList.notifyOnChanges();
    }
}
/**
 * @param {?} view
 * @param {?} startIndex
 * @param {?} endIndex
 * @param {?} queryDef
 * @param {?} values
 * @return {?}
 */
function calcQueryValues(view, startIndex, endIndex, queryDef, values) {
    for (var /** @type {?} */ i = startIndex; i <= endIndex; i++) {
        var /** @type {?} */ nodeDef = view.def.nodes[i];
        var /** @type {?} */ valueType = nodeDef.matchedQueries[queryDef.id];
        if (valueType != null) {
            values.push(getQueryValue(view, nodeDef, valueType));
        }
        if (nodeDef.flags & 1 /* TypeElement */ && ((nodeDef.element)).template &&
            (((((nodeDef.element)).template)).nodeMatchedQueries & queryDef.filterId) ===
                queryDef.filterId) {
            var /** @type {?} */ elementData = asElementData(view, i);
            // check embedded views that were attached at the place of their template,
            // but process child nodes first if some match the query (see issue #16568)
            if ((nodeDef.childMatchedQueries & queryDef.filterId) === queryDef.filterId) {
                calcQueryValues(view, i + 1, i + nodeDef.childCount, queryDef, values);
                i += nodeDef.childCount;
            }
            if (nodeDef.flags & 16777216 /* EmbeddedViews */) {
                var /** @type {?} */ embeddedViews = ((elementData.viewContainer))._embeddedViews;
                for (var /** @type {?} */ k = 0; k < embeddedViews.length; k++) {
                    var /** @type {?} */ embeddedView = embeddedViews[k];
                    var /** @type {?} */ dvc = declaredViewContainer(embeddedView);
                    if (dvc && dvc === elementData) {
                        calcQueryValues(embeddedView, 0, embeddedView.def.nodes.length - 1, queryDef, values);
                    }
                }
            }
            var /** @type {?} */ projectedViews = elementData.template._projectedViews;
            if (projectedViews) {
                for (var /** @type {?} */ k = 0; k < projectedViews.length; k++) {
                    var /** @type {?} */ projectedView = projectedViews[k];
                    calcQueryValues(projectedView, 0, projectedView.def.nodes.length - 1, queryDef, values);
                }
            }
        }
        if ((nodeDef.childMatchedQueries & queryDef.filterId) !== queryDef.filterId) {
            // if no child matches the query, skip the children.
            i += nodeDef.childCount;
        }
    }
    return values;
}
/**
 * @param {?} view
 * @param {?} nodeDef
 * @param {?} queryValueType
 * @return {?}
 */
function getQueryValue(view, nodeDef, queryValueType) {
    if (queryValueType != null) {
        // a match
        switch (queryValueType) {
            case 1 /* RenderElement */:
                return asElementData(view, nodeDef.nodeIndex).renderElement;
            case 0 /* ElementRef */:
                return new ElementRef(asElementData(view, nodeDef.nodeIndex).renderElement);
            case 2 /* TemplateRef */:
                return asElementData(view, nodeDef.nodeIndex).template;
            case 3 /* ViewContainerRef */:
                return asElementData(view, nodeDef.nodeIndex).viewContainer;
            case 4 /* Provider */:
                return asProviderData(view, nodeDef.nodeIndex).instance;
        }
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} ngContentIndex
 * @param {?} index
 * @return {?}
 */
function ngContentDef(ngContentIndex, index) {
    return {
        // will bet set by the view definition
        nodeIndex: -1,
        parent: null,
        renderParent: null,
        bindingIndex: -1,
        outputIndex: -1,
        // regular values
        checkIndex: -1,
        flags: 8 /* TypeNgContent */,
        childFlags: 0,
        directChildFlags: 0,
        childMatchedQueries: 0,
        matchedQueries: {},
        matchedQueryIds: 0,
        references: {}, ngContentIndex: ngContentIndex,
        childCount: 0,
        bindings: [],
        bindingFlags: 0,
        outputs: [],
        element: null,
        provider: null,
        text: null,
        query: null,
        ngContent: { index: index }
    };
}
/**
 * @param {?} view
 * @param {?} renderHost
 * @param {?} def
 * @return {?}
 */
function appendNgContent(view, renderHost, def) {
    var /** @type {?} */ parentEl = getParentRenderElement(view, renderHost, def);
    if (!parentEl) {
        // Nothing to do if there is no parent element.
        return;
    }
    var /** @type {?} */ ngContentIndex = ((def.ngContent)).index;
    visitProjectedRenderNodes(view, ngContentIndex, 1 /* AppendChild */, parentEl, null, undefined);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} checkIndex
 * @param {?} argCount
 * @return {?}
 */
function purePipeDef(checkIndex, argCount) {
    // argCount + 1 to include the pipe as first arg
    return _pureExpressionDef(128 /* TypePurePipe */, checkIndex, new Array(argCount + 1));
}
/**
 * @param {?} checkIndex
 * @param {?} argCount
 * @return {?}
 */
function pureArrayDef(checkIndex, argCount) {
    return _pureExpressionDef(32 /* TypePureArray */, checkIndex, new Array(argCount));
}
/**
 * @param {?} checkIndex
 * @param {?} propToIndex
 * @return {?}
 */
function pureObjectDef(checkIndex, propToIndex) {
    var /** @type {?} */ keys = Object.keys(propToIndex);
    var /** @type {?} */ nbKeys = keys.length;
    var /** @type {?} */ propertyNames = new Array(nbKeys);
    for (var /** @type {?} */ i = 0; i < nbKeys; i++) {
        var /** @type {?} */ key = keys[i];
        var /** @type {?} */ index = propToIndex[key];
        propertyNames[index] = key;
    }
    return _pureExpressionDef(64 /* TypePureObject */, checkIndex, propertyNames);
}
/**
 * @param {?} flags
 * @param {?} checkIndex
 * @param {?} propertyNames
 * @return {?}
 */
function _pureExpressionDef(flags, checkIndex, propertyNames) {
    var /** @type {?} */ bindings = new Array(propertyNames.length);
    for (var /** @type {?} */ i = 0; i < propertyNames.length; i++) {
        var /** @type {?} */ prop = propertyNames[i];
        bindings[i] = {
            flags: 8 /* TypeProperty */,
            name: prop,
            ns: null,
            nonMinifiedName: prop,
            securityContext: null,
            suffix: null
        };
    }
    return {
        // will bet set by the view definition
        nodeIndex: -1,
        parent: null,
        renderParent: null,
        bindingIndex: -1,
        outputIndex: -1,
        // regular values
        checkIndex: checkIndex,
        flags: flags,
        childFlags: 0,
        directChildFlags: 0,
        childMatchedQueries: 0,
        matchedQueries: {},
        matchedQueryIds: 0,
        references: {},
        ngContentIndex: -1,
        childCount: 0, bindings: bindings,
        bindingFlags: calcBindingFlags(bindings),
        outputs: [],
        element: null,
        provider: null,
        text: null,
        query: null,
        ngContent: null
    };
}
/**
 * @param {?} view
 * @param {?} def
 * @return {?}
 */
function createPureExpression(view, def) {
    return { value: undefined };
}
/**
 * @param {?} view
 * @param {?} def
 * @param {?} v0
 * @param {?} v1
 * @param {?} v2
 * @param {?} v3
 * @param {?} v4
 * @param {?} v5
 * @param {?} v6
 * @param {?} v7
 * @param {?} v8
 * @param {?} v9
 * @return {?}
 */
function checkAndUpdatePureExpressionInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {
    var /** @type {?} */ bindings = def.bindings;
    var /** @type {?} */ changed = false;
    var /** @type {?} */ bindLen = bindings.length;
    if (bindLen > 0 && checkAndUpdateBinding(view, def, 0, v0))
        changed = true;
    if (bindLen > 1 && checkAndUpdateBinding(view, def, 1, v1))
        changed = true;
    if (bindLen > 2 && checkAndUpdateBinding(view, def, 2, v2))
        changed = true;
    if (bindLen > 3 && checkAndUpdateBinding(view, def, 3, v3))
        changed = true;
    if (bindLen > 4 && checkAndUpdateBinding(view, def, 4, v4))
        changed = true;
    if (bindLen > 5 && checkAndUpdateBinding(view, def, 5, v5))
        changed = true;
    if (bindLen > 6 && checkAndUpdateBinding(view, def, 6, v6))
        changed = true;
    if (bindLen > 7 && checkAndUpdateBinding(view, def, 7, v7))
        changed = true;
    if (bindLen > 8 && checkAndUpdateBinding(view, def, 8, v8))
        changed = true;
    if (bindLen > 9 && checkAndUpdateBinding(view, def, 9, v9))
        changed = true;
    if (changed) {
        var /** @type {?} */ data = asPureExpressionData(view, def.nodeIndex);
        var /** @type {?} */ value = void 0;
        switch (def.flags & 201347067 /* Types */) {
            case 32 /* TypePureArray */:
                value = new Array(bindings.length);
                if (bindLen > 0)
                    value[0] = v0;
                if (bindLen > 1)
                    value[1] = v1;
                if (bindLen > 2)
                    value[2] = v2;
                if (bindLen > 3)
                    value[3] = v3;
                if (bindLen > 4)
                    value[4] = v4;
                if (bindLen > 5)
                    value[5] = v5;
                if (bindLen > 6)
                    value[6] = v6;
                if (bindLen > 7)
                    value[7] = v7;
                if (bindLen > 8)
                    value[8] = v8;
                if (bindLen > 9)
                    value[9] = v9;
                break;
            case 64 /* TypePureObject */:
                value = {};
                if (bindLen > 0)
                    value[((bindings[0].name))] = v0;
                if (bindLen > 1)
                    value[((bindings[1].name))] = v1;
                if (bindLen > 2)
                    value[((bindings[2].name))] = v2;
                if (bindLen > 3)
                    value[((bindings[3].name))] = v3;
                if (bindLen > 4)
                    value[((bindings[4].name))] = v4;
                if (bindLen > 5)
                    value[((bindings[5].name))] = v5;
                if (bindLen > 6)
                    value[((bindings[6].name))] = v6;
                if (bindLen > 7)
                    value[((bindings[7].name))] = v7;
                if (bindLen > 8)
                    value[((bindings[8].name))] = v8;
                if (bindLen > 9)
                    value[((bindings[9].name))] = v9;
                break;
            case 128 /* TypePurePipe */:
                var /** @type {?} */ pipe = v0;
                switch (bindLen) {
                    case 1:
                        value = pipe.transform(v0);
                        break;
                    case 2:
                        value = pipe.transform(v1);
                        break;
                    case 3:
                        value = pipe.transform(v1, v2);
                        break;
                    case 4:
                        value = pipe.transform(v1, v2, v3);
                        break;
                    case 5:
                        value = pipe.transform(v1, v2, v3, v4);
                        break;
                    case 6:
                        value = pipe.transform(v1, v2, v3, v4, v5);
                        break;
                    case 7:
                        value = pipe.transform(v1, v2, v3, v4, v5, v6);
                        break;
                    case 8:
                        value = pipe.transform(v1, v2, v3, v4, v5, v6, v7);
                        break;
                    case 9:
                        value = pipe.transform(v1, v2, v3, v4, v5, v6, v7, v8);
                        break;
                    case 10:
                        value = pipe.transform(v1, v2, v3, v4, v5, v6, v7, v8, v9);
                        break;
                }
                break;
        }
        data.value = value;
    }
    return changed;
}
/**
 * @param {?} view
 * @param {?} def
 * @param {?} values
 * @return {?}
 */
function checkAndUpdatePureExpressionDynamic(view, def, values) {
    var /** @type {?} */ bindings = def.bindings;
    var /** @type {?} */ changed = false;
    for (var /** @type {?} */ i = 0; i < values.length; i++) {
        // Note: We need to loop over all values, so that
        // the old values are updates as well!
        if (checkAndUpdateBinding(view, def, i, values[i])) {
            changed = true;
        }
    }
    if (changed) {
        var /** @type {?} */ data = asPureExpressionData(view, def.nodeIndex);
        var /** @type {?} */ value = void 0;
        switch (def.flags & 201347067 /* Types */) {
            case 32 /* TypePureArray */:
                value = values;
                break;
            case 64 /* TypePureObject */:
                value = {};
                for (var /** @type {?} */ i = 0; i < values.length; i++) {
                    value[((bindings[i].name))] = values[i];
                }
                break;
            case 128 /* TypePurePipe */:
                var /** @type {?} */ pipe = values[0];
                var /** @type {?} */ params = values.slice(1);
                value = pipe.transform.apply(pipe, params);
                break;
        }
        data.value = value;
    }
    return changed;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} checkIndex
 * @param {?} ngContentIndex
 * @param {?} staticText
 * @return {?}
 */
function textDef(checkIndex, ngContentIndex, staticText) {
    var /** @type {?} */ bindings = new Array(staticText.length - 1);
    for (var /** @type {?} */ i = 1; i < staticText.length; i++) {
        bindings[i - 1] = {
            flags: 8 /* TypeProperty */,
            name: null,
            ns: null,
            nonMinifiedName: null,
            securityContext: null,
            suffix: staticText[i],
        };
    }
    return {
        // will bet set by the view definition
        nodeIndex: -1,
        parent: null,
        renderParent: null,
        bindingIndex: -1,
        outputIndex: -1,
        // regular values
        checkIndex: checkIndex,
        flags: 2 /* TypeText */,
        childFlags: 0,
        directChildFlags: 0,
        childMatchedQueries: 0,
        matchedQueries: {},
        matchedQueryIds: 0,
        references: {}, ngContentIndex: ngContentIndex,
        childCount: 0, bindings: bindings,
        bindingFlags: 8 /* TypeProperty */,
        outputs: [],
        element: null,
        provider: null,
        text: { prefix: staticText[0] },
        query: null,
        ngContent: null,
    };
}
/**
 * @param {?} view
 * @param {?} renderHost
 * @param {?} def
 * @return {?}
 */
function createText(view, renderHost, def) {
    var /** @type {?} */ renderNode$$1;
    var /** @type {?} */ renderer = view.renderer;
    renderNode$$1 = renderer.createText(/** @type {?} */ ((def.text)).prefix);
    var /** @type {?} */ parentEl = getParentRenderElement(view, renderHost, def);
    if (parentEl) {
        renderer.appendChild(parentEl, renderNode$$1);
    }
    return { renderText: renderNode$$1 };
}
/**
 * @param {?} view
 * @param {?} def
 * @param {?} v0
 * @param {?} v1
 * @param {?} v2
 * @param {?} v3
 * @param {?} v4
 * @param {?} v5
 * @param {?} v6
 * @param {?} v7
 * @param {?} v8
 * @param {?} v9
 * @return {?}
 */
function checkAndUpdateTextInline(view, def, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {
    var /** @type {?} */ changed = false;
    var /** @type {?} */ bindings = def.bindings;
    var /** @type {?} */ bindLen = bindings.length;
    if (bindLen > 0 && checkAndUpdateBinding(view, def, 0, v0))
        changed = true;
    if (bindLen > 1 && checkAndUpdateBinding(view, def, 1, v1))
        changed = true;
    if (bindLen > 2 && checkAndUpdateBinding(view, def, 2, v2))
        changed = true;
    if (bindLen > 3 && checkAndUpdateBinding(view, def, 3, v3))
        changed = true;
    if (bindLen > 4 && checkAndUpdateBinding(view, def, 4, v4))
        changed = true;
    if (bindLen > 5 && checkAndUpdateBinding(view, def, 5, v5))
        changed = true;
    if (bindLen > 6 && checkAndUpdateBinding(view, def, 6, v6))
        changed = true;
    if (bindLen > 7 && checkAndUpdateBinding(view, def, 7, v7))
        changed = true;
    if (bindLen > 8 && checkAndUpdateBinding(view, def, 8, v8))
        changed = true;
    if (bindLen > 9 && checkAndUpdateBinding(view, def, 9, v9))
        changed = true;
    if (changed) {
        var /** @type {?} */ value = ((def.text)).prefix;
        if (bindLen > 0)
            value += _addInterpolationPart(v0, bindings[0]);
        if (bindLen > 1)
            value += _addInterpolationPart(v1, bindings[1]);
        if (bindLen > 2)
            value += _addInterpolationPart(v2, bindings[2]);
        if (bindLen > 3)
            value += _addInterpolationPart(v3, bindings[3]);
        if (bindLen > 4)
            value += _addInterpolationPart(v4, bindings[4]);
        if (bindLen > 5)
            value += _addInterpolationPart(v5, bindings[5]);
        if (bindLen > 6)
            value += _addInterpolationPart(v6, bindings[6]);
        if (bindLen > 7)
            value += _addInterpolationPart(v7, bindings[7]);
        if (bindLen > 8)
            value += _addInterpolationPart(v8, bindings[8]);
        if (bindLen > 9)
            value += _addInterpolationPart(v9, bindings[9]);
        var /** @type {?} */ renderNode$$1 = asTextData(view, def.nodeIndex).renderText;
        view.renderer.setValue(renderNode$$1, value);
    }
    return changed;
}
/**
 * @param {?} view
 * @param {?} def
 * @param {?} values
 * @return {?}
 */
function checkAndUpdateTextDynamic(view, def, values) {
    var /** @type {?} */ bindings = def.bindings;
    var /** @type {?} */ changed = false;
    for (var /** @type {?} */ i = 0; i < values.length; i++) {
        // Note: We need to loop over all values, so that
        // the old values are updates as well!
        if (checkAndUpdateBinding(view, def, i, values[i])) {
            changed = true;
        }
    }
    if (changed) {
        var /** @type {?} */ value = '';
        for (var /** @type {?} */ i = 0; i < values.length; i++) {
            value = value + _addInterpolationPart(values[i], bindings[i]);
        }
        value = ((def.text)).prefix + value;
        var /** @type {?} */ renderNode$$1 = asTextData(view, def.nodeIndex).renderText;
        view.renderer.setValue(renderNode$$1, value);
    }
    return changed;
}
/**
 * @param {?} value
 * @param {?} binding
 * @return {?}
 */
function _addInterpolationPart(value, binding) {
    var /** @type {?} */ valueStr = value != null ? value.toString() : '';
    return valueStr + binding.suffix;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} flags
 * @param {?} nodes
 * @param {?=} updateDirectives
 * @param {?=} updateRenderer
 * @return {?}
 */
function viewDef(flags, nodes, updateDirectives, updateRenderer) {
    // clone nodes and set auto calculated values
    var /** @type {?} */ viewBindingCount = 0;
    var /** @type {?} */ viewDisposableCount = 0;
    var /** @type {?} */ viewNodeFlags = 0;
    var /** @type {?} */ viewRootNodeFlags = 0;
    var /** @type {?} */ viewMatchedQueries = 0;
    var /** @type {?} */ currentParent = null;
    var /** @type {?} */ currentRenderParent = null;
    var /** @type {?} */ currentElementHasPublicProviders = false;
    var /** @type {?} */ currentElementHasPrivateProviders = false;
    var /** @type {?} */ lastRenderRootNode = null;
    for (var /** @type {?} */ i = 0; i < nodes.length; i++) {
        var /** @type {?} */ node = nodes[i];
        node.nodeIndex = i;
        node.parent = currentParent;
        node.bindingIndex = viewBindingCount;
        node.outputIndex = viewDisposableCount;
        node.renderParent = currentRenderParent;
        viewNodeFlags |= node.flags;
        viewMatchedQueries |= node.matchedQueryIds;
        if (node.element) {
            var /** @type {?} */ elDef = node.element;
            elDef.publicProviders =
                currentParent ? ((currentParent.element)).publicProviders : Object.create(null);
            elDef.allProviders = elDef.publicProviders;
            // Note: We assume that all providers of an element are before any child element!
            currentElementHasPublicProviders = false;
            currentElementHasPrivateProviders = false;
            if (node.element.template) {
                viewMatchedQueries |= node.element.template.nodeMatchedQueries;
            }
        }
        validateNode(currentParent, node, nodes.length);
        viewBindingCount += node.bindings.length;
        viewDisposableCount += node.outputs.length;
        if (!currentRenderParent && (node.flags & 3 /* CatRenderNode */)) {
            lastRenderRootNode = node;
        }
        if (node.flags & 20224 /* CatProvider */) {
            if (!currentElementHasPublicProviders) {
                currentElementHasPublicProviders = true; /** @type {?} */
                ((((
                // Use prototypical inheritance to not get O(n^2) complexity...
                currentParent)).element)).publicProviders =
                    Object.create(/** @type {?} */ ((((currentParent)).element)).publicProviders); /** @type {?} */
                ((((currentParent)).element)).allProviders = ((((currentParent)).element)).publicProviders;
            }
            var /** @type {?} */ isPrivateService = (node.flags & 8192 /* PrivateProvider */) !== 0;
            var /** @type {?} */ isComponent = (node.flags & 32768 /* Component */) !== 0;
            if (!isPrivateService || isComponent) {
                ((((((currentParent)).element)).publicProviders))[tokenKey(/** @type {?} */ ((node.provider)).token)] = node;
            }
            else {
                if (!currentElementHasPrivateProviders) {
                    currentElementHasPrivateProviders = true; /** @type {?} */
                    ((((
                    // Use prototypical inheritance to not get O(n^2) complexity...
                    currentParent)).element)).allProviders =
                        Object.create(/** @type {?} */ ((((currentParent)).element)).publicProviders);
                } /** @type {?} */
                ((((((currentParent)).element)).allProviders))[tokenKey(/** @type {?} */ ((node.provider)).token)] = node;
            }
            if (isComponent) {
                ((((currentParent)).element)).componentProvider = node;
            }
        }
        if (currentParent) {
            currentParent.childFlags |= node.flags;
            currentParent.directChildFlags |= node.flags;
            currentParent.childMatchedQueries |= node.matchedQueryIds;
            if (node.element && node.element.template) {
                currentParent.childMatchedQueries |= node.element.template.nodeMatchedQueries;
            }
        }
        else {
            viewRootNodeFlags |= node.flags;
        }
        if (node.childCount > 0) {
            currentParent = node;
            if (!isNgContainer(node)) {
                currentRenderParent = node;
            }
        }
        else {
            // When the current node has no children, check if it is the last children of its parent.
            // When it is, propagate the flags up.
            // The loop is required because an element could be the last transitive children of several
            // elements. We loop to either the root or the highest opened element (= with remaining
            // children)
            while (currentParent && i === currentParent.nodeIndex + currentParent.childCount) {
                var /** @type {?} */ newParent = currentParent.parent;
                if (newParent) {
                    newParent.childFlags |= currentParent.childFlags;
                    newParent.childMatchedQueries |= currentParent.childMatchedQueries;
                }
                currentParent = newParent;
                // We also need to update the render parent & account for ng-container
                if (currentParent && isNgContainer(currentParent)) {
                    currentRenderParent = currentParent.renderParent;
                }
                else {
                    currentRenderParent = currentParent;
                }
            }
        }
    }
    var /** @type {?} */ handleEvent = function (view, nodeIndex, eventName, event) { return ((((nodes[nodeIndex].element)).handleEvent))(view, eventName, event); };
    return {
        // Will be filled later...
        factory: null,
        nodeFlags: viewNodeFlags,
        rootNodeFlags: viewRootNodeFlags,
        nodeMatchedQueries: viewMatchedQueries, flags: flags,
        nodes: nodes,
        updateDirectives: updateDirectives || NOOP,
        updateRenderer: updateRenderer || NOOP, handleEvent: handleEvent,
        bindingCount: viewBindingCount,
        outputCount: viewDisposableCount, lastRenderRootNode: lastRenderRootNode
    };
}
/**
 * @param {?} node
 * @return {?}
 */
function isNgContainer(node) {
    return (node.flags & 1 /* TypeElement */) !== 0 && ((node.element)).name === null;
}
/**
 * @param {?} parent
 * @param {?} node
 * @param {?} nodeCount
 * @return {?}
 */
function validateNode(parent, node, nodeCount) {
    var /** @type {?} */ template = node.element && node.element.template;
    if (template) {
        if (!template.lastRenderRootNode) {
            throw new Error("Illegal State: Embedded templates without nodes are not allowed!");
        }
        if (template.lastRenderRootNode &&
            template.lastRenderRootNode.flags & 16777216 /* EmbeddedViews */) {
            throw new Error("Illegal State: Last root node of a template can't have embedded views, at index " + node.nodeIndex + "!");
        }
    }
    if (node.flags & 20224 /* CatProvider */) {
        var /** @type {?} */ parentFlags = parent ? parent.flags : 0;
        if ((parentFlags & 1 /* TypeElement */) === 0) {
            throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index " + node.nodeIndex + "!");
        }
    }
    if (node.query) {
        if (node.flags & 67108864 /* TypeContentQuery */ &&
            (!parent || (parent.flags & 16384 /* TypeDirective */) === 0)) {
            throw new Error("Illegal State: Content Query nodes need to be children of directives, at index " + node.nodeIndex + "!");
        }
        if (node.flags & 134217728 /* TypeViewQuery */ && parent) {
            throw new Error("Illegal State: View Query nodes have to be top level nodes, at index " + node.nodeIndex + "!");
        }
    }
    if (node.childCount) {
        var /** @type {?} */ parentEnd = parent ? parent.nodeIndex + parent.childCount : nodeCount - 1;
        if (node.nodeIndex <= parentEnd && node.nodeIndex + node.childCount > parentEnd) {
            throw new Error("Illegal State: childCount of node leads outside of parent, at index " + node.nodeIndex + "!");
        }
    }
}
/**
 * @param {?} parent
 * @param {?} anchorDef
 * @param {?} viewDef
 * @param {?=} context
 * @return {?}
 */
function createEmbeddedView(parent, anchorDef$$1, viewDef, context) {
    // embedded views are seen as siblings to the anchor, so we need
    // to get the parent of the anchor and use it as parentIndex.
    var /** @type {?} */ view = createView(parent.root, parent.renderer, parent, anchorDef$$1, viewDef);
    initView(view, parent.component, context);
    createViewNodes(view);
    return view;
}
/**
 * @param {?} root
 * @param {?} def
 * @param {?=} context
 * @return {?}
 */
function createRootView(root, def, context) {
    var /** @type {?} */ view = createView(root, root.renderer, null, null, def);
    initView(view, context, context);
    createViewNodes(view);
    return view;
}
/**
 * @param {?} parentView
 * @param {?} nodeDef
 * @param {?} viewDef
 * @param {?} hostElement
 * @return {?}
 */
function createComponentView(parentView, nodeDef, viewDef, hostElement) {
    var /** @type {?} */ rendererType = ((nodeDef.element)).componentRendererType;
    var /** @type {?} */ compRenderer;
    if (!rendererType) {
        compRenderer = parentView.root.renderer;
    }
    else {
        compRenderer = parentView.root.rendererFactory.createRenderer(hostElement, rendererType);
    }
    return createView(parentView.root, compRenderer, parentView, /** @type {?} */ ((nodeDef.element)).componentProvider, viewDef);
}
/**
 * @param {?} root
 * @param {?} renderer
 * @param {?} parent
 * @param {?} parentNodeDef
 * @param {?} def
 * @return {?}
 */
function createView(root, renderer, parent, parentNodeDef, def) {
    var /** @type {?} */ nodes = new Array(def.nodes.length);
    var /** @type {?} */ disposables = def.outputCount ? new Array(def.outputCount) : null;
    var /** @type {?} */ view = {
        def: def,
        parent: parent,
        viewContainerParent: null, parentNodeDef: parentNodeDef,
        context: null,
        component: null, nodes: nodes,
        state: 13 /* CatInit */, root: root, renderer: renderer,
        oldValues: new Array(def.bindingCount), disposables: disposables
    };
    return view;
}
/**
 * @param {?} view
 * @param {?} component
 * @param {?} context
 * @return {?}
 */
function initView(view, component, context) {
    view.component = component;
    view.context = context;
}
/**
 * @param {?} view
 * @return {?}
 */
function createViewNodes(view) {
    var /** @type {?} */ renderHost;
    if (isComponentView(view)) {
        var /** @type {?} */ hostDef = view.parentNodeDef;
        renderHost = asElementData(/** @type {?} */ ((view.parent)), /** @type {?} */ ((((hostDef)).parent)).nodeIndex).renderElement;
    }
    var /** @type {?} */ def = view.def;
    var /** @type {?} */ nodes = view.nodes;
    for (var /** @type {?} */ i = 0; i < def.nodes.length; i++) {
        var /** @type {?} */ nodeDef = def.nodes[i];
        Services.setCurrentNode(view, i);
        var /** @type {?} */ nodeData = void 0;
        switch (nodeDef.flags & 201347067 /* Types */) {
            case 1 /* TypeElement */:
                var /** @type {?} */ el = (createElement(view, renderHost, nodeDef));
                var /** @type {?} */ componentView = ((undefined));
                if (nodeDef.flags & 33554432 /* ComponentView */) {
                    var /** @type {?} */ compViewDef = resolveDefinition(/** @type {?} */ ((((nodeDef.element)).componentView)));
                    componentView = Services.createComponentView(view, nodeDef, compViewDef, el);
                }
                listenToElementOutputs(view, componentView, nodeDef, el);
                nodeData = ({
                    renderElement: el,
                    componentView: componentView,
                    viewContainer: null,
                    template: /** @type {?} */ ((nodeDef.element)).template ? createTemplateData(view, nodeDef) : undefined
                });
                if (nodeDef.flags & 16777216 /* EmbeddedViews */) {
                    nodeData.viewContainer = createViewContainerData(view, nodeDef, nodeData);
                }
                break;
            case 2 /* TypeText */:
                nodeData = (createText(view, renderHost, nodeDef));
                break;
            case 512 /* TypeClassProvider */:
            case 1024 /* TypeFactoryProvider */:
            case 2048 /* TypeUseExistingProvider */:
            case 256 /* TypeValueProvider */: {
                nodeData = nodes[i];
                if (!nodeData && !(nodeDef.flags & 4096 /* LazyProvider */)) {
                    var /** @type {?} */ instance = createProviderInstance(view, nodeDef);
                    nodeData = ({ instance: instance });
                }
                break;
            }
            case 16 /* TypePipe */: {
                var /** @type {?} */ instance = createPipeInstance(view, nodeDef);
                nodeData = ({ instance: instance });
                break;
            }
            case 16384 /* TypeDirective */: {
                nodeData = nodes[i];
                if (!nodeData) {
                    var /** @type {?} */ instance = createDirectiveInstance(view, nodeDef);
                    nodeData = ({ instance: instance });
                }
                if (nodeDef.flags & 32768 /* Component */) {
                    var /** @type {?} */ compView = asElementData(view, /** @type {?} */ ((nodeDef.parent)).nodeIndex).componentView;
                    initView(compView, nodeData.instance, nodeData.instance);
                }
                break;
            }
            case 32 /* TypePureArray */:
            case 64 /* TypePureObject */:
            case 128 /* TypePurePipe */:
                nodeData = (createPureExpression(view, nodeDef));
                break;
            case 67108864 /* TypeContentQuery */:
            case 134217728 /* TypeViewQuery */:
                nodeData = (createQuery());
                break;
            case 8 /* TypeNgContent */:
                appendNgContent(view, renderHost, nodeDef);
                // no runtime data needed for NgContent...
                nodeData = undefined;
                break;
        }
        nodes[i] = nodeData;
    }
    // Create the ViewData.nodes of component views after we created everything else,
    // so that e.g. ng-content works
    execComponentViewsAction(view, ViewAction.CreateViewNodes);
    // fill static content and view queries
    execQueriesAction(view, 67108864 /* TypeContentQuery */ | 134217728 /* TypeViewQuery */, 268435456 /* StaticQuery */, 0 /* CheckAndUpdate */);
}
/**
 * @param {?} view
 * @return {?}
 */
function checkNoChangesView(view) {
    markProjectedViewsForCheck(view);
    Services.updateDirectives(view, 1 /* CheckNoChanges */);
    execEmbeddedViewsAction(view, ViewAction.CheckNoChanges);
    Services.updateRenderer(view, 1 /* CheckNoChanges */);
    execComponentViewsAction(view, ViewAction.CheckNoChanges);
    // Note: We don't check queries for changes as we didn't do this in v2.x.
    // TODO(tbosch): investigate if we can enable the check again in v5.x with a nicer error message.
    view.state &= ~(64 /* CheckProjectedViews */ | 32 /* CheckProjectedView */);
}
/**
 * @param {?} view
 * @return {?}
 */
function checkAndUpdateView(view) {
    if (view.state & 1 /* BeforeFirstCheck */) {
        view.state &= ~1 /* BeforeFirstCheck */;
        view.state |= 2 /* FirstCheck */;
    }
    else {
        view.state &= ~2 /* FirstCheck */;
    }
    markProjectedViewsForCheck(view);
    Services.updateDirectives(view, 0 /* CheckAndUpdate */);
    execEmbeddedViewsAction(view, ViewAction.CheckAndUpdate);
    execQueriesAction(view, 67108864 /* TypeContentQuery */, 536870912 /* DynamicQuery */, 0 /* CheckAndUpdate */);
    callLifecycleHooksChildrenFirst(view, 2097152 /* AfterContentChecked */ |
        (view.state & 2 /* FirstCheck */ ? 1048576 /* AfterContentInit */ : 0));
    Services.updateRenderer(view, 0 /* CheckAndUpdate */);
    execComponentViewsAction(view, ViewAction.CheckAndUpdate);
    execQueriesAction(view, 134217728 /* TypeViewQuery */, 536870912 /* DynamicQuery */, 0 /* CheckAndUpdate */);
    callLifecycleHooksChildrenFirst(view, 8388608 /* AfterViewChecked */ |
        (view.state & 2 /* FirstCheck */ ? 4194304 /* AfterViewInit */ : 0));
    if (view.def.flags & 2 /* OnPush */) {
        view.state &= ~8 /* ChecksEnabled */;
    }
    view.state &= ~(64 /* CheckProjectedViews */ | 32 /* CheckProjectedView */);
}
/**
 * @param {?} view
 * @param {?} nodeDef
 * @param {?} argStyle
 * @param {?=} v0
 * @param {?=} v1
 * @param {?=} v2
 * @param {?=} v3
 * @param {?=} v4
 * @param {?=} v5
 * @param {?=} v6
 * @param {?=} v7
 * @param {?=} v8
 * @param {?=} v9
 * @return {?}
 */
function checkAndUpdateNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {
    if (argStyle === 0 /* Inline */) {
        return checkAndUpdateNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);
    }
    else {
        return checkAndUpdateNodeDynamic(view, nodeDef, v0);
    }
}
/**
 * @param {?} view
 * @return {?}
 */
function markProjectedViewsForCheck(view) {
    var /** @type {?} */ def = view.def;
    if (!(def.nodeFlags & 4 /* ProjectedTemplate */)) {
        return;
    }
    for (var /** @type {?} */ i = 0; i < def.nodes.length; i++) {
        var /** @type {?} */ nodeDef = def.nodes[i];
        if (nodeDef.flags & 4 /* ProjectedTemplate */) {
            var /** @type {?} */ projectedViews = asElementData(view, i).template._projectedViews;
            if (projectedViews) {
                for (var /** @type {?} */ i_1 = 0; i_1 < projectedViews.length; i_1++) {
                    var /** @type {?} */ projectedView = projectedViews[i_1];
                    projectedView.state |= 32 /* CheckProjectedView */;
                    markParentViewsForCheckProjectedViews(projectedView, view);
                }
            }
        }
        else if ((nodeDef.childFlags & 4 /* ProjectedTemplate */) === 0) {
            // a parent with leafs
            // no child is a component,
            // then skip the children
            i += nodeDef.childCount;
        }
    }
}
/**
 * @param {?} view
 * @param {?} nodeDef
 * @param {?=} v0
 * @param {?=} v1
 * @param {?=} v2
 * @param {?=} v3
 * @param {?=} v4
 * @param {?=} v5
 * @param {?=} v6
 * @param {?=} v7
 * @param {?=} v8
 * @param {?=} v9
 * @return {?}
 */
function checkAndUpdateNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {
    switch (nodeDef.flags & 201347067 /* Types */) {
        case 1 /* TypeElement */:
            return checkAndUpdateElementInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);
        case 2 /* TypeText */:
            return checkAndUpdateTextInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);
        case 16384 /* TypeDirective */:
            return checkAndUpdateDirectiveInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);
        case 32 /* TypePureArray */:
        case 64 /* TypePureObject */:
        case 128 /* TypePurePipe */:
            return checkAndUpdatePureExpressionInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);
        default:
            throw 'unreachable';
    }
}
/**
 * @param {?} view
 * @param {?} nodeDef
 * @param {?} values
 * @return {?}
 */
function checkAndUpdateNodeDynamic(view, nodeDef, values) {
    switch (nodeDef.flags & 201347067 /* Types */) {
        case 1 /* TypeElement */:
            return checkAndUpdateElementDynamic(view, nodeDef, values);
        case 2 /* TypeText */:
            return checkAndUpdateTextDynamic(view, nodeDef, values);
        case 16384 /* TypeDirective */:
            return checkAndUpdateDirectiveDynamic(view, nodeDef, values);
        case 32 /* TypePureArray */:
        case 64 /* TypePureObject */:
        case 128 /* TypePurePipe */:
            return checkAndUpdatePureExpressionDynamic(view, nodeDef, values);
        default:
            throw 'unreachable';
    }
}
/**
 * @param {?} view
 * @param {?} nodeDef
 * @param {?} argStyle
 * @param {?=} v0
 * @param {?=} v1
 * @param {?=} v2
 * @param {?=} v3
 * @param {?=} v4
 * @param {?=} v5
 * @param {?=} v6
 * @param {?=} v7
 * @param {?=} v8
 * @param {?=} v9
 * @return {?}
 */
function checkNoChangesNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {
    if (argStyle === 0 /* Inline */) {
        checkNoChangesNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);
    }
    else {
        checkNoChangesNodeDynamic(view, nodeDef, v0);
    }
    // Returning false is ok here as we would have thrown in case of a change.
    return false;
}
/**
 * @param {?} view
 * @param {?} nodeDef
 * @param {?} v0
 * @param {?} v1
 * @param {?} v2
 * @param {?} v3
 * @param {?} v4
 * @param {?} v5
 * @param {?} v6
 * @param {?} v7
 * @param {?} v8
 * @param {?} v9
 * @return {?}
 */
function checkNoChangesNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {
    var /** @type {?} */ bindLen = nodeDef.bindings.length;
    if (bindLen > 0)
        checkBindingNoChanges(view, nodeDef, 0, v0);
    if (bindLen > 1)
        checkBindingNoChanges(view, nodeDef, 1, v1);
    if (bindLen > 2)
        checkBindingNoChanges(view, nodeDef, 2, v2);
    if (bindLen > 3)
        checkBindingNoChanges(view, nodeDef, 3, v3);
    if (bindLen > 4)
        checkBindingNoChanges(view, nodeDef, 4, v4);
    if (bindLen > 5)
        checkBindingNoChanges(view, nodeDef, 5, v5);
    if (bindLen > 6)
        checkBindingNoChanges(view, nodeDef, 6, v6);
    if (bindLen > 7)
        checkBindingNoChanges(view, nodeDef, 7, v7);
    if (bindLen > 8)
        checkBindingNoChanges(view, nodeDef, 8, v8);
    if (bindLen > 9)
        checkBindingNoChanges(view, nodeDef, 9, v9);
}
/**
 * @param {?} view
 * @param {?} nodeDef
 * @param {?} values
 * @return {?}
 */
function checkNoChangesNodeDynamic(view, nodeDef, values) {
    for (var /** @type {?} */ i = 0; i < values.length; i++) {
        checkBindingNoChanges(view, nodeDef, i, values[i]);
    }
}
/**
 * Workaround https://github.com/angular/tsickle/issues/497
 * @suppress {misplacedTypeAnnotation}
 * @param {?} view
 * @param {?} nodeDef
 * @return {?}
 */
function checkNoChangesQuery(view, nodeDef) {
    var /** @type {?} */ queryList = asQueryList(view, nodeDef.nodeIndex);
    if (queryList.dirty) {
        throw expressionChangedAfterItHasBeenCheckedError(Services.createDebugContext(view, nodeDef.nodeIndex), "Query " + ((nodeDef.query)).id + " not dirty", "Query " + ((nodeDef.query)).id + " dirty", (view.state & 1 /* BeforeFirstCheck */) !== 0);
    }
}
/**
 * @param {?} view
 * @return {?}
 */
function destroyView(view) {
    if (view.state & 128 /* Destroyed */) {
        return;
    }
    execEmbeddedViewsAction(view, ViewAction.Destroy);
    execComponentViewsAction(view, ViewAction.Destroy);
    callLifecycleHooksChildrenFirst(view, 131072 /* OnDestroy */);
    if (view.disposables) {
        for (var /** @type {?} */ i = 0; i < view.disposables.length; i++) {
            view.disposables[i]();
        }
    }
    detachProjectedView(view);
    if (view.renderer.destroyNode) {
        destroyViewNodes(view);
    }
    if (isComponentView(view)) {
        view.renderer.destroy();
    }
    view.state |= 128 /* Destroyed */;
}
/**
 * @param {?} view
 * @return {?}
 */
function destroyViewNodes(view) {
    var /** @type {?} */ len = view.def.nodes.length;
    for (var /** @type {?} */ i = 0; i < len; i++) {
        var /** @type {?} */ def = view.def.nodes[i];
        if (def.flags & 1 /* TypeElement */) {
            ((view.renderer.destroyNode))(asElementData(view, i).renderElement);
        }
        else if (def.flags & 2 /* TypeText */) {
            ((view.renderer.destroyNode))(asTextData(view, i).renderText);
        }
        else if (def.flags & 67108864 /* TypeContentQuery */ || def.flags & 134217728 /* TypeViewQuery */) {
            asQueryList(view, i).destroy();
        }
    }
}
var ViewAction = {};
ViewAction.CreateViewNodes = 0;
ViewAction.CheckNoChanges = 1;
ViewAction.CheckNoChangesProjectedViews = 2;
ViewAction.CheckAndUpdate = 3;
ViewAction.CheckAndUpdateProjectedViews = 4;
ViewAction.Destroy = 5;
ViewAction[ViewAction.CreateViewNodes] = "CreateViewNodes";
ViewAction[ViewAction.CheckNoChanges] = "CheckNoChanges";
ViewAction[ViewAction.CheckNoChangesProjectedViews] = "CheckNoChangesProjectedViews";
ViewAction[ViewAction.CheckAndUpdate] = "CheckAndUpdate";
ViewAction[ViewAction.CheckAndUpdateProjectedViews] = "CheckAndUpdateProjectedViews";
ViewAction[ViewAction.Destroy] = "Destroy";
/**
 * @param {?} view
 * @param {?} action
 * @return {?}
 */
function execComponentViewsAction(view, action) {
    var /** @type {?} */ def = view.def;
    if (!(def.nodeFlags & 33554432 /* ComponentView */)) {
        return;
    }
    for (var /** @type {?} */ i = 0; i < def.nodes.length; i++) {
        var /** @type {?} */ nodeDef = def.nodes[i];
        if (nodeDef.flags & 33554432 /* ComponentView */) {
            // a leaf
            callViewAction(asElementData(view, i).componentView, action);
        }
        else if ((nodeDef.childFlags & 33554432 /* ComponentView */) === 0) {
            // a parent with leafs
            // no child is a component,
            // then skip the children
            i += nodeDef.childCount;
        }
    }
}
/**
 * @param {?} view
 * @param {?} action
 * @return {?}
 */
function execEmbeddedViewsAction(view, action) {
    var /** @type {?} */ def = view.def;
    if (!(def.nodeFlags & 16777216 /* EmbeddedViews */)) {
        return;
    }
    for (var /** @type {?} */ i = 0; i < def.nodes.length; i++) {
        var /** @type {?} */ nodeDef = def.nodes[i];
        if (nodeDef.flags & 16777216 /* EmbeddedViews */) {
            // a leaf
            var /** @type {?} */ embeddedViews = ((asElementData(view, i).viewContainer))._embeddedViews;
            for (var /** @type {?} */ k = 0; k < embeddedViews.length; k++) {
                callViewAction(embeddedViews[k], action);
            }
        }
        else if ((nodeDef.childFlags & 16777216 /* EmbeddedViews */) === 0) {
            // a parent with leafs
            // no child is a component,
            // then skip the children
            i += nodeDef.childCount;
        }
    }
}
/**
 * @param {?} view
 * @param {?} action
 * @return {?}
 */
function callViewAction(view, action) {
    var /** @type {?} */ viewState = view.state;
    switch (action) {
        case ViewAction.CheckNoChanges:
            if ((viewState & 128 /* Destroyed */) === 0) {
                if ((viewState & 12 /* CatDetectChanges */) === 12 /* CatDetectChanges */) {
                    checkNoChangesView(view);
                }
                else if (viewState & 64 /* CheckProjectedViews */) {
                    execProjectedViewsAction(view, ViewAction.CheckNoChangesProjectedViews);
                }
            }
            break;
        case ViewAction.CheckNoChangesProjectedViews:
            if ((viewState & 128 /* Destroyed */) === 0) {
                if (viewState & 32 /* CheckProjectedView */) {
                    checkNoChangesView(view);
                }
                else if (viewState & 64 /* CheckProjectedViews */) {
                    execProjectedViewsAction(view, action);
                }
            }
            break;
        case ViewAction.CheckAndUpdate:
            if ((viewState & 128 /* Destroyed */) === 0) {
                if ((viewState & 12 /* CatDetectChanges */) === 12 /* CatDetectChanges */) {
                    checkAndUpdateView(view);
                }
                else if (viewState & 64 /* CheckProjectedViews */) {
                    execProjectedViewsAction(view, ViewAction.CheckAndUpdateProjectedViews);
                }
            }
            break;
        case ViewAction.CheckAndUpdateProjectedViews:
            if ((viewState & 128 /* Destroyed */) === 0) {
                if (viewState & 32 /* CheckProjectedView */) {
                    checkAndUpdateView(view);
                }
                else if (viewState & 64 /* CheckProjectedViews */) {
                    execProjectedViewsAction(view, action);
                }
            }
            break;
        case ViewAction.Destroy:
            // Note: destroyView recurses over all views,
            // so we don't need to special case projected views here.
            destroyView(view);
            break;
        case ViewAction.CreateViewNodes:
            createViewNodes(view);
            break;
    }
}
/**
 * @param {?} view
 * @param {?} action
 * @return {?}
 */
function execProjectedViewsAction(view, action) {
    execEmbeddedViewsAction(view, action);
    execComponentViewsAction(view, action);
}
/**
 * @param {?} view
 * @param {?} queryFlags
 * @param {?} staticDynamicQueryFlag
 * @param {?} checkType
 * @return {?}
 */
function execQueriesAction(view, queryFlags, staticDynamicQueryFlag, checkType) {
    if (!(view.def.nodeFlags & queryFlags) || !(view.def.nodeFlags & staticDynamicQueryFlag)) {
        return;
    }
    var /** @type {?} */ nodeCount = view.def.nodes.length;
    for (var /** @type {?} */ i = 0; i < nodeCount; i++) {
        var /** @type {?} */ nodeDef = view.def.nodes[i];
        if ((nodeDef.flags & queryFlags) && (nodeDef.flags & staticDynamicQueryFlag)) {
            Services.setCurrentNode(view, nodeDef.nodeIndex);
            switch (checkType) {
                case 0 /* CheckAndUpdate */:
                    checkAndUpdateQuery(view, nodeDef);
                    break;
                case 1 /* CheckNoChanges */:
                    checkNoChangesQuery(view, nodeDef);
                    break;
            }
        }
        if (!(nodeDef.childFlags & queryFlags) || !(nodeDef.childFlags & staticDynamicQueryFlag)) {
            // no child has a matching query
            // then skip the children
            i += nodeDef.childCount;
        }
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var initialized = false;
/**
 * @return {?}
 */
function initServicesIfNeeded() {
    if (initialized) {
        return;
    }
    initialized = true;
    var /** @type {?} */ services = isDevMode() ? createDebugServices() : createProdServices();
    Services.setCurrentNode = services.setCurrentNode;
    Services.createRootView = services.createRootView;
    Services.createEmbeddedView = services.createEmbeddedView;
    Services.createComponentView = services.createComponentView;
    Services.createNgModuleRef = services.createNgModuleRef;
    Services.overrideProvider = services.overrideProvider;
    Services.clearProviderOverrides = services.clearProviderOverrides;
    Services.checkAndUpdateView = services.checkAndUpdateView;
    Services.checkNoChangesView = services.checkNoChangesView;
    Services.destroyView = services.destroyView;
    Services.resolveDep = resolveDep;
    Services.createDebugContext = services.createDebugContext;
    Services.handleEvent = services.handleEvent;
    Services.updateDirectives = services.updateDirectives;
    Services.updateRenderer = services.updateRenderer;
    Services.dirtyParentQueries = dirtyParentQueries;
}
/**
 * @return {?}
 */
function createProdServices() {
    return {
        setCurrentNode: function () { },
        createRootView: createProdRootView,
        createEmbeddedView: createEmbeddedView,
        createComponentView: createComponentView,
        createNgModuleRef: createNgModuleRef,
        overrideProvider: NOOP,
        clearProviderOverrides: NOOP,
        checkAndUpdateView: checkAndUpdateView,
        checkNoChangesView: checkNoChangesView,
        destroyView: destroyView,
        createDebugContext: function (view, nodeIndex) { return new DebugContext_(view, nodeIndex); },
        handleEvent: function (view, nodeIndex, eventName, event) { return view.def.handleEvent(view, nodeIndex, eventName, event); },
        updateDirectives: function (view, checkType) { return view.def.updateDirectives(checkType === 0 /* CheckAndUpdate */ ? prodCheckAndUpdateNode :
            prodCheckNoChangesNode, view); },
        updateRenderer: function (view, checkType) { return view.def.updateRenderer(checkType === 0 /* CheckAndUpdate */ ? prodCheckAndUpdateNode :
            prodCheckNoChangesNode, view); },
    };
}
/**
 * @return {?}
 */
function createDebugServices() {
    return {
        setCurrentNode: debugSetCurrentNode,
        createRootView: debugCreateRootView,
        createEmbeddedView: debugCreateEmbeddedView,
        createComponentView: debugCreateComponentView,
        createNgModuleRef: debugCreateNgModuleRef,
        overrideProvider: debugOverrideProvider,
        clearProviderOverrides: debugClearProviderOverrides,
        checkAndUpdateView: debugCheckAndUpdateView,
        checkNoChangesView: debugCheckNoChangesView,
        destroyView: debugDestroyView,
        createDebugContext: function (view, nodeIndex) { return new DebugContext_(view, nodeIndex); },
        handleEvent: debugHandleEvent,
        updateDirectives: debugUpdateDirectives,
        updateRenderer: debugUpdateRenderer,
    };
}
/**
 * @param {?} elInjector
 * @param {?} projectableNodes
 * @param {?} rootSelectorOrNode
 * @param {?} def
 * @param {?} ngModule
 * @param {?=} context
 * @return {?}
 */
function createProdRootView(elInjector, projectableNodes, rootSelectorOrNode, def, ngModule, context) {
    var /** @type {?} */ rendererFactory = ngModule.injector.get(RendererFactory2);
    return createRootView(createRootData(elInjector, ngModule, rendererFactory, projectableNodes, rootSelectorOrNode), def, context);
}
/**
 * @param {?} elInjector
 * @param {?} projectableNodes
 * @param {?} rootSelectorOrNode
 * @param {?} def
 * @param {?} ngModule
 * @param {?=} context
 * @return {?}
 */
function debugCreateRootView(elInjector, projectableNodes, rootSelectorOrNode, def, ngModule, context) {
    var /** @type {?} */ rendererFactory = ngModule.injector.get(RendererFactory2);
    var /** @type {?} */ root = createRootData(elInjector, ngModule, new DebugRendererFactory2(rendererFactory), projectableNodes, rootSelectorOrNode);
    var /** @type {?} */ defWithOverride = applyProviderOverridesToView(def);
    return callWithDebugContext(DebugAction.create, createRootView, null, [root, defWithOverride, context]);
}
/**
 * @param {?} elInjector
 * @param {?} ngModule
 * @param {?} rendererFactory
 * @param {?} projectableNodes
 * @param {?} rootSelectorOrNode
 * @return {?}
 */
function createRootData(elInjector, ngModule, rendererFactory, projectableNodes, rootSelectorOrNode) {
    var /** @type {?} */ sanitizer = ngModule.injector.get(Sanitizer);
    var /** @type {?} */ errorHandler = ngModule.injector.get(ErrorHandler);
    var /** @type {?} */ renderer = rendererFactory.createRenderer(null, null);
    return {
        ngModule: ngModule,
        injector: elInjector, projectableNodes: projectableNodes,
        selectorOrNode: rootSelectorOrNode, sanitizer: sanitizer, rendererFactory: rendererFactory, renderer: renderer, errorHandler: errorHandler
    };
}
/**
 * @param {?} parentView
 * @param {?} anchorDef
 * @param {?} viewDef
 * @param {?=} context
 * @return {?}
 */
function debugCreateEmbeddedView(parentView, anchorDef, viewDef$$1, context) {
    var /** @type {?} */ defWithOverride = applyProviderOverridesToView(viewDef$$1);
    return callWithDebugContext(DebugAction.create, createEmbeddedView, null, [parentView, anchorDef, defWithOverride, context]);
}
/**
 * @param {?} parentView
 * @param {?} nodeDef
 * @param {?} viewDef
 * @param {?} hostElement
 * @return {?}
 */
function debugCreateComponentView(parentView, nodeDef, viewDef$$1, hostElement) {
    var /** @type {?} */ defWithOverride = applyProviderOverridesToView(viewDef$$1);
    return callWithDebugContext(DebugAction.create, createComponentView, null, [parentView, nodeDef, defWithOverride, hostElement]);
}
/**
 * @param {?} moduleType
 * @param {?} parentInjector
 * @param {?} bootstrapComponents
 * @param {?} def
 * @return {?}
 */
function debugCreateNgModuleRef(moduleType, parentInjector, bootstrapComponents, def) {
    var /** @type {?} */ defWithOverride = applyProviderOverridesToNgModule(def);
    return createNgModuleRef(moduleType, parentInjector, bootstrapComponents, defWithOverride);
}
var providerOverrides = new Map();
/**
 * @param {?} override
 * @return {?}
 */
function debugOverrideProvider(override) {
    providerOverrides.set(override.token, override);
}
/**
 * @return {?}
 */
function debugClearProviderOverrides() {
    providerOverrides.clear();
}
/**
 * @param {?} def
 * @return {?}
 */
function applyProviderOverridesToView(def) {
    if (providerOverrides.size === 0) {
        return def;
    }
    var /** @type {?} */ elementIndicesWithOverwrittenProviders = findElementIndicesWithOverwrittenProviders(def);
    if (elementIndicesWithOverwrittenProviders.length === 0) {
        return def;
    }
    // clone the whole view definition,
    // as it maintains references between the nodes that are hard to update.
    def = ((def.factory))(function () { return NOOP; });
    for (var /** @type {?} */ i = 0; i < elementIndicesWithOverwrittenProviders.length; i++) {
        applyProviderOverridesToElement(def, elementIndicesWithOverwrittenProviders[i]);
    }
    return def;
    /**
     * @param {?} def
     * @return {?}
     */
    function findElementIndicesWithOverwrittenProviders(def) {
        var /** @type {?} */ elIndicesWithOverwrittenProviders = [];
        var /** @type {?} */ lastElementDef = null;
        for (var /** @type {?} */ i = 0; i < def.nodes.length; i++) {
            var /** @type {?} */ nodeDef = def.nodes[i];
            if (nodeDef.flags & 1 /* TypeElement */) {
                lastElementDef = nodeDef;
            }
            if (lastElementDef && nodeDef.flags & 3840 /* CatProviderNoDirective */ &&
                providerOverrides.has(/** @type {?} */ ((nodeDef.provider)).token)) {
                elIndicesWithOverwrittenProviders.push(/** @type {?} */ ((lastElementDef)).nodeIndex);
                lastElementDef = null;
            }
        }
        return elIndicesWithOverwrittenProviders;
    }
    /**
     * @param {?} viewDef
     * @param {?} elIndex
     * @return {?}
     */
    function applyProviderOverridesToElement(viewDef$$1, elIndex) {
        for (var /** @type {?} */ i = elIndex + 1; i < viewDef$$1.nodes.length; i++) {
            var /** @type {?} */ nodeDef = viewDef$$1.nodes[i];
            if (nodeDef.flags & 1 /* TypeElement */) {
                // stop at the next element
                return;
            }
            if (nodeDef.flags & 3840 /* CatProviderNoDirective */) {
                var /** @type {?} */ provider = ((nodeDef.provider));
                var /** @type {?} */ override = providerOverrides.get(provider.token);
                if (override) {
                    nodeDef.flags = (nodeDef.flags & ~3840 /* CatProviderNoDirective */) | override.flags;
                    provider.deps = splitDepsDsl(override.deps);
                    provider.value = override.value;
                }
            }
        }
    }
}
/**
 * @param {?} def
 * @return {?}
 */
function applyProviderOverridesToNgModule(def) {
    var _a = calcHasOverrides(def), hasOverrides = _a.hasOverrides, hasDeprecatedOverrides = _a.hasDeprecatedOverrides;
    if (!hasOverrides) {
        return def;
    }
    // clone the whole view definition,
    // as it maintains references between the nodes that are hard to update.
    def = ((def.factory))(function () { return NOOP; });
    applyProviderOverrides(def);
    return def;
    /**
     * @param {?} def
     * @return {?}
     */
    function calcHasOverrides(def) {
        var /** @type {?} */ hasOverrides = false;
        var /** @type {?} */ hasDeprecatedOverrides = false;
        if (providerOverrides.size === 0) {
            return { hasOverrides: hasOverrides, hasDeprecatedOverrides: hasDeprecatedOverrides };
        }
        def.providers.forEach(function (node) {
            var /** @type {?} */ override = providerOverrides.get(node.token);
            if ((node.flags & 3840 /* CatProviderNoDirective */) && override) {
                hasOverrides = true;
                hasDeprecatedOverrides = hasDeprecatedOverrides || override.deprecatedBehavior;
            }
        });
        return { hasOverrides: hasOverrides, hasDeprecatedOverrides: hasDeprecatedOverrides };
    }
    /**
     * @param {?} def
     * @return {?}
     */
    function applyProviderOverrides(def) {
        for (var /** @type {?} */ i = 0; i < def.providers.length; i++) {
            var /** @type {?} */ provider = def.providers[i];
            if (hasDeprecatedOverrides) {
                // We had a bug where me made
                // all providers lazy. Keep this logic behind a flag
                // for migrating existing users.
                provider.flags |= 4096 /* LazyProvider */;
            }
            var /** @type {?} */ override = providerOverrides.get(provider.token);
            if (override) {
                provider.flags = (provider.flags & ~3840 /* CatProviderNoDirective */) | override.flags;
                provider.deps = splitDepsDsl(override.deps);
                provider.value = override.value;
            }
        }
    }
}
/**
 * @param {?} view
 * @param {?} checkIndex
 * @param {?} argStyle
 * @param {?=} v0
 * @param {?=} v1
 * @param {?=} v2
 * @param {?=} v3
 * @param {?=} v4
 * @param {?=} v5
 * @param {?=} v6
 * @param {?=} v7
 * @param {?=} v8
 * @param {?=} v9
 * @return {?}
 */
function prodCheckAndUpdateNode(view, checkIndex, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {
    var /** @type {?} */ nodeDef = view.def.nodes[checkIndex];
    checkAndUpdateNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);
    return (nodeDef.flags & 224 /* CatPureExpression */) ?
        asPureExpressionData(view, checkIndex).value :
        undefined;
}
/**
 * @param {?} view
 * @param {?} checkIndex
 * @param {?} argStyle
 * @param {?=} v0
 * @param {?=} v1
 * @param {?=} v2
 * @param {?=} v3
 * @param {?=} v4
 * @param {?=} v5
 * @param {?=} v6
 * @param {?=} v7
 * @param {?=} v8
 * @param {?=} v9
 * @return {?}
 */
function prodCheckNoChangesNode(view, checkIndex, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9) {
    var /** @type {?} */ nodeDef = view.def.nodes[checkIndex];
    checkNoChangesNode(view, nodeDef, argStyle, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);
    return (nodeDef.flags & 224 /* CatPureExpression */) ?
        asPureExpressionData(view, checkIndex).value :
        undefined;
}
/**
 * @param {?} view
 * @return {?}
 */
function debugCheckAndUpdateView(view) {
    return callWithDebugContext(DebugAction.detectChanges, checkAndUpdateView, null, [view]);
}
/**
 * @param {?} view
 * @return {?}
 */
function debugCheckNoChangesView(view) {
    return callWithDebugContext(DebugAction.checkNoChanges, checkNoChangesView, null, [view]);
}
/**
 * @param {?} view
 * @return {?}
 */
function debugDestroyView(view) {
    return callWithDebugContext(DebugAction.destroy, destroyView, null, [view]);
}
var DebugAction = {};
DebugAction.create = 0;
DebugAction.detectChanges = 1;
DebugAction.checkNoChanges = 2;
DebugAction.destroy = 3;
DebugAction.handleEvent = 4;
DebugAction[DebugAction.create] = "create";
DebugAction[DebugAction.detectChanges] = "detectChanges";
DebugAction[DebugAction.checkNoChanges] = "checkNoChanges";
DebugAction[DebugAction.destroy] = "destroy";
DebugAction[DebugAction.handleEvent] = "handleEvent";
var _currentAction;
var _currentView;
var _currentNodeIndex;
/**
 * @param {?} view
 * @param {?} nodeIndex
 * @return {?}
 */
function debugSetCurrentNode(view, nodeIndex) {
    _currentView = view;
    _currentNodeIndex = nodeIndex;
}
/**
 * @param {?} view
 * @param {?} nodeIndex
 * @param {?} eventName
 * @param {?} event
 * @return {?}
 */
function debugHandleEvent(view, nodeIndex, eventName, event) {
    debugSetCurrentNode(view, nodeIndex);
    return callWithDebugContext(DebugAction.handleEvent, view.def.handleEvent, null, [view, nodeIndex, eventName, event]);
}
/**
 * @param {?} view
 * @param {?} checkType
 * @return {?}
 */
function debugUpdateDirectives(view, checkType) {
    if (view.state & 128 /* Destroyed */) {
        throw viewDestroyedError(DebugAction[_currentAction]);
    }
    debugSetCurrentNode(view, nextDirectiveWithBinding(view, 0));
    return view.def.updateDirectives(debugCheckDirectivesFn, view);
    /**
     * @param {?} view
     * @param {?} nodeIndex
     * @param {?} argStyle
     * @param {...?} values
     * @return {?}
     */
    function debugCheckDirectivesFn(view, nodeIndex, argStyle) {
        var values = [];
        for (var _i = 3; _i < arguments.length; _i++) {
            values[_i - 3] = arguments[_i];
        }
        var /** @type {?} */ nodeDef = view.def.nodes[nodeIndex];
        if (checkType === 0 /* CheckAndUpdate */) {
            debugCheckAndUpdateNode(view, nodeDef, argStyle, values);
        }
        else {
            debugCheckNoChangesNode(view, nodeDef, argStyle, values);
        }
        if (nodeDef.flags & 16384 /* TypeDirective */) {
            debugSetCurrentNode(view, nextDirectiveWithBinding(view, nodeIndex));
        }
        return (nodeDef.flags & 224 /* CatPureExpression */) ?
            asPureExpressionData(view, nodeDef.nodeIndex).value :
            undefined;
    }
}
/**
 * @param {?} view
 * @param {?} checkType
 * @return {?}
 */
function debugUpdateRenderer(view, checkType) {
    if (view.state & 128 /* Destroyed */) {
        throw viewDestroyedError(DebugAction[_currentAction]);
    }
    debugSetCurrentNode(view, nextRenderNodeWithBinding(view, 0));
    return view.def.updateRenderer(debugCheckRenderNodeFn, view);
    /**
     * @param {?} view
     * @param {?} nodeIndex
     * @param {?} argStyle
     * @param {...?} values
     * @return {?}
     */
    function debugCheckRenderNodeFn(view, nodeIndex, argStyle) {
        var values = [];
        for (var _i = 3; _i < arguments.length; _i++) {
            values[_i - 3] = arguments[_i];
        }
        var /** @type {?} */ nodeDef = view.def.nodes[nodeIndex];
        if (checkType === 0 /* CheckAndUpdate */) {
            debugCheckAndUpdateNode(view, nodeDef, argStyle, values);
        }
        else {
            debugCheckNoChangesNode(view, nodeDef, argStyle, values);
        }
        if (nodeDef.flags & 3 /* CatRenderNode */) {
            debugSetCurrentNode(view, nextRenderNodeWithBinding(view, nodeIndex));
        }
        return (nodeDef.flags & 224 /* CatPureExpression */) ?
            asPureExpressionData(view, nodeDef.nodeIndex).value :
            undefined;
    }
}
/**
 * @param {?} view
 * @param {?} nodeDef
 * @param {?} argStyle
 * @param {?} givenValues
 * @return {?}
 */
function debugCheckAndUpdateNode(view, nodeDef, argStyle, givenValues) {
    var /** @type {?} */ changed = ((checkAndUpdateNode)).apply(void 0, [view, nodeDef, argStyle].concat(givenValues));
    if (changed) {
        var /** @type {?} */ values = argStyle === 1 /* Dynamic */ ? givenValues[0] : givenValues;
        if (nodeDef.flags & 16384 /* TypeDirective */) {
            var /** @type {?} */ bindingValues = {};
            for (var /** @type {?} */ i = 0; i < nodeDef.bindings.length; i++) {
                var /** @type {?} */ binding = nodeDef.bindings[i];
                var /** @type {?} */ value = values[i];
                if (binding.flags & 8 /* TypeProperty */) {
                    bindingValues[normalizeDebugBindingName(/** @type {?} */ ((binding.nonMinifiedName)))] =
                        normalizeDebugBindingValue(value);
                }
            }
            var /** @type {?} */ elDef = ((nodeDef.parent));
            var /** @type {?} */ el = asElementData(view, elDef.nodeIndex).renderElement;
            if (!((elDef.element)).name) {
                // a comment.
                view.renderer.setValue(el, "bindings=" + JSON.stringify(bindingValues, null, 2));
            }
            else {
                // a regular element.
                for (var /** @type {?} */ attr in bindingValues) {
                    var /** @type {?} */ value = bindingValues[attr];
                    if (value != null) {
                        view.renderer.setAttribute(el, attr, value);
                    }
                    else {
                        view.renderer.removeAttribute(el, attr);
                    }
                }
            }
        }
    }
}
/**
 * @param {?} view
 * @param {?} nodeDef
 * @param {?} argStyle
 * @param {?} values
 * @return {?}
 */
function debugCheckNoChangesNode(view, nodeDef, argStyle, values) {
    ((checkNoChangesNode)).apply(void 0, [view, nodeDef, argStyle].concat(values));
}
/**
 * @param {?} name
 * @return {?}
 */
function normalizeDebugBindingName(name) {
    // Attribute names with `$` (eg `x-y$`) are valid per spec, but unsupported by some browsers
    name = camelCaseToDashCase(name.replace(/[$@]/g, '_'));
    return "ng-reflect-" + name;
}
var CAMEL_CASE_REGEXP = /([A-Z])/g;
/**
 * @param {?} input
 * @return {?}
 */
function camelCaseToDashCase(input) {
    return input.replace(CAMEL_CASE_REGEXP, function () {
        var m = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            m[_i] = arguments[_i];
        }
        return '-' + m[1].toLowerCase();
    });
}
/**
 * @param {?} value
 * @return {?}
 */
function normalizeDebugBindingValue(value) {
    try {
        // Limit the size of the value as otherwise the DOM just gets polluted.
        return value != null ? value.toString().slice(0, 30) : value;
    }
    catch (e) {
        return '[ERROR] Exception while trying to serialize the value';
    }
}
/**
 * @param {?} view
 * @param {?} nodeIndex
 * @return {?}
 */
function nextDirectiveWithBinding(view, nodeIndex) {
    for (var /** @type {?} */ i = nodeIndex; i < view.def.nodes.length; i++) {
        var /** @type {?} */ nodeDef = view.def.nodes[i];
        if (nodeDef.flags & 16384 /* TypeDirective */ && nodeDef.bindings && nodeDef.bindings.length) {
            return i;
        }
    }
    return null;
}
/**
 * @param {?} view
 * @param {?} nodeIndex
 * @return {?}
 */
function nextRenderNodeWithBinding(view, nodeIndex) {
    for (var /** @type {?} */ i = nodeIndex; i < view.def.nodes.length; i++) {
        var /** @type {?} */ nodeDef = view.def.nodes[i];
        if ((nodeDef.flags & 3 /* CatRenderNode */) && nodeDef.bindings && nodeDef.bindings.length) {
            return i;
        }
    }
    return null;
}
var DebugContext_ = (function () {
    /**
     * @param {?} view
     * @param {?} nodeIndex
     */
    function DebugContext_(view, nodeIndex) {
        this.view = view;
        this.nodeIndex = nodeIndex;
        if (nodeIndex == null) {
            this.nodeIndex = nodeIndex = 0;
        }
        this.nodeDef = view.def.nodes[nodeIndex];
        var elDef = this.nodeDef;
        var elView = view;
        while (elDef && (elDef.flags & 1 /* TypeElement */) === 0) {
            elDef = elDef.parent;
        }
        if (!elDef) {
            while (!elDef && elView) {
                elDef = viewParentEl(elView);
                elView = elView.parent;
            }
        }
        this.elDef = elDef;
        this.elView = elView;
    }
    Object.defineProperty(DebugContext_.prototype, "elOrCompView", {
        /**
         * @return {?}
         */
        get: function () {
            // Has to be done lazily as we use the DebugContext also during creation of elements...
            return asElementData(this.elView, this.elDef.nodeIndex).componentView || this.view;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DebugContext_.prototype, "injector", {
        /**
         * @return {?}
         */
        get: function () { return createInjector(this.elView, this.elDef); },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DebugContext_.prototype, "component", {
        /**
         * @return {?}
         */
        get: function () { return this.elOrCompView.component; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DebugContext_.prototype, "context", {
        /**
         * @return {?}
         */
        get: function () { return this.elOrCompView.context; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DebugContext_.prototype, "providerTokens", {
        /**
         * @return {?}
         */
        get: function () {
            var /** @type {?} */ tokens = [];
            if (this.elDef) {
                for (var /** @type {?} */ i = this.elDef.nodeIndex + 1; i <= this.elDef.nodeIndex + this.elDef.childCount; i++) {
                    var /** @type {?} */ childDef = this.elView.def.nodes[i];
                    if (childDef.flags & 20224 /* CatProvider */) {
                        tokens.push(/** @type {?} */ ((childDef.provider)).token);
                    }
                    i += childDef.childCount;
                }
            }
            return tokens;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DebugContext_.prototype, "references", {
        /**
         * @return {?}
         */
        get: function () {
            var /** @type {?} */ references = {};
            if (this.elDef) {
                collectReferences(this.elView, this.elDef, references);
                for (var /** @type {?} */ i = this.elDef.nodeIndex + 1; i <= this.elDef.nodeIndex + this.elDef.childCount; i++) {
                    var /** @type {?} */ childDef = this.elView.def.nodes[i];
                    if (childDef.flags & 20224 /* CatProvider */) {
                        collectReferences(this.elView, childDef, references);
                    }
                    i += childDef.childCount;
                }
            }
            return references;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DebugContext_.prototype, "componentRenderElement", {
        /**
         * @return {?}
         */
        get: function () {
            var /** @type {?} */ elData = findHostElement(this.elOrCompView);
            return elData ? elData.renderElement : undefined;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DebugContext_.prototype, "renderNode", {
        /**
         * @return {?}
         */
        get: function () {
            return this.nodeDef.flags & 2 /* TypeText */ ? renderNode(this.view, this.nodeDef) :
                renderNode(this.elView, this.elDef);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} console
     * @param {...?} values
     * @return {?}
     */
    DebugContext_.prototype.logError = function (console) {
        var values = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            values[_i - 1] = arguments[_i];
        }
        var /** @type {?} */ logViewDef;
        var /** @type {?} */ logNodeIndex;
        if (this.nodeDef.flags & 2 /* TypeText */) {
            logViewDef = this.view.def;
            logNodeIndex = this.nodeDef.nodeIndex;
        }
        else {
            logViewDef = this.elView.def;
            logNodeIndex = this.elDef.nodeIndex;
        }
        // Note: we only generate a log function for text and element nodes
        // to make the generated code as small as possible.
        var /** @type {?} */ renderNodeIndex = getRenderNodeIndex(logViewDef, logNodeIndex);
        var /** @type {?} */ currRenderNodeIndex = -1;
        var /** @type {?} */ nodeLogger = function () {
            currRenderNodeIndex++;
            if (currRenderNodeIndex === renderNodeIndex) {
                return (_a = console.error).bind.apply(_a, [console].concat(values));
            }
            else {
                return NOOP;
            }
            var _a;
        }; /** @type {?} */
        ((logViewDef.factory))(nodeLogger);
        if (currRenderNodeIndex < renderNodeIndex) {
            console.error('Illegal state: the ViewDefinitionFactory did not call the logger!');
            console.error.apply(console, values);
        }
    };
    return DebugContext_;
}());
/**
 * @param {?} viewDef
 * @param {?} nodeIndex
 * @return {?}
 */
function getRenderNodeIndex(viewDef$$1, nodeIndex) {
    var /** @type {?} */ renderNodeIndex = -1;
    for (var /** @type {?} */ i = 0; i <= nodeIndex; i++) {
        var /** @type {?} */ nodeDef = viewDef$$1.nodes[i];
        if (nodeDef.flags & 3 /* CatRenderNode */) {
            renderNodeIndex++;
        }
    }
    return renderNodeIndex;
}
/**
 * @param {?} view
 * @return {?}
 */
function findHostElement(view) {
    while (view && !isComponentView(view)) {
        view = ((view.parent));
    }
    if (view.parent) {
        return asElementData(view.parent, /** @type {?} */ ((viewParentEl(view))).nodeIndex);
    }
    return null;
}
/**
 * @param {?} view
 * @param {?} nodeDef
 * @param {?} references
 * @return {?}
 */
function collectReferences(view, nodeDef, references) {
    for (var /** @type {?} */ refName in nodeDef.references) {
        references[refName] = getQueryValue(view, nodeDef, nodeDef.references[refName]);
    }
}
/**
 * @param {?} action
 * @param {?} fn
 * @param {?} self
 * @param {?} args
 * @return {?}
 */
function callWithDebugContext(action, fn, self, args) {
    var /** @type {?} */ oldAction = _currentAction;
    var /** @type {?} */ oldView = _currentView;
    var /** @type {?} */ oldNodeIndex = _currentNodeIndex;
    try {
        _currentAction = action;
        var /** @type {?} */ result = fn.apply(self, args);
        _currentView = oldView;
        _currentNodeIndex = oldNodeIndex;
        _currentAction = oldAction;
        return result;
    }
    catch (e) {
        if (isViewDebugError(e) || !_currentView) {
            throw e;
        }
        throw viewWrappedDebugError(e, /** @type {?} */ ((getCurrentDebugContext())));
    }
}
/**
 * @return {?}
 */
function getCurrentDebugContext() {
    return _currentView ? new DebugContext_(_currentView, _currentNodeIndex) : null;
}
var DebugRendererFactory2 = (function () {
    /**
     * @param {?} delegate
     */
    function DebugRendererFactory2(delegate) {
        this.delegate = delegate;
    }
    /**
     * @param {?} element
     * @param {?} renderData
     * @return {?}
     */
    DebugRendererFactory2.prototype.createRenderer = function (element, renderData) {
        return new DebugRenderer2(this.delegate.createRenderer(element, renderData));
    };
    /**
     * @return {?}
     */
    DebugRendererFactory2.prototype.begin = function () {
        if (this.delegate.begin) {
            this.delegate.begin();
        }
    };
    /**
     * @return {?}
     */
    DebugRendererFactory2.prototype.end = function () {
        if (this.delegate.end) {
            this.delegate.end();
        }
    };
    /**
     * @return {?}
     */
    DebugRendererFactory2.prototype.whenRenderingDone = function () {
        if (this.delegate.whenRenderingDone) {
            return this.delegate.whenRenderingDone();
        }
        return Promise.resolve(null);
    };
    return DebugRendererFactory2;
}());
var DebugRenderer2 = (function () {
    /**
     * @param {?} delegate
     */
    function DebugRenderer2(delegate) {
        this.delegate = delegate;
    }
    Object.defineProperty(DebugRenderer2.prototype, "data", {
        /**
         * @return {?}
         */
        get: function () { return this.delegate.data; },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} node
     * @return {?}
     */
    DebugRenderer2.prototype.destroyNode = function (node) {
        removeDebugNodeFromIndex(/** @type {?} */ ((getDebugNode(node))));
        if (this.delegate.destroyNode) {
            this.delegate.destroyNode(node);
        }
    };
    /**
     * @return {?}
     */
    DebugRenderer2.prototype.destroy = function () { this.delegate.destroy(); };
    /**
     * @param {?} name
     * @param {?=} namespace
     * @return {?}
     */
    DebugRenderer2.prototype.createElement = function (name, namespace) {
        var /** @type {?} */ el = this.delegate.createElement(name, namespace);
        var /** @type {?} */ debugCtx = getCurrentDebugContext();
        if (debugCtx) {
            var /** @type {?} */ debugEl = new DebugElement(el, null, debugCtx);
            debugEl.name = name;
            indexDebugNode(debugEl);
        }
        return el;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    DebugRenderer2.prototype.createComment = function (value) {
        var /** @type {?} */ comment = this.delegate.createComment(value);
        var /** @type {?} */ debugCtx = getCurrentDebugContext();
        if (debugCtx) {
            indexDebugNode(new DebugNode(comment, null, debugCtx));
        }
        return comment;
    };
    /**
     * @param {?} value
     * @return {?}
     */
    DebugRenderer2.prototype.createText = function (value) {
        var /** @type {?} */ text = this.delegate.createText(value);
        var /** @type {?} */ debugCtx = getCurrentDebugContext();
        if (debugCtx) {
            indexDebugNode(new DebugNode(text, null, debugCtx));
        }
        return text;
    };
    /**
     * @param {?} parent
     * @param {?} newChild
     * @return {?}
     */
    DebugRenderer2.prototype.appendChild = function (parent, newChild) {
        var /** @type {?} */ debugEl = getDebugNode(parent);
        var /** @type {?} */ debugChildEl = getDebugNode(newChild);
        if (debugEl && debugChildEl && debugEl instanceof DebugElement) {
            debugEl.addChild(debugChildEl);
        }
        this.delegate.appendChild(parent, newChild);
    };
    /**
     * @param {?} parent
     * @param {?} newChild
     * @param {?} refChild
     * @return {?}
     */
    DebugRenderer2.prototype.insertBefore = function (parent, newChild, refChild) {
        var /** @type {?} */ debugEl = getDebugNode(parent);
        var /** @type {?} */ debugChildEl = getDebugNode(newChild);
        var /** @type {?} */ debugRefEl = ((getDebugNode(refChild)));
        if (debugEl && debugChildEl && debugEl instanceof DebugElement) {
            debugEl.insertBefore(debugRefEl, debugChildEl);
        }
        this.delegate.insertBefore(parent, newChild, refChild);
    };
    /**
     * @param {?} parent
     * @param {?} oldChild
     * @return {?}
     */
    DebugRenderer2.prototype.removeChild = function (parent, oldChild) {
        var /** @type {?} */ debugEl = getDebugNode(parent);
        var /** @type {?} */ debugChildEl = getDebugNode(oldChild);
        if (debugEl && debugChildEl && debugEl instanceof DebugElement) {
            debugEl.removeChild(debugChildEl);
        }
        this.delegate.removeChild(parent, oldChild);
    };
    /**
     * @param {?} selectorOrNode
     * @return {?}
     */
    DebugRenderer2.prototype.selectRootElement = function (selectorOrNode) {
        var /** @type {?} */ el = this.delegate.selectRootElement(selectorOrNode);
        var /** @type {?} */ debugCtx = getCurrentDebugContext();
        if (debugCtx) {
            indexDebugNode(new DebugElement(el, null, debugCtx));
        }
        return el;
    };
    /**
     * @param {?} el
     * @param {?} name
     * @param {?} value
     * @param {?=} namespace
     * @return {?}
     */
    DebugRenderer2.prototype.setAttribute = function (el, name, value, namespace) {
        var /** @type {?} */ debugEl = getDebugNode(el);
        if (debugEl && debugEl instanceof DebugElement) {
            var /** @type {?} */ fullName = namespace ? namespace + ':' + name : name;
            debugEl.attributes[fullName] = value;
        }
        this.delegate.setAttribute(el, name, value, namespace);
    };
    /**
     * @param {?} el
     * @param {?} name
     * @param {?=} namespace
     * @return {?}
     */
    DebugRenderer2.prototype.removeAttribute = function (el, name, namespace) {
        var /** @type {?} */ debugEl = getDebugNode(el);
        if (debugEl && debugEl instanceof DebugElement) {
            var /** @type {?} */ fullName = namespace ? namespace + ':' + name : name;
            debugEl.attributes[fullName] = null;
        }
        this.delegate.removeAttribute(el, name, namespace);
    };
    /**
     * @param {?} el
     * @param {?} name
     * @return {?}
     */
    DebugRenderer2.prototype.addClass = function (el, name) {
        var /** @type {?} */ debugEl = getDebugNode(el);
        if (debugEl && debugEl instanceof DebugElement) {
            debugEl.classes[name] = true;
        }
        this.delegate.addClass(el, name);
    };
    /**
     * @param {?} el
     * @param {?} name
     * @return {?}
     */
    DebugRenderer2.prototype.removeClass = function (el, name) {
        var /** @type {?} */ debugEl = getDebugNode(el);
        if (debugEl && debugEl instanceof DebugElement) {
            debugEl.classes[name] = false;
        }
        this.delegate.removeClass(el, name);
    };
    /**
     * @param {?} el
     * @param {?} style
     * @param {?} value
     * @param {?} flags
     * @return {?}
     */
    DebugRenderer2.prototype.setStyle = function (el, style, value, flags) {
        var /** @type {?} */ debugEl = getDebugNode(el);
        if (debugEl && debugEl instanceof DebugElement) {
            debugEl.styles[style] = value;
        }
        this.delegate.setStyle(el, style, value, flags);
    };
    /**
     * @param {?} el
     * @param {?} style
     * @param {?} flags
     * @return {?}
     */
    DebugRenderer2.prototype.removeStyle = function (el, style, flags) {
        var /** @type {?} */ debugEl = getDebugNode(el);
        if (debugEl && debugEl instanceof DebugElement) {
            debugEl.styles[style] = null;
        }
        this.delegate.removeStyle(el, style, flags);
    };
    /**
     * @param {?} el
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    DebugRenderer2.prototype.setProperty = function (el, name, value) {
        var /** @type {?} */ debugEl = getDebugNode(el);
        if (debugEl && debugEl instanceof DebugElement) {
            debugEl.properties[name] = value;
        }
        this.delegate.setProperty(el, name, value);
    };
    /**
     * @param {?} target
     * @param {?} eventName
     * @param {?} callback
     * @return {?}
     */
    DebugRenderer2.prototype.listen = function (target, eventName, callback) {
        if (typeof target !== 'string') {
            var /** @type {?} */ debugEl = getDebugNode(target);
            if (debugEl) {
                debugEl.listeners.push(new EventListener(eventName, callback));
            }
        }
        return this.delegate.listen(target, eventName, callback);
    };
    /**
     * @param {?} node
     * @return {?}
     */
    DebugRenderer2.prototype.parentNode = function (node) { return this.delegate.parentNode(node); };
    /**
     * @param {?} node
     * @return {?}
     */
    DebugRenderer2.prototype.nextSibling = function (node) { return this.delegate.nextSibling(node); };
    /**
     * @param {?} node
     * @param {?} value
     * @return {?}
     */
    DebugRenderer2.prototype.setValue = function (node, value) { return this.delegate.setValue(node, value); };
    return DebugRenderer2;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} override
 * @return {?}
 */
function overrideProvider(override) {
    initServicesIfNeeded();
    return Services.overrideProvider(override);
}
/**
 * @return {?}
 */
function clearProviderOverrides() {
    initServicesIfNeeded();
    return Services.clearProviderOverrides();
}
/**
 * @param {?} ngModuleType
 * @param {?} bootstrapComponents
 * @param {?} defFactory
 * @return {?}
 */
function createNgModuleFactory(ngModuleType, bootstrapComponents, defFactory) {
    return new NgModuleFactory_(ngModuleType, bootstrapComponents, defFactory);
}
var NgModuleFactory_ = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](NgModuleFactory_, _super);
    /**
     * @param {?} moduleType
     * @param {?} _bootstrapComponents
     * @param {?} _ngModuleDefFactory
     */
    function NgModuleFactory_(moduleType, _bootstrapComponents, _ngModuleDefFactory) {
        var _this = 
        // Attention: this ctor is called as top level function.
        // Putting any logic in here will destroy closure tree shaking!
        _super.call(this) || this;
        _this.moduleType = moduleType;
        _this._bootstrapComponents = _bootstrapComponents;
        _this._ngModuleDefFactory = _ngModuleDefFactory;
        return _this;
    }
    /**
     * @param {?} parentInjector
     * @return {?}
     */
    NgModuleFactory_.prototype.create = function (parentInjector) {
        initServicesIfNeeded();
        var /** @type {?} */ def = resolveDefinition(this._ngModuleDefFactory);
        return Services.createNgModuleRef(this.moduleType, parentInjector || Injector.NULL, this._bootstrapComponents, def);
    };
    return NgModuleFactory_;
}(NgModuleFactory));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@experimental Animation support is experimental.
 */
/**
 * `trigger` is an animation-specific function that is designed to be used inside of Angular's
 * animation DSL language. If this information is new, please navigate to the
 * {\@link Component#animations component animations metadata page} to gain a better
 * understanding of how animations in Angular are used.
 *
 * `trigger` Creates an animation trigger which will a list of {\@link state state} and
 * {\@link transition transition} entries that will be evaluated when the expression
 * bound to the trigger changes.
 *
 * Triggers are registered within the component annotation data under the
 * {\@link Component#animations animations section}. An animation trigger can be placed on an element
 * within a template by referencing the name of the trigger followed by the expression value that
 * the
 * trigger is bound to (in the form of `[\@triggerName]="expression"`.
 *
 * ### Usage
 *
 * `trigger` will create an animation trigger reference based on the provided `name` value. The
 * provided `animation` value is expected to be an array consisting of {\@link state state} and
 * {\@link transition transition} declarations.
 *
 * ```typescript
 * \@Component({
 *   selector: 'my-component',
 *   templateUrl: 'my-component-tpl.html',
 *   animations: [
 *     trigger("myAnimationTrigger", [
 *       state(...),
 *       state(...),
 *       transition(...),
 *       transition(...)
 *     ])
 *   ]
 * })
 * class MyComponent {
 *   myStatusExp = "something";
 * }
 * ```
 *
 * The template associated with this component will make use of the `myAnimationTrigger` animation
 * trigger by binding to an element within its template code.
 *
 * ```html
 * <!-- somewhere inside of my-component-tpl.html -->
 * <div [\@myAnimationTrigger]="myStatusExp">...</div>
 * ```
 *
 * ## Disable Animations
 * A special animation control binding called `\@.disabled` can be placed on an element which will
 * then disable animations for any inner animation triggers situated within the element as well as
 * any animations on the element itself.
 *
 * When true, the `\@.disabled` binding will prevent all animations from rendering. The example
 * below shows how to use this feature:
 *
 * ```ts
 * \@Component({
 *   selector: 'my-component',
 *   template: `
 *     <div [\@.disabled]="isDisabled">
 *       <div [\@childAnimation]="exp"></div>
 *     </div>
 *   `,
 *   animations: [
 *     trigger("childAnimation", [
 *       // ...
 *     ])
 *   ]
 * })
 * class MyComponent {
 *   isDisabled = true;
 *   exp = '...';
 * }
 * ```
 *
 * The `\@childAnimation` trigger will not animate because `\@.disabled` prevents it from happening
 * (when true).
 *
 * Note that `\@.disbled` will only disable all animations (this means any animations running on
 * the same element will also be disabled).
 *
 * ### Disabling Animations Application-wide
 * When an area of the template is set to have animations disabled, **all** inner components will
 * also have their animations disabled as well. This means that all animations for an angular
 * application can be disabled by placing a host binding set on `\@.disabled` on the topmost Angular
 * component.
 *
 * ```ts
 * import {Component, HostBinding} from '\@angular/core';
 *
 * \@Component({
 *   selector: 'app-component',
 *   templateUrl: 'app.component.html',
 * })
 * class AppComponent {
 *   \@HostBinding('\@.disabled')
 *   public animationsDisabled = true;
 * }
 * ```
 *
 * ### What about animations that us `query()` and `animateChild()`?
 * Despite inner animations being disabled, a parent animation can {\@link query query} for inner
 * elements located in disabled areas of the template and still animate them as it sees fit. This is
 * also the case for when a sub animation is queried by a parent and then later animated using {\@link
 * animateChild animateChild}.
 *
 * \@experimental Animation support is experimental.
 * @param {?} name
 * @param {?} definitions
 * @return {?}
 */
function trigger$1(name, definitions) {
    return { type: 7 /* Trigger */, name: name, definitions: definitions, options: {} };
}
/**
 * `animate` is an animation-specific function that is designed to be used inside of Angular's
 * animation DSL language. If this information is new, please navigate to the {\@link
 * Component#animations component animations metadata page} to gain a better understanding of
 * how animations in Angular are used.
 *
 * `animate` specifies an animation step that will apply the provided `styles` data for a given
 * amount of time based on the provided `timing` expression value. Calls to `animate` are expected
 * to be used within {\@link sequence an animation sequence}, {\@link group group}, or {\@link
 * transition transition}.
 *
 * ### Usage
 *
 * The `animate` function accepts two input parameters: `timing` and `styles`:
 *
 * - `timing` is a string based value that can be a combination of a duration with optional delay
 * and easing values. The format for the expression breaks down to `duration delay easing`
 * (therefore a value such as `1s 100ms ease-out` will be parse itself into `duration=1000,
 * delay=100, easing=ease-out`. If a numeric value is provided then that will be used as the
 * `duration` value in millisecond form.
 * - `styles` is the style input data which can either be a call to {\@link style style} or {\@link
 * keyframes keyframes}. If left empty then the styles from the destination state will be collected
 * and used (this is useful when describing an animation step that will complete an animation by
 * {\@link transition#the-final-animate-call animating to the final state}).
 *
 * ```typescript
 * // various functions for specifying timing data
 * animate(500, style(...))
 * animate("1s", style(...))
 * animate("100ms 0.5s", style(...))
 * animate("5s ease", style(...))
 * animate("5s 10ms cubic-bezier(.17,.67,.88,.1)", style(...))
 *
 * // either style() of keyframes() can be used
 * animate(500, style({ background: "red" }))
 * animate(500, keyframes([
 *   style({ background: "blue" })),
 *   style({ background: "red" }))
 * ])
 * ```
 *
 * {\@example core/animation/ts/dsl/animation_example.ts region='Component'}
 *
 * \@experimental Animation support is experimental.
 * @param {?} timings
 * @param {?=} styles
 * @return {?}
 */
function animate$1(timings, styles) {
    if (styles === void 0) { styles = null; }
    return { type: 4 /* Animate */, styles: styles, timings: timings };
}
/**
 * `group` is an animation-specific function that is designed to be used inside of Angular's
 * animation DSL language. If this information is new, please navigate to the {\@link
 * Component#animations component animations metadata page} to gain a better understanding of
 * how animations in Angular are used.
 *
 * `group` specifies a list of animation steps that are all run in parallel. Grouped animations are
 * useful when a series of styles must be animated/closed off at different starting/ending times.
 *
 * The `group` function can either be used within a {\@link sequence sequence} or a {\@link transition
 * transition} and it will only continue to the next instruction once all of the inner animation
 * steps have completed.
 *
 * ### Usage
 *
 * The `steps` data that is passed into the `group` animation function can either consist of {\@link
 * style style} or {\@link animate animate} function calls. Each call to `style()` or `animate()`
 * within a group will be executed instantly (use {\@link keyframes keyframes} or a {\@link
 * animate#usage animate() with a delay value} to offset styles to be applied at a later time).
 *
 * ```typescript
 * group([
 *   animate("1s", { background: "black" }))
 *   animate("2s", { color: "white" }))
 * ])
 * ```
 *
 * {\@example core/animation/ts/dsl/animation_example.ts region='Component'}
 *
 * \@experimental Animation support is experimental.
 * @param {?} steps
 * @param {?=} options
 * @return {?}
 */
function group$1(steps, options) {
    if (options === void 0) { options = null; }
    return { type: 3 /* Group */, steps: steps, options: options };
}
/**
 * `sequence` is an animation-specific function that is designed to be used inside of Angular's
 * animation DSL language. If this information is new, please navigate to the {\@link
 * Component#animations component animations metadata page} to gain a better understanding of
 * how animations in Angular are used.
 *
 * `sequence` Specifies a list of animation steps that are run one by one. (`sequence` is used by
 * default when an array is passed as animation data into {\@link transition transition}.)
 *
 * The `sequence` function can either be used within a {\@link group group} or a {\@link transition
 * transition} and it will only continue to the next instruction once each of the inner animation
 * steps have completed.
 *
 * To perform animation styling in parallel with other animation steps then have a look at the
 * {\@link group group} animation function.
 *
 * ### Usage
 *
 * The `steps` data that is passed into the `sequence` animation function can either consist of
 * {\@link style style} or {\@link animate animate} function calls. A call to `style()` will apply the
 * provided styling data immediately while a call to `animate()` will apply its styling data over a
 * given time depending on its timing data.
 *
 * ```typescript
 * sequence([
 *   style({ opacity: 0 })),
 *   animate("1s", { opacity: 1 }))
 * ])
 * ```
 *
 * {\@example core/animation/ts/dsl/animation_example.ts region='Component'}
 *
 * \@experimental Animation support is experimental.
 * @param {?} steps
 * @param {?=} options
 * @return {?}
 */
function sequence$1(steps, options) {
    if (options === void 0) { options = null; }
    return { type: 2 /* Sequence */, steps: steps, options: options };
}
/**
 * `style` is an animation-specific function that is designed to be used inside of Angular's
 * animation DSL language. If this information is new, please navigate to the {\@link
 * Component#animations component animations metadata page} to gain a better understanding of
 * how animations in Angular are used.
 *
 * `style` declares a key/value object containing CSS properties/styles that can then be used for
 * {\@link state animation states}, within an {\@link sequence animation sequence}, or as styling data
 * for both {\@link animate animate} and {\@link keyframes keyframes}.
 *
 * ### Usage
 *
 * `style` takes in a key/value string map as data and expects one or more CSS property/value pairs
 * to be defined.
 *
 * ```typescript
 * // string values are used for css properties
 * style({ background: "red", color: "blue" })
 *
 * // numerical (pixel) values are also supported
 * style({ width: 100, height: 0 })
 * ```
 *
 * #### Auto-styles (using `*`)
 *
 * When an asterix (`*`) character is used as a value then it will be detected from the element
 * being animated and applied as animation data when the animation starts.
 *
 * This feature proves useful for a state depending on layout and/or environment factors; in such
 * cases the styles are calculated just before the animation starts.
 *
 * ```typescript
 * // the steps below will animate from 0 to the
 * // actual height of the element
 * style({ height: 0 }),
 * animate("1s", style({ height: "*" }))
 * ```
 *
 * {\@example core/animation/ts/dsl/animation_example.ts region='Component'}
 *
 * \@experimental Animation support is experimental.
 * @param {?} tokens
 * @return {?}
 */
function style$1(tokens) {
    return { type: 6 /* Style */, styles: tokens, offset: null };
}
/**
 * `state` is an animation-specific function that is designed to be used inside of Angular's
 * animation DSL language. If this information is new, please navigate to the {\@link
 * Component#animations component animations metadata page} to gain a better understanding of
 * how animations in Angular are used.
 *
 * `state` declares an animation state within the given trigger. When a state is active within a
 * component then its associated styles will persist on the element that the trigger is attached to
 * (even when the animation ends).
 *
 * To animate between states, have a look at the animation {\@link transition transition} DSL
 * function. To register states to an animation trigger please have a look at the {\@link trigger
 * trigger} function.
 *
 * #### The `void` state
 *
 * The `void` state value is a reserved word that angular uses to determine when the element is not
 * apart of the application anymore (e.g. when an `ngIf` evaluates to false then the state of the
 * associated element is void).
 *
 * #### The `*` (default) state
 *
 * The `*` state (when styled) is a fallback state that will be used if the state that is being
 * animated is not declared within the trigger.
 *
 * ### Usage
 *
 * `state` will declare an animation state with its associated styles
 * within the given trigger.
 *
 * - `stateNameExpr` can be one or more state names separated by commas.
 * - `styles` refers to the {\@link style styling data} that will be persisted on the element once
 * the state has been reached.
 *
 * ```typescript
 * // "void" is a reserved name for a state and is used to represent
 * // the state in which an element is detached from from the application.
 * state("void", style({ height: 0 }))
 *
 * // user-defined states
 * state("closed", style({ height: 0 }))
 * state("open, visible", style({ height: "*" }))
 * ```
 *
 * {\@example core/animation/ts/dsl/animation_example.ts region='Component'}
 *
 * \@experimental Animation support is experimental.
 * @param {?} name
 * @param {?} styles
 * @param {?=} options
 * @return {?}
 */
function state$1(name, styles, options) {
    return { type: 0 /* State */, name: name, styles: styles, options: options };
}
/**
 * `keyframes` is an animation-specific function that is designed to be used inside of Angular's
 * animation DSL language. If this information is new, please navigate to the {\@link
 * Component#animations component animations metadata page} to gain a better understanding of
 * how animations in Angular are used.
 *
 * `keyframes` specifies a collection of {\@link style style} entries each optionally characterized
 * by an `offset` value.
 *
 * ### Usage
 *
 * The `keyframes` animation function is designed to be used alongside the {\@link animate animate}
 * animation function. Instead of applying animations from where they are currently to their
 * destination, keyframes can describe how each style entry is applied and at what point within the
 * animation arc (much like CSS Keyframe Animations do).
 *
 * For each `style()` entry an `offset` value can be set. Doing so allows to specifiy at what
 * percentage of the animate time the styles will be applied.
 *
 * ```typescript
 * // the provided offset values describe when each backgroundColor value is applied.
 * animate("5s", keyframes([
 *   style({ backgroundColor: "red", offset: 0 }),
 *   style({ backgroundColor: "blue", offset: 0.2 }),
 *   style({ backgroundColor: "orange", offset: 0.3 }),
 *   style({ backgroundColor: "black", offset: 1 })
 * ]))
 * ```
 *
 * Alternatively, if there are no `offset` values used within the style entries then the offsets
 * will be calculated automatically.
 *
 * ```typescript
 * animate("5s", keyframes([
 *   style({ backgroundColor: "red" }) // offset = 0
 *   style({ backgroundColor: "blue" }) // offset = 0.33
 *   style({ backgroundColor: "orange" }) // offset = 0.66
 *   style({ backgroundColor: "black" }) // offset = 1
 * ]))
 * ```
 *
 * {\@example core/animation/ts/dsl/animation_example.ts region='Component'}
 *
 * \@experimental Animation support is experimental.
 * @param {?} steps
 * @return {?}
 */
function keyframes$1(steps) {
    return { type: 5 /* Keyframes */, steps: steps };
}
/**
 * `transition` is an animation-specific function that is designed to be used inside of Angular's
 * animation DSL language. If this information is new, please navigate to the {\@link
 * Component#animations component animations metadata page} to gain a better understanding of
 * how animations in Angular are used.
 *
 * `transition` declares the {\@link sequence sequence of animation steps} that will be run when the
 * provided `stateChangeExpr` value is satisfied. The `stateChangeExpr` consists of a `state1 =>
 * state2` which consists of two known states (use an asterix (`*`) to refer to a dynamic starting
 * and/or ending state).
 *
 * A function can also be provided as the `stateChangeExpr` argument for a transition and this
 * function will be executed each time a state change occurs. If the value returned within the
 * function is true then the associated animation will be run.
 *
 * Animation transitions are placed within an {\@link trigger animation trigger}. For an transition
 * to animate to a state value and persist its styles then one or more {\@link state animation
 * states} is expected to be defined.
 *
 * ### Usage
 *
 * An animation transition is kicked off the `stateChangeExpr` predicate evaluates to true based on
 * what the previous state is and what the current state has become. In other words, if a transition
 * is defined that matches the old/current state criteria then the associated animation will be
 * triggered.
 *
 * ```typescript
 * // all transition/state changes are defined within an animation trigger
 * trigger("myAnimationTrigger", [
 *   // if a state is defined then its styles will be persisted when the
 *   // animation has fully completed itself
 *   state("on", style({ background: "green" })),
 *   state("off", style({ background: "grey" })),
 *
 *   // a transition animation that will be kicked off when the state value
 *   // bound to "myAnimationTrigger" changes from "on" to "off"
 *   transition("on => off", animate(500)),
 *
 *   // it is also possible to do run the same animation for both directions
 *   transition("on <=> off", animate(500)),
 *
 *   // or to define multiple states pairs separated by commas
 *   transition("on => off, off => void", animate(500)),
 *
 *   // this is a catch-all state change for when an element is inserted into
 *   // the page and the destination state is unknown
 *   transition("void => *", [
 *     style({ opacity: 0 }),
 *     animate(500)
 *   ]),
 *
 *   // this will capture a state change between any states
 *   transition("* => *", animate("1s 0s")),
 *
 *   // you can also go full out and include a function
 *   transition((fromState, toState) => {
 *     // when `true` then it will allow the animation below to be invoked
 *     return fromState == "off" && toState == "on";
 *   }, animate("1s 0s"))
 * ])
 * ```
 *
 * The template associated with this component will make use of the `myAnimationTrigger` animation
 * trigger by binding to an element within its template code.
 *
 * ```html
 * <!-- somewhere inside of my-component-tpl.html -->
 * <div [\@myAnimationTrigger]="myStatusExp">...</div>
 * ```
 *
 * #### The final `animate` call
 *
 * If the final step within the transition steps is a call to `animate()` that **only** uses a
 * timing value with **no style data** then it will be automatically used as the final animation arc
 * for the element to animate itself to the final state. This involves an automatic mix of
 * adding/removing CSS styles so that the element will be in the exact state it should be for the
 * applied state to be presented correctly.
 *
 * ```
 * // start off by hiding the element, but make sure that it animates properly to whatever state
 * // is currently active for "myAnimationTrigger"
 * transition("void => *", [
 *   style({ opacity: 0 }),
 *   animate(500)
 * ])
 * ```
 *
 * ### Transition Aliases (`:enter` and `:leave`)
 *
 * Given that enter (insertion) and leave (removal) animations are so common, the `transition`
 * function accepts both `:enter` and `:leave` values which are aliases for the `void => *` and `*
 * => void` state changes.
 *
 * ```
 * transition(":enter", [
 *   style({ opacity: 0 }),
 *   animate(500, style({ opacity: 1 }))
 * ])
 * transition(":leave", [
 *   animate(500, style({ opacity: 0 }))
 * ])
 * ```
 *
 * {\@example core/animation/ts/dsl/animation_example.ts region='Component'}
 *
 * \@experimental Animation support is experimental.
 * @param {?} stateChangeExpr
 * @param {?} steps
 * @param {?=} options
 * @return {?}
 */
function transition$1(stateChangeExpr, steps, options) {
    if (options === void 0) { options = null; }
    return { type: 1 /* Transition */, expr: stateChangeExpr, animation: steps, options: options };
}
/**
 * `animation` is an animation-specific function that is designed to be used inside of Angular's
 * animation DSL language.
 *
 * `var myAnimation = animation(...)` is designed to produce a reusable animation that can be later
 * invoked in another animation or sequence. Reusable animations are designed to make use of
 * animation parameters and the produced animation can be used via the `useAnimation` method.
 *
 * ```
 * var fadeAnimation = animation([
 *   style({ opacity: '{{ start }}' }),
 *   animate('{{ time }}',
 *     style({ opacity: '{{ end }}'))
 * ], { params: { time: '1000ms', start: 0, end: 1 }});
 * ```
 *
 * If parameters are attached to an animation then they act as **default parameter values**. When an
 * animation is invoked via `useAnimation` then parameter values are allowed to be passed in
 * directly. If any of the passed in parameter values are missing then the default values will be
 * used.
 *
 * ```
 * useAnimation(fadeAnimation, {
 *   params: {
 *     time: '2s',
 *     start: 1,
 *     end: 0
 *   }
 * })
 * ```
 *
 * If one or more parameter values are missing before animated then an error will be thrown.
 *
 * \@experimental Animation support is experimental.
 * @param {?} steps
 * @param {?=} options
 * @return {?}
 */
/**
 * `animateChild` is an animation-specific function that is designed to be used inside of Angular's
 * animation DSL language. It works by allowing a queried element to execute its own
 * animation within the animation sequence.
 *
 * Each time an animation is triggered in angular, the parent animation
 * will always get priority and any child animations will be blocked. In order
 * for a child animation to run, the parent animation must query each of the elements
 * containing child animations and then allow the animations to run using `animateChild`.
 *
 * The example HTML code below shows both parent and child elements that have animation
 * triggers that will execute at the same time.
 *
 * ```html
 * <!-- parent-child.component.html -->
 * <button (click)="exp =! exp">Toggle</button>
 * <hr>
 *
 * <div [\@parentAnimation]="exp">
 *   <header>Hello</header>
 *   <div [\@childAnimation]="exp">
 *       one
 *   </div>
 *   <div [\@childAnimation]="exp">
 *       two
 *   </div>
 *   <div [\@childAnimation]="exp">
 *       three
 *   </div>
 * </div>
 * ```
 *
 * Now when the `exp` value changes to true, only the `parentAnimation` animation will animate
 * because it has priority. However, using `query` and `animateChild` each of the inner animations
 * can also fire:
 *
 * ```ts
 * // parent-child.component.ts
 * import {trigger, transition, animate, style, query, animateChild} from '\@angular/animations';
 * \@Component({
 *   selector: 'parent-child-component',
 *   animations: [
 *     trigger('parentAnimation', [
 *       transition('false => true', [
 *         query('header', [
 *           style({ opacity: 0 }),
 *           animate(500, style({ opacity: 1 }))
 *         ]),
 *         query('\@childAnimation', [
 *           animateChild()
 *         ])
 *       ])
 *     ]),
 *     trigger('childAnimation', [
 *       transition('false => true', [
 *         style({ opacity: 0 }),
 *         animate(500, style({ opacity: 1 }))
 *       ])
 *     ])
 *   ]
 * })
 * class ParentChildCmp {
 *   exp: boolean = false;
 * }
 * ```
 *
 * In the animation code above, when the `parentAnimation` transition kicks off it first queries to
 * find the header element and fades it in. It then finds each of the sub elements that contain the
 * `\@childAnimation` trigger and then allows for their animations to fire.
 *
 * This example can be further extended by using stagger:
 *
 * ```ts
 * query('\@childAnimation', stagger(100, [
 *   animateChild()
 * ]))
 * ```
 *
 * Now each of the sub animations start off with respect to the `100ms` staggering step.
 *
 * ## The first frame of child animations
 * When sub animations are executed using `animateChild` the animation engine will always apply the
 * first frame of every sub animation immediately at the start of the animation sequence. This way
 * the parent animation does not need to set any initial styling data on the sub elements before the
 * sub animations kick off.
 *
 * In the example above the first frame of the `childAnimation`'s `false => true` transition
 * consists of a style of `opacity: 0`. This is applied immediately when the `parentAnimation`
 * animation transition sequence starts. Only then when the `\@childAnimation` is queried and called
 * with `animateChild` will it then animate to its destination of `opacity: 1`.
 *
 * Note that this feature designed to be used alongside {\@link query query()} and it will only work
 * with animations that are assigned using the Angular animation DSL (this means that CSS keyframes
 * and transitions are not handled by this API).
 *
 * \@experimental Animation support is experimental.
 * @param {?=} options
 * @return {?}
 */
/**
 * `useAnimation` is an animation-specific function that is designed to be used inside of Angular's
 * animation DSL language. It is used to kick off a reusable animation that is created using {\@link
 * animation animation()}.
 *
 * \@experimental Animation support is experimental.
 * @param {?} animation
 * @param {?=} options
 * @return {?}
 */
/**
 * `query` is an animation-specific function that is designed to be used inside of Angular's
 * animation DSL language.
 *
 * query() is used to find one or more inner elements within the current element that is
 * being animated within the sequence. The provided animation steps are applied
 * to the queried element (by default, an array is provided, then this will be
 * treated as an animation sequence).
 *
 * ### Usage
 *
 * query() is designed to collect mutiple elements and works internally by using
 * `element.querySelectorAll`. An additional options object can be provided which
 * can be used to limit the total amount of items to be collected.
 *
 * ```js
 * query('div', [
 *   animate(...),
 *   animate(...)
 * ], { limit: 1 })
 * ```
 *
 * query(), by default, will throw an error when zero items are found. If a query
 * has the `optional` flag set to true then this error will be ignored.
 *
 * ```js
 * query('.some-element-that-may-not-be-there', [
 *   animate(...),
 *   animate(...)
 * ], { optional: true })
 * ```
 *
 * ### Special Selector Values
 *
 * The selector value within a query can collect elements that contain angular-specific
 * characteristics
 * using special pseudo-selectors tokens.
 *
 * These include:
 *
 *  - Querying for newly inserted/removed elements using `query(":enter")`/`query(":leave")`
 *  - Querying all currently animating elements using `query(":animating")`
 *  - Querying elements that contain an animation trigger using `query("\@triggerName")`
 *  - Querying all elements that contain an animation triggers using `query("\@*")`
 *  - Including the current element into the animation sequence using `query(":self")`
 *
 *
 *  Each of these pseudo-selector tokens can be merged together into a combined query selector
 * string:
 *
 *  ```
 *  query(':self, .record:enter, .record:leave, \@subTrigger', [...])
 *  ```
 *
 * ### Demo
 *
 * ```
 * \@Component({
 *   selector: 'inner',
 *   template: `
 *     <div [\@queryAnimation]="exp">
 *       <h1>Title</h1>
 *       <div class="content">
 *         Blah blah blah
 *       </div>
 *     </div>
 *   `,
 *   animations: [
 *    trigger('queryAnimation', [
 *      transition('* => goAnimate', [
 *        // hide the inner elements
 *        query('h1', style({ opacity: 0 })),
 *        query('.content', style({ opacity: 0 })),
 *
 *        // animate the inner elements in, one by one
 *        query('h1', animate(1000, style({ opacity: 1 })),
 *        query('.content', animate(1000, style({ opacity: 1 })),
 *      ])
 *    ])
 *  ]
 * })
 * class Cmp {
 *   exp = '';
 *
 *   goAnimate() {
 *     this.exp = 'goAnimate';
 *   }
 * }
 * ```
 *
 * \@experimental Animation support is experimental.
 * @param {?} selector
 * @param {?} animation
 * @param {?=} options
 * @return {?}
 */
/**
 * `stagger` is an animation-specific function that is designed to be used inside of Angular's
 * animation DSL language. It is designed to be used inside of an animation {\@link query query()}
 * and works by issuing a timing gap between after each queried item is animated.
 *
 * ### Usage
 *
 * In the example below there is a container element that wraps a list of items stamped out
 * by an ngFor. The container element contains an animation trigger that will later be set
 * to query for each of the inner items.
 *
 * ```html
 * <!-- list.component.html -->
 * <button (click)="toggle()">Show / Hide Items</button>
 * <hr />
 * <div [\@listAnimation]="items.length">
 *   <div *ngFor="let item of items">
 *     {{ item }}
 *   </div>
 * </div>
 * ```
 *
 * The component code for this looks as such:
 *
 * ```ts
 * import {trigger, transition, style, animate, query, stagger} from '\@angular/animations';
 * \@Component({
 *   templateUrl: 'list.component.html',
 *   animations: [
 *     trigger('listAnimation', [
 *        //...
 *     ])
 *   ]
 * })
 * class ListComponent {
 *   items = [];
 *
 *   showItems() {
 *     this.items = [0,1,2,3,4];
 *   }
 *
 *   hideItems() {
 *     this.items = [];
 *   }
 *
 *   toggle() {
 *     this.items.length ? this.hideItems() : this.showItems();
 *   }
 * }
 * ```
 *
 * And now for the animation trigger code:
 *
 * ```ts
 * trigger('listAnimation', [
 *   transition('* => *', [ // each time the binding value changes
 *     query(':leave', [
 *       stagger(100, [
 *         animate('0.5s', style({ opacity: 0 }))
 *       ])
 *     ]),
 *     query(':enter', [
 *       style({ opacity: 0 }),
 *       stagger(100, [
 *         animate('0.5s', style({ opacity: 1 }))
 *       ])
 *     ])
 *   ])
 * ])
 * ```
 *
 * Now each time the items are added/removed then either the opacity
 * fade-in animation will run or each removed item will be faded out.
 * When either of these animations occur then a stagger effect will be
 * applied after each item's animation is started.
 *
 * \@experimental Animation support is experimental.
 * @param {?} timings
 * @param {?} animation
 * @return {?}
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @deprecated This symbol has moved. Please Import from \@angular/animations instead!
 */
var AUTO_STYLE$$1 = '*';
/**
 * @deprecated This symbol has moved. Please Import from \@angular/animations instead!
 * @param {?} name
 * @param {?} definitions
 * @return {?}
 */
function trigger$$1(name, definitions) {
    return trigger$1(name, definitions);
}
/**
 * @deprecated This symbol has moved. Please Import from \@angular/animations instead!
 * @param {?} timings
 * @param {?=} styles
 * @return {?}
 */
function animate$$1(timings, styles) {
    return animate$1(timings, styles);
}
/**
 * @deprecated This symbol has moved. Please Import from \@angular/animations instead!
 * @param {?} steps
 * @return {?}
 */
function group$$1(steps) {
    return group$1(steps);
}
/**
 * @deprecated This symbol has moved. Please Import from \@angular/animations instead!
 * @param {?} steps
 * @return {?}
 */
function sequence$$1(steps) {
    return sequence$1(steps);
}
/**
 * @deprecated This symbol has moved. Please Import from \@angular/animations instead!
 * @param {?} tokens
 * @return {?}
 */
function style$$1(tokens) {
    return style$1(tokens);
}
/**
 * @deprecated This symbol has moved. Please Import from \@angular/animations instead!
 * @param {?} name
 * @param {?} styles
 * @return {?}
 */
function state$$1(name, styles) {
    return state$1(name, styles);
}
/**
 * @deprecated This symbol has moved. Please Import from \@angular/animations instead!
 * @param {?} steps
 * @return {?}
 */
function keyframes$$1(steps) {
    return keyframes$1(steps);
}
/**
 * @deprecated This symbol has moved. Please Import from \@angular/animations instead!
 * @param {?} stateChangeExpr
 * @param {?} steps
 * @return {?}
 */
function transition$$1(stateChangeExpr, steps) {
    return transition$1(stateChangeExpr, steps);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point from which you should import all public core APIs.
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all public APIs of the core package.
 */
// This file only reexports content of the `src` folder. Keep it that way.
/**
 * Generated bundle index. Do not edit.
 */

//# sourceMappingURL=core.es5.js.map

/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__("../../../../webpack/buildin/global.js")))

/***/ }),

/***/ "../../../platform-browser-dynamic/@angular/platform-browser-dynamic.es5.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export RESOURCE_CACHE_PROVIDER */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return platformBrowserDynamic; });
/* unused harmony export VERSION */
/* unused harmony export INTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS */
/* unused harmony export ResourceLoaderImpl */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__("../../../../tslib/tslib.es6.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_compiler__ = __webpack_require__("../../../compiler/@angular/compiler.es5.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__("../../../core/@angular/core.es5.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_common__ = __webpack_require__("../../../common/@angular/common.es5.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_platform_browser__ = __webpack_require__("../../../platform-browser/@angular/platform-browser.es5.js");

/**
 * @license Angular v4.4.5
 * (c) 2010-2017 Google, Inc. https://angular.io/
 * License: MIT
 */




/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ResourceLoaderImpl = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ResourceLoaderImpl, _super);
    function ResourceLoaderImpl() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ResourceLoaderImpl.prototype.get = function (url) {
        var resolve;
        var reject;
        var promise = new Promise(function (res, rej) {
            resolve = res;
            reject = rej;
        });
        var xhr = new XMLHttpRequest();
        xhr.open('GET', url, true);
        xhr.responseType = 'text';
        xhr.onload = function () {
            // responseText is the old-school way of retrieving response (supported by IE8 & 9)
            // response/responseType properties were introduced in ResourceLoader Level2 spec (supported
            // by IE10)
            var response = xhr.response || xhr.responseText;
            // normalize IE9 bug (http://bugs.jquery.com/ticket/1450)
            var status = xhr.status === 1223 ? 204 : xhr.status;
            // fix status code when it is 0 (0 status is undocumented).
            // Occurs when accessing file resources or on Android 4.1 stock browser
            // while retrieving files from application cache.
            if (status === 0) {
                status = response ? 200 : 0;
            }
            if (200 <= status && status <= 300) {
                resolve(response);
            }
            else {
                reject("Failed to load " + url);
            }
        };
        xhr.onerror = function () { reject("Failed to load " + url); };
        xhr.send();
        return promise;
    };
    return ResourceLoaderImpl;
}(__WEBPACK_IMPORTED_MODULE_1__angular_compiler__["a" /* ResourceLoader */]));
ResourceLoaderImpl.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["B" /* Injectable */] },
];
/** @nocollapse */
ResourceLoaderImpl.ctorParameters = function () { return []; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var INTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS = [
    __WEBPACK_IMPORTED_MODULE_4__angular_platform_browser__["b" /* INTERNAL_BROWSER_PLATFORM_PROVIDERS */],
    {
        provide: __WEBPACK_IMPORTED_MODULE_2__angular_core__["h" /* COMPILER_OPTIONS */],
        useValue: { providers: [{ provide: __WEBPACK_IMPORTED_MODULE_1__angular_compiler__["a" /* ResourceLoader */], useClass: ResourceLoaderImpl }] },
        multi: true
    },
    { provide: __WEBPACK_IMPORTED_MODULE_2__angular_core__["T" /* PLATFORM_ID */], useValue: __WEBPACK_IMPORTED_MODULE_3__angular_common__["d" /* PLATFORM_BROWSER_ID */] },
];
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * An implementation of ResourceLoader that uses a template cache to avoid doing an actual
 * ResourceLoader.
 *
 * The template cache needs to be built and loaded into window.$templateCache
 * via a separate mechanism.
 */
var CachedResourceLoader = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](CachedResourceLoader, _super);
    function CachedResourceLoader() {
        var _this = _super.call(this) || this;
        _this._cache = __WEBPACK_IMPORTED_MODULE_2__angular_core__["_46" /* global */].$templateCache;
        if (_this._cache == null) {
            throw new Error('CachedResourceLoader: Template cache was not found in $templateCache.');
        }
        return _this;
    }
    CachedResourceLoader.prototype.get = function (url) {
        if (this._cache.hasOwnProperty(url)) {
            return Promise.resolve(this._cache[url]);
        }
        else {
            return Promise.reject('CachedResourceLoader: Did not find cached template for ' + url);
        }
    };
    return CachedResourceLoader;
}(__WEBPACK_IMPORTED_MODULE_1__angular_compiler__["a" /* ResourceLoader */]));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all public APIs of the common package.
 */
/**
 * @stable
 */
var VERSION = new __WEBPACK_IMPORTED_MODULE_2__angular_core__["_11" /* Version */]('4.4.5');
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @experimental
 */
var RESOURCE_CACHE_PROVIDER = [{ provide: __WEBPACK_IMPORTED_MODULE_1__angular_compiler__["a" /* ResourceLoader */], useClass: CachedResourceLoader }];
/**
 * @stable
 */
var platformBrowserDynamic = Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["_18" /* createPlatformFactory */])(__WEBPACK_IMPORTED_MODULE_1__angular_compiler__["b" /* platformCoreDynamic */], 'browserDynamic', INTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS);
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all public APIs of the platform-browser-dynamic package.
 */
// This file only reexports content of the `src` folder. Keep it that way.

//# sourceMappingURL=platform-browser-dynamic.es5.js.map


/***/ }),

/***/ "../../../platform-browser/@angular/platform-browser.es5.js":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BrowserModule; });
/* unused harmony export platformBrowser */
/* unused harmony export Meta */
/* unused harmony export Title */
/* unused harmony export disableDebugTools */
/* unused harmony export enableDebugTools */
/* unused harmony export By */
/* unused harmony export NgProbeToken */
/* unused harmony export DOCUMENT */
/* unused harmony export EVENT_MANAGER_PLUGINS */
/* unused harmony export EventManager */
/* unused harmony export HAMMER_GESTURE_CONFIG */
/* unused harmony export HammerGestureConfig */
/* unused harmony export DomSanitizer */
/* unused harmony export VERSION */
/* unused harmony export BROWSER_SANITIZATION_PROVIDERS */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return INTERNAL_BROWSER_PLATFORM_PROVIDERS; });
/* unused harmony export initDomAdapter */
/* unused harmony export BrowserDomAdapter */
/* unused harmony export BrowserPlatformLocation */
/* unused harmony export TRANSITION_ID */
/* unused harmony export BrowserGetTestability */
/* unused harmony export ELEMENT_PROBE_PROVIDERS */
/* unused harmony export DomAdapter */
/* unused harmony export getDOM */
/* unused harmony export setRootDomAdapter */
/* unused harmony export DomRendererFactory2 */
/* unused harmony export NAMESPACE_URIS */
/* unused harmony export flattenStyles */
/* unused harmony export shimContentAttribute */
/* unused harmony export shimHostAttribute */
/* unused harmony export DomEventsPlugin */
/* unused harmony export HammerGesturesPlugin */
/* unused harmony export KeyEventsPlugin */
/* unused harmony export DomSharedStylesHost */
/* unused harmony export SharedStylesHost */
/* unused harmony export b */
/* unused harmony export a */
/* unused harmony export h */
/* unused harmony export g */
/* unused harmony export f */
/* unused harmony export c */
/* unused harmony export d */
/* unused harmony export e */
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_tslib__ = __webpack_require__("../../../../tslib/tslib.es6.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_common__ = __webpack_require__("../../../common/@angular/common.es5.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__("../../../core/@angular/core.es5.js");

/**
 * @license Angular v4.4.5
 * (c) 2010-2017 Google, Inc. https://angular.io/
 * License: MIT
 */


/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _DOM = ((null));
/**
 * @return {?}
 */
function getDOM() {
    return _DOM;
}
/**
 * @param {?} adapter
 * @return {?}
 */
/**
 * @param {?} adapter
 * @return {?}
 */
function setRootDomAdapter(adapter) {
    if (!_DOM) {
        _DOM = adapter;
    }
}
/**
 * Provides DOM operations in an environment-agnostic way.
 *
 * \@security Tread carefully! Interacting with the DOM directly is dangerous and
 * can introduce XSS risks.
 * @abstract
 */
var DomAdapter = (function () {
    function DomAdapter() {
        this.resourceLoaderType = ((null));
    }
    /**
     * @abstract
     * @param {?} element
     * @param {?} name
     * @return {?}
     */
    DomAdapter.prototype.hasProperty = function (element, name) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    DomAdapter.prototype.setProperty = function (el, name, value) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} name
     * @return {?}
     */
    DomAdapter.prototype.getProperty = function (el, name) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} methodName
     * @param {?} args
     * @return {?}
     */
    DomAdapter.prototype.invoke = function (el, methodName, args) { };
    /**
     * @abstract
     * @param {?} error
     * @return {?}
     */
    DomAdapter.prototype.logError = function (error) { };
    /**
     * @abstract
     * @param {?} error
     * @return {?}
     */
    DomAdapter.prototype.log = function (error) { };
    /**
     * @abstract
     * @param {?} error
     * @return {?}
     */
    DomAdapter.prototype.logGroup = function (error) { };
    /**
     * @abstract
     * @return {?}
     */
    DomAdapter.prototype.logGroupEnd = function () { };
    Object.defineProperty(DomAdapter.prototype, "attrToPropMap", {
        /**
         * Maps attribute names to their corresponding property names for cases
         * where attribute name doesn't match property name.
         * @return {?}
         */
        get: function () { return this._attrToPropMap; },
        /**
         * @param {?} value
         * @return {?}
         */
        set: function (value) { this._attrToPropMap = value; },
        enumerable: true,
        configurable: true
    });
    /**
     * @abstract
     * @param {?} nodeA
     * @param {?} nodeB
     * @return {?}
     */
    DomAdapter.prototype.contains = function (nodeA, nodeB) { };
    /**
     * @abstract
     * @param {?} templateHtml
     * @return {?}
     */
    DomAdapter.prototype.parse = function (templateHtml) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} selector
     * @return {?}
     */
    DomAdapter.prototype.querySelector = function (el, selector) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} selector
     * @return {?}
     */
    DomAdapter.prototype.querySelectorAll = function (el, selector) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} evt
     * @param {?} listener
     * @return {?}
     */
    DomAdapter.prototype.on = function (el, evt, listener) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} evt
     * @param {?} listener
     * @return {?}
     */
    DomAdapter.prototype.onAndCancel = function (el, evt, listener) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} evt
     * @return {?}
     */
    DomAdapter.prototype.dispatchEvent = function (el, evt) { };
    /**
     * @abstract
     * @param {?} eventType
     * @return {?}
     */
    DomAdapter.prototype.createMouseEvent = function (eventType) { };
    /**
     * @abstract
     * @param {?} eventType
     * @return {?}
     */
    DomAdapter.prototype.createEvent = function (eventType) { };
    /**
     * @abstract
     * @param {?} evt
     * @return {?}
     */
    DomAdapter.prototype.preventDefault = function (evt) { };
    /**
     * @abstract
     * @param {?} evt
     * @return {?}
     */
    DomAdapter.prototype.isPrevented = function (evt) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.getInnerHTML = function (el) { };
    /**
     * Returns content if el is a <template> element, null otherwise.
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.getTemplateContent = function (el) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.getOuterHTML = function (el) { };
    /**
     * @abstract
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.nodeName = function (node) { };
    /**
     * @abstract
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.nodeValue = function (node) { };
    /**
     * @abstract
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.type = function (node) { };
    /**
     * @abstract
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.content = function (node) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.firstChild = function (el) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.nextSibling = function (el) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.parentElement = function (el) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.childNodes = function (el) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.childNodesAsList = function (el) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.clearNodes = function (el) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.appendChild = function (el, node) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.removeChild = function (el, node) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} newNode
     * @param {?} oldNode
     * @return {?}
     */
    DomAdapter.prototype.replaceChild = function (el, newNode, oldNode) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.remove = function (el) { };
    /**
     * @abstract
     * @param {?} parent
     * @param {?} ref
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.insertBefore = function (parent, ref, node) { };
    /**
     * @abstract
     * @param {?} parent
     * @param {?} ref
     * @param {?} nodes
     * @return {?}
     */
    DomAdapter.prototype.insertAllBefore = function (parent, ref, nodes) { };
    /**
     * @abstract
     * @param {?} parent
     * @param {?} el
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.insertAfter = function (parent, el, node) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} value
     * @return {?}
     */
    DomAdapter.prototype.setInnerHTML = function (el, value) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.getText = function (el) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} value
     * @return {?}
     */
    DomAdapter.prototype.setText = function (el, value) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.getValue = function (el) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} value
     * @return {?}
     */
    DomAdapter.prototype.setValue = function (el, value) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.getChecked = function (el) { };
    /**
     * @abstract
     * @param {?} el
     * @param {?} value
     * @return {?}
     */
    DomAdapter.prototype.setChecked = function (el, value) { };
    /**
     * @abstract
     * @param {?} text
     * @return {?}
     */
    DomAdapter.prototype.createComment = function (text) { };
    /**
     * @abstract
     * @param {?} html
     * @return {?}
     */
    DomAdapter.prototype.createTemplate = function (html) { };
    /**
     * @abstract
     * @param {?} tagName
     * @param {?=} doc
     * @return {?}
     */
    DomAdapter.prototype.createElement = function (tagName, doc) { };
    /**
     * @abstract
     * @param {?} ns
     * @param {?} tagName
     * @param {?=} doc
     * @return {?}
     */
    DomAdapter.prototype.createElementNS = function (ns, tagName, doc) { };
    /**
     * @abstract
     * @param {?} text
     * @param {?=} doc
     * @return {?}
     */
    DomAdapter.prototype.createTextNode = function (text, doc) { };
    /**
     * @abstract
     * @param {?} attrName
     * @param {?} attrValue
     * @param {?=} doc
     * @return {?}
     */
    DomAdapter.prototype.createScriptTag = function (attrName, attrValue, doc) { };
    /**
     * @abstract
     * @param {?} css
     * @param {?=} doc
     * @return {?}
     */
    DomAdapter.prototype.createStyleElement = function (css, doc) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.createShadowRoot = function (el) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.getShadowRoot = function (el) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.getHost = function (el) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.getDistributedNodes = function (el) { };
    /**
     * @abstract
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.clone /*<T extends Node>*/ = function (node) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} name
     * @return {?}
     */
    DomAdapter.prototype.getElementsByClassName = function (element, name) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} name
     * @return {?}
     */
    DomAdapter.prototype.getElementsByTagName = function (element, name) { };
    /**
     * @abstract
     * @param {?} element
     * @return {?}
     */
    DomAdapter.prototype.classList = function (element) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} className
     * @return {?}
     */
    DomAdapter.prototype.addClass = function (element, className) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} className
     * @return {?}
     */
    DomAdapter.prototype.removeClass = function (element, className) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} className
     * @return {?}
     */
    DomAdapter.prototype.hasClass = function (element, className) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} styleName
     * @param {?} styleValue
     * @return {?}
     */
    DomAdapter.prototype.setStyle = function (element, styleName, styleValue) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} styleName
     * @return {?}
     */
    DomAdapter.prototype.removeStyle = function (element, styleName) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} styleName
     * @return {?}
     */
    DomAdapter.prototype.getStyle = function (element, styleName) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} styleName
     * @param {?=} styleValue
     * @return {?}
     */
    DomAdapter.prototype.hasStyle = function (element, styleName, styleValue) { };
    /**
     * @abstract
     * @param {?} element
     * @return {?}
     */
    DomAdapter.prototype.tagName = function (element) { };
    /**
     * @abstract
     * @param {?} element
     * @return {?}
     */
    DomAdapter.prototype.attributeMap = function (element) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} attribute
     * @return {?}
     */
    DomAdapter.prototype.hasAttribute = function (element, attribute) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} ns
     * @param {?} attribute
     * @return {?}
     */
    DomAdapter.prototype.hasAttributeNS = function (element, ns, attribute) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} attribute
     * @return {?}
     */
    DomAdapter.prototype.getAttribute = function (element, attribute) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} ns
     * @param {?} attribute
     * @return {?}
     */
    DomAdapter.prototype.getAttributeNS = function (element, ns, attribute) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    DomAdapter.prototype.setAttribute = function (element, name, value) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} ns
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    DomAdapter.prototype.setAttributeNS = function (element, ns, name, value) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} attribute
     * @return {?}
     */
    DomAdapter.prototype.removeAttribute = function (element, attribute) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} ns
     * @param {?} attribute
     * @return {?}
     */
    DomAdapter.prototype.removeAttributeNS = function (element, ns, attribute) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.templateAwareRoot = function (el) { };
    /**
     * @abstract
     * @return {?}
     */
    DomAdapter.prototype.createHtmlDocument = function () { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.getBoundingClientRect = function (el) { };
    /**
     * @abstract
     * @param {?} doc
     * @return {?}
     */
    DomAdapter.prototype.getTitle = function (doc) { };
    /**
     * @abstract
     * @param {?} doc
     * @param {?} newTitle
     * @return {?}
     */
    DomAdapter.prototype.setTitle = function (doc, newTitle) { };
    /**
     * @abstract
     * @param {?} n
     * @param {?} selector
     * @return {?}
     */
    DomAdapter.prototype.elementMatches = function (n, selector) { };
    /**
     * @abstract
     * @param {?} el
     * @return {?}
     */
    DomAdapter.prototype.isTemplateElement = function (el) { };
    /**
     * @abstract
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.isTextNode = function (node) { };
    /**
     * @abstract
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.isCommentNode = function (node) { };
    /**
     * @abstract
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.isElementNode = function (node) { };
    /**
     * @abstract
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.hasShadowRoot = function (node) { };
    /**
     * @abstract
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.isShadowRoot = function (node) { };
    /**
     * @abstract
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.importIntoDoc /*<T extends Node>*/ = function (node) { };
    /**
     * @abstract
     * @param {?} node
     * @return {?}
     */
    DomAdapter.prototype.adoptNode /*<T extends Node>*/ = function (node) { };
    /**
     * @abstract
     * @param {?} element
     * @return {?}
     */
    DomAdapter.prototype.getHref = function (element) { };
    /**
     * @abstract
     * @param {?} event
     * @return {?}
     */
    DomAdapter.prototype.getEventKey = function (event) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} baseUrl
     * @param {?} href
     * @return {?}
     */
    DomAdapter.prototype.resolveAndSetHref = function (element, baseUrl, href) { };
    /**
     * @abstract
     * @return {?}
     */
    DomAdapter.prototype.supportsDOMEvents = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DomAdapter.prototype.supportsNativeShadowDOM = function () { };
    /**
     * @abstract
     * @param {?} doc
     * @param {?} target
     * @return {?}
     */
    DomAdapter.prototype.getGlobalEventTarget = function (doc, target) { };
    /**
     * @abstract
     * @return {?}
     */
    DomAdapter.prototype.getHistory = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DomAdapter.prototype.getLocation = function () { };
    /**
     * @abstract
     * @param {?} doc
     * @return {?}
     */
    DomAdapter.prototype.getBaseHref = function (doc) { };
    /**
     * @abstract
     * @return {?}
     */
    DomAdapter.prototype.resetBaseElement = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DomAdapter.prototype.getUserAgent = function () { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    DomAdapter.prototype.setData = function (element, name, value) { };
    /**
     * @abstract
     * @param {?} element
     * @return {?}
     */
    DomAdapter.prototype.getComputedStyle = function (element) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} name
     * @return {?}
     */
    DomAdapter.prototype.getData = function (element, name) { };
    /**
     * @abstract
     * @return {?}
     */
    DomAdapter.prototype.supportsWebAnimation = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DomAdapter.prototype.performanceNow = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DomAdapter.prototype.getAnimationPrefix = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DomAdapter.prototype.getTransitionEnd = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DomAdapter.prototype.supportsAnimation = function () { };
    /**
     * @abstract
     * @return {?}
     */
    DomAdapter.prototype.supportsCookies = function () { };
    /**
     * @abstract
     * @param {?} name
     * @return {?}
     */
    DomAdapter.prototype.getCookie = function (name) { };
    /**
     * @abstract
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    DomAdapter.prototype.setCookie = function (name, value) { };
    return DomAdapter;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Provides DOM operations in any browser environment.
 *
 * \@security Tread carefully! Interacting with the DOM directly is dangerous and
 * can introduce XSS risks.
 * @abstract
 */
var GenericBrowserDomAdapter = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](GenericBrowserDomAdapter, _super);
    function GenericBrowserDomAdapter() {
        var _this = _super.call(this) || this;
        _this._animationPrefix = null;
        _this._transitionEnd = null;
        try {
            var element_1 = _this.createElement('div', document);
            if (_this.getStyle(element_1, 'animationName') != null) {
                _this._animationPrefix = '';
            }
            else {
                var domPrefixes = ['Webkit', 'Moz', 'O', 'ms'];
                for (var i = 0; i < domPrefixes.length; i++) {
                    if (_this.getStyle(element_1, domPrefixes[i] + 'AnimationName') != null) {
                        _this._animationPrefix = '-' + domPrefixes[i].toLowerCase() + '-';
                        break;
                    }
                }
            }
            var transEndEventNames_1 = {
                WebkitTransition: 'webkitTransitionEnd',
                MozTransition: 'transitionend',
                OTransition: 'oTransitionEnd otransitionend',
                transition: 'transitionend'
            };
            Object.keys(transEndEventNames_1).forEach(function (key) {
                if (_this.getStyle(element_1, key) != null) {
                    _this._transitionEnd = transEndEventNames_1[key];
                }
            });
        }
        catch (e) {
            _this._animationPrefix = null;
            _this._transitionEnd = null;
        }
        return _this;
    }
    /**
     * @param {?} el
     * @return {?}
     */
    GenericBrowserDomAdapter.prototype.getDistributedNodes = function (el) { return ((el)).getDistributedNodes(); };
    /**
     * @param {?} el
     * @param {?} baseUrl
     * @param {?} href
     * @return {?}
     */
    GenericBrowserDomAdapter.prototype.resolveAndSetHref = function (el, baseUrl, href) {
        el.href = href == null ? baseUrl : baseUrl + '/../' + href;
    };
    /**
     * @return {?}
     */
    GenericBrowserDomAdapter.prototype.supportsDOMEvents = function () { return true; };
    /**
     * @return {?}
     */
    GenericBrowserDomAdapter.prototype.supportsNativeShadowDOM = function () {
        return typeof ((document.body)).createShadowRoot === 'function';
    };
    /**
     * @return {?}
     */
    GenericBrowserDomAdapter.prototype.getAnimationPrefix = function () { return this._animationPrefix ? this._animationPrefix : ''; };
    /**
     * @return {?}
     */
    GenericBrowserDomAdapter.prototype.getTransitionEnd = function () { return this._transitionEnd ? this._transitionEnd : ''; };
    /**
     * @return {?}
     */
    GenericBrowserDomAdapter.prototype.supportsAnimation = function () {
        return this._animationPrefix != null && this._transitionEnd != null;
    };
    return GenericBrowserDomAdapter;
}(DomAdapter));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var _attrToPropMap = {
    'class': 'className',
    'innerHtml': 'innerHTML',
    'readonly': 'readOnly',
    'tabindex': 'tabIndex',
};
var DOM_KEY_LOCATION_NUMPAD = 3;
// Map to convert some key or keyIdentifier values to what will be returned by getEventKey
var _keyMap = {
    // The following values are here for cross-browser compatibility and to match the W3C standard
    // cf http://www.w3.org/TR/DOM-Level-3-Events-key/
    '\b': 'Backspace',
    '\t': 'Tab',
    '\x7F': 'Delete',
    '\x1B': 'Escape',
    'Del': 'Delete',
    'Esc': 'Escape',
    'Left': 'ArrowLeft',
    'Right': 'ArrowRight',
    'Up': 'ArrowUp',
    'Down': 'ArrowDown',
    'Menu': 'ContextMenu',
    'Scroll': 'ScrollLock',
    'Win': 'OS'
};
// There is a bug in Chrome for numeric keypad keys:
// https://code.google.com/p/chromium/issues/detail?id=155654
// 1, 2, 3 ... are reported as A, B, C ...
var _chromeNumKeyPadMap = {
    'A': '1',
    'B': '2',
    'C': '3',
    'D': '4',
    'E': '5',
    'F': '6',
    'G': '7',
    'H': '8',
    'I': '9',
    'J': '*',
    'K': '+',
    'M': '-',
    'N': '.',
    'O': '/',
    '\x60': '0',
    '\x90': 'NumLock'
};
var nodeContains;
if (__WEBPACK_IMPORTED_MODULE_2__angular_core__["_46" /* global */]['Node']) {
    nodeContains = __WEBPACK_IMPORTED_MODULE_2__angular_core__["_46" /* global */]['Node'].prototype.contains || function (node) {
        return !!(this.compareDocumentPosition(node) & 16);
    };
}
var BrowserDomAdapter = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](BrowserDomAdapter, _super);
    function BrowserDomAdapter() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @param {?} templateHtml
     * @return {?}
     */
    BrowserDomAdapter.prototype.parse = function (templateHtml) { throw new Error('parse not implemented'); };
    /**
     * @return {?}
     */
    BrowserDomAdapter.makeCurrent = function () { setRootDomAdapter(new BrowserDomAdapter()); };
    /**
     * @param {?} element
     * @param {?} name
     * @return {?}
     */
    BrowserDomAdapter.prototype.hasProperty = function (element, name) { return name in element; };
    /**
     * @param {?} el
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    BrowserDomAdapter.prototype.setProperty = function (el, name, value) { ((el))[name] = value; };
    /**
     * @param {?} el
     * @param {?} name
     * @return {?}
     */
    BrowserDomAdapter.prototype.getProperty = function (el, name) { return ((el))[name]; };
    /**
     * @param {?} el
     * @param {?} methodName
     * @param {?} args
     * @return {?}
     */
    BrowserDomAdapter.prototype.invoke = function (el, methodName, args) { ((el))[methodName].apply(((el)), args); };
    /**
     * @param {?} error
     * @return {?}
     */
    BrowserDomAdapter.prototype.logError = function (error) {
        if (window.console) {
            if (console.error) {
                console.error(error);
            }
            else {
                console.log(error);
            }
        }
    };
    /**
     * @param {?} error
     * @return {?}
     */
    BrowserDomAdapter.prototype.log = function (error) {
        if (window.console) {
            window.console.log && window.console.log(error);
        }
    };
    /**
     * @param {?} error
     * @return {?}
     */
    BrowserDomAdapter.prototype.logGroup = function (error) {
        if (window.console) {
            window.console.group && window.console.group(error);
        }
    };
    /**
     * @return {?}
     */
    BrowserDomAdapter.prototype.logGroupEnd = function () {
        if (window.console) {
            window.console.groupEnd && window.console.groupEnd();
        }
    };
    Object.defineProperty(BrowserDomAdapter.prototype, "attrToPropMap", {
        /**
         * @return {?}
         */
        get: function () { return _attrToPropMap; },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} nodeA
     * @param {?} nodeB
     * @return {?}
     */
    BrowserDomAdapter.prototype.contains = function (nodeA, nodeB) { return nodeContains.call(nodeA, nodeB); };
    /**
     * @param {?} el
     * @param {?} selector
     * @return {?}
     */
    BrowserDomAdapter.prototype.querySelector = function (el, selector) { return el.querySelector(selector); };
    /**
     * @param {?} el
     * @param {?} selector
     * @return {?}
     */
    BrowserDomAdapter.prototype.querySelectorAll = function (el, selector) { return el.querySelectorAll(selector); };
    /**
     * @param {?} el
     * @param {?} evt
     * @param {?} listener
     * @return {?}
     */
    BrowserDomAdapter.prototype.on = function (el, evt, listener) { el.addEventListener(evt, listener, false); };
    /**
     * @param {?} el
     * @param {?} evt
     * @param {?} listener
     * @return {?}
     */
    BrowserDomAdapter.prototype.onAndCancel = function (el, evt, listener) {
        el.addEventListener(evt, listener, false);
        // Needed to follow Dart's subscription semantic, until fix of
        // https://code.google.com/p/dart/issues/detail?id=17406
        return function () { el.removeEventListener(evt, listener, false); };
    };
    /**
     * @param {?} el
     * @param {?} evt
     * @return {?}
     */
    BrowserDomAdapter.prototype.dispatchEvent = function (el, evt) { el.dispatchEvent(evt); };
    /**
     * @param {?} eventType
     * @return {?}
     */
    BrowserDomAdapter.prototype.createMouseEvent = function (eventType) {
        var /** @type {?} */ evt = document.createEvent('MouseEvent');
        evt.initEvent(eventType, true, true);
        return evt;
    };
    /**
     * @param {?} eventType
     * @return {?}
     */
    BrowserDomAdapter.prototype.createEvent = function (eventType) {
        var /** @type {?} */ evt = document.createEvent('Event');
        evt.initEvent(eventType, true, true);
        return evt;
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    BrowserDomAdapter.prototype.preventDefault = function (evt) {
        evt.preventDefault();
        evt.returnValue = false;
    };
    /**
     * @param {?} evt
     * @return {?}
     */
    BrowserDomAdapter.prototype.isPrevented = function (evt) {
        return evt.defaultPrevented || evt.returnValue != null && !evt.returnValue;
    };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.getInnerHTML = function (el) { return el.innerHTML; };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.getTemplateContent = function (el) {
        return 'content' in el && el instanceof HTMLTemplateElement ? el.content : null;
    };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.getOuterHTML = function (el) { return el.outerHTML; };
    /**
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.nodeName = function (node) { return node.nodeName; };
    /**
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.nodeValue = function (node) { return node.nodeValue; };
    /**
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.type = function (node) { return node.type; };
    /**
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.content = function (node) {
        if (this.hasProperty(node, 'content')) {
            return ((node)).content;
        }
        else {
            return node;
        }
    };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.firstChild = function (el) { return el.firstChild; };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.nextSibling = function (el) { return el.nextSibling; };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.parentElement = function (el) { return el.parentNode; };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.childNodes = function (el) { return el.childNodes; };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.childNodesAsList = function (el) {
        var /** @type {?} */ childNodes = el.childNodes;
        var /** @type {?} */ res = new Array(childNodes.length);
        for (var /** @type {?} */ i = 0; i < childNodes.length; i++) {
            res[i] = childNodes[i];
        }
        return res;
    };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.clearNodes = function (el) {
        while (el.firstChild) {
            el.removeChild(el.firstChild);
        }
    };
    /**
     * @param {?} el
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.appendChild = function (el, node) { el.appendChild(node); };
    /**
     * @param {?} el
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.removeChild = function (el, node) { el.removeChild(node); };
    /**
     * @param {?} el
     * @param {?} newChild
     * @param {?} oldChild
     * @return {?}
     */
    BrowserDomAdapter.prototype.replaceChild = function (el, newChild, oldChild) { el.replaceChild(newChild, oldChild); };
    /**
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.remove = function (node) {
        if (node.parentNode) {
            node.parentNode.removeChild(node);
        }
        return node;
    };
    /**
     * @param {?} parent
     * @param {?} ref
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.insertBefore = function (parent, ref, node) { parent.insertBefore(node, ref); };
    /**
     * @param {?} parent
     * @param {?} ref
     * @param {?} nodes
     * @return {?}
     */
    BrowserDomAdapter.prototype.insertAllBefore = function (parent, ref, nodes) {
        nodes.forEach(function (n) { return parent.insertBefore(n, ref); });
    };
    /**
     * @param {?} parent
     * @param {?} ref
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.insertAfter = function (parent, ref, node) { parent.insertBefore(node, ref.nextSibling); };
    /**
     * @param {?} el
     * @param {?} value
     * @return {?}
     */
    BrowserDomAdapter.prototype.setInnerHTML = function (el, value) { el.innerHTML = value; };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.getText = function (el) { return el.textContent; };
    /**
     * @param {?} el
     * @param {?} value
     * @return {?}
     */
    BrowserDomAdapter.prototype.setText = function (el, value) { el.textContent = value; };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.getValue = function (el) { return el.value; };
    /**
     * @param {?} el
     * @param {?} value
     * @return {?}
     */
    BrowserDomAdapter.prototype.setValue = function (el, value) { el.value = value; };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.getChecked = function (el) { return el.checked; };
    /**
     * @param {?} el
     * @param {?} value
     * @return {?}
     */
    BrowserDomAdapter.prototype.setChecked = function (el, value) { el.checked = value; };
    /**
     * @param {?} text
     * @return {?}
     */
    BrowserDomAdapter.prototype.createComment = function (text) { return document.createComment(text); };
    /**
     * @param {?} html
     * @return {?}
     */
    BrowserDomAdapter.prototype.createTemplate = function (html) {
        var /** @type {?} */ t = document.createElement('template');
        t.innerHTML = html;
        return t;
    };
    /**
     * @param {?} tagName
     * @param {?=} doc
     * @return {?}
     */
    BrowserDomAdapter.prototype.createElement = function (tagName, doc) {
        if (doc === void 0) { doc = document; }
        return doc.createElement(tagName);
    };
    /**
     * @param {?} ns
     * @param {?} tagName
     * @param {?=} doc
     * @return {?}
     */
    BrowserDomAdapter.prototype.createElementNS = function (ns, tagName, doc) {
        if (doc === void 0) { doc = document; }
        return doc.createElementNS(ns, tagName);
    };
    /**
     * @param {?} text
     * @param {?=} doc
     * @return {?}
     */
    BrowserDomAdapter.prototype.createTextNode = function (text, doc) {
        if (doc === void 0) { doc = document; }
        return doc.createTextNode(text);
    };
    /**
     * @param {?} attrName
     * @param {?} attrValue
     * @param {?=} doc
     * @return {?}
     */
    BrowserDomAdapter.prototype.createScriptTag = function (attrName, attrValue, doc) {
        if (doc === void 0) { doc = document; }
        var /** @type {?} */ el = (doc.createElement('SCRIPT'));
        el.setAttribute(attrName, attrValue);
        return el;
    };
    /**
     * @param {?} css
     * @param {?=} doc
     * @return {?}
     */
    BrowserDomAdapter.prototype.createStyleElement = function (css, doc) {
        if (doc === void 0) { doc = document; }
        var /** @type {?} */ style = (doc.createElement('style'));
        this.appendChild(style, this.createTextNode(css));
        return style;
    };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.createShadowRoot = function (el) { return ((el)).createShadowRoot(); };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.getShadowRoot = function (el) { return ((el)).shadowRoot; };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.getHost = function (el) { return ((el)).host; };
    /**
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.clone = function (node) { return node.cloneNode(true); };
    /**
     * @param {?} element
     * @param {?} name
     * @return {?}
     */
    BrowserDomAdapter.prototype.getElementsByClassName = function (element, name) {
        return element.getElementsByClassName(name);
    };
    /**
     * @param {?} element
     * @param {?} name
     * @return {?}
     */
    BrowserDomAdapter.prototype.getElementsByTagName = function (element, name) {
        return element.getElementsByTagName(name);
    };
    /**
     * @param {?} element
     * @return {?}
     */
    BrowserDomAdapter.prototype.classList = function (element) { return Array.prototype.slice.call(element.classList, 0); };
    /**
     * @param {?} element
     * @param {?} className
     * @return {?}
     */
    BrowserDomAdapter.prototype.addClass = function (element, className) { element.classList.add(className); };
    /**
     * @param {?} element
     * @param {?} className
     * @return {?}
     */
    BrowserDomAdapter.prototype.removeClass = function (element, className) { element.classList.remove(className); };
    /**
     * @param {?} element
     * @param {?} className
     * @return {?}
     */
    BrowserDomAdapter.prototype.hasClass = function (element, className) {
        return element.classList.contains(className);
    };
    /**
     * @param {?} element
     * @param {?} styleName
     * @param {?} styleValue
     * @return {?}
     */
    BrowserDomAdapter.prototype.setStyle = function (element, styleName, styleValue) {
        element.style[styleName] = styleValue;
    };
    /**
     * @param {?} element
     * @param {?} stylename
     * @return {?}
     */
    BrowserDomAdapter.prototype.removeStyle = function (element, stylename) {
        // IE requires '' instead of null
        // see https://github.com/angular/angular/issues/7916
        element.style[stylename] = '';
    };
    /**
     * @param {?} element
     * @param {?} stylename
     * @return {?}
     */
    BrowserDomAdapter.prototype.getStyle = function (element, stylename) { return element.style[stylename]; };
    /**
     * @param {?} element
     * @param {?} styleName
     * @param {?=} styleValue
     * @return {?}
     */
    BrowserDomAdapter.prototype.hasStyle = function (element, styleName, styleValue) {
        var /** @type {?} */ value = this.getStyle(element, styleName) || '';
        return styleValue ? value == styleValue : value.length > 0;
    };
    /**
     * @param {?} element
     * @return {?}
     */
    BrowserDomAdapter.prototype.tagName = function (element) { return element.tagName; };
    /**
     * @param {?} element
     * @return {?}
     */
    BrowserDomAdapter.prototype.attributeMap = function (element) {
        var /** @type {?} */ res = new Map();
        var /** @type {?} */ elAttrs = element.attributes;
        for (var /** @type {?} */ i = 0; i < elAttrs.length; i++) {
            var /** @type {?} */ attrib = elAttrs[i];
            res.set(attrib.name, attrib.value);
        }
        return res;
    };
    /**
     * @param {?} element
     * @param {?} attribute
     * @return {?}
     */
    BrowserDomAdapter.prototype.hasAttribute = function (element, attribute) {
        return element.hasAttribute(attribute);
    };
    /**
     * @param {?} element
     * @param {?} ns
     * @param {?} attribute
     * @return {?}
     */
    BrowserDomAdapter.prototype.hasAttributeNS = function (element, ns, attribute) {
        return element.hasAttributeNS(ns, attribute);
    };
    /**
     * @param {?} element
     * @param {?} attribute
     * @return {?}
     */
    BrowserDomAdapter.prototype.getAttribute = function (element, attribute) {
        return element.getAttribute(attribute);
    };
    /**
     * @param {?} element
     * @param {?} ns
     * @param {?} name
     * @return {?}
     */
    BrowserDomAdapter.prototype.getAttributeNS = function (element, ns, name) {
        return element.getAttributeNS(ns, name);
    };
    /**
     * @param {?} element
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    BrowserDomAdapter.prototype.setAttribute = function (element, name, value) { element.setAttribute(name, value); };
    /**
     * @param {?} element
     * @param {?} ns
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    BrowserDomAdapter.prototype.setAttributeNS = function (element, ns, name, value) {
        element.setAttributeNS(ns, name, value);
    };
    /**
     * @param {?} element
     * @param {?} attribute
     * @return {?}
     */
    BrowserDomAdapter.prototype.removeAttribute = function (element, attribute) { element.removeAttribute(attribute); };
    /**
     * @param {?} element
     * @param {?} ns
     * @param {?} name
     * @return {?}
     */
    BrowserDomAdapter.prototype.removeAttributeNS = function (element, ns, name) {
        element.removeAttributeNS(ns, name);
    };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.templateAwareRoot = function (el) { return this.isTemplateElement(el) ? this.content(el) : el; };
    /**
     * @return {?}
     */
    BrowserDomAdapter.prototype.createHtmlDocument = function () {
        return document.implementation.createHTMLDocument('fakeTitle');
    };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.getBoundingClientRect = function (el) {
        try {
            return el.getBoundingClientRect();
        }
        catch (e) {
            return { top: 0, bottom: 0, left: 0, right: 0, width: 0, height: 0 };
        }
    };
    /**
     * @param {?} doc
     * @return {?}
     */
    BrowserDomAdapter.prototype.getTitle = function (doc) { return document.title; };
    /**
     * @param {?} doc
     * @param {?} newTitle
     * @return {?}
     */
    BrowserDomAdapter.prototype.setTitle = function (doc, newTitle) { document.title = newTitle || ''; };
    /**
     * @param {?} n
     * @param {?} selector
     * @return {?}
     */
    BrowserDomAdapter.prototype.elementMatches = function (n, selector) {
        if (n instanceof HTMLElement) {
            return n.matches && n.matches(selector) ||
                n.msMatchesSelector && n.msMatchesSelector(selector) ||
                n.webkitMatchesSelector && n.webkitMatchesSelector(selector);
        }
        return false;
    };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.isTemplateElement = function (el) {
        return el instanceof HTMLElement && el.nodeName == 'TEMPLATE';
    };
    /**
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.isTextNode = function (node) { return node.nodeType === Node.TEXT_NODE; };
    /**
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.isCommentNode = function (node) { return node.nodeType === Node.COMMENT_NODE; };
    /**
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.isElementNode = function (node) { return node.nodeType === Node.ELEMENT_NODE; };
    /**
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.hasShadowRoot = function (node) {
        return node.shadowRoot != null && node instanceof HTMLElement;
    };
    /**
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.isShadowRoot = function (node) { return node instanceof DocumentFragment; };
    /**
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.importIntoDoc = function (node) { return document.importNode(this.templateAwareRoot(node), true); };
    /**
     * @param {?} node
     * @return {?}
     */
    BrowserDomAdapter.prototype.adoptNode = function (node) { return document.adoptNode(node); };
    /**
     * @param {?} el
     * @return {?}
     */
    BrowserDomAdapter.prototype.getHref = function (el) { return ((el)).href; };
    /**
     * @param {?} event
     * @return {?}
     */
    BrowserDomAdapter.prototype.getEventKey = function (event) {
        var /** @type {?} */ key = event.key;
        if (key == null) {
            key = event.keyIdentifier;
            // keyIdentifier is defined in the old draft of DOM Level 3 Events implemented by Chrome and
            // Safari cf
            // http://www.w3.org/TR/2007/WD-DOM-Level-3-Events-20071221/events.html#Events-KeyboardEvents-Interfaces
            if (key == null) {
                return 'Unidentified';
            }
            if (key.startsWith('U+')) {
                key = String.fromCharCode(parseInt(key.substring(2), 16));
                if (event.location === DOM_KEY_LOCATION_NUMPAD && _chromeNumKeyPadMap.hasOwnProperty(key)) {
                    // There is a bug in Chrome for numeric keypad keys:
                    // https://code.google.com/p/chromium/issues/detail?id=155654
                    // 1, 2, 3 ... are reported as A, B, C ...
                    key = ((_chromeNumKeyPadMap))[key];
                }
            }
        }
        return _keyMap[key] || key;
    };
    /**
     * @param {?} doc
     * @param {?} target
     * @return {?}
     */
    BrowserDomAdapter.prototype.getGlobalEventTarget = function (doc, target) {
        if (target === 'window') {
            return window;
        }
        if (target === 'document') {
            return document;
        }
        if (target === 'body') {
            return document.body;
        }
        return null;
    };
    /**
     * @return {?}
     */
    BrowserDomAdapter.prototype.getHistory = function () { return window.history; };
    /**
     * @return {?}
     */
    BrowserDomAdapter.prototype.getLocation = function () { return window.location; };
    /**
     * @param {?} doc
     * @return {?}
     */
    BrowserDomAdapter.prototype.getBaseHref = function (doc) {
        var /** @type {?} */ href = getBaseElementHref();
        return href == null ? null : relativePath(href);
    };
    /**
     * @return {?}
     */
    BrowserDomAdapter.prototype.resetBaseElement = function () { baseElement = null; };
    /**
     * @return {?}
     */
    BrowserDomAdapter.prototype.getUserAgent = function () { return window.navigator.userAgent; };
    /**
     * @param {?} element
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    BrowserDomAdapter.prototype.setData = function (element, name, value) {
        this.setAttribute(element, 'data-' + name, value);
    };
    /**
     * @param {?} element
     * @param {?} name
     * @return {?}
     */
    BrowserDomAdapter.prototype.getData = function (element, name) {
        return this.getAttribute(element, 'data-' + name);
    };
    /**
     * @param {?} element
     * @return {?}
     */
    BrowserDomAdapter.prototype.getComputedStyle = function (element) { return getComputedStyle(element); };
    /**
     * @return {?}
     */
    BrowserDomAdapter.prototype.supportsWebAnimation = function () {
        return typeof ((Element)).prototype['animate'] === 'function';
    };
    /**
     * @return {?}
     */
    BrowserDomAdapter.prototype.performanceNow = function () {
        // performance.now() is not available in all browsers, see
        // http://caniuse.com/#search=performance.now
        return window.performance && window.performance.now ? window.performance.now() :
            new Date().getTime();
    };
    /**
     * @return {?}
     */
    BrowserDomAdapter.prototype.supportsCookies = function () { return true; };
    /**
     * @param {?} name
     * @return {?}
     */
    BrowserDomAdapter.prototype.getCookie = function (name) { return Object(__WEBPACK_IMPORTED_MODULE_1__angular_common__["e" /* parseCookieValue */])(document.cookie, name); };
    /**
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    BrowserDomAdapter.prototype.setCookie = function (name, value) {
        // document.cookie is magical, assigning into it assigns/overrides one cookie value, but does
        // not clear other cookies.
        document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value);
    };
    return BrowserDomAdapter;
}(GenericBrowserDomAdapter));
var baseElement = null;
/**
 * @return {?}
 */
function getBaseElementHref() {
    if (!baseElement) {
        baseElement = ((document.querySelector('base')));
        if (!baseElement) {
            return null;
        }
    }
    return baseElement.getAttribute('href');
}
// based on urlUtils.js in AngularJS 1
var urlParsingNode;
/**
 * @param {?} url
 * @return {?}
 */
function relativePath(url) {
    if (!urlParsingNode) {
        urlParsingNode = document.createElement('a');
    }
    urlParsingNode.setAttribute('href', url);
    return (urlParsingNode.pathname.charAt(0) === '/') ? urlParsingNode.pathname :
        '/' + urlParsingNode.pathname;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A DI Token representing the main rendering context. In a browser this is the DOM Document.
 *
 * Note: Document might not be available in the Application Context when Application and Rendering
 * Contexts are not the same (e.g. when running the application into a Web Worker).
 *
 * @deprecated import from `\@angular/common` instead.
 */
var DOCUMENT$1 = __WEBPACK_IMPORTED_MODULE_1__angular_common__["b" /* DOCUMENT */];
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 * @return {?}
 */
function supportsState() {
    return !!window.history.pushState;
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * `PlatformLocation` encapsulates all of the direct calls to platform APIs.
 * This class should not be used directly by an application developer. Instead, use
 * {\@link Location}.
 */
var BrowserPlatformLocation = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](BrowserPlatformLocation, _super);
    /**
     * @param {?} _doc
     */
    function BrowserPlatformLocation(_doc) {
        var _this = _super.call(this) || this;
        _this._doc = _doc;
        _this._init();
        return _this;
    }
    /**
     * \@internal
     * @return {?}
     */
    BrowserPlatformLocation.prototype._init = function () {
        this._location = getDOM().getLocation();
        this._history = getDOM().getHistory();
    };
    Object.defineProperty(BrowserPlatformLocation.prototype, "location", {
        /**
         * @return {?}
         */
        get: function () { return this._location; },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    BrowserPlatformLocation.prototype.getBaseHrefFromDOM = function () { return ((getDOM().getBaseHref(this._doc))); };
    /**
     * @param {?} fn
     * @return {?}
     */
    BrowserPlatformLocation.prototype.onPopState = function (fn) {
        getDOM().getGlobalEventTarget(this._doc, 'window').addEventListener('popstate', fn, false);
    };
    /**
     * @param {?} fn
     * @return {?}
     */
    BrowserPlatformLocation.prototype.onHashChange = function (fn) {
        getDOM().getGlobalEventTarget(this._doc, 'window').addEventListener('hashchange', fn, false);
    };
    Object.defineProperty(BrowserPlatformLocation.prototype, "pathname", {
        /**
         * @return {?}
         */
        get: function () { return this._location.pathname; },
        /**
         * @param {?} newPath
         * @return {?}
         */
        set: function (newPath) { this._location.pathname = newPath; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BrowserPlatformLocation.prototype, "search", {
        /**
         * @return {?}
         */
        get: function () { return this._location.search; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(BrowserPlatformLocation.prototype, "hash", {
        /**
         * @return {?}
         */
        get: function () { return this._location.hash; },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} state
     * @param {?} title
     * @param {?} url
     * @return {?}
     */
    BrowserPlatformLocation.prototype.pushState = function (state, title, url) {
        if (supportsState()) {
            this._history.pushState(state, title, url);
        }
        else {
            this._location.hash = url;
        }
    };
    /**
     * @param {?} state
     * @param {?} title
     * @param {?} url
     * @return {?}
     */
    BrowserPlatformLocation.prototype.replaceState = function (state, title, url) {
        if (supportsState()) {
            this._history.replaceState(state, title, url);
        }
        else {
            this._location.hash = url;
        }
    };
    /**
     * @return {?}
     */
    BrowserPlatformLocation.prototype.forward = function () { this._history.forward(); };
    /**
     * @return {?}
     */
    BrowserPlatformLocation.prototype.back = function () { this._history.back(); };
    return BrowserPlatformLocation;
}(__WEBPACK_IMPORTED_MODULE_1__angular_common__["c" /* PlatformLocation */]));
BrowserPlatformLocation.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
BrowserPlatformLocation.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["A" /* Inject */], args: [DOCUMENT$1,] },] },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A service that can be used to get and add meta tags.
 *
 * \@experimental
 */
var Meta = (function () {
    /**
     * @param {?} _doc
     */
    function Meta(_doc) {
        this._doc = _doc;
        this._dom = getDOM();
    }
    /**
     * @param {?} tag
     * @param {?=} forceCreation
     * @return {?}
     */
    Meta.prototype.addTag = function (tag, forceCreation) {
        if (forceCreation === void 0) { forceCreation = false; }
        if (!tag)
            return null;
        return this._getOrCreateElement(tag, forceCreation);
    };
    /**
     * @param {?} tags
     * @param {?=} forceCreation
     * @return {?}
     */
    Meta.prototype.addTags = function (tags, forceCreation) {
        var _this = this;
        if (forceCreation === void 0) { forceCreation = false; }
        if (!tags)
            return [];
        return tags.reduce(function (result, tag) {
            if (tag) {
                result.push(_this._getOrCreateElement(tag, forceCreation));
            }
            return result;
        }, []);
    };
    /**
     * @param {?} attrSelector
     * @return {?}
     */
    Meta.prototype.getTag = function (attrSelector) {
        if (!attrSelector)
            return null;
        return this._dom.querySelector(this._doc, "meta[" + attrSelector + "]");
    };
    /**
     * @param {?} attrSelector
     * @return {?}
     */
    Meta.prototype.getTags = function (attrSelector) {
        if (!attrSelector)
            return [];
        var /** @type {?} */ list /*NodeList*/ = this._dom.querySelectorAll(this._doc, "meta[" + attrSelector + "]");
        return list ? [].slice.call(list) : [];
    };
    /**
     * @param {?} tag
     * @param {?=} selector
     * @return {?}
     */
    Meta.prototype.updateTag = function (tag, selector) {
        if (!tag)
            return null;
        selector = selector || this._parseSelector(tag);
        var /** @type {?} */ meta = ((this.getTag(selector)));
        if (meta) {
            return this._setMetaElementAttributes(tag, meta);
        }
        return this._getOrCreateElement(tag, true);
    };
    /**
     * @param {?} attrSelector
     * @return {?}
     */
    Meta.prototype.removeTag = function (attrSelector) { this.removeTagElement(/** @type {?} */ ((this.getTag(attrSelector)))); };
    /**
     * @param {?} meta
     * @return {?}
     */
    Meta.prototype.removeTagElement = function (meta) {
        if (meta) {
            this._dom.remove(meta);
        }
    };
    /**
     * @param {?} meta
     * @param {?=} forceCreation
     * @return {?}
     */
    Meta.prototype._getOrCreateElement = function (meta, forceCreation) {
        if (forceCreation === void 0) { forceCreation = false; }
        if (!forceCreation) {
            var /** @type {?} */ selector = this._parseSelector(meta);
            var /** @type {?} */ elem = ((this.getTag(selector)));
            // It's allowed to have multiple elements with the same name so it's not enough to
            // just check that element with the same name already present on the page. We also need to
            // check if element has tag attributes
            if (elem && this._containsAttributes(meta, elem))
                return elem;
        }
        var /** @type {?} */ element = (this._dom.createElement('meta'));
        this._setMetaElementAttributes(meta, element);
        var /** @type {?} */ head = this._dom.getElementsByTagName(this._doc, 'head')[0];
        this._dom.appendChild(head, element);
        return element;
    };
    /**
     * @param {?} tag
     * @param {?} el
     * @return {?}
     */
    Meta.prototype._setMetaElementAttributes = function (tag, el) {
        var _this = this;
        Object.keys(tag).forEach(function (prop) { return _this._dom.setAttribute(el, prop, tag[prop]); });
        return el;
    };
    /**
     * @param {?} tag
     * @return {?}
     */
    Meta.prototype._parseSelector = function (tag) {
        var /** @type {?} */ attr = tag.name ? 'name' : 'property';
        return attr + "=\"" + tag[attr] + "\"";
    };
    /**
     * @param {?} tag
     * @param {?} elem
     * @return {?}
     */
    Meta.prototype._containsAttributes = function (tag, elem) {
        var _this = this;
        return Object.keys(tag).every(function (key) { return _this._dom.getAttribute(elem, key) === tag[key]; });
    };
    return Meta;
}());
Meta.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
Meta.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["A" /* Inject */], args: [DOCUMENT$1,] },] },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * An id that identifies a particular application being bootstrapped, that should
 * match across the client/server boundary.
 */
var TRANSITION_ID = new __WEBPACK_IMPORTED_MODULE_2__angular_core__["C" /* InjectionToken */]('TRANSITION_ID');
/**
 * @param {?} transitionId
 * @param {?} document
 * @param {?} injector
 * @return {?}
 */
function appInitializerFactory(transitionId, document, injector) {
    return function () {
        // Wait for all application initializers to be completed before removing the styles set by
        // the server.
        injector.get(__WEBPACK_IMPORTED_MODULE_2__angular_core__["d" /* ApplicationInitStatus */]).donePromise.then(function () {
            var /** @type {?} */ dom = getDOM();
            var /** @type {?} */ styles = Array.prototype.slice.apply(dom.querySelectorAll(document, "style[ng-transition]"));
            styles.filter(function (el) { return dom.getAttribute(el, 'ng-transition') === transitionId; })
                .forEach(function (el) { return dom.remove(el); });
        });
    };
}
var SERVER_TRANSITION_PROVIDERS = [
    {
        provide: __WEBPACK_IMPORTED_MODULE_2__angular_core__["c" /* APP_INITIALIZER */],
        useFactory: appInitializerFactory,
        deps: [TRANSITION_ID, DOCUMENT$1, __WEBPACK_IMPORTED_MODULE_2__angular_core__["D" /* Injector */]],
        multi: true
    },
];
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var BrowserGetTestability = (function () {
    function BrowserGetTestability() {
    }
    /**
     * @return {?}
     */
    BrowserGetTestability.init = function () { Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["_27" /* setTestabilityGetter */])(new BrowserGetTestability()); };
    /**
     * @param {?} registry
     * @return {?}
     */
    BrowserGetTestability.prototype.addToWindow = function (registry) {
        __WEBPACK_IMPORTED_MODULE_2__angular_core__["_46" /* global */]['getAngularTestability'] = function (elem, findInAncestors) {
            if (findInAncestors === void 0) { findInAncestors = true; }
            var /** @type {?} */ testability = registry.findTestabilityInTree(elem, findInAncestors);
            if (testability == null) {
                throw new Error('Could not find testability for element.');
            }
            return testability;
        };
        __WEBPACK_IMPORTED_MODULE_2__angular_core__["_46" /* global */]['getAllAngularTestabilities'] = function () { return registry.getAllTestabilities(); };
        __WEBPACK_IMPORTED_MODULE_2__angular_core__["_46" /* global */]['getAllAngularRootElements'] = function () { return registry.getAllRootElements(); };
        var /** @type {?} */ whenAllStable = function (callback /** TODO #9100 */) {
            var /** @type {?} */ testabilities = __WEBPACK_IMPORTED_MODULE_2__angular_core__["_46" /* global */]['getAllAngularTestabilities']();
            var /** @type {?} */ count = testabilities.length;
            var /** @type {?} */ didWork = false;
            var /** @type {?} */ decrement = function (didWork_ /** TODO #9100 */) {
                didWork = didWork || didWork_;
                count--;
                if (count == 0) {
                    callback(didWork);
                }
            };
            testabilities.forEach(function (testability /** TODO #9100 */) {
                testability.whenStable(decrement);
            });
        };
        if (!__WEBPACK_IMPORTED_MODULE_2__angular_core__["_46" /* global */]['frameworkStabilizers']) {
            __WEBPACK_IMPORTED_MODULE_2__angular_core__["_46" /* global */]['frameworkStabilizers'] = [];
        }
        __WEBPACK_IMPORTED_MODULE_2__angular_core__["_46" /* global */]['frameworkStabilizers'].push(whenAllStable);
    };
    /**
     * @param {?} registry
     * @param {?} elem
     * @param {?} findInAncestors
     * @return {?}
     */
    BrowserGetTestability.prototype.findTestabilityInTree = function (registry, elem, findInAncestors) {
        if (elem == null) {
            return null;
        }
        var /** @type {?} */ t = registry.getTestability(elem);
        if (t != null) {
            return t;
        }
        else if (!findInAncestors) {
            return null;
        }
        if (getDOM().isShadowRoot(elem)) {
            return this.findTestabilityInTree(registry, getDOM().getHost(elem), true);
        }
        return this.findTestabilityInTree(registry, getDOM().parentElement(elem), true);
    };
    return BrowserGetTestability;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A service that can be used to get and set the title of a current HTML document.
 *
 * Since an Angular application can't be bootstrapped on the entire HTML document (`<html>` tag)
 * it is not possible to bind to the `text` property of the `HTMLTitleElement` elements
 * (representing the `<title>` tag). Instead, this service can be used to set and get the current
 * title value.
 *
 * \@experimental
 */
var Title = (function () {
    /**
     * @param {?} _doc
     */
    function Title(_doc) {
        this._doc = _doc;
    }
    /**
     * Get the title of the current HTML document.
     * @return {?}
     */
    Title.prototype.getTitle = function () { return getDOM().getTitle(this._doc); };
    /**
     * Set the title of the current HTML document.
     * @param {?} newTitle
     * @return {?}
     */
    Title.prototype.setTitle = function (newTitle) { getDOM().setTitle(this._doc, newTitle); };
    return Title;
}());
Title.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
Title.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["A" /* Inject */], args: [DOCUMENT$1,] },] },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @param {?} input
 * @return {?}
 */
/**
 * @param {?} input
 * @return {?}
 */
/**
 * Exports the value under a given `name` in the global property `ng`. For example `ng.probe` if
 * `name` is `'probe'`.
 * @param {?} name Name under which it will be exported. Keep in mind this will be a property of the
 * global `ng` object.
 * @param {?} value The value to export.
 * @return {?}
 */
function exportNgVar(name, value) {
    if (!ng) {
        __WEBPACK_IMPORTED_MODULE_2__angular_core__["_46" /* global */]['ng'] = ng = ((__WEBPACK_IMPORTED_MODULE_2__angular_core__["_46" /* global */]['ng'])) || {};
    }
    ng[name] = value;
}
var ng;
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var CORE_TOKENS = {
    'ApplicationRef': __WEBPACK_IMPORTED_MODULE_2__angular_core__["f" /* ApplicationRef */],
    'NgZone': __WEBPACK_IMPORTED_MODULE_2__angular_core__["P" /* NgZone */],
};
var INSPECT_GLOBAL_NAME = 'probe';
var CORE_TOKENS_GLOBAL_NAME = 'coreTokens';
/**
 * Returns a {\@link DebugElement} for the given native DOM element, or
 * null if the given native element does not have an Angular view associated
 * with it.
 * @param {?} element
 * @return {?}
 */
function inspectNativeElement(element) {
    return Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["_20" /* getDebugNode */])(element);
}
/**
 * Deprecated. Use the one from '\@angular/core'.
 * @deprecated
 */
var NgProbeToken$1 = (function () {
    /**
     * @param {?} name
     * @param {?} token
     */
    function NgProbeToken$1(name, token) {
        this.name = name;
        this.token = token;
    }
    return NgProbeToken$1;
}());
/**
 * @param {?} extraTokens
 * @param {?} coreTokens
 * @return {?}
 */
function _createNgProbe(extraTokens, coreTokens) {
    var /** @type {?} */ tokens = (extraTokens || []).concat(coreTokens || []);
    exportNgVar(INSPECT_GLOBAL_NAME, inspectNativeElement);
    exportNgVar(CORE_TOKENS_GLOBAL_NAME, Object.assign({}, CORE_TOKENS, _ngProbeTokensToMap(tokens || [])));
    return function () { return inspectNativeElement; };
}
/**
 * @param {?} tokens
 * @return {?}
 */
function _ngProbeTokensToMap(tokens) {
    return tokens.reduce(function (prev, t) { return (prev[t.name] = t.token, prev); }, {});
}
/**
 * Providers which support debugging Angular applications (e.g. via `ng.probe`).
 */
var ELEMENT_PROBE_PROVIDERS = [
    {
        provide: __WEBPACK_IMPORTED_MODULE_2__angular_core__["c" /* APP_INITIALIZER */],
        useFactory: _createNgProbe,
        deps: [
            [NgProbeToken$1, new __WEBPACK_IMPORTED_MODULE_2__angular_core__["Q" /* Optional */]()],
            [__WEBPACK_IMPORTED_MODULE_2__angular_core__["O" /* NgProbeToken */], new __WEBPACK_IMPORTED_MODULE_2__angular_core__["Q" /* Optional */]()],
        ],
        multi: true,
    },
];
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * \@stable
 */
var EVENT_MANAGER_PLUGINS = new __WEBPACK_IMPORTED_MODULE_2__angular_core__["C" /* InjectionToken */]('EventManagerPlugins');
/**
 * \@stable
 */
var EventManager = (function () {
    /**
     * @param {?} plugins
     * @param {?} _zone
     */
    function EventManager(plugins, _zone) {
        var _this = this;
        this._zone = _zone;
        this._eventNameToPlugin = new Map();
        plugins.forEach(function (p) { return p.manager = _this; });
        this._plugins = plugins.slice().reverse();
    }
    /**
     * @param {?} element
     * @param {?} eventName
     * @param {?} handler
     * @return {?}
     */
    EventManager.prototype.addEventListener = function (element, eventName, handler) {
        var /** @type {?} */ plugin = this._findPluginFor(eventName);
        return plugin.addEventListener(element, eventName, handler);
    };
    /**
     * @param {?} target
     * @param {?} eventName
     * @param {?} handler
     * @return {?}
     */
    EventManager.prototype.addGlobalEventListener = function (target, eventName, handler) {
        var /** @type {?} */ plugin = this._findPluginFor(eventName);
        return plugin.addGlobalEventListener(target, eventName, handler);
    };
    /**
     * @return {?}
     */
    EventManager.prototype.getZone = function () { return this._zone; };
    /**
     * \@internal
     * @param {?} eventName
     * @return {?}
     */
    EventManager.prototype._findPluginFor = function (eventName) {
        var /** @type {?} */ plugin = this._eventNameToPlugin.get(eventName);
        if (plugin) {
            return plugin;
        }
        var /** @type {?} */ plugins = this._plugins;
        for (var /** @type {?} */ i = 0; i < plugins.length; i++) {
            var /** @type {?} */ plugin_1 = plugins[i];
            if (plugin_1.supports(eventName)) {
                this._eventNameToPlugin.set(eventName, plugin_1);
                return plugin_1;
            }
        }
        throw new Error("No event manager plugin found for event " + eventName);
    };
    return EventManager;
}());
EventManager.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
EventManager.ctorParameters = function () { return [
    { type: Array, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["A" /* Inject */], args: [EVENT_MANAGER_PLUGINS,] },] },
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["P" /* NgZone */], },
]; };
/**
 * @abstract
 */
var EventManagerPlugin = (function () {
    /**
     * @param {?} _doc
     */
    function EventManagerPlugin(_doc) {
        this._doc = _doc;
    }
    /**
     * @abstract
     * @param {?} eventName
     * @return {?}
     */
    EventManagerPlugin.prototype.supports = function (eventName) { };
    /**
     * @abstract
     * @param {?} element
     * @param {?} eventName
     * @param {?} handler
     * @return {?}
     */
    EventManagerPlugin.prototype.addEventListener = function (element, eventName, handler) { };
    /**
     * @param {?} element
     * @param {?} eventName
     * @param {?} handler
     * @return {?}
     */
    EventManagerPlugin.prototype.addGlobalEventListener = function (element, eventName, handler) {
        var /** @type {?} */ target = getDOM().getGlobalEventTarget(this._doc, element);
        if (!target) {
            throw new Error("Unsupported event target " + target + " for event " + eventName);
        }
        return this.addEventListener(target, eventName, handler);
    };
    return EventManagerPlugin;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var SharedStylesHost = (function () {
    function SharedStylesHost() {
        /**
         * \@internal
         */
        this._stylesSet = new Set();
    }
    /**
     * @param {?} styles
     * @return {?}
     */
    SharedStylesHost.prototype.addStyles = function (styles) {
        var _this = this;
        var /** @type {?} */ additions = new Set();
        styles.forEach(function (style) {
            if (!_this._stylesSet.has(style)) {
                _this._stylesSet.add(style);
                additions.add(style);
            }
        });
        this.onStylesAdded(additions);
    };
    /**
     * @param {?} additions
     * @return {?}
     */
    SharedStylesHost.prototype.onStylesAdded = function (additions) { };
    /**
     * @return {?}
     */
    SharedStylesHost.prototype.getAllStyles = function () { return Array.from(this._stylesSet); };
    return SharedStylesHost;
}());
SharedStylesHost.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
SharedStylesHost.ctorParameters = function () { return []; };
var DomSharedStylesHost = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](DomSharedStylesHost, _super);
    /**
     * @param {?} _doc
     */
    function DomSharedStylesHost(_doc) {
        var _this = _super.call(this) || this;
        _this._doc = _doc;
        _this._hostNodes = new Set();
        _this._styleNodes = new Set();
        _this._hostNodes.add(_doc.head);
        return _this;
    }
    /**
     * @param {?} styles
     * @param {?} host
     * @return {?}
     */
    DomSharedStylesHost.prototype._addStylesToHost = function (styles, host) {
        var _this = this;
        styles.forEach(function (style) {
            var /** @type {?} */ styleEl = _this._doc.createElement('style');
            styleEl.textContent = style;
            _this._styleNodes.add(host.appendChild(styleEl));
        });
    };
    /**
     * @param {?} hostNode
     * @return {?}
     */
    DomSharedStylesHost.prototype.addHost = function (hostNode) {
        this._addStylesToHost(this._stylesSet, hostNode);
        this._hostNodes.add(hostNode);
    };
    /**
     * @param {?} hostNode
     * @return {?}
     */
    DomSharedStylesHost.prototype.removeHost = function (hostNode) { this._hostNodes.delete(hostNode); };
    /**
     * @param {?} additions
     * @return {?}
     */
    DomSharedStylesHost.prototype.onStylesAdded = function (additions) {
        var _this = this;
        this._hostNodes.forEach(function (hostNode) { return _this._addStylesToHost(additions, hostNode); });
    };
    /**
     * @return {?}
     */
    DomSharedStylesHost.prototype.ngOnDestroy = function () { this._styleNodes.forEach(function (styleNode) { return getDOM().remove(styleNode); }); };
    return DomSharedStylesHost;
}(SharedStylesHost));
DomSharedStylesHost.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
DomSharedStylesHost.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["A" /* Inject */], args: [DOCUMENT$1,] },] },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var NAMESPACE_URIS = {
    'svg': 'http://www.w3.org/2000/svg',
    'xhtml': 'http://www.w3.org/1999/xhtml',
    'xlink': 'http://www.w3.org/1999/xlink',
    'xml': 'http://www.w3.org/XML/1998/namespace',
    'xmlns': 'http://www.w3.org/2000/xmlns/',
};
var COMPONENT_REGEX = /%COMP%/g;
var COMPONENT_VARIABLE = '%COMP%';
var HOST_ATTR = "_nghost-" + COMPONENT_VARIABLE;
var CONTENT_ATTR = "_ngcontent-" + COMPONENT_VARIABLE;
/**
 * @param {?} componentShortId
 * @return {?}
 */
function shimContentAttribute(componentShortId) {
    return CONTENT_ATTR.replace(COMPONENT_REGEX, componentShortId);
}
/**
 * @param {?} componentShortId
 * @return {?}
 */
function shimHostAttribute(componentShortId) {
    return HOST_ATTR.replace(COMPONENT_REGEX, componentShortId);
}
/**
 * @param {?} compId
 * @param {?} styles
 * @param {?} target
 * @return {?}
 */
function flattenStyles(compId, styles, target) {
    for (var /** @type {?} */ i = 0; i < styles.length; i++) {
        var /** @type {?} */ style = styles[i];
        if (Array.isArray(style)) {
            flattenStyles(compId, style, target);
        }
        else {
            style = style.replace(COMPONENT_REGEX, compId);
            target.push(style);
        }
    }
    return target;
}
/**
 * @param {?} eventHandler
 * @return {?}
 */
function decoratePreventDefault(eventHandler) {
    return function (event) {
        var /** @type {?} */ allowDefaultBehavior = eventHandler(event);
        if (allowDefaultBehavior === false) {
            // TODO(tbosch): move preventDefault into event plugins...
            event.preventDefault();
            event.returnValue = false;
        }
    };
}
var DomRendererFactory2 = (function () {
    /**
     * @param {?} eventManager
     * @param {?} sharedStylesHost
     */
    function DomRendererFactory2(eventManager, sharedStylesHost) {
        this.eventManager = eventManager;
        this.sharedStylesHost = sharedStylesHost;
        this.rendererByCompId = new Map();
        this.defaultRenderer = new DefaultDomRenderer2(eventManager);
    }
    /**
     * @param {?} element
     * @param {?} type
     * @return {?}
     */
    DomRendererFactory2.prototype.createRenderer = function (element, type) {
        if (!element || !type) {
            return this.defaultRenderer;
        }
        switch (type.encapsulation) {
            case __WEBPACK_IMPORTED_MODULE_2__angular_core__["_15" /* ViewEncapsulation */].Emulated: {
                var /** @type {?} */ renderer = this.rendererByCompId.get(type.id);
                if (!renderer) {
                    renderer =
                        new EmulatedEncapsulationDomRenderer2(this.eventManager, this.sharedStylesHost, type);
                    this.rendererByCompId.set(type.id, renderer);
                }
                ((renderer)).applyToHost(element);
                return renderer;
            }
            case __WEBPACK_IMPORTED_MODULE_2__angular_core__["_15" /* ViewEncapsulation */].Native:
                return new ShadowDomRenderer(this.eventManager, this.sharedStylesHost, element, type);
            default: {
                if (!this.rendererByCompId.has(type.id)) {
                    var /** @type {?} */ styles = flattenStyles(type.id, type.styles, []);
                    this.sharedStylesHost.addStyles(styles);
                    this.rendererByCompId.set(type.id, this.defaultRenderer);
                }
                return this.defaultRenderer;
            }
        }
    };
    /**
     * @return {?}
     */
    DomRendererFactory2.prototype.begin = function () { };
    /**
     * @return {?}
     */
    DomRendererFactory2.prototype.end = function () { };
    return DomRendererFactory2;
}());
DomRendererFactory2.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
DomRendererFactory2.ctorParameters = function () { return [
    { type: EventManager, },
    { type: DomSharedStylesHost, },
]; };
var DefaultDomRenderer2 = (function () {
    /**
     * @param {?} eventManager
     */
    function DefaultDomRenderer2(eventManager) {
        this.eventManager = eventManager;
        this.data = Object.create(null);
    }
    /**
     * @return {?}
     */
    DefaultDomRenderer2.prototype.destroy = function () { };
    /**
     * @param {?} name
     * @param {?=} namespace
     * @return {?}
     */
    DefaultDomRenderer2.prototype.createElement = function (name, namespace) {
        if (namespace) {
            return document.createElementNS(NAMESPACE_URIS[namespace], name);
        }
        return document.createElement(name);
    };
    /**
     * @param {?} value
     * @return {?}
     */
    DefaultDomRenderer2.prototype.createComment = function (value) { return document.createComment(value); };
    /**
     * @param {?} value
     * @return {?}
     */
    DefaultDomRenderer2.prototype.createText = function (value) { return document.createTextNode(value); };
    /**
     * @param {?} parent
     * @param {?} newChild
     * @return {?}
     */
    DefaultDomRenderer2.prototype.appendChild = function (parent, newChild) { parent.appendChild(newChild); };
    /**
     * @param {?} parent
     * @param {?} newChild
     * @param {?} refChild
     * @return {?}
     */
    DefaultDomRenderer2.prototype.insertBefore = function (parent, newChild, refChild) {
        if (parent) {
            parent.insertBefore(newChild, refChild);
        }
    };
    /**
     * @param {?} parent
     * @param {?} oldChild
     * @return {?}
     */
    DefaultDomRenderer2.prototype.removeChild = function (parent, oldChild) {
        if (parent) {
            parent.removeChild(oldChild);
        }
    };
    /**
     * @param {?} selectorOrNode
     * @return {?}
     */
    DefaultDomRenderer2.prototype.selectRootElement = function (selectorOrNode) {
        var /** @type {?} */ el = typeof selectorOrNode === 'string' ? document.querySelector(selectorOrNode) :
            selectorOrNode;
        if (!el) {
            throw new Error("The selector \"" + selectorOrNode + "\" did not match any elements");
        }
        el.textContent = '';
        return el;
    };
    /**
     * @param {?} node
     * @return {?}
     */
    DefaultDomRenderer2.prototype.parentNode = function (node) { return node.parentNode; };
    /**
     * @param {?} node
     * @return {?}
     */
    DefaultDomRenderer2.prototype.nextSibling = function (node) { return node.nextSibling; };
    /**
     * @param {?} el
     * @param {?} name
     * @param {?} value
     * @param {?=} namespace
     * @return {?}
     */
    DefaultDomRenderer2.prototype.setAttribute = function (el, name, value, namespace) {
        if (namespace) {
            name = namespace + ":" + name;
            var /** @type {?} */ namespaceUri = NAMESPACE_URIS[namespace];
            if (namespaceUri) {
                el.setAttributeNS(namespaceUri, name, value);
            }
            else {
                el.setAttribute(name, value);
            }
        }
        else {
            el.setAttribute(name, value);
        }
    };
    /**
     * @param {?} el
     * @param {?} name
     * @param {?=} namespace
     * @return {?}
     */
    DefaultDomRenderer2.prototype.removeAttribute = function (el, name, namespace) {
        if (namespace) {
            var /** @type {?} */ namespaceUri = NAMESPACE_URIS[namespace];
            if (namespaceUri) {
                el.removeAttributeNS(namespaceUri, name);
            }
            else {
                el.removeAttribute(namespace + ":" + name);
            }
        }
        else {
            el.removeAttribute(name);
        }
    };
    /**
     * @param {?} el
     * @param {?} name
     * @return {?}
     */
    DefaultDomRenderer2.prototype.addClass = function (el, name) { el.classList.add(name); };
    /**
     * @param {?} el
     * @param {?} name
     * @return {?}
     */
    DefaultDomRenderer2.prototype.removeClass = function (el, name) { el.classList.remove(name); };
    /**
     * @param {?} el
     * @param {?} style
     * @param {?} value
     * @param {?} flags
     * @return {?}
     */
    DefaultDomRenderer2.prototype.setStyle = function (el, style, value, flags) {
        if (flags & __WEBPACK_IMPORTED_MODULE_2__angular_core__["_1" /* RendererStyleFlags2 */].DashCase) {
            el.style.setProperty(style, value, !!(flags & __WEBPACK_IMPORTED_MODULE_2__angular_core__["_1" /* RendererStyleFlags2 */].Important) ? 'important' : '');
        }
        else {
            el.style[style] = value;
        }
    };
    /**
     * @param {?} el
     * @param {?} style
     * @param {?} flags
     * @return {?}
     */
    DefaultDomRenderer2.prototype.removeStyle = function (el, style, flags) {
        if (flags & __WEBPACK_IMPORTED_MODULE_2__angular_core__["_1" /* RendererStyleFlags2 */].DashCase) {
            el.style.removeProperty(style);
        }
        else {
            // IE requires '' instead of null
            // see https://github.com/angular/angular/issues/7916
            el.style[style] = '';
        }
    };
    /**
     * @param {?} el
     * @param {?} name
     * @param {?} value
     * @return {?}
     */
    DefaultDomRenderer2.prototype.setProperty = function (el, name, value) {
        checkNoSyntheticProp(name, 'property');
        el[name] = value;
    };
    /**
     * @param {?} node
     * @param {?} value
     * @return {?}
     */
    DefaultDomRenderer2.prototype.setValue = function (node, value) { node.nodeValue = value; };
    /**
     * @param {?} target
     * @param {?} event
     * @param {?} callback
     * @return {?}
     */
    DefaultDomRenderer2.prototype.listen = function (target, event, callback) {
        checkNoSyntheticProp(event, 'listener');
        if (typeof target === 'string') {
            return (this.eventManager.addGlobalEventListener(target, event, decoratePreventDefault(callback)));
        }
        return ((this.eventManager.addEventListener(target, event, decoratePreventDefault(callback))));
    };
    return DefaultDomRenderer2;
}());
var AT_CHARCODE = '@'.charCodeAt(0);
/**
 * @param {?} name
 * @param {?} nameKind
 * @return {?}
 */
function checkNoSyntheticProp(name, nameKind) {
    if (name.charCodeAt(0) === AT_CHARCODE) {
        throw new Error("Found the synthetic " + nameKind + " " + name + ". Please include either \"BrowserAnimationsModule\" or \"NoopAnimationsModule\" in your application.");
    }
}
var EmulatedEncapsulationDomRenderer2 = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](EmulatedEncapsulationDomRenderer2, _super);
    /**
     * @param {?} eventManager
     * @param {?} sharedStylesHost
     * @param {?} component
     */
    function EmulatedEncapsulationDomRenderer2(eventManager, sharedStylesHost, component) {
        var _this = _super.call(this, eventManager) || this;
        _this.component = component;
        var styles = flattenStyles(component.id, component.styles, []);
        sharedStylesHost.addStyles(styles);
        _this.contentAttr = shimContentAttribute(component.id);
        _this.hostAttr = shimHostAttribute(component.id);
        return _this;
    }
    /**
     * @param {?} element
     * @return {?}
     */
    EmulatedEncapsulationDomRenderer2.prototype.applyToHost = function (element) { _super.prototype.setAttribute.call(this, element, this.hostAttr, ''); };
    /**
     * @param {?} parent
     * @param {?} name
     * @return {?}
     */
    EmulatedEncapsulationDomRenderer2.prototype.createElement = function (parent, name) {
        var /** @type {?} */ el = _super.prototype.createElement.call(this, parent, name);
        _super.prototype.setAttribute.call(this, el, this.contentAttr, '');
        return el;
    };
    return EmulatedEncapsulationDomRenderer2;
}(DefaultDomRenderer2));
var ShadowDomRenderer = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](ShadowDomRenderer, _super);
    /**
     * @param {?} eventManager
     * @param {?} sharedStylesHost
     * @param {?} hostEl
     * @param {?} component
     */
    function ShadowDomRenderer(eventManager, sharedStylesHost, hostEl, component) {
        var _this = _super.call(this, eventManager) || this;
        _this.sharedStylesHost = sharedStylesHost;
        _this.hostEl = hostEl;
        _this.component = component;
        _this.shadowRoot = hostEl.createShadowRoot();
        _this.sharedStylesHost.addHost(_this.shadowRoot);
        var styles = flattenStyles(component.id, component.styles, []);
        for (var i = 0; i < styles.length; i++) {
            var styleEl = document.createElement('style');
            styleEl.textContent = styles[i];
            _this.shadowRoot.appendChild(styleEl);
        }
        return _this;
    }
    /**
     * @param {?} node
     * @return {?}
     */
    ShadowDomRenderer.prototype.nodeOrShadowRoot = function (node) { return node === this.hostEl ? this.shadowRoot : node; };
    /**
     * @return {?}
     */
    ShadowDomRenderer.prototype.destroy = function () { this.sharedStylesHost.removeHost(this.shadowRoot); };
    /**
     * @param {?} parent
     * @param {?} newChild
     * @return {?}
     */
    ShadowDomRenderer.prototype.appendChild = function (parent, newChild) {
        return _super.prototype.appendChild.call(this, this.nodeOrShadowRoot(parent), newChild);
    };
    /**
     * @param {?} parent
     * @param {?} newChild
     * @param {?} refChild
     * @return {?}
     */
    ShadowDomRenderer.prototype.insertBefore = function (parent, newChild, refChild) {
        return _super.prototype.insertBefore.call(this, this.nodeOrShadowRoot(parent), newChild, refChild);
    };
    /**
     * @param {?} parent
     * @param {?} oldChild
     * @return {?}
     */
    ShadowDomRenderer.prototype.removeChild = function (parent, oldChild) {
        return _super.prototype.removeChild.call(this, this.nodeOrShadowRoot(parent), oldChild);
    };
    /**
     * @param {?} node
     * @return {?}
     */
    ShadowDomRenderer.prototype.parentNode = function (node) {
        return this.nodeOrShadowRoot(_super.prototype.parentNode.call(this, this.nodeOrShadowRoot(node)));
    };
    return ShadowDomRenderer;
}(DefaultDomRenderer2));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var DomEventsPlugin = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](DomEventsPlugin, _super);
    /**
     * @param {?} doc
     */
    function DomEventsPlugin(doc) {
        return _super.call(this, doc) || this;
    }
    /**
     * @param {?} eventName
     * @return {?}
     */
    DomEventsPlugin.prototype.supports = function (eventName) { return true; };
    /**
     * @param {?} element
     * @param {?} eventName
     * @param {?} handler
     * @return {?}
     */
    DomEventsPlugin.prototype.addEventListener = function (element, eventName, handler) {
        element.addEventListener(eventName, /** @type {?} */ (handler), false);
        return function () { return element.removeEventListener(eventName, /** @type {?} */ (handler), false); };
    };
    return DomEventsPlugin;
}(EventManagerPlugin));
DomEventsPlugin.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
DomEventsPlugin.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["A" /* Inject */], args: [DOCUMENT$1,] },] },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var EVENT_NAMES = {
    // pan
    'pan': true,
    'panstart': true,
    'panmove': true,
    'panend': true,
    'pancancel': true,
    'panleft': true,
    'panright': true,
    'panup': true,
    'pandown': true,
    // pinch
    'pinch': true,
    'pinchstart': true,
    'pinchmove': true,
    'pinchend': true,
    'pinchcancel': true,
    'pinchin': true,
    'pinchout': true,
    // press
    'press': true,
    'pressup': true,
    // rotate
    'rotate': true,
    'rotatestart': true,
    'rotatemove': true,
    'rotateend': true,
    'rotatecancel': true,
    // swipe
    'swipe': true,
    'swipeleft': true,
    'swiperight': true,
    'swipeup': true,
    'swipedown': true,
    // tap
    'tap': true,
};
/**
 * A DI token that you can use to provide{\@link HammerGestureConfig} to Angular. Use it to configure
 * Hammer gestures.
 *
 * \@experimental
 */
var HAMMER_GESTURE_CONFIG = new __WEBPACK_IMPORTED_MODULE_2__angular_core__["C" /* InjectionToken */]('HammerGestureConfig');
/**
 * \@experimental
 */
var HammerGestureConfig = (function () {
    function HammerGestureConfig() {
        this.events = [];
        this.overrides = {};
    }
    /**
     * @param {?} element
     * @return {?}
     */
    HammerGestureConfig.prototype.buildHammer = function (element) {
        var /** @type {?} */ mc = new Hammer(element);
        mc.get('pinch').set({ enable: true });
        mc.get('rotate').set({ enable: true });
        for (var /** @type {?} */ eventName in this.overrides) {
            mc.get(eventName).set(this.overrides[eventName]);
        }
        return mc;
    };
    return HammerGestureConfig;
}());
HammerGestureConfig.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
HammerGestureConfig.ctorParameters = function () { return []; };
var HammerGesturesPlugin = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](HammerGesturesPlugin, _super);
    /**
     * @param {?} doc
     * @param {?} _config
     */
    function HammerGesturesPlugin(doc, _config) {
        var _this = _super.call(this, doc) || this;
        _this._config = _config;
        return _this;
    }
    /**
     * @param {?} eventName
     * @return {?}
     */
    HammerGesturesPlugin.prototype.supports = function (eventName) {
        if (!EVENT_NAMES.hasOwnProperty(eventName.toLowerCase()) && !this.isCustomEvent(eventName)) {
            return false;
        }
        if (!((window)).Hammer) {
            throw new Error("Hammer.js is not loaded, can not bind " + eventName + " event");
        }
        return true;
    };
    /**
     * @param {?} element
     * @param {?} eventName
     * @param {?} handler
     * @return {?}
     */
    HammerGesturesPlugin.prototype.addEventListener = function (element, eventName, handler) {
        var _this = this;
        var /** @type {?} */ zone = this.manager.getZone();
        eventName = eventName.toLowerCase();
        return zone.runOutsideAngular(function () {
            // Creating the manager bind events, must be done outside of angular
            var /** @type {?} */ mc = _this._config.buildHammer(element);
            var /** @type {?} */ callback = function (eventObj) {
                zone.runGuarded(function () { handler(eventObj); });
            };
            mc.on(eventName, callback);
            return function () { return mc.off(eventName, callback); };
        });
    };
    /**
     * @param {?} eventName
     * @return {?}
     */
    HammerGesturesPlugin.prototype.isCustomEvent = function (eventName) { return this._config.events.indexOf(eventName) > -1; };
    return HammerGesturesPlugin;
}(EventManagerPlugin));
HammerGesturesPlugin.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
HammerGesturesPlugin.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["A" /* Inject */], args: [DOCUMENT$1,] },] },
    { type: HammerGestureConfig, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["A" /* Inject */], args: [HAMMER_GESTURE_CONFIG,] },] },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var MODIFIER_KEYS = ['alt', 'control', 'meta', 'shift'];
var MODIFIER_KEY_GETTERS = {
    'alt': function (event) { return event.altKey; },
    'control': function (event) { return event.ctrlKey; },
    'meta': function (event) { return event.metaKey; },
    'shift': function (event) { return event.shiftKey; }
};
/**
 * \@experimental
 */
var KeyEventsPlugin = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](KeyEventsPlugin, _super);
    /**
     * @param {?} doc
     */
    function KeyEventsPlugin(doc) {
        return _super.call(this, doc) || this;
    }
    /**
     * @param {?} eventName
     * @return {?}
     */
    KeyEventsPlugin.prototype.supports = function (eventName) { return KeyEventsPlugin.parseEventName(eventName) != null; };
    /**
     * @param {?} element
     * @param {?} eventName
     * @param {?} handler
     * @return {?}
     */
    KeyEventsPlugin.prototype.addEventListener = function (element, eventName, handler) {
        var /** @type {?} */ parsedEvent = ((KeyEventsPlugin.parseEventName(eventName)));
        var /** @type {?} */ outsideHandler = KeyEventsPlugin.eventCallback(parsedEvent['fullKey'], handler, this.manager.getZone());
        return this.manager.getZone().runOutsideAngular(function () {
            return getDOM().onAndCancel(element, parsedEvent['domEventName'], outsideHandler);
        });
    };
    /**
     * @param {?} eventName
     * @return {?}
     */
    KeyEventsPlugin.parseEventName = function (eventName) {
        var /** @type {?} */ parts = eventName.toLowerCase().split('.');
        var /** @type {?} */ domEventName = parts.shift();
        if ((parts.length === 0) || !(domEventName === 'keydown' || domEventName === 'keyup')) {
            return null;
        }
        var /** @type {?} */ key = KeyEventsPlugin._normalizeKey(/** @type {?} */ ((parts.pop())));
        var /** @type {?} */ fullKey = '';
        MODIFIER_KEYS.forEach(function (modifierName) {
            var /** @type {?} */ index = parts.indexOf(modifierName);
            if (index > -1) {
                parts.splice(index, 1);
                fullKey += modifierName + '.';
            }
        });
        fullKey += key;
        if (parts.length != 0 || key.length === 0) {
            // returning null instead of throwing to let another plugin process the event
            return null;
        }
        var /** @type {?} */ result = {};
        result['domEventName'] = domEventName;
        result['fullKey'] = fullKey;
        return result;
    };
    /**
     * @param {?} event
     * @return {?}
     */
    KeyEventsPlugin.getEventFullKey = function (event) {
        var /** @type {?} */ fullKey = '';
        var /** @type {?} */ key = getDOM().getEventKey(event);
        key = key.toLowerCase();
        if (key === ' ') {
            key = 'space'; // for readability
        }
        else if (key === '.') {
            key = 'dot'; // because '.' is used as a separator in event names
        }
        MODIFIER_KEYS.forEach(function (modifierName) {
            if (modifierName != key) {
                var /** @type {?} */ modifierGetter = MODIFIER_KEY_GETTERS[modifierName];
                if (modifierGetter(event)) {
                    fullKey += modifierName + '.';
                }
            }
        });
        fullKey += key;
        return fullKey;
    };
    /**
     * @param {?} fullKey
     * @param {?} handler
     * @param {?} zone
     * @return {?}
     */
    KeyEventsPlugin.eventCallback = function (fullKey, handler, zone) {
        return function (event /** TODO #9100 */) {
            if (KeyEventsPlugin.getEventFullKey(event) === fullKey) {
                zone.runGuarded(function () { return handler(event); });
            }
        };
    };
    /**
     * \@internal
     * @param {?} keyName
     * @return {?}
     */
    KeyEventsPlugin._normalizeKey = function (keyName) {
        // TODO: switch to a Map if the mapping grows too much
        switch (keyName) {
            case 'esc':
                return 'escape';
            default:
                return keyName;
        }
    };
    return KeyEventsPlugin;
}(EventManagerPlugin));
KeyEventsPlugin.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
KeyEventsPlugin.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["A" /* Inject */], args: [DOCUMENT$1,] },] },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A pattern that recognizes a commonly useful subset of URLs that are safe.
 *
 * This regular expression matches a subset of URLs that will not cause script
 * execution if used in URL context within a HTML document. Specifically, this
 * regular expression matches if (comment from here on and regex copied from
 * Soy's EscapingConventions):
 * (1) Either a protocol in a whitelist (http, https, mailto or ftp).
 * (2) or no protocol.  A protocol must be followed by a colon. The below
 *     allows that by allowing colons only after one of the characters [/?#].
 *     A colon after a hash (#) must be in the fragment.
 *     Otherwise, a colon after a (?) must be in a query.
 *     Otherwise, a colon after a single solidus (/) must be in a path.
 *     Otherwise, a colon after a double solidus (//) must be in the authority
 *     (before port).
 *
 * The pattern disallows &, used in HTML entity declarations before
 * one of the characters in [/?#]. This disallows HTML entities used in the
 * protocol name, which should never happen, e.g. "h&#116;tp" for "http".
 * It also disallows HTML entities in the first path part of a relative path,
 * e.g. "foo&lt;bar/baz".  Our existing escaping functions should not produce
 * that. More importantly, it disallows masking of a colon,
 * e.g. "javascript&#58;...".
 *
 * This regular expression was taken from the Closure sanitization library.
 */
var SAFE_URL_PATTERN = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi;
/**
 * A pattern that matches safe data URLs. Only matches image, video and audio types.
 */
var DATA_URL_PATTERN = /^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;
/**
 * @param {?} url
 * @return {?}
 */
function sanitizeUrl(url) {
    url = String(url);
    if (url.match(SAFE_URL_PATTERN) || url.match(DATA_URL_PATTERN))
        return url;
    if (Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["_22" /* isDevMode */])()) {
        getDOM().log("WARNING: sanitizing unsafe URL value " + url + " (see http://g.co/ng/security#xss)");
    }
    return 'unsafe:' + url;
}
/**
 * @param {?} srcset
 * @return {?}
 */
function sanitizeSrcset(srcset) {
    srcset = String(srcset);
    return srcset.split(',').map(function (srcset) { return sanitizeUrl(srcset.trim()); }).join(', ');
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * A <body> element that can be safely used to parse untrusted HTML. Lazily initialized below.
 */
var inertElement = null;
/**
 * Lazily initialized to make sure the DOM adapter gets set before use.
 */
var DOM = null;
/**
 * Returns an HTML element that is guaranteed to not execute code when creating elements in it.
 * @return {?}
 */
function getInertElement() {
    if (inertElement)
        return inertElement;
    DOM = getDOM();
    // Prefer using <template> element if supported.
    var /** @type {?} */ templateEl = DOM.createElement('template');
    if ('content' in templateEl)
        return templateEl;
    var /** @type {?} */ doc = DOM.createHtmlDocument();
    inertElement = DOM.querySelector(doc, 'body');
    if (inertElement == null) {
        // usually there should be only one body element in the document, but IE doesn't have any, so we
        // need to create one.
        var /** @type {?} */ html = DOM.createElement('html', doc);
        inertElement = DOM.createElement('body', doc);
        DOM.appendChild(html, inertElement);
        DOM.appendChild(doc, html);
    }
    return inertElement;
}
/**
 * @param {?} tags
 * @return {?}
 */
function tagSet(tags) {
    var /** @type {?} */ res = {};
    for (var _i = 0, _a = tags.split(','); _i < _a.length; _i++) {
        var t = _a[_i];
        res[t] = true;
    }
    return res;
}
/**
 * @param {...?} sets
 * @return {?}
 */
function merge() {
    var sets = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        sets[_i] = arguments[_i];
    }
    var /** @type {?} */ res = {};
    for (var _a = 0, sets_1 = sets; _a < sets_1.length; _a++) {
        var s = sets_1[_a];
        for (var /** @type {?} */ v in s) {
            if (s.hasOwnProperty(v))
                res[v] = true;
        }
    }
    return res;
}
// Good source of info about elements and attributes
// http://dev.w3.org/html5/spec/Overview.html#semantics
// http://simon.html5.org/html-elements
// Safe Void Elements - HTML5
// http://dev.w3.org/html5/spec/Overview.html#void-elements
var VOID_ELEMENTS = tagSet('area,br,col,hr,img,wbr');
// Elements that you can, intentionally, leave open (and which close themselves)
// http://dev.w3.org/html5/spec/Overview.html#optional-tags
var OPTIONAL_END_TAG_BLOCK_ELEMENTS = tagSet('colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr');
var OPTIONAL_END_TAG_INLINE_ELEMENTS = tagSet('rp,rt');
var OPTIONAL_END_TAG_ELEMENTS = merge(OPTIONAL_END_TAG_INLINE_ELEMENTS, OPTIONAL_END_TAG_BLOCK_ELEMENTS);
// Safe Block Elements - HTML5
var BLOCK_ELEMENTS = merge(OPTIONAL_END_TAG_BLOCK_ELEMENTS, tagSet('address,article,' +
    'aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,' +
    'h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul'));
// Inline Elements - HTML5
var INLINE_ELEMENTS = merge(OPTIONAL_END_TAG_INLINE_ELEMENTS, tagSet('a,abbr,acronym,audio,b,' +
    'bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,' +
    'samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video'));
var VALID_ELEMENTS = merge(VOID_ELEMENTS, BLOCK_ELEMENTS, INLINE_ELEMENTS, OPTIONAL_END_TAG_ELEMENTS);
// Attributes that have href and hence need to be sanitized
var URI_ATTRS = tagSet('background,cite,href,itemtype,longdesc,poster,src,xlink:href');
// Attributes that have special href set hence need to be sanitized
var SRCSET_ATTRS = tagSet('srcset');
var HTML_ATTRS = tagSet('abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,' +
    'compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,' +
    'ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,' +
    'scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,' +
    'valign,value,vspace,width');
// NB: This currently consciously doesn't support SVG. SVG sanitization has had several security
// issues in the past, so it seems safer to leave it out if possible. If support for binding SVG via
// innerHTML is required, SVG attributes should be added here.
// NB: Sanitization does not allow <form> elements or other active elements (<button> etc). Those
// can be sanitized, but they increase security surface area without a legitimate use case, so they
// are left out here.
var VALID_ATTRS = merge(URI_ATTRS, SRCSET_ATTRS, HTML_ATTRS);
/**
 * SanitizingHtmlSerializer serializes a DOM fragment, stripping out any unsafe elements and unsafe
 * attributes.
 */
var SanitizingHtmlSerializer = (function () {
    function SanitizingHtmlSerializer() {
        this.sanitizedSomething = false;
        this.buf = [];
    }
    /**
     * @param {?} el
     * @return {?}
     */
    SanitizingHtmlSerializer.prototype.sanitizeChildren = function (el) {
        // This cannot use a TreeWalker, as it has to run on Angular's various DOM adapters.
        // However this code never accesses properties off of `document` before deleting its contents
        // again, so it shouldn't be vulnerable to DOM clobbering.
        var /** @type {?} */ current = ((el.firstChild));
        while (current) {
            if (DOM.isElementNode(current)) {
                this.startElement(/** @type {?} */ (current));
            }
            else if (DOM.isTextNode(current)) {
                this.chars(/** @type {?} */ ((DOM.nodeValue(current))));
            }
            else {
                // Strip non-element, non-text nodes.
                this.sanitizedSomething = true;
            }
            if (DOM.firstChild(current)) {
                current = ((DOM.firstChild(current)));
                continue;
            }
            while (current) {
                // Leaving the element. Walk up and to the right, closing tags as we go.
                if (DOM.isElementNode(current)) {
                    this.endElement(/** @type {?} */ (current));
                }
                var /** @type {?} */ next = checkClobberedElement(current, /** @type {?} */ ((DOM.nextSibling(current))));
                if (next) {
                    current = next;
                    break;
                }
                current = checkClobberedElement(current, /** @type {?} */ ((DOM.parentElement(current))));
            }
        }
        return this.buf.join('');
    };
    /**
     * @param {?} element
     * @return {?}
     */
    SanitizingHtmlSerializer.prototype.startElement = function (element) {
        var _this = this;
        var /** @type {?} */ tagName = DOM.nodeName(element).toLowerCase();
        if (!VALID_ELEMENTS.hasOwnProperty(tagName)) {
            this.sanitizedSomething = true;
            return;
        }
        this.buf.push('<');
        this.buf.push(tagName);
        DOM.attributeMap(element).forEach(function (value, attrName) {
            var /** @type {?} */ lower = attrName.toLowerCase();
            if (!VALID_ATTRS.hasOwnProperty(lower)) {
                _this.sanitizedSomething = true;
                return;
            }
            // TODO(martinprobst): Special case image URIs for data:image/...
            if (URI_ATTRS[lower])
                value = sanitizeUrl(value);
            if (SRCSET_ATTRS[lower])
                value = sanitizeSrcset(value);
            _this.buf.push(' ');
            _this.buf.push(attrName);
            _this.buf.push('="');
            _this.buf.push(encodeEntities(value));
            _this.buf.push('"');
        });
        this.buf.push('>');
    };
    /**
     * @param {?} current
     * @return {?}
     */
    SanitizingHtmlSerializer.prototype.endElement = function (current) {
        var /** @type {?} */ tagName = DOM.nodeName(current).toLowerCase();
        if (VALID_ELEMENTS.hasOwnProperty(tagName) && !VOID_ELEMENTS.hasOwnProperty(tagName)) {
            this.buf.push('</');
            this.buf.push(tagName);
            this.buf.push('>');
        }
    };
    /**
     * @param {?} chars
     * @return {?}
     */
    SanitizingHtmlSerializer.prototype.chars = function (chars) { this.buf.push(encodeEntities(chars)); };
    return SanitizingHtmlSerializer;
}());
/**
 * @param {?} node
 * @param {?} nextNode
 * @return {?}
 */
function checkClobberedElement(node, nextNode) {
    if (nextNode && DOM.contains(node, nextNode)) {
        throw new Error("Failed to sanitize html because the element is clobbered: " + DOM.getOuterHTML(node));
    }
    return nextNode;
}
// Regular Expressions for parsing tags and attributes
var SURROGATE_PAIR_REGEXP = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g;
// ! to ~ is the ASCII range.
var NON_ALPHANUMERIC_REGEXP = /([^\#-~ |!])/g;
/**
 * Escapes all potentially dangerous characters, so that the
 * resulting string can be safely inserted into attribute or
 * element text.
 * @param {?} value
 * @return {?}
 */
function encodeEntities(value) {
    return value.replace(/&/g, '&amp;')
        .replace(SURROGATE_PAIR_REGEXP, function (match) {
        var /** @type {?} */ hi = match.charCodeAt(0);
        var /** @type {?} */ low = match.charCodeAt(1);
        return '&#' + (((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000) + ';';
    })
        .replace(NON_ALPHANUMERIC_REGEXP, function (match) { return '&#' + match.charCodeAt(0) + ';'; })
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;');
}
/**
 * When IE9-11 comes across an unknown namespaced attribute e.g. 'xlink:foo' it adds 'xmlns:ns1'
 * attribute to declare ns1 namespace and prefixes the attribute with 'ns1' (e.g. 'ns1:xlink:foo').
 *
 * This is undesirable since we don't want to allow any of these custom attributes. This method
 * strips them all.
 * @param {?} el
 * @return {?}
 */
function stripCustomNsAttrs(el) {
    DOM.attributeMap(el).forEach(function (_, attrName) {
        if (attrName === 'xmlns:ns1' || attrName.indexOf('ns1:') === 0) {
            DOM.removeAttribute(el, attrName);
        }
    });
    for (var _i = 0, _a = DOM.childNodesAsList(el); _i < _a.length; _i++) {
        var n = _a[_i];
        if (DOM.isElementNode(n))
            stripCustomNsAttrs(/** @type {?} */ (n));
    }
}
/**
 * Sanitizes the given unsafe, untrusted HTML fragment, and returns HTML text that is safe to add to
 * the DOM in a browser environment.
 * @param {?} defaultDoc
 * @param {?} unsafeHtmlInput
 * @return {?}
 */
function sanitizeHtml(defaultDoc, unsafeHtmlInput) {
    try {
        var /** @type {?} */ containerEl = getInertElement();
        // Make sure unsafeHtml is actually a string (TypeScript types are not enforced at runtime).
        var /** @type {?} */ unsafeHtml = unsafeHtmlInput ? String(unsafeHtmlInput) : '';
        // mXSS protection. Repeatedly parse the document to make sure it stabilizes, so that a browser
        // trying to auto-correct incorrect HTML cannot cause formerly inert HTML to become dangerous.
        var /** @type {?} */ mXSSAttempts = 5;
        var /** @type {?} */ parsedHtml = unsafeHtml;
        do {
            if (mXSSAttempts === 0) {
                throw new Error('Failed to sanitize html because the input is unstable');
            }
            mXSSAttempts--;
            unsafeHtml = parsedHtml;
            DOM.setInnerHTML(containerEl, unsafeHtml);
            if (defaultDoc.documentMode) {
                // strip custom-namespaced attributes on IE<=11
                stripCustomNsAttrs(containerEl);
            }
            parsedHtml = DOM.getInnerHTML(containerEl);
        } while (unsafeHtml !== parsedHtml);
        var /** @type {?} */ sanitizer = new SanitizingHtmlSerializer();
        var /** @type {?} */ safeHtml = sanitizer.sanitizeChildren(DOM.getTemplateContent(containerEl) || containerEl);
        // Clear out the body element.
        var /** @type {?} */ parent = DOM.getTemplateContent(containerEl) || containerEl;
        for (var _i = 0, _a = DOM.childNodesAsList(parent); _i < _a.length; _i++) {
            var child = _a[_i];
            DOM.removeChild(parent, child);
        }
        if (Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["_22" /* isDevMode */])() && sanitizer.sanitizedSomething) {
            DOM.log('WARNING: sanitizing HTML stripped some content (see http://g.co/ng/security#xss).');
        }
        return safeHtml;
    }
    catch (e) {
        // In case anything goes wrong, clear out inertElement to reset the entire DOM structure.
        inertElement = null;
        throw e;
    }
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Regular expression for safe style values.
 *
 * Quotes (" and ') are allowed, but a check must be done elsewhere to ensure they're balanced.
 *
 * ',' allows multiple values to be assigned to the same property (e.g. background-attachment or
 * font-family) and hence could allow multiple values to get injected, but that should pose no risk
 * of XSS.
 *
 * The function expression checks only for XSS safety, not for CSS validity.
 *
 * This regular expression was taken from the Closure sanitization library, and augmented for
 * transformation values.
 */
var VALUES = '[-,."\'%_!# a-zA-Z0-9]+';
var TRANSFORMATION_FNS = '(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?';
var COLOR_FNS = '(?:rgb|hsl)a?';
var GRADIENTS = '(?:repeating-)?(?:linear|radial)-gradient';
var CSS3_FNS = '(?:calc|attr)';
var FN_ARGS = '\\([-0-9.%, #a-zA-Z]+\\)';
var SAFE_STYLE_VALUE = new RegExp("^(" + VALUES + "|" +
    ("(?:" + TRANSFORMATION_FNS + "|" + COLOR_FNS + "|" + GRADIENTS + "|" + CSS3_FNS + ")") +
    (FN_ARGS + ")$"), 'g');
/**
 * Matches a `url(...)` value with an arbitrary argument as long as it does
 * not contain parentheses.
 *
 * The URL value still needs to be sanitized separately.
 *
 * `url(...)` values are a very common use case, e.g. for `background-image`. With carefully crafted
 * CSS style rules, it is possible to construct an information leak with `url` values in CSS, e.g.
 * by observing whether scroll bars are displayed, or character ranges used by a font face
 * definition.
 *
 * Angular only allows binding CSS values (as opposed to entire CSS rules), so it is unlikely that
 * binding a URL value without further cooperation from the page will cause an information leak, and
 * if so, it is just a leak, not a full blown XSS vulnerability.
 *
 * Given the common use case, low likelihood of attack vector, and low impact of an attack, this
 * code is permissive and allows URLs that sanitize otherwise.
 */
var URL_RE = /^url\(([^)]+)\)$/;
/**
 * Checks that quotes (" and ') are properly balanced inside a string. Assumes
 * that neither escape (\) nor any other character that could result in
 * breaking out of a string parsing context are allowed;
 * see http://www.w3.org/TR/css3-syntax/#string-token-diagram.
 *
 * This code was taken from the Closure sanitization library.
 * @param {?} value
 * @return {?}
 */
function hasBalancedQuotes(value) {
    var /** @type {?} */ outsideSingle = true;
    var /** @type {?} */ outsideDouble = true;
    for (var /** @type {?} */ i = 0; i < value.length; i++) {
        var /** @type {?} */ c = value.charAt(i);
        if (c === '\'' && outsideDouble) {
            outsideSingle = !outsideSingle;
        }
        else if (c === '"' && outsideSingle) {
            outsideDouble = !outsideDouble;
        }
    }
    return outsideSingle && outsideDouble;
}
/**
 * Sanitizes the given untrusted CSS style property value (i.e. not an entire object, just a single
 * value) and returns a value that is safe to use in a browser environment.
 * @param {?} value
 * @return {?}
 */
function sanitizeStyle(value) {
    value = String(value).trim(); // Make sure it's actually a string.
    if (!value)
        return '';
    // Single url(...) values are supported, but only for URLs that sanitize cleanly. See above for
    // reasoning behind this.
    var /** @type {?} */ urlMatch = value.match(URL_RE);
    if ((urlMatch && sanitizeUrl(urlMatch[1]) === urlMatch[1]) ||
        value.match(SAFE_STYLE_VALUE) && hasBalancedQuotes(value)) {
        return value; // Safe style values.
    }
    if (Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["_22" /* isDevMode */])()) {
        getDOM().log("WARNING: sanitizing unsafe style value " + value + " (see http://g.co/ng/security#xss).");
    }
    return 'unsafe';
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * DomSanitizer helps preventing Cross Site Scripting Security bugs (XSS) by sanitizing
 * values to be safe to use in the different DOM contexts.
 *
 * For example, when binding a URL in an `<a [href]="someValue">` hyperlink, `someValue` will be
 * sanitized so that an attacker cannot inject e.g. a `javascript:` URL that would execute code on
 * the website.
 *
 * In specific situations, it might be necessary to disable sanitization, for example if the
 * application genuinely needs to produce a `javascript:` style link with a dynamic value in it.
 * Users can bypass security by constructing a value with one of the `bypassSecurityTrust...`
 * methods, and then binding to that value from the template.
 *
 * These situations should be very rare, and extraordinary care must be taken to avoid creating a
 * Cross Site Scripting (XSS) security bug!
 *
 * When using `bypassSecurityTrust...`, make sure to call the method as early as possible and as
 * close as possible to the source of the value, to make it easy to verify no security bug is
 * created by its use.
 *
 * It is not required (and not recommended) to bypass security if the value is safe, e.g. a URL that
 * does not start with a suspicious protocol, or an HTML snippet that does not contain dangerous
 * code. The sanitizer leaves safe values intact.
 *
 * \@security Calling any of the `bypassSecurityTrust...` APIs disables Angular's built-in
 * sanitization for the value passed in. Carefully check and audit all values and code paths going
 * into this call. Make sure any user data is appropriately escaped for this security context.
 * For more detail, see the [Security Guide](http://g.co/ng/security).
 *
 * \@stable
 * @abstract
 */
var DomSanitizer = (function () {
    function DomSanitizer() {
    }
    /**
     * Sanitizes a value for use in the given SecurityContext.
     *
     * If value is trusted for the context, this method will unwrap the contained safe value and use
     * it directly. Otherwise, value will be sanitized to be safe in the given context, for example
     * by replacing URLs that have an unsafe protocol part (such as `javascript:`). The implementation
     * is responsible to make sure that the value can definitely be safely used in the given context.
     * @abstract
     * @param {?} context
     * @param {?} value
     * @return {?}
     */
    DomSanitizer.prototype.sanitize = function (context, value) { };
    /**
     * Bypass security and trust the given value to be safe HTML. Only use this when the bound HTML
     * is unsafe (e.g. contains `<script>` tags) and the code should be executed. The sanitizer will
     * leave safe HTML intact, so in most situations this method should not be used.
     *
     * **WARNING:** calling this method with untrusted user data exposes your application to XSS
     * security risks!
     * @abstract
     * @param {?} value
     * @return {?}
     */
    DomSanitizer.prototype.bypassSecurityTrustHtml = function (value) { };
    /**
     * Bypass security and trust the given value to be safe style value (CSS).
     *
     * **WARNING:** calling this method with untrusted user data exposes your application to XSS
     * security risks!
     * @abstract
     * @param {?} value
     * @return {?}
     */
    DomSanitizer.prototype.bypassSecurityTrustStyle = function (value) { };
    /**
     * Bypass security and trust the given value to be safe JavaScript.
     *
     * **WARNING:** calling this method with untrusted user data exposes your application to XSS
     * security risks!
     * @abstract
     * @param {?} value
     * @return {?}
     */
    DomSanitizer.prototype.bypassSecurityTrustScript = function (value) { };
    /**
     * Bypass security and trust the given value to be a safe style URL, i.e. a value that can be used
     * in hyperlinks or `<img src>`.
     *
     * **WARNING:** calling this method with untrusted user data exposes your application to XSS
     * security risks!
     * @abstract
     * @param {?} value
     * @return {?}
     */
    DomSanitizer.prototype.bypassSecurityTrustUrl = function (value) { };
    /**
     * Bypass security and trust the given value to be a safe resource URL, i.e. a location that may
     * be used to load executable code from, like `<script src>`, or `<iframe src>`.
     *
     * **WARNING:** calling this method with untrusted user data exposes your application to XSS
     * security risks!
     * @abstract
     * @param {?} value
     * @return {?}
     */
    DomSanitizer.prototype.bypassSecurityTrustResourceUrl = function (value) { };
    return DomSanitizer;
}());
var DomSanitizerImpl = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](DomSanitizerImpl, _super);
    /**
     * @param {?} _doc
     */
    function DomSanitizerImpl(_doc) {
        var _this = _super.call(this) || this;
        _this._doc = _doc;
        return _this;
    }
    /**
     * @param {?} ctx
     * @param {?} value
     * @return {?}
     */
    DomSanitizerImpl.prototype.sanitize = function (ctx, value) {
        if (value == null)
            return null;
        switch (ctx) {
            case __WEBPACK_IMPORTED_MODULE_2__angular_core__["_3" /* SecurityContext */].NONE:
                return (value);
            case __WEBPACK_IMPORTED_MODULE_2__angular_core__["_3" /* SecurityContext */].HTML:
                if (value instanceof SafeHtmlImpl)
                    return value.changingThisBreaksApplicationSecurity;
                this.checkNotSafeValue(value, 'HTML');
                return sanitizeHtml(this._doc, String(value));
            case __WEBPACK_IMPORTED_MODULE_2__angular_core__["_3" /* SecurityContext */].STYLE:
                if (value instanceof SafeStyleImpl)
                    return value.changingThisBreaksApplicationSecurity;
                this.checkNotSafeValue(value, 'Style');
                return sanitizeStyle(/** @type {?} */ (value));
            case __WEBPACK_IMPORTED_MODULE_2__angular_core__["_3" /* SecurityContext */].SCRIPT:
                if (value instanceof SafeScriptImpl)
                    return value.changingThisBreaksApplicationSecurity;
                this.checkNotSafeValue(value, 'Script');
                throw new Error('unsafe value used in a script context');
            case __WEBPACK_IMPORTED_MODULE_2__angular_core__["_3" /* SecurityContext */].URL:
                if (value instanceof SafeResourceUrlImpl || value instanceof SafeUrlImpl) {
                    // Allow resource URLs in URL contexts, they are strictly more trusted.
                    return value.changingThisBreaksApplicationSecurity;
                }
                this.checkNotSafeValue(value, 'URL');
                return sanitizeUrl(String(value));
            case __WEBPACK_IMPORTED_MODULE_2__angular_core__["_3" /* SecurityContext */].RESOURCE_URL:
                if (value instanceof SafeResourceUrlImpl) {
                    return value.changingThisBreaksApplicationSecurity;
                }
                this.checkNotSafeValue(value, 'ResourceURL');
                throw new Error('unsafe value used in a resource URL context (see http://g.co/ng/security#xss)');
            default:
                throw new Error("Unexpected SecurityContext " + ctx + " (see http://g.co/ng/security#xss)");
        }
    };
    /**
     * @param {?} value
     * @param {?} expectedType
     * @return {?}
     */
    DomSanitizerImpl.prototype.checkNotSafeValue = function (value, expectedType) {
        if (value instanceof SafeValueImpl) {
            throw new Error("Required a safe " + expectedType + ", got a " + value.getTypeName() + " " +
                "(see http://g.co/ng/security#xss)");
        }
    };
    /**
     * @param {?} value
     * @return {?}
     */
    DomSanitizerImpl.prototype.bypassSecurityTrustHtml = function (value) { return new SafeHtmlImpl(value); };
    /**
     * @param {?} value
     * @return {?}
     */
    DomSanitizerImpl.prototype.bypassSecurityTrustStyle = function (value) { return new SafeStyleImpl(value); };
    /**
     * @param {?} value
     * @return {?}
     */
    DomSanitizerImpl.prototype.bypassSecurityTrustScript = function (value) { return new SafeScriptImpl(value); };
    /**
     * @param {?} value
     * @return {?}
     */
    DomSanitizerImpl.prototype.bypassSecurityTrustUrl = function (value) { return new SafeUrlImpl(value); };
    /**
     * @param {?} value
     * @return {?}
     */
    DomSanitizerImpl.prototype.bypassSecurityTrustResourceUrl = function (value) {
        return new SafeResourceUrlImpl(value);
    };
    return DomSanitizerImpl;
}(DomSanitizer));
DomSanitizerImpl.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["B" /* Injectable */] },
];
/**
 * @nocollapse
 */
DomSanitizerImpl.ctorParameters = function () { return [
    { type: undefined, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["A" /* Inject */], args: [DOCUMENT$1,] },] },
]; };
/**
 * @abstract
 */
var SafeValueImpl = (function () {
    /**
     * @param {?} changingThisBreaksApplicationSecurity
     */
    function SafeValueImpl(changingThisBreaksApplicationSecurity) {
        this.changingThisBreaksApplicationSecurity = changingThisBreaksApplicationSecurity;
        // empty
    }
    /**
     * @abstract
     * @return {?}
     */
    SafeValueImpl.prototype.getTypeName = function () { };
    /**
     * @return {?}
     */
    SafeValueImpl.prototype.toString = function () {
        return "SafeValue must use [property]=binding: " + this.changingThisBreaksApplicationSecurity +
            " (see http://g.co/ng/security#xss)";
    };
    return SafeValueImpl;
}());
var SafeHtmlImpl = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](SafeHtmlImpl, _super);
    function SafeHtmlImpl() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @return {?}
     */
    SafeHtmlImpl.prototype.getTypeName = function () { return 'HTML'; };
    return SafeHtmlImpl;
}(SafeValueImpl));
var SafeStyleImpl = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](SafeStyleImpl, _super);
    function SafeStyleImpl() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @return {?}
     */
    SafeStyleImpl.prototype.getTypeName = function () { return 'Style'; };
    return SafeStyleImpl;
}(SafeValueImpl));
var SafeScriptImpl = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](SafeScriptImpl, _super);
    function SafeScriptImpl() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @return {?}
     */
    SafeScriptImpl.prototype.getTypeName = function () { return 'Script'; };
    return SafeScriptImpl;
}(SafeValueImpl));
var SafeUrlImpl = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](SafeUrlImpl, _super);
    function SafeUrlImpl() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @return {?}
     */
    SafeUrlImpl.prototype.getTypeName = function () { return 'URL'; };
    return SafeUrlImpl;
}(SafeValueImpl));
var SafeResourceUrlImpl = (function (_super) {
    __WEBPACK_IMPORTED_MODULE_0_tslib__["a" /* __extends */](SafeResourceUrlImpl, _super);
    function SafeResourceUrlImpl() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * @return {?}
     */
    SafeResourceUrlImpl.prototype.getTypeName = function () { return 'ResourceURL'; };
    return SafeResourceUrlImpl;
}(SafeValueImpl));
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var INTERNAL_BROWSER_PLATFORM_PROVIDERS = [
    { provide: __WEBPACK_IMPORTED_MODULE_2__angular_core__["T" /* PLATFORM_ID */], useValue: __WEBPACK_IMPORTED_MODULE_1__angular_common__["d" /* PLATFORM_BROWSER_ID */] },
    { provide: __WEBPACK_IMPORTED_MODULE_2__angular_core__["U" /* PLATFORM_INITIALIZER */], useValue: initDomAdapter, multi: true },
    { provide: __WEBPACK_IMPORTED_MODULE_1__angular_common__["c" /* PlatformLocation */], useClass: BrowserPlatformLocation },
    { provide: DOCUMENT$1, useFactory: _document, deps: [] },
];
/**
 * \@security Replacing built-in sanitization providers exposes the application to XSS risks.
 * Attacker-controlled data introduced by an unsanitized provider could expose your
 * application to XSS risks. For more detail, see the [Security Guide](http://g.co/ng/security).
 * \@experimental
 */
var BROWSER_SANITIZATION_PROVIDERS = [
    { provide: __WEBPACK_IMPORTED_MODULE_2__angular_core__["_2" /* Sanitizer */], useExisting: DomSanitizer },
    { provide: DomSanitizer, useClass: DomSanitizerImpl },
];
/**
 * \@stable
 */
var platformBrowser = Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["_18" /* createPlatformFactory */])(__WEBPACK_IMPORTED_MODULE_2__angular_core__["_24" /* platformCore */], 'browser', INTERNAL_BROWSER_PLATFORM_PROVIDERS);
/**
 * @return {?}
 */
function initDomAdapter() {
    BrowserDomAdapter.makeCurrent();
    BrowserGetTestability.init();
}
/**
 * @return {?}
 */
function errorHandler() {
    return new __WEBPACK_IMPORTED_MODULE_2__angular_core__["v" /* ErrorHandler */]();
}
/**
 * @return {?}
 */
function _document() {
    return document;
}
/**
 * The ng module for the browser.
 *
 * \@stable
 */
var BrowserModule = (function () {
    /**
     * @param {?} parentModule
     */
    function BrowserModule(parentModule) {
        if (parentModule) {
            throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.");
        }
    }
    /**
     * Configures a browser-based application to transition from a server-rendered app, if
     * one is present on the page. The specified parameters must include an application id,
     * which must match between the client and server applications.
     *
     * \@experimental
     * @param {?} params
     * @return {?}
     */
    BrowserModule.withServerTransition = function (params) {
        return {
            ngModule: BrowserModule,
            providers: [
                { provide: __WEBPACK_IMPORTED_MODULE_2__angular_core__["b" /* APP_ID */], useValue: params.appId },
                { provide: TRANSITION_ID, useExisting: __WEBPACK_IMPORTED_MODULE_2__angular_core__["b" /* APP_ID */] },
                SERVER_TRANSITION_PROVIDERS,
            ],
        };
    };
    return BrowserModule;
}());
BrowserModule.decorators = [
    { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["L" /* NgModule */], args: [{
                providers: [
                    BROWSER_SANITIZATION_PROVIDERS,
                    { provide: __WEBPACK_IMPORTED_MODULE_2__angular_core__["v" /* ErrorHandler */], useFactory: errorHandler, deps: [] },
                    { provide: EVENT_MANAGER_PLUGINS, useClass: DomEventsPlugin, multi: true },
                    { provide: EVENT_MANAGER_PLUGINS, useClass: KeyEventsPlugin, multi: true },
                    { provide: EVENT_MANAGER_PLUGINS, useClass: HammerGesturesPlugin, multi: true },
                    { provide: HAMMER_GESTURE_CONFIG, useClass: HammerGestureConfig },
                    DomRendererFactory2,
                    { provide: __WEBPACK_IMPORTED_MODULE_2__angular_core__["_0" /* RendererFactory2 */], useExisting: DomRendererFactory2 },
                    { provide: SharedStylesHost, useExisting: DomSharedStylesHost },
                    DomSharedStylesHost,
                    __WEBPACK_IMPORTED_MODULE_2__angular_core__["_9" /* Testability */],
                    EventManager,
                    ELEMENT_PROBE_PROVIDERS,
                    Meta,
                    Title,
                ],
                exports: [__WEBPACK_IMPORTED_MODULE_1__angular_common__["a" /* CommonModule */], __WEBPACK_IMPORTED_MODULE_2__angular_core__["e" /* ApplicationModule */]]
            },] },
];
/**
 * @nocollapse
 */
BrowserModule.ctorParameters = function () { return [
    { type: BrowserModule, decorators: [{ type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["Q" /* Optional */] }, { type: __WEBPACK_IMPORTED_MODULE_2__angular_core__["_5" /* SkipSelf */] },] },
]; };
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var win = typeof window !== 'undefined' && window || {};
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var ChangeDetectionPerfRecord = (function () {
    /**
     * @param {?} msPerTick
     * @param {?} numTicks
     */
    function ChangeDetectionPerfRecord(msPerTick, numTicks) {
        this.msPerTick = msPerTick;
        this.numTicks = numTicks;
    }
    return ChangeDetectionPerfRecord;
}());
/**
 * Entry point for all Angular profiling-related debug tools. This object
 * corresponds to the `ng.profiler` in the dev console.
 */
var AngularProfiler = (function () {
    /**
     * @param {?} ref
     */
    function AngularProfiler(ref) {
        this.appRef = ref.injector.get(__WEBPACK_IMPORTED_MODULE_2__angular_core__["f" /* ApplicationRef */]);
    }
    /**
     * Exercises change detection in a loop and then prints the average amount of
     * time in milliseconds how long a single round of change detection takes for
     * the current state of the UI. It runs a minimum of 5 rounds for a minimum
     * of 500 milliseconds.
     *
     * Optionally, a user may pass a `config` parameter containing a map of
     * options. Supported options are:
     *
     * `record` (boolean) - causes the profiler to record a CPU profile while
     * it exercises the change detector. Example:
     *
     * ```
     * ng.profiler.timeChangeDetection({record: true})
     * ```
     * @param {?} config
     * @return {?}
     */
    AngularProfiler.prototype.timeChangeDetection = function (config) {
        var /** @type {?} */ record = config && config['record'];
        var /** @type {?} */ profileName = 'Change Detection';
        // Profiler is not available in Android browsers, nor in IE 9 without dev tools opened
        var /** @type {?} */ isProfilerAvailable = win.console.profile != null;
        if (record && isProfilerAvailable) {
            win.console.profile(profileName);
        }
        var /** @type {?} */ start = getDOM().performanceNow();
        var /** @type {?} */ numTicks = 0;
        while (numTicks < 5 || (getDOM().performanceNow() - start) < 500) {
            this.appRef.tick();
            numTicks++;
        }
        var /** @type {?} */ end = getDOM().performanceNow();
        if (record && isProfilerAvailable) {
            // need to cast to <any> because type checker thinks there's no argument
            // while in fact there is:
            //
            // https://developer.mozilla.org/en-US/docs/Web/API/Console/profileEnd
            ((win.console.profileEnd))(profileName);
        }
        var /** @type {?} */ msPerTick = (end - start) / numTicks;
        win.console.log("ran " + numTicks + " change detection cycles");
        win.console.log(msPerTick.toFixed(2) + " ms per check");
        return new ChangeDetectionPerfRecord(msPerTick, numTicks);
    };
    return AngularProfiler;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
var PROFILER_GLOBAL_NAME = 'profiler';
/**
 * Enabled Angular debug tools that are accessible via your browser's
 * developer console.
 *
 * Usage:
 *
 * 1. Open developer console (e.g. in Chrome Ctrl + Shift + j)
 * 1. Type `ng.` (usually the console will show auto-complete suggestion)
 * 1. Try the change detection profiler `ng.profiler.timeChangeDetection()`
 *    then hit Enter.
 *
 * \@experimental All debugging apis are currently experimental.
 * @template T
 * @param {?} ref
 * @return {?}
 */
function enableDebugTools(ref) {
    exportNgVar(PROFILER_GLOBAL_NAME, new AngularProfiler(ref));
    return ref;
}
/**
 * Disables Angular tools.
 *
 * \@experimental All debugging apis are currently experimental.
 * @return {?}
 */
function disableDebugTools() {
    exportNgVar(PROFILER_GLOBAL_NAME, null);
}
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * Predicates for use with {\@link DebugElement}'s query functions.
 *
 * \@experimental All debugging apis are currently experimental.
 */
var By = (function () {
    function By() {
    }
    /**
     * Match all elements.
     *
     * ## Example
     *
     * {\@example platform-browser/dom/debug/ts/by/by.ts region='by_all'}
     * @return {?}
     */
    By.all = function () { return function (debugElement) { return true; }; };
    /**
     * Match elements by the given CSS selector.
     *
     * ## Example
     *
     * {\@example platform-browser/dom/debug/ts/by/by.ts region='by_css'}
     * @param {?} selector
     * @return {?}
     */
    By.css = function (selector) {
        return function (debugElement) {
            return debugElement.nativeElement != null ?
                getDOM().elementMatches(debugElement.nativeElement, selector) :
                false;
        };
    };
    /**
     * Match elements that have the given directive present.
     *
     * ## Example
     *
     * {\@example platform-browser/dom/debug/ts/by/by.ts region='by_directive'}
     * @param {?} type
     * @return {?}
     */
    By.directive = function (type) {
        return function (debugElement) { return ((debugElement.providerTokens)).indexOf(type) !== -1; };
    };
    return By;
}());
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all public APIs of the common package.
 */
/**
 * \@stable
 */
var VERSION = new __WEBPACK_IMPORTED_MODULE_2__angular_core__["_11" /* Version */]('4.4.5');
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @license
 * Copyright Google Inc. All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/**
 * @module
 * @description
 * Entry point for all public APIs of the platform-browser package.
 */
// This file only reexports content of the `src` folder. Keep it that way.
/**
 * Generated bundle index. Do not edit.
 */

//# sourceMappingURL=platform-browser.es5.js.map


/***/ })

});
//# sourceMappingURL=vendor.bundle.js.map